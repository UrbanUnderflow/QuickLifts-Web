"use strict";exports.id=180,exports.ids=[180],exports.modules={3785:(e,s,t)=>{t.d(s,{Z:()=>l});let l=(0,t(1462).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},9976:(e,s,t)=>{t.d(s,{Z:()=>l});let l=(0,t(1462).Z)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]])},6111:(e,s,t)=>{t.d(s,{Z:()=>l});let l=(0,t(1462).Z)("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]])},5482:(e,s,t)=>{t.d(s,{Z:()=>l});let l=(0,t(1462).Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},4672:(e,s,t)=>{t.d(s,{Z:()=>l});let l=(0,t(1462).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9544:(e,s,t)=>{t.a(e,async(e,l)=>{try{t.d(s,{$Q:()=>a.$});var r=t(6738),a=t(6883),i=e([r,a]);[r,a]=i.then?(await i)():i,l()}catch(e){l(e)}})},747:(e,s,t)=>{t.a(e,async(e,l)=>{try{t.d(s,{Z:()=>d});var r=t(997),a=t(6689),i=t.n(a),c=t(9315),n=t(8157),o=e([n]);n=(o.then?(await o)():o)[0];let d=({selectedTab:e,onTabChange:s})=>{i().useEffect(()=>{console.log("Current user in BottomNav:",n.W4.currentUser),n.W4.currentUser?.profileImage&&console.log("Profile image data:",n.W4.currentUser.profileImage)},[]);let t=n.W4.currentUser;console.log("Rendering BottomNav with currentUser:",t),console.log("Has profile image?",t&&t.profileImage&&t.profileImage.profileImageURL);let l=[{id:c.O.Discover,label:"Discover",icon:"/discover-icon.svg",selectedIcon:"/discover-icon-selected.svg"},{id:c.O.Search,label:"Search",icon:"/search-icon.svg",selectedIcon:"/search-icon-selected.svg"},{id:c.O.Create,label:"",icon:"/create-icon.svg",selectedIcon:"/create-icon.svg"},{id:c.O.Messages,label:"Message",icon:"/message-icon.svg",selectedIcon:"/message-icon-selected.svg"},{id:c.O.Profile,label:"Profile",icon:"/profile-icon.svg",selectedIcon:"/profile-icon-selected.svg"}];return r.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-zinc-800/80 backdrop-blur-sm border-t border-zinc-700",children:r.jsx("div",{className:"max-w-md mx-auto px-8 py-4 flex justify-between items-center",children:l.map(t=>{let l=e===t.id,a=t.id===c.O.Profile,i=n.W4.currentUser,o=i&&i.profileImage&&i.profileImage.profileImageURL;return r.jsx("button",{className:"flex flex-col items-center gap-1",onClick:()=>s(t.id),children:t.id===c.O.Create?r.jsx("div",{className:"w-12 h-12 bg-[#E0FE10] rounded-full flex items-center justify-center -mt-6",children:r.jsx("img",{src:t.icon,alt:t.label,className:"w-6 h-6"})}):(0,r.jsxs)(r.Fragment,{children:[a&&o?r.jsx("img",{src:i.profileImage.profileImageURL,alt:"User profile",className:`w-6 h-6 rounded-full object-cover
                        ${l?"ring-2 ring-[#E0FE10]":""}
                        `,onError:e=>{console.error("Error loading profile image:",e),e.currentTarget.src=t.icon}}):r.jsx("img",{src:l?t.selectedIcon:t.icon,alt:t.label,className:"w-6 h-6"}),t.label&&r.jsx("span",{className:`text-xs ${l?"text-[#E0FE10]":"text-zinc-400"}`,children:t.label})]})},t.id)})})})};l()}catch(e){l(e)}})},9854:(e,s,t)=>{t.d(s,{Z:()=>c});var l=t(997);t(6689);var r=t(8154),a=t(5482);let i=({icon:e,value:s,label:t})=>(0,l.jsxs)("div",{className:"flex items-center gap-2 text-zinc-400",children:[e,(0,l.jsxs)("div",{className:"flex items-baseline gap-1",children:[l.jsx("span",{className:"text-sm font-medium",children:s}),l.jsx("span",{className:"text-xs",children:t})]})]}),c=({workout:e,onResume:s,onCancel:t})=>(0,l.jsxs)("div",{className:"bg-zinc-900 rounded-xl overflow-hidden",children:[l.jsx("div",{className:"p-4",children:l.jsx("div",{className:"flex justify-between items-start",children:(0,l.jsxs)("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-white font-bold",children:e.title}),(0,l.jsxs)("div",{className:"flex gap-4 items-center",children:[l.jsx(i,{icon:l.jsx("span",{className:"text-lg",children:"\uD83C\uDFC3"}),value:e.logs?.length.toString()||"0",label:"moves"}),l.jsx(i,{icon:l.jsx("span",{className:"text-lg",children:"⏰"}),value:e.duration.toString(),label:"min"}),l.jsx("span",{className:"px-3 py-1.5 text-xs bg-[#E0FE10]/20 text-[#E0FE10] rounded-full",children:e.zone})]})]})})}),l.jsx("div",{className:"px-4 py-2 flex gap-2",children:e.logs?.slice(0,3).map((e,s)=>l.jsx("div",{className:"w-[70px] h-[80px] rounded-xl overflow-hidden bg-zinc-800",children:l.jsx("img",{src:e.exercise.videos?.[0]?.gifURL||"/placeholder-exercise.gif",alt:e.exercise.name,className:"w-full h-full object-cover"})},s))}),(0,l.jsxs)("div",{className:"p-4 flex gap-3",children:[(0,l.jsxs)("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-red-500/20 text-red-500 font-medium text-sm",children:[l.jsx(r.Z,{size:16}),"Cancel"]}),(0,l.jsxs)("button",{onClick:s,className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-[#E0FE10]/20 text-[#E0FE10] font-medium text-sm",children:[l.jsx(a.Z,{size:16}),"Resume"]})]})]})},34:(e,s,t)=>{t.a(e,async(e,l)=>{try{t.d(s,{Z:()=>j});var r=t(997),a=t(6689),i=t(1163),c=t(3291),n=t(8154),o=t(2069),d=t(2742),x=t(9003),u=t.n(x),m=t(8157),h=t(4565),g=t(1308),f=t(9854),p=t(7206),b=e([c,o,m,h,g]);[c,o,m,h,g]=b.then?(await b)():b;let j=({isVisible:e,onClose:s,onStartWorkout:t})=>{let l=(0,c.useDispatch)(),x=(0,c.useSelector)(e=>e.workout.currentWorkout);(0,c.useSelector)(e=>e.workout.currentExerciseLogs);let[b,j]=(0,a.useState)(!0),[v,N]=(0,a.useState)([]),[w,y]=(0,a.useState)("today"),[k,E]=(0,a.useState)(!1),[S,z]=(0,a.useState)([]),C=(0,i.useRouter)();(0,a.useEffect)(()=>{e&&(console.log("We are visible!: "+x),Z(),I(),L())},[e]);let F=e=>{if(!e)return 0;let s=new Date(e),t=new Date,l=s.getTime()-t.getTime();return Math.max(0,Math.ceil(l/864e5))},Z=async()=>{j(!0);try{let e=await h.G_.fetchCurrentWorkoutSession(m.W4.currentUser?.id||"");e&&(l((0,g.q1)(e.workout)),l((0,g.HX)(e.logs||[])))}catch(e){console.error("Error fetching workout:",e)}finally{j(!1)}},I=async()=>{try{let e=await U();N(e)}catch(e){console.error("Error fetching challenges:",e)}},L=async()=>{try{let e=await W();z(e)}catch(e){console.error("Error fetching recent workouts:",e)}},U=async()=>{try{let e=await h.G_.fetchActiveChallenges();console.log("User Challenges:",e);let s=e.length>0?e[0]:null;return s?console.log("Active Challenge:",s):console.log("No active challenges found."),e}catch(e){return console.error("Error fetching user challenges:",e),[]}},W=async()=>{try{let e=new Date;console.log("Fetching workouts for date:",e);let s=await h.G_.fetchAllWorkoutSummaries();return console.log("Here are the summaries:",s),s.slice(0,3).map(e=>o.P7.fromFirebase({id:e.id,workoutId:e.workoutId||"",exercises:e.exercises||[],bodyParts:e.bodyParts||[],secondaryBodyParts:e.secondaryBodyParts||[],workoutTitle:e.workoutTitle||"Untitled Workout",caloriesBurned:e.caloriesBurned||0,workoutRating:e.workoutRating,exercisesCompleted:e.exercisesCompleted||[],aiInsight:e.aiInsight||"",recommendations:e.recommendations||[],gifURLs:e.gifURLs||[],recommendedWork:e.recommendedWork,isCompleted:e.isCompleted||!1,createdAt:e.createdAt,updatedAt:e.updatedAt,completedAt:e.completedAt,duration:e.duration||""}))}catch(e){return console.error("Error fetching recent workouts:",e),[]}},P=()=>{E(!0)},R=async()=>{if(x)try{t&&await t(x),s()}catch(e){console.error("Error starting workout:",e)}},T=()=>{console.log("Workout canceled")},D=e=>{s(),C.push(`/round/${e.challengeId}`)},A=e=>e.toLocaleDateString(void 0,{month:"short",day:"numeric"}),M=e=>{console.log("Open summary for workout:",e)};return e?r.jsx(r.Fragment,{children:e&&(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col bg-[#E0FE10] overflow-hidden",children:[r.jsx("button",{onClick:s,className:"self-end m-4",children:r.jsx(n.Z,{size:24,className:"text-black"})}),(0,r.jsxs)("div",{className:"flex bg-black/10",children:[r.jsx("button",{onClick:()=>y("today"),className:u()("flex-1 py-3 text-center","today"===w?"border-b-2 border-black font-bold":""),children:"Today"}),r.jsx("button",{onClick:()=>y("rounds"),className:u()("flex-1 py-3 text-center","rounds"===w?"border-b-2 border-black font-bold":""),children:"Rounds"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:k?r.jsx(d.Z,{onClose:()=>E(!1),onCreateWorkout:e=>{console.log("Creating workout with parts:",e),E(!1)}}):(0,r.jsxs)(r.Fragment,{children:["today"===w&&(()=>{if(b)return r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("div",{className:"text-black",children:"Loading..."})});if(!h.G_.currentWorkout)return(0,r.jsxs)("div",{className:"flex flex-col p-8 bg-[#E0FE10] rounded-lg",children:[r.jsx("h3",{className:"text-2xl font-bold text-black mb-4",children:"You don't have your workout for today yet."}),(0,r.jsxs)("button",{onClick:P,className:"mt-2 flex items-center text-lg font-medium text-black",children:["Get a workout",r.jsx("svg",{className:"ml-2 w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:r.jsx("path",{d:"M5 12h14m-7-7l7 7-7 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),v.length>0&&r.jsx("div",{className:"mt-auto pt-8",children:(0,r.jsxs)("div",{className:"bg-black/10 rounded-full py-3 px-6 inline-flex items-center gap-2",children:[r.jsx("span",{className:"text-black",children:"Swipe to see"}),(0,r.jsxs)("span",{className:"font-bold text-black",children:[v.length," Active Rounds"]}),r.jsx("svg",{className:"w-4 h-4 text-black",viewBox:"0 0 24 24",fill:"none",children:r.jsx("path",{d:"M9 5l7 7-7 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]});switch(h.G_.currentWorkout.workoutStatus){case o.Z0.QueuedUp:return r.jsx("div",{className:"p-6",children:r.jsx(p.Z,{workout:h.G_.currentWorkout,onStart:R,onCancel:T})});case o.Z0.InProgress:return r.jsx("div",{className:"p-6",children:r.jsx(f.Z,{workout:h.G_.currentWorkout,onResume:R,onCancel:T})});default:return null}})(),"rounds"===w&&(()=>{let e=e=>{if(!e.challenge?.startDate||!e.challenge?.endDate)return 0;let s=new Date(e.challenge.startDate),t=new Date(e.challenge.endDate),l=new Date,r=t.getTime()-s.getTime(),a=l.getTime()-s.getTime();return Math.min(Math.max(a/r,0),1)};return(0,r.jsxs)("div",{className:"p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-black mb-4",children:"Active Rounds"}),0===v.length?r.jsx("p",{className:"text-black",children:"No active rounds"}):r.jsx("div",{className:"space-y-4",children:v.map(s=>r.jsx("button",{onClick:()=>D(s),className:"w-full text-left",children:(0,r.jsxs)("div",{className:"p-4 space-y-3 bg-zinc-800 rounded-xl",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-white font-semibold",children:s.challenge?.title}),(0,r.jsxs)("span",{className:"text-[#E0FE10] text-sm",children:[F(s.challenge?.endDate),"d left"]})]}),r.jsx("div",{className:"h-2 bg-zinc-700 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-[#E0FE10] rounded-full",style:{width:`${100*e(s)}%`}})}),r.jsx("div",{className:"flex justify-between text-sm text-white/70",children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:r.jsx("path",{d:"M15.45 22c1.95.31 3.5-1.24 3.5-3.19V5.19c0-1.95-1.55-3.5-3.5-3.19m0 20H8.55c-1.95.31-3.5-1.24-3.5-3.19V5.19c0-1.95 1.55-3.5 3.5-3.19"})}),(0,r.jsxs)("span",{children:[s.currentStreak," day streak"]})]})})]},s.id)},s.id))})]})})(),"today"===w&&(0===S.length?null:(0,r.jsxs)("div",{className:"p-6 bg-[#E0FE10] rounded-lg mt-4",children:[r.jsx("h2",{className:"text-xl font-bold text-black mb-4",children:"Recent Workouts"}),r.jsx("div",{className:"space-y-4",children:S.slice(0,3).map(e=>(0,r.jsxs)("button",{onClick:()=>M(e),className:"w-full p-4 bg-black rounded-lg text-white flex justify-between items-center hover:bg-black/80 transition",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-bold",children:e.workoutTitle}),(0,r.jsxs)("p",{className:"text-sm",children:[A(e.createdAt)," \xb7 ",e.duration," min"]})]}),(0,r.jsxs)("span",{className:"font-bold",children:["Score: ",e.duration]})]},e.id))})]}))]})})]})}):null};l()}catch(e){l(e)}})},7206:(e,s,t)=>{t.d(s,{Z:()=>o});var l=t(997);t(6689);var r=t(6111),a=t(7218),i=t(8154),c=t(5482);let n=({icon:e,value:s,label:t})=>(0,l.jsxs)("div",{className:"flex items-center gap-2 text-zinc-400",children:[e,(0,l.jsxs)("div",{className:"flex items-baseline gap-1",children:[l.jsx("span",{className:"text-sm font-medium",children:s}),l.jsx("span",{className:"text-xs",children:t})]})]}),o=({workout:e,onStart:s,onCancel:t})=>(0,l.jsxs)("div",{className:"bg-zinc-900 rounded-xl overflow-hidden",children:[l.jsx("div",{className:"p-4",children:l.jsx("div",{className:"flex justify-between items-start",children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-[#E0FE10] text-sm font-medium",children:"Ready to start"}),l.jsx("h3",{className:"text-white font-bold text-xl",children:e.title})]}),(0,l.jsxs)("div",{className:"flex gap-4 items-center",children:[l.jsx(n,{icon:l.jsx(r.Z,{className:"w-4 h-4 text-zinc-400"}),value:e.logs?.length.toString()||"0",label:"exercises"}),l.jsx(n,{icon:l.jsx(a.Z,{className:"w-4 h-4 text-zinc-400"}),value:e.duration.toString(),label:"min"}),l.jsx("span",{className:"px-3 py-1.5 text-xs bg-[#E0FE10]/20 text-[#E0FE10] rounded-full",children:e.zone})]})]})})}),l.jsx("div",{className:"px-4 py-2 flex gap-2",children:e.logs?.slice(0,3).map((e,s)=>l.jsxs("div",{className:"w-[70px] h-[80px] rounded-xl overflow-hidden bg-zinc-800 relative group",children:[l.jsx("img",{src:e.exercise.videos?.[0]?.gifURL||"/placeholder-exercise.gif",alt:e.exercise.name,className:"w-full h-full object-cover"}),l.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx("span",{className:"text-xs text-white text-center px-2",children:e.exercise.name})})]},s))}),(0,l.jsxs)("div",{className:"p-4 flex gap-3",children:[(0,l.jsxs)("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-red-500/20 text-red-500 font-medium text-sm hover:bg-red-500/30 transition-colors",children:[l.jsx(i.Z,{size:16}),"Cancel"]}),(0,l.jsxs)("button",{onClick:s,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-xl bg-[#E0FE10] text-black font-medium text-sm hover:bg-[#E0FE10]/90 transition-colors",children:[l.jsx(c.Z,{size:16}),"Start Workout"]})]})]})},2742:(e,s,t)=>{t.d(s,{Z:()=>c});var l=t(997),r=t(6689),a=t(8154),i=t(3785);let c=({onClose:e,onCreateWorkout:s})=>{let[t,i]=(0,r.useState)([]),c=e=>{i(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])};return(0,l.jsxs)("div",{className:"fixed inset-0 bg-zinc-900 flex flex-col min-h-screen",children:[(0,l.jsxs)("div",{className:"p-6 pb-2",children:[l.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full bg-zinc-800 flex items-center justify-center",children:l.jsx(a.Z,{className:"text-white",size:20})}),l.jsx("h1",{className:"text-4xl font-bold text-white mt-6 mb-2",children:"Choose the body parts you want to workout."}),l.jsx("p",{className:"text-zinc-400 text-lg",children:"You can choose multiple body parts"})]}),(0,l.jsxs)("div",{className:"flex-1 p-6 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 overflow-y-auto max-w-6xl mx-auto scrollbar-hide",children:[l.jsx(n,{id:"body-parts/bicep",name:"Biceps",isSelected:t.includes("bicep"),onToggle:c}),l.jsx(n,{id:"body-parts/tricep",name:"Triceps",isSelected:t.includes("triceps"),onToggle:c}),l.jsx(n,{id:"body-parts/chest",name:"Chest",isSelected:t.includes("chest"),onToggle:c}),l.jsx(n,{id:"body-parts/calves",name:"Calves",isSelected:t.includes("calves"),onToggle:c}),l.jsx(n,{id:"body-parts/abs",name:"Abs",isSelected:t.includes("abs"),onToggle:c}),l.jsx(n,{id:"body-parts/hamstrings",name:"Hamstrings",isSelected:t.includes("hamstrings"),onToggle:c}),l.jsx(n,{id:"body-parts/back",name:"Back",isSelected:t.includes("back"),onToggle:c}),l.jsx(n,{id:"body-parts/deltoids",name:"Deltoids",isSelected:t.includes("deltoids"),onToggle:c}),l.jsx(n,{id:"body-parts/glutes",name:"Glutes",isSelected:t.includes("glutes"),onToggle:c}),l.jsx(n,{id:"body-parts/lats",name:"Lats",isSelected:t.includes("lats"),onToggle:c}),l.jsx(n,{id:"body-parts/lowerback",name:"Lower Back",isSelected:t.includes("lowerback"),onToggle:c}),l.jsx(n,{id:"body-parts/quadriceps",name:"Quadriceps",isSelected:t.includes("quadriceps"),onToggle:c}),l.jsx(n,{id:"body-parts/rhomboids",name:"Rhomboids",isSelected:t.includes("rhomboids"),onToggle:c})]}),t.length>0&&l.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-zinc-900/80 backdrop-blur-sm border-t border-zinc-800",children:l.jsx("div",{className:"max-w-6xl mx-auto",children:l.jsx("button",{onClick:()=>s(t),className:"w-full py-4 rounded-full bg-[#E0FE10] text-black font-semibold text-lg",children:"Create workout"})})})]})},n=({id:e,name:s,isSelected:t,onToggle:r})=>(0,l.jsxs)("button",{onClick:()=>r(e),className:`relative aspect-square rounded-2xl bg-zinc-800/50 flex flex-col items-center justify-end
        ${t?"ring-2 ring-[#E0FE10]":""}
        max-w-[250px] w-full mx-auto`,children:[l.jsx("img",{src:`${e}.svg`,alt:s,className:"w-full h-full object-contain opacity-75"}),t&&l.jsx("div",{className:"absolute top-4 right-4 w-6 h-6 rounded-full bg-[#E0FE10] flex items-center justify-center",children:l.jsx(i.Z,{className:"text-black",size:16})})]})},942:(e,s,t)=>{t.d(s,{Z:()=>n});var l=t(997),r=t(6689),a=t(8154);let i=({isOpen:e,onClose:s,title:t,message:r,primaryButtonText:i,secondaryButtonText:c,onPrimaryAction:n,onSecondaryAction:o,theme:d="dark"})=>e?(0,l.jsxs)("div",{className:"fixed inset-0 z-50",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:s}),l.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-md",children:(0,l.jsxs)("div",{className:`
          relative mx-4 p-6 rounded-2xl shadow-lg 
          ${"dark"===d?"bg-zinc-900":"bg-white"}
        `,children:[l.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-500",children:l.jsx(a.Z,{size:20})}),(0,l.jsxs)("div",{className:"text-center",children:[l.jsx("h3",{className:`text-lg font-bold mb-2 
              ${"dark"===d?"text-white":"text-black"}`,children:t}),r&&l.jsx("p",{className:`mb-6 
                ${"dark"===d?"text-zinc-400":"text-gray-600"}`,children:r}),(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[l.jsx("button",{onClick:n,className:"w-full bg-[#E0FE10] text-black px-4 py-2 rounded-full font-medium  hover:bg-[#E0FE10]/90 transition-colors",children:i}),c&&l.jsx("button",{onClick:o,className:`w-full px-4 py-2 rounded-full font-medium border 
                    ${"dark"===d?"border-zinc-700 text-white hover:bg-zinc-800":"border-gray-300 text-gray-700 hover:bg-gray-50"} transition-colors`,children:c})]})]})]})})]}):null,c=e=>e?.category?.details?.screenTime??60,n=({exercises:e,currentExerciseLogs:s,currentExerciseIndex:t,onComplete:n,onClose:o,onExerciseSelect:d})=>{if(!e||0===e.length)return console.error("No exercises provided"),(0,l.jsxs)("div",{className:"fixed inset-0 bg-zinc-900 flex items-center justify-center",children:[l.jsx("p",{className:"text-white",children:"No exercises available"}),l.jsx("button",{onClick:o,className:"mt-4 bg-[#E0FE10] text-black px-4 py-2 rounded",children:"Close Workout"})]});if(t<0||t>=e.length)return console.error("Invalid exercise index",{currentExerciseIndex:t,exercisesLength:e.length}),(0,l.jsxs)("div",{className:"fixed inset-0 bg-zinc-900 flex items-center justify-center",children:[l.jsx("p",{className:"text-white",children:"Invalid exercise selection"}),l.jsx("button",{onClick:o,className:"mt-4 bg-[#E0FE10] text-black px-4 py-2 rounded",children:"Close Workout"})]});let x=s[t],u=x?.exercise;if(!u)return console.error("No exercise found at current index",{currentExerciseIndex:t,exerciseLog:x}),(0,l.jsxs)("div",{className:"fixed inset-0 bg-zinc-900 flex items-center justify-center",children:[l.jsx("p",{className:"text-white",children:"Exercise data is missing"}),l.jsx("button",{onClick:o,className:"mt-4 bg-[#E0FE10] text-black px-4 py-2 rounded",children:"Close Workout"})]});let m=c(u),[h,g]=(0,r.useState)(m),[f,p]=(0,r.useState)(!1),[b,j]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{g(c(u))},[u]),(0,r.useEffect)(()=>{if(m<=0)return;if(h<=0){n();return}if(f)return;let e=setInterval(()=>{g(e=>e-1)},1e3);return()=>clearInterval(e)},[h,f,n,m]),(0,l.jsxs)("div",{className:"fixed inset-0 bg-zinc-900 flex flex-col",children:[(0,l.jsxs)("div",{className:"relative flex h-full",children:[(0,l.jsxs)("div",{className:"w-full lg:w-2/3 relative bg-black",children:[l.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:(0,l.jsxs)("div",{className:"w-[700px] h-[900px] relative rounded-2xl overflow-hidden",children:[l.jsx("video",{src:(()=>{let e=u?.videos||[];if(0===e.length)return console.warn(`No videos found for exercise: ${u?.name}`),"";let s=Math.min(u?.currentVideoPosition??0,e.length-1),t=e[s]?.videoURL||"";return t||console.warn(`No video URL for exercise ${u?.name}`),t})(),className:"absolute inset-0 w-full h-full object-cover",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,onError:e=>console.error("Video error:",e)}),l.jsx("div",{className:"hidden lg:block absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent",children:(0,l.jsxs)("div",{className:"p-8",children:[l.jsx("h2",{className:"text-white text-3xl font-bold mb-4",children:u?.name||"Exercise"}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsxs)("span",{className:"text-[#E0FE10] text-lg font-bold",children:[Math.floor((m-h)/60),"m"]}),l.jsx("p",{className:"text-zinc-400 text-sm",children:"elapsed"})]}),m>0&&l.jsx("button",{onClick:()=>p(!f),className:"bg-black/30 hover:bg-black/50 p-4 rounded-xl border border-[#E0FE10]/20 backdrop-blur-sm transition-all duration-200 group",children:f?(0,l.jsxs)("svg",{className:"w-6 h-6 text-[#E0FE10] group-hover:scale-110 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}):l.jsx("svg",{className:"w-6 h-6 text-[#E0FE10] group-hover:scale-110 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsxs)("span",{className:"text-[#E0FE10] text-lg font-bold",children:[t+1,"/",s.length]}),l.jsx("p",{className:"text-zinc-400 text-sm",children:"exercises"})]})]})]})}),l.jsx("div",{className:"lg:hidden absolute top-0 left-0 right-0 bg-gradient-to-b from-black/90 to-transparent",children:(0,l.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsxs)("span",{className:"text-[#E0FE10] text-lg font-bold",children:[Math.floor((m-h)/60),"m"]}),l.jsx("p",{className:"text-zinc-400 text-xs",children:"elapsed"})]}),m>0&&l.jsx("button",{onClick:()=>p(!f),className:"bg-black/30 hover:bg-black/50 p-3 rounded-xl border border-[#E0FE10]/20 backdrop-blur-sm"}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsxs)("span",{className:"text-[#E0FE10] text-lg font-bold",children:[t+1,"/",s.length]}),l.jsx("p",{className:"text-zinc-400 text-xs",children:"exercises"})]})]})})]})}),l.jsx("button",{onClick:()=>j(!0),className:"absolute top-4 right-4 w-10 h-10 rounded-full bg-black/50 flex items-center justify-center",children:l.jsx(a.Z,{className:"text-white",size:20})})]}),l.jsx("div",{className:"hidden lg:flex lg:w-1/3 p-6",children:(0,l.jsxs)("div",{className:"w-full bg-black/50 rounded-2xl p-6 flex flex-col",children:[l.jsx("h2",{className:"text-white text-2xl font-bold mb-6",children:"Workout Progress"}),l.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:s.map((e,s)=>l.jsx("div",{onClick:()=>d(s),className:`mb-4 p-4 rounded-lg cursor-pointer hover:bg-zinc-700/50 transition-colors ${s===t?"bg-[#E0FE10]/10 border border-[#E0FE10]":"bg-zinc-800/50"}`,children:(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`w-12 h-12 rounded-full overflow-hidden border-2 
                      ${s===t?"border-[#E0FE10]":s<t?"border-zinc-600":"border-zinc-400"}`,children:e.logSubmitted?l.jsx("div",{className:"bg-[#E0FE10] w-full h-full flex items-center justify-center",children:l.jsx("span",{className:"text-black",children:"✓"})}):l.jsx("img",{src:e.exercise?.videos?.[0]?.gifURL||"/placeholder-exercise.gif",alt:e.exercise?.name||"Exercise",className:"w-full h-full object-cover",onError:e=>{e.target.src="/placeholder-exercise.gif"}})}),(0,l.jsxs)("div",{className:"flex-1",children:[l.jsx("p",{className:"text-white font-medium",children:e.exercise?.name}),l.jsx("p",{className:"text-zinc-400 text-sm",children:e.logSubmitted?"Completed":"Pending"})]})]})},e.id||s))}),l.jsx("button",{onClick:n,className:"w-full bg-[#E0FE10] text-black px-8 py-3 rounded-full font-medium hover:bg-[#E0FE10]/90 transition-colors mt-4",children:"Complete Move"})]})}),(0,l.jsxs)("div",{className:"lg:hidden absolute bottom-0 left-0 right-0 flex flex-col items-center py-10 space-y-4 z-20",children:[l.jsx("h2",{className:"text-white text-2xl font-bold mb-2",children:u?.name||""}),l.jsx("div",{className:"px-4 overflow-x-auto",children:l.jsx("div",{className:"flex gap-2 w-fit",children:s.map((e,s)=>l.jsx("div",{onClick:()=>d(s),className:`flex-shrink-0 relative w-10 h-10 rounded-full overflow-hidden border-2 
                    ${s===t?"border-[#E0FE10]":s<t?"border-zinc-600":"border-zinc-400"}`,children:e.logSubmitted?l.jsx("div",{className:"bg-[#E0FE10] w-full h-full flex items-center justify-center",children:l.jsx("span",{className:"text-black",children:"✓"})}):l.jsx("img",{src:e.exercise?.videos?.[0]?.gifURL||"/placeholder-exercise.gif",alt:e.exercise?.name||"Exercise",className:"w-full h-full object-cover",onError:e=>{e.target.src="/placeholder-exercise.gif"}})},e.id||s))})}),l.jsx("button",{onClick:n,className:"bg-[#E0FE10] text-black px-8 py-3 rounded-full font-medium hover:bg-[#E0FE10]/90 transition-colors",children:"Complete Move"})]})]}),l.jsx(i,{isOpen:b,onClose:()=>j(!1),title:"Cancel Workout",message:"Are you sure you want to cancel this workout? All progress will be lost.",primaryButtonText:"Yes, Cancel Workout",secondaryButtonText:"No, Continue",onPrimaryAction:()=>{o(),j(!1)},onSecondaryAction:()=>j(!1),theme:"dark"})]})}},4558:(e,s,t)=>{t.a(e,async(e,l)=>{try{t.d(s,{Z:()=>d});var r=t(997),a=t(6689),i=t(7440),c=t(3124),n=t(4215),o=e([i,c]);[i,c]=o.then?(await o)():o;let d=()=>{let[e,s]=(0,a.useState)(!1),[t,l]=(0,a.useState)(null),[o,d]=(0,a.useState)(null),[x,u]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),[g,f]=(0,a.useState)(""),[p,b]=(0,a.useState)("Weight Training"),[j,v]=(0,a.useState)([]),[N,w]=(0,a.useState)(""),[y,k]=(0,a.useState)(""),E=(0,a.useRef)(null),S=e=>{if(!["video/mp4","video/quicktime","video/x-msvideo"].includes(e.type)){alert("Please upload a valid video file (MP4, AVI, QuickTime)");return}l(e),h(!0)},z=()=>{y.trim()&&!j.includes(y.trim())&&(v([...j,y.trim()]),k(""))},C=e=>{v(j.filter(s=>s!==e))},F=async()=>{if(t)try{u(!0);let e=await i.kf.uploadVideo(t,i.ZS.Exercise);console.log("Video uploaded successfully",e),console.log("Exercise Details:",{name:g,category:p,tags:j,caption:N})}catch(e){console.error("Upload failed",e),alert("Video upload failed")}finally{u(!1)}};return(0,r.jsxs)("div",{className:"max-w-xl mx-auto px-4 py-6",children:[(0,r.jsxs)("div",{className:"text-center text-white mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Create"}),r.jsx("p",{className:"text-zinc-400",children:"Start building your next workout or post."})]}),m&&t&&r.jsx(c.u,{file:t,onTrimComplete:e=>{let s=URL.createObjectURL(e);d(s),l(e),h(!1)},onCancel:()=>{h(!1),l(null)}}),r.jsx("div",{className:`
          border-2 border-dashed rounded-xl p-6 text-center transition-colors duration-300
          ${e?"border-[#E0FE10] bg-[#E0FE10]/10":"border-zinc-700"}
        `,onDragOver:e=>{e.preventDefault(),s(!0)},onDragLeave:()=>{s(!1)},onDrop:e=>{e.preventDefault(),s(!1);let t=e.dataTransfer.files;S(t[0])},children:o?(0,r.jsxs)("div",{className:"relative",children:[r.jsx("video",{src:o,controls:!0,className:"w-full rounded-xl"}),r.jsx("button",{onClick:()=>{l(null),d(null),E.current&&(E.current.value="")},className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full",children:"✕"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("input",{type:"file",ref:E,accept:"video/mp4,video/quicktime,video/x-msvideo",onChange:e=>{let s=e.target.files?.[0];s&&S(s)},className:"hidden"}),(0,r.jsxs)("div",{className:"text-zinc-400",children:[r.jsx("p",{className:"mb-4",children:"Drag and drop videos here"}),r.jsx("p",{className:"mb-4",children:"or"}),r.jsx("button",{onClick:()=>E.current?.click(),className:"bg-[#E0FE10] text-black px-4 py-2 rounded-lg",children:"Browse Files"})]})]})}),o&&(0,r.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm text-zinc-300 mb-2",children:"Exercise Name"}),r.jsx("input",{type:"text",value:g,onChange:e=>f(e.target.value),placeholder:"Enter exercise name",className:"w-full bg-zinc-800 border border-zinc-600 rounded-lg p-3 text-white placeholder-zinc-400"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm text-zinc-300 mb-2",children:"Exercise Category"}),r.jsx("select",{value:p,onChange:e=>b(e.target.value),className:"w-full bg-zinc-800 border border-zinc-600 rounded-lg p-3 text-white",children:["Weight Training","Cardio","Pilates","Mobility","Stretching","Calisthenics"].map(e=>r.jsx("option",{value:e,children:e},e))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm text-zinc-300 mb-2",children:"Tags"}),(0,r.jsxs)("div",{className:"flex mb-2",children:[r.jsx("input",{type:"text",value:y,onChange:e=>k(e.target.value),onKeyPress:e=>"Enter"===e.key&&z(),placeholder:"Add a tag",className:"flex-grow bg-zinc-800 border border-zinc-600 rounded-lg p-3 text-white placeholder-zinc-400"}),r.jsx("button",{onClick:z,className:"ml-2 bg-[#E0FE10] text-black px-4 rounded-lg",children:"Add"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(e=>(0,r.jsxs)("div",{className:"bg-zinc-700 text-white px-3 py-1 rounded-full flex items-center",children:[e,r.jsx("button",{onClick:()=>C(e),className:"ml-2 text-red-400",children:"✕"})]},e))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm text-zinc-300 mb-2",children:"Caption"}),r.jsx("textarea",{value:N,onChange:e=>w(e.target.value),placeholder:"Add a caption to your exercise...",className:"w-full bg-zinc-800 border border-zinc-600 rounded-lg p-3 text-white placeholder-zinc-400",rows:4})]}),r.jsx("button",{onClick:F,disabled:!g||x,className:"w-full bg-[#E0FE10] text-black font-semibold py-3 px-4 mb-20 rounded-lg hover:bg-[#c8e60e] transition-colors disabled:opacity-50",children:x?"Uploading...":"Post Exercise"}),r.jsx(n.Z,{size:100})]})]})};l()}catch(e){l(e)}})},6784:(e,s,t)=>{t.a(e,async(e,l)=>{try{t.d(s,{Z:()=>x});var r=t(997),a=t(6689),i=t(6738),c=t(9544),n=t(3518),o=t(1163),d=e([i,c]);[i,c]=d.then?(await d)():d;let x=()=>{let[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)(!0),[d,x]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),[h,g]=(0,a.useState)(!0),f=(0,a.useRef)(null),p=(0,o.useRouter)(),b=async(e=!1)=>{try{e?x(!0):l(!0);let{exercises:t,lastVisible:r}=await c.$Q.fetchPaginatedExercises(u,15);s(s=>e?[...s,...t]:t),m(r),g(t.length>0)}catch(e){console.error("Error fetching exercises:",e)}finally{e?x(!1):l(!1)}};(0,a.useEffect)(()=>{b()},[]),(0,a.useEffect)(()=>{if(!f.current)return;let e=new IntersectionObserver(e=>{e[0].isIntersecting&&h&&!d&&b(!0)},{threshold:1});return e.observe(f.current),()=>e.disconnect()},[h,d,u]),(0,a.useEffect)(()=>{let e=new IntersectionObserver(e=>{for(let s of e){let e=s.target;s.isIntersecting&&!e.dataset.userPause?e.play().catch(e=>console.error("Video play error:",e)):e.pause()}},{threshold:.5}),s=document.querySelectorAll('video[data-observe="true"]');return s.forEach(s=>{e.observe(s)}),()=>{s.forEach(s=>e.unobserve(s)),e.disconnect()}},[e]);let j=e=>{let s=e.currentTarget;s.paused?(s.removeAttribute("data-user-pause"),s.play().catch(e=>console.error("Video play error:",e))):(s.setAttribute("data-user-pause","true"),s.pause())},v=e=>{e?p.push(`/profile/${e}`):console.error("Username is missing.")},N=(e,t)=>{s(s=>s.map((s,l)=>l===e?new i.cd({...s,currentVideoPosition:t}):s))};return t&&0===e.length?r.jsx("div",{className:"text-white text-center",children:"Loading exercises..."}):(0,r.jsxs)("div",{className:"max-w-xl mx-auto px-4 py-6",children:[e.map((e,s)=>(0,r.jsxs)("div",{className:"bg-zinc-800 rounded-xl overflow-hidden mb-6",children:[r.jsx("video",{"data-observe":"true",src:e.videos[e.currentVideoPosition]?.videoURL,muted:!0,loop:!0,className:"w-full aspect-square object-cover",onClick:e=>{e.preventDefault(),j(e)},playsInline:!0}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[r.jsx("img",{src:e.videos[e.currentVideoPosition]?.profileImage.profileImageURL||"/default-profile.png",alt:e.videos[e.currentVideoPosition]?.username||"User",className:"w-8 h-8 rounded-full cursor-pointer",onClick:()=>v(e.videos[e.currentVideoPosition]?.username||"")}),r.jsx("p",{className:"text-white font-medium cursor-pointer",onClick:()=>v(e.videos[e.currentVideoPosition]?.username||""),children:e.videos[e.currentVideoPosition]?.username||"Unknown User"})]}),r.jsx("p",{className:"text-zinc-400 text-sm",children:e.name}),r.jsx("p",{className:"text-zinc-500 text-xs mt-1",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-4",children:[e.videos.slice(0,4).map((t,l)=>r.jsx(n.f,{gifUrl:t.gifURL||"/default-gif.gif",alt:`Preview of ${e.name}`,frameSize:{width:36,height:36},contentMode:"cover",className:`border-2 ${e.currentVideoPosition===l?"border-[#E0FE10]":"border-zinc-500"}`,onClick:()=>N(s,l)},t.id)),e.videos.length>4&&(0,r.jsxs)("div",{className:"w-9 h-9 bg-gray-600 rounded-full flex items-center justify-center text-white text-sm",onClick:()=>console.log("More videos tapped"),children:["+",e.videos.length-4]})]})]})]},e.id)),h&&r.jsx("div",{ref:f,className:"text-center py-4",children:d&&r.jsx("div",{className:"spinner border-t-transparent border-4 border-[#E0FE10] w-6 h-6 rounded-full animate-spin"})})]})};l()}catch(e){l(e)}})},7229:(e,s,t)=>{t.d(s,{Z:()=>d});var l=t(997),r=t(6689),a=t.n(r),i=t(7963);let c=(0,t(1462).Z)("CircleUserRound",[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),n=({onShare:e})=>l.jsx("div",{className:"bg-zinc-800 rounded-lg p-6 mx-4 mb-6 cursor-pointer shadow-lg transition-colors hover:bg-zinc-700/80",onClick:e,children:(0,l.jsxs)("div",{className:"flex flex-col items-center text-center",children:[l.jsx("div",{className:"bg-zinc-700 p-4 rounded-full mb-4",children:l.jsx(i.Z,{className:"w-8 h-8 text-white"})}),l.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Pulse is even better with friends"}),l.jsx("p",{className:"text-zinc-400 text-sm",children:"Find your tribe, or invite your friends to join you sweat. Tap here to send out an invite link."})]})}),o=({message:e,currentUserId:s,onSelect:t})=>{let r=e.participants.find(e=>e.id!==s);if(!r)return null;let a=new Date(e.lastMessageTimestamp).toLocaleDateString();return(0,l.jsxs)("div",{className:"flex items-center gap-4 p-4 hover:bg-zinc-800 cursor-pointer transition-colors",onClick:()=>t(e),children:[r.profileImage?.profileImageURL?l.jsx("img",{src:r.profileImage.profileImageURL,alt:r.username,className:"w-12 h-12 rounded-full object-cover"}):l.jsx("div",{className:"w-12 h-12 bg-zinc-700 rounded-full flex items-center justify-center",children:l.jsx(c,{className:"w-8 h-8 text-zinc-400"})}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start",children:[(0,l.jsxs)("h3",{className:"text-white font-medium truncate",children:["@",r.username]}),l.jsx("span",{className:"text-xs text-zinc-400 flex-shrink-0",children:a})]}),l.jsx("p",{className:`text-sm truncate ${e.unreadCount?"text-white font-medium":"text-zinc-400"}`,children:e.lastMessage})]})]})},d=()=>{let[e,s]=a().useState([]),[t,r]=a().useState(!0),i={id:"current-user-id"};a().useEffect(()=>{(async()=>{try{r(!0);let e=await fetch("/api/messages"),t=await e.json();s(t.messages)}catch(e){console.error("Failed to fetch messages:",e),s([])}finally{r(!1)}})()},[]);let c=async()=>{try{navigator.share?await navigator.share({title:"Join me on Pulse",text:"Hey! Let's workout together using Pulse.",url:"https://fitwithpulse.ai"}):console.log("Share not supported")}catch(e){console.error("Error sharing:",e)}},d=e=>{console.log("Selected message:",e)};return t?l.jsx("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center",children:l.jsx("div",{className:"text-zinc-400",children:"Loading..."})}):(0,l.jsxs)("div",{className:"min-h-screen bg-zinc-900",children:[l.jsx("div",{className:"sticky top-0 z-10 bg-zinc-900/80 backdrop-blur-sm border-b border-zinc-800",children:l.jsx("div",{className:"px-4 py-4 flex justify-center relative",children:l.jsx("h1",{className:"text-lg font-semibold text-white",children:"Direct Messages"})})}),(0,l.jsxs)("div",{className:"pt-4",children:[l.jsx(n,{onShare:c}),e.length>0&&l.jsx("div",{className:"divide-y divide-zinc-800",children:e.map(e=>l.jsx(o,{message:e,currentUserId:i.id,onSelect:d},e.id))})]})]})}},3067:(e,s,t)=>{t.a(e,async(e,l)=>{try{t.d(s,{Z:()=>N});var r=t(997),a=t(6689),i=t(8157),c=t(9284),n=t(6576),o=t(1269),d=t(6590),x=t(5647),u=t(5881),m=t(452),h=t(4296),g=t(1163),f=t(7440),p=t(1304),b=e([i,c,h,f]);[i,c,h,f]=b.then?(await b)():b;let j=({stacks:e,onSelectStack:s})=>{let t=(0,g.useRouter)();return r.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.map((e,l)=>r.jsx("button",{onClick:()=>s(e),className:"w-full text-left",children:r.jsx(h.kg,{workout:e,gifUrls:e.exercises?.map(e=>e.exercise.videos?.[0]?.gifURL||"")||[],maxOrder:l,showArrows:!1,showCalendar:!0,onPrimaryAction:()=>{let s=i.W4.currentUser?.username;t.push(`/workout/${s}/${e.id}`)}})},e.id))})},v={ACTIVITY:"activity",EXERCISES:"moves",STACKS:"stacks",CHALLENGES:"rounds"},N=()=>{let[e,s]=(0,a.useState)(v.EXERCISES),[t,l]=(0,a.useState)([]),[h,g]=(0,a.useState)([]),[b,N]=(0,a.useState)([]),[w,y]=(0,a.useState)([]),[k,E]=(0,a.useState)([]),[S,z]=(0,a.useState)([]),[C,F]=(0,a.useState)([]),[Z,I]=(0,a.useState)(null),L=i.W4.currentUser,[U,W]=(0,a.useState)(!1),P=(0,a.useRef)(null),R=async e=>{let s=e.target.files?.[0];if(s)try{W(!0);let e=await f.kf.uploadImage(s,f.$5.Profile);if(L){let s=new i.n5({...L.toDictionary(),profileImage:{profileImageURL:e.downloadURL,imageOffsetWidth:0,imageOffsetHeight:0},updatedAt:new Date});await i.W4.updateUser(L.id,s),i.W4.currentUser=s}}catch(e){console.error("Profile image upload failed",e)}finally{W(!1)}};if(!L)return r.jsx("div",{children:"Loading..."});(0,a.useEffect)(()=>{(async()=>{if(L?.id)try{let[e,s,l,r]=await Promise.all([i.W4.fetchFollowers(),i.W4.fetchFollowing(),c.G.fetchUserChallenges(),c.G.fetchAllWorkoutSummaries()]);z(e),F(s);let a=l.map(e=>e.challenge).filter(e=>void 0!==e);g(a),N(r);let n=(0,m.o)(r,t,[...e,...s],L.id);console.log("Parsed Activities"+JSON.stringify(n)),E(n)}catch(e){console.error("Error fetching user data:",e)}})()},[L?.id]),(0,a.useEffect)(()=>{(async()=>{if(L?.id)try{let e=await i.W4.fetchUserStacks();y(e)}catch(e){console.error("Error fetching stacks:",e)}})()},[L?.id]),(0,a.useEffect)(()=>{(async()=>{if(L?.id)try{let e=await i.W4.fetchUserVideos();l(e)}catch(e){console.error("Error fetching user videos:",e)}})()},[L?.id]);let T={instagram:L.creator?.instagramHandle,twitter:L.creator?.twitterHandle,youtube:L.creator?.youtubeUrl};return r.jsx("div",{className:"min-h-screen bg-zinc-900",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx("div",{className:"h-48 bg-gradient-to-b from-zinc-800 to-zinc-900"}),r.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"relative -mt-24",children:[(0,r.jsxs)("div",{className:"relative inline-block",children:[r.jsx("input",{type:"file",ref:P,accept:"image/jpeg,image/png,image/webp",onChange:R,className:"hidden"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx("img",{src:L.profileImage?.profileImageURL||"/api/placeholder/96/96",alt:L.displayName,className:`w-24 h-24 rounded-full border-4 border-zinc-900 ${U?"opacity-50":""}`}),U&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("div",{className:"loader border-t-transparent border-4 border-white rounded-full w-8 h-8 animate-spin"})}),r.jsx("button",{onClick:()=>P.current?.click(),className:"absolute bottom-0 right-0 bg-[#E0FE10] text-black p-1 rounded-full shadow-lg hover:bg-[#c8e60e] transition-colors",disabled:U,children:r.jsx(p.Z,{size:16})})]})]}),(0,r.jsxs)("div",{className:"mt-4 text-white",children:[r.jsx("h1",{className:"text-2xl font-bold",children:L.displayName}),(0,r.jsxs)("p",{className:"text-zinc-400",children:["@",L.username]}),(0,r.jsxs)("div",{className:"mt-2 flex items-center gap-4 text-sm text-zinc-400",children:[(0,r.jsxs)("span",{children:[S.length," followers"]}),r.jsx("span",{className:"w-1 h-1 bg-zinc-600 rounded-full"}),(0,r.jsxs)("span",{children:[C.length," following"]})]}),r.jsx("p",{className:"mt-4 text-zinc-300",children:L.bio}),r.jsx("div",{className:"mt-4 flex gap-6",children:Object.entries(T).map(([e,s])=>s?r.jsx("a",{href:function(e,s){switch(e){case"instagram":return`https://instagram.com/${s}`;case"twitter":return`https://twitter.com/${s}`;case"youtube":return s;default:return"#"}}(e,s),target:"_blank",rel:"noopener noreferrer",className:"text-zinc-400 hover:text-white transition-colors",children:r.jsx("img",{src:`/${e}.svg`,alt:e,className:"w-6 h-6 hover:opacity-80"})},e):null)})]}),r.jsx("div",{className:"mt-8 border-b border-zinc-700 overflow-x-auto",children:r.jsx("nav",{className:"flex whitespace-nowrap min-w-full sm:min-w-0 px-4 sm:px-0",children:r.jsx("div",{className:"flex gap-8 pb-2 sm:pb-0",children:Object.values(v).map(t=>(0,r.jsxs)("button",{onClick:()=>s(t),className:`pb-4 px-2 text-sm font-medium transition-colors relative flex-shrink-0
                        ${e===t?"text-white":"text-zinc-400 hover:text-zinc-300"}`,children:[t.charAt(0).toUpperCase()+t.slice(1),e===t&&r.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-white"})]},t))})})}),(0,r.jsxs)("div",{className:"mt-8",children:[e===v.ACTIVITY&&r.jsx("div",{className:"px-5",children:0===k.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center p-8",children:[r.jsx(n.Z,{className:"w-12 h-12 text-white/20"}),r.jsx("h3",{className:"mt-4 text-white font-medium",children:"No activities yet"})]}):r.jsx(o.Z,{activities:k,workoutSummaries:b,userVideos:t,username:L.username,isPublicProfile:!1,onWorkoutSelect:e=>{console.log("Selected workout summary:",e)},onVideoSelect:e=>{console.log("Selected exercise:",e),I(e)},onProfileSelect:e=>{console.log("Selected user profile:",e)}})}),e===v.STACKS&&(0,r.jsxs)("div",{className:"px-5",children:[(0,r.jsxs)("h2",{className:"text-xl text-white font-semibold mb-4",children:["Your Stacks (",w.length,")"]}),r.jsx(j,{stacks:w,onSelectStack:e=>{console.log("Selected stack:",e)}})]}),e===v.EXERCISES&&(0,r.jsxs)("div",{className:"px-5",children:[(0,r.jsxs)("h2",{className:"text-xl text-white font-semibold mb-4",children:["Your Videos (",t.length,")"]}),r.jsx(x.Z,{userVideos:t,onSelectVideo:e=>{I(e)}})]}),e===v.CHALLENGES&&r.jsx(d.M,{activeChallenges:h,onSelectChallenge:e=>{console.log("Selected challenge:",e)}})]})]})}),Z&&r.jsx(u.default,{exercise:Z,user:L,onBack:()=>I(null),onProfileClick:()=>{console.log("Profile clicked")}})]})})};l()}catch(e){l(e)}})},684:(e,s,t)=>{t.a(e,async(e,l)=>{try{t.d(s,{Z:()=>h});var r=t(997),a=t(6689),i=t(8157),c=t(4672),n=t(7963),o=t(6111),d=t(9976),x=t(9544),u=t(1163),m=e([i,x]);[i,x]=m.then?(await m)():m;let h=()=>{let[e,s]=(0,a.useState)(!0),[t,l]=(0,a.useState)("all"),[m,h]=(0,a.useState)(""),[g,f]=(0,a.useState)([]),[p,b]=(0,a.useState)([]),[j,v]=(0,a.useState)([]),[N,w]=(0,a.useState)([]),y=(0,u.useRouter)(),k=[{id:"all",label:"All",icon:r.jsx(c.Z,{className:"w-4 h-4"})},{id:"people",label:"People",icon:r.jsx(n.Z,{className:"w-4 h-4"})},{id:"exercises",label:"Moves",icon:r.jsx(o.Z,{className:"w-4 h-4"})},{id:"bodyparts",label:"Bodyparts",icon:r.jsx(o.Z,{className:"w-4 h-4"})}],E=e=>{y.push(`/profile/${e.username}`)},S=e=>{let s=e.name.toLowerCase().replace(/\s+/g,"-");y.push(`/exercise/${s}`)};return((0,a.useEffect)(()=>{(async()=>{s(!0);try{let e=await i.W4.fetchUsersWithVideosUploaded();v(e)}catch(e){console.error("Error loading initial data:",e)}finally{s(!1)}})()},[]),(0,a.useEffect)(()=>{(async()=>{s(!0);try{let[e,s]=await Promise.all([i.W4.fetchUsersWithVideosUploaded(),x.$Q.fetchFeaturedExercisesWithVideos(24)]);v(e),w(s)}catch(e){console.error("Error loading initial data:",e)}finally{s(!1)}})()},[]),e)?r.jsx("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center",children:r.jsx("div",{className:"text-white",children:"Loading..."})}):(0,r.jsxs)("div",{className:"min-h-screen bg-zinc-900",children:[r.jsx("div",{className:"sticky top-0 z-10 bg-zinc-900/80 backdrop-blur-sm border-b border-zinc-800 ",children:(0,r.jsxs)("div",{className:"pt-4 px-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 bg-zinc-800 rounded-lg px-4 py-2",children:[r.jsx(c.Z,{className:"w-5 h-5 text-zinc-400"}),r.jsx("input",{type:"text",placeholder:(()=>{switch(t){case"people":return"Search people..";case"exercises":return"Search exercises..";case"bodyparts":return"Search bodyparts..";default:return"Search people, exercises, or bodyparts.."}})(),value:m,onChange:e=>h(e.target.value),className:"bg-transparent text-white placeholder-zinc-500 flex-1 outline-none"})]}),r.jsx("div",{className:"flex space-x-2 mt-4 pb-4 overflow-x-auto",children:k.map(e=>(0,r.jsxs)("button",{onClick:()=>l(e.id),className:`flex items-center space-x-2 px-4 py-2 rounded-full transition-colors
                  ${t===e.id?"bg-[#E0FE10] text-black":"bg-zinc-800 text-zinc-400 hover:text-white"}`,children:[e.icon,r.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:e.label})]},e.id))})]})}),r.jsx("div",{className:"pt-4 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:""===m?(0,r.jsxs)("div",{className:"py-4 ",children:[r.jsx("h2",{className:"text-lg font-semibold text-white px-4 mb-4",children:"People"}),r.jsx("div",{className:"overflow-x-auto scrollbar-hide",children:r.jsx("div",{className:"flex flex-nowrap space-x-4 px-4 pb-4 min-w-max",children:j.map(e=>r.jsx("div",{className:"flex-shrink-0 cursor-pointer",onClick:()=>E(e),children:(0,r.jsxs)("div",{className:"relative w-[150px]",children:[(0,r.jsxs)("div",{className:"aspect-square rounded-2xl overflow-hidden bg-zinc-800",children:[e.profileImage?.profileImageURL?r.jsx("img",{src:e.profileImage.profileImageURL,alt:e.username,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx(d.Z,{className:"w-12 h-12 text-zinc-600"})}),e.creator?.type?.includes(i.I0.PersonalTrainer)&&r.jsx("div",{className:"absolute bottom-2 right-2",children:r.jsx("div",{className:"bg-[#E0FE10] px-3 py-1 rounded-xl",children:r.jsx("span",{className:"text-xs font-bold text-black tracking-wider",children:"T R A I N E R"})})})]}),(0,r.jsxs)("p",{className:"mt-2 text-sm text-white text-center",children:["@",e.username]})]})},e.id))})}),(0,r.jsxs)("div",{className:"py-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-white px-4 mb-4",children:"Explore New Moves"}),r.jsx("div",{className:"grid grid-cols-3 gap-0",children:N.map(e=>r.jsx("div",{className:"cursor-pointer aspect-[2/3]",onClick:()=>S(e),children:r.jsx("div",{className:"relative w-full h-full",children:e.videos[0]?.gifURL?r.jsx("img",{src:e.videos[0].gifURL,alt:e.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-zinc-800",children:r.jsx(o.Z,{className:"w-8 h-8 text-zinc-600"})})})},e.id))})]})]}):(0,r.jsxs)("div",{className:"divide-y divide-zinc-800",children:["all"===t&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"px-4 py-2 text-sm font-medium text-zinc-400",children:"People"}),r.jsx("div",{className:"px-4 py-2 text-sm font-medium text-zinc-400",children:"Exercises"})]}),"people"===t&&r.jsx("div",{className:"px-4"}),"exercises"===t&&r.jsx("div",{className:"px-4"})]})})]})};l()}catch(e){l(e)}})},4215:(e,s,t)=>{t.d(s,{Z:()=>r});var l=t(997);t(6689);let r=({size:e=16,className:s=""})=>l.jsx("div",{style:{height:`${e}px`},className:s,"aria-hidden":"true"})},9050:(e,s,t)=>{t.a(e,async(e,l)=>{try{t.d(s,{Z:()=>x});var r=t(997),a=t(6689),i=t(6490),c=t(401),n=t(3291),o=t(4484),d=e([c,n,o]);[c,n,o]=d.then?(await d)():d;let x=()=>{let[e,s]=(0,a.useState)(!1),t=(0,a.useRef)(null),l=(0,n.useDispatch)(),d=(0,c.getAuth)();(0,a.useEffect)(()=>{let e=e=>{t.current&&!t.current.contains(e.target)&&s(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let x=async()=>{try{await (0,c.signOut)(d),l((0,o.av)(null))}catch(e){console.error("Error signing out:",e)}};return(0,r.jsxs)("div",{className:"relative",ref:t,children:[r.jsx("button",{onClick:()=>s(!e),className:"flex items-center justify-center hover:bg-zinc-800 rounded-full p-2 transition-colors duration-200",children:r.jsx(i.Z,{className:`text-white w-6 h-6 transition-transform duration-200 ${e?"rotate-180":""}`})}),e&&r.jsx("div",{className:"absolute top-full right-0 mt-2 w-48 bg-zinc-800 rounded-lg shadow-lg border border-zinc-700 z-50 overflow-hidden",style:{transform:"translateX(-50%)"},children:r.jsx("div",{className:"px-4 py-2 hover:bg-zinc-700 transition-colors duration-200 cursor-pointer",onClick:x,children:r.jsx("span",{className:"text-white",children:"Sign Out"})})})]})};l()}catch(e){l(e)}})},3124:(e,s,t)=>{t.a(e,async(e,l)=>{try{t.d(s,{u:()=>o});var r=t(997),a=t(6689),i=t(7146),c=t(2535),n=e([i,c]);[i,c]=n.then?(await n)():n;let o=({file:e,onTrimComplete:s,onCancel:t})=>{let l=(0,a.useRef)(null),[n,o]=(0,a.useState)(0),[d,x]=(0,a.useState)(0),[u,m]=(0,a.useState)(0),[h,g]=(0,a.useState)(!1),[f,p]=(0,a.useState)(!1),[b,j]=(0,a.useState)({mediaRecorder:!1,captureStream:!1}),[v,N]=(0,a.useState)(0),w=(0,a.useRef)(null);(0,a.useEffect)(()=>(j({mediaRecorder:"MediaRecorder"in window,captureStream:"captureStream"in HTMLCanvasElement.prototype}),l.current&&e&&(w.current=URL.createObjectURL(e),l.current.src=w.current,l.current.addEventListener("loadedmetadata",()=>{let e=l.current?.duration||0;m(e),x(Math.min(e,30))})),()=>{w.current&&URL.revokeObjectURL(w.current)}),[e]),(0,a.useEffect)(()=>{let e=l.current;if(!e)return;let s=()=>{e.currentTime>=d&&(e.pause(),e.currentTime=n)};return e.addEventListener("timeupdate",s),()=>e.removeEventListener("timeupdate",s)},[d,n]);let y=async()=>{if(!l.current){alert("Video element not initialized");return}if(d-n<5||d-n>30){alert("Video must be between 5 and 30 seconds");return}try{g(!0);let t=new i.FFmpeg;await t.load(),await t.writeFile("input.mp4",await (0,c.fetchFile)(e)),await t.exec(["-ss",n.toString(),"-t",(d-n).toString(),"-i","input.mp4","-c","copy","output.mp4"]);let l=await t.readFile("output.mp4"),r=new File([l],"trimmed.mp4",{type:"video/mp4"});s(r)}catch(e){console.error("Video trimming failed:",e),alert(e instanceof Error?e.message:"Failed to trim video")}finally{g(!1),N(0)}},k=e=>`${Math.floor(e/60).toString().padStart(2,"0")}:${Math.floor(e%60).toString().padStart(2,"0")}`;return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"bg-zinc-900 w-full max-w-md rounded-xl p-6",children:[r.jsx("h2",{className:"text-white text-xl font-bold mb-4",children:"Trim Your Video"}),(!b.mediaRecorder||!b.captureStream)&&r.jsx("div",{className:"text-red-500 mb-4",children:"Your browser doesn't support video trimming. Please use Chrome, Firefox, or Edge."}),r.jsx("div",{className:"mb-4",children:r.jsx("video",{ref:l,controls:!0,className:"w-full rounded-lg",onPlay:()=>{if(!l.current)return;l.current.currentTime=n,l.current.play(),p(!0);let e=()=>{if(l.current&&l.current.currentTime>=d){l.current.pause(),p(!1);return}requestAnimationFrame(e)};e()},onPause:()=>p(!1)})}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex justify-between text-white text-sm mb-2",children:[(0,r.jsxs)("span",{children:["Start: ",k(n)]}),(0,r.jsxs)("span",{children:["Duration: ",k(d-n)]}),(0,r.jsxs)("span",{children:["End: ",k(d)]})]}),(0,r.jsxs)("div",{className:"relative mb-4",children:[r.jsx("input",{type:"range",min:0,max:u,value:n,onChange:e=>{let s=Number(e.target.value);o(Math.min(s,d-5))},className:"w-full"}),r.jsx("input",{type:"range",min:0,max:u,value:d,onChange:e=>{let s=Number(e.target.value);x(Math.max(s,n+5))},className:"w-full mt-2"})]}),h&&r.jsx("div",{className:"w-full bg-zinc-800 rounded-full h-2 mb-4",children:r.jsx("div",{className:"bg-[#E0FE10] h-2 rounded-full transition-all duration-300",style:{width:`${v}%`}})})]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[r.jsx("button",{onClick:t,disabled:h,className:"flex-1 bg-zinc-800 text-white py-2 rounded-lg disabled:opacity-50",children:"Cancel"}),r.jsx("button",{onClick:y,disabled:h||d-n<5||d-n>30||!b.mediaRecorder||!b.captureStream,className:"flex-1 bg-[#E0FE10] text-black py-2 rounded-lg disabled:opacity-50",children:h?`Trimming... ${v}%`:"Trim Video"})]})]})})};l()}catch(e){l(e)}})},3960:(e,s,t)=>{t.a(e,async(e,l)=>{try{t.d(s,{Z:()=>f});var r=t(997),a=t(6689),i=t(8154),c=t(6111),n=t(7218),o=t(245),d=t(2069),x=t(9284),u=t(1163),m=t(3291),h=t(1308),g=e([d,x,m,h]);[d,x,m,h]=g.then?(await g)():g;let f=({workout:e,onClose:s,onStartWorkout:t})=>{let[l,g]=(0,a.useState)(!1);(0,u.useRouter)();let f=(0,m.useDispatch)(),p=(0,m.useSelector)(e=>e.user.currentUser?.id),b=(0,m.useSelector)(e=>e.workout.currentWorkout),j=async()=>{t&&t()},v=async()=>{if(!p||!b){console.error("No user ID or current workout session found");return}try{await x.G.cancelWorkout(b,x.G.currentWorkoutSummary),f((0,h.q1)(null)),f((0,h.HX)([])),console.log("Workout session canceled successfully")}catch(e){console.error("Error canceling workout session:",e)}},N=({icon:e,title:s,value:t})=>(0,r.jsxs)("div",{className:"flex items-center bg-zinc-800 rounded-xl p-4",children:[r.jsx(e,{className:"text-[#E0FE10] w-6 h-6 mr-4"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-zinc-400 text-sm",children:s}),r.jsx("p",{className:"text-white font-semibold",children:t})]})]});return(0,r.jsxs)("div",{className:"min-h-screen bg-black flex flex-col",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 p-4",children:r.jsx("button",{onClick:s,className:"ml-auto block",children:r.jsx(i.Z,{className:"text-white w-6 h-6"})})}),(0,r.jsxs)("div",{className:"flex-grow container mx-auto px-4 pt-20",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[r.jsx(c.Z,{className:"mx-auto text-[#E0FE10] w-20 h-20 mb-4"}),r.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:e.title}),r.jsx("p",{className:"text-zinc-400 mb-8",children:"Once you hit start, your workout will begin. Get ready to crush it! \uD83D\uDCAA"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx(N,{icon:n.Z,title:"Estimated Duration",value:`${d.oQ.estimatedDuration(e.exercises)} min`}),(0,r.jsxs)("div",{className:"bg-zinc-800 rounded-xl",children:[(0,r.jsxs)("button",{onClick:()=>g(!l),className:"w-full flex items-center justify-between p-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(c.Z,{className:"text-[#E0FE10] w-6 h-6 mr-4"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-zinc-400 text-sm",children:"Exercise Count"}),(0,r.jsxs)("p",{className:"text-white font-semibold",children:[e.exercises.length," exercises"]})]})]}),r.jsx(o.Z,{className:`text-[#E0FE10] transform transition-transform ${l?"rotate-90":""}`})]}),l&&r.jsx("div",{className:"border-t border-zinc-700 p-4",children:e.exercises.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center mb-3 last:mb-0",children:[r.jsx("div",{className:"bg-zinc-700 rounded-full w-6 h-6 flex items-center justify-center mr-4",children:r.jsx("span",{className:"text-zinc-400 text-xs",children:s+1})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-white",children:e.exercise.name}),(0,r.jsxs)("p",{className:"text-zinc-400 text-sm",children:[e.exercise.sets," sets • ",e.exercise.reps," reps"]})]})]},e.exercise.id))})]}),r.jsx(N,{icon:c.Z,title:"Workout Type",value:e.zone})]}),(0,r.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black to-transparent",children:[r.jsx("button",{onClick:v,className:"w-full text-white py-3 rounded-full font-bold text-lg mb-4",children:"Cancel"}),r.jsx("button",{onClick:j,className:"w-full bg-[#E0FE10] text-black py-3 rounded-full font-bold text-lg",children:"Start Workout"})]})]})]})};l()}catch(e){l(e)}})},9180:(e,s,t)=>{t.a(e,async(e,l)=>{try{t.r(s),t.d(s,{default:()=>y});var r=t(997),a=t(6689),i=t(3291),c=t(747),n=t(6784),o=t(684),d=t(4558),x=t(7229),u=t(3067),m=t(3960),h=t(942),g=t(9315),f=t(34),p=t(6738),b=t(2069),j=t(9284),v=t(9050),N=t(1308),w=e([i,c,n,o,d,u,m,f,p,b,j,v,N]);[i,c,n,o,d,u,m,f,p,b,j,v,N]=w.then?(await w)():w;let y=()=>{let[e,s]=(0,a.useState)(g.O.Discover),[t,l]=(0,a.useState)(!1),[w,y]=(0,a.useState)(0),{currentUser:k}=(0,i.useSelector)(e=>e.user),E=k?.id,S=(0,i.useSelector)(e=>e.workout.currentWorkout),z=(0,i.useSelector)(e=>e.workout.currentExerciseLogs),C=(0,i.useSelector)(e=>e.workout.workoutSummary),F=(0,i.useDispatch)();(0,a.useEffect)(()=>{E&&(async()=>{try{let e=await j.G.fetchAllWorkoutSessions(E),s=e.filter(e=>e.workout?.workoutStatus===b.Z0.QueuedUp),t=e.filter(e=>e.workout?.workoutStatus===b.Z0.InProgress);if(t.length>0){let e=t[0],s=e.logs?.findIndex(e=>!e.logSubmitted)??0;F((0,N.q1)(e.workout)),F((0,N.HX)(e.logs||[])),y(s>=0?s:0)}else if(s.length>0){let e=s[0];F((0,N.q1)(e.workout)),F((0,N.HX)(e.logs||[]))}else F((0,N.q1)(null)),F((0,N.HX)([]))}catch(e){console.error("Error fetching workout sessions:",e)}})()},[E,F]);let Z=(e,s)=>{F((0,N.q1)(e)),F((0,N.HX)(s))},I=()=>{if(S){let e=new b.oQ({...S,workoutStatus:b.Z0.InProgress});F((0,N.q1)(e))}},L=async()=>{if(!S||!z.length){console.error("No active workout or logs");return}z[w]?.exercise;let e=z[w]?.isBodyWeight,s=[...z];s[w]=new p.lg({...s[w],logSubmitted:!0,completedAt:new Date,updatedAt:new Date});try{if(S&&E){await j.G.updateWorkoutLogs({userId:E,workoutId:S.id,logs:s});let e=new b.P7({id:S.id,workoutId:S.id,userId:E,exercises:s.map(e=>e.toDictionary()),bodyParts:S.fetchPrimaryBodyParts(),secondaryBodyParts:S.fetchSecondaryBodyParts(),workoutTitle:S.title,exercisesCompleted:s.filter(e=>e.logSubmitted).map(e=>e.toDictionary()),isCompleted:!1,startTime:S.startTime||new Date,createdAt:S.createdAt||new Date,updatedAt:new Date});F((0,N.QU)(e)),await j.G.updateWorkoutLogs({userId:E,workoutId:S.id,logs:s})}e?await U(s):await W(s),F((0,N.HX)(s));let t=s.findIndex(e=>!e.logSubmitted);-1!==t?y(t):await P()}catch(e){console.error("Error submitting exercise:",e)}},U=e=>{let s=e.map(e=>new p.lg({...e,logs:e.logs.map(e=>new b.c_({...e,weight:0,isBodyWeight:!0,reps:e.reps||0}))}));return W(s)},W=async e=>{try{S&&E&&await j.G.updateWorkoutLogs({userId:E,workoutId:S.id,logs:e}),F((0,N.HX)(e)),w<e.length-1?y(e=>e+1):await P()}catch(e){console.error("Error submitting exercise:",e)}},P=async()=>{},R=async()=>{if(S&&E)try{await j.G.cancelWorkout(S,C),y(0)}catch(e){console.error("Error canceling workout:",e)}},T=async e=>{try{if(E){let s=await j.G.saveWorkoutSession({userId:E,workout:e,logs:e.logs||[]});s&&(Z(s,s.logs||[]),l(!1))}}catch(e){console.error("Error starting workout:",e)}};return r.jsx("div",{className:"min-h-screen bg-zinc-900",children:S?(()=>{if(!S)return null;switch(S.workoutStatus){case b.Z0.QueuedUp:return r.jsx(m.Z,{workout:S,onClose:R,onStartWorkout:I});case b.Z0.InProgress:return r.jsx(h.Z,{exercises:S.logs||[],currentExerciseLogs:z,currentExerciseIndex:w,onComplete:L,onClose:R,onExerciseSelect:y});default:return null}})():(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("nav",{className:"px-4 py-4 bg-zinc-900/80 backdrop-blur-sm border-b border-zinc-800 sticky top-0 z-10 flex justify-between items-center",children:[r.jsx("div",{className:"flex items-center",children:r.jsx("img",{src:"/pulse-logo-white.svg",alt:"Pulse",className:"h-8"})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{className:"bg-[#E0FE10] text-black px-4 py-2 rounded-lg",onClick:()=>l(!0),children:"Start Workout"}),r.jsx(v.Z,{})]})]}),r.jsx("div",{className:"w-full",children:(()=>{switch(e){case g.O.Discover:return r.jsx(n.Z,{});case g.O.Search:return r.jsx(o.Z,{});case g.O.Create:return r.jsx(d.Z,{});case g.O.Messages:return r.jsx(x.Z,{});case g.O.Profile:return r.jsx(u.Z,{});default:return null}})()}),r.jsx(c.Z,{selectedTab:e,onTabChange:s}),r.jsx(f.Z,{isVisible:t,onClose:()=>l(!1),onStartWorkout:T})]})})};l()}catch(e){l(e)}})},9315:(e,s,t)=>{var l;t.d(s,{O:()=>l}),function(e){e.Discover="discover",e.Search="search",e.Create="create",e.Messages="messages",e.Profile="profile"}(l||(l={}))}};
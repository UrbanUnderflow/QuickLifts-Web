"use strict";exports.id=180,exports.ids=[180],exports.modules={3785:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(1462).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6490:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(1462).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},245:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(1462).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},9976:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(1462).Z)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]])},7218:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(1462).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},6111:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(1462).Z)("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]])},4672:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(1462).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},7963:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(1462).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9544:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{$Q:()=>r.$}),s(6738);var r=s(6883),l=e([r]);r=(l.then?(await l)():l)[0],a()}catch(e){a(e)}})},6883:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{$:()=>n});var r=s(1492),l=s(9777),i=s(6738),c=e([r,l]);[r,l]=c.then?(await c)():c;class o{get allExercises(){return this._allExercises}async fetchExercises(){try{let e=(await (0,r.getDocs)((0,r.collection)(l.db,"exercises"))).docs.map(e=>i.cd.fromFirebase({id:e.id,...e.data()})),t=(await (0,r.getDocs)((0,r.collection)(l.db,"exerciseVideos"))).docs.map(e=>({id:e.id,exerciseId:e.data().exerciseId||"",username:e.data().username||"",userId:e.data().userId||"",videoURL:e.data().videoURL||"",fileName:e.data().fileName||"",exercise:e.data().exercise||"",profileImage:e.data().profileImage||{profileImageURL:""},caption:e.data().caption||"",gifURL:e.data().gifURL||"",thumbnail:e.data().thumbnail||"",visibility:e.data().visibility||"open",totalAccountsReached:e.data().totalAccountsReached||0,totalAccountLikes:e.data().totalAccountLikes||0,totalAccountBookmarked:e.data().totalAccountBookmarked||0,totalAccountUsage:e.data().totalAccountUsage||0,isApproved:e.data().isApproved||!1,liked:e.data().liked||!1,bookmarked:e.data().bookmarked||!1,createdAt:e.data().createdAt?new Date(1e3*e.data().createdAt.seconds):new Date,updatedAt:e.data().updatedAt?new Date(1e3*e.data().updatedAt.seconds):new Date})),s=e.map(e=>{let s=t.filter(t=>t.exercise.toLowerCase()===e.name.toLowerCase());return{...e,videos:s}});this._allExercises=s.filter(e=>e.videos.length>0)}catch(e){throw console.error("Error fetching exercises:",e),Error("Failed to fetch exercises.")}}async fetchFeaturedExercisesWithVideos(e=24){try{let t=(await (0,r.getDocs)((0,r.collection)(l.db,"exercises"))).docs.map(e=>i.cd.fromFirebase({id:e.id,...e.data()})),s=(await (0,r.getDocs)((0,r.collection)(l.db,"exerciseVideos"))).docs.map(e=>({id:e.id,exerciseId:e.data().exerciseId||"",username:e.data().username||"",userId:e.data().userId||"",videoURL:e.data().videoURL||"",fileName:e.data().fileName||"",exercise:e.data().exercise||"",profileImage:e.data().profileImage||{profileImageURL:""},caption:e.data().caption||"",gifURL:e.data().gifURL||"",thumbnail:e.data().thumbnail||"",visibility:e.data().visibility||"open",totalAccountsReached:e.data().totalAccountsReached||0,totalAccountLikes:e.data().totalAccountLikes||0,totalAccountBookmarked:e.data().totalAccountBookmarked||0,totalAccountUsage:e.data().totalAccountUsage||0,isApproved:e.data().isApproved||!1,liked:e.data().liked||!1,bookmarked:e.data().bookmarked||!1,createdAt:e.data().createdAt?new Date(1e3*e.data().createdAt.seconds):new Date,updatedAt:e.data().updatedAt?new Date(1e3*e.data().updatedAt.seconds):new Date}));return t.map(e=>{let t=s.filter(t=>t.exercise===e.name&&t.gifURL);return{...e,videos:t}}).filter(e=>e.videos.length>0).sort(()=>Math.random()-.5).slice(0,e)}catch(e){return console.error("Error fetching featured exercises:",e),[]}}async fetchPaginatedExercises(e=null,t=15){try{let s=(0,r.query)((0,r.collection)(l.db,"exercises"),(0,r.orderBy)("createdAt","desc"),(0,r.limit)(t));e&&(s=(0,r.query)(s,(0,r.startAfter)(e)));let a=await (0,r.getDocs)(s);if(a.empty)return{exercises:[],lastVisible:null};let c=(await (0,r.getDocs)((0,r.collection)(l.db,"exerciseVideos"))).docs.map(e=>({id:e.id,exerciseId:e.data().exerciseId||"",username:e.data().username||"",userId:e.data().userId||"",videoURL:e.data().videoURL||"",fileName:e.data().fileName||"",exercise:e.data().exercise||"",profileImage:e.data().profileImage||{profileImageURL:""},caption:e.data().caption||"",gifURL:e.data().gifURL||"",thumbnail:e.data().thumbnail||"",visibility:e.data().visibility||"open",totalAccountsReached:e.data().totalAccountsReached||0,totalAccountLikes:e.data().totalAccountLikes||0,totalAccountBookmarked:e.data().totalAccountBookmarked||0,totalAccountUsage:e.data().totalAccountUsage||0,isApproved:e.data().isApproved||!1,liked:e.data().liked||!1,bookmarked:e.data().bookmarked||!1,createdAt:e.data().createdAt?new Date(1e3*e.data().createdAt.seconds):new Date,updatedAt:e.data().updatedAt?new Date(1e3*e.data().updatedAt.seconds):new Date})),o=a.docs.map(e=>i.cd.fromFirebase({id:e.id,...e.data()})).map(e=>{let t=c.filter(t=>t.exerciseId===e.id);return{...e,videos:t}}).filter(e=>e.videos.length>0),n=a.docs[a.docs.length-1];return{exercises:o,lastVisible:n}}catch(e){throw console.error("Error fetching paginated exercises:",e),e}}constructor(){this._allExercises=[]}}let n=new o;a()}catch(e){a(e)}})},747:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{Z:()=>d});var r=s(997),l=s(6689),i=s.n(l),c=s(9315),o=s(8157),n=e([o]);o=(n.then?(await n)():n)[0];let d=({selectedTab:e,onTabChange:t})=>{i().useEffect(()=>{console.log("Current user in BottomNav:",o.W4.currentUser),o.W4.currentUser?.profileImage&&console.log("Profile image data:",o.W4.currentUser.profileImage)},[]);let s=o.W4.currentUser;console.log("Rendering BottomNav with currentUser:",s),console.log("Has profile image?",s&&s.profileImage&&s.profileImage.profileImageURL);let a=[{id:c.O.Discover,label:"Discover",icon:"/discover-icon.svg",selectedIcon:"/discover-icon-selected.svg"},{id:c.O.Search,label:"Search",icon:"/search-icon.svg",selectedIcon:"/search-icon-selected.svg"},{id:c.O.Create,label:"",icon:"/create-icon.svg",selectedIcon:"/create-icon.svg"},{id:c.O.Messages,label:"Message",icon:"/message-icon.svg",selectedIcon:"/message-icon-selected.svg"},{id:c.O.Profile,label:"Profile",icon:"/profile-icon.svg",selectedIcon:"/profile-icon-selected.svg"}];return r.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-zinc-800/80 backdrop-blur-sm border-t border-zinc-700",children:r.jsx("div",{className:"max-w-md mx-auto px-8 py-4 flex justify-between items-center",children:a.map(s=>{let a=e===s.id,l=s.id===c.O.Profile,i=o.W4.currentUser,n=i&&i.profileImage&&i.profileImage.profileImageURL;return r.jsx("button",{className:"flex flex-col items-center gap-1",onClick:()=>t(s.id),children:s.id===c.O.Create?r.jsx("div",{className:"w-12 h-12 bg-[#E0FE10] rounded-full flex items-center justify-center -mt-6",children:r.jsx("img",{src:s.icon,alt:s.label,className:"w-6 h-6"})}):(0,r.jsxs)(r.Fragment,{children:[l&&n?r.jsx("img",{src:i.profileImage.profileImageURL,alt:"User profile",className:`w-6 h-6 rounded-full object-cover
                        ${a?"ring-2 ring-[#E0FE10]":""}
                        `,onError:e=>{console.error("Error loading profile image:",e),e.currentTarget.src=s.icon}}):r.jsx("img",{src:a?s.selectedIcon:s.icon,alt:s.label,className:"w-6 h-6"}),s.label&&r.jsx("span",{className:`text-xs ${a?"text-[#E0FE10]":"text-zinc-400"}`,children:s.label})]})},s.id)})})})};a()}catch(e){a(e)}})},34:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{Z:()=>p});var r=s(997),l=s(6689),i=s(1163),c=s(3291),o=s(8154),n=s(2069),d=s(2742),x=s(9003),u=s.n(x),m=s(8157),h=s(4565),g=s(1308),f=e([c,m,h,g]);[c,m,h,g]=f.then?(await f)():f;let p=({isVisible:e,onClose:t,onStartWorkout:s})=>{let a=(0,c.useDispatch)(),x=(0,c.useSelector)(e=>e.workout.currentWorkout);(0,c.useSelector)(e=>e.workout.currentExerciseLogs);let[f,p]=(0,l.useState)(!0),[b,j]=(0,l.useState)([]),[v,w]=(0,l.useState)("today"),[N,y]=(0,l.useState)(!1),[k,E]=(0,l.useState)([]),S=(0,i.useRouter)();(0,l.useEffect)(()=>{e&&(console.log("We are visible!"),z(),I(),A())},[e]);let C=e=>{if(!e)return 0;let t=new Date(e),s=new Date,a=t.getTime()-s.getTime();return Math.max(0,Math.ceil(a/864e5))},z=async()=>{p(!0);try{let e=await h.G_.fetchCurrentWorkoutSession(m.W4.currentUser?.id||"");e&&(a((0,g.q1)(e.workout)),a((0,g.HX)(e.logs||[])))}catch(e){console.error("Error fetching workout:",e)}finally{p(!1)}},I=async()=>{try{let e=await U();j(e)}catch(e){console.error("Error fetching challenges:",e)}},A=async()=>{try{let e=await L();E(e)}catch(e){console.error("Error fetching recent workouts:",e)}},U=async()=>{try{let e=await h.G_.fetchActiveChallenges();console.log("User Challenges:",e);let t=e.length>0?e[0]:null;return t?console.log("Active Challenge:",t):console.log("No active challenges found."),e}catch(e){return console.error("Error fetching user challenges:",e),[]}},L=async()=>{try{let e=new Date;console.log("Fetching workouts for date:",e);let t=await h.G_.fetchAllWorkoutSummaries();return console.log("Here are the summaries:",t),t.slice(0,3).map(e=>n.P7.fromFirebase({id:e.id,workoutId:e.workoutId||"",exercises:e.exercises||[],bodyParts:e.bodyParts||[],secondaryBodyParts:e.secondaryBodyParts||[],workoutTitle:e.workoutTitle||"Untitled Workout",caloriesBurned:e.caloriesBurned||0,workoutRating:e.workoutRating,exercisesCompleted:e.exercisesCompleted||[],aiInsight:e.aiInsight||"",recommendations:e.recommendations||[],gifURLs:e.gifURLs||[],recommendedWork:e.recommendedWork,isCompleted:e.isCompleted||!1,createdAt:e.createdAt,updatedAt:e.updatedAt,completedAt:e.completedAt,duration:e.duration||""}))}catch(e){return console.error("Error fetching recent workouts:",e),[]}},Z=async()=>{if(x)try{s&&await s(x),t()}catch(e){console.error("Error starting workout:",e)}},R=e=>{t(),S.push(`/round/${e.challengeId}`)},D=e=>e.toLocaleDateString(void 0,{month:"short",day:"numeric"}),W=e=>{console.log("Open summary for workout:",e)};return e?r.jsx(r.Fragment,{children:e&&(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col bg-[#E0FE10] overflow-hidden",children:[r.jsx("button",{onClick:t,className:"self-end m-4",children:r.jsx(o.Z,{size:24,className:"text-black"})}),(0,r.jsxs)("div",{className:"flex bg-black/10",children:[r.jsx("button",{onClick:()=>w("today"),className:u()("flex-1 py-3 text-center","today"===v?"border-b-2 border-black font-bold":""),children:"Today"}),r.jsx("button",{onClick:()=>w("rounds"),className:u()("flex-1 py-3 text-center","rounds"===v?"border-b-2 border-black font-bold":""),children:"Rounds"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:N?r.jsx(d.Z,{onClose:()=>y(!1),onCreateWorkout:e=>{console.log("Creating workout with parts:",e),y(!1)}}):(0,r.jsxs)(r.Fragment,{children:["today"===v&&(f?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("div",{className:"text-black",children:"Loading..."})}):x?(0,r.jsxs)("div",{className:"flex flex-col p-6 bg-[#E0FE10] rounded-lg",children:[r.jsx("div",{className:"mb-4",children:r.jsx("h2",{className:"text-xl font-bold text-black",children:"Workout In Progress"})}),(0,r.jsxs)("div",{className:"rounded-lg bg-black text-white p-4 flex flex-col gap-4",children:[r.jsx("h3",{className:"font-bold",children:x.title||"My Workout"}),(0,r.jsxs)("div",{className:"flex gap-4",children:[r.jsx("button",{onClick:Z,className:"px-4 py-2 rounded-md bg-green-200 text-black",children:"Resume"}),r.jsx("button",{onClick:()=>{console.log("Workout canceled")},className:"px-4 py-2 rounded-md bg-red-200 text-black",children:"Cancel"})]})]})]}):(0,r.jsxs)("div",{className:"flex flex-col p-8 bg-[#E0FE10] rounded-lg",children:[r.jsx("h3",{className:"text-2xl font-bold text-black mb-4",children:"You don't have your workout for today yet."}),(0,r.jsxs)("button",{onClick:()=>{y(!0)},className:"mt-2 flex items-center text-lg font-medium text-black",children:["Get a workout",r.jsx("svg",{className:"ml-2 w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:r.jsx("path",{d:"M5 12h14m-7-7l7 7-7 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),b.length>0&&r.jsx("div",{className:"mt-auto pt-8",children:(0,r.jsxs)("div",{className:"bg-black/10 rounded-full py-3 px-6 inline-flex items-center gap-2",children:[r.jsx("span",{className:"text-black",children:"Swipe to see"}),(0,r.jsxs)("span",{className:"font-bold text-black",children:[b.length," Active Rounds"]}),r.jsx("svg",{className:"w-4 h-4 text-black",viewBox:"0 0 24 24",fill:"none",children:r.jsx("path",{d:"M9 5l7 7-7 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]})),"rounds"===v&&(()=>{let e=e=>{if(!e.challenge?.startDate||!e.challenge?.endDate)return 0;let t=new Date(e.challenge.startDate),s=new Date(e.challenge.endDate),a=new Date,r=s.getTime()-t.getTime(),l=a.getTime()-t.getTime();return Math.min(Math.max(l/r,0),1)};return(0,r.jsxs)("div",{className:"p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-black mb-4",children:"Active Rounds"}),0===b.length?r.jsx("p",{className:"text-black",children:"No active rounds"}):r.jsx("div",{className:"space-y-4",children:b.map(t=>r.jsx("button",{onClick:()=>R(t),className:"w-full text-left",children:(0,r.jsxs)("div",{className:"p-4 space-y-3 bg-zinc-800 rounded-xl",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-white font-semibold",children:t.challenge?.title}),(0,r.jsxs)("span",{className:"text-[#E0FE10] text-sm",children:[C(t.challenge?.endDate),"d left"]})]}),r.jsx("div",{className:"h-2 bg-zinc-700 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-[#E0FE10] rounded-full",style:{width:`${100*e(t)}%`}})}),r.jsx("div",{className:"flex justify-between text-sm text-white/70",children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:r.jsx("path",{d:"M15.45 22c1.95.31 3.5-1.24 3.5-3.19V5.19c0-1.95-1.55-3.5-3.5-3.19m0 20H8.55c-1.95.31-3.5-1.24-3.5-3.19V5.19c0-1.95 1.55-3.5 3.5-3.19"})}),(0,r.jsxs)("span",{children:[t.currentStreak," day streak"]})]})})]},t.id)},t.id))})]})})(),"today"===v&&(0===k.length?null:(0,r.jsxs)("div",{className:"p-6 bg-[#E0FE10] rounded-lg mt-4",children:[r.jsx("h2",{className:"text-xl font-bold text-black mb-4",children:"Recent Workouts"}),r.jsx("div",{className:"space-y-4",children:k.slice(0,3).map(e=>(0,r.jsxs)("button",{onClick:()=>W(e),className:"w-full p-4 bg-black rounded-lg text-white flex justify-between items-center hover:bg-black/80 transition",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-bold",children:e.workoutTitle}),(0,r.jsxs)("p",{className:"text-sm",children:[D(e.createdAt)," \xb7 ",e.duration," min"]})]}),(0,r.jsxs)("span",{className:"font-bold",children:["Score: ",e.duration]})]},e.id))})]}))]})})]})}):null};a()}catch(e){a(e)}})},2742:(e,t,s)=>{s.d(t,{Z:()=>c});var a=s(997),r=s(6689),l=s(8154),i=s(3785);let c=({onClose:e,onCreateWorkout:t})=>{let[s,i]=(0,r.useState)([]),c=e=>{i(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,a.jsxs)("div",{className:"fixed inset-0 bg-zinc-900 flex flex-col min-h-screen",children:[(0,a.jsxs)("div",{className:"p-6 pb-2",children:[a.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full bg-zinc-800 flex items-center justify-center",children:a.jsx(l.Z,{className:"text-white",size:20})}),a.jsx("h1",{className:"text-4xl font-bold text-white mt-6 mb-2",children:"Choose the body parts you want to workout."}),a.jsx("p",{className:"text-zinc-400 text-lg",children:"You can choose multiple body parts"})]}),(0,a.jsxs)("div",{className:"flex-1 p-6 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 overflow-y-auto max-w-6xl mx-auto scrollbar-hide",children:[a.jsx(o,{id:"body-parts/bicep",name:"Biceps",isSelected:s.includes("bicep"),onToggle:c}),a.jsx(o,{id:"body-parts/tricep",name:"Triceps",isSelected:s.includes("triceps"),onToggle:c}),a.jsx(o,{id:"body-parts/chest",name:"Chest",isSelected:s.includes("chest"),onToggle:c}),a.jsx(o,{id:"body-parts/calves",name:"Calves",isSelected:s.includes("calves"),onToggle:c}),a.jsx(o,{id:"body-parts/abs",name:"Abs",isSelected:s.includes("abs"),onToggle:c}),a.jsx(o,{id:"body-parts/hamstrings",name:"Hamstrings",isSelected:s.includes("hamstrings"),onToggle:c}),a.jsx(o,{id:"body-parts/back",name:"Back",isSelected:s.includes("back"),onToggle:c}),a.jsx(o,{id:"body-parts/deltoids",name:"Deltoids",isSelected:s.includes("deltoids"),onToggle:c}),a.jsx(o,{id:"body-parts/glutes",name:"Glutes",isSelected:s.includes("glutes"),onToggle:c}),a.jsx(o,{id:"body-parts/lats",name:"Lats",isSelected:s.includes("lats"),onToggle:c}),a.jsx(o,{id:"body-parts/lowerback",name:"Lower Back",isSelected:s.includes("lowerback"),onToggle:c}),a.jsx(o,{id:"body-parts/quadriceps",name:"Quadriceps",isSelected:s.includes("quadriceps"),onToggle:c}),a.jsx(o,{id:"body-parts/rhomboids",name:"Rhomboids",isSelected:s.includes("rhomboids"),onToggle:c})]}),s.length>0&&a.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-zinc-900/80 backdrop-blur-sm border-t border-zinc-800",children:a.jsx("div",{className:"max-w-6xl mx-auto",children:a.jsx("button",{onClick:()=>t(s),className:"w-full py-4 rounded-full bg-[#E0FE10] text-black font-semibold text-lg",children:"Create workout"})})})]})},o=({id:e,name:t,isSelected:s,onToggle:r})=>(0,a.jsxs)("button",{onClick:()=>r(e),className:`relative aspect-square rounded-2xl bg-zinc-800/50 flex flex-col items-center justify-end
        ${s?"ring-2 ring-[#E0FE10]":""}
        max-w-[250px] w-full mx-auto`,children:[a.jsx("img",{src:`${e}.svg`,alt:t,className:"w-full h-full object-contain opacity-75"}),s&&a.jsx("div",{className:"absolute top-4 right-4 w-6 h-6 rounded-full bg-[#E0FE10] flex items-center justify-center",children:a.jsx(i.Z,{className:"text-black",size:16})})]})},1246:(e,t,s)=>{s.d(t,{Z:()=>c});var a=s(997),r=s(6689),l=s(8154);let i=e=>e?.category?.details?.screenTime??60,c=({exercises:e,currentExerciseLogs:t,currentExerciseIndex:s,onComplete:c,onClose:o})=>{if(!e||0===e.length)return console.error("No exercises provided"),(0,a.jsxs)("div",{className:"fixed inset-0 bg-zinc-900 flex items-center justify-center",children:[a.jsx("p",{className:"text-white",children:"No exercises available"}),a.jsx("button",{onClick:o,className:"mt-4 bg-[#E0FE10] text-black px-4 py-2 rounded",children:"Close Workout"})]});if(s<0||s>=e.length)return console.error("Invalid exercise index",{currentExerciseIndex:s,exercisesLength:e.length}),(0,a.jsxs)("div",{className:"fixed inset-0 bg-zinc-900 flex items-center justify-center",children:[a.jsx("p",{className:"text-white",children:"Invalid exercise selection"}),a.jsx("button",{onClick:o,className:"mt-4 bg-[#E0FE10] text-black px-4 py-2 rounded",children:"Close Workout"})]});let n=e[s],d=n?.exercise;if(!d)return console.error("No exercise found at current index",{currentExerciseIndex:s,exerciseLog:n}),(0,a.jsxs)("div",{className:"fixed inset-0 bg-zinc-900 flex items-center justify-center",children:[a.jsx("p",{className:"text-white",children:"Exercise data is missing"}),a.jsx("button",{onClick:o,className:"mt-4 bg-[#E0FE10] text-black px-4 py-2 rounded",children:"Close Workout"})]});let[x,u]=(0,r.useState)(()=>i(d)),[m,h]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{u(i(d))},[d]),(0,r.useEffect)(()=>{if(x<=0){c();return}if(m)return;let e=setInterval(()=>{u(e=>e-1)},1e3);return()=>clearInterval(e)},[x,m,c]),a.jsx("div",{className:"fixed inset-0 bg-zinc-900 flex flex-col",children:(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx("video",{src:(()=>{console.log("Current Exercise Details:",{name:d?.name,videos:d?.videos,currentVideoPosition:d?.currentVideoPosition});let e=d?.videos||[];if(0===e.length)return console.warn(`No videos found for exercise: ${d?.name}`),"";let t=Math.min(d?.currentVideoPosition??0,e.length-1),s=e[t]?.videoURL||"";return s||console.warn(`No video URL for exercise ${d?.name}`),s})(),className:"absolute inset-0 w-full h-full object-cover",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,onError:e=>{console.error("Video error:",e)}}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-48 bg-gradient-to-t from-black/70 to-transparent pointer-events-none"}),(0,a.jsxs)("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 bg-black/50 rounded-full px-6 py-2 flex items-center gap-4",children:[a.jsx("button",{onClick:()=>h(!m),className:"text-white",children:m?"▶️":"⏸️"}),(0,a.jsxs)("span",{className:"text-white font-mono text-2xl",children:[Math.floor(x/60),":",(x%60).toString().padStart(2,"0")]})]}),a.jsx("div",{className:"absolute bottom-24 left-0 right-0 px-4 z-10",children:a.jsx("h2",{className:"text-white text-4xl font-bold",children:d?.name||"Exercise"})}),a.jsx("div",{className:"absolute bottom-8 left-0 right-0 z-10",children:a.jsx("div",{className:"px-4 overflow-x-auto",children:a.jsx("div",{className:"flex gap-2 w-fit",children:t.map((e,t)=>a.jsx("div",{className:`flex-shrink-0 relative w-10 h-10 rounded-full overflow-hidden border-2 
                    ${t===s?"border-[#E0FE10]":e.isCompleted?"border-zinc-600":"border-zinc-400"}`,children:e.isCompleted?a.jsx("div",{className:"bg-[#E0FE10] w-full h-full flex items-center justify-center",children:a.jsx("span",{className:"text-black",children:"✓"})}):a.jsx("img",{src:e.exercise?.videos?.[0]?.gifURL||"/placeholder-exercise.gif",alt:e.exercise?.name||"Exercise",className:"w-full h-full object-cover",onError:e=>{console.error(`Error loading GIF for exercise ${t}:`,e),e.target.src="/placeholder-exercise.gif"}})},e.id||t))})})}),a.jsx("button",{onClick:o,className:"absolute top-4 right-4 w-10 h-10 rounded-full bg-black/50 flex items-center justify-center",children:a.jsx(l.Z,{className:"text-white",size:20})})]})})}},4558:(e,t,s)=>{s.d(t,{Z:()=>r});var a=s(997);s(6689);let r=()=>a.jsx("div",{className:"max-w-xl mx-auto px-4 py-6",children:(0,a.jsxs)("div",{className:"text-center text-white",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Create"}),a.jsx("p",{className:"text-zinc-400",children:"Start building your next workout or post."})]})})},6784:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{Z:()=>d});var r=s(997),l=s(6689),i=s(9544),c=s(3518),o=s(1163),n=e([i]);i=(n.then?(await n)():n)[0];let d=()=>{let[e,t]=(0,l.useState)([]),[s,a]=(0,l.useState)(!0),[n,d]=(0,l.useState)(!1),[x,u]=(0,l.useState)(null),[m,h]=(0,l.useState)(!0),g=(0,l.useRef)(null),f=(0,o.useRouter)(),p=async(e=!1)=>{try{e?d(!0):a(!0);let{exercises:s,lastVisible:r}=await i.$Q.fetchPaginatedExercises(x,15);t(t=>e?[...t,...s]:s),u(r),h(s.length>0)}catch(e){console.error("Error fetching exercises:",e)}finally{e?d(!1):a(!1)}};(0,l.useEffect)(()=>{p()},[]),(0,l.useEffect)(()=>{if(!g.current)return;let e=new IntersectionObserver(e=>{e[0].isIntersecting&&m&&!n&&p(!0)},{threshold:1});return e.observe(g.current),()=>e.disconnect()},[m,n,x]),(0,l.useEffect)(()=>{let e=new IntersectionObserver(e=>{for(let t of e){let e=t.target;t.isIntersecting&&!e.dataset.userPause?e.play().catch(e=>console.error("Video play error:",e)):e.pause()}},{threshold:.5}),t=document.querySelectorAll('video[data-observe="true"]');return t.forEach(t=>{e.observe(t)}),()=>{t.forEach(t=>e.unobserve(t)),e.disconnect()}},[e]);let b=e=>{let t=e.currentTarget;t.paused?(t.removeAttribute("data-user-pause"),t.play().catch(e=>console.error("Video play error:",e))):(t.setAttribute("data-user-pause","true"),t.pause())},j=e=>{e?f.push(`/profile/${e}`):console.error("Username is missing.")},v=(e,s)=>{t(t=>t.map((t,a)=>a===e?{...t,currentVideoPosition:s}:t))};return s&&0===e.length?r.jsx("div",{className:"text-white text-center",children:"Loading exercises..."}):(0,r.jsxs)("div",{className:"max-w-xl mx-auto px-4 py-6",children:[e.map((e,t)=>(0,r.jsxs)("div",{className:"bg-zinc-800 rounded-xl overflow-hidden mb-6",children:[r.jsx("video",{"data-observe":"true",src:e.videos[e.currentVideoPosition]?.videoURL,muted:!0,loop:!0,className:"w-full aspect-square object-cover",onClick:e=>{e.preventDefault(),b(e)},playsInline:!0}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[r.jsx("img",{src:e.videos[e.currentVideoPosition]?.profileImage.profileImageURL||"/default-profile.png",alt:e.videos[e.currentVideoPosition]?.username||"User",className:"w-8 h-8 rounded-full cursor-pointer",onClick:()=>j(e.videos[e.currentVideoPosition]?.username||"")}),r.jsx("p",{className:"text-white font-medium cursor-pointer",onClick:()=>j(e.videos[e.currentVideoPosition]?.username||""),children:e.videos[e.currentVideoPosition]?.username||"Unknown User"})]}),r.jsx("p",{className:"text-zinc-400 text-sm",children:e.name}),r.jsx("p",{className:"text-zinc-500 text-xs mt-1",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-4",children:[e.videos.slice(0,4).map((s,a)=>r.jsx(c.f,{gifUrl:s.gifURL||"/default-gif.gif",alt:`Preview of ${e.name}`,frameSize:{width:36,height:36},contentMode:"cover",className:`border-2 ${e.currentVideoPosition===a?"border-[#E0FE10]":"border-zinc-500"}`,onClick:()=>v(t,a)},s.id)),e.videos.length>4&&(0,r.jsxs)("div",{className:"w-9 h-9 bg-gray-600 rounded-full flex items-center justify-center text-white text-sm",onClick:()=>console.log("More videos tapped"),children:["+",e.videos.length-4]})]})]})]},e.id)),m&&r.jsx("div",{ref:g,className:"text-center py-4",children:n&&r.jsx("div",{className:"spinner border-t-transparent border-4 border-[#E0FE10] w-6 h-6 rounded-full animate-spin"})})]})};a()}catch(e){a(e)}})},7229:(e,t,s)=>{s.d(t,{Z:()=>d});var a=s(997),r=s(6689),l=s.n(r),i=s(7963);let c=(0,s(1462).Z)("CircleUserRound",[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),o=({onShare:e})=>a.jsx("div",{className:"bg-zinc-800 rounded-lg p-6 mx-4 mb-6 cursor-pointer shadow-lg transition-colors hover:bg-zinc-700/80",onClick:e,children:(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[a.jsx("div",{className:"bg-zinc-700 p-4 rounded-full mb-4",children:a.jsx(i.Z,{className:"w-8 h-8 text-white"})}),a.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Pulse is even better with friends"}),a.jsx("p",{className:"text-zinc-400 text-sm",children:"Find your tribe, or invite your friends to join you sweat. Tap here to send out an invite link."})]})}),n=({message:e,currentUserId:t,onSelect:s})=>{let r=e.participants.find(e=>e.id!==t);if(!r)return null;let l=new Date(e.lastMessageTimestamp).toLocaleDateString();return(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 hover:bg-zinc-800 cursor-pointer transition-colors",onClick:()=>s(e),children:[r.profileImage?.profileImageURL?a.jsx("img",{src:r.profileImage.profileImageURL,alt:r.username,className:"w-12 h-12 rounded-full object-cover"}):a.jsx("div",{className:"w-12 h-12 bg-zinc-700 rounded-full flex items-center justify-center",children:a.jsx(c,{className:"w-8 h-8 text-zinc-400"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("h3",{className:"text-white font-medium truncate",children:["@",r.username]}),a.jsx("span",{className:"text-xs text-zinc-400 flex-shrink-0",children:l})]}),a.jsx("p",{className:`text-sm truncate ${e.unreadCount?"text-white font-medium":"text-zinc-400"}`,children:e.lastMessage})]})]})},d=()=>{let[e,t]=l().useState([]),[s,r]=l().useState(!0),i={id:"current-user-id"};l().useEffect(()=>{(async()=>{try{r(!0);let e=await fetch("/api/messages"),s=await e.json();t(s.messages)}catch(e){console.error("Failed to fetch messages:",e),t([])}finally{r(!1)}})()},[]);let c=async()=>{try{navigator.share?await navigator.share({title:"Join me on Pulse",text:"Hey! Let's workout together using Pulse.",url:"https://fitwithpulse.ai"}):console.log("Share not supported")}catch(e){console.error("Error sharing:",e)}},d=e=>{console.log("Selected message:",e)};return s?a.jsx("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center",children:a.jsx("div",{className:"text-zinc-400",children:"Loading..."})}):(0,a.jsxs)("div",{className:"min-h-screen bg-zinc-900",children:[a.jsx("div",{className:"sticky top-0 z-10 bg-zinc-900/80 backdrop-blur-sm border-b border-zinc-800",children:a.jsx("div",{className:"px-4 py-4 flex justify-center relative",children:a.jsx("h1",{className:"text-lg font-semibold text-white",children:"Direct Messages"})})}),(0,a.jsxs)("div",{className:"pt-4",children:[a.jsx(o,{onShare:c}),e.length>0&&a.jsx("div",{className:"divide-y divide-zinc-800",children:e.map(e=>a.jsx(n,{message:e,currentUserId:i.id,onSelect:d},e.id))})]})]})}},3067:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{Z:()=>f});var r=s(997),l=s(6689),i=s(8157),c=s(9284),o=s(6576),n=s(1269),d=s(6590),x=s(5647),u=s(5881),m=s(452),h=e([i,c]);[i,c]=h.then?(await h)():h;let g={ACTIVITY:"activity",EXERCISES:"moves",CHALLENGES:"rounds"},f=()=>{let[e,t]=(0,l.useState)(g.EXERCISES),[s,a]=(0,l.useState)([]),[h,f]=(0,l.useState)([]),[p,b]=(0,l.useState)([]),[j,v]=(0,l.useState)([]),[w,N]=(0,l.useState)([]),[y,k]=(0,l.useState)([]),[E,S]=(0,l.useState)(null),C=i.W4.currentUser;if(!C)return r.jsx("div",{children:"Loading..."});(0,l.useEffect)(()=>{(async()=>{if(C?.id)try{let[e,t,a,r]=await Promise.all([i.W4.fetchFollowers(),i.W4.fetchFollowing(),c.G.fetchUserChallenges(),c.G.fetchAllWorkoutSummaries()]);N(e),k(t);let l=a.map(e=>e.challenge).filter(e=>void 0!==e);f(l),b(r);let o=(0,m.o)(r,s,[...e,...t],C.id);console.log("Parsed Activities"+JSON.stringify(o)),v(o)}catch(e){console.error("Error fetching user data:",e)}})()},[C?.id]),(0,l.useEffect)(()=>{(async()=>{if(C?.id)try{let e=await i.W4.fetchUserVideos();a(e)}catch(e){console.error("Error fetching user videos:",e)}})()},[C?.id]);let z={instagram:C.creator?.instagramHandle,twitter:C.creator?.twitterHandle,youtube:C.creator?.youtubeUrl};return r.jsx("div",{className:"min-h-screen bg-zinc-900",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx("div",{className:"h-48 bg-gradient-to-b from-zinc-800 to-zinc-900"}),r.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"relative -mt-24",children:[r.jsx("div",{className:"relative inline-block",children:r.jsx("img",{src:C.profileImage?.profileImageURL||"/api/placeholder/96/96",alt:C.displayName,className:"w-24 h-24 rounded-full border-4 border-zinc-900"})}),(0,r.jsxs)("div",{className:"mt-4 text-white",children:[r.jsx("h1",{className:"text-2xl font-bold",children:C.displayName}),(0,r.jsxs)("p",{className:"text-zinc-400",children:["@",C.username]}),(0,r.jsxs)("div",{className:"mt-2 flex items-center gap-4 text-sm text-zinc-400",children:[(0,r.jsxs)("span",{children:[w.length," followers"]}),r.jsx("span",{className:"w-1 h-1 bg-zinc-600 rounded-full"}),(0,r.jsxs)("span",{children:[y.length," following"]})]}),r.jsx("p",{className:"mt-4 text-zinc-300",children:C.bio}),r.jsx("div",{className:"mt-4 flex gap-6",children:Object.entries(z).map(([e,t])=>t?r.jsx("a",{href:function(e,t){switch(e){case"instagram":return`https://instagram.com/${t}`;case"twitter":return`https://twitter.com/${t}`;case"youtube":return t;default:return"#"}}(e,t),target:"_blank",rel:"noopener noreferrer",className:"text-zinc-400 hover:text-white transition-colors",children:r.jsx("img",{src:`/${e}.svg`,alt:e,className:"w-6 h-6 hover:opacity-80"})},e):null)})]}),r.jsx("div",{className:"mt-8 border-b border-zinc-700 overflow-x-auto",children:r.jsx("nav",{className:"flex whitespace-nowrap min-w-full sm:min-w-0 px-4 sm:px-0",children:r.jsx("div",{className:"flex gap-8 pb-2 sm:pb-0",children:Object.values(g).map(s=>(0,r.jsxs)("button",{onClick:()=>t(s),className:`pb-4 px-2 text-sm font-medium transition-colors relative flex-shrink-0
                        ${e===s?"text-white":"text-zinc-400 hover:text-zinc-300"}`,children:[s.charAt(0).toUpperCase()+s.slice(1),e===s&&r.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-white"})]},s))})})}),(0,r.jsxs)("div",{className:"mt-8",children:[e===g.ACTIVITY&&r.jsx("div",{className:"px-5",children:0===j.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center p-8",children:[r.jsx(o.Z,{className:"w-12 h-12 text-white/20"}),r.jsx("h3",{className:"mt-4 text-white font-medium",children:"No activities yet"})]}):r.jsx(n.Z,{activities:j,workoutSummaries:p,userVideos:s,username:C.username,isPublicProfile:!1,onWorkoutSelect:e=>{console.log("Selected workout summary:",e)},onVideoSelect:e=>{console.log("Selected exercise:",e),S(e)},onProfileSelect:e=>{console.log("Selected user profile:",e)}})}),e===g.EXERCISES&&(0,r.jsxs)("div",{className:"px-5",children:[(0,r.jsxs)("h2",{className:"text-xl text-white font-semibold mb-4",children:["Your Videos (",s.length,")"]}),r.jsx(x.Z,{userVideos:s,onSelectVideo:e=>{S(e)}})]}),e===g.CHALLENGES&&r.jsx(d.M,{activeChallenges:h,onSelectChallenge:e=>{console.log("Selected challenge:",e)}})]})]})}),E&&r.jsx(u.default,{exercise:E,user:C,onBack:()=>S(null),onProfileClick:()=>{console.log("Profile clicked")}})]})})};a()}catch(e){a(e)}})},684:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{Z:()=>h});var r=s(997),l=s(6689),i=s(8157),c=s(4672),o=s(7963),n=s(6111),d=s(9976),x=s(9544),u=s(1163),m=e([i,x]);[i,x]=m.then?(await m)():m;let h=()=>{let[e,t]=(0,l.useState)(!0),[s,a]=(0,l.useState)("all"),[m,h]=(0,l.useState)(""),[g,f]=(0,l.useState)([]),[p,b]=(0,l.useState)([]),[j,v]=(0,l.useState)([]),[w,N]=(0,l.useState)([]),y=(0,u.useRouter)(),k=[{id:"all",label:"All",icon:r.jsx(c.Z,{className:"w-4 h-4"})},{id:"people",label:"People",icon:r.jsx(o.Z,{className:"w-4 h-4"})},{id:"exercises",label:"Moves",icon:r.jsx(n.Z,{className:"w-4 h-4"})},{id:"bodyparts",label:"Bodyparts",icon:r.jsx(n.Z,{className:"w-4 h-4"})}],E=e=>{y.push(`/profile/${e.username}`)},S=e=>{let t=e.name.toLowerCase().replace(/\s+/g,"-");y.push(`/exercise/${t}`)};return((0,l.useEffect)(()=>{(async()=>{t(!0);try{let e=await i.W4.fetchUsersWithVideosUploaded();v(e)}catch(e){console.error("Error loading initial data:",e)}finally{t(!1)}})()},[]),(0,l.useEffect)(()=>{(async()=>{t(!0);try{let[e,t]=await Promise.all([i.W4.fetchUsersWithVideosUploaded(),x.$Q.fetchFeaturedExercisesWithVideos(24)]);v(e),N(t)}catch(e){console.error("Error loading initial data:",e)}finally{t(!1)}})()},[]),e)?r.jsx("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center",children:r.jsx("div",{className:"text-white",children:"Loading..."})}):(0,r.jsxs)("div",{className:"min-h-screen bg-zinc-900",children:[r.jsx("div",{className:"sticky top-0 z-10 bg-zinc-900/80 backdrop-blur-sm border-b border-zinc-800 ",children:(0,r.jsxs)("div",{className:"pt-4 px-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 bg-zinc-800 rounded-lg px-4 py-2",children:[r.jsx(c.Z,{className:"w-5 h-5 text-zinc-400"}),r.jsx("input",{type:"text",placeholder:(()=>{switch(s){case"people":return"Search people..";case"exercises":return"Search exercises..";case"bodyparts":return"Search bodyparts..";default:return"Search people, exercises, or bodyparts.."}})(),value:m,onChange:e=>h(e.target.value),className:"bg-transparent text-white placeholder-zinc-500 flex-1 outline-none"})]}),r.jsx("div",{className:"flex space-x-2 mt-4 pb-4 overflow-x-auto",children:k.map(e=>(0,r.jsxs)("button",{onClick:()=>a(e.id),className:`flex items-center space-x-2 px-4 py-2 rounded-full transition-colors
                  ${s===e.id?"bg-[#E0FE10] text-black":"bg-zinc-800 text-zinc-400 hover:text-white"}`,children:[e.icon,r.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:e.label})]},e.id))})]})}),r.jsx("div",{className:"pt-4 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:""===m?(0,r.jsxs)("div",{className:"py-4 ",children:[r.jsx("h2",{className:"text-lg font-semibold text-white px-4 mb-4",children:"People"}),r.jsx("div",{className:"overflow-x-auto scrollbar-hide",children:r.jsx("div",{className:"flex flex-nowrap space-x-4 px-4 pb-4 min-w-max",children:j.map(e=>r.jsx("div",{className:"flex-shrink-0 cursor-pointer",onClick:()=>E(e),children:(0,r.jsxs)("div",{className:"relative w-[150px]",children:[(0,r.jsxs)("div",{className:"aspect-square rounded-2xl overflow-hidden bg-zinc-800",children:[e.profileImage?.profileImageURL?r.jsx("img",{src:e.profileImage.profileImageURL,alt:e.username,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx(d.Z,{className:"w-12 h-12 text-zinc-600"})}),e.creator?.type?.includes("personalTrainer")&&r.jsx("div",{className:"absolute bottom-2 right-2",children:r.jsx("div",{className:"bg-[#E0FE10] px-3 py-1 rounded-xl",children:r.jsx("span",{className:"text-xs font-bold text-black tracking-wider",children:"T R A I N E R"})})})]}),(0,r.jsxs)("p",{className:"mt-2 text-sm text-white text-center",children:["@",e.username]})]})},e.id))})}),(0,r.jsxs)("div",{className:"py-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-white px-4 mb-4",children:"Explore New Moves"}),r.jsx("div",{className:"grid grid-cols-3 gap-0",children:w.map(e=>r.jsx("div",{className:"cursor-pointer aspect-[2/3]",onClick:()=>S(e),children:r.jsx("div",{className:"relative w-full h-full",children:e.videos[0]?.gifURL?r.jsx("img",{src:e.videos[0].gifURL,alt:e.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-zinc-800",children:r.jsx(n.Z,{className:"w-8 h-8 text-zinc-600"})})})},e.id))})]})]}):(0,r.jsxs)("div",{className:"divide-y divide-zinc-800",children:["all"===s&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"px-4 py-2 text-sm font-medium text-zinc-400",children:"People"}),r.jsx("div",{className:"px-4 py-2 text-sm font-medium text-zinc-400",children:"Exercises"})]}),"people"===s&&r.jsx("div",{className:"px-4"}),"exercises"===s&&r.jsx("div",{className:"px-4"})]})})]})};a()}catch(e){a(e)}})},3518:(e,t,s)=>{s.d(t,{f:()=>r});var a=s(997);s(6689);let r=({gifUrl:e,alt:t,frameSize:s,contentMode:r="cover",className:l="",onClick:i})=>{let c=s?{width:`${s.width}px`,height:`${s.height}px`}:{};return a.jsx("div",{className:`relative overflow-hidden rounded-full cursor-pointer ${l}`,style:c,onClick:i,children:a.jsx("img",{src:e,alt:t,className:`w-full h-full object-${r}`,loading:"lazy"})})}},9050:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{Z:()=>x});var r=s(997),l=s(6689),i=s(6490),c=s(401),o=s(3291),n=s(4484),d=e([c,o,n]);[c,o,n]=d.then?(await d)():d;let x=()=>{let[e,t]=(0,l.useState)(!1),s=(0,l.useRef)(null),a=(0,o.useDispatch)(),d=(0,c.getAuth)();(0,l.useEffect)(()=>{let e=e=>{s.current&&!s.current.contains(e.target)&&t(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let x=async()=>{try{await (0,c.signOut)(d),a((0,n.av)(null))}catch(e){console.error("Error signing out:",e)}};return(0,r.jsxs)("div",{className:"relative",ref:s,children:[r.jsx("button",{onClick:()=>t(!e),className:"flex items-center justify-center hover:bg-zinc-800 rounded-full p-2 transition-colors duration-200",children:r.jsx(i.Z,{className:`text-white w-6 h-6 transition-transform duration-200 ${e?"rotate-180":""}`})}),e&&r.jsx("div",{className:"absolute top-full right-0 mt-2 w-48 bg-zinc-800 rounded-lg shadow-lg border border-zinc-700 z-50 overflow-hidden",style:{transform:"translateX(-50%)"},children:r.jsx("div",{className:"px-4 py-2 hover:bg-zinc-700 transition-colors duration-200 cursor-pointer",onClick:x,children:r.jsx("span",{className:"text-white",children:"Sign Out"})})})]})};a()}catch(e){a(e)}})},3960:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{Z:()=>f});var r=s(997),l=s(6689),i=s(8154),c=s(6111),o=s(7218),n=s(245),d=s(2069),x=s(9284),u=s(1163),m=s(3291),h=s(1308),g=e([x,m,h]);[x,m,h]=g.then?(await g)():g;let f=({workout:e,onClose:t,onStartWorkout:s})=>{let[a,g]=(0,l.useState)(!1);(0,u.useRouter)();let f=(0,m.useDispatch)(),p=(0,m.useSelector)(e=>e.user.currentUser?.id),b=(0,m.useSelector)(e=>e.workout.currentWorkout),j=async()=>{s&&s()},v=async()=>{if(!p||!b){console.error("No user ID or current workout session found");return}try{await x.G.cancelWorkoutSession(p,b.id),f((0,h.q1)(null)),f((0,h.HX)([])),console.log("Workout session canceled successfully")}catch(e){console.error("Error canceling workout session:",e)}},w=({icon:e,title:t,value:s})=>(0,r.jsxs)("div",{className:"flex items-center bg-zinc-800 rounded-xl p-4",children:[r.jsx(e,{className:"text-[#E0FE10] w-6 h-6 mr-4"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-zinc-400 text-sm",children:t}),r.jsx("p",{className:"text-white font-semibold",children:s})]})]});return(0,r.jsxs)("div",{className:"min-h-screen bg-black flex flex-col",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 p-4",children:r.jsx("button",{onClick:t,className:"ml-auto block",children:r.jsx(i.Z,{className:"text-white w-6 h-6"})})}),(0,r.jsxs)("div",{className:"flex-grow container mx-auto px-4 pt-20",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[r.jsx(c.Z,{className:"mx-auto text-[#E0FE10] w-20 h-20 mb-4"}),r.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:e.title}),r.jsx("p",{className:"text-zinc-400 mb-8",children:"Once you hit start, your workout will begin. Get ready to crush it! \uD83D\uDCAA"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx(w,{icon:o.Z,title:"Estimated Duration",value:`${d.oQ.estimatedDuration(e.exercises)} min`}),(0,r.jsxs)("div",{className:"bg-zinc-800 rounded-xl",children:[(0,r.jsxs)("button",{onClick:()=>g(!a),className:"w-full flex items-center justify-between p-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(c.Z,{className:"text-[#E0FE10] w-6 h-6 mr-4"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-zinc-400 text-sm",children:"Exercise Count"}),(0,r.jsxs)("p",{className:"text-white font-semibold",children:[e.exercises.length," exercises"]})]})]}),r.jsx(n.Z,{className:`text-[#E0FE10] transform transition-transform ${a?"rotate-90":""}`})]}),a&&r.jsx("div",{className:"border-t border-zinc-700 p-4",children:e.exercises.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center mb-3 last:mb-0",children:[r.jsx("div",{className:"bg-zinc-700 rounded-full w-6 h-6 flex items-center justify-center mr-4",children:r.jsx("span",{className:"text-zinc-400 text-xs",children:t+1})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-white",children:e.exercise.name}),(0,r.jsxs)("p",{className:"text-zinc-400 text-sm",children:[e.exercise.sets," sets • ",e.exercise.reps," reps"]})]})]},e.exercise.id))})]}),r.jsx(w,{icon:c.Z,title:"Workout Type",value:e.zone})]}),(0,r.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black to-transparent",children:[r.jsx("button",{onClick:v,className:"w-full text-white py-3 rounded-full font-bold text-lg mb-4",children:"Cancel"}),r.jsx("button",{onClick:j,className:"w-full bg-[#E0FE10] text-black py-3 rounded-full font-bold text-lg",children:"Start Workout"})]})]})]})};a()}catch(e){a(e)}})},9180:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>N});var r=s(997),l=s(6689),i=s(3291),c=s(747),o=s(6784),n=s(684),d=s(4558),x=s(7229),u=s(3067),m=s(3960),h=s(1246),g=s(9315),f=s(34),p=s(2069),b=s(9284),j=s(9050),v=s(1308),w=e([i,c,o,n,u,m,f,b,j,v]);[i,c,o,n,u,m,f,b,j,v]=w.then?(await w)():w;let N=()=>{let[e,t]=(0,l.useState)(g.O.Discover),[s,a]=(0,l.useState)(!1),[w,N]=(0,l.useState)(0),{currentUser:y}=(0,i.useSelector)(e=>e.user),k=y?.id,E=(0,i.useSelector)(e=>e.workout.currentWorkout),S=(0,i.useSelector)(e=>e.workout.currentExerciseLogs),C=(0,i.useDispatch)();(0,l.useEffect)(()=>{k&&(async()=>{try{let e=await b.G.fetchAllWorkoutSessions(k),t=e.filter(e=>e.workout?.workoutStatus===p.Z0.QueuedUp),s=e.filter(e=>e.workout?.workoutStatus===p.Z0.InProgress);if(s.length>0){let e=s[0];C((0,v.q1)(e.workout)),C((0,v.HX)(e.logs||[]))}else if(t.length>0){let e=t[0];C((0,v.q1)(e.workout)),C((0,v.HX)(e.logs||[]))}else C((0,v.q1)(null)),C((0,v.HX)([]))}catch(e){console.error("Error fetching workout sessions:",e)}})()},[k,C]);let z=(e,t)=>{C((0,v.q1)(e)),C((0,v.HX)(t))},I=()=>{E&&C((0,v.q1)({...E,workoutStatus:p.Z0.InProgress}))},A=async()=>{if(!E||!S.length){console.error("No active workout or logs");return}let e=S[w]?.exercise,t=S[w]?.isBodyWeight,s=[...S];s[w]={...s[w],isCompleted:!0},console.log("Exercise completed:",e?.name);try{E&&k&&await b.G.updateWorkoutLogs({userId:k,workoutId:E.id,logs:s}),t?await U(s):await L(s),w<s.length-1?N(e=>e+1):await Z()}catch(e){console.error("Error submitting exercise:",e)}},U=e=>{let t=e.map(e=>({...e,logs:e.logs.map(e=>({...e,weight:0,isBodyWeight:!0,reps:e.reps||0}))}));return L(t)},L=async e=>{try{E&&k&&(console.log("Updating workout logs in the database"),await b.G.updateWorkoutLogs({userId:k,workoutId:E.id,logs:e})),C((0,v.HX)(e)),console.log("Updated currentExerciseLogs in Redux"),w<e.length-1?(N(e=>e+1),console.log("Moving to next exercise")):await Z()}catch(e){console.error("Error submitting exercise:",e)}},Z=async()=>{},R=()=>{C((0,v.q1)(null)),C((0,v.HX)([])),N(0)},D=async e=>{try{if(k){let t=await b.G.saveWorkoutSession({userId:k,workout:e,logs:e.logs||[]});t&&(z(t,t.logs||[]),a(!1))}}catch(e){console.error("Error starting workout:",e)}};return r.jsx("div",{className:"min-h-screen bg-zinc-900",children:E?(()=>{if(!E)return null;switch(E.workoutStatus){case p.Z0.QueuedUp:return r.jsx(m.Z,{workout:E,onClose:R,onStartWorkout:I});case p.Z0.InProgress:return r.jsx(h.Z,{exercises:E.logs||[],currentExerciseLogs:S,currentExerciseIndex:w,onComplete:A,onClose:R});default:return null}})():(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("nav",{className:"px-4 py-4 bg-zinc-900/80 backdrop-blur-sm border-b border-zinc-800 sticky top-0 z-10 flex justify-between items-center",children:[r.jsx("div",{className:"flex items-center",children:r.jsx("img",{src:"/pulse-logo-white.svg",alt:"Pulse",className:"h-8"})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{className:"bg-[#E0FE10] text-black px-4 py-2 rounded-lg",onClick:()=>a(!0),children:"Start Workout"}),r.jsx(j.Z,{})]})]}),r.jsx("div",{className:"w-full",children:(()=>{switch(e){case g.O.Discover:return r.jsx(o.Z,{});case g.O.Search:return r.jsx(n.Z,{});case g.O.Create:return r.jsx(d.Z,{});case g.O.Messages:return r.jsx(x.Z,{});case g.O.Profile:return r.jsx(u.Z,{});default:return null}})()}),r.jsx(c.Z,{selectedTab:e,onTabChange:t}),r.jsx(f.Z,{isVisible:s,onClose:()=>a(!1),onStartWorkout:D})]})})};a()}catch(e){a(e)}})},9315:(e,t,s)=>{var a;s.d(t,{O:()=>a}),function(e){e.Discover="discover",e.Search="search",e.Create="create",e.Messages="messages",e.Profile="profile"}(a||(a={}))}};
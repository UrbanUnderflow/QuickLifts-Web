exports.id=483,exports.ids=[483],exports.modules={9777:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{I:()=>c,db:()=>l});var o=r(3745),s=r(401),i=r(1492),n=e([o,s,i]);[o,s,i]=n.then?(await n)():n;let d=(0,o.initializeApp)({apiKey:"AIzaSyCBNr8WylRpi7IZ5M_COy1E3LaStQgLMvk",authDomain:"quicklifts-dd3f1.firebaseapp.com",projectId:"quicklifts-dd3f1",storageBucket:"quicklifts-dd3f1.appspot.com",messagingSenderId:"691046627244",appId:"1:691046627244:ios:821c53e53f20c736a9ec09"}),c=(0,s.getAuth)(d),l=(0,i.getFirestore)(d);a()}catch(e){a(e)}})},6738:(e,t,r)=>{"use strict";r.d(t,{cd:()=>n,lg:()=>i,mn:()=>a});var a,o=r(2069),s=r(1393);!function(e){e.Biceps="biceps",e.Triceps="triceps",e.Chest="chest",e.Calves="calves",e.Abs="abs",e.Hamstrings="hamstrings",e.Back="back",e.Glutes="glutes",e.Quadriceps="quadriceps",e.Forearms="forearms",e.Shoulders="shoulders",e.Lowerback="lowerback",e.Lats="lats",e.Traps="traps",e.Rhomboids="rhomboids",e.Deltoids="deltoids",e.Fullbody="fullbody"}(a||(a={}));class i{constructor(e){this.id=e.id||"",this.workoutId=e.workoutId||"",this.userId=e.userId||"",this.exercise=n.fromFirebase(e.exercise||{}),this.logs=(e.logs||[]).map(e=>o.c_.fromFirebase(e)),this.feedback=e.feedback||"",this.note=e.note||"",this.recommendedWeight=e.recommendedWeight,this.isSplit=e.isSplit||!1,this.isBodyWeight=e.isBodyWeight||!1,this.logSubmitted=e.logSubmitted||!1,this.logIsEditing=e.logIsEditing||!1,this.isCompleted=e.isCompleted||!1,this.order=e.order,this.createdAt=e.createdAt?new Date(e.createdAt):new Date,this.updatedAt=e.updatedAt?new Date(e.updatedAt):new Date}static fromFirebase(e){return new i({id:e.id||"",workoutId:e.workoutId||"",userId:e.userId||"",exercise:e.exercise||{},logs:e.logs||[],feedback:e.feedback||"",note:e.note||"",recommendedWeight:e.recommendedWeight,isSplit:e.isSplit||!1,isBodyWeight:e.isBodyWeight||!1,logSubmitted:e.logSubmitted||!1,logIsEditing:e.logIsEditing||!1,isCompleted:e.isCompleted||!1,order:e.order,createdAt:e.createdAt,updatedAt:e.updatedAt})}}class n{constructor(e){this.id=e.id||"",this.name=e.name||"",this.description=e.description||"",this.category=e.category,this.primaryBodyParts=e.primaryBodyParts||[],this.secondaryBodyParts=e.secondaryBodyParts||[],this.tags=e.tags||[],this.videos=(e.videos||[]).map(e=>d.fromFirebase(e)),this.steps=e.steps||[],this.visibility=e.visibility||[],this.currentVideoPosition=e.currentVideoPosition||0,this.sets=e.sets||0,this.reps=e.reps||"",this.weight=e.weight||0,this.author=c.fromFirebase(e.author||{}),this.createdAt=e.createdAt?new Date(e.createdAt):new Date,this.updatedAt=e.updatedAt?new Date(e.updatedAt):new Date}static fromFirebase(e){return new n({id:e.id||"",name:e.name||"",description:e.description||"",category:e.category||{},primaryBodyParts:e.primaryBodyParts||[],secondaryBodyParts:e.secondaryBodyParts||[],tags:e.tags||[],videos:e.videos||[],steps:e.steps||[],visibility:e.visibility||[],currentVideoPosition:e.currentVideoPosition||0,sets:e.sets||0,reps:e.reps||"",weight:e.weight||0,author:e.author||{},createdAt:e.createdAt,updatedAt:e.updatedAt})}}class d{constructor(e){this.id=e.id||"",this.exerciseId=e.exerciseId||"",this.username=e.username||"",this.userId=e.userId||"",this.videoURL=e.videoURL||"",this.fileName=e.fileName||"",this.exercise=e.exercise||"",this.profileImage=s.m1.fromFirebase(e.profileImage||{}),this.caption=e.caption,this.gifURL=e.gifURL,this.thumbnail=e.thumbnail,this.visibility=e.visibility||"private",this.totalAccountsReached=e.totalAccountsReached||0,this.totalAccountLikes=e.totalAccountLikes||0,this.totalAccountBookmarked=e.totalAccountBookmarked||0,this.totalAccountUsage=e.totalAccountUsage||0,this.isApproved=e.isApproved||!1,this.liked=e.liked||!1,this.bookmarked=e.bookmarked||!1,this.createdAt=e.createdAt?new Date(e.createdAt):new Date,this.updatedAt=e.updatedAt?new Date(e.updatedAt):new Date}static fromFirebase(e){return new d({id:e.id||"",exerciseId:e.exerciseId||"",username:e.username||"",userId:e.userId||"",videoURL:e.videoURL||"",fileName:e.fileName||"",exercise:e.exercise||"",profileImage:e.profileImage||{},caption:e.caption,gifURL:e.gifURL,thumbnail:e.thumbnail,visibility:e.visibility||"private",totalAccountsReached:e.totalAccountsReached||0,totalAccountLikes:e.totalAccountLikes||0,totalAccountBookmarked:e.totalAccountBookmarked||0,totalAccountUsage:e.totalAccountUsage||0,isApproved:e.isApproved||!1,liked:e.liked||!1,bookmarked:e.bookmarked||!1,createdAt:e.createdAt,updatedAt:e.updatedAt})}}class c{static fromFirebase(e){return{userId:e.userId||"",username:e.username||""}}}},8157:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{W4:()=>s.W,n5:()=>o.n5});var o=r(1393),s=r(8254),i=e([s]);s=(i.then?(await i)():i)[0],a()}catch(e){a(e)}})},8254:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{W:()=>c});var o=r(1393),s=r(1492),i=r(9777),n=e([s,i]);[s,i]=n.then?(await n)():n;class d{get currentUser(){return this._currentUser}set currentUser(e){this._currentUser=e}async fetchUserFromFirestore(e){let t=(0,s.doc)(i.db,"users",e),r=await (0,s.getDoc)(t);if(!r.exists())throw Error("User not found");return o.n5.fromFirebase(r.data())}async updateUser(e,t){let r=(0,s.doc)(i.db,"users",e);await (0,s.setDoc)(r,t.toFirestore(),{merge:!0})}async fetchUserVideos(e){let t=e||this.currentUser?.id;if(!t)throw Error("No user ID provided");try{let e=(0,s.collection)(i.db,"exerciseVideos"),r=(0,s.query)(e,(0,s.where)("userId","==",t)),a=await (0,s.getDocs)(r),o={};a.docs.forEach(e=>{let t=e.data(),r=t.exercise;if(!r){console.warn(`Exercise name missing for video ${e.id}`);return}let a={id:e.id,exerciseId:t.exerciseId||"",username:t.username||"",userId:t.userId||"",videoURL:t.videoURL||"",fileName:t.fileName||"",exercise:r,profileImage:t.profileImage||{},caption:t.caption||"",gifURL:t.gifURL||"",thumbnail:t.thumbnail||"",visibility:t.visibility||"open",totalAccountsReached:t.totalAccountsReached||0,totalAccountLikes:t.totalAccountLikes||0,totalAccountBookmarked:t.totalAccountBookmarked||0,totalAccountUsage:t.totalAccountUsage||0,isApproved:t.isApproved||!1,liked:t.liked||!1,bookmarked:t.bookmarked||!1,createdAt:t.createdAt?new Date(t.createdAt):new Date,updatedAt:t.updatedAt?new Date(t.updatedAt):new Date};o[r]||(o[r]=[]),o[r].push(a)});let n=(0,s.collection)(i.db,"exercises");return(await (0,s.getDocs)(n)).docs.map(e=>{let t=e.data(),r=t.name;return{id:e.id,name:r,category:t.category,primaryBodyParts:t.primaryBodyParts||[],secondaryBodyParts:t.secondaryBodyParts||[],tags:t.tags||[],description:t.description||"",visibility:t.visibility||"limited",steps:t.steps||[],videos:o[r]||[],currentVideoPosition:0,reps:t.reps||"",sets:t.sets||0,weight:t.weight||0,author:{userId:t.author?.userId||"",username:t.author?.username||""},createdAt:t.createdAt?new Date(t.createdAt):new Date,updatedAt:t.updatedAt?new Date(t.updatedAt):new Date}}).filter(e=>e.videos.length>0)}catch(e){throw console.error("Error fetching user videos:",e),e}}async fetchFollowing(){let e=this.currentUser;if(!e?.id)throw Error("No user is signed in");try{let t=(0,s.collection)(i.db,"followRequests"),r=(0,s.query)(t,(0,s.where)("fromUser.id","==",e.id));return(await (0,s.getDocs)(r)).docs.map(e=>{let t=e.data();return{fromUser:{id:t.fromUser?.id||"",username:t.fromUser?.username||"",displayName:t.fromUser?.displayName||""},toUser:{id:t.toUser?.id||"",username:t.toUser?.username||"",displayName:t.toUser?.displayName||""},status:t.status||"",createdAt:t.createdAt instanceof Date?t.createdAt:t.createdAt?new Date(t.createdAt):new Date,updatedAt:t.updatedAt instanceof Date?t.updatedAt:t.updatedAt?new Date(t.updatedAt):new Date}})}catch(e){throw console.error("Error fetching following:",e),e}}async fetchFollowers(){let e=this.currentUser;if(!e?.id)throw Error("No user is signed in");try{let t=(0,s.collection)(i.db,"followRequests"),r=(0,s.query)(t,(0,s.where)("toUser.id","==",e.id));return(await (0,s.getDocs)(r)).docs.map(e=>{let t=e.data();return{fromUser:{id:t.fromUser?.id||"",username:t.fromUser?.username||"",displayName:t.fromUser?.displayName||""},toUser:{id:t.toUser?.id||"",username:t.toUser?.username||"",displayName:t.toUser?.displayName||""},status:t.status||"",createdAt:t.createdAt instanceof Date?t.createdAt:t.createdAt?new Date(t.createdAt):new Date,updatedAt:t.updatedAt instanceof Date?t.updatedAt:t.updatedAt?new Date(t.updatedAt):new Date}})}catch(e){throw console.error("Error fetching followers:",e),e}}async getUserIdByUsername(e){try{let t=(0,s.collection)(i.db,"users"),r=(0,s.query)(t,(0,s.where)("username","==",e),(0,s.limit)(1)),a=await (0,s.getDocs)(r);if(!a.empty)return a.docs[0].id;return null}catch(e){return console.error("Error fetching user ID by username:",e),null}}async fetchUsersWithVideosUploaded(){try{let e=(0,s.collection)(i.db,"users"),t=(0,s.query)(e,(0,s.where)("videoCount",">",0));return(await (0,s.getDocs)(t)).docs.map(e=>{let t=e.data();return o.n5.fromFirebase({id:e.id,...t})}).filter(e=>e.profileImage?.profileImageURL).sort(()=>Math.random()-.5)}catch(e){return console.error("Error fetching users with videos:",e),[]}}constructor(){this._currentUser=null}}let c=new d;a()}catch(e){a(e)}})},1393:(e,t,r)=>{"use strict";var a,o,s,i,n,d,c,l,u;r.d(t,{m1:()=>h,n5:()=>g});class h{static fromFirebase(e){return{profileImageURL:e.profileImageURL||"",imageOffsetWidth:e.imageOffsetWidth||0,imageOffsetHeight:e.imageOffsetHeight||0}}}class g{constructor(e){this.id=e.id||"",this.displayName=e.displayName||"",this.email=e.email||"",this.username=e.username||"",this.bio=e.bio||"",this.profileImage=h.fromFirebase(e.profileImage||{}),this.followerCount=e.followerCount||0,this.followingCount=e.followingCount||0,this.bodyWeight=Array.isArray(e.bodyWeight)?e.bodyWeight.map(e=>p.fromFirebase(e)):[],this.workoutCount=e.workoutCount||0,this.creator={type:e.creator?.type||[],instagramHandle:e.creator?.instagramHandle||"",twitterHandle:e.creator?.twitterHandle||"",youtubeUrl:e.creator?.youtubeUrl||"",acceptCodeOfConduct:e.creator?.acceptCodeOfConduct||!1,acceptExecutiveTerms:e.creator?.acceptExecutiveTerms||!1,acceptGeneralTerms:e.creator?.acceptGeneralTerms||!1,acceptSweatEquityPartnership:e.creator?.acceptSweatEquityPartnership||!1,onboardingStatus:e.creator?.onboardingStatus||"",onboardingLink:e.creator?.onboardingLink||"",onboardingExpirationDate:e.creator?.onboardingExpirationDate||0},this.createdAt=e.createdAt?new Date(e.createdAt):new Date,this.updatedAt=e.updatedAt?new Date(e.updatedAt):new Date}static fromFirebase(e){return new g({id:e.id||"",displayName:e.displayName||"",username:e.username||"",bio:e.bio||"",profileImage:e.profileImage||{},followerCount:e.followerCount||0,followingCount:e.followingCount||0,bodyWeight:Array.isArray(e.bodyWeight)?e.bodyWeight.map(e=>p.fromFirebase(e)):[],workoutCount:e.workoutCount||0,creator:e.creator||{},createdAt:e.createdAt,updatedAt:e.updatedAt})}toFirestore(){return{id:this.id,displayName:this.displayName,username:this.username,bio:this.bio,profileImage:this.profileImage,followerCount:this.followerCount,followingCount:this.followingCount,bodyWeight:this.bodyWeight,workoutCount:this.workoutCount,creator:this.creator,createdAt:this.createdAt,updatedAt:this.updatedAt}}}(function(e){e.Unsubscribed="Unsubscribed",e.Beta="Beta User",e.Monthly="Monthly Subscriber",e.Annual="Annual Subscriber",e.SweatEquityPartner="Sweat Equity Partner",e.ExecutivePartner="Executive Partner"})(a||(a={})),function(e){e.Novice="novice",e.Intermediate="intermediate",e.Expert="expert"}(o||(o={})),function(e){e.LoseWeight="Lose weight",e.GainWeight="Gain muscle mass",e.ToneUp="Tone up",e.GeneralFitness="General Fitness"}(s||(s={})),function(e){e.Woman="woman",e.Man="man",e.SelfDescribe="I'd rather self describe"}(i||(i={})),function(e){e.iOS="ios",e.Android="android"}(n||(n={})),function(e){e.PersonalTrainer="personal_trainer",e.FitnessEnthusiast="fitness_enthusiast"}(d||(d={})),function(e){e.InspireOthers="inspire_others",e.BuildCommunity="build_community"}(c||(c={})),function(e){e.Introduction="introduction",e.InProgress="in_progress",e.Complete="complete"}(l||(l={})),function(e){e.NotStarted="not_started",e.InProgress="in_progress",e.Completed="completed"}(u||(u={}));class p{constructor(e){let t=Date.now()/1e3;this.id=e.id||crypto.randomUUID(),this.oldWeight=e.oldWeight||0,this.newWeight=e.newWeight||0,this.frontUrl=e.frontUrl||"",this.backUrl=e.backUrl||"",this.sideUrl=e.sideUrl||"",this.createdAt=e.createdAt||t,this.updatedAt=e.updatedAt||t}static fromFirebase(e){return new p({id:e.id||crypto.randomUUID(),oldWeight:e.oldWeight||0,newWeight:e.newWeight||0,frontUrl:e.frontUrl||"",backUrl:e.backUrl||"",sideUrl:e.sideUrl||"",createdAt:e.createdAt||0,updatedAt:e.updatedAt||0})}toFirestore(){return{oldWeight:this.oldWeight,newWeight:this.newWeight,frontUrl:this.frontUrl,backUrl:this.backUrl,sideUrl:this.sideUrl,createdAt:this.createdAt,updatedAt:this.updatedAt}}}},9284:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{G:()=>p});var o=r(1492),s=r(9777),i=r(8157),n=r(2069),d=r(3592),c=r(2286),l=r(3171),u=r(4222),h=e([o,s,i]);[o,s,i]=h.then?(await h)():h;class g{get currentWorkout(){return this._currentWorkout}set currentWorkout(e){this._currentWorkout=e}get currentWorkoutLogs(){return this._currentWorkoutLogs}set currentWorkoutLogs(e){this._currentWorkoutLogs=e}async fetchCurrentWorkout(){return(await this.fetchCurrentWorkoutSession()).workout}async getAllSweatlists(e){if(!e)throw Error("User ID is required");let t=(0,o.collection)(s.db,"users",e,"MyCreatedWorkouts");try{let r=await (0,o.getDocs)(t),a=[];for(let t of r.docs){let r=t.data(),i=t.id,d=new n.oQ({id:r.id||"",roundWorkoutId:r.roundWorkoutId||"",collectionId:r.collectionId,exercises:r.exercises||[],challenge:r.challenge,logs:[],title:r.title||"",description:r.description||"",duration:r.duration||0,workoutRating:r.workoutRating,useAuthorContent:r.useAuthorContent||!1,isCompleted:r.isCompleted||!1,workoutStatus:r.workoutStatus||"notStarted",startTime:r.startTime?new Date(r.startTime):void 0,order:r.order,author:r.author||e,createdAt:r.createdAt?new Date(r.createdAt):new Date,updatedAt:r.updatedAt?new Date(r.updatedAt):new Date,zone:r.zone||"FULL_BODY"}),c=(0,o.collection)(s.db,"users",e,"MyCreatedWorkouts",i,"logs"),l=await (0,o.getDocs)(c);d.logs=l.docs.map(e=>({...e.data(),id:e.id})),a.push(d)}return a}catch(e){throw console.error("Error fetching sweatlists:",e.message),Error("Failed to fetch sweatlists")}}async fetchWorkoutSummaries(e){let t=i.W4.currentUser;if(!t?.id)throw Error("No user is signed in");let r=(0,d.WU)(e,"MM-dd-yyyy"),a=(0,o.collection)(s.db,"users",t.id,"workoutSummaries"),n=(0,o.query)(a,(0,o.where)("date","==",r));try{return(await (0,o.getDocs)(n)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("Error fetching workout summaries:",e.message),Error(e.message)}}async fetchAllWorkoutSummaries(){let e=i.W4.currentUser;if(!e?.id)throw Error("No user is signed in");let t=(0,o.collection)(s.db,"users",e.id,"workoutSummary"),r=(0,o.query)(t,(0,o.orderBy)("createdAt","asc"));try{return(await (0,o.getDocs)(r)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("Error fetching all workout summaries:",e.message),Error(e.message)}}async fetchUserChallengesByUserId(e){let t=(0,o.collection)(s.db,"user-challenge"),r=(0,o.query)(t,(0,o.where)("userId","==",e));try{console.log(`Fetching challenges for user ID: ${e}`);let t=await (0,o.getDocs)(r);console.log(`Total challenges fetched: ${t.docs.length}`);let a=t.docs.map(e=>{let t=e.data();return console.log(`Processing challenge with ID: ${e.id}`,t),{id:e.id,...t,challenge:t.challenge?new u.t({id:t.challenge.id,title:t.challenge.title,subtitle:t.challenge.subtitle,participants:t.challenge.participants||[],status:t.challenge.status,startDate:t.challenge.startDate?new Date(t.challenge.startDate):new Date,endDate:t.challenge.endDate?new Date(t.challenge.endDate):new Date,createdAt:t.challenge.createdAt?new Date(t.challenge.createdAt):new Date,updatedAt:t.challenge.updatedAt?new Date(t.challenge.updatedAt):new Date,introVideoURL:t.challenge.introVideoURL||""}):void 0,createdAt:(0,c.C)(t.createdAt),updatedAt:(0,c.C)(t.updatedAt)}});return console.log("All challenges after processing:",JSON.stringify(a,null,2)),a}catch(e){throw console.error("Error fetching user challenges by userId:",e),e}}async fetchCollectionWithSweatLists(e){try{let t=await this.getCollectionById(e),r=[];for(let e of t.sweatlistIds||[])try{let[t]=await this.fetchSavedWorkout(e.sweatlistAuthorId,e.id);t&&r.push(t)}catch(t){console.error(`Error fetching workout ${e.id}:`,t)}return{collection:t,sweatLists:r}}catch(e){throw console.error("Error fetching collection with sweat lists:",e),e}}parseWorkoutData(e){return new n.oQ({id:e.id||"",roundWorkoutId:e.roundWorkoutId||"",collectionId:e.collectionId||[],exercises:e.exercises||[],challenge:e.challenge?new u.t({id:e.challenge.id,title:e.challenge.title,subtitle:e.challenge.subtitle,participants:e.challenge.participants||[],status:e.challenge.status,startDate:e.challenge.startDate instanceof Date?e.challenge.startDate:e.challenge.startDate?new Date(e.challenge.startDate):new Date,endDate:e.challenge.endDate instanceof Date?e.challenge.endDate:e.challenge.endDate?new Date(e.challenge.endDate):new Date,createdAt:e.challenge.createdAt instanceof Date?e.challenge.createdAt:e.challenge.createdAt?new Date(e.challenge.createdAt):new Date,updatedAt:e.challenge.updatedAt instanceof Date?e.challenge.updatedAt:e.challenge.updatedAt?new Date(e.challenge.updatedAt):new Date,introVideoURL:e.challenge.introVideoURL||""}):void 0,logs:e.logs||[],title:e.title||"",description:e.description||"",duration:e.duration||0,workoutRating:e.workoutRating,useAuthorContent:e.useAuthorContent||!1,isCompleted:e.isCompleted||!1,workoutStatus:e.workoutStatus||n.Z0.QueuedUp,startTime:e.startTime instanceof Date?e.startTime:e.startTime?new Date(e.startTime):void 0,order:e.order||0,author:e.author||"",createdAt:e.createdAt instanceof Date?e.createdAt:"function"==typeof e.createdAt?.toDate?e.createdAt.toDate():e.createdAt?new Date(e.createdAt):new Date,updatedAt:e.updatedAt instanceof Date?e.updatedAt:"function"==typeof e.updatedAt?.toDate?e.updatedAt.toDate():e.updatedAt?new Date(e.updatedAt):new Date,zone:e.zone||n.Bc.FullBody,estimatedDuration:()=>e.duration||0,determineWorkoutZone:()=>e.zone||n.Bc.FullBody,toDictionary:()=>({})})}createDefaultExercise(){return{id:"",name:"",category:{type:"weightTraining",details:{reps:"",sets:0,weight:0,screenTime:0,selectedVideo:this.parseExerciseVideo({})}},primaryBodyParts:[],secondaryBodyParts:[],tags:[],description:"",visibility:"live",steps:[],videos:[],currentVideoPosition:0,reps:"",sets:0,weight:0,author:{userId:"",username:""},createdAt:new Date,updatedAt:new Date}}parseExerciseLogData(e){return{id:e.id||"",workoutId:e.workoutId||"",userId:e.userId||"",exercise:e.exercise?this.parseExercise(e.exercise):this.createDefaultExercise(),logs:(e.log||[]).map(e=>({reps:parseInt(e.reps||"0"),weight:parseFloat(e.weight||"0"),leftReps:parseInt(e.leftReps||"0"),leftWeight:parseFloat(e.leftWeight||"0"),isSplit:e.isSplit||!1,isBodyWeight:e.isBodyWeight||!1,isCompleted:e.isCompleted||!1,duration:parseInt(e.duration||"0"),calories:parseInt(e.calories||"0"),bpm:parseInt(e.bpm||"0")})),feedback:e.feedback||"",note:e.note||"",recommendedWeight:e.recommendedWeight,isSplit:e.isSplit||!1,isBodyWeight:e.isBodyWeight||!1,logSubmitted:e.logSubmitted||!1,logIsEditing:e.logIsEditing||!1,isCompleted:e.isCompleted||!1,createdAt:e.createdAt instanceof Date?e.createdAt:"function"==typeof e.createdAt?.toDate?e.createdAt.toDate():e.createdAt?new Date(e.createdAt):new Date,updatedAt:e.updatedAt instanceof Date?e.updatedAt:"function"==typeof e.updatedAt?.toDate?e.updatedAt.toDate():e.updatedAt?new Date(e.updatedAt):new Date}}parseExercise(e){return{id:e.id?.stringValue||e.id||"",name:e.name?.stringValue||e.name||"",category:this.parseExerciseCategory(e.category?.mapValue?.fields||e.category||{}),primaryBodyParts:this.parseBodyParts(e.primaryBodyParts),secondaryBodyParts:this.parseBodyParts(e.secondaryBodyParts),tags:(e.tags?.arrayValue?.values||e.tags||[]).map(e=>e.stringValue||e),description:e.description?.stringValue||e.description||"",visibility:(e.visibility?.arrayValue?.values||e.visibility||[]).map(e=>e.stringValue||e),steps:(e.steps?.arrayValue?.values||e.steps||[]).map(e=>e.stringValue||e),videos:this.parseVideos(e.videos),currentVideoPosition:parseInt(e.currentVideoPosition?.integerValue||e.currentVideoPosition||"0"),reps:e.reps?.stringValue||e.reps||"",sets:parseInt(e.sets?.integerValue||e.sets||"0"),weight:parseFloat(e.weight?.doubleValue||e.weight||"0"),author:this.parseExerciseAuthor(e.author?.mapValue?.fields||e.author||{}),createdAt:new Date(1e3*parseFloat(e.createdAt?.doubleValue||e.createdAt||"0")),updatedAt:new Date(1e3*parseFloat(e.updatedAt?.doubleValue||e.updatedAt||"0"))}}parseExerciseCategory(e){let t=e.id?.stringValue||e.id||"";return"cardio"===t?{type:"cardio",details:{duration:parseInt(e.duration?.integerValue||e.duration||"0"),bpm:parseInt(e.bpm?.integerValue||e.bpm||"0"),calories:parseInt(e.calories?.integerValue||e.calories||"0"),screenTime:parseInt(e.screenTime?.integerValue||e.screenTime||"0"),selectedVideo:this.parseExerciseVideo(e.selectedVideo?.mapValue?.fields||e.selectedVideo)}}:{type:"weightTraining",details:{reps:e.reps?.stringValue||e.reps||"",sets:parseInt(e.sets?.integerValue||e.sets||"0"),weight:parseFloat(e.weight?.doubleValue||e.weight||"0"),screenTime:parseInt(e.screenTime?.integerValue||e.screenTime||"0"),selectedVideo:this.parseExerciseVideo(e.selectedVideo?.mapValue?.fields||e.selectedVideo)}}}parseBodyParts(e){return(e?.arrayValue?.values||e||[]).map(e=>e.stringValue||e)}parseVideos(e){return(e?.arrayValue?.values||e||[]).map(e=>this.parseExerciseVideo(e.mapValue?.fields||e))}parseExerciseVideo(e){return{id:e.id?.stringValue||e.id||"",exerciseId:e.exerciseId?.stringValue||e.exerciseId||"",username:e.username?.stringValue||e.username||"",userId:e.userId?.stringValue||e.userId||"",videoURL:e.videoURL?.stringValue||e.videoURL||"",fileName:e.fileName?.stringValue||e.fileName||"",exercise:e.exercise?.stringValue||e.exercise||"",profileImage:this.parseProfileImage(e.profileImage?.mapValue?.fields||e.profileImage||{}),caption:e.caption?.stringValue||e.caption||"",gifURL:e.gifURL?.stringValue||e.gifURL||"",thumbnail:e.thumbnail?.stringValue||e.thumbnail||"",visibility:e.visibility?.stringValue||e.visibility||"open",totalAccountsReached:parseInt(e.totalAccountsReached?.integerValue||e.totalAccountsReached||"0"),totalAccountLikes:parseInt(e.totalAccountLikes?.integerValue||e.totalAccountLikes||"0"),totalAccountBookmarked:parseInt(e.totalAccountBookmarked?.integerValue||e.totalAccountBookmarked||"0"),totalAccountUsage:parseInt(e.totalAccountUsage?.integerValue||e.totalAccountUsage||"0"),isApproved:e.isApproved?.booleanValue||e.isApproved||!1,liked:e.liked?.booleanValue||e.liked,bookmarked:e.bookmarked?.booleanValue||e.bookmarked,createdAt:new Date(1e3*parseFloat(e.createdAt?.doubleValue||e.createdAt||"0")),updatedAt:new Date(1e3*parseFloat(e.updatedAt?.doubleValue||e.updatedAt||"0"))}}parseProfileImage(e){return{profileImageURL:e.profileImageURL?.stringValue||e.profileImageURL||"",imageOffsetWidth:parseFloat(e.imageOffsetWidth?.doubleValue||e.imageOffsetWidth||"0"),imageOffsetHeight:parseFloat(e.imageOffsetHeight?.doubleValue||e.imageOffsetHeight||"0")}}parseExerciseAuthor(e){return{userId:e.userId?.stringValue||e.userId||"",username:e.username?.stringValue||e.username||""}}async fetchSavedWorkout(e,t){try{let r=(0,o.doc)(s.db,"users",e,"MyCreatedWorkouts",t),a=await (0,o.getDoc)(r);if(!a.exists())return[null,null];let i=a.data(),n=this.parseWorkoutData(i||{}),d=(0,o.collection)(s.db,"users",e,"MyCreatedWorkouts",t,"logs"),c=(await (0,o.getDocs)(d)).docs.map(r=>{let a=r.data();return{id:r.id,workoutId:t,userId:e,exercise:a.exercise,logs:a.log||[],feedback:a.feedback||"",note:a.note||"",recommendedWeight:a.recommendedWeight,isSplit:a.isSplit||!1,isBodyWeight:a.isBodyWeight||!1,logSubmitted:a.logSubmitted||!1,logIsEditing:a.logIsEditing||!1,isCompleted:a.isCompleted||!1,createdAt:a.createdAt instanceof Date?a.createdAt:"function"==typeof a.createdAt?.toDate?a.createdAt.toDate():a.createdAt?new Date(a.createdAt):new Date,updatedAt:a.updatedAt instanceof Date?a.updatedAt:"function"==typeof a.updatedAt?.toDate?a.updatedAt.toDate():a.updatedAt?new Date(a.updatedAt):new Date}});return n.logs=c,[n,c]}catch(e){return console.error("Error fetching saved workout:",e),[null,null]}}async fetchUserChallengesByChallengeId(e){let t=(0,o.collection)(s.db,"user-challenge"),r=(0,o.query)(t,(0,o.where)("challengeId","==",e));try{console.log(`Fetching user challenges for challenge ID: ${e}`);let t=await (0,o.getDocs)(r);console.log(`Total user challenges fetched: ${t.docs.length}`);let a=t.docs.map(e=>{let t=e.data();return console.log(`Processing user challenge with ID: ${e.id}`,t),{id:e.id,...t,challenge:t.challenge?new u.t({id:t.challenge.id,title:t.challenge.title,subtitle:t.challenge.subtitle,participants:t.challenge.participants||[],status:t.challenge.status,startDate:t.challenge.startDate?new Date(t.challenge.startDate):new Date,endDate:t.challenge.endDate?new Date(t.challenge.endDate):new Date,createdAt:t.challenge.createdAt?new Date(t.challenge.createdAt):new Date,updatedAt:t.challenge.updatedAt?new Date(t.challenge.updatedAt):new Date,introVideoURL:t.challenge.introVideoURL||""}):void 0,createdAt:(0,c.C)(t.createdAt),updatedAt:(0,c.C)(t.updatedAt)}});return console.log("All user challenges after processing:",JSON.stringify(a,null,2)),a}catch(e){throw console.error("Error fetching user challenges by challengeId:",e),e}}async getCollectionById(e){try{let t=(0,o.doc)(s.db,"sweatlist-collection",e),r=await (0,o.getDoc)(t);if(r.exists())return{id:r.id,...r.data()};throw Error("Collection not found")}catch(e){throw console.error("Error getting collection by ID:",e),e}}async fetchActiveChallenges(){let e=i.W4.currentUser;if(!e?.id)throw Error("No user is signed in");let t=(0,o.collection)(s.db,"user-challenge"),r=(0,o.query)(t,(0,o.where)("userId","==",e.id));try{console.log(`Fetching challenges for user ID: ${e.id}`);let t=await (0,o.getDocs)(r);console.log(`Total challenges fetched: ${t.docs.length}`);let a=t.docs.map(e=>{let t=e.data();console.log(`Processing challenge with ID: ${e.id}`,t),console.log("date before format: "+(0,l.Q)(t.challenge.startDate));let r=t.challenge?new u.t({id:t.challenge.id,title:t.challenge.title,subtitle:t.challenge.subtitle,participants:t.challenge.participants||[],status:t.challenge.status,startDate:(0,l.Q)(t.challenge.startDate),endDate:(0,l.Q)(t.challenge.endDate),createdAt:(0,l.Q)(t.challenge.createdAt),updatedAt:(0,l.Q)(t.challenge.updatedAt),introVideoURL:t.challenge.introVideoURL||""}):void 0;return{id:e.id,...t,challenge:r,createdAt:(0,l.Q)(t.createdAt),updatedAt:(0,l.Q)(t.updatedAt)}});console.log("All challenges after processing:",JSON.stringify(a,null,2));let s=a.filter(e=>{let t=e.challenge?.endDate;return console.log(`Evaluating challenge ID: ${e.id}, End Date: ${t}, Current Date: ${new Date}`),t&&t>new Date});return console.log(`Total active challenges: ${s.length}`,s),s}catch(e){throw console.error("Error fetching active challenges:",e),e}}async fetchUserChallenges(){let e=i.W4.currentUser;if(!e?.id)throw Error("No user is signed in");let t=(0,o.collection)(s.db,"user-challenge"),r=(0,o.query)(t,(0,o.where)("userId","==",e.id));try{return(await (0,o.getDocs)(r)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("Error fetching user challenges:",e),Error("Failed to fetch user challenges")}}async fetchCurrentWorkoutSession(){let e=i.W4.currentUser;if(!e?.id)throw Error("No user is signed in");let t=(0,o.collection)(s.db,"users",e.id,"workoutSessions"),r=(0,o.query)(t,(0,o.where)("status","==",n.Z0.QueuedUp)),a=await (0,o.getDocs)(r);return a.empty&&(r=(0,o.query)(t,(0,o.where)("status","==",n.Z0.InProgress)),(a=await (0,o.getDocs)(r)).empty)?{workout:null,logs:null}:this.processWorkoutSessionDocument(a.docs[0])}async processWorkoutSessionDocument(e){let t=e.data();return{workout:{id:e.id,...t,createdAt:t.createdAt?.toDate()??new Date,updatedAt:t.updatedAt?.toDate()??new Date},logs:[]}}async saveWorkoutSession({workout:e,logs:t}){let r=i.W4.currentUser;if(!r?.id)throw Error("No user is signed in");try{let a=new Date,i={...e,workoutStatus:n.Z0.QueuedUp,createdAt:a,updatedAt:a,startTime:a,roundWorkoutId:e.id},d=t.map((e,t)=>({...e,id:`${e.id}-${a.getTime()}`,workoutId:i.id,order:t,createdAt:a,updatedAt:a,logSubmitted:!1,isCompleted:!1})),c=(0,o.doc)((0,o.collection)(s.db,"users",r.id,"workoutSessions"));await (0,o.setDoc)(c,{...i,logs:d}),this._currentWorkout=new n.oQ(i),this._currentWorkoutLogs=d;let l=(0,o.doc)(s.db,"users",r.id);return await (0,o.updateDoc)(l,{currentWorkoutSessionId:c.id}),this._currentWorkout}catch(e){throw console.error("Error saving workout session:",e),e}}async joinChallenge({username:e,challengeId:t}){if(!i.W4.currentUser)throw Error("No user is signed in");let r=(0,o.collection)(s.db,"users"),a=(0,o.query)(r,(0,o.where)("username","==",e)),n=await (0,o.getDocs)(a);if(n.empty)throw Error("User not found");let d=n.docs[0],c=d.data(),l=d.id,u=(0,o.doc)(s.db,"sweatlist-collection",t),h=await (0,o.getDoc)(u);if(!h.exists())throw Error("Challenge not found");let g=h.data(),p=`${t}-${l}-${Date.now()}`,m={id:p,challenge:g,challengeId:t,userId:l,fcmToken:c.fcmToken||"",profileImage:c.profileImage||{},progress:0,completedWorkouts:[],isCompleted:!1,uid:l,location:c.location||null,city:"",country:"",timezone:"",username:e,joinDate:new Date,createdAt:new Date,updatedAt:new Date,pulsePoints:{baseCompletion:0,firstCompletion:0,streakBonus:0,checkInBonus:0,effortRating:0,chatParticipation:0,locationCheckin:0,contentEngagement:0,encouragementSent:0,encouragementReceived:0},currentStreak:0,encouragedUsers:[],encouragedByUsers:[],checkIns:[]};await (0,o.setDoc)((0,o.doc)(s.db,"user-challenge",p),m)}constructor(){this._currentWorkout=null,this._currentWorkoutLogs=[]}}let p=new g;a()}catch(e){a(e)}})},2069:(e,t,r)=>{"use strict";r.d(t,{Bc:()=>s,P7:()=>c,Z0:()=>a,c_:()=>n,oQ:()=>d});var a,o,s,i=r(6738);(function(e){e.QueuedUp="queuedUp",e.InProgress="inProgress",e.Complete="complete",e.Archived="archived"})(a||(a={})),function(e){e.TooHard="Too Hard",e.TooEasy="Too Easy",e.JustRight="Just Right"}(o||(o={})),function(e){e.LowerBody="Lower Body",e.UpperBody="Upper Body",e.FullBody="Full Body",e.Core="Core"}(s||(s={}));class n{static fromFirebase(e){return{reps:e.reps||0,weight:e.weight||0,leftReps:e.leftReps||0,leftWeight:e.leftWeight||0,isSplit:e.isSplit||!1,isBodyWeight:e.isBodyWeight||!1,duration:e.duration||0,calories:e.calories||0,bpm:e.bpm||0}}}class d{constructor(e){this.id=e.id,this.collectionId=e.collectionId,this.roundWorkoutId=e.roundWorkoutId,this.exercises=e.exercises,this.challenge=e.challenge,this.logs=e.logs,this.title=e.title,this.description=e.description,this.duration=e.duration,this.workoutRating=e.workoutRating,this.useAuthorContent=e.useAuthorContent,this.isCompleted=e.isCompleted,this.workoutStatus=e.workoutStatus,this.startTime=e.startTime,this.order=e.order,this.author=e.author,this.createdAt=e.createdAt,this.updatedAt=e.updatedAt,this.zone=d.determineWorkoutZone(e.exercises)}static estimatedDuration(e){return Math.max(5*Math.round((5+8*e.length+1*Math.max(0,e.length-1)+5)/5),10)}static determineWorkoutZone(e){let t=new Set;for(let r of e)for(let e of r.exercise.primaryBodyParts||[r.exercise.primaryBodyParts])t.add(e);let r=new Set([i.mn.Chest,i.mn.Shoulders,i.mn.Biceps,i.mn.Triceps,i.mn.Traps,i.mn.Lats,i.mn.Forearms]),a=new Set([i.mn.Hamstrings,i.mn.Glutes,i.mn.Quadriceps,i.mn.Calves]),o=new Set([i.mn.Abs,i.mn.Lowerback]),s=(e,t)=>Array.from(e).some(e=>t.has(e)),n=s(t,r),d=s(t,a),c=s(t,o);return n&&d&&c||n&&d?"Full Body":n&&c||n?"Upper Body":d&&c||d?"Lower Body":c?"Core":"Full Body"}static toDictionary(e){return{id:e.id,collectionId:e.collectionId,roundWorkoutId:e.roundWorkoutId,exercises:e.exercises,challenge:e.challenge,logs:e.logs,title:e.title,description:e.description,duration:e.duration,workoutRating:e.workoutRating,useAuthorContent:e.useAuthorContent,isCompleted:e.isCompleted,workoutStatus:e.workoutStatus,startTime:e.startTime,order:e.order,author:e.author,createdAt:e.createdAt,updatedAt:e.updatedAt,zone:e.zone}}}class c{constructor(e){this.id=e.id,this.workoutId=e.workoutId,this.exercises=e.exercises.map(e=>i.lg.fromFirebase(e)),this.bodyParts=e.bodyParts,this.secondaryBodyParts=e.secondaryBodyParts,this.workoutTitle=e.workoutTitle,this.caloriesBurned=e.caloriesBurned,this.workoutRating=e.workoutRating,this.exercisesCompleted=e.exercisesCompleted.map(e=>i.lg.fromFirebase(e)),this.aiInsight=e.aiInsight,this.recommendations=e.recommendations,this.gifURLs=e.gifURLs,this.recommendedWork=e.recommendedWork,this.isCompleted=e.isCompleted,this.createdAt=e.createdAt?new Date(e.createdAt):new Date,this.updatedAt=e.updatedAt?new Date(e.updatedAt):new Date,this.completedAt=e.completedAt?new Date(e.completedAt):null,this.duration=e.duration}static fromFirebase(e){return new c({id:e.id||"",workoutId:e.workoutId||"",exercises:e.exercises||[],bodyParts:e.bodyParts||[],secondaryBodyParts:e.secondaryBodyParts||[],workoutTitle:e.workoutTitle||"",caloriesBurned:e.caloriesBurned||0,workoutRating:e.workoutRating,exercisesCompleted:e.exercisesCompleted||[],aiInsight:e.aiInsight||"",recommendations:e.recommendations||[],gifURLs:e.gifURLs||[],recommendedWork:e.recommendedWork,isCompleted:e.isCompleted||!1,createdAt:e.createdAt,updatedAt:e.updatedAt,completedAt:e.completedAt,duration:e.duration||""})}}},3893:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(997);r(6689),r(7491),r(2636),r(1856);let o=({Component:e,pageProps:t})=>a.jsx(e,{...t})},1070:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(997),o=r(6859),s=r.n(o);class i extends s(){static async getInitialProps(e){return{...await s().getInitialProps(e)}}render(){return(0,a.jsxs)(o.Html,{lang:"en",children:[a.jsx(o.Head,{}),(0,a.jsxs)("body",{children:[a.jsx(o.Main,{}),a.jsx(o.NextScript,{})]})]})}}let n=i},4222:(e,t,r)=>{"use strict";var a;r.d(t,{t:()=>o}),function(e){e.Draft="draft",e.Published="published",e.Completed="completed",e.Cancelled="cancelled"}(a||(a={}));class o{constructor(e){this.id=e.id,this.title=e.title,this.subtitle=e.subtitle,this.participants=e.participants,this.status=e.status,this.startDate=e.startDate,this.endDate=e.endDate,this.createdAt=e.createdAt,this.updatedAt=e.updatedAt,this.introVideoURL=e.introVideoURL,this.durationInDays=this.calculateDurationInDays()}calculateDurationInDays(){let e=this.startDate?.valueOf(),t=this.endDate?.valueOf();if(!e||!t||isNaN(e)||isNaN(t))throw Error("Invalid startDate or endDate");return Math.ceil((t-e)/864e5)}}},3171:(e,t,r)=>{"use strict";r.d(t,{Q:()=>a});let a=e=>{if(null==e)return new Date;if(e instanceof Date)return e;let t="string"==typeof e?parseInt(e,10):e;return new Date(t<1e10?1e3*t:t)}},2286:(e,t,r)=>{"use strict";r.d(t,{C:()=>a});let a=e=>e?e._seconds?new Date(1e3*e._seconds).toISOString():e.seconds?new Date(1e3*e.seconds).toISOString():e.toDate&&"function"==typeof e.toDate?e.toDate().toISOString():e instanceof Date?e.toISOString():null:null},7491:()=>{},2636:()=>{},1856:()=>{}};
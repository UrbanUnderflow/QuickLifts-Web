(()=>{var e={};e.id=656,e.ids=[656,888,660],e.modules={9316:(e,t,a)=>{"use strict";a.a(e,async(e,l)=>{try{a.r(t),a.d(t,{config:()=>g,default:()=>h,getServerSideProps:()=>x,getStaticPaths:()=>p,getStaticProps:()=>u,reportWebVitals:()=>m,routeModule:()=>b,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>f,unstable_getStaticPaths:()=>w,unstable_getStaticProps:()=>y});var r=a(7093),s=a(5244),n=a(1323),i=a(1070),c=a(3893),o=a(4895),d=e([c]);c=(d.then?(await d)():d)[0];let h=(0,n.l)(o,"default"),u=(0,n.l)(o,"getStaticProps"),p=(0,n.l)(o,"getStaticPaths"),x=(0,n.l)(o,"getServerSideProps"),g=(0,n.l)(o,"config"),m=(0,n.l)(o,"reportWebVitals"),y=(0,n.l)(o,"unstable_getStaticProps"),w=(0,n.l)(o,"unstable_getStaticPaths"),f=(0,n.l)(o,"unstable_getStaticParams"),j=(0,n.l)(o,"unstable_getServerProps"),v=(0,n.l)(o,"unstable_getServerSideProps"),b=new r.PagesRouteModule({definition:{kind:s.x.PAGES,page:"/challenge/[id]",pathname:"/challenge/[id]",bundlePath:"",filename:""},components:{App:c.default,Document:i.default},userland:o});l()}catch(e){l(e)}})},1462:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var l=a(6689);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim();var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,l.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:i="",children:c,iconNode:o,...d},h)=>(0,l.createElement)("svg",{ref:h,...n,width:t,height:t,stroke:e,strokeWidth:r?24*Number(a)/Number(t):a,className:s("lucide",i),...d},[...o.map(([e,t])=>(0,l.createElement)(e,t)),...Array.isArray(c)?c:[c]])),c=(e,t)=>{let a=(0,l.forwardRef)(({className:a,...n},c)=>(0,l.createElement)(i,{ref:c,iconNode:t,className:s(`lucide-${r(e)}`,a),...n}));return a.displayName=`${e}`,a}},8088:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});let l=(0,a(1462).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},7218:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});let l=(0,a(1462).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},358:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});let l=(0,a(1462).Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]])},718:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});let l=(0,a(1462).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},7963:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});let l=(0,a(1462).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},3893:(e,t,a)=>{"use strict";a.a(e,async(e,l)=>{try{a.r(t),a.d(t,{default:()=>c});var r=a(997);a(6689);var s=a(3291),n=a(1912);a(7491),a(2636),a(1856);var i=e([s,n]);[s,n]=i.then?(await i)():i;let c=({Component:e,pageProps:t})=>r.jsx(s.Provider,{store:n.h,children:r.jsx(e,{...t})});l()}catch(e){l(e)}})},1070:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var l=a(997),r=a(6859),s=a.n(r);class n extends s(){static async getInitialProps(e){return{...await s().getInitialProps(e)}}render(){return(0,l.jsxs)(r.Html,{lang:"en",children:[l.jsx(r.Head,{}),(0,l.jsxs)("body",{children:[l.jsx(r.Main,{}),l.jsx(r.NextScript,{})]})]})}}let i=n},4895:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>P,getServerSideProps:()=>E});var l=a(997),r=a(6689),s=a(1163),n=a(1462);let i=(0,n.Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);var c=a(8088),o=a(7218);let d=(0,n.Z)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);var h=a(7963);let u=(0,n.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var p=a(718),x=a(358);let g=(0,n.Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),m=({challenge:e})=>{let[t,a]=(0,r.useState)(!1),s=[{title:"Download Pulse",description:"Get the Pulse app from the App Store to join this challenge",icon:l.jsx(u,{className:"w-8 h-8 text-[#E0FE10]"})},{title:"Create Account",description:"Sign up for an account to start your fitness journey",icon:l.jsx(p.Z,{className:"w-8 h-8 text-[#E0FE10]"})},{title:"Return Here",description:"Come back to this page and tap 'Join Challenge' to get started",icon:l.jsx(x.Z,{className:"w-8 h-8 text-[#E0FE10]"})}],n=encodeURIComponent(`https://www.quickliftsapp.com/?linkType=round&roundId=${e.id}`),i=`https://quicklifts.page.link/?link=${n}&apn=com.pulse.fitnessapp&ibi=Tremaine.QuickLifts&isi=6451497729`;return t?l.jsx("div",{className:"fixed inset-0 bg-zinc-950 z-50 overflow-y-auto",children:l.jsx("div",{className:"min-h-screen px-4 text-center",children:l.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen",children:(0,l.jsxs)("div",{className:"bg-zinc-900 p-6 rounded-2xl max-w-md w-full mx-auto",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-white mb-8",children:["Join ",e.title]}),l.jsx("div",{className:"space-y-8",children:s.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-start space-x-4",children:[l.jsx("div",{className:"flex-shrink-0",children:e.icon}),(0,l.jsxs)("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:e.title}),l.jsx("p",{className:"text-zinc-400 mt-1",children:e.description})]}),t<s.length-1&&l.jsx(g,{className:"w-5 h-5 text-zinc-600 transform rotate-90 mt-2"})]},t))}),(0,l.jsxs)("div",{className:"mt-8 space-y-4",children:[l.jsx("a",{href:"https://apps.apple.com/ca/app/pulse-community-workouts/id6451497729",className:"w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-xl text-black bg-[#E0FE10] hover:bg-[#E0FE10]/90",children:"Download App"}),l.jsx("button",{onClick:()=>{window.location.href=i},className:"w-full px-8 py-3 text-base font-medium rounded-xl text-white bg-zinc-800 hover:bg-zinc-700",children:"I already have the app"})]})]})})})}):l.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-zinc-950 border-t border-zinc-800",children:l.jsx("button",{onClick:()=>{a(!0)},className:"w-full flex items-center justify-center px-8 py-4 text-lg font-medium rounded-xl text-black bg-[#E0FE10] hover:bg-[#E0FE10]/90",children:"Join Round"})})},y=e=>("string"==typeof e?new Date(e):e).toLocaleDateString("en-US",{month:"long",day:"numeric"}),w=(e,t)=>{let a="string"==typeof e?new Date(e):e;return Math.ceil(Math.abs(("string"==typeof t?new Date(t):t).getTime()-a.getTime())/864e5)},f=({title:e,value:t,icon:a})=>l.jsx("div",{className:"flex-1 p-4 bg-zinc-900 rounded-xl",children:(0,l.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[a,(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-lg font-semibold text-white",children:t}),l.jsx("span",{className:"text-sm text-white/70",children:e})]})]})}),j=({videoUrl:e})=>{let[t,a]=(0,r.useState)(!1),s=(0,r.useRef)(null);return((0,r.useEffect)(()=>{let t=async()=>{if(s.current)try{await s.current.play(),a(!0)}catch(e){console.error("Autoplay failed:",e)}};e&&t()},[e]),e)?(0,l.jsxs)("div",{className:"relative bg-black rounded-xl h-48 mb-8 overflow-hidden",children:[l.jsx("video",{ref:s,className:"w-full h-full object-cover",src:e,controls:t,playsInline:!0,autoPlay:!0,muted:!0,children:"Your browser does not support the video tag."}),!t&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 cursor-pointer",onClick:()=>{s.current?.play(),a(!0)},children:l.jsx(i,{className:"w-8 h-8 text-white/90"})})]}):l.jsx("div",{className:"relative bg-black rounded-xl h-48 mb-8 flex items-center justify-center",children:l.jsx(i,{className:"w-8 h-8 text-white/90"})})},v=({challenge:e})=>{let t=new Date(e.startDate),a=new Date(e.endDate),r=e.participants?.length??0;return console.log("Challenge data:",e),l.jsx("div",{className:"min-h-screen bg-zinc-950 text-white",children:(0,l.jsxs)("div",{className:"max-w-2xl mx-auto px-6 py-8",children:[(0,l.jsxs)("div",{className:"text-center space-y-4 mb-8",children:[l.jsx("h2",{className:"text-lg font-semibold text-white/90",children:"You're invited to participate in this Round \uD83C\uDF89"}),l.jsx("h1",{className:"text-3xl font-bold",children:e.title}),l.jsx("p",{className:"text-white/70",children:e.subtitle})]}),l.jsx(j,{videoUrl:e.introVideoURL}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-12",children:[l.jsx(f,{title:"Duration",value:`${w(t,a)} Days`,icon:l.jsx(c.Z,{className:"w-6 h-6 text-[#E0FE10]"})}),l.jsx(f,{title:"Start Date",value:y(t),icon:l.jsx(o.Z,{className:"w-6 h-6 text-[#E0FE10]"})}),l.jsx(f,{title:"End Date",value:y(a),icon:l.jsx(d,{className:"w-6 h-6 text-[#E0FE10]"})}),l.jsx(f,{title:"Participants",value:r,icon:l.jsx(h.Z,{className:"w-6 h-6 text-[#E0FE10]"})})]}),l.jsx(m,{challenge:e})]})})};var b=a(968),k=a.n(b);let N=({challenge:e,id:t})=>{let a=new Date(e.startDate).toLocaleDateString("en-US",{month:"long",day:"numeric"}),r=new Date(e.endDate).toLocaleDateString("en-US",{month:"long",day:"numeric"}),s=`${e.subtitle} • ${a} - ${r} • Join the challenge now!`,n=`pulse://rounds?linkType=round&roundId=${t}`;return(0,l.jsxs)(k(),{children:[l.jsx("title",{children:`Join ${e.title} | Pulse`}),l.jsx("meta",{name:"description",content:s}),l.jsx("meta",{property:"og:title",content:"The Next Round Awaits | Pulse"}),l.jsx("meta",{property:"og:description",content:`${e.title}`}),l.jsx("meta",{property:"og:type",content:"website"}),l.jsx("meta",{property:"og:url",content:`https://fitwithpulse.ai/challenge/${t}`}),l.jsx("meta",{property:"og:site_name",content:"Pulse Fitness"}),l.jsx("meta",{property:"og:image",content:"https://fitwithpulse.ai/round-preview.png"}),l.jsx("meta",{property:"og:image:width",content:"1200"}),l.jsx("meta",{property:"og:image:height",content:"630"}),l.jsx("meta",{property:"al:ios:app_store_id",content:"6451497729"}),l.jsx("meta",{property:"al:ios:app_name",content:"Pulse: Community Workouts"}),l.jsx("meta",{property:"al:ios:url",content:n}),l.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),l.jsx("meta",{name:"twitter:title",content:`Join ${e.title} | Pulse`}),l.jsx("meta",{name:"twitter:description",content:s}),l.jsx("meta",{name:"twitter:image",content:"https://fitwithpulse.ai/round-preview.png"}),l.jsx("link",{rel:"canonical",href:`https://fitwithpulse.ai/challenge/${t}`})]})},S=()=>l.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:l.jsx("div",{className:"text-white",children:"Loading challenge..."})}),D=({message:e})=>l.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-white text-center",children:[l.jsx("h2",{className:"text-xl font-bold mb-4",children:"Unable to load challenge"}),l.jsx("p",{className:"text-white/70",children:e}),l.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-[#E0FE10] text-black rounded-lg",children:"Try Again"})]})}),E=async({params:e,res:t})=>{try{let a=e?.id;if(!a)return{props:{initialError:"Challenge ID is required"}};t.setHeader("Cache-Control","public, s-maxage=10, stale-while-revalidate=59");let l=await fetch(`https://fitwithpulse.ai/.netlify/functions/get-challenge-by-id?id=${a}`);if(!l.ok)throw Error("Failed to fetch challenge");let r=await l.json();if(!r.success||!r.collection)return{props:{initialError:"Challenge not found"}};return{props:{initialCollection:{...r.collection,createdAt:new Date(r.collection.createdAt).toISOString(),updatedAt:new Date(r.collection.updatedAt).toISOString(),challenge:r.collection.challenge?{...r.collection.challenge,startDate:new Date(r.collection.challenge.startDate).toISOString(),endDate:new Date(r.collection.challenge.endDate).toISOString(),createdAt:new Date(r.collection.challenge.createdAt).toISOString(),updatedAt:new Date(r.collection.challenge.updatedAt).toISOString()}:null}}}}catch(e){return console.error("Error fetching challenge:",e),{props:{initialError:"Failed to load challenge"}}}},P=({initialCollection:e,initialError:t})=>{let a=(0,s.useRouter)(),{id:n}=a.query,[i,c]=(0,r.useState)(e||null),[o,d]=(0,r.useState)(!e),[h,u]=(0,r.useState)(t||null);return((0,r.useEffect)(()=>{let t=async()=>{if(n&&!e)try{console.log("Fetching challenge with ID:",n);let e=`https://fitwithpulse.ai/.netlify/functions/get-challenge-by-id?id=${n}`;console.log("Fetching from URL:",e);let t=await fetch(e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!t.ok){let e=await t.text();throw console.error("Error response:",e),Error(`HTTP error! status: ${t.status}`)}let a=await t.json();if(console.log("Received data:",a),!a.success)throw Error(a.error||"Failed to fetch challenge");if(!a.collection||!a.collection.challenge)throw Error("Invalid challenge data received");let l={...a.collection,createdAt:a.collection.createdAt?new Date(a.collection.createdAt):new Date,updatedAt:a.collection.updatedAt?new Date(a.collection.updatedAt):new Date,challenge:{...a.collection.challenge,startDate:a.collection.challenge.startDate?new Date(a.collection.challenge.startDate):new Date,endDate:a.collection.challenge.endDate?new Date(a.collection.challenge.endDate):new Date,createdAt:a.collection.challenge.createdAt?new Date(a.collection.challenge.createdAt):new Date,updatedAt:a.collection.challenge.updatedAt?new Date(a.collection.challenge.updatedAt):new Date,participants:a.collection.challenge.participants||[]}};console.log("Processed collection:",l),c(l)}catch(e){console.error("Error details:",e),u(e instanceof Error?e.message:"An error occurred while loading the challenge")}finally{d(!1)}};a.isReady&&n&&t()},[n,a.isReady,e]),!a.isReady||o)?l.jsx(S,{}):h?l.jsx(D,{message:h}):i&&i.challenge?(0,l.jsxs)(l.Fragment,{children:[l.jsx(N,{challenge:i.challenge,id:n}),l.jsx(v,{challenge:i.challenge,onClose:()=>{console.log("Closing challenge invitation"),a.push("/")},onJoinChallenge:async e=>{try{console.log("Attempting to join challenge:",e),await new Promise(e=>setTimeout(e,1e3)),a.push("/")}catch(e){console.error("Error joining challenge:",e),u("Failed to join challenge. Please try again.")}}})]}):l.jsx(D,{message:"Challenge not found"})}},1912:(e,t,a)=>{"use strict";a.a(e,async(e,l)=>{try{a.d(t,{h:()=>c});var r=a(3258),s=a(4484),n=a(1308),i=e([r,s,n]);[r,s,n]=i.then?(await i)():i;let c=(0,r.configureStore)({reducer:{user:s.ZP,workout:n.ZP}});l()}catch(e){l(e)}})},4484:(e,t,a)=>{"use strict";a.a(e,async(e,l)=>{try{a.d(t,{K4:()=>c,ZP:()=>o,av:()=>i});var r=a(3258),s=e([r]);r=(s.then?(await s)():s)[0];let n=(0,r.createSlice)({name:"user",initialState:{currentUser:null,loading:!0},reducers:{setUser:(e,t)=>{e.currentUser=t.payload,e.loading=!1},setLoading:(e,t)=>{e.loading=t.payload}}}),{setUser:i,setLoading:c}=n.actions,o=n.reducer;l()}catch(e){l(e)}})},1308:(e,t,a)=>{"use strict";a.a(e,async(e,l)=>{try{a.d(t,{HX:()=>c,ZP:()=>o,q1:()=>i});var r=a(3258),s=e([r]);r=(s.then?(await s)():s)[0];let n=(0,r.createSlice)({name:"workout",initialState:{currentWorkout:null,currentExerciseLogs:[]},reducers:{setCurrentWorkout:(e,t)=>{e.currentWorkout=t.payload},setCurrentExerciseLogs:(e,t)=>{e.currentExerciseLogs=t.payload}}}),{setCurrentWorkout:i,setCurrentExerciseLogs:c}=n.actions,o=n.reducer;l()}catch(e){l(e)}})},7491:()=>{},2636:()=>{},1856:()=>{},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")},3258:e=>{"use strict";e.exports=import("@reduxjs/toolkit")},3291:e=>{"use strict";e.exports=import("react-redux")}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),l=t.X(0,[859,132,163],()=>a(9316));module.exports=l})();
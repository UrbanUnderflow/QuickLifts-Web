"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[978],{8071:function(e,s,t){t.d(s,{f:function(){return l}});var a=t(5893);t(7294);let l=e=>{let{gifUrl:s,alt:t,frameSize:l,contentMode:r="cover",className:i="",onClick:c}=e,o=l?{width:`${l.width}px`,height:`${l.height}px`}:{};return(0,a.jsx)("div",{className:`relative overflow-hidden rounded-full cursor-pointer ${i}`,style:o,onClick:c,children:(0,a.jsx)("img",{src:s,alt:t,className:`w-full h-full object-${r}`,loading:"lazy"})})}},9978:function(e,s,t){t.r(s),t.d(s,{default:function(){return X}});var a,l,r=t(5893),i=t(7294);(a=l||(l={})).Discover="discover",a.Search="search",a.Create="create",a.Messages="messages",a.Profile="profile";var c=t(7705),o=e=>{let{selectedTab:s,onTabChange:t}=e;i.useEffect(()=>{console.log("Current user in BottomNav:",c.W4.currentUser),c.W4.currentUser?.profileImage&&console.log("Profile image data:",c.W4.currentUser.profileImage)},[]);let a=c.W4.currentUser;console.log("Rendering BottomNav with currentUser:",a),console.log("Has profile image?",a&&a.profileImage&&a.profileImage.profileImageURL);let o=[{id:l.Discover,label:"Discover",icon:"/discover-icon.svg",selectedIcon:"/discover-icon-selected.svg"},{id:l.Search,label:"Search",icon:"/search-icon.svg",selectedIcon:"/search-icon-selected.svg"},{id:l.Create,label:"",icon:"/create-icon.svg",selectedIcon:"/create-icon.svg"},{id:l.Messages,label:"Message",icon:"/message-icon.svg",selectedIcon:"/message-icon-selected.svg"},{id:l.Profile,label:"Profile",icon:"/profile-icon.svg",selectedIcon:"/profile-icon-selected.svg"}];return(0,r.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-zinc-800/80 backdrop-blur-sm border-t border-zinc-700",children:(0,r.jsx)("div",{className:"max-w-md mx-auto px-8 py-4 flex justify-between items-center",children:o.map(e=>{let a=s===e.id,i=e.id===l.Profile,o=c.W4.currentUser,n=o&&o.profileImage&&o.profileImage.profileImageURL;return(0,r.jsx)("button",{className:"flex flex-col items-center gap-1",onClick:()=>t(e.id),children:e.id===l.Create?(0,r.jsx)("div",{className:"w-12 h-12 bg-[#E0FE10] rounded-full flex items-center justify-center -mt-6",children:(0,r.jsx)("img",{src:e.icon,alt:e.label,className:"w-6 h-6"})}):(0,r.jsxs)(r.Fragment,{children:[i&&n?(0,r.jsx)("img",{src:o.profileImage.profileImageURL,alt:"User profile",className:`w-6 h-6 rounded-full object-cover
                        ${a?"ring-2 ring-[#E0FE10]":""}
                        `,onError:s=>{console.error("Error loading profile image:",s),s.currentTarget.src=e.icon}}):(0,r.jsx)("img",{src:a?e.selectedIcon:e.icon,alt:e.label,className:"w-6 h-6"}),e.label&&(0,r.jsx)("span",{className:`text-xs ${a?"text-[#E0FE10]":"text-zinc-400"}`,children:e.label})]})},e.id)})})})},n=t(3530),d=t(9828),x=t(6718);class m{get allExercises(){return this._allExercises}async fetchExercises(){try{let e=(await (0,d.PL)((0,d.hJ)(x.db,"exercises"))).docs.map(e=>n.cd.fromFirebase({id:e.id,...e.data()})),s=(await (0,d.PL)((0,d.hJ)(x.db,"exerciseVideos"))).docs.map(e=>({id:e.id,exerciseId:e.data().exerciseId||"",username:e.data().username||"",userId:e.data().userId||"",videoURL:e.data().videoURL||"",fileName:e.data().fileName||"",exercise:e.data().exercise||"",profileImage:e.data().profileImage||{profileImageURL:""},caption:e.data().caption||"",gifURL:e.data().gifURL||"",thumbnail:e.data().thumbnail||"",visibility:e.data().visibility||"open",totalAccountsReached:e.data().totalAccountsReached||0,totalAccountLikes:e.data().totalAccountLikes||0,totalAccountBookmarked:e.data().totalAccountBookmarked||0,totalAccountUsage:e.data().totalAccountUsage||0,isApproved:e.data().isApproved||!1,liked:e.data().liked||!1,bookmarked:e.data().bookmarked||!1,createdAt:e.data().createdAt?new Date(1e3*e.data().createdAt.seconds):new Date,updatedAt:e.data().updatedAt?new Date(1e3*e.data().updatedAt.seconds):new Date})),t=e.map(e=>{let t=s.filter(s=>s.exerciseId===e.id);return{...e,videos:t}});this._allExercises=t.filter(e=>e.videos.length>0),console.log(`Fetched ${this._allExercises.length} exercises with videos.`)}catch(e){throw console.error("Error fetching exercises:",e),Error("Failed to fetch exercises.")}}async fetchFeaturedExercisesWithVideos(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:24;try{let s=(await (0,d.PL)((0,d.hJ)(x.db,"exercises"))).docs.map(e=>n.cd.fromFirebase({id:e.id,...e.data()})),t=(await (0,d.PL)((0,d.hJ)(x.db,"exerciseVideos"))).docs.map(e=>({id:e.id,exerciseId:e.data().exerciseId||"",username:e.data().username||"",userId:e.data().userId||"",videoURL:e.data().videoURL||"",fileName:e.data().fileName||"",exercise:e.data().exercise||"",profileImage:e.data().profileImage||{profileImageURL:""},caption:e.data().caption||"",gifURL:e.data().gifURL||"",thumbnail:e.data().thumbnail||"",visibility:e.data().visibility||"open",totalAccountsReached:e.data().totalAccountsReached||0,totalAccountLikes:e.data().totalAccountLikes||0,totalAccountBookmarked:e.data().totalAccountBookmarked||0,totalAccountUsage:e.data().totalAccountUsage||0,isApproved:e.data().isApproved||!1,liked:e.data().liked||!1,bookmarked:e.data().bookmarked||!1,createdAt:e.data().createdAt?new Date(1e3*e.data().createdAt.seconds):new Date,updatedAt:e.data().updatedAt?new Date(1e3*e.data().updatedAt.seconds):new Date}));return s.map(e=>{let s=t.filter(s=>s.exercise===e.name&&s.gifURL);return{...e,videos:s}}).filter(e=>e.videos.length>0).sort(()=>Math.random()-.5).slice(0,e)}catch(e){return console.error("Error fetching featured exercises:",e),[]}}async fetchPaginatedExercises(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;try{let t=(0,d.IO)((0,d.hJ)(x.db,"exercises"),(0,d.Xo)("createdAt","desc"),(0,d.b9)(s));e&&(t=(0,d.IO)(t,(0,d.TQ)(e)));let a=await (0,d.PL)(t);if(a.empty)return{exercises:[],lastVisible:null};let l=(await (0,d.PL)((0,d.hJ)(x.db,"exerciseVideos"))).docs.map(e=>({id:e.id,exerciseId:e.data().exerciseId||"",username:e.data().username||"",userId:e.data().userId||"",videoURL:e.data().videoURL||"",fileName:e.data().fileName||"",exercise:e.data().exercise||"",profileImage:e.data().profileImage||{profileImageURL:""},caption:e.data().caption||"",gifURL:e.data().gifURL||"",thumbnail:e.data().thumbnail||"",visibility:e.data().visibility||"open",totalAccountsReached:e.data().totalAccountsReached||0,totalAccountLikes:e.data().totalAccountLikes||0,totalAccountBookmarked:e.data().totalAccountBookmarked||0,totalAccountUsage:e.data().totalAccountUsage||0,isApproved:e.data().isApproved||!1,liked:e.data().liked||!1,bookmarked:e.data().bookmarked||!1,createdAt:e.data().createdAt?new Date(1e3*e.data().createdAt.seconds):new Date,updatedAt:e.data().updatedAt?new Date(1e3*e.data().updatedAt.seconds):new Date})),r=a.docs.map(e=>n.cd.fromFirebase({id:e.id,...e.data()})).map(e=>{let s=l.filter(s=>s.exerciseId===e.id);return{...e,videos:s}}).filter(e=>e.videos.length>0),i=a.docs[a.docs.length-1];return{exercises:r,lastVisible:i}}catch(e){throw console.error("Error fetching paginated exercises:",e),e}}constructor(){this._allExercises=[]}}let u=new m;var h=t(8071),f=t(1163),g=()=>{let[e,s]=(0,i.useState)([]),[t,a]=(0,i.useState)(!0),[l,c]=(0,i.useState)(!1),[o,n]=(0,i.useState)(null),[d,x]=(0,i.useState)(!0),m=(0,i.useRef)(null),g=(0,f.useRouter)(),p=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{e?c(!0):a(!0);let{exercises:t,lastVisible:l}=await u.fetchPaginatedExercises(o,15);s(s=>e?[...s,...t]:t),n(l),x(t.length>0)}catch(e){console.error("Error fetching exercises:",e)}finally{e?c(!1):a(!1)}};(0,i.useEffect)(()=>{p()},[]),(0,i.useEffect)(()=>{if(!m.current)return;let e=new IntersectionObserver(e=>{e[0].isIntersecting&&d&&!l&&p(!0)},{threshold:1});return e.observe(m.current),()=>e.disconnect()},[d,l,o]),(0,i.useEffect)(()=>{let e=new IntersectionObserver(e=>{for(let s of e){let e=s.target;s.isIntersecting&&!e.dataset.userPause?e.play().catch(e=>console.error("Video play error:",e)):e.pause()}},{threshold:.5}),s=document.querySelectorAll('video[data-observe="true"]');return s.forEach(s=>{e.observe(s)}),()=>{s.forEach(s=>e.unobserve(s)),e.disconnect()}},[e]);let b=e=>{let s=e.currentTarget;s.paused?(s.removeAttribute("data-user-pause"),s.play().catch(e=>console.error("Video play error:",e))):(s.setAttribute("data-user-pause","true"),s.pause())},j=e=>{e?g.push(`/profile/${e}`):console.error("Username is missing.")},v=(e,t)=>{s(s=>s.map((s,a)=>a===e?{...s,currentVideoPosition:t}:s))};return t&&0===e.length?(0,r.jsx)("div",{className:"text-white text-center",children:"Loading exercises..."}):(0,r.jsxs)("div",{className:"max-w-xl mx-auto px-4 py-6",children:[e.map((e,s)=>(0,r.jsxs)("div",{className:"bg-zinc-800 rounded-xl overflow-hidden mb-6",children:[(0,r.jsx)("video",{"data-observe":"true",src:e.videos[e.currentVideoPosition]?.videoURL,muted:!0,loop:!0,className:"w-full aspect-square object-cover",onClick:b}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,r.jsx)("img",{src:e.videos[e.currentVideoPosition]?.profileImage.profileImageURL||"/default-profile.png",alt:e.videos[e.currentVideoPosition]?.username||"User",className:"w-8 h-8 rounded-full cursor-pointer",onClick:()=>j(e.videos[e.currentVideoPosition]?.username||"")}),(0,r.jsx)("p",{className:"text-white font-medium cursor-pointer",onClick:()=>j(e.videos[e.currentVideoPosition]?.username||""),children:e.videos[e.currentVideoPosition]?.username||"Unknown User"})]}),(0,r.jsx)("p",{className:"text-zinc-400 text-sm",children:e.name}),(0,r.jsx)("p",{className:"text-zinc-500 text-xs mt-1",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-4",children:[e.videos.slice(0,4).map((t,a)=>(0,r.jsx)(h.f,{gifUrl:t.gifURL||"/default-gif.gif",alt:`Preview of ${e.name}`,frameSize:{width:36,height:36},contentMode:"cover",className:`border-2 ${e.currentVideoPosition===a?"border-[#E0FE10]":"border-zinc-500"}`,onClick:()=>v(s,a)},t.id)),e.videos.length>4&&(0,r.jsxs)("div",{className:"w-9 h-9 bg-gray-600 rounded-full flex items-center justify-center text-white text-sm",onClick:()=>console.log("More videos tapped"),children:["+",e.videos.length-4]})]})]})]},e.id)),d&&(0,r.jsx)("div",{ref:m,className:"text-center py-4",children:l&&(0,r.jsx)("div",{className:"spinner border-t-transparent border-4 border-[#E0FE10] w-6 h-6 rounded-full animate-spin"})})]})},p=t(6127),b=t(9176),j=t(2629),v=t(384),N=()=>{let[e,s]=(0,i.useState)(!0),[t,a]=(0,i.useState)("all"),[l,o]=(0,i.useState)(""),[n,d]=(0,i.useState)([]),[x,m]=(0,i.useState)([]),[h,g]=(0,i.useState)([]),[N,w]=(0,i.useState)([]),y=(0,f.useRouter)(),k=[{id:"all",label:"All",icon:(0,r.jsx)(p.Z,{className:"w-4 h-4"})},{id:"people",label:"People",icon:(0,r.jsx)(b.Z,{className:"w-4 h-4"})},{id:"exercises",label:"Moves",icon:(0,r.jsx)(j.Z,{className:"w-4 h-4"})},{id:"bodyparts",label:"Bodyparts",icon:(0,r.jsx)(j.Z,{className:"w-4 h-4"})}],E=e=>{y.push(`/profile/${e.username}`)},S=e=>{let s=e.name.toLowerCase().replace(/\s+/g,"-");y.push(`/exercise/${s}`)};return((0,i.useEffect)(()=>{(async()=>{s(!0);try{let e=await c.W4.fetchUsersWithVideosUploaded();g(e)}catch(e){console.error("Error loading initial data:",e)}finally{s(!1)}})()},[]),(0,i.useEffect)(()=>{(async()=>{s(!0);try{let[e,s]=await Promise.all([c.W4.fetchUsersWithVideosUploaded(),u.fetchFeaturedExercisesWithVideos(24)]);g(e),w(s)}catch(e){console.error("Error loading initial data:",e)}finally{s(!1)}})()},[]),e)?(0,r.jsx)("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-white",children:"Loading..."})}):(0,r.jsxs)("div",{className:"min-h-screen bg-zinc-900",children:[(0,r.jsx)("div",{className:"sticky top-0 z-10 bg-zinc-900/80 backdrop-blur-sm border-b border-zinc-800 ",children:(0,r.jsxs)("div",{className:"pt-4 px-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 bg-zinc-800 rounded-lg px-4 py-2",children:[(0,r.jsx)(p.Z,{className:"w-5 h-5 text-zinc-400"}),(0,r.jsx)("input",{type:"text",placeholder:(()=>{switch(t){case"people":return"Search people..";case"exercises":return"Search exercises..";case"bodyparts":return"Search bodyparts..";default:return"Search people, exercises, or bodyparts.."}})(),value:l,onChange:e=>o(e.target.value),className:"bg-transparent text-white placeholder-zinc-500 flex-1 outline-none"})]}),(0,r.jsx)("div",{className:"flex space-x-2 mt-4 pb-4 overflow-x-auto",children:k.map(e=>(0,r.jsxs)("button",{onClick:()=>a(e.id),className:`flex items-center space-x-2 px-4 py-2 rounded-full transition-colors
                  ${t===e.id?"bg-[#E0FE10] text-black":"bg-zinc-800 text-zinc-400 hover:text-white"}`,children:[e.icon,(0,r.jsx)("span",{className:"text-sm font-medium whitespace-nowrap",children:e.label})]},e.id))})]})}),(0,r.jsx)("div",{className:"pt-4 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:""===l?(0,r.jsxs)("div",{className:"py-4 ",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-white px-4 mb-4",children:"People"}),(0,r.jsx)("div",{className:"overflow-x-auto scrollbar-hide",children:(0,r.jsx)("div",{className:"flex flex-nowrap space-x-4 px-4 pb-4 min-w-max",children:h.map(e=>(0,r.jsx)("div",{className:"flex-shrink-0 cursor-pointer",onClick:()=>E(e),children:(0,r.jsxs)("div",{className:"relative w-[150px]",children:[(0,r.jsxs)("div",{className:"aspect-square rounded-2xl overflow-hidden bg-zinc-800",children:[e.profileImage?.profileImageURL?(0,r.jsx)("img",{src:e.profileImage.profileImageURL,alt:e.username,className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)(v.Z,{className:"w-12 h-12 text-zinc-600"})}),e.creator?.type?.includes("personalTrainer")&&(0,r.jsx)("div",{className:"absolute bottom-2 right-2",children:(0,r.jsx)("div",{className:"bg-[#E0FE10] px-3 py-1 rounded-xl",children:(0,r.jsx)("span",{className:"text-xs font-bold text-black tracking-wider",children:"T R A I N E R"})})})]}),(0,r.jsxs)("p",{className:"mt-2 text-sm text-white text-center",children:["@",e.username]})]})},e.id))})}),(0,r.jsxs)("div",{className:"py-4",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-white px-4 mb-4",children:"Explore New Moves"}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-0",children:N.map(e=>(0,r.jsx)("div",{className:"cursor-pointer aspect-[2/3]",onClick:()=>S(e),children:(0,r.jsx)("div",{className:"relative w-full h-full",children:e.videos[0]?.gifURL?(0,r.jsx)("img",{src:e.videos[0].gifURL,alt:e.name,className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-zinc-800",children:(0,r.jsx)(j.Z,{className:"w-8 h-8 text-zinc-600"})})})},e.id))})]})]}):(0,r.jsxs)("div",{className:"divide-y divide-zinc-800",children:["all"===t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"px-4 py-2 text-sm font-medium text-zinc-400",children:"People"}),(0,r.jsx)("div",{className:"px-4 py-2 text-sm font-medium text-zinc-400",children:"Exercises"})]}),"people"===t&&(0,r.jsx)("div",{className:"px-4"}),"exercises"===t&&(0,r.jsx)("div",{className:"px-4"})]})})]})},w=()=>(0,r.jsx)("div",{className:"max-w-xl mx-auto px-4 py-6",children:(0,r.jsxs)("div",{className:"text-center text-white",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Create"}),(0,r.jsx)("p",{className:"text-zinc-400",children:"Start building your next workout or post."})]})}),y=t(7055);let k=e=>{let{onShare:s}=e;return(0,r.jsx)("div",{className:"bg-zinc-800 rounded-lg p-6 mx-4 mb-6 cursor-pointer shadow-lg transition-colors hover:bg-zinc-700/80",onClick:s,children:(0,r.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,r.jsx)("div",{className:"bg-zinc-700 p-4 rounded-full mb-4",children:(0,r.jsx)(b.Z,{className:"w-8 h-8 text-white"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Pulse is even better with friends"}),(0,r.jsx)("p",{className:"text-zinc-400 text-sm",children:"Find your tribe, or invite your friends to join you sweat. Tap here to send out an invite link."})]})})},E=e=>{let{message:s,currentUserId:t,onSelect:a}=e,l=s.participants.find(e=>e.id!==t);if(!l)return null;let i=new Date(s.lastMessageTimestamp).toLocaleDateString();return(0,r.jsxs)("div",{className:"flex items-center gap-4 p-4 hover:bg-zinc-800 cursor-pointer transition-colors",onClick:()=>a(s),children:[l.profileImage?.profileImageURL?(0,r.jsx)("img",{src:l.profileImage.profileImageURL,alt:l.username,className:"w-12 h-12 rounded-full object-cover"}):(0,r.jsx)("div",{className:"w-12 h-12 bg-zinc-700 rounded-full flex items-center justify-center",children:(0,r.jsx)(y.Z,{className:"w-8 h-8 text-zinc-400"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("h3",{className:"text-white font-medium truncate",children:["@",l.username]}),(0,r.jsx)("span",{className:"text-xs text-zinc-400 flex-shrink-0",children:i})]}),(0,r.jsx)("p",{className:`text-sm truncate ${s.unreadCount?"text-white font-medium":"text-zinc-400"}`,children:s.lastMessage})]})]})};var S=()=>{let[e,s]=i.useState([]),[t,a]=i.useState(!0),l={id:"current-user-id"};i.useEffect(()=>{(async()=>{try{a(!0);let e=await fetch("/api/messages"),t=await e.json();s(t.messages)}catch(e){console.error("Failed to fetch messages:",e),s([])}finally{a(!1)}})()},[]);let c=async()=>{try{navigator.share?await navigator.share({title:"Join me on Pulse",text:"Hey! Let's workout together using Pulse.",url:"https://fitwithpulse.ai"}):console.log("Share not supported")}catch(e){console.error("Error sharing:",e)}},o=e=>{console.log("Selected message:",e)};return t?(0,r.jsx)("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-zinc-400",children:"Loading..."})}):(0,r.jsxs)("div",{className:"min-h-screen bg-zinc-900",children:[(0,r.jsx)("div",{className:"sticky top-0 z-10 bg-zinc-900/80 backdrop-blur-sm border-b border-zinc-800",children:(0,r.jsx)("div",{className:"px-4 py-4 flex justify-center relative",children:(0,r.jsx)("h1",{className:"text-lg font-semibold text-white",children:"Direct Messages"})})}),(0,r.jsxs)("div",{className:"pt-4",children:[(0,r.jsx)(k,{onShare:c}),e.length>0&&(0,r.jsx)("div",{className:"divide-y divide-zinc-800",children:e.map(e=>(0,r.jsx)(E,{message:e,currentUserId:l.id,onSelect:o},e.id))})]})]})},z=t(8662),C=t(927),I=t(6019),A=t(8354),U=t(7014),L=t(3308),R=t(699);let P={ACTIVITY:"activity",EXERCISES:"moves",CHALLENGES:"rounds"};var F=()=>{let[e,s]=(0,i.useState)(P.EXERCISES),[t,a]=(0,i.useState)([]),[l,o]=(0,i.useState)([]),[n,d]=(0,i.useState)([]),[x,m]=(0,i.useState)([]),[u,h]=(0,i.useState)([]),[f,g]=(0,i.useState)([]),[p,b]=(0,i.useState)(null),j=c.W4.currentUser;if(!j)return(0,r.jsx)("div",{children:"Loading..."});(0,i.useEffect)(()=>{(async()=>{if(j?.id)try{let[e,s,a,l]=await Promise.all([c.W4.fetchFollowers(),c.W4.fetchFollowing(),z.G.fetchUserChallenges(),z.G.fetchAllWorkoutSummaries()]);h(e),g(s);let r=a.map(e=>e.challenge).filter(e=>void 0!==e);o(r),d(l);let i=(0,R.o)(l,t,[...e,...s],j.id);console.log("Parsed Activities"+JSON.stringify(i)),m(i)}catch(e){console.error("Error fetching user data:",e)}})()},[j?.id]),(0,i.useEffect)(()=>{(async()=>{if(j?.id)try{let e=await c.W4.fetchUserVideos();a(e)}catch(e){console.error("Error fetching user videos:",e)}})()},[j?.id]);let v={instagram:j.creator?.instagramHandle,twitter:j.creator?.twitterHandle,youtube:j.creator?.youtubeUrl};return(0,r.jsx)("div",{className:"min-h-screen bg-zinc-900",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"h-48 bg-gradient-to-b from-zinc-800 to-zinc-900"}),(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"relative -mt-24",children:[(0,r.jsx)("div",{className:"relative inline-block",children:(0,r.jsx)("img",{src:j.profileImage?.profileImageURL||"/api/placeholder/96/96",alt:j.displayName,className:"w-24 h-24 rounded-full border-4 border-zinc-900"})}),(0,r.jsxs)("div",{className:"mt-4 text-white",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:j.displayName}),(0,r.jsxs)("p",{className:"text-zinc-400",children:["@",j.username]}),(0,r.jsxs)("div",{className:"mt-2 flex items-center gap-4 text-sm text-zinc-400",children:[(0,r.jsxs)("span",{children:[u.length," followers"]}),(0,r.jsx)("span",{className:"w-1 h-1 bg-zinc-600 rounded-full"}),(0,r.jsxs)("span",{children:[f.length," following"]})]}),(0,r.jsx)("p",{className:"mt-4 text-zinc-300",children:j.bio}),(0,r.jsx)("div",{className:"mt-4 flex gap-6",children:Object.entries(v).map(e=>{let[s,t]=e;return t?(0,r.jsx)("a",{href:function(e,s){switch(e){case"instagram":return`https://instagram.com/${s}`;case"twitter":return`https://twitter.com/${s}`;case"youtube":return s;default:return"#"}}(s,t),target:"_blank",rel:"noopener noreferrer",className:"text-zinc-400 hover:text-white transition-colors",children:(0,r.jsx)("img",{src:`/${s}.svg`,alt:s,className:"w-6 h-6 hover:opacity-80"})},s):null})})]}),(0,r.jsx)("div",{className:"mt-8 border-b border-zinc-700 overflow-x-auto",children:(0,r.jsx)("nav",{className:"flex whitespace-nowrap min-w-full sm:min-w-0 px-4 sm:px-0",children:(0,r.jsx)("div",{className:"flex gap-8 pb-2 sm:pb-0",children:Object.values(P).map(t=>(0,r.jsxs)("button",{onClick:()=>s(t),className:`pb-4 px-2 text-sm font-medium transition-colors relative flex-shrink-0
                        ${e===t?"text-white":"text-zinc-400 hover:text-zinc-300"}`,children:[t.charAt(0).toUpperCase()+t.slice(1),e===t&&(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-white"})]},t))})})}),(0,r.jsxs)("div",{className:"mt-8",children:[e===P.ACTIVITY&&(0,r.jsx)("div",{className:"px-5",children:0===x.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center p-8",children:[(0,r.jsx)(C.Z,{className:"w-12 h-12 text-white/20"}),(0,r.jsx)("h3",{className:"mt-4 text-white font-medium",children:"No activities yet"})]}):(0,r.jsx)(I.Z,{activities:x,workoutSummaries:n,userVideos:t,username:j.username,isPublicProfile:!1,onWorkoutSelect:e=>{console.log("Selected workout summary:",e)},onVideoSelect:e=>{console.log("Selected exercise:",e),b(e)},onProfileSelect:e=>{console.log("Selected user profile:",e)}})}),e===P.EXERCISES&&(0,r.jsxs)("div",{className:"px-5",children:[(0,r.jsxs)("h2",{className:"text-xl text-white font-semibold mb-4",children:["Your Videos (",t.length,")"]}),(0,r.jsx)(U.Z,{userVideos:t,onSelectVideo:e=>{b(e)}})]}),e===P.CHALLENGES&&(0,r.jsx)(A.M,{activeChallenges:l,onSelectChallenge:e=>{console.log("Selected challenge:",e)}})]})]})}),p&&(0,r.jsx)(L.default,{exercise:p,user:j,onBack:()=>b(null),onProfileClick:()=>{console.log("Profile clicked")}})]})})},T=t(5612),W=t(2190),D=t(39),V=t(4307),$=t(4454),Z=e=>{let{workout:s,onClose:t,onStartWorkout:a}=e,[l,c]=(0,i.useState)(!1),o=(0,f.useRouter)(),n=async()=>{try{a&&a(),await z.G.saveWorkoutSession({workout:s,logs:s.logs||[]})&&o.push("/workout/overview")}catch(e){console.error("Error starting workout:",e)}},d=e=>{let{icon:s,title:t,value:a}=e;return(0,r.jsxs)("div",{className:"flex items-center bg-zinc-800 rounded-xl p-4",children:[(0,r.jsx)(s,{className:"text-[#E0FE10] w-6 h-6 mr-4"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-zinc-400 text-sm",children:t}),(0,r.jsx)("p",{className:"text-white font-semibold",children:a})]})]})};return(0,r.jsxs)("div",{className:"min-h-screen bg-black flex flex-col",children:[(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 z-10 p-4",children:(0,r.jsx)("button",{onClick:t,className:"ml-auto block",children:(0,r.jsx)(W.Z,{className:"text-white w-6 h-6"})})}),(0,r.jsxs)("div",{className:"flex-grow container mx-auto px-4 pt-20",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)(j.Z,{className:"mx-auto text-[#E0FE10] w-20 h-20 mb-4"}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-4",children:"Get ready to start your workout!"}),(0,r.jsx)("p",{className:"text-zinc-400 mb-8",children:"Once you hit start, your workout will begin. Get ready to crush it! \uD83D\uDCAA"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(d,{icon:D.Z,title:"Estimated Duration",value:`${$.oQ.estimatedDuration(s.exercises)} min`}),(0,r.jsxs)("div",{className:"bg-zinc-800 rounded-xl",children:[(0,r.jsxs)("button",{onClick:()=>c(!l),className:"w-full flex items-center justify-between p-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(j.Z,{className:"text-[#E0FE10] w-6 h-6 mr-4"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-zinc-400 text-sm",children:"Exercise Count"}),(0,r.jsxs)("p",{className:"text-white font-semibold",children:[s.exercises.length," exercises"]})]})]}),(0,r.jsx)(V.Z,{className:`text-[#E0FE10] transform transition-transform ${l?"rotate-90":""}`})]}),l&&(0,r.jsx)("div",{className:"border-t border-zinc-700 p-4",children:s.exercises.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center mb-3 last:mb-0",children:[(0,r.jsx)("div",{className:"bg-zinc-700 rounded-full w-6 h-6 flex items-center justify-center mr-4",children:(0,r.jsx)("span",{className:"text-zinc-400 text-xs",children:s+1})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white",children:e.exercise.name}),(0,r.jsxs)("p",{className:"text-zinc-400 text-sm",children:[e.exercise.sets," sets • ",e.exercise.reps," reps"]})]})]},e.exercise.id))})]}),(0,r.jsx)(d,{icon:j.Z,title:"Workout Type",value:s.zone})]}),(0,r.jsx)("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black to-transparent",children:(0,r.jsx)("button",{onClick:n,className:"w-full bg-[#E0FE10] text-black py-3 rounded-full font-bold text-lg",children:"Start Workout"})})]})]})};let M=e=>e.category.details?.screenTime??0;var B=e=>{let{exercises:s,currentExerciseIndex:t,onComplete:a,onClose:l}=e,c=s[t].exercise,[o,n]=(0,i.useState)(()=>M(c)),[d,x]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{n(M(c))},[c]),(0,i.useEffect)(()=>{if(o<=0){a();return}if(d)return;let e=setInterval(()=>{n(e=>e-1)},1e3);return()=>clearInterval(e)},[o,d,a]),(0,r.jsx)("div",{className:"fixed inset-0 bg-zinc-900 flex flex-col",children:(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)("video",{src:(()=>{let{videos:e,currentVideoPosition:s}=c;return e[s]?.videoURL||""})(),className:"absolute inset-0 w-full h-full object-cover",autoPlay:!0,loop:!0,muted:!0,playsInline:!0}),(0,r.jsxs)("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 bg-black/50 rounded-full px-6 py-2 flex items-center gap-4",children:[(0,r.jsx)("button",{onClick:()=>x(!d),className:"text-white",children:d?"▶️":"⏸️"}),(0,r.jsxs)("span",{className:"text-white font-mono text-2xl",children:[Math.floor(o/60),":",(o%60).toString().padStart(2,"0")]})]}),(0,r.jsx)("div",{className:"absolute bottom-8 left-0 right-0",children:(0,r.jsx)("div",{className:"flex justify-center gap-2 px-4 overflow-x-auto",children:s.map((e,s)=>(0,r.jsx)("div",{className:`relative w-10 h-10 rounded-full overflow-hidden border-2 
                  ${s===t?"border-[#E0FE10]":s<t?"border-zinc-600":"border-zinc-400"}`,children:e.isCompleted?(0,r.jsx)("div",{className:"bg-[#E0FE10] w-full h-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-black",children:"✓"})}):(0,r.jsx)("img",{src:e.exercise.videos[0]?.gifURL,alt:e.exercise.name,className:"w-full h-full object-cover"})},e.id))})}),(0,r.jsx)("button",{onClick:l,className:"absolute top-4 right-4 w-10 h-10 rounded-full bg-black/50 flex items-center justify-center",children:(0,r.jsx)(W.Z,{className:"text-white",size:20})})]})})},G=t(1259),_=t(8865),H=e=>{let{onClose:s,onCreateWorkout:t}=e,[a,l]=(0,i.useState)([]),c=e=>{l(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])};return(0,r.jsxs)("div",{className:"fixed inset-0 bg-zinc-900 flex flex-col min-h-screen",children:[(0,r.jsxs)("div",{className:"p-6 pb-2",children:[(0,r.jsx)("button",{onClick:s,className:"w-10 h-10 rounded-full bg-zinc-800 flex items-center justify-center",children:(0,r.jsx)(W.Z,{className:"text-white",size:20})}),(0,r.jsx)("h1",{className:"text-4xl font-bold text-white mt-6 mb-2",children:"Choose the body parts you want to workout."}),(0,r.jsx)("p",{className:"text-zinc-400 text-lg",children:"You can choose multiple body parts"})]}),(0,r.jsxs)("div",{className:"flex-1 p-6 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 overflow-y-auto max-w-6xl mx-auto scrollbar-hide",children:[(0,r.jsx)(O,{id:"body-parts/bicep",name:"Biceps",isSelected:a.includes("bicep"),onToggle:c}),(0,r.jsx)(O,{id:"body-parts/tricep",name:"Triceps",isSelected:a.includes("triceps"),onToggle:c}),(0,r.jsx)(O,{id:"body-parts/chest",name:"Chest",isSelected:a.includes("chest"),onToggle:c}),(0,r.jsx)(O,{id:"body-parts/calves",name:"Calves",isSelected:a.includes("calves"),onToggle:c}),(0,r.jsx)(O,{id:"body-parts/abs",name:"Abs",isSelected:a.includes("abs"),onToggle:c}),(0,r.jsx)(O,{id:"body-parts/hamstrings",name:"Hamstrings",isSelected:a.includes("hamstrings"),onToggle:c}),(0,r.jsx)(O,{id:"body-parts/back",name:"Back",isSelected:a.includes("back"),onToggle:c}),(0,r.jsx)(O,{id:"body-parts/deltoids",name:"Deltoids",isSelected:a.includes("deltoids"),onToggle:c}),(0,r.jsx)(O,{id:"body-parts/glutes",name:"Glutes",isSelected:a.includes("glutes"),onToggle:c}),(0,r.jsx)(O,{id:"body-parts/lats",name:"Lats",isSelected:a.includes("lats"),onToggle:c}),(0,r.jsx)(O,{id:"body-parts/lowerback",name:"Lower Back",isSelected:a.includes("lowerback"),onToggle:c}),(0,r.jsx)(O,{id:"body-parts/quadriceps",name:"Quadriceps",isSelected:a.includes("quadriceps"),onToggle:c}),(0,r.jsx)(O,{id:"body-parts/rhomboids",name:"Rhomboids",isSelected:a.includes("rhomboids"),onToggle:c})]}),a.length>0&&(0,r.jsx)("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-zinc-900/80 backdrop-blur-sm border-t border-zinc-800",children:(0,r.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,r.jsx)("button",{onClick:()=>t(a),className:"w-full py-4 rounded-full bg-[#E0FE10] text-black font-semibold text-lg",children:"Create workout"})})})]})};let O=e=>{let{id:s,name:t,isSelected:a,onToggle:l}=e;return(0,r.jsxs)("button",{onClick:()=>l(s),className:`relative aspect-square rounded-2xl bg-zinc-800/50 flex flex-col items-center justify-end
        ${a?"ring-2 ring-[#E0FE10]":""}
        max-w-[250px] w-full mx-auto`,children:[(0,r.jsx)("img",{src:`${s}.svg`,alt:t,className:"w-full h-full object-contain opacity-75"}),a&&(0,r.jsx)("div",{className:"absolute top-4 right-4 w-6 h-6 rounded-full bg-[#E0FE10] flex items-center justify-center",children:(0,r.jsx)(_.Z,{className:"text-black",size:16})})]})};var J=t(3967),Q=t.n(J),q=t(8496),Y=e=>{let{isVisible:s,onClose:t,onStartWorkout:a}=e,[l,c]=(0,i.useState)(null),[o,n]=(0,i.useState)(!0),[d,x]=(0,i.useState)([]),[m,u]=(0,i.useState)("today"),[h,g]=(0,i.useState)(!1),[p,b]=(0,i.useState)([]),j=(0,f.useRouter)();(0,i.useEffect)(()=>{s&&(console.log("We are visible!"),N(),w(),y())},[s]);let v=e=>{if(!e)return 0;let s=new Date(e),t=new Date;return Math.max(0,Math.ceil((s.getTime()-t.getTime())/864e5))},N=async()=>{n(!0);try{let e=await k();c(e)}catch(e){console.error("Error fetching workout:",e)}finally{n(!1)}},w=async()=>{try{let e=await E();x(e)}catch(e){console.error("Error fetching challenges:",e)}},y=async()=>{try{let e=await S();b(e)}catch(e){console.error("Error fetching recent workouts:",e)}},k=async()=>null,E=async()=>{try{let e=await q.G_.fetchActiveChallenges();console.log("User Challenges:",e);let s=e.length>0?e[0]:null;return s?console.log("Active Challenge:",s):console.log("No active challenges found."),e}catch(e){return console.error("Error fetching user challenges:",e),[]}},S=async()=>{try{let e=new Date;console.log("Fetching workouts for date:",e);let s=await q.G_.fetchAllWorkoutSummaries();return console.log("Here are the summaries:",s),s.slice(0,3).map(e=>$.P7.fromFirebase({id:e.id,workoutId:e.workoutId||"",exercises:e.exercises||[],bodyParts:e.bodyParts||[],secondaryBodyParts:e.secondaryBodyParts||[],workoutTitle:e.workoutTitle||"Untitled Workout",caloriesBurned:e.caloriesBurned||0,workoutRating:e.workoutRating,exercisesCompleted:e.exercisesCompleted||[],aiInsight:e.aiInsight||"",recommendations:e.recommendations||[],gifURLs:e.gifURLs||[],recommendedWork:e.recommendedWork,isCompleted:e.isCompleted||!1,createdAt:e.createdAt,updatedAt:e.updatedAt,completedAt:e.completedAt,duration:e.duration||""}))}catch(e){return console.error("Error fetching recent workouts:",e),[]}},z=async()=>{if(l)try{a&&await a(l),t()}catch(e){console.error("Error starting workout:",e)}},C=e=>{t(),j.push(`/round/${e.challengeId}`)},I=e=>e.toLocaleDateString(void 0,{month:"short",day:"numeric"}),A=e=>{console.log("Open summary for workout:",e)};return s?(0,r.jsx)(r.Fragment,{children:s&&(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col bg-[#E0FE10] overflow-hidden",children:[(0,r.jsx)("button",{onClick:t,className:"self-end m-4",children:(0,r.jsx)(W.Z,{size:24,className:"text-black"})}),(0,r.jsxs)("div",{className:"flex bg-black/10",children:[(0,r.jsx)("button",{onClick:()=>u("today"),className:Q()("flex-1 py-3 text-center","today"===m?"border-b-2 border-black font-bold":""),children:"Today"}),(0,r.jsx)("button",{onClick:()=>u("rounds"),className:Q()("flex-1 py-3 text-center","rounds"===m?"border-b-2 border-black font-bold":""),children:"Rounds"})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto",children:h?(0,r.jsx)(H,{onClose:()=>g(!1),onCreateWorkout:e=>{console.log("Creating workout with parts:",e),g(!1)}}):(0,r.jsxs)(r.Fragment,{children:["today"===m&&(o?(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsx)("div",{className:"text-black",children:"Loading..."})}):l?(0,r.jsxs)("div",{className:"flex flex-col p-6 bg-[#E0FE10] rounded-lg",children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("h2",{className:"text-xl font-bold text-black",children:"Workout In Progress"})}),(0,r.jsxs)("div",{className:"rounded-lg bg-black text-white p-4 flex flex-col gap-4",children:[(0,r.jsx)("h3",{className:"font-bold",children:l.title||"My Workout"}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("button",{onClick:z,className:"px-4 py-2 rounded-md bg-green-200 text-black",children:"Resume"}),(0,r.jsx)("button",{onClick:()=>{console.log("Workout canceled")},className:"px-4 py-2 rounded-md bg-red-200 text-black",children:"Cancel"})]})]})]}):(0,r.jsxs)("div",{className:"flex flex-col p-8 bg-[#E0FE10] rounded-lg",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-black mb-4",children:"You don't have your workout for today yet."}),(0,r.jsxs)("button",{onClick:()=>{g(!0)},className:"mt-2 flex items-center text-lg font-medium text-black",children:["Get a workout",(0,r.jsx)("svg",{className:"ml-2 w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:(0,r.jsx)("path",{d:"M5 12h14m-7-7l7 7-7 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),d.length>0&&(0,r.jsx)("div",{className:"mt-auto pt-8",children:(0,r.jsxs)("div",{className:"bg-black/10 rounded-full py-3 px-6 inline-flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-black",children:"Swipe to see"}),(0,r.jsxs)("span",{className:"font-bold text-black",children:[d.length," Active Rounds"]}),(0,r.jsx)("svg",{className:"w-4 h-4 text-black",viewBox:"0 0 24 24",fill:"none",children:(0,r.jsx)("path",{d:"M9 5l7 7-7 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]})),"rounds"===m&&(()=>{let e=e=>{if(!e.challenge?.startDate||!e.challenge?.endDate)return 0;let s=new Date(e.challenge.startDate),t=new Date(e.challenge.endDate),a=new Date,l=t.getTime()-s.getTime();return Math.min(Math.max((a.getTime()-s.getTime())/l,0),1)};return(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-black mb-4",children:"Active Rounds"}),0===d.length?(0,r.jsx)("p",{className:"text-black",children:"No active rounds"}):(0,r.jsx)("div",{className:"space-y-4",children:d.map(s=>(0,r.jsx)("button",{onClick:()=>C(s),className:"w-full text-left",children:(0,r.jsxs)("div",{className:"p-4 space-y-3 bg-zinc-800 rounded-xl",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h3",{className:"text-white font-semibold",children:s.challenge?.title}),(0,r.jsxs)("span",{className:"text-[#E0FE10] text-sm",children:[v(s.challenge?.endDate),"d left"]})]}),(0,r.jsx)("div",{className:"h-2 bg-zinc-700 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-[#E0FE10] rounded-full",style:{width:`${100*e(s)}%`}})}),(0,r.jsx)("div",{className:"flex justify-between text-sm text-white/70",children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,r.jsx)("path",{d:"M15.45 22c1.95.31 3.5-1.24 3.5-3.19V5.19c0-1.95-1.55-3.5-3.5-3.19m0 20H8.55c-1.95.31-3.5-1.24-3.5-3.19V5.19c0-1.95 1.55-3.5 3.5-3.19"})}),(0,r.jsxs)("span",{children:[s.currentStreak," day streak"]})]})})]},s.id)},s.id))})]})})(),"today"===m&&(0===p.length?null:(0,r.jsxs)("div",{className:"p-6 bg-[#E0FE10] rounded-lg mt-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-black mb-4",children:"Recent Workouts"}),(0,r.jsx)("div",{className:"space-y-4",children:p.slice(0,3).map(e=>(0,r.jsxs)("button",{onClick:()=>A(e),className:"w-full p-4 bg-black rounded-lg text-white flex justify-between items-center hover:bg-black/80 transition",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-bold",children:e.workoutTitle}),(0,r.jsxs)("p",{className:"text-sm",children:[I(e.createdAt)," \xb7 ",e.duration," min"]})]}),(0,r.jsxs)("span",{className:"font-bold",children:["Score: ",e.duration]})]},e.id))})]}))]})})]})}):null},X=()=>{let[e,s]=(0,i.useState)(l.Discover),[t,a]=(0,i.useState)(!1),[n,d]=(0,i.useState)(!1),[m,u]=(0,i.useState)(!0),[h,f]=(0,i.useState)("idle"),[p,b]=(0,i.useState)(null),[j,v]=(0,i.useState)([]),[y,k]=(0,i.useState)(0);(0,i.useEffect)(()=>{let e=(0,G.Aj)(x.I,async e=>{if(e)try{let s=await c.W4.fetchUserFromFirestore(e.uid);c.W4.currentUser=s,console.log("User data fetched and set:",s),d(!0),u(!1)}catch(e){console.error("Error fetching user data:",e)}else c.W4.currentUser=null,d(!1),u(!0)});return()=>e()},[]);let E=(e,s)=>{b(e),v(s),f("ready")},C=()=>{f("in-progress")},I=()=>{let e=[...j];e[y]={...e[y],isCompleted:!0},v(e),y<j.length-1?k(e=>e+1):(f("completed"),A())},A=()=>{f("idle"),b(null),v([]),k(0)},U=async e=>{try{let s=await z.G.saveWorkoutSession({workout:e,logs:e.logs||[]});s&&(E(s,s.logs||[]),a(!1))}catch(e){console.error("Error starting workout:",e)}};return n?(0,r.jsxs)("div",{className:"min-h-screen bg-zinc-900",children:[("ready"===h||"in-progress"===h)&&(()=>{switch(h){case"ready":return(0,r.jsx)(Z,{workout:p,onClose:A,onStartWorkout:C});case"in-progress":return(0,r.jsx)(B,{exercises:j,currentExerciseIndex:y,onComplete:I,onClose:A});default:return null}})(),"idle"===h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("nav",{className:"px-4 py-4 bg-zinc-900/80 backdrop-blur-sm border-b border-zinc-800 sticky top-0 z-10 flex justify-between items-center",children:[(0,r.jsx)("img",{src:"/pulse-logo-white.svg",alt:"Pulse",className:"h-8"}),(0,r.jsx)("button",{className:"bg-[#E0FE10] text-black px-4 py-2 rounded-lg",onClick:()=>a(!0),children:"Start Workout"})]}),(0,r.jsx)("div",{className:"w-full",children:(()=>{switch(e){case l.Discover:return(0,r.jsx)(g,{});case l.Search:return(0,r.jsx)(N,{});case l.Create:return(0,r.jsx)(w,{});case l.Messages:return(0,r.jsx)(S,{});case l.Profile:return(0,r.jsx)(F,{});default:return null}})()}),(0,r.jsx)(o,{selectedTab:e,onTabChange:s}),(0,r.jsx)(Y,{isVisible:t,onClose:()=>a(!1),onStartWorkout:U})]})]}):(0,r.jsx)(T.Z,{isVisible:m,onClose:()=>u(!1),onSignInSuccess:e=>{console.log("Sign-in successful:",e),d(!0),u(!1)},onSignInError:e=>{console.error("Sign-in error:",e),alert("Sign-in failed. Please try again.")},onSignUpSuccess:e=>{console.log("Sign-up successful:",e),d(!0),u(!1)},onSignUpError:e=>{console.error("Sign-up error:",e),alert("Sign-up failed. Please try again.")},onQuizComplete:()=>{console.log("Quiz completed successfully")},onQuizSkipped:()=>{console.log("Quiz skipped")}})}}}]);
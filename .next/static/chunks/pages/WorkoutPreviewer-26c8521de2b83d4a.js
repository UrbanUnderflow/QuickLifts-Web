(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[256],{7748:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/WorkoutPreviewer",function(){return s(7743)}])},7743:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});var l=s(5893),r=s(7294),o=s(1163),n=e=>{let{videoURLs:t,isMuted:s=!0,ratio:o="cover"}=e,[n,i]=(0,r.useState)(0),c=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=c.current;if(!e)return;let s=()=>{i(e=>(e+1)%t.length)},l=()=>{e.play().catch(e=>{"AbortError"!==e.name&&console.error("Error playing video:",e)})};return e.addEventListener("ended",s),e.addEventListener("canplay",l),()=>{e.removeEventListener("ended",s),e.removeEventListener("canplay",l)}},[t,n]),(0,r.useEffect)(()=>{let e=c.current;e&&(e.src=t[n],e.load())},[n,t]),(0,l.jsx)("div",{className:"relative w-full h-full bg-black",children:(0,l.jsx)("video",{ref:c,className:`absolute inset-0 w-full h-full ${"cover"===o?"object-cover":"object-contain"}`,muted:s,playsInline:!0,loop:!1})})},i=e=>{let{log:t}=e;(0,r.useEffect)(()=>{console.log("Exercise Log:",t),console.log("Exercise name:",t.exercise.name),console.log("Sets:",t.exercise.sets),console.log("Reps:",t.exercise.reps),console.log("Videos length:",t.exercise.videos.length),console.log("Current video position:",t.exercise.currentVideoPosition);let e=t.exercise.videos[t.exercise.currentVideoPosition];e?console.log("Current video URL:",e.videoURL):console.log("No video available at current position"),t.exercise.videos.forEach((e,t)=>{console.log(`Video ${t} URL:`,e.videoURL)})},[t]);let s=t.exercise.videos[t.exercise.currentVideoPosition]?.videoURL;return(0,l.jsxs)("div",{className:"flex bg-black-800 bg-opacity-50 rounded-lg h-24 mb-4 overflow-hidden",children:[t.exercise.videos.length>0&&s?(0,l.jsxs)("div",{className:"relative w-24 h-24 overflow-hidden",children:[(0,l.jsx)("video",{src:s,className:"object-cover w-full h-full",muted:!0,autoPlay:!0,loop:!0}),(0,l.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-b from-black/60 to-transparent"})]}):(0,l.jsx)("div",{className:"w-24 h-24 bg-gray-600 flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-white text-xs",children:"No video"})}),(0,l.jsxs)("div",{className:"flex flex-col justify-center ml-4 flex-grow",children:[(0,l.jsx)("h3",{className:"text-lg font-bold text-white",children:t.exercise.name}),(0,l.jsx)("p",{className:"text-sm text-[#E0FE10]",children:`${t.exercise.sets} sets x ${"0"===t.exercise.reps?12:t.exercise.reps} reps`})]})]})},c=s(8696),a=()=>{var e;let{wId:t,referralCode:s}=(0,o.useRouter)().query,[a,d]=(0,r.useState)(null),[x,u]=(0,r.useState)([]),[h,f]=(0,r.useState)(null),[m,p]=(0,r.useState)(!0),[v,b]=(0,r.useState)(!1),g=s||"Bq6zlqIlSdPUGki6gsv6X9TdVtG3",j=t||"1039FEC0-E7B6-4F7E-84BC-B89086232B5F";(0,r.useEffect)(()=>{j&&s&&(async()=>{try{p(!0);let[e,t]=await c.Z.sharedInstance.fetchSavedWorkout(g,j);e?(d(e),u(t||[])):f("No workout data returned")}catch(e){f(e instanceof Error?e.message:"An unknown error occurred")}finally{p(!1)}})()},[j,g]);let N=()=>{b(!0)};if(m)return(0,l.jsx)("div",{className:"text-white text-center pt-20",children:"Loading workout..."});if(h||!a)return(0,l.jsxs)("div",{className:"text-white text-center pt-20",children:["Error loading workout: ",h||"Unknown error"]});let w=x.flatMap(e=>e.exercise.videos.map(e=>e.videoURL)),E=5*Math.round((5+8*(e=a.exercises).length+1*Math.max(0,e.length-1)+5)/5);return(0,l.jsxs)("div",{className:"relative h-screen bg-black",children:[(0,l.jsx)("div",{className:"fixed top-0 left-0 right-0 bg-[#E0FE10] text-black py-2 px-4 text-center z-50",children:(0,l.jsxs)("p",{className:"font-bold",children:["Get more workouts with the Pulse app, as well as full access to this workout!",(0,l.jsx)("button",{onClick:N,className:"underline ml-2 font-bold bg-transparent border-none cursor-pointer",children:"Get App"})]})}),(0,l.jsx)(n,{videoURLs:w,isMuted:!0,ratio:"cover"}),(0,l.jsx)("div",{className:"absolute inset-0 mt-80 overflow-y-auto bg-gradient-to-b from-transparent via-[#192126] via-25% to-[#192126] to-50%",children:(0,l.jsxs)("div",{className:"flex flex-col min-h-full p-4 pb-20 pt-12",children:[" ",(0,l.jsxs)("div",{className:"flex-grow",children:[(0,l.jsxs)("div",{className:"text-center text-white mt-10 mb-1",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold",children:"Your workout for today:"}),(0,l.jsx)("p",{className:"text-xl font-bold text-[#E0FE10]",children:a.title})]}),(0,l.jsxs)("div",{className:"flex justify-around my-10",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("p",{className:"text-2xl font-bold text-[#E0FE10]",children:x.length}),(0,l.jsx)("p",{className:"text-m text-white",children:"Exercises"})]}),(0,l.jsx)("div",{className:"h-14 w-px bg-white opacity-50"}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsxs)("p",{className:"text-2xl font-bold text-[#E0FE10]",children:[E," mins"]}),(0,l.jsx)("p",{className:"text-m text-white",children:"Duration"})]})]}),(0,l.jsx)("div",{className:"mt-6 mb-28",children:x.map(e=>(0,l.jsx)(i,{log:e},e.id))})]})]})}),(0,l.jsx)("div",{className:"fixed bottom-0 left-0 right-0 p-10 bg-gradient-to-t from-black to-transparent",children:(0,l.jsx)("button",{onClick:()=>{N()},className:"w-full py-3 bg-[#E0FE10] text-black font-bold rounded-full text-lg",children:"Track this Workout"})}),v&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg max-w-sm w-full",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Confirm Download"}),(0,l.jsx)("p",{className:"mb-6",children:"You're about to be redirected to the App Store to download Pulse. Continue?"}),(0,l.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,l.jsx)("button",{onClick:()=>b(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Cancel"}),(0,l.jsx)("button",{onClick:()=>{b(!1),window.location.href="https://apps.apple.com/us/app/pulse-the-fitness-collective/id6451497729"},className:"px-4 py-2 bg-[#E0FE10] text-black rounded",children:"Continue"})]})]})})]})}}},function(e){e.O(0,[594,143,696,888,774,179],function(){return e(e.s=7748)}),_N_E=e.O()}]);
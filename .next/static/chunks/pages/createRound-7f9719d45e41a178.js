(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[713],{22:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/createRound",function(){return s(2864)}])},2171:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1134).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},4307:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1134).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},5432:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1134).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},3050:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1134).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},384:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1134).Z)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]])},39:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1134).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2629:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1134).Z)("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]])},6127:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1134).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8267:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1134).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9176:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1134).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},494:function(e,t,s){"use strict";s.d(t,{c:function(){return l}});var r=s(5893),a=s(3050);let l=e=>{let{userVideos:t,onSelectVideo:s,multiSelection:l=!1,selectedExercises:n=[],onToggleSelection:i}=e,c=new Set,o=t.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()).filter(e=>{let t=e.videos[0]?.gifURL;return!c.has(t||"")&&(c.add(t||""),!0)});return 0===o.length?(0,r.jsx)("div",{className:"flex items-center justify-center h-64 text-zinc-500 text-lg",children:"No moves available"}):(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 p-4",children:o.map(e=>{let t=l&&n.some(t=>t.id===e.id);return(0,r.jsxs)("div",{onClick:()=>{l&&i?i(e):s(e)},className:"relative cursor-pointer group",children:[(0,r.jsxs)("div",{className:"relative rounded-lg overflow-hidden aspect-square",children:[(0,r.jsx)("img",{src:e.videos[0]?.gifURL,alt:e.name,className:"w-full h-full object-cover transition-transform duration-200 group-hover:scale-105"}),l&&t&&(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,r.jsx)(a.Z,{className:"text-[#E0FE10]",size:32})})]}),(0,r.jsx)("p",{className:"mt-2 text-white text-sm font-medium truncate",children:e.name})]},`${e.id}-${new Date(e.createdAt).getTime()}`)})})}},8071:function(e,t,s){"use strict";s.d(t,{f:function(){return a}});var r=s(5893);s(7294);let a=e=>{let{gifUrl:t,alt:s,frameSize:a,contentMode:l="cover",className:n="",onClick:i}=e,c=a?{width:`${a.width}px`,height:`${a.height}px`}:{};return(0,r.jsx)("div",{className:`relative overflow-hidden rounded-full cursor-pointer ${n}`,style:c,onClick:i,children:(0,r.jsx)("img",{src:t,alt:s,className:`w-full h-full object-${l}`,loading:"lazy"})})}},359:function(e,t,s){"use strict";s.d(t,{kg:function(){return b},ox:function(){return j}});var r=s(5893),a=s(7294),l=s(5432),n=s(2171),i=s(8267),c=s(39),o=s(4307),d=s(3050),u=s(2066),x=s(4454),h=s(8071);let m=e=>{let{month:t,day:s,weekday:a}=e;return(0,r.jsxs)("div",{className:"flex flex-col items-center bg-zinc-800 rounded p-2 text-xs",children:[(0,r.jsx)("span",{className:"text-gray-400",children:t}),(0,r.jsx)("span",{className:"text-white font-bold text-lg",children:s}),(0,r.jsx)("span",{className:"text-gray-400",children:a})]})},p=e=>{let{icon:t,value:s,label:a}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-1 text-gray-400",children:[t,(0,r.jsxs)("span",{className:"text-sm",children:[s," ",a]})]})},g=e=>{let{selectedOrder:t,maxOrder:s,workoutDate:a,showCalendar:i,onUpdateOrder:c,onCalendarTap:o}=e;return(0,r.jsxs)("div",{className:"flex flex-col justify-between py-2 px-4 bg-zinc-800",children:[(0,r.jsx)("button",{onClick:()=>c(t-1),disabled:t<=0,className:`p-2 ${t>0?"text-green-500 hover:text-green-400":"text-gray-600"}`,children:(0,r.jsx)(l.Z,{size:16})}),i&&a&&(0,r.jsx)("button",{onClick:()=>o?.(a),className:"my-2",children:(0,r.jsx)(m,{month:(0,u.WU)(a,"MMM").toUpperCase(),day:(0,u.WU)(a,"d"),weekday:(0,u.WU)(a,"EEE").toUpperCase()})}),(0,r.jsx)("button",{onClick:()=>c(t+1),disabled:t>=s-1,className:`p-2 ${t<s-1?"text-green-500 hover:text-green-400":"text-gray-600"}`,children:(0,r.jsx)(n.Z,{size:16})})]})},f=(e,t,s)=>{if(!s?.length)return!1;let r=new Date(t);r.setHours(0,0,0,0);let a=new Date(t);a.setHours(23,59,59,999);let l=s.filter(e=>{if(!e.completedAt)return!1;let t=new Date(e.completedAt);return t>=r&&t<a}),n=e.exercises.map(e=>e.exercise.id);return l.some(e=>{if(!e.completedAt)return!1;let t=e.exercisesCompleted.map(e=>e.exercise.id);return!!n.some(e=>t.includes(e))&&new Date(e.completedAt).getHours()>=6})},b=e=>{let{workout:t,gifUrls:s,selectedOrder:l,maxOrder:n,showArrows:u,showCalendar:m,workoutDate:b,backgroundColor:j="bg-zinc-800",isComplete:w=!1,isChallengeEnabled:v=!1,challengeStartDate:y,challengeHasStarted:N,currentDayIndex:k,userChallenge:z,allWorkoutSummaries:E,index:D,onPrimaryAction:C,onCalendarTap:S,onUpdateOrder:I}=e,[T,$]=(0,a.useState)(w);(0,a.useEffect)(()=>{if(console.log("\n\uD83D\uDD0D Checking workout completion status"),console.log("\uD83D\uDCCA Initial Data:",{workoutId:t.id,workoutDate:b,challengeStartDate:y,isChallengeEnabled:v,initialIsComplete:w}),!y||!v){console.log("❌ No challenge date or challenge not enabled"),$(w);return}if(b&&b>new Date){console.log("⏳ Future date detected, marking incomplete:",b),$(!1);return}let e=z?.completedWorkouts?.some(e=>(console.log("Comparing:",{completedWorkoutId:e.workoutId,currentWorkoutId:t.id,matches:e.workoutId===t.id}),e.workoutId===t.id));console.log("\uD83C\uDFC6 Completion from userChallenge:",{isMarkedComplete:e,completedWorkouts:z?.completedWorkouts});let s=!!b&&f(t,b,E);console.log("\uD83D\uDCDD Completion from logs:",{completedViaLogs:s,summariesCount:E?.length||0});let r=e||s;console.log("✅ Final completion status:",r),$(r)},[t,y,z,E,b]);let R=`
    rounded-lg overflow-hidden cursor-pointer ${j}
    ${void 0!==D&&D<(k||0)||T?"opacity-70":"opacity-100"}
    ${((e,t)=>{if(void 0===e||!t)return!1;let s=new Date;s.setHours(0,0,0,0);let r=new Date(t);return r.setHours(0,0,0,0),e===Math.floor(Math.abs(s.getTime()-r.getTime())/864e5)})(D,y)&&N?"ring-2 ring-green-500":""}
  `;return(0,r.jsx)("div",{onClick:C,className:R,children:(0,r.jsxs)("div",{className:"flex",children:[u&&void 0!==l&&void 0!==n&&I&&(0,r.jsx)(g,{selectedOrder:l,maxOrder:n,workoutDate:b,showCalendar:!!m,onUpdateOrder:I,onCalendarTap:S}),(0,r.jsxs)("div",{className:"flex-1 p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:t.title}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)(p,{icon:(0,r.jsx)(i.Z,{size:16}),value:String(t.exercises.length),label:"moves"}),(0,r.jsx)(p,{icon:(0,r.jsx)(c.Z,{size:16}),value:1>x.oQ.estimatedDuration(t.exercises)?"< 1":String(x.oQ.estimatedDuration(t.exercises)),label:"min"})]})]}),(0,r.jsx)(o.Z,{className:"text-gray-500",size:20})]}),(0,r.jsx)("div",{className:"flex gap-2 mb-4 overflow-x-auto",children:s.slice(0,3).map((e,s)=>(0,r.jsx)("div",{className:"w-24 h-24 rounded-lg overflow-hidden flex-shrink-0",children:(0,r.jsx)(h.f,{gifUrl:e,alt:`Exercise ${s+1} preview`,className:"w-full h-full"})},`${t.id}-gif-${s}`))}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"px-3 py-1 bg-green-500 bg-opacity-20 text-green-500 rounded-full text-sm",children:t.zone}),v&&(0,r.jsx)(d.Z,{className:T?"text-green-500":"text-gray-600",size:20})]})]})]})})},j=e=>{let{selectedOrder:t,maxOrder:s,showArrows:l,showCalendar:n,workoutDate:i,backgroundColor:c="bg-zinc-800",isComplete:o=!1,challengeStartDate:u,challengeHasStarted:x,currentDayIndex:h,index:m,onPrimaryAction:p,onCalendarTap:f,onUpdateOrder:b}=e,[j,w]=(0,a.useState)(o);(0,a.useEffect)(()=>{if(!u||!i){w(o);return}w(i<=new Date)},[i,u,o]);let v=`
    rounded-lg overflow-hidden cursor-pointer ${c}
    ${void 0!==m&&m<(h||0)||j?"opacity-70":"opacity-100"}
    ${((e,t)=>{if(void 0===e||!t)return!1;let s=new Date;s.setHours(0,0,0,0);let r=new Date(t);return r.setHours(0,0,0,0),e===Math.floor(Math.abs(s.getTime()-r.getTime())/864e5)})(m,u)&&x?"ring-2 ring-green-500":""}
  `;return(0,r.jsx)("div",{onClick:p,className:v,children:(0,r.jsxs)("div",{className:"flex",children:[l&&void 0!==t&&void 0!==s&&b&&(0,r.jsx)(g,{selectedOrder:t,maxOrder:s,workoutDate:i,showCalendar:!!n,onUpdateOrder:b,onCalendarTap:f}),(0,r.jsxs)("div",{className:"flex-1 p-4",children:[(0,r.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"Rest Day"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Take a moment to recover and come back stronger."})]})}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"px-3 py-1 bg-green-500 bg-opacity-20 text-green-500 rounded-full text-sm",children:"Recovery"}),(0,r.jsx)(d.Z,{className:j?"text-green-500":"text-gray-600",size:20})]})]})]})})}},2864:function(e,t,s){"use strict";s.r(t),s.d(t,{DesktopChallengeSetupView:function(){return I},MobileChallengeSetupView:function(){return S},SweatlistType:function(){return a},default:function(){return T}});var r,a,l=s(5893),n=s(7294),i=s(1163),c=s(9176),o=s(1134);let d=(0,o.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var u=s(2190);let x=(0,o.Z)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),h=(0,o.Z)("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);var m=s(2629),p=s(384),g=s(6045),f=s(9586),b=s(9073),j=s(3530),w=s(4454),v=s(359),y=s(494),N=s(6127);let k=e=>{let{selectedUserIds:t,onUserSelect:s,onUserRemove:r}=e,[a,i]=(0,n.useState)([]),[c,o]=(0,n.useState)(""),[d,x]=(0,n.useState)(!0),[h,m]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{try{let e=await g.W4.getAllUsers();i(e),x(!1)}catch(e){console.error("Error fetching users:",e),x(!1)}})()},[]);let p=a.filter(e=>e.username.toLowerCase().includes(c.toLowerCase())&&!t.includes(e.id)),f=a.filter(e=>t.includes(e.id));return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:"text",value:c,onChange:e=>{o(e.target.value),m(!0)},onFocus:()=>m(!0),placeholder:"Search creators...",className:"w-full p-4 pl-11 bg-zinc-900 text-white rounded-lg border border-zinc-700  focus:border-[#E0FE10] transition-colors"}),(0,l.jsx)(N.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",size:18})]}),h&&c&&(0,l.jsx)("div",{className:"absolute z-10 mt-1 w-full max-h-60 overflow-y-auto bg-zinc-800 rounded-lg border border-zinc-700 shadow-xl",children:d?(0,l.jsx)("div",{className:"p-3 text-zinc-400",children:"Loading creators..."}):p.length>0?p.map(e=>(0,l.jsxs)("button",{onClick:()=>{s(e.id),o(""),m(!1)},className:"w-full p-3 text-left hover:bg-zinc-700 text-white flex items-center space-x-3",children:[e.profileImage?.profileImageURL&&(0,l.jsx)("img",{src:e.profileImage.profileImageURL,alt:e.username,className:"w-8 h-8 rounded-full object-cover"}),(0,l.jsx)("span",{children:e.username})]},e.id)):(0,l.jsx)("div",{className:"p-3 text-zinc-400",children:"No creators found"})}),f.length>0&&(0,l.jsx)("div",{className:"flex flex-wrap gap-2 mt-4",children:f.map(e=>(0,l.jsxs)("div",{className:"flex items-center gap-2 bg-zinc-800 rounded-full pl-2 pr-3 py-1",children:[e.profileImage?.profileImageURL&&(0,l.jsx)("img",{src:e.profileImage.profileImageURL,alt:e.username,className:"w-6 h-6 rounded-full object-cover"}),(0,l.jsx)("span",{className:"text-sm text-white",children:e.username}),(0,l.jsx)("button",{onClick:()=>r(e.id),className:"text-zinc-400 hover:text-white",children:(0,l.jsx)(u.Z,{size:14})})]},e.id))})]})};var z=s(7333),E=s(109);class D{constructor(){}static getInstance(){return D.instance||(D.instance=new D),D.instance}async sendPrompt(e){try{let t=await (0,E.ET)((0,E.hJ)(z.db,"generate"),{prompt:e});return console.log("Generated prompt document ID:",t.id),await this.fetchOutputWithRetry(t,30,2e3)}catch(e){throw console.error("Error sending prompt:",e),e}}async fetchOutputWithRetry(e,t,s){if(0===t)throw Error("Max retry attempts reached");let r=(await (0,E.QT)(e)).data();return r?.output?r.output:(await new Promise(e=>setTimeout(e,s)),this.fetchOutputWithRetry(e,t-1,s))}async generateRound(e,t,s,r,a,l,n){let i=this.calculateNumberOfWorkouts(l,n),c=e.join(", "),o=r.map(e=>e.name).join(", "),d=a.map(e=>e.name).join(", "),u=`
You are a JSON-generating fitness AI. Return PURE JSON only.

PROGRAM REQUIREMENTS:
- ${i} total workouts from ${l.toLocaleDateString()} to ${n.toLocaleDateString()}
- 4-5 exercises per workout (no more than 5)
- Use only exercises from these lists:
  Must include: ${c}
  Prefer creator exercises: ${o}
  Other available: ${d}

USER PREFERENCES:
${t}
${s.join("\n")}

RESPONSE FORMAT:
{
  "stacks": [
    {
      "title": "Workout Title",
      "description": "Brief description",
      "exercises": [
        {
          "name": "Exercise Name",
          "category": {
            "type": "weightTraining",
            "details": {
              "sets": 3,
              "reps": ["8","10"],
              "weight": 0,
              "screenTime": 0
            }
          }
        }
      ]
    }
  ]
}

RULES:
- Return ONLY valid JSON
- No comments or markdown
- Exactly ${i} stacks
- Only use listed exercises
- Keep descriptions under 100 characters`;console.log("Generating program with",i,"workouts");try{let e=await this.sendPrompt(u),t=e.replace(/```json/g,"").replace(/```/g,"").replace(/[\u201C\u201D]/g,'"').replace(/&quot;/g,'"').replace(/\n/g,"").replace(/\r/g,"").replace(/\t/g,"").replace(/\\/g,"").trim();if(!t.startsWith("{")||!t.endsWith("}"))throw Error("Invalid JSON structure");try{let e=JSON.parse(t);if(!e.stacks||!Array.isArray(e.stacks))throw Error("Invalid response structure - missing stacks array");if(e.stacks.length!==i)throw Error(`Expected ${i} stacks, but got ${e.stacks.length}`);return e.stacks.forEach((e,t)=>{if(!e.title||!e.description||!Array.isArray(e.exercises))throw Error(`Invalid stack structure at index ${t}`);e.exercises.forEach((e,s)=>{if(!e.name||!e.category?.details?.reps)throw Error(`Invalid exercise structure at stack ${t}, exercise ${s}`)})}),e}catch(s){throw console.error("JSON Parse Error:",s),console.error("Raw Response:",e),console.error("Cleaned Response:",t),Error("Failed to parse AI response")}}catch(e){throw console.error("Generation Error:",e),Error("Failed to generate workout round")}}calculateNumberOfWorkouts(e,t){return Math.ceil((t.getTime()-e.getTime())/864e5)+1}}let C=e=>{let t=Math.random().toString(36).substring(2,15),s=Date.now().toString(36);return e?`${e}-${s}-${t}`:`${s}-${t}`};(r=a||(a={})).together="together",r.locked="locked";let S=e=>{let{setChallengeData:t,currentChallengeData:s,selectedStacks:r,onRemoveStack:a,viewModel:i}=e,{startDate:o,endDate:u,challengeName:x,challengeDesc:h,roundType:m,pinCode:p}=s,g=(0,n.useRef)(null),f=(0,n.useRef)(null);return new Intl.DateTimeFormat("en-US",{dateStyle:"medium"}),(0,n.useEffect)(()=>{"locked"===m&&setTimeout(()=>{f.current&&f.current.scrollIntoView({behavior:"smooth",block:"center"})},100)},[m]),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-semibold text-white text-center mb-2",children:"Create a Round"}),(0,l.jsx)("p",{className:"text-zinc-400 text-center text-sm mb-8",children:"Rounds are structured training programs that guide you through a series of Stacks over time."}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("label",{className:"text-sm text-zinc-400 mb-2 block",children:"Round Name"}),(0,l.jsx)("input",{type:"text",value:x,onChange:e=>t(o,u,e.target.value,h,m,p),placeholder:"Add a name for your round",className:"w-full p-3 bg-zinc-900/50 rounded-lg border border-zinc-700/50  text-white placeholder:text-zinc-600 focus:border-[#E0FE10] focus:outline-none transition-all"})]}),(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("label",{className:"text-sm text-zinc-400 mb-2 block",children:"Description"}),(0,l.jsx)("textarea",{value:h,onChange:e=>t(o,u,x,e.target.value,m,p),placeholder:"Add a description for your round",rows:3,className:"w-full p-3 bg-zinc-900/50 rounded-lg border border-zinc-700/50  text-white placeholder:text-zinc-600  focus:border-[#E0FE10] focus:outline-none transition-all resize-none"})]}),(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("label",{className:"text-sm text-zinc-400 mb-2 block",children:"Selected Stacks"}),0===r.length?(0,l.jsxs)("div",{className:"p-4 rounded-lg bg-zinc-900/50 border border-zinc-700/50 text-center",children:[(0,l.jsx)("p",{className:"text-zinc-400",children:"No stacks selected yet"}),(0,l.jsx)("p",{className:"text-zinc-500 text-sm mt-1",children:"Select stacks to add them to your round"})]}):(0,l.jsx)("div",{className:"space-y-2",children:r.map(e=>(0,l.jsx)("div",{className:"border border-zinc-700/50 rounded-lg",children:(0,l.jsx)(v.kg,{workout:e,gifUrls:e.exercises?.map(e=>e.exercise?.videos?.[0]?.gifURL||"")||[],isChallengeEnabled:!1,onPrimaryAction:()=>a(e.roundWorkoutId||e.id)},e.roundWorkoutId||e.id)}))})]}),(0,l.jsxs)("div",{ref:g,className:"mb-8",children:[(0,l.jsx)("label",{className:"text-sm text-zinc-400 mb-2 block",children:"Round Type"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("button",{onClick:()=>t(o,u,x,h,"together",p),className:`p-4 rounded-lg flex flex-col items-center ${"together"===m?"bg-[#E0FE10] text-black":"bg-zinc-900/50 border border-zinc-700/50 text-zinc-400"}`,children:[(0,l.jsx)(c.Z,{className:"h-5 w-5 mb-2"}),(0,l.jsx)("span",{className:"font-medium text-sm",children:"Together"}),(0,l.jsx)("span",{className:"text-xs mt-1",children:"Train with the community"})]}),(0,l.jsxs)("button",{onClick:()=>t(o,u,x,h,"locked",p),className:`p-4 rounded-lg flex flex-col items-center ${"locked"===m?"bg-[#E0FE10] text-black":"bg-zinc-900/50 border border-zinc-700/50 text-zinc-400"}`,children:[(0,l.jsx)(d,{className:"h-5 w-5 mb-2"}),(0,l.jsx)("span",{className:"font-medium text-sm",children:"Private"}),(0,l.jsx)("span",{className:"text-xs mt-1",children:"Invite-only training"})]})]})]}),(0,l.jsxs)("div",{className:`mb-20 ${"locked"===m?"mb-4":"mb-40"}`,children:[(0,l.jsx)("label",{className:"text-sm text-zinc-400 mb-2 block",children:"Round Dates"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-xs text-zinc-500 block mb-1",children:"Start Date"}),(0,l.jsx)("input",{type:"date",value:o.toISOString().split("T")[0],onChange:e=>t(new Date(e.target.value),u,x,h,m,p),className:"w-full p-3 rounded-lg bg-zinc-900/50 border border-zinc-700/50  text-white placeholder:text-zinc-600 focus:border-[#E0FE10] focus:outline-none transition-all [color-scheme:dark]"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-xs text-zinc-500 block mb-1",children:"End Date"}),(0,l.jsx)("input",{type:"date",value:u.toISOString().split("T")[0],min:o.toISOString().split("T")[0],onChange:e=>t(o,new Date(e.target.value),x,h,m,p),className:"w-full p-3 rounded-lg bg-zinc-900/50 border border-zinc-700/50  text-white placeholder:text-zinc-600 focus:border-[#E0FE10] focus:outline-none transition-all [color-scheme:dark]"})]})]})]}),"locked"===m&&(0,l.jsxs)("div",{className:"mb-40",children:[(0,l.jsx)("label",{htmlFor:"pinCode",className:"text-sm text-zinc-400 mb-2 block",children:"PIN Code"}),(0,l.jsx)("input",{ref:f,id:"pinCode",type:"text",maxLength:9,minLength:9,value:p,onChange:e=>t(o,u,x,h,m,e.target.value),placeholder:"Set 9-digit PIN",className:"w-full p-3 rounded-lg bg-zinc-900/50 border border-zinc-700/50  text-white placeholder:text-zinc-600 focus:border-[#E0FE10] focus:outline-none transition-all"})]})]})},I=e=>{let{challengeData:t,setChallengeData:s,viewModel:r}=e,[a,o]=(0,n.useState)(""),[N,z]=(0,n.useState)([]),[E,I]=(0,n.useState)([]),[T,$]=(0,n.useState)(!1),[R,F]=(0,n.useState)(""),[M,A]=(0,n.useState)([]),[Z,U]=(0,n.useState)("preferences"),[L,O]=(0,n.useState)([]),[W,P]=(0,n.useState)([]),[q,G]=(0,n.useState)([]),[_,H]=(0,n.useState)(!1),[V,J]=(0,n.useState)(null),Q=(0,i.useRouter)();(0,n.useEffect)(()=>{(async()=>{try{await b.$.fetchExercises(),G(b.$.allExercises)}catch(e){console.error("Error fetching exercises:",e)}})()},[]),(0,n.useEffect)(()=>{(async()=>{try{let e=await g.W4.fetchUserStacks();z(e)}catch(e){console.error("Error fetching stacks:",e)}})()},[]);let B=N.filter(e=>e.title.toLowerCase().includes(a.toLowerCase())),Y=e=>{I(t=>{if(!t.some(t=>t.id===e.id))return[...t,new w.oQ({...e,roundWorkoutId:e.id})];{let s=t.filter(t=>t.id===e.id);return[...t,new w.oQ({...e,roundWorkoutId:`${e.id}-${s.length+1}`})]}})},X=()=>0!==t.challengeName.trim().length&&0!==t.challengeDesc.trim().length&&!(t.endDate<=t.startDate)&&("locked"!==t.roundType||9===t.pinCode.length)&&0!==E.length,K=(e,t,s)=>{let r=t.find(t=>t.name.toLowerCase()===e.name.toLowerCase());if(!r)return console.warn(`Exercise not found in database: ${e.name}`),null;let a=s.find(t=>t.name.toLowerCase()===e.name.toLowerCase()),l={type:"weightTraining",details:{reps:e.category.details.reps,sets:e.category.details.sets,weight:e.category.details.weight,screenTime:e.category.details.screenTime||45,selectedVideo:a?.videos?.[0]||r.videos?.[0]||null}};return console.log("AI Exercise Details:",e.category.details),console.log("Final Category Details:",l.details),new j.Pt({id:C(),exercise:r,exerciseName:e.name,isMissing:!1,groupId:0,category:l,notes:"",isSplit:!1,closestMatch:[]})},ee=async()=>{try{H(!0);let s=D.getInstance(),r=(await Promise.all(L.map(async e=>await b.$.getExercisesByAuthor(e)))).flat(),a=W.map(e=>e.name),l=["Include rest days"].filter(e=>M.includes(e)),n=await s.generateRound(a,R,l,r,q,t.startDate,t.endDate);console.log("Generated round data:",n);var e=[];for(let t of n.stacks)try{let s=t.exercises.map(e=>{try{return K(e,q,r)}catch(t){return console.warn(`Skipping exercise ${e.name}: ${t}`),null}}).filter(e=>null!==e);if(s.length>0){let{workout:r,exerciseLogs:a}=await f.G.formatWorkoutAndInitializeLogs(s,g.W4.currentUser?.id);r.title=t.title,r.description=`${t.description} (${s.length} exercises)`,r.workoutStatus=w.Z0.Archived;let l=await g.W4.createStack(r,a);console.log("Created individual stack:",l),l&&e.push(l)}else console.warn(`Skipping stack "${t.title}" as no valid exercises were found`)}catch(e){console.error("Error creating stack:",t.title,e);continue}if(console.log("All created stacks:",e),0===e.length)throw Error("No stacks were successfully created");let i=new Date,c=g.W4.currentUser;if(!c?.id)throw Error("No user logged in");let o=new w.tv({id:"",title:t.challengeName,subtitle:t.challengeDesc,participants:[],status:w.Dj.Draft,startDate:t.startDate,endDate:t.endDate,createdAt:i,updatedAt:i}),d=new w.No({id:"",title:t.challengeName,subtitle:t.challengeDesc,pin:t.pinCode,challenge:o,sweatlistIds:e.map((e,t)=>({id:e.id,sweatlistAuthorId:c.id,sweatlistName:e.title,order:t+1})),ownerId:[c.id],participants:[],privacy:t.roundType,createdAt:i,updatedAt:i});console.log("Collection metadata:",{title:d.title,subtitle:d.subtitle,startDate:d.challenge?.startDate,endDate:d.challenge?.endDate,type:d.privacy,pin:d.pin});let u=await f.G.updateCollection(d);console.log("Created collection:",u),u&&Q.push(`/round/${u.id}`)}catch(e){console.error("Error in handleGenerateAIRound:",e),J(e instanceof Error?e.message:"Failed to generate workout round. Please try again.")}finally{H(!1)}},et=async()=>{if(X())try{let e=new Date,s=g.W4.currentUser;if(!s?.id)throw Error("No user logged in");let r=new w.tv({id:"",title:t.challengeName,subtitle:t.challengeDesc,participants:[],status:w.Dj.Draft,startDate:t.startDate,endDate:t.endDate,createdAt:e,updatedAt:e}),a=new w.No({id:"",title:t.challengeName,subtitle:t.challengeDesc,pin:t.pinCode,challenge:r,sweatlistIds:E.map((e,t)=>({id:e.id,sweatlistAuthorId:s.id,sweatlistName:e.title,order:t+1})),ownerId:[s.id],participants:[],privacy:"locked"===t.roundType?"locked":"together",createdAt:e,updatedAt:e}),l=await f.G.updateCollection(a);console.log("The collection is: ",l),l&&Q.push(`/round/${l.id}`)}catch(e){console.error("Error creating round:",e),J(e instanceof Error?e.message:"Failed to generate workout round. Please try again.")}};return(0,l.jsxs)("div",{className:"h-screen flex justify-center gap-6 bg-zinc-900 p-6",children:[V&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:(0,l.jsx)("div",{className:"bg-zinc-900 p-8 rounded-2xl shadow-xl max-w-md w-full mx-4",children:(0,l.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,l.jsx)("div",{className:"h-12 w-12 rounded-full bg-red-500/10 flex items-center justify-center",children:(0,l.jsx)(u.Z,{className:"h-6 w-6 text-red-500"})}),(0,l.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Generation Failed"}),(0,l.jsx)("p",{className:"text-zinc-400 text-center",children:V}),(0,l.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,l.jsx)("button",{onClick:()=>J(null),className:"flex-1 px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg transition-colors",children:"Cancel"}),(0,l.jsx)("button",{onClick:()=>{J(null),ee()},className:"flex-1 px-4 py-2 bg-[#E0FE10] hover:bg-[#E0FE10]/90 text-black rounded-lg transition-colors",children:"Try Again"})]})]})})}),_&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:(0,l.jsx)("div",{className:"bg-zinc-900 p-8 rounded-2xl shadow-xl max-w-md w-full mx-4",children:(0,l.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#E0FE10]"}),(0,l.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Generating Round"}),(0,l.jsx)("p",{className:"text-zinc-400 text-center",children:"Creating your personalized training program using AI. This may take a moment..."})]})})}),(0,l.jsx)("div",{className:"fixed top-6 right-6 z-10",children:(0,l.jsxs)("button",{onClick:()=>$(!T),className:"group relative px-4 py-2 rounded-lg bg-black/20 backdrop-blur-sm  border border-zinc-800 hover:border-[#E0FE10]/50 transition-all",children:[(0,l.jsx)("div",{className:"absolute inset-0 rounded-lg bg-gradient-to-r from-[#E0FE10] via-purple-500 to-[#E0FE10] opacity-20  blur-xl group-hover:opacity-30 transition-opacity"}),(0,l.jsxs)("div",{className:"relative flex items-center gap-2",children:[(0,l.jsx)(x,{className:"w-5 h-5 text-[#E0FE10]"}),(0,l.jsx)("span",{className:"text-white font-medium",children:"AI Round"})]})]})}),(0,l.jsxs)("div",{className:"w-[600px] bg-zinc-800 rounded-xl shadow-xl relative flex flex-col",children:[(0,l.jsx)("div",{className:"h-full overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-zinc-700 scrollbar-track-transparent hover:scrollbar-thumb-zinc-600",children:T?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-semibold text-white text-center mb-2",children:"Create AI Round"}),(0,l.jsx)("p",{className:"text-zinc-400 text-center text-sm",children:"Describe the type of round that you want to create. For example, a round that focuses on improving the back and shoulders, or a round that focuses on legs. Be as descriptive as possible for best results."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm text-zinc-400 mb-2 block",children:"Round Title"}),(0,l.jsx)("input",{type:"text",value:t.challengeName,onChange:e=>s(t.startDate,t.endDate,e.target.value,t.challengeDesc,t.roundType,t.pinCode),placeholder:"Name your round",className:"w-full p-3 bg-zinc-900/50 rounded-lg border border-zinc-700/50  text-white placeholder:text-zinc-600 focus:border-[#E0FE10] focus:outline-none transition-all"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm text-zinc-400 mb-2 block",children:"Round Description"}),(0,l.jsx)("textarea",{value:t.challengeDesc,onChange:e=>s(t.startDate,t.endDate,t.challengeName,e.target.value,t.roundType,t.pinCode),placeholder:"Describe the purpose, or goals of this round(Members will see this)",rows:4,className:"w-full p-3 bg-zinc-900/50 rounded-lg border border-zinc-700/50  text-white placeholder:text-zinc-600  focus:border-[#E0FE10] focus:outline-none transition-all resize-none"})]}),(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("label",{className:"text-sm text-zinc-400 mb-2 block",children:"Round Type"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("button",{onClick:()=>s(t.startDate,t.endDate,t.challengeName,t.challengeDesc,"together",t.pinCode),className:`p-4 rounded-lg flex flex-col items-center ${"together"===t.roundType?"bg-[#E0FE10] text-black":"bg-zinc-900/50 border border-zinc-700/50 text-zinc-400"}`,children:[(0,l.jsx)(c.Z,{className:"h-5 w-5 mb-2"}),(0,l.jsx)("span",{className:"font-medium text-sm",children:"Together"}),(0,l.jsx)("span",{className:"text-xs mt-1",children:"Train with the community"})]}),(0,l.jsxs)("button",{onClick:()=>s(t.startDate,t.endDate,t.challengeName,t.challengeDesc,"locked",t.pinCode),className:`p-4 rounded-lg flex flex-col items-center ${"locked"===t.roundType?"bg-[#E0FE10] text-black":"bg-zinc-900/50 border border-zinc-700/50 text-zinc-400"}`,children:[(0,l.jsx)(d,{className:"h-5 w-5 mb-2"}),(0,l.jsx)("span",{className:"font-medium text-sm",children:"Private"}),(0,l.jsx)("span",{className:"text-xs mt-1",children:"Invite-only training"})]})]})]}),(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("label",{className:"text-sm text-zinc-400 mb-2 block",children:"Round Dates"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-xs text-zinc-500 block mb-1",children:"Start Date"}),(0,l.jsx)("input",{type:"date",value:t.startDate.toISOString().split("T")[0],onChange:e=>s(new Date(e.target.value),t.endDate,t.challengeName,t.challengeDesc,t.roundType,t.pinCode),className:"w-full p-3 rounded-lg bg-zinc-900/50 border border-zinc-700/50  text-white placeholder:text-zinc-600 focus:border-[#E0FE10] focus:outline-none transition-all [color-scheme:dark]"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-xs text-zinc-500 block mb-1",children:"End Date"}),(0,l.jsx)("input",{type:"date",value:t.endDate.toISOString().split("T")[0],min:t.startDate.toISOString().split("T")[0],onChange:e=>s(t.startDate,new Date(e.target.value),t.challengeName,t.challengeDesc,t.roundType,t.pinCode),className:"w-full p-3 rounded-lg bg-zinc-900/50 border border-zinc-700/50  text-white placeholder:text-zinc-600 focus:border-[#E0FE10] focus:outline-none transition-all [color-scheme:dark]"})]})]})]}),"locked"===t.roundType&&(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("label",{className:"text-sm text-zinc-400 mb-2 block",children:"PIN Code"}),(0,l.jsx)("input",{type:"text",maxLength:9,minLength:9,value:t.pinCode,onChange:e=>s(t.startDate,t.endDate,t.challengeName,t.challengeDesc,t.roundType,e.target.value),placeholder:"Set 9-digit PIN",className:"w-full p-3 rounded-lg bg-zinc-900/50 border border-zinc-700/50  text-white placeholder:text-zinc-600 focus:border-[#E0FE10] focus:outline-none transition-all"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm text-zinc-400 mb-2 block",children:"Round Prompt - AI will use this description create your workout."}),(0,l.jsx)("textarea",{value:R,onChange:e=>F(e.target.value),placeholder:"E.g., Create a 4-week strength program focused on building muscle in my shoulders and upper back.  I want to train 3 times per week with progressive overload. Include compound movements like rows and presses,  and isolation work for rear delts and traps. I prefer moderate weight with 8-12 reps for hypertrophy.",rows:10,className:"w-full p-3 bg-zinc-900/50 rounded-lg border border-zinc-700/50  text-white placeholder:text-zinc-600  focus:border-[#E0FE10] focus:outline-none transition-all resize-none"})]}),(0,l.jsx)("button",{className:"w-full py-4 bg-gradient-to-r from-[#E0FE10] via-purple-500 to-[#E0FE10]  text-black rounded-lg font-semibold hover:opacity-90 transition-opacity",onClick:ee,children:(0,l.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,l.jsx)(x,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"Generate Round"})]})}),(0,l.jsx)("button",{onClick:()=>$(!1),className:"w-full py-2 text-zinc-400 hover:text-white transition-colors text-sm",children:"Cancel and return to manual creation"})]}):(0,l.jsx)(S,{setChallengeData:s,currentChallengeData:t,selectedStacks:E,onRemoveStack:e=>{I(t=>t.filter(t=>t.roundWorkoutId!==e).map((e,t)=>new w.oQ({...e,roundWorkoutId:0===t?e.id:`${e.id}-${t+1}`})))},viewModel:r})}),!T&&(0,l.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-6 bg-zinc-800 border-t border-zinc-700 rounded-b-xl",children:(0,l.jsx)("button",{className:"w-full py-4 bg-[#E0FE10] text-black rounded-lg font-semibold hover:opacity-90 transition-opacity",onClick:et,children:"Create Round"})})]}),(0,l.jsx)("div",{className:"w-[550px] bg-zinc-800 rounded-xl shadow-xl relative flex flex-col",children:T?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"px-6 pt-6",children:(0,l.jsxs)("div",{className:"flex space-x-1 bg-zinc-900/50 p-1 rounded-lg",children:[(0,l.jsxs)("button",{onClick:()=>U("preferences"),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-all
                    ${"preferences"===Z?"bg-[#E0FE10] text-black":"text-zinc-400 hover:text-white"}`,children:[(0,l.jsx)(h,{size:16}),(0,l.jsx)("span",{children:"AI Preferences"})]}),(0,l.jsxs)("button",{onClick:()=>U("moves"),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-all
                    ${"moves"===Z?"bg-[#E0FE10] text-black":"text-zinc-400 hover:text-white"}`,children:[(0,l.jsx)(m.Z,{size:16}),(0,l.jsx)("span",{children:"Must-Include Moves"})]}),(0,l.jsxs)("button",{onClick:()=>U("creators"),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-all
                    ${"creators"===Z?"bg-[#E0FE10] text-black":"text-zinc-400 hover:text-white"}`,children:[(0,l.jsx)(p.Z,{size:16}),(0,l.jsx)("span",{children:"Preferred Creators"})]})]})}),(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-zinc-700 scrollbar-track-transparent",children:["preferences"===Z&&(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"bg-zinc-900/50 rounded-lg p-4 border border-zinc-700/50",children:[(0,l.jsx)("h3",{className:"font-medium text-white mb-2",children:"AI Preferences"}),(0,l.jsx)("p",{className:"text-sm text-zinc-400",children:"Additional preferences to help generate your perfect round."})]}),(0,l.jsx)("div",{className:"space-y-3",children:(0,l.jsxs)("label",{className:"flex items-center bg-zinc-900/30 p-3 rounded-lg cursor-pointer hover:bg-zinc-900/50 transition-colors",children:[(0,l.jsx)("input",{type:"checkbox",checked:M.includes("Include rest days"),onChange:e=>{e.target.checked?A(e=>[...e,"Include rest days"]):A(e=>e.filter(e=>"Include rest days"!==e))},className:"form-checkbox text-[#E0FE10]"}),(0,l.jsx)("span",{className:"ml-2 text-sm text-zinc-300",children:"Include rest days"})]})})]}),"moves"===Z&&(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("input",{type:"text",placeholder:"Search moves to include...",className:"w-full p-4 bg-zinc-900 text-white rounded-lg border border-zinc-700 focus:border-[#E0FE10] transition-colors"}),(0,l.jsx)(y.c,{userVideos:q,multiSelection:!0,selectedExercises:W,onToggleSelection:e=>{P(t=>t.some(t=>t.id===e.id)?t.filter(t=>t.id!==e.id):[...t,e])},onSelectVideo:e=>{P(t=>t.some(t=>t.id===e.id)?t.filter(t=>t.id!==e.id):[...t,e])}})]}),"creators"===Z&&(0,l.jsx)("div",{className:"space-y-4",children:(0,l.jsx)(k,{selectedUserIds:L,onUserSelect:e=>{O(t=>[...t,e])},onUserRemove:e=>{O(t=>t.filter(t=>t!==e))}})})]}),(0,l.jsx)("div",{className:"p-4 border-t border-zinc-700/50 bg-zinc-900/50",children:(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsxs)("span",{className:"text-zinc-400",children:[W.length," moves selected"]}),(0,l.jsxs)("span",{className:"text-zinc-400",children:[L.length," creators selected"]})]})})]}):(0,l.jsx)("div",{className:"h-full overflow-y-auto p-6 pb-24 scrollbar-thin scrollbar-thumb-zinc-700 scrollbar-track-transparent",children:(0,l.jsxs)("div",{className:"h-full overflow-y-auto p-6 pb-24 scrollbar-thin scrollbar-thumb-zinc-700 scrollbar-track-transparent",children:[(0,l.jsx)("h2",{className:"text-white text-2xl font-bold mb-4",children:"Your Stacks"}),(0,l.jsx)("input",{type:"text",placeholder:"Search stacks...",value:a,onChange:e=>o(e.target.value),className:"w-full p-4 bg-zinc-900 text-white rounded-lg border border-zinc-700 focus:border-[#E0FE10] transition-colors mb-4"}),0===B.length?(0,l.jsx)("p",{className:"text-center text-zinc-500",children:"No stacks found"}):(0,l.jsx)("div",{className:"space-y-4",children:B.map(e=>(0,l.jsx)("div",{className:"border border-zinc-700/50 rounded-lg",children:(0,l.jsx)(v.kg,{workout:e,gifUrls:e.exercises?.map(e=>e.exercise?.videos?.[0]?.gifURL||"")||[],isChallengeEnabled:!1,onPrimaryAction:()=>Y(e)},e.id)}))})]})})})]})};var T=()=>{let[e,t]=(0,n.useState)({startDate:new Date,endDate:new Date(new Date().getTime()+864e5),challengeName:"",challengeDesc:"",roundType:"together",pinCode:""}),[s,r]=(0,n.useState)([]),a=(e,s,r,a,l,n)=>{t({startDate:e,endDate:s,challengeName:r,challengeDesc:a,roundType:l,pinCode:n})},i={appCoordinator:{showFloatingTextfield:()=>{},closeFloatingMenu:()=>{},closeModals:()=>{}},validateChallengeInput:()=>!0,setChallenge:()=>{}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"block lg:hidden",children:(0,l.jsxs)("div",{className:"w-full max-w-[500px] mx-auto bg-zinc-800 -xl relative flex flex-col min-h-screen",children:[(0,l.jsx)("div",{className:"h-full overflow-y-auto p-6 scrollbar-thin scrollbar-thumb-zinc-700 scrollbar-track-transparent hover:scrollbar-thumb-zinc-600",children:(0,l.jsx)(S,{setChallengeData:a,currentChallengeData:e,selectedStacks:s,onRemoveStack:e=>{r(s.filter(t=>t.id!==e))},viewModel:i})}),(0,l.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-6 bg-zinc-800 border-t border-zinc-700 rounded-b-xl",children:(0,l.jsx)("button",{className:"w-full py-4 bg-[#E0FE10] text-black rounded-lg font-semibold hover:opacity-90 transition-opacity",onClick:()=>{i.validateChallengeInput(e.startDate,e.endDate,e.challengeName,e.challengeDesc,e.roundType,e.pinCode)&&(i.setChallenge(e.startDate,e.endDate,e.challengeName,e.challengeDesc,e.roundType,e.pinCode),i.appCoordinator.closeModals())},children:"Create Round"})})]})}),(0,l.jsx)("div",{className:"hidden lg:block",children:(0,l.jsx)(I,{challengeData:e,setChallengeData:a,viewModel:i})})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=22)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[315],{2398:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/createStack",function(){return s(6523)}])},2171:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1134).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},5432:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1134).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},3050:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(1134).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},494:function(e,t,s){"use strict";s.d(t,{c:function(){return a}});var r=s(5893),i=s(3050);let a=e=>{let{userVideos:t,onSelectVideo:s,multiSelection:a=!1,selectedExercises:c=[],onToggleSelection:n}=e,l=new Set,o=t.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()).filter(e=>{let t=e.videos[0]?.gifURL;return!l.has(t||"")&&(l.add(t||""),!0)});return 0===o.length?(0,r.jsx)("div",{className:"flex items-center justify-center h-64 text-zinc-500 text-lg",children:"No moves available"}):(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 p-4",children:o.map(e=>{let t=a&&c.some(t=>t.id===e.id);return(0,r.jsxs)("div",{onClick:()=>{a&&n?n(e):s(e)},className:"relative cursor-pointer group",children:[(0,r.jsxs)("div",{className:"relative rounded-lg overflow-hidden aspect-square",children:[(0,r.jsx)("img",{src:e.videos[0]?.gifURL,alt:e.name,className:"w-full h-full object-cover transition-transform duration-200 group-hover:scale-105"}),a&&t&&(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,r.jsx)(i.Z,{className:"text-[#E0FE10]",size:32})})]}),(0,r.jsx)("p",{className:"mt-2 text-white text-sm font-medium truncate",children:e.name})]},`${e.id}-${new Date(e.createdAt).getTime()}`)})})}},6523:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var r=s(5893),i=s(7294),a=s(1163),c=s(5432),n=s(2171),l=s(1134);let o=(0,l.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),d=(0,l.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var u=s(9073),x=s(8496),h=s(6045),g=s(3530);let m=e=>{let{selectedUserId:t,onUserSelect:s}=e,[a,c]=(0,i.useState)(!1),[l,o]=(0,i.useState)([]),[d,u]=(0,i.useState)(""),[x,g]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{try{let e=await h.W4.getAllUsers();o(e),g(!1)}catch(e){console.error("Error fetching users:",e),g(!1)}})()},[]);let m=l.filter(e=>e.username.toLowerCase().includes(d.toLowerCase())),p=l.find(e=>e.id===t);return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>c(!a),className:"w-full p-4 bg-zinc-800 text-white rounded-lg border border-zinc-700 flex justify-between items-center",children:[(0,r.jsx)("span",{children:t?p?.username:"All Users"}),(0,r.jsx)(n.Z,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&(0,r.jsxs)("div",{className:"absolute mt-2 w-full bg-zinc-800 border border-zinc-700 rounded-lg shadow-lg z-20",children:[(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),placeholder:"Search users...",className:"w-full p-2 bg-zinc-700 text-white rounded-md"})}),(0,r.jsxs)("div",{className:"max-h-60 overflow-y-auto",children:[(0,r.jsx)("button",{onClick:()=>{s(null),c(!1)},className:`w-full p-3 text-left hover:bg-zinc-700 ${t?"text-white":"bg-[#E0FE10] text-black"}`,children:"All Users"}),x?(0,r.jsx)("div",{className:"p-3 text-zinc-400",children:"Loading users..."}):m.map(e=>(0,r.jsx)("button",{onClick:()=>{s(e.id),c(!1)},className:`w-full p-3 text-left hover:bg-zinc-700 ${t===e.id?"bg-[#E0FE10] text-black":"text-white"}`,children:e.username},e.id))]})]})]})};var p=s(494);let b=e=>{let{appCoordinator:t,exerciseDescription:s,workoutCaregory:a,returnExerciseDescription:l}=e,o=(s?.exercise?.videos||[]).map(e=>e&&e.exerciseId?e:g.Ax.fromFirebase(e))||[],[d,u]=(0,i.useState)(!1),[x,h]=(0,i.useState)(s?.exerciseName||""),[m]=(0,i.useState)(o),[p,b]=(0,i.useState)(s?.isSplit||!1),[y,f]=(0,i.useState)(s?.category?.type==="weightTraining"&&s.category.details?.reps.join(",")||""),[j,v]=(0,i.useState)(s?.category?.type==="weightTraining"&&`${s.category.details?.sets}`||""),[w,N]=(0,i.useState)(s?.category?.type==="weightTraining"&&`${s.category.details?.weight}`||""),[z,k]=(0,i.useState)(s?.category?.type==="cardio"&&`${s.category.details?.bpm}`||""),[E,S]=(0,i.useState)(s?.category?.type==="cardio"&&`${s.category.details?.duration}`||""),[C,T]=(0,i.useState)((s?.category?.type==="weightTraining"?s.category.details?.screenTime:s?.category?.type==="cardio"?s.category.details?.screenTime:0)||0),[D]=(0,i.useState)(s?.category?.type==="weightTraining"&&s?.category?.details?.screenTime!==0||s?.category?.type==="cardio"&&s?.category?.details?.screenTime!==0),[F,A]=(0,i.useState)(null),[U,$]=(0,i.useState)(s?.notes||""),[_]=(0,i.useState)("Weight"),[Z,L]=(0,i.useState)(s),V=e=>{let t={...Z,...e};L(t),l(t)},M=e=>{v(e),Z&&Z.category?.type==="weightTraining"&&V({category:{type:"weightTraining",details:{...Z.category.details||{reps:[],sets:3,weight:0,screenTime:0},sets:parseInt(e,10)||3}}})},W=e=>{f(e),Z&&Z.category?.type==="weightTraining"&&V({category:{type:"weightTraining",details:{...Z.category.details||{reps:[],sets:3,weight:0,screenTime:0},reps:e.split(",")}}})},I=e=>{N(e),Z&&Z.category?.type==="weightTraining"&&V({category:{type:"weightTraining",details:{...Z.category.details||{reps:[],sets:3,weight:0,screenTime:0},weight:parseFloat(e)||0}}})},R=e=>{let t=parseFloat(e)||0;T(t),Z&&(Z.category?.type==="weightTraining"?V({category:{type:"weightTraining",details:{...Z.category.details||{reps:[],sets:3,weight:0,screenTime:0},screenTime:t}}}):Z.category?.type==="cardio"&&V({category:{type:"cardio",details:{...Z.category.details||{duration:60,bpm:140,calories:0,screenTime:0},screenTime:t}}}))},q=e=>{$(e),V({notes:e})};return(0,r.jsxs)("div",{className:"p-4 bg-zinc-900 rounded-lg border border-zinc-800 my-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white",children:x}),(0,r.jsx)("button",{onClick:()=>u(!d),className:"text-zinc-400 hover:text-white transition-colors flex items-center gap-2",children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"Collapse"}),(0,r.jsx)(c.Z,{size:20})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:U?"Edit Details":"Add Details"}),(0,r.jsx)(n.Z,{size:20})]})})]}),d&&(0,r.jsxs)("form",{className:"mt-4 space-y-6",children:[(0,r.jsx)("div",{className:"border-t border-zinc-800 pt-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-zinc-400 text-sm block mb-2",children:"Sets"}),(0,r.jsx)("input",{type:"number",value:j,onChange:e=>M(e.target.value),className:"w-full p-2 rounded-lg bg-zinc-800 text-white border border-zinc-700 focus:border-[#E0FE10] transition-colors"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-zinc-400 text-sm block mb-2",children:"Reps"}),(0,r.jsx)("input",{type:"text",value:y,onChange:e=>W(e.target.value),className:"w-full p-2 rounded-lg bg-zinc-800 text-white border border-zinc-700 focus:border-[#E0FE10] transition-colors"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-zinc-400 text-sm block mb-2",children:_}),(0,r.jsx)("input",{type:"text",value:w,onChange:e=>I(e.target.value),className:"w-full p-2 rounded-lg bg-zinc-800 text-white border border-zinc-700 focus:border-[#E0FE10] transition-colors"})]})]})}),(0,r.jsx)("div",{className:"border-t border-zinc-800 pt-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("label",{className:"text-zinc-400 text-sm",children:"Screen Time (sec)"}),(0,r.jsx)("input",{type:"number",value:C,onChange:e=>R(e.target.value),className:"w-32 p-2 rounded-lg bg-zinc-800 text-white border border-zinc-700 focus:border-[#E0FE10] transition-colors"})]})}),(0,r.jsxs)("div",{className:"border-t border-zinc-800 pt-4",children:[(0,r.jsx)("label",{className:"text-zinc-400 text-sm block mb-2",children:"Notes"}),(0,r.jsx)("textarea",{value:U,onChange:e=>q(e.target.value),className:"w-full p-3 rounded-lg bg-zinc-800 text-white border border-zinc-700 focus:border-[#E0FE10] transition-colors h-24 resize-none",placeholder:"Add notes for this exercise..."})]}),m.length>0&&(0,r.jsxs)("div",{className:"border-t border-zinc-800 pt-4",children:[(0,r.jsx)("label",{className:"text-zinc-400 text-sm block mb-2",children:"Select Video"}),(0,r.jsx)("div",{className:"flex gap-4 overflow-x-auto pb-2",children:m.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>{A(e),Z&&(Z.category?.type==="weightTraining"?V({category:{type:"weightTraining",details:{...Z.category.details||{reps:["12"],sets:3,weight:0,screenTime:0,selectedVideo:null},selectedVideo:e}}}):Z.category?.type==="cardio"&&V({category:{type:"cardio",details:{...Z.category.details||{duration:20,bpm:125,calories:0,screenTime:0,selectedVideo:null},selectedVideo:e}}}))},className:`flex-shrink-0 relative rounded-lg overflow-hidden ${F?.id===e.id?"ring-2 ring-[#E0FE10]":""}`,children:(0,r.jsx)("img",{src:e.gifURL||"/placeholder.gif",alt:"Exercise preview",className:"w-20 h-20 object-cover"})},e.id))})]}),(0,r.jsxs)("div",{className:"border-t border-zinc-800 pt-4 flex items-center justify-between",children:[(0,r.jsx)("label",{className:"text-zinc-400 text-sm",children:"Exercise uses dumbbells"}),(0,r.jsx)("input",{type:"checkbox",checked:p,onChange:e=>{b(e.target.checked),V({isSplit:e.target.checked})},className:"w-5 h-5 accent-[#E0FE10]"})]}),(0,r.jsx)("button",{type:"button",onClick:()=>{u(!1),l(Z)},className:"w-full py-3 bg-[#E0FE10] text-black rounded-lg font-semibold hover:opacity-90 transition-opacity",children:"Save Details"})]})]})},y=e=>{let{stackName:t,setStackName:s,description:i,setDescription:a,exerciseDetails:c,setExerciseDetails:n,useAuthorContent:l,setUseAuthorContent:u,onCreateStack:x,hideAddMoveButton:h=!1}=e;return(0,r.jsxs)("div",{className:"min-h-screen bg-zinc-900",children:[(0,r.jsxs)("div",{className:"relative h-40 bg-zinc-800",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-zinc-900"}),(0,r.jsx)("div",{className:"absolute bottom-6 left-6",children:(0,r.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Create Stack"})})]}),(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("input",{type:"text",value:t,onChange:e=>s(e.target.value),placeholder:"Stack Name",className:"w-full p-4 bg-zinc-800 text-white rounded-lg border border-zinc-700 focus:border-[#E0FE10] transition-colors"}),(0,r.jsx)("textarea",{value:i,onChange:e=>a(e.target.value),placeholder:"Stack Description",className:"w-full p-4 bg-zinc-800 text-white rounded-lg border border-zinc-700 focus:border-[#E0FE10] transition-colors h-32 resize-none"}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 bg-zinc-800 p-4 rounded-lg",children:[(0,r.jsx)("input",{type:"checkbox",checked:l,onChange:()=>u(!l),className:"w-5 h-5 accent-[#E0FE10]"}),(0,r.jsx)("span",{className:"text-zinc-300",children:"Use my fitness content exclusively"})]})]}),(0,r.jsx)("div",{className:"space-y-4",children:c.map((e,t)=>(0,r.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-4",children:[(0,r.jsx)(b,{appCoordinator:null,exerciseDescription:e,workoutCaregory:e.category,returnExerciseDescription:e=>{let s=[...c];s[t]=e,n(s)}}),(0,r.jsxs)("button",{onClick:()=>{n(c.filter(t=>t.exercise.id!==e.exercise.id))},className:"mt-2 flex items-center gap-2 text-red-400 hover:text-red-300 transition-colors",children:[(0,r.jsx)(o,{size:16}),(0,r.jsx)("span",{children:"Remove"})]})]},e.exercise.id))}),!h&&(0,r.jsxs)("button",{className:"flex items-center justify-center gap-2 w-full py-4 bg-zinc-800 text-white rounded-lg hover:bg-zinc-700 transition-colors",children:[(0,r.jsx)(d,{size:20}),(0,r.jsx)("span",{children:"Add Move"})]}),(0,r.jsx)("button",{onClick:x,className:"w-full py-4 bg-[#E0FE10] text-black rounded-lg font-semibold hover:opacity-90 transition-opacity",children:"Create Stack"})]})]})},f=e=>{let[t,s]=(0,i.useState)(""),[a,c]=(0,i.useState)([]),[n,l]=(0,i.useState)([]),[o,d]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{try{await u.$.fetchExercises(),c(u.$.allExercises)}catch(e){console.error("Error fetching exercises:",e)}})()},[]),(0,i.useEffect)(()=>{l(e.exerciseDetails.map(e=>e.exercise))},[e.exerciseDetails]);let x=a.filter(e=>!o||e.author.userId===o).filter(e=>e.name.toLowerCase().includes(t.toLowerCase())),h=t=>{l(s=>{if(s.some(e=>e.id===t.id)){let r=s.filter(e=>e.id!==t.id),i=e.exerciseDetails.filter(e=>e.exercise.id!==t.id);return e.setExerciseDetails(i),r}{let r=[...s,t],i=[...e.exerciseDetails,{exerciseName:t.name,notes:"",exercise:t}];return e.setExerciseDetails(i),r}})};return(0,r.jsxs)("div",{className:"min-h-screen flex",children:[(0,r.jsx)("div",{className:"flex-1 overflow-y-auto bg-zinc-900 border-r border-zinc-800",children:(0,r.jsx)(y,{...e,hideAddMoveButton:!0})}),(0,r.jsxs)("div",{className:"flex-1 bg-zinc-900 p-6 overflow-y-auto",children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-zinc-900 pb-4 z-10 space-y-4",children:[(0,r.jsx)(m,{selectedUserId:o,onUserSelect:d}),(0,r.jsx)("input",{type:"text",placeholder:"Search moves...",value:t,onChange:e=>s(e.target.value),className:"w-full p-4 bg-zinc-800 text-white rounded-lg border border-zinc-700 focus:border-[#E0FE10] transition-colors"})]}),(0,r.jsx)(p.c,{userVideos:x,multiSelection:!0,selectedExercises:n,onToggleSelection:h,onSelectVideo:h})]})]})};var j=()=>{let[e,t]=(0,i.useState)(""),[s,c]=(0,i.useState)(""),[n,l]=(0,i.useState)([]),[o,d]=(0,i.useState)(!1),[u,g]=(0,i.useState)(!1),m=(0,a.useRouter)(),p=async()=>{if(!h.W4.currentUser?.id){console.error("No user ID found");return}if(!e.trim()){console.error("Stack name is required");return}if(0===n.length){console.error("At least one exercise is required");return}g(!0);try{let{workout:t,exerciseLogs:r}=await x.G_.formatWorkoutAndInitializeLogs(n,h.W4.currentUser.id);t.title=e.trim(),t.description=s.trim(),t.useAuthorContent=o,await h.W4.createStack(t,r),m.push(`/workout/${h.W4.currentUser.username}/${t.id}`)}catch(e){console.error("Error creating stack:",e)}finally{g(!1)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"lg:hidden",children:(0,r.jsx)(y,{stackName:e,setStackName:t,description:s,setDescription:c,exerciseDetails:n,setExerciseDetails:l,useAuthorContent:o,setUseAuthorContent:d,onCreateStack:p})}),(0,r.jsx)("div",{className:"hidden lg:block",children:(0,r.jsx)(f,{stackName:e,setStackName:t,description:s,setDescription:c,exerciseDetails:n,setExerciseDetails:l,useAuthorContent:o,setUseAuthorContent:d,onCreateStack:p})}),u&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsx)("div",{className:"bg-zinc-900 p-6 rounded-lg",children:(0,r.jsx)("p",{className:"text-white",children:"Creating your Stack..."})})})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=2398)}),_N_E=e.O()}]);
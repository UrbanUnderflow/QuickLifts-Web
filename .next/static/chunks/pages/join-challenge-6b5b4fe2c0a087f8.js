(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[554],{6766:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/join-challenge",function(){return s(2958)}])},2958:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return d}});var t=s(5893),r=s(7294),l=s(1163),o=s(9586),i=s(7705),c=s(3859),a=s(7333),u=s(6145);function d(){let[e,n]=(0,r.useState)(""),[s,d]=(0,r.useState)(!1),[f,m]=(0,r.useState)(""),[h,g]=(0,r.useState)(!1),[x,p]=(0,r.useState)(!1),b=(0,l.useRouter)();(0,r.useEffect)(()=>{let e=(0,c.Aj)(a.I,async e=>{if(e)try{let n=await i.W4.fetchUserFromFirestore(e.uid);i.W4.currentUser=n,console.log("User data fetched and set:",n),g(!0),p(!1)}catch(e){console.error("Error fetching user data:",e),m("Error loading user data")}else i.W4.currentUser=null,g(!1),p(!0)});return()=>e()},[]);let j=async n=>{if(n.preventDefault(),!e.trim()){m("Username is required");return}try{d(!0),m(""),await o.G.joinChallenge({username:e,challengeId:"cevWHBlBk7VobANRUsmC"}),b.push("/challenge-joined")}catch(e){console.error(e),m(e instanceof Error?e.message:"Failed to join challenge")}finally{d(!1)}};return h?(0,t.jsx)("div",{className:"min-h-screen bg-zinc-900 flex flex-col items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-4xl sm:text-5xl font-bold text-white font-['Thunder'] mb-4",children:"Join Jaidus's Challenge"}),(0,t.jsx)("p",{className:"text-zinc-400 text-lg",children:"30 Days of Shared Progress"})]}),(0,t.jsxs)("form",{onSubmit:j,className:"mt-8 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-zinc-300 mb-2 font-['HK Grotesk']",children:"Username"}),(0,t.jsx)("input",{id:"username",type:"text",value:e,onChange:e=>n(e.target.value),className:"w-full bg-zinc-800 border border-zinc-600 rounded-lg p-3 text-white placeholder-zinc-400 focus:outline-none focus:border-[#E0FE10] focus:ring-1 focus:ring-[#E0FE10] transition-colors",placeholder:"Enter your username"}),f&&(0,t.jsx)("p",{className:"mt-2 text-red-400 text-sm",children:f})]}),(0,t.jsx)("button",{type:"submit",disabled:s,className:`w-full bg-[#E0FE10] text-black font-semibold py-4 px-4 rounded-lg
              hover:bg-[#c8e60e] transition-colors font-['HK Grotesk'] flex items-center justify-center
              ${s?"opacity-50 cursor-not-allowed":""}`,children:s?(0,t.jsx)("div",{className:"w-6 h-6 border-2 border-black border-t-transparent rounded-full animate-spin"}):"Join Challenge"})]}),(0,t.jsx)("div",{className:"text-center mt-4",children:(0,t.jsx)("button",{onClick:()=>b.back(),className:"text-zinc-400 hover:text-[#E0FE10] transition-colors text-sm",children:"← Back"})})]})}):(0,t.jsx)(u.Z,{isVisible:x,onClose:()=>p(!1),onSignInSuccess:e=>{console.log("Sign-in successful:",e),g(!0),p(!1)},onSignInError:e=>{console.error("Sign-in error:",e),alert("Sign-in failed. Please try again.")},onSignUpSuccess:e=>{console.log("Sign-up successful:",e),g(!0),p(!1)},onSignUpError:e=>{console.error("Sign-up error:",e),alert("Sign-up failed. Please try again.")},onQuizComplete:()=>{console.log("Quiz completed successfully")},onQuizSkipped:()=>{console.log("Quiz skipped")}})}}},function(e){e.O(0,[66,9,586,888,774,179],function(){return e(e.s=6766)}),_N_E=e.O()}]);
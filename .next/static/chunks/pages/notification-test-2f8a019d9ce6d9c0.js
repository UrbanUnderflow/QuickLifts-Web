(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[468],{3438:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/notification-test",function(){return n(2888)}])},2888:function(e,t,n){"use strict";n.r(t);var r=n(5893),a=n(7294);t.default=()=>{let[e,t]=(0,a.useState)(""),[n,i]=(0,a.useState)("Test Notification"),[l,s]=(0,a.useState)("This is a test notification."),[o,c]=(0,a.useState)('{"type": "test", "key": "value"}'),[d,u]=(0,a.useState)(null),[h,f]=(0,a.useState)(null),[m,x]=(0,a.useState)(!1),b=async()=>{x(!0),f(null),u(null);try{let t;if(!e.trim())throw Error("FCM Token is required");try{let e=JSON.parse(o);t=Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;if("string"!=typeof n)throw Error(`The value for "${t}" must be a string`);return[t,String(n)]}))}catch(e){if(e instanceof SyntaxError)throw Error("Invalid JSON in custom data field");throw e}let r={fcmToken:e.trim(),payload:{notification:{title:n,body:l},data:t}};console.log("Sending request with body:",JSON.stringify(r,null,2));let a=await fetch("/.netlify/functions/send-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),i=a.headers.get("content-type");if(!i||!i.includes("application/json")){let e=await a.text();throw Error(`Server returned non-JSON response: ${e}`)}let s=await a.json();if(!a.ok)throw Error(s.message||`Server error: ${a.status}`);u(JSON.stringify(s,null,2))}catch(e){f(e instanceof Error?e.message:"An unexpected error occurred"),console.error("Error sending notification:",e)}finally{x(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-zinc-950 flex flex-col items-center justify-center p-4",children:[(0,r.jsx)("h1",{className:"text-white text-2xl mb-6",children:"Test Notification Function"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),b()},className:"w-full max-w-md bg-zinc-900 p-6 rounded-lg",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-white mb-2",children:"FCM Token:"}),(0,r.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:"w-full p-2 bg-zinc-800 text-white rounded",required:!0,placeholder:"Enter FCM token"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-white mb-2",children:"Notification Title:"}),(0,r.jsx)("input",{type:"text",value:n,onChange:e=>i(e.target.value),className:"w-full p-2 bg-zinc-800 text-white rounded",required:!0,placeholder:"Enter notification title"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-white mb-2",children:"Notification Body:"}),(0,r.jsx)("input",{type:"text",value:l,onChange:e=>s(e.target.value),className:"w-full p-2 bg-zinc-800 text-white rounded",required:!0,placeholder:"Enter notification body"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-white mb-2",children:"Custom Data (JSON):"}),(0,r.jsx)("textarea",{value:o,onChange:e=>c(e.target.value),rows:5,className:"w-full p-2 bg-zinc-800 text-white rounded",placeholder:"Enter valid JSON data"})]}),(0,r.jsx)("button",{type:"submit",disabled:m,className:`w-full py-2 rounded-lg font-bold ${m?"bg-gray-500 cursor-not-allowed":"bg-[#E0FE10] text-black hover:bg-[#d4f00f]"}`,children:m?"Sending...":"Send Notification"})]}),h&&(0,r.jsxs)("div",{className:"mt-6 p-4 bg-red-900 text-white w-full max-w-md rounded-lg",children:[(0,r.jsx)("h2",{className:"text-lg font-bold mb-2",children:"Error:"}),(0,r.jsx)("pre",{className:"whitespace-pre-wrap break-words",children:h})]}),d&&(0,r.jsxs)("div",{className:"mt-6 p-4 bg-green-900 text-white w-full max-w-md rounded-lg",children:[(0,r.jsx)("h2",{className:"text-lg font-bold mb-2",children:"Response:"}),(0,r.jsx)("pre",{className:"whitespace-pre-wrap",children:d})]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=3438)}),_N_E=e.O()}]);
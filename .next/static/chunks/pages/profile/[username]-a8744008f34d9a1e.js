(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[240],{637:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/[username]",function(){return s(2047)}])},1316:function(e,t,s){"use strict";s.d(t,{m:function(){return i}});class i{static fromFirebase(e){return{profileImageURL:e.profileImageURL||"",imageOffsetWidth:e.imageOffsetWidth||0,imageOffsetHeight:e.imageOffsetHeight||0}}}},2047:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return g},default:function(){return w}});var i=s(5893),r=s(7294),a=s(1163),l=s(7014),o=s(7354),n=s(3971),c=s(927),m=s(6019),u=s(699),f=s(2875),d=s(9008),h=s.n(d),x=e=>{let{userData:t}=e,s=`${t.displayName}'s Profile | Pulse`,r=t.bio||"Check out this fitness profile on Pulse",a=t.profileImage?.profileImageURL||"https://fitwithpulse.ai/default-profile.png",l=`https://fitwithpulse.ai/${t.username}`;return(0,i.jsxs)(h(),{children:[(0,i.jsx)("title",{children:s}),(0,i.jsx)("meta",{name:"description",content:r}),(0,i.jsx)("meta",{property:"og:title",content:s}),(0,i.jsx)("meta",{property:"og:description",content:r}),(0,i.jsx)("meta",{property:"og:image",content:a}),(0,i.jsx)("meta",{property:"og:url",content:l}),(0,i.jsx)("meta",{property:"og:type",content:"profile"}),(0,i.jsx)("meta",{property:"og:site_name",content:"Pulse Fitness"}),(0,i.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,i.jsx)("meta",{name:"twitter:title",content:s}),(0,i.jsx)("meta",{name:"twitter:description",content:r}),(0,i.jsx)("meta",{name:"twitter:image",content:a}),(0,i.jsx)("link",{rel:"canonical",href:l}),(0,i.jsx)("link",{rel:"preconnect",href:"https://fitwithpulse.ai"}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]})};let p={ACTIVITY:"activity",EXERICSES:"exercises",CHALLENGES:"challenges"};var g=!0;function w(e){let{initialUserData:t,error:s}=e,{username:d}=(0,a.useRouter)().query,[h,g]=(0,r.useState)(p.EXERICSES),[w,j]=(0,r.useState)(t),[b,N]=(0,r.useState)([]),[v,y]=(0,r.useState)([]),[E,k]=(0,r.useState)([]),[S,I]=(0,r.useState)([]),[$,P]=(0,r.useState)([]),[_,C]=(0,r.useState)([]),[z,F]=(0,r.useState)(!t),[L,R]=(0,r.useState)(s||null),[U,O]=(0,r.useState)(null),[T,V]=(0,r.useState)(!1),H="https://fitwithpulse.ai/.netlify/functions";if((0,r.useEffect)(()=>{(async()=>{if(d&&!t)try{F(!0);let e=await fetch(`${H}/get-user-profile?username=${d}`);if(!e.ok)throw Error("Profile not found");let t=await e.json();if(t.success)j(t.user);else throw Error(t.error||"Failed to load profile")}catch(e){R(e instanceof Error?e.message:"Failed to load profile")}finally{F(!1)}})()},[d,H,t]),(0,r.useEffect)(()=>{(async()=>{if(w?.id)try{let e=await fetch(`${H}/get-body-weight?userId=${w.id}`);if(!e.ok)throw Error("Failed to fetch body weight data");(await e.json()).success}catch(e){console.error("Error fetching body weight:",e)}})()},[w?.id,H]),(0,r.useEffect)(()=>{(async()=>{if(w?.id)try{let e=await fetch(`${H}/get-challenges?userId=${w.id}`);if(!e.ok)throw Error("Failed to fetch challenges");let t=await e.json();t.success&&y(t.challenges)}catch(e){console.error("Error fetching challenges:",e)}})()},[w?.id,H]),(0,r.useEffect)(()=>{(async()=>{if(w?.id)try{let e=await fetch(`${H}/get-user-videos?userId=${w.id}`);if(!e.ok)throw Error("Failed to fetch videos");let t=await e.json();t.success&&N(t.exercises)}catch(e){console.error("Error fetching user videos:",e)}})()},[w?.id,H]),(0,r.useEffect)(()=>{let e=async e=>{try{let t={method:"GET",headers:{"Content-Type":"application/json"}},[s,i]=await Promise.all([fetch(`${H}/get-followers?userId=${e}`,t),fetch(`${H}/get-following?userId=${e}`,t)]);if(!s.ok||!i.ok)throw Error("Failed to fetch follow data");let r=await s.json(),a=await i.json();r.success&&a.success&&(P(r.followers),C(a.following))}catch(e){console.error("Error fetching follow data:",e)}};w?.id&&e(w.id)},[w?.id,H]),(0,r.useEffect)(()=>{(async()=>{if(w?.id)try{let e=await fetch(`${H}/get-workout-summaries?userId=${w.id}`);if(!e.ok)throw Error("Failed to fetch workout summaries");let t=await e.json();if(t.success){console.log("Workout summaries:",t.summaries);let e=t.summaries.map(e=>n.P.fromFirebase(e));if(k(e),b.length>0||$.length>0||_.length>0){let t=[...$,..._],s=(0,u.o)(e,b,t,w.id);I(s)}}}catch(e){console.error("Error fetching workout summaries:",e)}})()},[w?.id,H,$,_,b]),z||L||!w){let e={displayName:"Pulse Profile",bio:"Discover fitness profiles on Pulse",username:d||"",profileImage:{profileImageURL:"https://fitwithpulse.ai/default-profile.png"}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x,{userData:e,bio:e.bio,username:e.username}),(0,i.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:z?"Loading...":"Profile not found"})]})}let A={instagram:w.creator?.instagramHandle,twitter:w.creator?.twitterHandle,youtube:w.creator?.youtubeUrl};return(0,i.jsxs)("div",{className:"min-h-screen bg-zinc-900",children:[(0,i.jsx)(x,{userData:{displayName:w.displayName,bio:w.bio||"User bio goes here",username:w.username,profileImage:w.profileImage},bio:w.bio||"User bio goes here",username:w.username}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"h-48 bg-gradient-to-b from-zinc-800 to-zinc-900"}),(0,i.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"relative -mt-24",children:[(0,i.jsx)("div",{className:"relative inline-block",children:(0,i.jsx)("img",{src:w.profileImage?.profileImageURL||"/api/placeholder/96/96",alt:w.displayName,className:"w-24 h-24 rounded-full border-4 border-zinc-900",onClick:()=>V(!0)})}),(0,i.jsxs)("div",{className:"mt-4 text-white",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold",children:w.displayName}),(0,i.jsxs)("p",{className:"text-zinc-400",children:["@",w.username]}),(0,i.jsxs)("div",{className:"mt-2 flex items-center gap-4 text-sm text-zinc-400",children:[(0,i.jsxs)("span",{children:[$.length," followers"]}),(0,i.jsx)("span",{className:"w-1 h-1 bg-zinc-600 rounded-full"}),(0,i.jsxs)("span",{children:[_.length," following"]})]}),(0,i.jsx)("p",{className:"mt-4 text-zinc-300",children:w.bio}),(0,i.jsx)("div",{className:"mt-4 flex gap-6",children:Object.entries(A).map(e=>{let[t,s]=e;return s?(0,i.jsx)("a",{href:function(e,t){switch(e){case"instagram":return`https://instagram.com/${t}`;case"twitter":return`https://twitter.com/${t}`;case"youtube":return t;default:return"#"}}(t,s),target:"_blank",rel:"noopener noreferrer",className:"text-zinc-400 hover:text-white transition-colors",children:(0,i.jsx)("img",{src:`/${t}.svg`,alt:t,className:"w-6 h-6 hover:opacity-80"})},t):null})})]}),(0,i.jsx)("div",{className:"mt-8 border-b border-zinc-700 overflow-x-auto",children:(0,i.jsx)("nav",{className:"flex whitespace-nowrap min-w-full sm:min-w-0 px-4 sm:px-0",children:(0,i.jsx)("div",{className:"flex gap-8 pb-2 sm:pb-0",children:Object.values(p).map(e=>(0,i.jsxs)("button",{onClick:()=>g(e),className:`pb-4 px-2 text-sm font-medium transition-colors relative flex-shrink-0
                        ${h===e?"text-white":"text-zinc-400 hover:text-zinc-300"}`,children:[e.charAt(0).toUpperCase()+e.slice(1),h===e&&(0,i.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-white"})]},e))})})}),(0,i.jsxs)("div",{className:"mt-8",children:[h===p.ACTIVITY&&(0,i.jsx)("div",{className:"px-5",children:0===S.length?(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center p-8",children:[(0,i.jsx)(c.Z,{className:"w-12 h-12 text-white/20"}),(0,i.jsxs)("h3",{className:"mt-4 text-white font-medium",children:[w.username," has no activities yet"]})]}):(0,i.jsx)(m.Z,{activities:S,workoutSummaries:E,userVideos:b,username:w.username,isPublicProfile:!0,onWorkoutSelect:e=>{console.log("Selected workout summary:",e)},onVideoSelect:e=>{console.log("Selected exercise:",e)},onProfileSelect:e=>{console.log("Selected user profile:",e)}})}),h===p.EXERICSES&&(0,i.jsxs)("div",{className:"px-5",children:[(0,i.jsxs)("h2",{className:"text-xl text-white font-semibold mb-4",children:[w.username,"'s Videos (",b.length,")"]}),(0,i.jsx)(l.Z,{userVideos:b,onSelectVideo:e=>{console.log(e),O(e)}})]}),h===p.CHALLENGES&&(0,i.jsx)(o.M,{activeChallenges:v,onSelectChallenge:e=>{console.log(e)}})]})]})}),U&&(0,i.jsx)(f.default,{exercise:U,user:w,onBack:()=>O(null),onProfileClick:()=>{console.log("Profile clicked")}}),T&&(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,i.jsxs)("div",{className:"relative bg-zinc-800 p-4 rounded shadow-md max-w-2xl w-full mx-2",children:[(0,i.jsx)("button",{onClick:()=>V(!1),className:"absolute top-2 right-2 text-zinc-300 hover:text-white",children:"âœ•"}),(0,i.jsx)("img",{src:w.profileImage?.profileImageURL||"/api/placeholder/96/96",alt:w.displayName,className:"max-w-full max-h-[80vh] object-contain mx-auto"})]})})]})]})}},9008:function(e,t,s){e.exports=s(3867)}},function(e){e.O(0,[365,590,888,774,179],function(){return e(e.s=637)}),_N_E=e.O()}]);
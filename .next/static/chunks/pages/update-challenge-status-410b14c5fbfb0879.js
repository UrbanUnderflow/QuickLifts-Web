(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[101],{1273:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/update-challenge-status",function(){return s(455)}])},455:function(e,t,s){"use strict";s.r(t);var l=s(5893),n=s(7294);let a=e=>{let{collection:t,title:s}=e;return(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h3",{className:"text-lg font-bold mb-2",children:s}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("p",{children:["Updates Applied: ",t.updatesApplied]}),(0,l.jsx)("div",{className:"space-y-4",children:t.proposedUpdates.map((e,t)=>(0,l.jsxs)("div",{className:"bg-zinc-800 p-4 rounded-lg",children:[(0,l.jsxs)("p",{className:"font-medium",children:["ID: ",e.id]}),(0,l.jsxs)("p",{children:["Status Change: ",e.currentStatus," â†’ ",e.newStatus]}),(0,l.jsxs)("p",{className:"text-sm text-zinc-400",children:["Start: ",new Date(e.startDate).toLocaleDateString()]}),(0,l.jsxs)("p",{className:"text-sm text-zinc-400",children:["End: ",new Date(e.endDate).toLocaleDateString()]})]},t))})]})]})};t.default=()=>{let[e,t]=(0,n.useState)(null),[s,r]=(0,n.useState)(null),[c,i]=(0,n.useState)(!1),d=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i(!0),r(null),t(null);try{let s=await fetch("/.netlify/functions/update-challenge-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({testMode:e})}),l=s.headers.get("content-type");if(!l||!l.includes("application/json")){let e=await s.text();throw Error(`Server returned non-JSON response: ${e}`)}let n=await s.json();if(!s.ok)throw Error(n.message||`Server error: ${s.status}`);t(n)}catch(e){r(e instanceof Error?e.message:"An unexpected error occurred"),console.error("Error running challenge status update:",e)}finally{i(!1)}};return(0,l.jsxs)("div",{className:"min-h-screen bg-zinc-950 flex flex-col items-center justify-center p-4",children:[(0,l.jsx)("h1",{className:"text-white text-2xl mb-6",children:"Challenge Status Update Test"}),(0,l.jsxs)("div",{className:"w-full max-w-md bg-zinc-900 p-6 rounded-lg flex flex-col gap-4",children:[(0,l.jsx)("button",{onClick:()=>d(!0),disabled:c,className:`w-full py-2 rounded-lg font-bold ${c?"bg-gray-500 cursor-not-allowed":"bg-yellow-500 text-black hover:bg-yellow-400"}`,children:c&&e?.results.testMode?"Testing...":"Test Run (No Updates)"}),(0,l.jsx)("button",{onClick:()=>d(!1),disabled:c,className:`w-full py-2 rounded-lg font-bold ${c?"bg-gray-500 cursor-not-allowed":"bg-[#E0FE10] text-black hover:bg-[#d4f00f]"}`,children:c&&!e?.results.testMode?"Updating...":"Run Real Update"})]}),s&&(0,l.jsxs)("div",{className:"mt-6 p-4 bg-red-900 text-white w-full max-w-md rounded-lg",children:[(0,l.jsx)("h2",{className:"text-lg font-bold mb-2",children:"Error:"}),(0,l.jsx)("pre",{className:"whitespace-pre-wrap break-words",children:s})]}),e&&(0,l.jsxs)("div",{className:"mt-6 p-4 bg-green-900 text-white w-full max-w-md rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h2",{className:"text-lg font-bold",children:"Results"}),e.results.testMode&&(0,l.jsx)("span",{className:"px-2 py-1 bg-yellow-500 text-black text-sm font-bold rounded",children:"Test Mode"})]}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsxs)("p",{className:"text-sm text-zinc-300",children:["Timestamp: ",new Date(e.results.timestamp).toLocaleString()]})}),(0,l.jsx)(a,{collection:e.results.sweatlistCollection,title:"Sweatlist Collection"}),(0,l.jsx)(a,{collection:e.results.userChallengeCollection,title:"User Challenge Collection"})]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=1273)}),_N_E=e.O()}]);
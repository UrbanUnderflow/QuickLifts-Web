"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/_app",{

/***/ "./src/api/firebase/exercise/service.ts":
/*!**********************************************!*\
  !*** ./src/api/firebase/exercise/service.ts ***!
  \**********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   exerciseService: function() { return /* binding */ exerciseService; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @swc/helpers/_/_async_to_generator */ \"./node_modules/@swc/helpers/esm/_async_to_generator.js\");\n/* harmony import */ var _swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @swc/helpers/_/_class_call_check */ \"./node_modules/@swc/helpers/esm/_class_call_check.js\");\n/* harmony import */ var _swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @swc/helpers/_/_create_class */ \"./node_modules/@swc/helpers/esm/_create_class.js\");\n/* harmony import */ var _swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @swc/helpers/_/_object_spread */ \"./node_modules/@swc/helpers/esm/_object_spread.js\");\n/* harmony import */ var _swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @swc/helpers/_/_object_spread_props */ \"./node_modules/@swc/helpers/esm/_object_spread_props.js\");\n/* harmony import */ var _swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @swc/helpers/_/_ts_generator */ \"./node_modules/@swc/helpers/esm/_ts_generator.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/api/firebase/config.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../firebase/exercise/types */ \"./src/api/firebase/exercise/types.ts\");\n/* harmony import */ var _utils_formatDate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/formatDate */ \"./src/utils/formatDate.ts\");\n\n\n\n\n\n\n\n\n\n\n\nvar ExerciseService = /*#__PURE__*/ function() {\n    \"use strict\";\n    function ExerciseService() {\n        (0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_4__._)(this, ExerciseService);\n        this._allExercises = [];\n    }\n    var _proto = ExerciseService.prototype;\n    _proto.fetchExercises = function fetchExercises() {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_5__._)(function() {\n            var exerciseSnapshot, exercises, videoSnapshot, exerciseVideos, mappedExercises, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_6__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return _types__WEBPACK_IMPORTED_MODULE_2__.Exercise.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        // Map videos to their corresponding exercises by name\n                        mappedExercises = exercises.map(function(exercise) {\n                            var videosForExercise = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            }).map(function(video) {\n                                return _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo.fromFirebase(video);\n                            }); // Ensure proper ExerciseVideo instances\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_8__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({}, exercise), {\n                                videos: videosForExercise\n                            }));\n                        });\n                        // Filter out exercises without videos\n                        _this._allExercises = mappedExercises.filter(function(exercise) {\n                            return exercise.videos.length > 0;\n                        });\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching exercises:\", error);\n                        throw new Error(\"Failed to fetch exercises.\");\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchFeaturedExercisesWithVideos = function fetchFeaturedExercisesWithVideos() {\n        var limit = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 24;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_5__._)(function() {\n            var exerciseSnapshot, exercises, videoSnapshot, exerciseVideos, mappedExercises, shuffledExercises, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_6__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return _types__WEBPACK_IMPORTED_MODULE_2__.Exercise.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        // Map videos to exercises and filter for those with GIFs\n                        mappedExercises = exercises.map(function(exerciseData) {\n                            // Ensure that each video is properly instantiated as an `ExerciseVideo`\n                            var videosForExercise = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exerciseData.name.toLowerCase();\n                            }).map(function(video) {\n                                return _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo.fromFirebase(video);\n                            });\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise({\n                                id: exerciseData.id,\n                                name: exerciseData.name,\n                                description: exerciseData.description,\n                                category: exerciseData.category || {},\n                                primaryBodyParts: exerciseData.primaryBodyParts || [],\n                                secondaryBodyParts: exerciseData.secondaryBodyParts || [],\n                                tags: exerciseData.tags || [],\n                                videos: videosForExercise,\n                                steps: exerciseData.steps || [],\n                                visibility: exerciseData.visibility || \"live\",\n                                currentVideoPosition: exerciseData.currentVideoPosition || 0,\n                                sets: exerciseData.sets || 0,\n                                reps: exerciseData.reps || \"\",\n                                weight: exerciseData.weight || 0,\n                                author: _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseAuthor.fromFirebase(exerciseData.author || {}),\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_3__.convertFirestoreTimestamp)(exerciseData.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_3__.convertFirestoreTimestamp)(exerciseData.updatedAt)\n                            });\n                        });\n                        // Shuffle and limit results\n                        shuffledExercises = mappedExercises.sort(function() {\n                            return Math.random() - 0.5;\n                        }).slice(0, limit);\n                        return [\n                            2,\n                            shuffledExercises\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching featured exercises:\", error);\n                        return [\n                            2,\n                            []\n                        ];\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getExercisesByAuthor = function getExercisesByAuthor(userId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_5__._)(function() {\n            var videosRef, q, querySnapshot, uniqueExerciseNames, exercises, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_6__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        // Query exerciseVideos collection instead\n                        videosRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(videosRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", userId));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 1:\n                        querySnapshot = _state.sent();\n                        // Create a Set to store unique exercise names\n                        uniqueExerciseNames = new Set();\n                        // Collect all unique exercise names from the videos\n                        querySnapshot.forEach(function(doc) {\n                            var videoData = doc.data();\n                            if (videoData.exerciseName) {\n                                uniqueExerciseNames.add(videoData.exerciseName);\n                            }\n                        });\n                        // Convert to array and create Exercise objects\n                        exercises = Array.from(uniqueExerciseNames).map(function(name) {\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise({\n                                id: name,\n                                name: name,\n                                author: {\n                                    userId: userId\n                                }\n                            });\n                        });\n                        return [\n                            2,\n                            exercises\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error fetching exercises by author:\", error);\n                        return [\n                            2,\n                            []\n                        ];\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchPaginatedExercises = function fetchPaginatedExercises() {\n        var lastDoc = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : null, pageSize = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 15;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_5__._)(function() {\n            var exerciseQuery, exerciseSnapshot, videoSnapshot, exerciseVideos, exercises, mappedExercises, filteredExercises, lastVisible, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_6__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            ,\n                            4\n                        ]);\n                        // Query for exercises with pagination\n                        exerciseQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(pageSize));\n                        if (lastDoc) {\n                            exerciseQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(exerciseQuery, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.startAfter)(lastDoc));\n                        }\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(exerciseQuery)\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        if (exerciseSnapshot.empty) {\n                            return [\n                                2,\n                                {\n                                    exercises: [],\n                                    lastVisible: null\n                                }\n                            ];\n                        }\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return _types__WEBPACK_IMPORTED_MODULE_2__.Exercise.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        // Map videos to exercises and ensure correct instantiation\n                        mappedExercises = exercises.map(function(exerciseData) {\n                            var videosForExercise = exerciseVideos.filter(function(video) {\n                                return video.exerciseId === exerciseData.id;\n                            });\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_8__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({}, exerciseData), {\n                                videos: videosForExercise\n                            }));\n                        });\n                        // Filter exercises with videos\n                        filteredExercises = mappedExercises.filter(function(exercise) {\n                            return exercise.videos.length > 0;\n                        });\n                        // Update the last visible document for pagination\n                        lastVisible = exerciseSnapshot.docs.length > 0 ? exerciseSnapshot.docs[exerciseSnapshot.docs.length - 1] : null;\n                        return [\n                            2,\n                            {\n                                exercises: filteredExercises,\n                                lastVisible: lastVisible\n                            }\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching paginated exercises:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.generateExerciseLogID = function generateExerciseLogID(workoutId, userId) {\n        // Create a document reference in the logs subcollection of the workout,\n        // then return its generated ID.\n        return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\", workoutId, \"logs\")).id;\n    };\n    (0,_swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_9__._)(ExerciseService, [\n        {\n            key: \"allExercises\",\n            get: function get() {\n                return this._allExercises;\n            }\n        }\n    ]);\n    return ExerciseService;\n}();\nvar exerciseService = new ExerciseService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aUJBQWlCTSxJQUFJLENBQUNOLGlCQUFpQk0sSUFBSSxDQUFDWSxNQUFNLEdBQUcsRUFBRSxHQUFHO3dCQUVqSDs7NEJBQU87Z0NBQUVqQixXQUFXMEQ7Z0NBQW1CQyxhQUFBQTs0QkFBWTs7O3dCQUU1Q3ZEO3dCQUNQYyxRQUFRZCxLQUFLLENBQUMsdUNBQXVDQTt3QkFDckQsTUFBTUE7Ozs7Ozs7UUFFVjs7SUFFQTBELE9BQUFBLHFCQU1DLEdBTkRBLFNBQUFBLHNCQUFzQkMsU0FBaUIsRUFBRXJCLE1BQWM7UUFDckQsd0VBQXdFO1FBQ3hFLGdDQUFnQztRQUNoQyxPQUFPckQsdURBQUdBLENBQ1JOLDhEQUFVQSxDQUFDUSx1Q0FBRUEsRUFBRSxTQUFTbUQsUUFBUSxxQkFBcUJxQixXQUFXLFNBQ2hFdkQsRUFBRTtJQUNOO2lFQXZOQVo7O1lBR0VvRSxLQUFBQTtpQkFBSjtnQkFDRSxPQUFPLElBQUksQ0FBQ25FLGFBQWE7WUFDM0I7OztXQUxFRDs7QUEwTkcsSUFBTXFFLGtCQUFrQixJQUFJckUsa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9hcGkvZmlyZWJhc2UvZXhlcmNpc2Uvc2VydmljZS50cz9hODMxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgY29sbGVjdGlvbixcbiAgICBnZXREb2NzLFxuICAgIHF1ZXJ5LFxuICAgIG9yZGVyQnksXG4gICAgbGltaXQsXG4gICAgc3RhcnRBZnRlcixcbiAgICBEb2N1bWVudFNuYXBzaG90LFxuICAgIGRvYyxcbiAgICB3aGVyZSxcbiAgfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi9jb25maWcnO1xuaW1wb3J0IHsgRXhlcmNpc2UgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IEV4ZXJjaXNlVmlkZW8sIEV4ZXJjaXNlQXV0aG9yIH0gZnJvbSAnLi4vLi4vZmlyZWJhc2UvZXhlcmNpc2UvdHlwZXMnO1xuaW1wb3J0IHsgY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL2Zvcm1hdERhdGUnO1xuXG5jbGFzcyBFeGVyY2lzZVNlcnZpY2Uge1xuICAgIHByaXZhdGUgX2FsbEV4ZXJjaXNlczogRXhlcmNpc2VbXSA9IFtdO1xuICBcbiAgICBnZXQgYWxsRXhlcmNpc2VzKCk6IEV4ZXJjaXNlW10ge1xuICAgICAgcmV0dXJuIHRoaXMuX2FsbEV4ZXJjaXNlcztcbiAgICB9XG4gIFxuICAgIGFzeW5jIGZldGNoRXhlcmNpc2VzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gRmV0Y2ggYWxsIGV4ZXJjaXNlc1xuICAgICAgICBjb25zdCBleGVyY2lzZVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VzJykpO1xuICAgICAgICBjb25zdCBleGVyY2lzZXM6IEV4ZXJjaXNlW10gPSBleGVyY2lzZVNuYXBzaG90LmRvY3MubWFwKChkb2MpID0+IEV4ZXJjaXNlLmZyb21GaXJlYmFzZSh7XG4gICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAuLi5kb2MuZGF0YSgpLFxuICAgICAgICB9KSk7XG4gICAgXG4gICAgICAgIC8vIEZldGNoIGFsbCB2aWRlb3NcbiAgICAgICAgY29uc3QgdmlkZW9TbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlVmlkZW9zJykpO1xuICAgICAgICBjb25zdCBleGVyY2lzZVZpZGVvczogRXhlcmNpc2VWaWRlb1tdID0gdmlkZW9TbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PlxuICAgICAgICAgIEV4ZXJjaXNlVmlkZW8uZnJvbUZpcmViYXNlKHtcbiAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICAuLi5kb2MuZGF0YSgpLFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgXG4gICAgICAgIC8vIE1hcCB2aWRlb3MgdG8gdGhlaXIgY29ycmVzcG9uZGluZyBleGVyY2lzZXMgYnkgbmFtZVxuICAgICAgICBjb25zdCBtYXBwZWRFeGVyY2lzZXMgPSBleGVyY2lzZXMubWFwKChleGVyY2lzZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHZpZGVvc0ZvckV4ZXJjaXNlID0gZXhlcmNpc2VWaWRlb3NcbiAgICAgICAgICAgIC5maWx0ZXIoKHZpZGVvKSA9PiB2aWRlby5leGVyY2lzZS50b0xvd2VyQ2FzZSgpID09PSBleGVyY2lzZS5uYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICAgICAubWFwKCh2aWRlbykgPT4gRXhlcmNpc2VWaWRlby5mcm9tRmlyZWJhc2UodmlkZW8pKTsgLy8gRW5zdXJlIHByb3BlciBFeGVyY2lzZVZpZGVvIGluc3RhbmNlc1xuICAgICAgICBcbiAgICAgICAgICByZXR1cm4gbmV3IEV4ZXJjaXNlKHtcbiAgICAgICAgICAgIC4uLmV4ZXJjaXNlLCAvLyBLZWVwIGV4aXN0aW5nIHByb3BlcnRpZXNcbiAgICAgICAgICAgIHZpZGVvczogdmlkZW9zRm9yRXhlcmNpc2UsIC8vIEVuc3VyZSB2aWRlb3MgYXJlIGluc3RhbmNlcyBvZiBFeGVyY2lzZVZpZGVvXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICAvLyBGaWx0ZXIgb3V0IGV4ZXJjaXNlcyB3aXRob3V0IHZpZGVvc1xuICAgICAgICB0aGlzLl9hbGxFeGVyY2lzZXMgPSBtYXBwZWRFeGVyY2lzZXMuZmlsdGVyKChleGVyY2lzZTogRXhlcmNpc2UpID0+IGV4ZXJjaXNlLnZpZGVvcy5sZW5ndGggPiAwKTtcbiAgICBcbiAgICAgICAgLy8gY29uc29sZS5sb2coYEZldGNoZWQgJHt0aGlzLl9hbGxFeGVyY2lzZXMubGVuZ3RofSBleGVyY2lzZXMgd2l0aCB2aWRlb3MuYCk7XG4gICAgICAgIFxuICAgICAgICAvLyBEZXRhaWxlZCBsb2dnaW5nIGZvciBkZWJ1Z2dpbmdcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ1NhbXBsZSBleGVyY2lzZXM6JywgdGhpcy5fYWxsRXhlcmNpc2VzLnNsaWNlKDAsIDUpLm1hcChleCA9PiAoe1xuICAgICAgICAvLyAgIG5hbWU6IGV4Lm5hbWUsXG4gICAgICAgIC8vICAgdmlkZW9Db3VudDogZXgudmlkZW9zLmxlbmd0aCxcbiAgICAgICAgLy8gICBmaXJzdFZpZGVvVXJsOiBleC52aWRlb3NbMF0/LnZpZGVvVVJMXG4gICAgICAgIC8vIH0pKSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBleGVyY2lzZXM6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBleGVyY2lzZXMuJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZmV0Y2hGZWF0dXJlZEV4ZXJjaXNlc1dpdGhWaWRlb3MobGltaXQ6IG51bWJlciA9IDI0KTogUHJvbWlzZTxFeGVyY2lzZVtdPiB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBGZXRjaCBhbGwgZXhlcmNpc2VzXG4gICAgICAgIGNvbnN0IGV4ZXJjaXNlU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZXMnKSk7XG4gICAgICAgIGNvbnN0IGV4ZXJjaXNlczogRXhlcmNpc2VbXSA9IGV4ZXJjaXNlU25hcHNob3QuZG9jcy5tYXAoKGRvYykgPT4gXG4gICAgICAgICAgRXhlcmNpc2UuZnJvbUZpcmViYXNlKHtcbiAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICAuLi5kb2MuZGF0YSgpLFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgXG4gICAgICAgIC8vIEZldGNoIGFsbCB2aWRlb3NcbiAgICAgICAgY29uc3QgdmlkZW9TbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlVmlkZW9zJykpO1xuICAgICAgICBjb25zdCBleGVyY2lzZVZpZGVvczogRXhlcmNpc2VWaWRlb1tdID0gdmlkZW9TbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PlxuICAgICAgICAgIEV4ZXJjaXNlVmlkZW8uZnJvbUZpcmViYXNlKHtcbiAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICAuLi5kb2MuZGF0YSgpLFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgXG4gICAgICAgIC8vIE1hcCB2aWRlb3MgdG8gZXhlcmNpc2VzIGFuZCBmaWx0ZXIgZm9yIHRob3NlIHdpdGggR0lGc1xuICAgICAgICBjb25zdCBtYXBwZWRFeGVyY2lzZXMgPSBleGVyY2lzZXMubWFwKChleGVyY2lzZURhdGEpID0+IHtcbiAgICAgICAgICAvLyBFbnN1cmUgdGhhdCBlYWNoIHZpZGVvIGlzIHByb3Blcmx5IGluc3RhbnRpYXRlZCBhcyBhbiBgRXhlcmNpc2VWaWRlb2BcbiAgICAgICAgICBjb25zdCB2aWRlb3NGb3JFeGVyY2lzZSA9IChleGVyY2lzZVZpZGVvc1xuICAgICAgICAgICAgLmZpbHRlcigodmlkZW8pID0+IHZpZGVvLmV4ZXJjaXNlLnRvTG93ZXJDYXNlKCkgPT09IGV4ZXJjaXNlRGF0YS5uYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICAgICAubWFwKCh2aWRlbykgPT4gRXhlcmNpc2VWaWRlby5mcm9tRmlyZWJhc2UodmlkZW8pKSkgYXMgRXhlcmNpc2VWaWRlb1tdO1xuICAgICAgICBcbiAgICAgICAgICByZXR1cm4gbmV3IEV4ZXJjaXNlKHtcbiAgICAgICAgICAgIGlkOiBleGVyY2lzZURhdGEuaWQsXG4gICAgICAgICAgICBuYW1lOiBleGVyY2lzZURhdGEubmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBleGVyY2lzZURhdGEuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBjYXRlZ29yeTogZXhlcmNpc2VEYXRhLmNhdGVnb3J5IHx8IHt9LCAvLyBFbnN1cmUgcHJvcGVyIGNhdGVnb3J5IGhhbmRsaW5nXG4gICAgICAgICAgICBwcmltYXJ5Qm9keVBhcnRzOiBleGVyY2lzZURhdGEucHJpbWFyeUJvZHlQYXJ0cyB8fCBbXSxcbiAgICAgICAgICAgIHNlY29uZGFyeUJvZHlQYXJ0czogZXhlcmNpc2VEYXRhLnNlY29uZGFyeUJvZHlQYXJ0cyB8fCBbXSxcbiAgICAgICAgICAgIHRhZ3M6IGV4ZXJjaXNlRGF0YS50YWdzIHx8IFtdLFxuICAgICAgICAgICAgdmlkZW9zOiB2aWRlb3NGb3JFeGVyY2lzZSwgLy8gQXR0YWNoIHByb3Blcmx5IG1hcHBlZCB2aWRlb3NcbiAgICAgICAgICAgIHN0ZXBzOiBleGVyY2lzZURhdGEuc3RlcHMgfHwgW10sXG4gICAgICAgICAgICB2aXNpYmlsaXR5OiBleGVyY2lzZURhdGEudmlzaWJpbGl0eSB8fCAnbGl2ZScsXG4gICAgICAgICAgICBjdXJyZW50VmlkZW9Qb3NpdGlvbjogZXhlcmNpc2VEYXRhLmN1cnJlbnRWaWRlb1Bvc2l0aW9uIHx8IDAsXG4gICAgICAgICAgICBzZXRzOiBleGVyY2lzZURhdGEuc2V0cyB8fCAwLFxuICAgICAgICAgICAgcmVwczogZXhlcmNpc2VEYXRhLnJlcHMgfHwgJycsXG4gICAgICAgICAgICB3ZWlnaHQ6IGV4ZXJjaXNlRGF0YS53ZWlnaHQgfHwgMCxcbiAgICAgICAgICAgIGF1dGhvcjogRXhlcmNpc2VBdXRob3IuZnJvbUZpcmViYXNlKGV4ZXJjaXNlRGF0YS5hdXRob3IgfHwge30pLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGV4ZXJjaXNlRGF0YS5jcmVhdGVkQXQpLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGV4ZXJjaXNlRGF0YS51cGRhdGVkQXQpLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgXG4gICAgICAgIC8vIFNodWZmbGUgYW5kIGxpbWl0IHJlc3VsdHNcbiAgICAgICAgY29uc3Qgc2h1ZmZsZWRFeGVyY2lzZXMgPSBtYXBwZWRFeGVyY2lzZXNcbiAgICAgICAgICAuc29ydCgoKSA9PiBNYXRoLnJhbmRvbSgpIC0gMC41KVxuICAgICAgICAgIC5zbGljZSgwLCBsaW1pdCk7XG4gICAgXG4gICAgICAgIHJldHVybiBzaHVmZmxlZEV4ZXJjaXNlcztcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGZlYXR1cmVkIGV4ZXJjaXNlczonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBnZXRFeGVyY2lzZXNCeUF1dGhvcih1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlcmNpc2VbXT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gUXVlcnkgZXhlcmNpc2VWaWRlb3MgY29sbGVjdGlvbiBpbnN0ZWFkXG4gICAgICAgIGNvbnN0IHZpZGVvc1JlZiA9IGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZVZpZGVvcycpO1xuICAgICAgICBjb25zdCBxID0gcXVlcnkodmlkZW9zUmVmLCB3aGVyZSgndXNlcklkJywgJz09JywgdXNlcklkKSk7XG4gICAgICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIGEgU2V0IHRvIHN0b3JlIHVuaXF1ZSBleGVyY2lzZSBuYW1lc1xuICAgICAgICBjb25zdCB1bmlxdWVFeGVyY2lzZU5hbWVzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBDb2xsZWN0IGFsbCB1bmlxdWUgZXhlcmNpc2UgbmFtZXMgZnJvbSB0aGUgdmlkZW9zXG4gICAgICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaCgoZG9jKSA9PiB7XG4gICAgICAgICAgY29uc3QgdmlkZW9EYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgICAgICBpZiAodmlkZW9EYXRhLmV4ZXJjaXNlTmFtZSkge1xuICAgICAgICAgICAgdW5pcXVlRXhlcmNpc2VOYW1lcy5hZGQodmlkZW9EYXRhLmV4ZXJjaXNlTmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgXG4gICAgICAgIC8vIENvbnZlcnQgdG8gYXJyYXkgYW5kIGNyZWF0ZSBFeGVyY2lzZSBvYmplY3RzXG4gICAgICAgIGNvbnN0IGV4ZXJjaXNlcyA9IEFycmF5LmZyb20odW5pcXVlRXhlcmNpc2VOYW1lcykubWFwKG5hbWUgPT4ge1xuICAgICAgICAgIHJldHVybiBuZXcgRXhlcmNpc2Uoe1xuICAgICAgICAgICAgaWQ6IG5hbWUsIC8vIFVzaW5nIG5hbWUgYXMgSUQgc2luY2Ugd2UganVzdCBuZWVkIHVuaXF1ZSBpZGVudGlmaWVyc1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIGF1dGhvcjogeyB1c2VySWQ6IHVzZXJJZCB9XG4gICAgICAgICAgICAvLyBBZGQgb3RoZXIgcmVxdWlyZWQgRXhlcmNpc2UgcHJvcGVydGllcyBhcyBuZWVkZWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZXhlcmNpc2VzO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgZXhlcmNpc2VzIGJ5IGF1dGhvcjonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBmZXRjaFBhZ2luYXRlZEV4ZXJjaXNlcyhcbiAgICAgICAgbGFzdERvYzogRG9jdW1lbnRTbmFwc2hvdCB8IG51bGwgPSBudWxsLFxuICAgICAgICBwYWdlU2l6ZTogbnVtYmVyID0gMTVcbiAgICAgICk6IFByb21pc2U8eyBleGVyY2lzZXM6IEV4ZXJjaXNlW107IGxhc3RWaXNpYmxlOiBEb2N1bWVudFNuYXBzaG90IHwgbnVsbCB9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gUXVlcnkgZm9yIGV4ZXJjaXNlcyB3aXRoIHBhZ2luYXRpb25cbiAgICAgICAgICBsZXQgZXhlcmNpc2VRdWVyeSA9IHF1ZXJ5KFxuICAgICAgICAgICAgY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlcycpLFxuICAgICAgICAgICAgb3JkZXJCeSgnY3JlYXRlZEF0JywgJ2Rlc2MnKSxcbiAgICAgICAgICAgIGxpbWl0KHBhZ2VTaXplKVxuICAgICAgICAgICk7XG4gICAgXG4gICAgICAgICAgaWYgKGxhc3REb2MpIHtcbiAgICAgICAgICAgIGV4ZXJjaXNlUXVlcnkgPSBxdWVyeShleGVyY2lzZVF1ZXJ5LCBzdGFydEFmdGVyKGxhc3REb2MpKTtcbiAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgY29uc3QgZXhlcmNpc2VTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoZXhlcmNpc2VRdWVyeSk7XG4gICAgXG4gICAgICAgICAgaWYgKGV4ZXJjaXNlU25hcHNob3QuZW1wdHkpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGV4ZXJjaXNlczogW10sIGxhc3RWaXNpYmxlOiBudWxsIH07XG4gICAgICAgICAgfVxuICAgIFxuICAgICAgICAgIC8vIEZldGNoIGV4ZXJjaXNlIHZpZGVvcyBzZXBhcmF0ZWx5XG4gICAgICAgICAgY29uc3QgdmlkZW9TbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlVmlkZW9zJykpO1xuICAgICAgICAgIGNvbnN0IGV4ZXJjaXNlVmlkZW9zOiBFeGVyY2lzZVZpZGVvW10gPSB2aWRlb1NuYXBzaG90LmRvY3MubWFwKChkb2MpID0+XG4gICAgICAgICAgICBFeGVyY2lzZVZpZGVvLmZyb21GaXJlYmFzZSh7XG4gICAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICAgIC4uLmRvYy5kYXRhKCksXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgZXhlcmNpc2VzOiBFeGVyY2lzZVtdID0gZXhlcmNpc2VTbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PlxuICAgICAgICAgICAgRXhlcmNpc2UuZnJvbUZpcmViYXNlKHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9KVxuICAgICAgICAgICk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gTWFwIHZpZGVvcyB0byBleGVyY2lzZXMgYW5kIGVuc3VyZSBjb3JyZWN0IGluc3RhbnRpYXRpb25cbiAgICAgICAgICBjb25zdCBtYXBwZWRFeGVyY2lzZXM6IEV4ZXJjaXNlW10gPSBleGVyY2lzZXMubWFwKChleGVyY2lzZURhdGEpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZpZGVvc0ZvckV4ZXJjaXNlID0gZXhlcmNpc2VWaWRlb3MuZmlsdGVyKCh2aWRlbykgPT4gdmlkZW8uZXhlcmNpc2VJZCA9PT0gZXhlcmNpc2VEYXRhLmlkKTtcbiAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBuZXcgRXhlcmNpc2Uoe1xuICAgICAgICAgICAgICAuLi5leGVyY2lzZURhdGEsIC8vIENvcHkgZXhpc3RpbmcgcHJvcGVydGllc1xuICAgICAgICAgICAgICB2aWRlb3M6IHZpZGVvc0ZvckV4ZXJjaXNlLCAvLyBBc3NpZ24gZmlsdGVyZWQgdmlkZW9zXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBGaWx0ZXIgZXhlcmNpc2VzIHdpdGggdmlkZW9zXG4gICAgICAgICAgY29uc3QgZmlsdGVyZWRFeGVyY2lzZXM6IEV4ZXJjaXNlW10gPSBtYXBwZWRFeGVyY2lzZXMuZmlsdGVyKChleGVyY2lzZSkgPT4gZXhlcmNpc2UudmlkZW9zLmxlbmd0aCA+IDApO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbGFzdCB2aXNpYmxlIGRvY3VtZW50IGZvciBwYWdpbmF0aW9uXG4gICAgICAgICAgY29uc3QgbGFzdFZpc2libGUgPSBleGVyY2lzZVNuYXBzaG90LmRvY3MubGVuZ3RoID4gMCA/IGV4ZXJjaXNlU25hcHNob3QuZG9jc1tleGVyY2lzZVNuYXBzaG90LmRvY3MubGVuZ3RoIC0gMV0gOiBudWxsO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB7IGV4ZXJjaXNlczogZmlsdGVyZWRFeGVyY2lzZXMsIGxhc3RWaXNpYmxlIH07XG4gICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcGFnaW5hdGVkIGV4ZXJjaXNlczonLCBlcnJvcik7XG4gICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZ2VuZXJhdGVFeGVyY2lzZUxvZ0lEKHdvcmtvdXRJZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIC8vIENyZWF0ZSBhIGRvY3VtZW50IHJlZmVyZW5jZSBpbiB0aGUgbG9ncyBzdWJjb2xsZWN0aW9uIG9mIHRoZSB3b3Jrb3V0LFxuICAgICAgICAvLyB0aGVuIHJldHVybiBpdHMgZ2VuZXJhdGVkIElELlxuICAgICAgICByZXR1cm4gZG9jKFxuICAgICAgICAgIGNvbGxlY3Rpb24oZGIsICd1c2VycycsIHVzZXJJZCwgJ015Q3JlYXRlZFdvcmtvdXRzJywgd29ya291dElkLCAnbG9ncycpXG4gICAgICAgICkuaWQ7XG4gICAgICB9XG4gIH1cbiAgXG4gIGV4cG9ydCBjb25zdCBleGVyY2lzZVNlcnZpY2UgPSBuZXcgRXhlcmNpc2VTZXJ2aWNlKCk7Il0sIm5hbWVzIjpbImNvbGxlY3Rpb24iLCJnZXREb2NzIiwicXVlcnkiLCJvcmRlckJ5IiwibGltaXQiLCJzdGFydEFmdGVyIiwiZG9jIiwid2hlcmUiLCJkYiIsIkV4ZXJjaXNlIiwiRXhlcmNpc2VWaWRlbyIsIkV4ZXJjaXNlQXV0aG9yIiwiY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcCIsIkV4ZXJjaXNlU2VydmljZSIsIl9hbGxFeGVyY2lzZXMiLCJmZXRjaEV4ZXJjaXNlcyIsImV4ZXJjaXNlU25hcHNob3QiLCJleGVyY2lzZXMiLCJ2aWRlb1NuYXBzaG90IiwiZXhlcmNpc2VWaWRlb3MiLCJtYXBwZWRFeGVyY2lzZXMiLCJlcnJvciIsImRvY3MiLCJtYXAiLCJmcm9tRmlyZWJhc2UiLCJpZCIsImRhdGEiLCJleGVyY2lzZSIsInZpZGVvc0ZvckV4ZXJjaXNlIiwiZmlsdGVyIiwidmlkZW8iLCJ0b0xvd2VyQ2FzZSIsIm5hbWUiLCJ2aWRlb3MiLCJsZW5ndGgiLCJjb25zb2xlIiwiRXJyb3IiLCJmZXRjaEZlYXR1cmVkRXhlcmNpc2VzV2l0aFZpZGVvcyIsInNodWZmbGVkRXhlcmNpc2VzIiwiZXhlcmNpc2VEYXRhIiwiZGVzY3JpcHRpb24iLCJjYXRlZ29yeSIsInByaW1hcnlCb2R5UGFydHMiLCJzZWNvbmRhcnlCb2R5UGFydHMiLCJ0YWdzIiwic3RlcHMiLCJ2aXNpYmlsaXR5IiwiY3VycmVudFZpZGVvUG9zaXRpb24iLCJzZXRzIiwicmVwcyIsIndlaWdodCIsImF1dGhvciIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInNvcnQiLCJNYXRoIiwicmFuZG9tIiwic2xpY2UiLCJnZXRFeGVyY2lzZXNCeUF1dGhvciIsInVzZXJJZCIsInZpZGVvc1JlZiIsInEiLCJxdWVyeVNuYXBzaG90IiwidW5pcXVlRXhlcmNpc2VOYW1lcyIsIlNldCIsImZvckVhY2giLCJ2aWRlb0RhdGEiLCJleGVyY2lzZU5hbWUiLCJhZGQiLCJBcnJheSIsImZyb20iLCJmZXRjaFBhZ2luYXRlZEV4ZXJjaXNlcyIsImxhc3REb2MiLCJwYWdlU2l6ZSIsImV4ZXJjaXNlUXVlcnkiLCJmaWx0ZXJlZEV4ZXJjaXNlcyIsImxhc3RWaXNpYmxlIiwiZW1wdHkiLCJleGVyY2lzZUlkIiwiZ2VuZXJhdGVFeGVyY2lzZUxvZ0lEIiwid29ya291dElkIiwiYWxsRXhlcmNpc2VzIiwiZXhlcmNpc2VTZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/api/firebase/exercise/service.ts\n"));

/***/ }),

/***/ "./src/api/firebase/workout/service.ts":
/*!*********************************************!*\
  !*** ./src/api/firebase/workout/service.ts ***!
  \*********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   workoutService: function() { return /* binding */ workoutService; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @swc/helpers/_/_async_to_generator */ \"./node_modules/@swc/helpers/esm/_async_to_generator.js\");\n/* harmony import */ var _swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @swc/helpers/_/_class_call_check */ \"./node_modules/@swc/helpers/esm/_class_call_check.js\");\n/* harmony import */ var _swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @swc/helpers/_/_create_class */ \"./node_modules/@swc/helpers/esm/_create_class.js\");\n/* harmony import */ var _swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @swc/helpers/_/_object_spread */ \"./node_modules/@swc/helpers/esm/_object_spread.js\");\n/* harmony import */ var _swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @swc/helpers/_/_object_spread_props */ \"./node_modules/@swc/helpers/esm/_object_spread_props.js\");\n/* harmony import */ var _swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @swc/helpers/_/_sliced_to_array */ \"./node_modules/@swc/helpers/esm/_sliced_to_array.js\");\n/* harmony import */ var _swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @swc/helpers/_/_ts_generator */ \"./node_modules/@swc/helpers/esm/_ts_generator.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/api/firebase/config.ts\");\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../user */ \"./src/api/firebase/user/index.ts\");\n/* harmony import */ var _exercise_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../exercise/types */ \"./src/api/firebase/exercise/types.ts\");\n/* harmony import */ var _exercise_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../exercise/service */ \"./src/api/firebase/exercise/service.ts\");\n/* harmony import */ var _workout_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../api/firebase/workout/types */ \"./src/api/firebase/workout/types.ts\");\n/* harmony import */ var _barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! __barrel_optimize__?names=format!=!date-fns */ \"__barrel_optimize__?names=format!=!./node_modules/date-fns/index.js\");\n/* harmony import */ var _utils_timestamp__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/timestamp */ \"./src/utils/timestamp.ts\");\n/* harmony import */ var _utils_formatDate__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../utils/formatDate */ \"./src/utils/formatDate.ts\");\n/* harmony import */ var _redux_store__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../redux/store */ \"./src/redux/store.ts\");\n/* harmony import */ var _redux_workoutSlice__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../redux/workoutSlice */ \"./src/redux/workoutSlice.ts\");\n// src/api/firebase/workout/service.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // Adjust the import path\n\n\n\n\nvar WorkoutService = /*#__PURE__*/ function() {\n    \"use strict\";\n    function WorkoutService() {\n        (0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_10__._)(this, WorkoutService);\n    }\n    var _proto = WorkoutService.prototype;\n    _proto.generateId = function generateId() {\n        return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"workouts\")).id;\n    };\n    // Update the formatWorkoutAndInitializeLogs function\n    _proto.formatWorkoutAndInitializeLogs = function formatWorkoutAndInitializeLogs(exerciseDetails, workoutAuthor) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var _userService_currentUser, workId, exerciseReferences, exerciseLogs, validExerciseDetails, newWorkout;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                workId = _this.generateId(); // Use this.generateId() since it's a class method\n                exerciseReferences = [];\n                exerciseLogs = [];\n                // Ensure exercise details are valid before processing\n                validExerciseDetails = exerciseDetails.filter(function(detail) {\n                    return (detail === null || detail === void 0 ? void 0 : detail.exercise) && detail.exercise.id;\n                });\n                validExerciseDetails.forEach(function(detail, index) {\n                    var _detail_category, _category_details, _category_details1, _category_details2, _userService_currentUser, _userService_currentUser1;\n                    // Ensure exercise instance has all required fields\n                    var exerciseInstance = new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_13__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({}, detail.exercise), {\n                        id: detail.exercise.id || workoutService.generateId(),\n                        name: detail.exercise.name || \"\",\n                        author: detail.exercise.author || {\n                            userId: workoutAuthor || \"PulseAI\",\n                            username: workoutAuthor || \"PulseAI\"\n                        },\n                        description: detail.exercise.description || \"\",\n                        category: detail.exercise.category || {\n                            type: \"weightTraining\",\n                            details: null\n                        },\n                        primaryBodyParts: detail.exercise.primaryBodyParts || [],\n                        secondaryBodyParts: detail.exercise.secondaryBodyParts || [],\n                        tags: detail.exercise.tags || [],\n                        videos: detail.exercise.videos || [],\n                        createdAt: detail.exercise.createdAt || new Date(),\n                        updatedAt: detail.exercise.updatedAt || new Date()\n                    }));\n                    // Create exercise reference with required fields\n                    var exerciseRef = {\n                        exercise: exerciseInstance,\n                        groupId: detail.groupId || 0\n                    };\n                    exerciseReferences.push(exerciseRef);\n                    // Set default values for exercise parameters\n                    var category = ((_detail_category = detail.category) === null || _detail_category === void 0 ? void 0 : _detail_category.type) === \"weightTraining\" ? detail.category : {\n                        type: \"weightTraining\",\n                        details: {\n                            sets: 3,\n                            reps: [\n                                \"12\"\n                            ],\n                            weight: 0,\n                            screenTime: 0\n                        }\n                    };\n                    var _category_details_sets;\n                    var sets = (_category_details_sets = (_category_details = category.details) === null || _category_details === void 0 ? void 0 : _category_details.sets) !== null && _category_details_sets !== void 0 ? _category_details_sets : 3;\n                    var _category_details_reps;\n                    var reps = (_category_details_reps = (_category_details1 = category.details) === null || _category_details1 === void 0 ? void 0 : _category_details1.reps) !== null && _category_details_reps !== void 0 ? _category_details_reps : [\n                        \"12\"\n                    ];\n                    var _category_details_weight;\n                    var weight = (_category_details_weight = (_category_details2 = category.details) === null || _category_details2 === void 0 ? void 0 : _category_details2.weight) !== null && _category_details_weight !== void 0 ? _category_details_weight : 0;\n                    // Create logs for each set with validated data\n                    var setsLogs = Array.from({\n                        length: sets\n                    }, function() {\n                        return new _workout_types__WEBPACK_IMPORTED_MODULE_5__.RepsAndWeightLog({\n                            reps: parseInt(reps[0] || \"12\", 10),\n                            weight: weight || 0\n                        });\n                    });\n                    // Create exercise log with validated data\n                    var exerciseLogId = _exercise_service__WEBPACK_IMPORTED_MODULE_4__.exerciseService.generateExerciseLogID(workId, ((_userService_currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser === void 0 ? void 0 : _userService_currentUser.id) || \"anonymous\");\n                    var log = new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseLog({\n                        id: exerciseLogId,\n                        workoutId: workId,\n                        userId: ((_userService_currentUser1 = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser1 === void 0 ? void 0 : _userService_currentUser1.id) || \"anonymous\",\n                        exercise: exerciseInstance,\n                        logs: setsLogs,\n                        feedback: \"\",\n                        note: detail.notes || \"\",\n                        isSplit: detail.isSplit || false,\n                        logSubmitted: false,\n                        logIsEditing: false,\n                        isCompleted: false,\n                        order: index + 1,\n                        createdAt: new Date(),\n                        updatedAt: new Date(),\n                        completedAt: new Date()\n                    });\n                    exerciseLogs.push(log);\n                });\n                // Create workout with validated data\n                newWorkout = new _workout_types__WEBPACK_IMPORTED_MODULE_5__.Workout({\n                    id: workId,\n                    roundWorkoutId: \"\",\n                    exercises: exerciseReferences,\n                    logs: exerciseLogs,\n                    title: \"\",\n                    description: \"\",\n                    duration: _workout_types__WEBPACK_IMPORTED_MODULE_5__.Workout.estimatedDuration(exerciseReferences) || 0,\n                    workoutRating: \"none\",\n                    useAuthorContent: false,\n                    isCompleted: false,\n                    workoutStatus: \"archived\",\n                    author: ((_userService_currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser === void 0 ? void 0 : _userService_currentUser.id) || \"PulseAI\",\n                    createdAt: new Date(),\n                    updatedAt: new Date(),\n                    zone: _workout_types__WEBPACK_IMPORTED_MODULE_5__.Workout.determineWorkoutZone(exerciseReferences) || \"full\"\n                });\n                return [\n                    2,\n                    {\n                        workout: newWorkout,\n                        exerciseLogs: exerciseLogs\n                    }\n                ];\n            });\n        })();\n    };\n    /**\n   * Fetch the user's current workout (either QueuedUp or InProgress).\n   */ _proto.fetchCurrentWorkout = function fetchCurrentWorkout(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var session;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        return [\n                            4,\n                            _this.fetchCurrentWorkoutSession(userId)\n                        ];\n                    case 1:\n                        session = _state.sent();\n                        return [\n                            2,\n                            session.workout\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getAllSweatlists = function getAllSweatlists(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var workoutsRef, exercisesWithVideos, workoutsSnapshot, workouts, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, workoutDoc, workoutData, workoutId, mappedExercises, workout, logsRef, logsSnapshot, err, error, firestoreError;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"User ID is required\");\n                        }\n                        // Reference to the user's workout collection\n                        workoutsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\");\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            12,\n                            ,\n                            13\n                        ]);\n                        return [\n                            4,\n                            _this.fetchAndMapExercisesWithVideos()\n                        ];\n                    case 2:\n                        exercisesWithVideos = _state.sent();\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(workoutsRef)\n                        ];\n                    case 3:\n                        workoutsSnapshot = _state.sent();\n                        workouts = [];\n                        _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;\n                        _state.label = 4;\n                    case 4:\n                        _state.trys.push([\n                            4,\n                            9,\n                            10,\n                            11\n                        ]);\n                        _iterator = workoutsSnapshot.docs[Symbol.iterator]();\n                        _state.label = 5;\n                    case 5:\n                        if (!!(_iteratorNormalCompletion = (_step = _iterator.next()).done)) return [\n                            3,\n                            8\n                        ];\n                        workoutDoc = _step.value;\n                        workoutData = workoutDoc.data();\n                        workoutId = workoutDoc.id;\n                        // Map the exercises in the workout to the full exercise objects with videos\n                        mappedExercises = (workoutData.exercises || []).map(function(exerciseRef) {\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name === exerciseRef.exercise.name;\n                            });\n                            console.log(\"This is the mapped exercise: \" + fullExercise);\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_13__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({}, exerciseRef), {\n                                exercise: fullExercise || exerciseRef\n                            });\n                        });\n                        // Parse workout data into the desired structure\n                        workout = new _workout_types__WEBPACK_IMPORTED_MODULE_5__.Workout({\n                            id: workoutData.id || \"\",\n                            roundWorkoutId: workoutData.roundWorkoutId || \"\",\n                            collectionId: workoutData.collectionId,\n                            exercises: mappedExercises,\n                            challenge: workoutData.challenge,\n                            logs: [],\n                            title: workoutData.title || \"\",\n                            description: workoutData.description || \"\",\n                            duration: workoutData.duration || 0,\n                            workoutRating: workoutData.workoutRating,\n                            useAuthorContent: workoutData.useAuthorContent || false,\n                            isCompleted: workoutData.isCompleted || false,\n                            workoutStatus: workoutData.workoutStatus || \"notStarted\",\n                            startTime: workoutData.startTime ? new Date(workoutData.startTime) : undefined,\n                            order: workoutData.order,\n                            author: workoutData.author || userId,\n                            createdAt: workoutData.createdAt ? new Date(workoutData.createdAt) : new Date(),\n                            updatedAt: workoutData.updatedAt ? new Date(workoutData.updatedAt) : new Date(),\n                            zone: workoutData.zone || \"FULL_BODY\"\n                        });\n                        // Fetch and process logs\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\", workoutId, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 6:\n                        logsSnapshot = _state.sent();\n                        workout.logs = logsSnapshot.docs.map(function(logDoc) {\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_13__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({}, logDoc.data()), {\n                                id: logDoc.id\n                            });\n                        });\n                        workouts.push(workout);\n                        _state.label = 7;\n                    case 7:\n                        _iteratorNormalCompletion = true;\n                        return [\n                            3,\n                            5\n                        ];\n                    case 8:\n                        return [\n                            3,\n                            11\n                        ];\n                    case 9:\n                        err = _state.sent();\n                        _didIteratorError = true;\n                        _iteratorError = err;\n                        return [\n                            3,\n                            11\n                        ];\n                    case 10:\n                        try {\n                            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                                _iterator[\"return\"]();\n                            }\n                        } finally{\n                            if (_didIteratorError) {\n                                throw _iteratorError;\n                            }\n                        }\n                        return [\n                            7\n                        ];\n                    case 11:\n                        return [\n                            2,\n                            workouts\n                        ];\n                    case 12:\n                        error = _state.sent();\n                        firestoreError = error;\n                        console.error(\"Error fetching sweatlists:\", firestoreError.message);\n                        throw new Error(\"Failed to fetch sweatlists\");\n                    case 13:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getUserChallengesByChallengeId = function getUserChallengesByChallengeId(challengeId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var userChallengesRef, q, snapshot, userChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"challengeId\", \"==\", challengeId));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        userChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            return new _workout_types__WEBPACK_IMPORTED_MODULE_5__.UserChallenge(doc.id, data);\n                        });\n                        if (userChallenges.length > 0) {\n                            return [\n                                2,\n                                {\n                                    userChallenges: userChallenges\n                                }\n                            ];\n                        } else {\n                            return [\n                                2,\n                                {\n                                    userChallenges: [],\n                                    error: \"No user challenges found for this challenge.\"\n                                }\n                            ];\n                        }\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges by challengeId:\", error);\n                        return [\n                            2,\n                            {\n                                userChallenges: [],\n                                error: error instanceof Error ? error.message : \"Unknown error\"\n                            }\n                        ];\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetches workout summaries for a specific date.\n   * @param date - The date for which workout summaries are being fetched.\n   * @returns A promise resolving to an array of workout summaries.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ _proto.fetchWorkoutSummaries = function fetchWorkoutSummaries(date) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var currentUser, formattedDate, summariesRef, q, snapshot, error, firestoreError;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Format the date to match the format in Firestore ('MM-dd-yyyy')\n                        formattedDate = (0,_barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_15__.format)(date, \"MM-dd-yyyy\");\n                        // Reference to the user's workoutSummaries subcollection\n                        summariesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", currentUser.id, \"workoutSummaries\");\n                        // Create a query to filter documents by the specified date\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(summariesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"date\", \"==\", formattedDate));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // Map the documents to an array of WorkoutSummary objects\n                        return [\n                            2,\n                            snapshot.docs.map(function(doc) {\n                                return (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({\n                                    id: doc.id\n                                }, doc.data());\n                            })\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        firestoreError = error;\n                        console.error(\"Error fetching workout summaries:\", firestoreError.message);\n                        throw new Error(firestoreError.message);\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchAllWorkoutSummaries = function fetchAllWorkoutSummaries() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var currentUser, summariesRef, q, snapshot, error, firestoreError;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Reference to the user's workoutSummaries subcollection\n                        summariesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", currentUser.id, \"workoutSummary\");\n                        // Query to retrieve all workout summaries, sorted by `createdAt` in ascending order\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(summariesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"asc\")); // Adjust field name based on your schema\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // Map the documents to an array of WorkoutSummary objects\n                        return [\n                            2,\n                            snapshot.docs.map(function(doc) {\n                                return (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({\n                                    id: doc.id\n                                }, doc.data());\n                            })\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        firestoreError = error;\n                        console.error(\"Error fetching all workout summaries:\", firestoreError.message);\n                        throw new Error(firestoreError.message);\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n * Fetch user challenges by userId.\n * @param userId The ID of the user to fetch challenges for.\n * @returns A promise resolving to an array of user challenges.\n * @throws If the Firestore query fails.\n */ _proto.fetchUserChallengesByUserId = function fetchUserChallengesByUserId(userId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var userChallengesRef, q, snapshot, userChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", userId));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // console.log(`Total challenges fetched: ${snapshot.docs.length}`);\n                        userChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            // console.log(`Processing challenge with ID: ${doc.id}`, data);\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_13__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({\n                                id: doc.id\n                            }, data), {\n                                challenge: data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_5__.Challenge({\n                                    id: data.challenge.id,\n                                    title: data.challenge.title,\n                                    subtitle: data.challenge.subtitle,\n                                    participants: data.challenge.participants || [],\n                                    status: data.challenge.status,\n                                    startDate: data.challenge.startDate ? new Date(data.challenge.startDate) : new Date(),\n                                    endDate: data.challenge.endDate ? new Date(data.challenge.endDate) : new Date(),\n                                    createdAt: data.challenge.createdAt ? new Date(data.challenge.createdAt) : new Date(),\n                                    updatedAt: data.challenge.updatedAt ? new Date(data.challenge.updatedAt) : new Date(),\n                                    introVideos: (data.challenge.introVideos || []).map(function(v) {\n                                        return new _workout_types__WEBPACK_IMPORTED_MODULE_5__.IntroVideo({\n                                            id: v.id,\n                                            userId: v.userId,\n                                            videoUrl: v.videoUrl\n                                        });\n                                    })\n                                }) : undefined,\n                                createdAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_6__.convertTimestamp)(data.createdAt),\n                                updatedAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_6__.convertTimestamp)(data.updatedAt)\n                            });\n                        });\n                        // console.log('All challenges after processing:', JSON.stringify(userChallenges, null, 2));\n                        return [\n                            2,\n                            userChallenges\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges by userId:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchCollectionWithSweatLists = function fetchCollectionWithSweatLists(collectionId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var collection, sweatLists, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, sweatlistIdentifier, _ref, workout, error, err, error1;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            12,\n                            ,\n                            13\n                        ]);\n                        return [\n                            4,\n                            _this.getCollectionById(collectionId)\n                        ];\n                    case 1:\n                        collection = _state.sent();\n                        // Fetch sweat lists (workouts)\n                        sweatLists = [];\n                        _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;\n                        _state.label = 2;\n                    case 2:\n                        _state.trys.push([\n                            2,\n                            9,\n                            10,\n                            11\n                        ]);\n                        _iterator = (collection.sweatlistIds || [])[Symbol.iterator]();\n                        _state.label = 3;\n                    case 3:\n                        if (!!(_iteratorNormalCompletion = (_step = _iterator.next()).done)) return [\n                            3,\n                            8\n                        ];\n                        sweatlistIdentifier = _step.value;\n                        _state.label = 4;\n                    case 4:\n                        _state.trys.push([\n                            4,\n                            6,\n                            ,\n                            7\n                        ]);\n                        return [\n                            4,\n                            _this.fetchSavedWorkout(sweatlistIdentifier.sweatlistAuthorId, sweatlistIdentifier.id)\n                        ];\n                    case 5:\n                        _ref = _swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_16__._.apply(void 0, [\n                            _state.sent(),\n                            1\n                        ]), workout = _ref[0];\n                        if (workout) {\n                            sweatLists.push(workout);\n                        }\n                        return [\n                            3,\n                            7\n                        ];\n                    case 6:\n                        error = _state.sent();\n                        console.error(\"Error fetching workout \".concat(sweatlistIdentifier.id, \":\"), error);\n                        return [\n                            3,\n                            7\n                        ];\n                    case 7:\n                        _iteratorNormalCompletion = true;\n                        return [\n                            3,\n                            3\n                        ];\n                    case 8:\n                        return [\n                            3,\n                            11\n                        ];\n                    case 9:\n                        err = _state.sent();\n                        _didIteratorError = true;\n                        _iteratorError = err;\n                        return [\n                            3,\n                            11\n                        ];\n                    case 10:\n                        try {\n                            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                                _iterator[\"return\"]();\n                            }\n                        } finally{\n                            if (_didIteratorError) {\n                                throw _iteratorError;\n                            }\n                        }\n                        return [\n                            7\n                        ];\n                    case 11:\n                        return [\n                            2,\n                            {\n                                collection: collection,\n                                sweatLists: sweatLists\n                            }\n                        ];\n                    case 12:\n                        error1 = _state.sent();\n                        console.error(\"Error fetching collection with sweat lists:\", error1);\n                        throw error1;\n                    case 13:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchSavedWorkout = function fetchSavedWorkout(userId, workoutId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var workoutRef, workoutSnap, workoutData, exercisesWithVideos, mappedExercises, workout, logsRef, logsSnapshot, logs, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            4,\n                            ,\n                            5\n                        ]);\n                        console.log(\"Starting fetchSavedWorkout with:\", {\n                            userId: userId,\n                            workoutId: workoutId\n                        });\n                        // Fetch the workout document\n                        workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\", workoutId);\n                        console.log(\"Fetching workout document from:\", workoutRef.path);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(workoutRef)\n                        ];\n                    case 1:\n                        workoutSnap = _state.sent();\n                        console.log(\"Workout document exists:\", workoutSnap.exists());\n                        if (!workoutSnap.exists()) {\n                            console.log(\"No workout document found\");\n                            return [\n                                2,\n                                [\n                                    null,\n                                    null\n                                ]\n                            ];\n                        }\n                        workoutData = workoutSnap.data();\n                        console.log(\"Raw workout data:\", workoutData);\n                        // Get exercises with videos mapped\n                        console.log(\"Fetching exercises with videos...\");\n                        return [\n                            4,\n                            _this.fetchAndMapExercisesWithVideos()\n                        ];\n                    case 2:\n                        exercisesWithVideos = _state.sent();\n                        console.log(\"Fetched exercises with videos:\", exercisesWithVideos);\n                        // Map the exercises\n                        console.log(\"Mapping exercises in workout:\", workoutData.exercises);\n                        mappedExercises = (workoutData.exercises || []).map(function(exerciseRef) {\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name === exerciseRef.exercise.name;\n                            });\n                            console.log(\"Mapping exercise:\", {\n                                name: exerciseRef.exercise.name,\n                                foundMatch: !!fullExercise\n                            });\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_13__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({}, exerciseRef), {\n                                exercise: fullExercise || exerciseRef.exercise\n                            });\n                        });\n                        workoutData.exercises = mappedExercises;\n                        // Create workout instance\n                        console.log(\"Creating Workout instance with data:\", {\n                            id: workoutData.id,\n                            title: workoutData.title,\n                            exerciseCount: mappedExercises.length\n                        });\n                        workout = new _workout_types__WEBPACK_IMPORTED_MODULE_5__.Workout((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({\n                            id: workoutId\n                        }, workoutData));\n                        // Fetch logs\n                        console.log(\"Fetching workout logs...\");\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 3:\n                        logsSnapshot = _state.sent();\n                        console.log(\"Found logs count:\", logsSnapshot.size);\n                        logs = logsSnapshot.docs.map(function(logDoc) {\n                            var logData = logDoc.data();\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name === logData.exercise.name;\n                            });\n                            console.log(\"Processing log:\", {\n                                logId: logDoc.id,\n                                exerciseName: logData.exercise.name,\n                                foundExerciseMatch: !!fullExercise\n                            });\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseLog({\n                                id: logDoc.id,\n                                workoutId: workoutId,\n                                userId: userId,\n                                exercise: fullExercise || logData.exercise,\n                                logs: logData.log || [],\n                                feedback: logData.feedback || \"\",\n                                note: logData.note || \"\",\n                                recommendedWeight: logData.recommendedWeight || \"calculating...\",\n                                isSplit: logData.isSplit || false,\n                                isBodyWeight: logData.isBodyWeight || false,\n                                logSubmitted: logData.logSubmitted || false,\n                                logIsEditing: logData.logIsEditing || false,\n                                isCompleted: logData.isCompleted || false,\n                                completedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_7__.convertFirestoreTimestamp)(logData.completedAt),\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_7__.convertFirestoreTimestamp)(logData.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_7__.convertFirestoreTimestamp)(logData.updatedAt)\n                            });\n                        });\n                        workout.logs = logs;\n                        console.log(\"Returning workout and logs:\", {\n                            workoutId: workout.id,\n                            logsCount: logs.length\n                        });\n                        return [\n                            2,\n                            [\n                                workout,\n                                logs\n                            ]\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error fetching saved workout:\", error);\n                        throw error; // Throw the error to see the full stack trace\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n * Fetch user challenges by challengeId.\n * @param challengeId The ID of the challenge to fetch associated user challenges for.\n * @returns A promise resolving to an array of user challenges.\n * @throws If the Firestore query fails.\n */ _proto.fetchUserChallengesByChallengeId = function fetchUserChallengesByChallengeId(challengeId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var userChallengesRef, q, snapshot, userChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"challengeId\", \"==\", challengeId));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // console.log(`Total user challenges fetched: ${snapshot.docs.length}`);\n                        userChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            // console.log(`Processing user challenge with ID: ${doc.id}`, data);\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_13__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({\n                                id: doc.id\n                            }, data), {\n                                challenge: data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_5__.Challenge({\n                                    id: data.challenge.id,\n                                    title: data.challenge.title,\n                                    subtitle: data.challenge.subtitle,\n                                    participants: data.challenge.participants || [],\n                                    status: data.challenge.status,\n                                    startDate: data.challenge.startDate ? new Date(data.challenge.startDate) : new Date(),\n                                    endDate: data.challenge.endDate ? new Date(data.challenge.endDate) : new Date(),\n                                    createdAt: data.challenge.createdAt ? new Date(data.challenge.createdAt) : new Date(),\n                                    updatedAt: data.challenge.updatedAt ? new Date(data.challenge.updatedAt) : new Date(),\n                                    introVideos: (data.challenge.introVideos || []).map(function(v) {\n                                        return new _workout_types__WEBPACK_IMPORTED_MODULE_5__.IntroVideo({\n                                            id: v.id,\n                                            userId: v.userId,\n                                            videoUrl: v.videoUrl\n                                        });\n                                    })\n                                }) : undefined,\n                                createdAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_6__.convertTimestamp)(data.createdAt),\n                                updatedAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_6__.convertTimestamp)(data.updatedAt)\n                            });\n                        });\n                        // console.log('All user challenges after processing:', JSON.stringify(userChallenges, null, 2));\n                        return [\n                            2,\n                            userChallenges\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges by challengeId:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getCollectionById = function getCollectionById(id) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var docRef, docSnap, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        console.log(\"Fetching collection with id:\", id);\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\", id);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef)\n                        ];\n                    case 2:\n                        docSnap = _state.sent();\n                        if (docSnap.exists()) {\n                            return [\n                                2,\n                                new _workout_types__WEBPACK_IMPORTED_MODULE_5__.SweatlistCollection((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({\n                                    id: docSnap.id\n                                }, docSnap.data()))\n                            ];\n                        } else {\n                            throw new Error(\"Collection not found\");\n                        }\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error getting collection by ID:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetch user challenges by userId and filter for active challenges.\n   * @returns A promise resolving to an array of active challenges.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ _proto.fetchActiveChallenges = function fetchActiveChallenges() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var currentUser, userChallengesRef, q, snapshot, allChallenges, activeChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", currentUser.id));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // console.log(`Total challenges fetched: ${snapshot.docs.length}`);\n                        allChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            // console.log(`Processing challenge with ID: ${doc.id}`, data);\n                            // Use the Challenge constructor to parse the challenge data\n                            // console.log(\"date before format: \" + convertFirestoreTimestamp(data.challenge.startDate));\n                            var challenge = data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_5__.Challenge({\n                                id: data.challenge.id,\n                                title: data.challenge.title,\n                                subtitle: data.challenge.subtitle,\n                                participants: data.challenge.participants || [],\n                                status: data.challenge.status,\n                                startDate: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_7__.convertFirestoreTimestamp)(data.challenge.startDate),\n                                endDate: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_7__.convertFirestoreTimestamp)(data.challenge.endDate),\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_7__.convertFirestoreTimestamp)(data.challenge.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_7__.convertFirestoreTimestamp)(data.challenge.updatedAt),\n                                introVideos: (data.challenge.introVideos || []).map(function(v) {\n                                    return new _workout_types__WEBPACK_IMPORTED_MODULE_5__.IntroVideo({\n                                        id: v.id,\n                                        userId: v.userId,\n                                        videoUrl: v.videoUrl\n                                    });\n                                })\n                            }) : undefined;\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_13__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({\n                                id: doc.id\n                            }, data), {\n                                challenge: challenge,\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_7__.convertFirestoreTimestamp)(data.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_7__.convertFirestoreTimestamp)(data.updatedAt)\n                            });\n                        });\n                        // console.log('All challenges after processing:', JSON.stringify(allChallenges, null, 2));\n                        // Filter for active challenges (endDate > current date)\n                        activeChallenges = allChallenges.filter(function(userChallenge) {\n                            var _userChallenge_challenge;\n                            var endDate = (_userChallenge_challenge = userChallenge.challenge) === null || _userChallenge_challenge === void 0 ? void 0 : _userChallenge_challenge.endDate;\n                            // console.log(\n                            //   `Evaluating challenge ID: ${userChallenge.id}, End Date: ${endDate}, Current Date: ${new Date()}`\n                            // );\n                            return endDate && endDate > new Date();\n                        });\n                        // console.log(`Total active challenges: ${activeChallenges.length}`, activeChallenges);\n                        return [\n                            2,\n                            activeChallenges\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching active challenges:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetch user challenges by userId.\n   * @returns A promise resolving to an array of challenges.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ _proto.fetchUserChallenges = function fetchUserChallenges() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var currentUser, userChallengesRef, q, snapshot, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Reference to the user-challenge collection\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        // Query challenges where userId matches the current user's ID\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", currentUser.id));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // Map documents to an array of Challenge objects\n                        return [\n                            2,\n                            snapshot.docs.map(function(doc) {\n                                return (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({\n                                    id: doc.id\n                                }, doc.data());\n                            })\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges:\", error);\n                        throw new Error(\"Failed to fetch user challenges\");\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    //update the workout summary,\n    _proto.updateWorkoutSummary = function updateWorkoutSummary(param) {\n        var userId = param.userId, workoutId = param.workoutId, summary = param.summary;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var summaryRef, summaryData, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"No user ID provided\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        // Create a reference to the collection\n                        summaryRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSummary\", summary.id);\n                        // Convert summary to a plain object for Firestore\n                        summaryData = {\n                            id: summary.id,\n                            workoutId: summary.workoutId,\n                            exercises: summary.exercises,\n                            bodyParts: summary.bodyParts,\n                            secondaryBodyParts: summary.secondaryBodyParts,\n                            workoutTitle: summary.workoutTitle,\n                            caloriesBurned: summary.caloriesBurned,\n                            workoutRating: summary.workoutRating,\n                            exercisesCompleted: summary.exercisesCompleted,\n                            aiInsight: summary.aiInsight,\n                            recommendations: summary.recommendations,\n                            gifURLs: summary.gifURLs,\n                            recommendedWork: summary.recommendedWork,\n                            isCompleted: summary.isCompleted,\n                            createdAt: summary.createdAt,\n                            updatedAt: new Date(),\n                            completedAt: summary.completedAt,\n                            duration: summary.duration\n                        };\n                        // Set data with merge enabled (equivalent to Swift's setData with merge: true)\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(summaryRef, summaryData, {\n                                merge: true\n                            })\n                        ];\n                    case 2:\n                        _state.sent();\n                        console.log(\"Workout summary document updated successfully\");\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error updating workout summary:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.updateWorkoutLogs = function updateWorkoutLogs(param) {\n        var userId = param.userId, workoutId = param.workoutId, logs = param.logs;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var workoutRef, logsRef, batch, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", workoutId);\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\");\n                        batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n                        logs.forEach(function(log) {\n                            var logDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(logsRef, log.id);\n                            batch.update(logDocRef, (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({}, log.toDictionary()));\n                        });\n                        return [\n                            4,\n                            batch.commit()\n                        ];\n                    case 1:\n                        _state.sent();\n                        return [\n                            3,\n                            3\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error updating workout logs:\", error);\n                        throw error;\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // The cancelWorkout method – it deletes the workout session and summary (if any),\n    // cleans up the local state, and logs the cancellation.\n    _proto.cancelWorkout = function cancelWorkout(workout, workoutSummary) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var _userService_currentUser, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!((_userService_currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser === void 0 ? void 0 : _userService_currentUser.id) || !workout) {\n                            throw new Error(\"User not authenticated.\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            5,\n                            ,\n                            6\n                        ]);\n                        return [\n                            4,\n                            _this.deleteWorkoutSession(workout.id)\n                        ];\n                    case 2:\n                        _state.sent();\n                        if (!workoutSummary) return [\n                            3,\n                            4\n                        ];\n                        return [\n                            4,\n                            _this.deleteWorkoutSummary(workoutSummary.id)\n                        ];\n                    case 3:\n                        _state.sent();\n                        _state.label = 4;\n                    case 4:\n                        _this.cleanUpWorkoutInProgress();\n                        console.log(\"Workout canceled and cleaned up successfully.\");\n                        return [\n                            3,\n                            6\n                        ];\n                    case 5:\n                        error = _state.sent();\n                        console.error(\"Error canceling workout:\", error);\n                        throw error;\n                    case 6:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // Deletes a workout session document and all its subcollection \"logs\"\n    _proto.deleteWorkoutSession = function deleteWorkoutSession(workoutId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var _userService_currentUser, userId, workoutRef, logsRef, logsSnapshot, batch, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!((_userService_currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser === void 0 ? void 0 : _userService_currentUser.id) || !workoutId) {\n                            throw new Error(\"User not authenticated.\");\n                        }\n                        userId = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser.id;\n                        workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", workoutId);\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            4,\n                            ,\n                            5\n                        ]);\n                        // Delete all logs in the subcollection\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 2:\n                        logsSnapshot = _state.sent();\n                        batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n                        logsSnapshot.docs.forEach(function(logDoc) {\n                            batch[\"delete\"](logDoc.ref);\n                        });\n                        // Delete the main workout document\n                        batch[\"delete\"](workoutRef);\n                        return [\n                            4,\n                            batch.commit()\n                        ];\n                    case 3:\n                        _state.sent();\n                        console.log(\"Workout session and logs deleted successfully.\");\n                        return [\n                            3,\n                            5\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error deleting workout session:\", error);\n                        throw error;\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // Deletes the workout summary document.\n    _proto.deleteWorkoutSummary = function deleteWorkoutSummary(workoutSummaryId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var _userService_currentUser, summaryRef, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!workoutSummaryId || !((_userService_currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser === void 0 ? void 0 : _userService_currentUser.id)) {\n                            return [\n                                2\n                            ];\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        summaryRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser.id, \"workoutSummary\", workoutSummaryId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.deleteDoc)(summaryRef)\n                        ];\n                    case 2:\n                        _state.sent();\n                        console.log(\"Workout summary deleted successfully.\");\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error deleting workout summary:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // Clean up local storage and in-memory workout state.\n    _proto.cleanUpWorkoutInProgress = function cleanUpWorkoutInProgress() {\n        _redux_store__WEBPACK_IMPORTED_MODULE_8__.store.dispatch((0,_redux_workoutSlice__WEBPACK_IMPORTED_MODULE_9__.resetWorkoutState)());\n    };\n    /**\n   * Fetch the workout session from Firestore, returning { workout, logs }.\n   * Checks first for a QueuedUp session, then for InProgress.\n   */ _proto.fetchCurrentWorkoutSession = function fetchCurrentWorkoutSession(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var exerciseSnapshot, videoSnapshot, exerciseVideos, exercisesWithVideos, workoutSessionsRef, q, snap;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) throw new Error(\"No user ID provided\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseVideo.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        exercisesWithVideos = exerciseSnapshot.docs.map(function(doc) {\n                            var exercise = _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({\n                                id: doc.id\n                            }, doc.data()));\n                            var matchingVideos = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            });\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_13__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({}, exercise), {\n                                videos: matchingVideos\n                            }));\n                        });\n                        workoutSessionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(workoutSessionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", _workout_types__WEBPACK_IMPORTED_MODULE_5__.WorkoutStatus.QueuedUp));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 3:\n                        snap = _state.sent();\n                        if (!snap.empty) {\n                            return [\n                                2,\n                                _this.processWorkoutSessionDocument(snap.docs[0], exercisesWithVideos)\n                            ];\n                        }\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(workoutSessionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", _workout_types__WEBPACK_IMPORTED_MODULE_5__.WorkoutStatus.InProgress));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 4:\n                        snap = _state.sent();\n                        if (!snap.empty) {\n                            return [\n                                2,\n                                _this.processWorkoutSessionDocument(snap.docs[0], exercisesWithVideos)\n                            ];\n                        }\n                        return [\n                            2,\n                            {\n                                workout: null,\n                                logs: null\n                            }\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchAndMapExercisesWithVideos = function fetchAndMapExercisesWithVideos() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var exerciseSnapshot, exercises, videoSnapshot, exerciseVideos, exercisesWithVideos, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseVideo.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        // console.log(`Fetched ${exerciseVideos.length} exercise videos`);\n                        // 3. Map videos to exercises\n                        exercisesWithVideos = exercises.map(function(exercise) {\n                            var matchingVideos = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            });\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_13__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({}, exercise), {\n                                videos: matchingVideos\n                            }));\n                        });\n                        // console.log('Finished mapping exercises with videos');\n                        // console.log(`Total exercises with videos: ${exercisesWithVideos.length}`);\n                        return [\n                            2,\n                            exercisesWithVideos\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching and mapping exercises with videos:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Helper to build the Workout object + any logs from the snapshot.\n   */ _proto.fetchAllWorkoutSessions = function fetchAllWorkoutSessions(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var exerciseSnapshot, exercises, videoSnapshot, exerciseVideos, exercisesWithVideos, workoutSessionsRef, snap, sessions, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"No user ID provided\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            6,\n                            ,\n                            7\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 2:\n                        exerciseSnapshot = _state.sent();\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 3:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseVideo.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        exercisesWithVideos = exercises.map(function(exercise) {\n                            var matchingVideos = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            });\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_13__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({}, exercise), {\n                                videos: matchingVideos\n                            }));\n                        });\n                        workoutSessionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(workoutSessionsRef)\n                        ];\n                    case 4:\n                        snap = _state.sent();\n                        if (snap.empty) {\n                            console.log(\"No workout sessions found for user\");\n                            return [\n                                2,\n                                []\n                            ];\n                        }\n                        return [\n                            4,\n                            Promise.all(snap.docs.map(function() {\n                                var _ref = (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function(doc) {\n                                    var sessionData;\n                                    return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                                        switch(_state.label){\n                                            case 0:\n                                                return [\n                                                    4,\n                                                    _this.processWorkoutSessionDocument(doc, exercisesWithVideos)\n                                                ];\n                                            case 1:\n                                                sessionData = _state.sent();\n                                                if (sessionData.logs) {\n                                                    sessionData.logs.sort(function(a, b) {\n                                                        var _a_order;\n                                                        var orderA = (_a_order = a.order) !== null && _a_order !== void 0 ? _a_order : 0;\n                                                        var _b_order;\n                                                        var orderB = (_b_order = b.order) !== null && _b_order !== void 0 ? _b_order : 0;\n                                                        return orderA - orderB;\n                                                    });\n                                                }\n                                                return [\n                                                    2,\n                                                    sessionData\n                                                ];\n                                        }\n                                    });\n                                });\n                                return function(doc) {\n                                    return _ref.apply(this, arguments);\n                                };\n                            }()))\n                        ];\n                    case 5:\n                        sessions = _state.sent();\n                        return [\n                            2,\n                            sessions\n                        ];\n                    case 6:\n                        error = _state.sent();\n                        console.error(\"Error fetching workout sessions:\", error);\n                        throw error;\n                    case 7:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.updateCollection = function updateCollection(collection) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var collRef, newDocRef, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        collRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\");\n                        // If collection.id is empty, generate a new doc ID and assign it.\n                        if (!collection.id || collection.id.trim() === \"\") {\n                            newDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(collRef);\n                            collection.id = newDocRef.id;\n                        }\n                        // Ensure the challenge id matches the collection id.\n                        if (collection.challenge) {\n                            collection.challenge.id = collection.id;\n                        }\n                        // Update the updatedAt field.\n                        collection.updatedAt = new Date();\n                        // Save the collection to Firestore.\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(collRef, collection.id), collection.toDictionary())\n                        ];\n                    case 1:\n                        _state.sent();\n                        console.log(\"Collection updated successfully\");\n                        return [\n                            2,\n                            collection\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error updating collection document:\", error);\n                        throw new Error(\"Error while updating the collection\");\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.processWorkoutSessionDocument = function processWorkoutSessionDocument(workoutDoc, exercisesWithVideos) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var data, mappedExercises, workout, logsRef, logsSnapshot, logs;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        data = workoutDoc.data();\n                        // Map exercises with their full data and videos\n                        mappedExercises = (data.exercises || []).map(function(exerciseRef) {\n                            var _exerciseRef_exercise_name, _exerciseRef_exercise;\n                            // Find the full exercise with videos\n                            var exerciseNameLower = (_exerciseRef_exercise = exerciseRef.exercise) === null || _exerciseRef_exercise === void 0 ? void 0 : (_exerciseRef_exercise_name = _exerciseRef_exercise.name) === null || _exerciseRef_exercise_name === void 0 ? void 0 : _exerciseRef_exercise_name.toLowerCase().trim();\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name.toLowerCase().trim() === exerciseNameLower;\n                            });\n                            // If full exercise found, return it, otherwise use the original\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_13__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({}, exerciseRef), {\n                                exercise: fullExercise || exerciseRef.exercise\n                            });\n                        });\n                        // Create the workout with mapped exercises\n                        workout = new _workout_types__WEBPACK_IMPORTED_MODULE_5__.Workout({\n                            id: workoutDoc.id,\n                            roundWorkoutId: data.roundWorkoutId || \"\",\n                            exercises: mappedExercises,\n                            title: data.title || \"\",\n                            description: data.description || \"\",\n                            duration: data.duration || 0,\n                            useAuthorContent: data.useAuthorContent || false,\n                            isCompleted: data.isCompleted || false,\n                            workoutStatus: data.workoutStatus || _workout_types__WEBPACK_IMPORTED_MODULE_5__.WorkoutStatus.Archived,\n                            author: data.author || \"\",\n                            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_7__.convertFirestoreTimestamp)(data.createdAt),\n                            updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_7__.convertFirestoreTimestamp)(data.updatedAt),\n                            startTime: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_7__.convertFirestoreTimestamp)(data.startTime),\n                            collectionId: data.collectionId,\n                            challenge: data.challenge,\n                            logs: (data.logs || []).map(function(logData) {\n                                var _logData_exercise_name, _logData_exercise;\n                                // Map logs with full exercises\n                                var exerciseNameLower = (_logData_exercise = logData.exercise) === null || _logData_exercise === void 0 ? void 0 : (_logData_exercise_name = _logData_exercise.name) === null || _logData_exercise_name === void 0 ? void 0 : _logData_exercise_name.toLowerCase().trim();\n                                var fullExercise = exercisesWithVideos.find(function(ex) {\n                                    return ex.name.toLowerCase().trim() === exerciseNameLower;\n                                });\n                                return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_13__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({}, logData), {\n                                    exercise: fullExercise || logData.exercise\n                                });\n                            }),\n                            workoutRating: data.workoutRating,\n                            order: data.order,\n                            zone: data.zone || _workout_types__WEBPACK_IMPORTED_MODULE_5__.BodyZone.FullBody\n                        });\n                        console.log(\"The Workout ID is: \" + workout.id);\n                        // Fetch logs from subcollection\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutDoc.ref, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 1:\n                        logsSnapshot = _state.sent();\n                        logs = logsSnapshot.docs.map(function(logDoc) {\n                            var _logData_exercise_name, _logData_exercise;\n                            var logData = logDoc.data();\n                            // Find the full exercise with videos\n                            var exerciseNameLower = (_logData_exercise = logData.exercise) === null || _logData_exercise === void 0 ? void 0 : (_logData_exercise_name = _logData_exercise.name) === null || _logData_exercise_name === void 0 ? void 0 : _logData_exercise_name.toLowerCase().trim();\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name.toLowerCase().trim() === exerciseNameLower;\n                            });\n                            // Prepare log data with full exercise\n                            var preparedLogData = (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_13__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({}, logData), {\n                                id: logDoc.id,\n                                workoutId: workout.id,\n                                exercise: fullExercise || logData.exercise,\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_7__.convertFirestoreTimestamp)(logData.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_7__.convertFirestoreTimestamp)(logData.updatedAt)\n                            });\n                            // Use the ExerciseLog constructor to ensure proper mapping\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseLog(preparedLogData);\n                        });\n                        return [\n                            2,\n                            {\n                                workout: workout,\n                                logs: logs\n                            }\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.saveWorkoutSession = function saveWorkoutSession(param) {\n        var userId = param.userId, workout = param.workout, logs = param.logs;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var currentDate, cleanWorkout, workoutSessionRef, logsRef, logBatch, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) throw new Error(\"No user ID provided\");\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            4,\n                            ,\n                            5\n                        ]);\n                        currentDate = new Date();\n                        cleanWorkout = new _workout_types__WEBPACK_IMPORTED_MODULE_5__.Workout((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_13__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_14__._)({}, workout), {\n                            roundWorkoutId: \"\".concat(workout.id, \"-\").concat(currentDate.getTime()),\n                            workoutStatus: _workout_types__WEBPACK_IMPORTED_MODULE_5__.WorkoutStatus.QueuedUp,\n                            createdAt: currentDate,\n                            updatedAt: currentDate,\n                            startTime: currentDate,\n                            logs: []\n                        }));\n                        workoutSessionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\"));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(workoutSessionRef, cleanWorkout.toDictionary())\n                        ];\n                    case 2:\n                        _state.sent();\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutSessionRef, \"logs\");\n                        logBatch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n                        logs.forEach(function(log, index) {\n                            var logDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(logsRef, \"\".concat(log.id, \"-\").concat(currentDate.getTime()));\n                            logBatch.set(logDocRef, {\n                                id: logDocRef.id,\n                                workoutId: workoutSessionRef.id,\n                                exercise: log.exercise.toDictionary(),\n                                order: index,\n                                createdAt: currentDate.getTime(),\n                                updatedAt: currentDate.getTime(),\n                                logSubmitted: false,\n                                isCompleted: false\n                            });\n                        });\n                        return [\n                            4,\n                            logBatch.commit()\n                        ];\n                    case 3:\n                        _state.sent();\n                        return [\n                            2,\n                            cleanWorkout\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error saving workout session:\", error);\n                        throw error;\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Example \"join challenge\" method using the client SDK (no admin privileges).\n   * This creates a doc in `user-challenge` with the userId, challengeId, etc.\n   */ _proto.joinChallenge = function joinChallenge(param) {\n        var username = param.username, challengeId = param.challengeId;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_11__._)(function() {\n            var currentUser, usersRef, userQuery, userSnapshot, userDoc, userData, userId, challengeRef, challengeSnap, challenge, userChallengeId, userChallengeData;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_12__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        // 1) Make sure we have a signed-in user\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!currentUser) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // 2) Find the user doc by username\n                        usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\");\n                        userQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"username\", \"==\", username));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(userQuery)\n                        ];\n                    case 1:\n                        userSnapshot = _state.sent();\n                        if (userSnapshot.empty) {\n                            throw new Error(\"User not found\");\n                        }\n                        userDoc = userSnapshot.docs[0];\n                        userData = userDoc.data();\n                        userId = userDoc.id;\n                        // 3) Check if the challenge doc exists\n                        challengeRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\", challengeId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(challengeRef)\n                        ];\n                    case 2:\n                        challengeSnap = _state.sent();\n                        if (!challengeSnap.exists()) {\n                            throw new Error(\"Challenge not found\");\n                        }\n                        challenge = challengeSnap.data();\n                        // 4) Build new user-challenge document\n                        userChallengeId = \"\".concat(challengeId, \"-\").concat(userId, \"-\").concat(Date.now());\n                        userChallengeData = {\n                            id: userChallengeId,\n                            challenge: challenge,\n                            challengeId: challengeId,\n                            userId: userId,\n                            fcmToken: userData.fcmToken || \"\",\n                            profileImage: userData.profileImage || {},\n                            progress: 0,\n                            completedWorkouts: [],\n                            isCompleted: false,\n                            uid: userId,\n                            location: userData.location || null,\n                            city: \"\",\n                            country: \"\",\n                            timezone: \"\",\n                            username: username,\n                            joinDate: new Date(),\n                            createdAt: new Date(),\n                            updatedAt: new Date(),\n                            pulsePoints: {\n                                baseCompletion: 0,\n                                firstCompletion: 0,\n                                streakBonus: 0,\n                                checkInBonus: 0,\n                                effortRating: 0,\n                                chatParticipation: 0,\n                                locationCheckin: 0,\n                                contentEngagement: 0,\n                                encouragementSent: 0,\n                                encouragementReceived: 0\n                            },\n                            currentStreak: 0,\n                            encouragedUsers: [],\n                            encouragedByUsers: [],\n                            checkIns: []\n                        };\n                        // 5) Store user-challenge doc\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\", userChallengeId), userChallengeData)\n                        ];\n                    case 3:\n                        _state.sent();\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    (0,_swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_17__._)(WorkoutService, [\n        {\n            key: \"currentWorkout\",\n            get: // Replace getters/setters to use Redux\n            function get() {\n                return _redux_store__WEBPACK_IMPORTED_MODULE_8__.store.getState().workout.currentWorkout;\n            },\n            set: function set(workout) {\n                _redux_store__WEBPACK_IMPORTED_MODULE_8__.store.dispatch((0,_redux_workoutSlice__WEBPACK_IMPORTED_MODULE_9__.setCurrentWorkout)(workout));\n            }\n        },\n        {\n            key: \"currentWorkoutLogs\",\n            get: function get() {\n                return _redux_store__WEBPACK_IMPORTED_MODULE_8__.store.getState().workout.currentExerciseLogs;\n            },\n            set: function set(logs) {\n                _redux_store__WEBPACK_IMPORTED_MODULE_8__.store.dispatch((0,_redux_workoutSlice__WEBPACK_IMPORTED_MODULE_9__.setCurrentExerciseLogs)(logs));\n            }\n        },\n        {\n            key: \"currentWorkoutSummary\",\n            get: function get() {\n                return _redux_store__WEBPACK_IMPORTED_MODULE_8__.store.getState().workout.workoutSummary;\n            },\n            set: function set(workoutSummary) {\n                _redux_store__WEBPACK_IMPORTED_MODULE_8__.store.dispatch((0,_redux_workoutSlice__WEBPACK_IMPORTED_MODULE_9__.setWorkoutSummary)(workoutSummary));\n            }\n        }\n    ]);\n    return WorkoutService;\n}();\nvar workoutService = new WorkoutService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL2ZpcmViYXNlL3dvcmtvdXQvc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsc0NBQXNDOzs7Ozs7OztBQWdCVjtBQUVHO0FBQ087QUFVUztBQUNPO0FBRTREO0FBQ3JEO0FBQzNCO0FBQzJDLENBQUMseUJBQXlCO0FBQ2pDO0FBQzBCO0FBRW5EO0FBQ2lGO0FBVTlILG1DQUFLOzthQUFDaUM7Z0ZBQUFBOztpQkFBQUE7SUEyQkhDLE9BQUFBLFVBRUEsR0FGQUEsU0FBQUE7UUFDQyxPQUFPakMsdURBQUdBLENBQUNELDhEQUFVQSxDQUFDVyx1Q0FBRUEsRUFBRSxhQUFhd0IsRUFBRTtJQUMzQztJQUVFLHFEQUFxRDtJQUN2RCxPQUFNQyw4QkF3R1AsR0F4R0MsU0FBTUEsK0JBQ0ZDLGVBQWlDLEVBQ2pDQyxhQUFzQjs7ZUFGMUI7Z0JBZ0dVMUIsMEJBNUZBMkIsUUFDQUMsb0JBQ0FDLGNBR0pDLHNCQTJFQUM7O2dCQWhGSUosU0FBUyxNQUFLTCxVQUFVLElBQUksa0RBQWtEO2dCQUM5RU07Z0JBQ0FDO2dCQUVWLHNEQUFzRDtnQkFDaERDLHVCQUF1QkwsZ0JBQWdCTyxNQUFNLENBQUNDLFNBQUFBOzJCQUFVQSxDQUFBQSxtQkFBQUEsNkJBQUFBLE9BQVFDLFFBQVEsS0FBSUQsT0FBT0MsUUFBUSxDQUFDWCxFQUFFOztnQkFFcEdPLHFCQUFxQkssT0FBTyxDQUFDLFNBQUNGLFFBQVFHO3dCQTRCbkJILGtCQUtKSSxtQkFDQUEsb0JBQ0VBLG9CQWFickMsMEJBTVFBO29CQXJEVixtREFBbUQ7b0JBQ25ELElBQU1zQyxtQkFBbUIsSUFBSXBDLHFEQUFRQSxDQUFDLHdJQUNqQytCLE9BQU9DLFFBQVE7d0JBQ2xCWCxJQUFJVSxPQUFPQyxRQUFRLENBQUNYLEVBQUUsSUFBSWdCLGVBQWVqQixVQUFVO3dCQUNuRGtCLE1BQU1QLE9BQU9DLFFBQVEsQ0FBQ00sSUFBSSxJQUFJO3dCQUM5QkMsUUFBUVIsT0FBT0MsUUFBUSxDQUFDTyxNQUFNLElBQUk7NEJBQ2hDQyxRQUFRaEIsaUJBQWlCOzRCQUN6QmlCLFVBQVVqQixpQkFBaUI7d0JBQzdCO3dCQUNBa0IsYUFBYVgsT0FBT0MsUUFBUSxDQUFDVSxXQUFXLElBQUk7d0JBQzVDUCxVQUFVSixPQUFPQyxRQUFRLENBQUNHLFFBQVEsSUFBSTs0QkFBRVEsTUFBTTs0QkFBa0JDLFNBQVM7d0JBQUs7d0JBQzlFQyxrQkFBa0JkLE9BQU9DLFFBQVEsQ0FBQ2EsZ0JBQWdCLElBQUksRUFBRTt3QkFDeERDLG9CQUFvQmYsT0FBT0MsUUFBUSxDQUFDYyxrQkFBa0IsSUFBSSxFQUFFO3dCQUM1REMsTUFBTWhCLE9BQU9DLFFBQVEsQ0FBQ2UsSUFBSSxJQUFJLEVBQUU7d0JBQ2hDQyxRQUFRakIsT0FBT0MsUUFBUSxDQUFDZ0IsTUFBTSxJQUFJLEVBQUU7d0JBQ3BDQyxXQUFXbEIsT0FBT0MsUUFBUSxDQUFDaUIsU0FBUyxJQUFJLElBQUlDO3dCQUM1Q0MsV0FBV3BCLE9BQU9DLFFBQVEsQ0FBQ21CLFNBQVMsSUFBSSxJQUFJRDs7b0JBRzlDLGlEQUFpRDtvQkFDakQsSUFBTUUsY0FBaUM7d0JBQ3JDcEIsVUFBVUk7d0JBQ1ZpQixTQUFTdEIsT0FBT3NCLE9BQU8sSUFBSTtvQkFDN0I7b0JBQ0EzQixtQkFBbUI0QixJQUFJLENBQUNGO29CQUV4Qiw2Q0FBNkM7b0JBQzdDLElBQU1qQixXQUFXSixFQUFBQSxtQkFBQUEsT0FBT0ksUUFBUSxjQUFmSix1Q0FBQUEsaUJBQWlCWSxJQUFJLE1BQUssbUJBQW1CWixPQUFPSSxRQUFRLEdBQUc7d0JBQzlFUSxNQUFNO3dCQUNOQyxTQUFTOzRCQUFFVyxNQUFNOzRCQUFHQyxNQUFNO2dDQUFDOzZCQUFLOzRCQUFFQyxRQUFROzRCQUFHQyxZQUFZO3dCQUFFO29CQUM3RDt3QkFFYXZCO29CQUFiLElBQU1vQixPQUFPcEIsQ0FBQUEsMEJBQUFBLG9CQUFBQSxTQUFTUyxPQUFPLGNBQWhCVCx3Q0FBQUEsa0JBQWtCb0IsSUFBSSxjQUF0QnBCLG9DQUFBQSx5QkFBMEI7d0JBQzFCQTtvQkFBYixJQUFNcUIsT0FBT3JCLENBQUFBLDBCQUFBQSxxQkFBQUEsU0FBU1MsT0FBTyxjQUFoQlQseUNBQUFBLG1CQUFrQnFCLElBQUksY0FBdEJyQixvQ0FBQUEseUJBQTBCO3dCQUFDO3FCQUFLO3dCQUM5QkE7b0JBQWYsSUFBTXNCLFNBQVN0QixDQUFBQSw0QkFBQUEscUJBQUFBLFNBQVNTLE9BQU8sY0FBaEJULHlDQUFBQSxtQkFBa0JzQixNQUFNLGNBQXhCdEIsc0NBQUFBLDJCQUE0QjtvQkFFM0MsK0NBQStDO29CQUMvQyxJQUFNd0IsV0FBV0MsTUFBTUMsSUFBSSxDQUFDO3dCQUFFQyxRQUFRUDtvQkFBSyxHQUFHOytCQUM1QyxJQUFJakQsNERBQWdCQSxDQUFDOzRCQUNuQmtELE1BQU1PLFNBQVNQLElBQUksQ0FBQyxFQUFFLElBQUksTUFBTTs0QkFDaENDLFFBQVFBLFVBQVU7d0JBQ3BCOztvQkFHRiwwQ0FBMEM7b0JBQzFDLElBQU1PLGdCQUFnQjlELDhEQUFlQSxDQUFDK0QscUJBQXFCLENBQ3pEeEMsUUFDQTNCLEVBQUFBLDJCQUFBQSw4Q0FBV0EsQ0FBQ29FLFdBQVcsY0FBdkJwRSwrQ0FBQUEseUJBQXlCdUIsRUFBRSxLQUFJO29CQUdqQyxJQUFNOEMsTUFBTSxJQUFJcEUsd0RBQVdBLENBQUM7d0JBQzFCc0IsSUFBSTJDO3dCQUNKSSxXQUFXM0M7d0JBQ1hlLFFBQVExQyxFQUFBQSw0QkFBQUEsOENBQVdBLENBQUNvRSxXQUFXLGNBQXZCcEUsZ0RBQUFBLDBCQUF5QnVCLEVBQUUsS0FBSTt3QkFDdkNXLFVBQVVJO3dCQUNWaUMsTUFBTVY7d0JBQ05XLFVBQVU7d0JBQ1ZDLE1BQU14QyxPQUFPeUMsS0FBSyxJQUFJO3dCQUN0QkMsU0FBUzFDLE9BQU8wQyxPQUFPLElBQUk7d0JBQzNCQyxjQUFjO3dCQUNkQyxjQUFjO3dCQUNkQyxhQUFhO3dCQUNiQyxPQUFPM0MsUUFBUTt3QkFDZmUsV0FBVyxJQUFJQzt3QkFDZkMsV0FBVyxJQUFJRDt3QkFDZjRCLGFBQWEsSUFBSTVCO29CQUNuQjtvQkFFQXZCLGFBQWEyQixJQUFJLENBQUNhO2dCQUNwQjtnQkFFQSxxQ0FBcUM7Z0JBQy9CdEMsYUFBYSxJQUFJMUIsbURBQU9BLENBQUM7b0JBQzdCa0IsSUFBSUk7b0JBQ0pzRCxnQkFBZ0I7b0JBQ2hCQyxXQUFXdEQ7b0JBQ1gyQyxNQUFNMUM7b0JBQ05zRCxPQUFPO29CQUNQdkMsYUFBYTtvQkFDYndDLFVBQVUvRSxtREFBT0EsQ0FBQ2dGLGlCQUFpQixDQUFDekQsdUJBQXVCO29CQUMzRDBELGVBQWU7b0JBQ2ZDLGtCQUFrQjtvQkFDbEJULGFBQWE7b0JBQ2JVLGVBQWU7b0JBQ2YvQyxRQUFRekMsRUFBQUEsMkJBQUFBLDhDQUFXQSxDQUFDb0UsV0FBVyxjQUF2QnBFLCtDQUFBQSx5QkFBeUJ1QixFQUFFLEtBQUk7b0JBQ3ZDNEIsV0FBVyxJQUFJQztvQkFDZkMsV0FBVyxJQUFJRDtvQkFDZnFDLE1BQU1wRixtREFBT0EsQ0FBQ3FGLG9CQUFvQixDQUFDOUQsdUJBQXVCO2dCQUM1RDtnQkFFQTs7b0JBQU87d0JBQUUrRCxTQUFTNUQ7d0JBQVlGLGNBQUFBO29CQUFhOzs7UUFFN0M7O0lBRUU7O0dBRUMsR0FDRCxPQUFNK0QsbUJBR0wsR0FIRCxTQUFNQSxvQkFBb0JsRCxNQUFjOztlQUF4QztnQkFDUW1EOzs7O3dCQUFVOzs0QkFBTSxNQUFLQywwQkFBMEIsQ0FBQ3BEOzs7d0JBQWhEbUQsVUFBVTt3QkFDaEI7OzRCQUFPQSxRQUFRRixPQUFPOzs7O1FBQ3hCOztJQUVBLE9BQU1JLGdCQXlFTCxHQXpFRCxTQUFNQSxpQkFBaUJyRCxNQUFjOztlQUFyQztnQkFNUXNELGFBSUVDLHFCQUdBQyxrQkFDQUMsVUFHRCxnRkFBTUMsWUFDSEMsYUFDQS9CLFdBR0FnQyxpQkFZQVgsU0F1QkFZLFNBQ0FDLG1CQVVEQyxPQUNEQzs7Ozt3QkFwRVIsSUFBSSxDQUFDaEUsUUFBUTs0QkFDWCxNQUFNLElBQUlpRSxNQUFNO3dCQUNsQjt3QkFFQSw2Q0FBNkM7d0JBQ3ZDWCxjQUFjNUcsOERBQVVBLENBQUNXLHVDQUFFQSxFQUFFLFNBQVMyQyxRQUFROzs7Ozs7Ozs7d0JBSXRCOzs0QkFBTSxNQUFLa0UsOEJBQThCOzs7d0JBQS9EWCxzQkFBc0I7d0JBR0g7OzRCQUFNM0csMkRBQU9BLENBQUMwRzs7O3dCQUFqQ0UsbUJBQW1CO3dCQUNuQkM7d0JBR0Q7Ozs7Ozs7Ozt3QkFBQSxZQUFvQkQsaUJBQWlCVyxJQUFJOzs7K0JBQXpDOzs7O3dCQUFNVCxhQUFOO3dCQUNHQyxjQUFjRCxXQUFXVSxJQUFJO3dCQUM3QnhDLFlBQVk4QixXQUFXN0UsRUFBRTt3QkFFL0IsNEVBQTRFO3dCQUN0RStFLGtCQUFrQixDQUFDRCxZQUFZbkIsU0FBUyxNQUFLLEVBQUc2QixHQUFHLENBQUMsU0FBQ3pEOzRCQUN6RCxJQUFNMEQsZUFBZWYsb0JBQW9CZ0IsSUFBSSxDQUFDQyxTQUFBQTt1Q0FBTUEsR0FBRzFFLElBQUksS0FBS2MsWUFBWXBCLFFBQVEsQ0FBQ00sSUFBSTs7NEJBQ3pGMkUsUUFBUTlDLEdBQUcsQ0FBQyxrQ0FBa0MyQzs0QkFFOUMsT0FBTyx3SUFDRjFEO2dDQUNIcEIsVUFBVThFLGdCQUFnQjFEOzt3QkFFOUI7d0JBR0EsZ0RBQWdEO3dCQUMxQ3FDLFVBQVUsSUFBSXRGLG1EQUFPQSxDQUFDOzRCQUMxQmtCLElBQUk4RSxZQUFZOUUsRUFBRSxJQUFJOzRCQUN0QjBELGdCQUFnQm9CLFlBQVlwQixjQUFjLElBQUk7NEJBQzlDbUMsY0FBY2YsWUFBWWUsWUFBWTs0QkFDdENsQyxXQUFXb0I7NEJBQ1hlLFdBQVdoQixZQUFZZ0IsU0FBUzs0QkFDaEM5QyxJQUFJOzRCQUNKWSxPQUFPa0IsWUFBWWxCLEtBQUssSUFBSTs0QkFDNUJ2QyxhQUFheUQsWUFBWXpELFdBQVcsSUFBSTs0QkFDeEN3QyxVQUFVaUIsWUFBWWpCLFFBQVEsSUFBSTs0QkFDbENFLGVBQWVlLFlBQVlmLGFBQWE7NEJBQ3hDQyxrQkFBa0JjLFlBQVlkLGdCQUFnQixJQUFJOzRCQUNsRFQsYUFBYXVCLFlBQVl2QixXQUFXLElBQUk7NEJBQ3hDVSxlQUFlYSxZQUFZYixhQUFhLElBQUk7NEJBQzVDOEIsV0FBV2pCLFlBQVlpQixTQUFTLEdBQUcsSUFBSWxFLEtBQUtpRCxZQUFZaUIsU0FBUyxJQUFJQzs0QkFDckV4QyxPQUFPc0IsWUFBWXRCLEtBQUs7NEJBQ3hCdEMsUUFBUTRELFlBQVk1RCxNQUFNLElBQUlDOzRCQUM5QlMsV0FBV2tELFlBQVlsRCxTQUFTLEdBQUcsSUFBSUMsS0FBS2lELFlBQVlsRCxTQUFTLElBQUksSUFBSUM7NEJBQ3pFQyxXQUFXZ0QsWUFBWWhELFNBQVMsR0FBRyxJQUFJRCxLQUFLaUQsWUFBWWhELFNBQVMsSUFBSSxJQUFJRDs0QkFDekVxQyxNQUFNWSxZQUFZWixJQUFJLElBQUk7d0JBQzVCO3dCQUVBLHlCQUF5Qjt3QkFDbkJjLFVBQVVuSCw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUUsU0FBUzJDLFFBQVEscUJBQXFCNEIsV0FBVzt3QkFDM0Q7OzRCQUFNaEYsMkRBQU9BLENBQUNpSDs7O3dCQUE3QkMsZUFBZTt3QkFDckJiLFFBQVFwQixJQUFJLEdBQUdpQyxhQUFhSyxJQUFJLENBQUNFLEdBQUcsQ0FBQyxTQUFDUzttQ0FBWSx3SUFDN0NBLE9BQU9WLElBQUk7Z0NBQ2R2RixJQUFJaUcsT0FBT2pHLEVBQUU7Ozt3QkFHZjRFLFNBQVMzQyxJQUFJLENBQUNtQzs7O3dCQS9DWDs7Ozs7Ozs7Ozs7O3dCQUFBO3dCQUFBOzs7Ozs7O2lDQUFBO2dDQUFBOzs7Z0NBQUE7c0NBQUE7Ozs7Ozs7d0JBa0RMOzs0QkFBT1E7Ozt3QkFDQU07d0JBQ0RDLGlCQUFpQkQ7d0JBQ3ZCVSxRQUFRVixLQUFLLENBQUMsOEJBQThCQyxlQUFlZSxPQUFPO3dCQUNsRSxNQUFNLElBQUlkLE1BQU07Ozs7Ozs7UUFFcEI7O0lBRUEsT0FBTWUsOEJBa0JMLEdBbEJELFNBQU1BLCtCQUErQkMsV0FBbUI7ZUFBeEQ7Z0JBQ1FDLG1CQUNBQyxHQUVFQyxVQUNBQyxnQkFTQ3RCOzs7O3dCQWJIbUIsb0JBQW9CeEksOERBQVVBLENBQUNXLHVDQUFFQSxFQUFFO3dCQUNuQzhILElBQUlySSx5REFBS0EsQ0FBQ29JLG1CQUFtQm5JLHlEQUFLQSxDQUFDLGVBQWUsTUFBTWtJOzs7Ozs7Ozs7d0JBRTNDOzs0QkFBTXJJLDJEQUFPQSxDQUFDdUk7Ozt3QkFBekJDLFdBQVc7d0JBQ1hDLGlCQUFrQ0QsU0FBU2pCLElBQUksQ0FBQ0UsR0FBRyxDQUFDLFNBQUMxSDs0QkFDekQsSUFBTXlILE9BQU96SCxJQUFJeUgsSUFBSTs0QkFDckIsT0FBTyxJQUFJL0YseURBQWFBLENBQUMxQixJQUFJa0MsRUFBRSxFQUFFdUY7d0JBQ25DO3dCQUNBLElBQUlpQixlQUFlL0QsTUFBTSxHQUFHLEdBQUc7NEJBQzdCOztnQ0FBTztvQ0FBRStELGdCQUFBQTtnQ0FBZTs7d0JBQzFCLE9BQU87NEJBQ0w7O2dDQUFPO29DQUFFQSxjQUFjO29DQUFNdEIsT0FBTztnQ0FBK0M7O3dCQUNyRjs7Ozs7O3dCQUNPQTt3QkFDUFUsUUFBUVYsS0FBSyxDQUFDLGtEQUFrREE7d0JBQ2hFOzs0QkFBTztnQ0FBRXNCLGNBQWM7Z0NBQU10QixPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU1nQixPQUFPLEdBQUc7NEJBQWdCOzs7Ozs7OztRQUVqRzs7SUFFQTs7Ozs7R0FLQyxHQUNELE9BQU1PLHFCQTRCTCxHQTVCRCxTQUFNQSxzQkFBc0JDLElBQVU7ZUFBdEM7Z0JBQ1E3RCxhQU1BOEQsZUFHQUMsY0FHQU4sR0FHRUMsVUFPQ3JCLE9BQ0RDOzs7O3dCQXZCRnRDLGNBQWNwRSw4Q0FBV0EsQ0FBQ29FLFdBQVc7d0JBQzNDLElBQUksRUFBQ0Esd0JBQUFBLGtDQUFBQSxZQUFhN0MsRUFBRSxHQUFFOzRCQUNwQixNQUFNLElBQUlvRixNQUFNO3dCQUNsQjt3QkFFQSxrRUFBa0U7d0JBQzVEdUIsZ0JBQWdCdkgsK0VBQU1BLENBQUNzSCxNQUFNO3dCQUVuQyx5REFBeUQ7d0JBQ25ERSxlQUFlL0ksOERBQVVBLENBQUNXLHVDQUFFQSxFQUFFLFNBQVNxRSxZQUFZN0MsRUFBRSxFQUFFO3dCQUU3RCwyREFBMkQ7d0JBQ3JEc0csSUFBSXJJLHlEQUFLQSxDQUFDMkksY0FBYzFJLHlEQUFLQSxDQUFDLFFBQVEsTUFBTXlJOzs7Ozs7Ozs7d0JBRy9COzs0QkFBTTVJLDJEQUFPQSxDQUFDdUk7Ozt3QkFBekJDLFdBQVc7d0JBRWpCLDBEQUEwRDt3QkFDMUQ7OzRCQUFPQSxTQUFTakIsSUFBSSxDQUFDRSxHQUFHLENBQUMsU0FBQzFIO3VDQUF1QjtvQ0FDL0NrQyxJQUFJbEMsSUFBSWtDLEVBQUU7bUNBQ1BsQyxJQUFJeUgsSUFBSTs7Ozt3QkFFTkw7d0JBQ0RDLGlCQUFpQkQ7d0JBQ3ZCVSxRQUFRVixLQUFLLENBQUMscUNBQXFDQyxlQUFlZSxPQUFPO3dCQUN6RSxNQUFNLElBQUlkLE1BQU1ELGVBQWVlLE9BQU87Ozs7Ozs7UUFFMUM7O0lBRUEsT0FBTVcsd0JBeUJMLEdBekJELFNBQU1BO2VBQU47Z0JBQ1FoRSxhQU1BK0QsY0FHQU4sR0FHRUMsVUFPQ3JCLE9BQ0RDOzs7O3dCQXBCRnRDLGNBQWNwRSw4Q0FBV0EsQ0FBQ29FLFdBQVc7d0JBQzNDLElBQUksRUFBQ0Esd0JBQUFBLGtDQUFBQSxZQUFhN0MsRUFBRSxHQUFFOzRCQUNwQixNQUFNLElBQUlvRixNQUFNO3dCQUNsQjt3QkFFQSx5REFBeUQ7d0JBQ25Ed0IsZUFBZS9JLDhEQUFVQSxDQUFDVyx1Q0FBRUEsRUFBRSxTQUFTcUUsWUFBWTdDLEVBQUUsRUFBRTt3QkFFN0Qsb0ZBQW9GO3dCQUM5RXNHLElBQUlySSx5REFBS0EsQ0FBQzJJLGNBQWN6SSwyREFBT0EsQ0FBQyxhQUFhLFNBQVMseUNBQXlDOzs7Ozs7Ozs7d0JBR2xGOzs0QkFBTUosMkRBQU9BLENBQUN1STs7O3dCQUF6QkMsV0FBVzt3QkFFakIsMERBQTBEO3dCQUMxRDs7NEJBQU9BLFNBQVNqQixJQUFJLENBQUNFLEdBQUcsQ0FBQyxTQUFDMUg7dUNBQXVCO29DQUMvQ2tDLElBQUlsQyxJQUFJa0MsRUFBRTttQ0FDUGxDLElBQUl5SCxJQUFJOzs7O3dCQUVOTDt3QkFDREMsaUJBQWlCRDt3QkFDdkJVLFFBQVFWLEtBQUssQ0FBQyx5Q0FBeUNDLGVBQWVlLE9BQU87d0JBQzdFLE1BQU0sSUFBSWQsTUFBTUQsZUFBZWUsT0FBTzs7Ozs7OztRQUUxQzs7SUFHQTs7Ozs7Q0FLRCxHQUNELE9BQU1ZLDJCQWtETCxHQWxERCxTQUFNQSw0QkFBNEIzRixNQUFjO2VBQWhEO2dCQUNRa0YsbUJBQ0FDLEdBS0VDLFVBSUFDLGdCQW1DQ3RCOzs7O3dCQTdDSG1CLG9CQUFvQnhJLDhEQUFVQSxDQUFDVyx1Q0FBRUEsRUFBRTt3QkFDbkM4SCxJQUFJckkseURBQUtBLENBQUNvSSxtQkFBbUJuSSx5REFBS0EsQ0FBQyxVQUFVLE1BQU1pRDs7Ozs7Ozs7O3dCQUt0Qzs7NEJBQU1wRCwyREFBT0EsQ0FBQ3VJOzs7d0JBQXpCQyxXQUFXO3dCQUVqQixvRUFBb0U7d0JBRTlEQyxpQkFBaUJELFNBQVNqQixJQUFJLENBQUNFLEdBQUcsQ0FBQyxTQUFDMUg7NEJBQ3hDLElBQU15SCxPQUFPekgsSUFBSXlILElBQUk7NEJBQ3JCLGdFQUFnRTs0QkFFaEUsT0FBTztnQ0FDTHZGLElBQUlsQyxJQUFJa0MsRUFBRTsrQkFDUHVGO2dDQUNITyxXQUFXUCxLQUFLTyxTQUFTLEdBQ3JCLElBQUl2RyxxREFBU0EsQ0FBQztvQ0FDWlMsSUFBSXVGLEtBQUtPLFNBQVMsQ0FBQzlGLEVBQUU7b0NBQ3JCNEQsT0FBTzJCLEtBQUtPLFNBQVMsQ0FBQ2xDLEtBQUs7b0NBQzNCbUQsVUFBVXhCLEtBQUtPLFNBQVMsQ0FBQ2lCLFFBQVE7b0NBQ2pDQyxjQUFjekIsS0FBS08sU0FBUyxDQUFDa0IsWUFBWSxJQUFJLEVBQUU7b0NBQy9DQyxRQUFRMUIsS0FBS08sU0FBUyxDQUFDbUIsTUFBTTtvQ0FDN0JDLFdBQVczQixLQUFLTyxTQUFTLENBQUNvQixTQUFTLEdBQUcsSUFBSXJGLEtBQUswRCxLQUFLTyxTQUFTLENBQUNvQixTQUFTLElBQUksSUFBSXJGO29DQUMvRXNGLFNBQVM1QixLQUFLTyxTQUFTLENBQUNxQixPQUFPLEdBQUcsSUFBSXRGLEtBQUswRCxLQUFLTyxTQUFTLENBQUNxQixPQUFPLElBQUksSUFBSXRGO29DQUN6RUQsV0FBVzJELEtBQUtPLFNBQVMsQ0FBQ2xFLFNBQVMsR0FBRyxJQUFJQyxLQUFLMEQsS0FBS08sU0FBUyxDQUFDbEUsU0FBUyxJQUFJLElBQUlDO29DQUMvRUMsV0FBV3lELEtBQUtPLFNBQVMsQ0FBQ2hFLFNBQVMsR0FBRyxJQUFJRCxLQUFLMEQsS0FBS08sU0FBUyxDQUFDaEUsU0FBUyxJQUFJLElBQUlEO29DQUMvRXVGLGFBQWEsQ0FBQzdCLEtBQUtPLFNBQVMsQ0FBQ3NCLFdBQVcsSUFBSSxFQUFFLEVBQUU1QixHQUFHLENBQUMsU0FBQzZCOytDQUNuRCxJQUFJckksc0RBQVVBLENBQUM7NENBQ2JnQixJQUFJcUgsRUFBRXJILEVBQUU7NENBQ1JtQixRQUFRa0csRUFBRWxHLE1BQU07NENBQ2hCbUcsVUFBVUQsRUFBRUMsUUFBUTt3Q0FDdEI7O2dDQUVKLEtBQ0F0QjtnQ0FDSnBFLFdBQVd2QyxrRUFBZ0JBLENBQUNrRyxLQUFLM0QsU0FBUztnQ0FDMUNFLFdBQVd6QyxrRUFBZ0JBLENBQUNrRyxLQUFLekQsU0FBUzs7d0JBRTlDO3dCQUVBLDRGQUE0Rjt3QkFFNUY7OzRCQUFPMEU7Ozt3QkFDQXRCO3dCQUNQVSxRQUFRVixLQUFLLENBQUMsNkNBQTZDQTt3QkFDM0QsTUFBTUE7Ozs7Ozs7UUFFVjs7SUFFQSxPQUFNcUMsNkJBNkJMLEdBN0JELFNBQU1BLDhCQUE4QjFCLFlBQW9COztlQUF4RDtnQkFHVWhJLFlBR0EySixZQUdELGdGQUFNQyxxQkFFVyxNQUFYckQsU0FRQWMsWUFNSkE7Ozs7Ozs7Ozs7d0JBdEJZOzs0QkFBTSxNQUFLd0MsaUJBQWlCLENBQUM3Qjs7O3dCQUExQ2hJLGFBQWE7d0JBRW5CLCtCQUErQjt3QkFDekIySjt3QkFHRDs7Ozs7Ozs7O3dCQUFBLFlBQTZCM0osQ0FBQUEsV0FBVzhKLFlBQVksTUFBSzs7OytCQUF6RDs7Ozt3QkFBTUYsc0JBQU47Ozs7Ozs7Ozt3QkFFaUI7OzRCQUFNLE1BQUtHLGlCQUFpQixDQUM1Q0gsb0JBQW9CSSxpQkFBaUIsRUFDckNKLG9CQUFvQnpILEVBQUU7Ozt3QkFGTjs0QkFBQTs7NEJBQVhvRSxVQUFXO3dCQUtsQixJQUFJQSxTQUFTOzRCQUNYb0QsV0FBV3ZGLElBQUksQ0FBQ21DO3dCQUNsQjs7Ozs7O3dCQUNPYzt3QkFDUFUsUUFBUVYsS0FBSyxDQUFDLDBCQUFpRCxPQUF2QnVDLG9CQUFvQnpILEVBQUUsRUFBQyxNQUFJa0Y7Ozs7Ozt3QkFYbEU7Ozs7Ozs7Ozs7Ozt3QkFBQTt3QkFBQTs7Ozs7OztpQ0FBQTtnQ0FBQTs7O2dDQUFBO3NDQUFBOzs7Ozs7O3dCQWVMOzs0QkFBTztnQ0FBRXJILFlBQUFBO2dDQUFZMkosWUFBQUE7NEJBQVc7Ozt3QkFDekJ0Qzt3QkFDUFUsUUFBUVYsS0FBSyxDQUFDLCtDQUErQ0E7d0JBQzdELE1BQU1BOzs7Ozs7O1FBRVY7O0lBSUEsT0FBTTBDLGlCQWtHTCxHQWxHRCxTQUFNQSxrQkFBa0J6RyxNQUFjLEVBQUU0QixTQUFpQjs7ZUFBekQ7Z0JBS1UrRSxZQUdBQyxhQVFBakQsYUFLQUoscUJBS0FLLGlCQXFCQVgsU0FPQVksU0FDQUMsY0FHQWpDLE1Bb0NDa0M7Ozs7Ozs7Ozs7d0JBNUZQVSxRQUFROUMsR0FBRyxDQUFDLG9DQUFvQzs0QkFBRTNCLFFBQUFBOzRCQUFRNEIsV0FBQUE7d0JBQVU7d0JBRXBFLDZCQUE2Qjt3QkFDdkIrRSxhQUFhaEssdURBQUdBLENBQUNVLHVDQUFFQSxFQUFFLFNBQVMyQyxRQUFRLHFCQUFxQjRCO3dCQUNqRTZDLFFBQVE5QyxHQUFHLENBQUMsbUNBQW1DZ0YsV0FBV0UsSUFBSTt3QkFFMUM7OzRCQUFNaEssMERBQU1BLENBQUM4Sjs7O3dCQUEzQkMsY0FBYzt3QkFDcEJuQyxRQUFROUMsR0FBRyxDQUFDLDRCQUE0QmlGLFlBQVlFLE1BQU07d0JBRTFELElBQUksQ0FBQ0YsWUFBWUUsTUFBTSxJQUFJOzRCQUN6QnJDLFFBQVE5QyxHQUFHLENBQUM7NEJBQ1o7OztvQ0FBUTtvQ0FBTTs7O3dCQUNoQjt3QkFFTWdDLGNBQWNpRCxZQUFZeEMsSUFBSTt3QkFDcENLLFFBQVE5QyxHQUFHLENBQUMscUJBQXFCZ0M7d0JBRWpDLG1DQUFtQzt3QkFDbkNjLFFBQVE5QyxHQUFHLENBQUM7d0JBQ2dCOzs0QkFBTSxNQUFLdUMsOEJBQThCOzs7d0JBQS9EWCxzQkFBc0I7d0JBQzVCa0IsUUFBUTlDLEdBQUcsQ0FBQyxrQ0FBa0M0Qjt3QkFFOUMsb0JBQW9CO3dCQUNwQmtCLFFBQVE5QyxHQUFHLENBQUMsaUNBQWlDZ0MsWUFBWW5CLFNBQVM7d0JBQzVEb0Isa0JBQWtCLENBQUNELFlBQVluQixTQUFTLE1BQUssRUFBRzZCLEdBQUcsQ0FBQyxTQUFDekQ7NEJBQ3pELElBQU0wRCxlQUFlZixvQkFBb0JnQixJQUFJLENBQUNDLFNBQUFBO3VDQUFNQSxHQUFHMUUsSUFBSSxLQUFLYyxZQUFZcEIsUUFBUSxDQUFDTSxJQUFJOzs0QkFDekYyRSxRQUFROUMsR0FBRyxDQUFDLHFCQUFxQjtnQ0FDL0I3QixNQUFNYyxZQUFZcEIsUUFBUSxDQUFDTSxJQUFJO2dDQUMvQmlILFlBQVksQ0FBQyxDQUFDekM7NEJBQ2hCOzRCQUNBLE9BQU8sd0lBQ0YxRDtnQ0FDSHBCLFVBQVU4RSxnQkFBZ0IxRCxZQUFZcEIsUUFBUTs7d0JBRWxEO3dCQUVBbUUsWUFBWW5CLFNBQVMsR0FBR29CO3dCQUV4QiwwQkFBMEI7d0JBQzFCYSxRQUFROUMsR0FBRyxDQUFDLHdDQUF3Qzs0QkFDbEQ5QyxJQUFJOEUsWUFBWTlFLEVBQUU7NEJBQ2xCNEQsT0FBT2tCLFlBQVlsQixLQUFLOzRCQUN4QnVFLGVBQWVwRCxnQkFBZ0J0QyxNQUFNO3dCQUN2Qzt3QkFFTTJCLFVBQVUsSUFBSXRGLG1EQUFPQSxDQUFDOzRCQUMxQmtCLElBQUkrQzsyQkFDRCtCO3dCQUdMLGFBQWE7d0JBQ2JjLFFBQVE5QyxHQUFHLENBQUM7d0JBQ05rQyxVQUFVbkgsOERBQVVBLENBQUNpSyxZQUFZO3dCQUNsQjs7NEJBQU0vSiwyREFBT0EsQ0FBQ2lIOzs7d0JBQTdCQyxlQUFlO3dCQUNyQlcsUUFBUTlDLEdBQUcsQ0FBQyxxQkFBcUJtQyxhQUFhbUQsSUFBSTt3QkFFNUNwRixPQUFzQmlDLGFBQWFLLElBQUksQ0FBQ0UsR0FBRyxDQUFDUyxTQUFBQTs0QkFDaEQsSUFBTW9DLFVBQVVwQyxPQUFPVixJQUFJOzRCQUMzQixJQUFNRSxlQUFlZixvQkFBb0JnQixJQUFJLENBQUNDLFNBQUFBO3VDQUFNQSxHQUFHMUUsSUFBSSxLQUFLb0gsUUFBUTFILFFBQVEsQ0FBQ00sSUFBSTs7NEJBQ3JGMkUsUUFBUTlDLEdBQUcsQ0FBQyxtQkFBbUI7Z0NBQzdCd0YsT0FBT3JDLE9BQU9qRyxFQUFFO2dDQUNoQnVJLGNBQWNGLFFBQVExSCxRQUFRLENBQUNNLElBQUk7Z0NBQ25DdUgsb0JBQW9CLENBQUMsQ0FBQy9DOzRCQUN4Qjs0QkFFQSxPQUFPLElBQUkvRyx3REFBV0EsQ0FBQztnQ0FDckJzQixJQUFJaUcsT0FBT2pHLEVBQUU7Z0NBQ2IrQyxXQUFXQTtnQ0FDWDVCLFFBQVFBO2dDQUNSUixVQUFVOEUsZ0JBQWdCNEMsUUFBUTFILFFBQVE7Z0NBQzFDcUMsTUFBTXFGLFFBQVF2RixHQUFHLElBQUksRUFBRTtnQ0FDdkJHLFVBQVVvRixRQUFRcEYsUUFBUSxJQUFJO2dDQUM5QkMsTUFBTW1GLFFBQVFuRixJQUFJLElBQUk7Z0NBQ3RCdUYsbUJBQW1CSixRQUFRSSxpQkFBaUIsSUFBSTtnQ0FDaERyRixTQUFTaUYsUUFBUWpGLE9BQU8sSUFBSTtnQ0FDNUJzRixjQUFjTCxRQUFRSyxZQUFZLElBQUk7Z0NBQ3RDckYsY0FBY2dGLFFBQVFoRixZQUFZLElBQUk7Z0NBQ3RDQyxjQUFjK0UsUUFBUS9FLFlBQVksSUFBSTtnQ0FDdENDLGFBQWE4RSxRQUFROUUsV0FBVyxJQUFJO2dDQUNwQ0UsYUFBYW5FLDRFQUF5QkEsQ0FBQytJLFFBQVE1RSxXQUFXO2dDQUMxRDdCLFdBQVd0Qyw0RUFBeUJBLENBQUMrSSxRQUFRekcsU0FBUztnQ0FDdERFLFdBQVd4Qyw0RUFBeUJBLENBQUMrSSxRQUFRdkcsU0FBUzs0QkFDeEQ7d0JBQ0Y7d0JBRUFzQyxRQUFRcEIsSUFBSSxHQUFHQTt3QkFDZjRDLFFBQVE5QyxHQUFHLENBQUMsK0JBQStCOzRCQUN6Q0MsV0FBV3FCLFFBQVFwRSxFQUFFOzRCQUNyQjJJLFdBQVczRixLQUFLUCxNQUFNO3dCQUN4Qjt3QkFFQTs7O2dDQUFRMkI7Z0NBQVNwQjs7Ozt3QkFDVmtDO3dCQUNQVSxRQUFRVixLQUFLLENBQUMsaUNBQWlDQTt3QkFDL0MsTUFBTUEsT0FBTyw4Q0FBOEM7Ozs7Ozs7UUFFL0Q7O0lBRUE7Ozs7O0NBS0MsR0FDRCxPQUFNMEQsZ0NBa0RMLEdBbERELFNBQU1BLGlDQUFpQ3hDLFdBQW1CO2VBQTFEO2dCQUNRQyxtQkFDQUMsR0FLRUMsVUFJQUMsZ0JBbUNDdEI7Ozs7d0JBN0NIbUIsb0JBQW9CeEksOERBQVVBLENBQUNXLHVDQUFFQSxFQUFFO3dCQUNuQzhILElBQUlySSx5REFBS0EsQ0FBQ29JLG1CQUFtQm5JLHlEQUFLQSxDQUFDLGVBQWUsTUFBTWtJOzs7Ozs7Ozs7d0JBSzNDOzs0QkFBTXJJLDJEQUFPQSxDQUFDdUk7Ozt3QkFBekJDLFdBQVc7d0JBRWpCLHlFQUF5RTt3QkFFbkVDLGlCQUFpQkQsU0FBU2pCLElBQUksQ0FBQ0UsR0FBRyxDQUFDLFNBQUMxSDs0QkFDeEMsSUFBTXlILE9BQU96SCxJQUFJeUgsSUFBSTs0QkFDckIscUVBQXFFOzRCQUVyRSxPQUFPO2dDQUNMdkYsSUFBSWxDLElBQUlrQyxFQUFFOytCQUNQdUY7Z0NBQ0hPLFdBQVdQLEtBQUtPLFNBQVMsR0FDckIsSUFBSXZHLHFEQUFTQSxDQUFDO29DQUNaUyxJQUFJdUYsS0FBS08sU0FBUyxDQUFDOUYsRUFBRTtvQ0FDckI0RCxPQUFPMkIsS0FBS08sU0FBUyxDQUFDbEMsS0FBSztvQ0FDM0JtRCxVQUFVeEIsS0FBS08sU0FBUyxDQUFDaUIsUUFBUTtvQ0FDakNDLGNBQWN6QixLQUFLTyxTQUFTLENBQUNrQixZQUFZLElBQUksRUFBRTtvQ0FDL0NDLFFBQVExQixLQUFLTyxTQUFTLENBQUNtQixNQUFNO29DQUM3QkMsV0FBVzNCLEtBQUtPLFNBQVMsQ0FBQ29CLFNBQVMsR0FBRyxJQUFJckYsS0FBSzBELEtBQUtPLFNBQVMsQ0FBQ29CLFNBQVMsSUFBSSxJQUFJckY7b0NBQy9Fc0YsU0FBUzVCLEtBQUtPLFNBQVMsQ0FBQ3FCLE9BQU8sR0FBRyxJQUFJdEYsS0FBSzBELEtBQUtPLFNBQVMsQ0FBQ3FCLE9BQU8sSUFBSSxJQUFJdEY7b0NBQ3pFRCxXQUFXMkQsS0FBS08sU0FBUyxDQUFDbEUsU0FBUyxHQUFHLElBQUlDLEtBQUswRCxLQUFLTyxTQUFTLENBQUNsRSxTQUFTLElBQUksSUFBSUM7b0NBQy9FQyxXQUFXeUQsS0FBS08sU0FBUyxDQUFDaEUsU0FBUyxHQUFHLElBQUlELEtBQUswRCxLQUFLTyxTQUFTLENBQUNoRSxTQUFTLElBQUksSUFBSUQ7b0NBQy9FdUYsYUFBYSxDQUFDN0IsS0FBS08sU0FBUyxDQUFDc0IsV0FBVyxJQUFJLEVBQUUsRUFBRTVCLEdBQUcsQ0FBQyxTQUFDNkI7K0NBQ25ELElBQUlySSxzREFBVUEsQ0FBQzs0Q0FDYmdCLElBQUlxSCxFQUFFckgsRUFBRTs0Q0FDUm1CLFFBQVFrRyxFQUFFbEcsTUFBTTs0Q0FDaEJtRyxVQUFVRCxFQUFFQyxRQUFRO3dDQUN0Qjs7Z0NBRUosS0FDQXRCO2dDQUNKcEUsV0FBV3ZDLGtFQUFnQkEsQ0FBQ2tHLEtBQUszRCxTQUFTO2dDQUMxQ0UsV0FBV3pDLGtFQUFnQkEsQ0FBQ2tHLEtBQUt6RCxTQUFTOzt3QkFFOUM7d0JBRUEsaUdBQWlHO3dCQUVqRzs7NEJBQU8wRTs7O3dCQUNBdEI7d0JBQ1BVLFFBQVFWLEtBQUssQ0FBQyxrREFBa0RBO3dCQUNoRSxNQUFNQTs7Ozs7OztRQUVWOztJQUVBLE9BQU13QyxpQkFpQkwsR0FqQkQsU0FBTUEsa0JBQWtCMUgsRUFBVTtlQUFsQztnQkFHVTZJLFFBQ0FDLFNBU0M1RDs7Ozt3QkFaVFUsUUFBUTlDLEdBQUcsQ0FBQyxnQ0FBZ0M5Qzs7Ozs7Ozs7O3dCQUVwQzZJLFNBQVMvSyx1REFBR0EsQ0FBQ1UsdUNBQUVBLEVBQUUsd0JBQXdCd0I7d0JBQy9COzs0QkFBTWhDLDBEQUFNQSxDQUFDNks7Ozt3QkFBdkJDLFVBQVU7d0JBQ2hCLElBQUlBLFFBQVFiLE1BQU0sSUFBSTs0QkFDcEI7O2dDQUFPLElBQUk5SSwrREFBbUJBLENBQUM7b0NBQzdCYSxJQUFJOEksUUFBUTlJLEVBQUU7bUNBQ1g4SSxRQUFRdkQsSUFBSTs7d0JBRW5CLE9BQU87NEJBQ0wsTUFBTSxJQUFJSCxNQUFNO3dCQUNsQjs7Ozs7O3dCQUNPRjt3QkFDUFUsUUFBUVYsS0FBSyxDQUFDLG1DQUFtQ0E7d0JBQ2pELE1BQU1BOzs7Ozs7O1FBRVY7O0lBR0k7Ozs7R0FJRCxHQUNDLE9BQU02RCxxQkF5RUwsR0F6RUQsU0FBTUE7ZUFBTjtnQkFDUWxHLGFBS0F3RCxtQkFDQUMsR0FLRUMsVUFJQXlDLGVBd0NBQyxrQkFhQy9EOzs7O3dCQXBFSHJDLGNBQWNwRSw4Q0FBV0EsQ0FBQ29FLFdBQVc7d0JBQzNDLElBQUksRUFBQ0Esd0JBQUFBLGtDQUFBQSxZQUFhN0MsRUFBRSxHQUFFOzRCQUNwQixNQUFNLElBQUlvRixNQUFNO3dCQUNsQjt3QkFFTWlCLG9CQUFvQnhJLDhEQUFVQSxDQUFDVyx1Q0FBRUEsRUFBRTt3QkFDbkM4SCxJQUFJckkseURBQUtBLENBQUNvSSxtQkFBbUJuSSx5REFBS0EsQ0FBQyxVQUFVLE1BQU0yRSxZQUFZN0MsRUFBRTs7Ozs7Ozs7O3dCQUtwRDs7NEJBQU1qQywyREFBT0EsQ0FBQ3VJOzs7d0JBQXpCQyxXQUFXO3dCQUVqQixvRUFBb0U7d0JBRTlEeUMsZ0JBQWdCekMsU0FBU2pCLElBQUksQ0FBQ0UsR0FBRyxDQUFDLFNBQUMxSDs0QkFDdkMsSUFBTXlILE9BQU96SCxJQUFJeUgsSUFBSTs0QkFDckIsZ0VBQWdFOzRCQUVoRSw0REFBNEQ7NEJBQzVELDZGQUE2Rjs0QkFFN0YsSUFBTU8sWUFBWVAsS0FBS08sU0FBUyxHQUM1QixJQUFJdkcscURBQVNBLENBQUM7Z0NBQ1pTLElBQUl1RixLQUFLTyxTQUFTLENBQUM5RixFQUFFO2dDQUNyQjRELE9BQU8yQixLQUFLTyxTQUFTLENBQUNsQyxLQUFLO2dDQUMzQm1ELFVBQVV4QixLQUFLTyxTQUFTLENBQUNpQixRQUFRO2dDQUNqQ0MsY0FBY3pCLEtBQUtPLFNBQVMsQ0FBQ2tCLFlBQVksSUFBSSxFQUFFO2dDQUMvQ0MsUUFBUTFCLEtBQUtPLFNBQVMsQ0FBQ21CLE1BQU07Z0NBQzdCQyxXQUFXNUgsNEVBQXlCQSxDQUFDaUcsS0FBS08sU0FBUyxDQUFDb0IsU0FBUztnQ0FDN0RDLFNBQVM3SCw0RUFBeUJBLENBQUNpRyxLQUFLTyxTQUFTLENBQUNxQixPQUFPO2dDQUN6RHZGLFdBQVd0Qyw0RUFBeUJBLENBQUNpRyxLQUFLTyxTQUFTLENBQUNsRSxTQUFTO2dDQUM3REUsV0FBV3hDLDRFQUF5QkEsQ0FBQ2lHLEtBQUtPLFNBQVMsQ0FBQ2hFLFNBQVM7Z0NBQzdEc0YsYUFBYSxDQUFDN0IsS0FBS08sU0FBUyxDQUFDc0IsV0FBVyxJQUFJLEVBQUUsRUFBRTVCLEdBQUcsQ0FBQyxTQUFDNkI7MkNBQ25ELElBQUlySSxzREFBVUEsQ0FBQzt3Q0FDYmdCLElBQUlxSCxFQUFFckgsRUFBRTt3Q0FDUm1CLFFBQVFrRyxFQUFFbEcsTUFBTTt3Q0FDaEJtRyxVQUFVRCxFQUFFQyxRQUFRO29DQUN0Qjs7NEJBRUosS0FDQXRCOzRCQUVKLE9BQU87Z0NBQ0xoRyxJQUFJbEMsSUFBSWtDLEVBQUU7K0JBQ1B1RjtnQ0FDSE8sV0FBQUE7Z0NBQ0FsRSxXQUFXdEMsNEVBQXlCQSxDQUFDaUcsS0FBSzNELFNBQVM7Z0NBQ25ERSxXQUFXeEMsNEVBQXlCQSxDQUFDaUcsS0FBS3pELFNBQVM7O3dCQUV2RDt3QkFFQSwyRkFBMkY7d0JBRTNGLHdEQUF3RDt3QkFDbERtSCxtQkFBbUJELGNBQWN2SSxNQUFNLENBQUN5SSxTQUFBQTtnQ0FDNUJBOzRCQUFoQixJQUFNL0IsV0FBVStCLDJCQUFBQSxjQUFjcEQsU0FBUyxjQUF2Qm9ELCtDQUFBQSx5QkFBeUIvQixPQUFPOzRCQUVoRCxlQUFlOzRCQUNmLHNHQUFzRzs0QkFDdEcsS0FBSzs0QkFFTCxPQUFPQSxXQUFXQSxVQUFVLElBQUl0Rjt3QkFDbEM7d0JBRUEsd0ZBQXdGO3dCQUV4Rjs7NEJBQU9vSDs7O3dCQUNBL0Q7d0JBQ1BVLFFBQVFWLEtBQUssQ0FBQyxxQ0FBcUNBO3dCQUNuRCxNQUFNQTs7Ozs7OztRQUVWOztJQUdGOzs7O0dBSUMsR0FDRCxPQUFNaUUsbUJBd0JMLEdBeEJELFNBQU1BO2VBQU47Z0JBQ1F0RyxhQU1Bd0QsbUJBR0FDLEdBR0VDLFVBT0NyQjs7Ozt3QkFuQkhyQyxjQUFjcEUsOENBQVdBLENBQUNvRSxXQUFXO3dCQUMzQyxJQUFJLEVBQUNBLHdCQUFBQSxrQ0FBQUEsWUFBYTdDLEVBQUUsR0FBRTs0QkFDcEIsTUFBTSxJQUFJb0YsTUFBTTt3QkFDbEI7d0JBRUEsNkNBQTZDO3dCQUN2Q2lCLG9CQUFvQnhJLDhEQUFVQSxDQUFDVyx1Q0FBRUEsRUFBRTt3QkFFekMsOERBQThEO3dCQUN4RDhILElBQUlySSx5REFBS0EsQ0FBQ29JLG1CQUFtQm5JLHlEQUFLQSxDQUFDLFVBQVUsTUFBTTJFLFlBQVk3QyxFQUFFOzs7Ozs7Ozs7d0JBR3BEOzs0QkFBTWpDLDJEQUFPQSxDQUFDdUk7Ozt3QkFBekJDLFdBQVc7d0JBRWpCLGlEQUFpRDt3QkFDakQ7OzRCQUFPQSxTQUFTakIsSUFBSSxDQUFDRSxHQUFHLENBQUMsU0FBQzFIO3VDQUF1QjtvQ0FDL0NrQyxJQUFJbEMsSUFBSWtDLEVBQUU7bUNBQ1BsQyxJQUFJeUgsSUFBSTs7Ozt3QkFFTkw7d0JBQ1BVLFFBQVFWLEtBQUssQ0FBQyxtQ0FBbUNBO3dCQUNqRCxNQUFNLElBQUlFLE1BQU07Ozs7Ozs7UUFFcEI7O0lBRUEsNkJBQTZCO0lBQzdCLE9BQU1nRSxvQkErQ0wsR0EvQ0QsU0FBTUEscUJBQXFCLEtBUTFCO1lBUENqSSxTQUR5QixNQUN6QkEsUUFDQTRCLFlBRnlCLE1BRXpCQSxXQUNBc0csVUFIeUIsTUFHekJBO2VBSEY7Z0JBZVVDLFlBR0FDLGFBeUJDckU7Ozs7d0JBbENULElBQUksQ0FBQy9ELFFBQVE7NEJBQ1gsTUFBTSxJQUFJaUUsTUFBTTt3QkFDbEI7Ozs7Ozs7Ozt3QkFHRSx1Q0FBdUM7d0JBQ2pDa0UsYUFBYXhMLHVEQUFHQSxDQUFDVSx1Q0FBRUEsRUFBRSxTQUFTMkMsUUFBUSxrQkFBa0JrSSxRQUFRckosRUFBRTt3QkFFeEUsa0RBQWtEO3dCQUM1Q3VKLGNBQWM7NEJBQ2xCdkosSUFBSXFKLFFBQVFySixFQUFFOzRCQUNkK0MsV0FBV3NHLFFBQVF0RyxTQUFTOzRCQUM1QlksV0FBVzBGLFFBQVExRixTQUFTOzRCQUM1QjZGLFdBQVdILFFBQVFHLFNBQVM7NEJBQzVCL0gsb0JBQW9CNEgsUUFBUTVILGtCQUFrQjs0QkFDOUNnSSxjQUFjSixRQUFRSSxZQUFZOzRCQUNsQ0MsZ0JBQWdCTCxRQUFRSyxjQUFjOzRCQUN0QzNGLGVBQWVzRixRQUFRdEYsYUFBYTs0QkFDcEM0RixvQkFBb0JOLFFBQVFNLGtCQUFrQjs0QkFDOUNDLFdBQVdQLFFBQVFPLFNBQVM7NEJBQzVCQyxpQkFBaUJSLFFBQVFRLGVBQWU7NEJBQ3hDQyxTQUFTVCxRQUFRUyxPQUFPOzRCQUN4QkMsaUJBQWlCVixRQUFRVSxlQUFlOzRCQUN4Q3hHLGFBQWE4RixRQUFROUYsV0FBVzs0QkFDaEMzQixXQUFXeUgsUUFBUXpILFNBQVM7NEJBQzVCRSxXQUFXLElBQUlEOzRCQUNmNEIsYUFBYTRGLFFBQVE1RixXQUFXOzRCQUNoQ0ksVUFBVXdGLFFBQVF4RixRQUFRO3dCQUM1Qjt3QkFFQSwrRUFBK0U7d0JBQy9FOzs0QkFBTXhGLDBEQUFNQSxDQUFDaUwsWUFBWUMsYUFBYTtnQ0FBRVMsT0FBTzs0QkFBSzs7O3dCQUFwRDt3QkFFQXBFLFFBQVE5QyxHQUFHLENBQUM7Ozs7Ozt3QkFDTG9DO3dCQUNQVSxRQUFRVixLQUFLLENBQUMsbUNBQW1DQTt3QkFDakQsTUFBTUE7Ozs7Ozs7UUFFVjs7SUFFQSxPQUFNK0UsaUJBMEJMLEdBMUJELFNBQU1BLGtCQUFrQixLQVF2QjtZQVBDOUksU0FEc0IsTUFDdEJBLFFBQ0E0QixZQUZzQixNQUV0QkEsV0FDQUMsT0FIc0IsTUFHdEJBO2VBSEY7Z0JBVVU4RSxZQUNBOUMsU0FDQWtGLE9BVUNoRjs7Ozs7Ozs7Ozt3QkFaRDRDLGFBQWFoSyx1REFBR0EsQ0FBQ1UsdUNBQUVBLEVBQUUsU0FBUzJDLFFBQVEsbUJBQW1CNEI7d0JBQ3pEaUMsVUFBVW5ILDhEQUFVQSxDQUFDaUssWUFBWTt3QkFDakNvQyxRQUFRM0wsOERBQVVBLENBQUNDLHVDQUFFQTt3QkFFM0J3RSxLQUFLcEMsT0FBTyxDQUFDa0MsU0FBQUE7NEJBQ1gsSUFBTXFILFlBQVlyTSx1REFBR0EsQ0FBQ2tILFNBQVNsQyxJQUFJOUMsRUFBRTs0QkFDckNrSyxNQUFNRSxNQUFNLENBQUNELFdBQVcsbUVBQ25CckgsSUFBSXVILFlBQVk7d0JBRXZCO3dCQUVBOzs0QkFBTUgsTUFBTUksTUFBTTs7O3dCQUFsQjs7Ozs7O3dCQUNPcEY7d0JBQ1BVLFFBQVFWLEtBQUssQ0FBQyxnQ0FBZ0NBO3dCQUM5QyxNQUFNQTs7Ozs7OztRQUVWOztJQUVBLGtGQUFrRjtJQUNwRix3REFBd0Q7SUFDeEQsT0FBTXFGLGFBaUJMLEdBakJELFNBQU1BLGNBQWNuRyxPQUF1QixFQUFFb0csY0FBcUM7O2VBQWxGO2dCQUNPL0wsMEJBWUl5Rzs7Ozt3QkFaVCxJQUFJLEdBQUN6RywyQkFBQUEsOENBQVdBLENBQUNvRSxXQUFXLGNBQXZCcEUsK0NBQUFBLHlCQUF5QnVCLEVBQUUsS0FBSSxDQUFDb0UsU0FBUzs0QkFDNUMsTUFBTSxJQUFJZ0IsTUFBTTt3QkFDbEI7Ozs7Ozs7Ozt3QkFHSTs7NEJBQU0sTUFBS3FGLG9CQUFvQixDQUFDckcsUUFBUXBFLEVBQUU7Ozt3QkFBMUM7NkJBQ0l3SyxnQkFBQUE7Ozs7d0JBQ0Y7OzRCQUFNLE1BQUtFLG9CQUFvQixDQUFDRixlQUFleEssRUFBRTs7O3dCQUFqRDs7O3dCQUdGLE1BQUsySyx3QkFBd0I7d0JBQzdCL0UsUUFBUTlDLEdBQUcsQ0FBQzs7Ozs7O3dCQUNQb0M7d0JBQ1BVLFFBQVFWLEtBQUssQ0FBQyw0QkFBNEJBO3dCQUMxQyxNQUFNQTs7Ozs7OztRQUVWOztJQUVBLHNFQUFzRTtJQUN0RSxPQUFNdUYsb0JBMEJMLEdBMUJELFNBQU1BLHFCQUFxQjFILFNBQXdCO2VBQW5EO2dCQUNPdEUsMEJBR0MwQyxRQUNBMkcsWUFJRTlDLFNBQ0FDLGNBQ0FpRixPQVdDaEY7Ozs7d0JBckJULElBQUksR0FBQ3pHLDJCQUFBQSw4Q0FBV0EsQ0FBQ29FLFdBQVcsY0FBdkJwRSwrQ0FBQUEseUJBQXlCdUIsRUFBRSxLQUFJLENBQUMrQyxXQUFXOzRCQUM5QyxNQUFNLElBQUlxQyxNQUFNO3dCQUNsQjt3QkFDTWpFLFNBQVMxQyw4Q0FBV0EsQ0FBQ29FLFdBQVcsQ0FBQzdDLEVBQUU7d0JBQ25DOEgsYUFBYWhLLHVEQUFHQSxDQUFDVSx1Q0FBRUEsRUFBRSxTQUFTMkMsUUFBUSxtQkFBbUI0Qjs7Ozs7Ozs7O3dCQUc3RCx1Q0FBdUM7d0JBQ2pDaUMsVUFBVW5ILDhEQUFVQSxDQUFDaUssWUFBWTt3QkFDbEI7OzRCQUFNL0osMkRBQU9BLENBQUNpSDs7O3dCQUE3QkMsZUFBZTt3QkFDZmlGLFFBQVEzTCw4REFBVUEsQ0FBQ0MsdUNBQUVBO3dCQUUzQnlHLGFBQWFLLElBQUksQ0FBQzFFLE9BQU8sQ0FBQyxTQUFDcUY7NEJBQ3pCaUUsS0FBTVUsQ0FBQUEsU0FBTSxDQUFDM0UsT0FBTzRFLEdBQUc7d0JBQ3pCO3dCQUVBLG1DQUFtQzt3QkFDbkNYLEtBQU1VLENBQUFBLFNBQU0sQ0FBQzlDO3dCQUViOzs0QkFBTW9DLE1BQU1JLE1BQU07Ozt3QkFBbEI7d0JBQ0ExRSxRQUFROUMsR0FBRyxDQUFDOzs7Ozs7d0JBQ0xvQzt3QkFDUFUsUUFBUVYsS0FBSyxDQUFDLG1DQUFtQ0E7d0JBQ2pELE1BQU1BOzs7Ozs7O1FBRVY7O0lBRUUsd0NBQXdDO0lBQ3hDLE9BQU13RixvQkFhTCxHQWJELFNBQU1BLHFCQUFxQkksZ0JBQXdCO2VBQW5EO2dCQUM0QnJNLDBCQUtsQjZLLFlBR0NwRTs7Ozt3QkFSVCxJQUFJLENBQUM0RixvQkFBb0IsR0FBQ3JNLDJCQUFBQSw4Q0FBV0EsQ0FBQ29FLFdBQVcsY0FBdkJwRSwrQ0FBQUEseUJBQXlCdUIsRUFBRSxHQUFFOzRCQUNyRDs7O3dCQUNGOzs7Ozs7Ozs7d0JBR1FzSixhQUFheEwsdURBQUdBLENBQUNVLHVDQUFFQSxFQUFFLFNBQVNDLDhDQUFXQSxDQUFDb0UsV0FBVyxDQUFDN0MsRUFBRSxFQUFFLGtCQUFrQjhLO3dCQUNsRjs7NEJBQU14TSw2REFBU0EsQ0FBQ2dMOzs7d0JBQWhCO3dCQUNBMUQsUUFBUTlDLEdBQUcsQ0FBQzs7Ozs7O3dCQUNMb0M7d0JBQ1BVLFFBQVFWLEtBQUssQ0FBQyxtQ0FBbUNBO3dCQUNqRCxNQUFNQTs7Ozs7OztRQUVWOztJQUVBLHNEQUFzRDtJQUNwRHlGLE9BQUFBLHdCQUVDLEdBRkRBLFNBQUFBO1FBQ0VsTCwrQ0FBS0EsQ0FBQ3NMLFFBQVEsQ0FBQ25MLHNFQUFpQkE7SUFDbEM7SUFHRjs7O0dBR0MsR0FDRCxPQUFNMkUsMEJBaURKLEdBakRGLFNBQU1BLDJCQUEyQnBELE1BQWM7O2VBQS9DO2dCQU1RNkosa0JBQ0FDLGVBRUFDLGdCQU9BeEcscUJBZ0JBeUcsb0JBRUY3RSxHQUNBOEU7Ozs7d0JBL0JKLElBQUksQ0FBQ2pLLFFBQVEsTUFBTSxJQUFJaUUsTUFBTTt3QkFFSjs7NEJBQU1ySCwyREFBT0EsQ0FBQ0YsOERBQVVBLENBQUNXLHVDQUFFQSxFQUFFOzs7d0JBQWhEd00sbUJBQW1CO3dCQUNIOzs0QkFBTWpOLDJEQUFPQSxDQUFDRiw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUU7Ozt3QkFBN0N5TSxnQkFBZ0I7d0JBRWhCQyxpQkFBaUJELGNBQWMzRixJQUFJLENBQUNFLEdBQUcsQ0FBQyxTQUFDMUg7bUNBQzdDYywwREFBYUEsQ0FBQ3lNLFlBQVksQ0FBQztnQ0FDekJyTCxJQUFJbEMsSUFBSWtDLEVBQUU7K0JBQ1BsQyxJQUFJeUgsSUFBSTs7d0JBSVRiLHNCQUFzQnNHLGlCQUFpQjFGLElBQUksQ0FBQ0UsR0FBRyxDQUFDMUgsU0FBQUE7NEJBQ3BELElBQU02QyxXQUFXaEMscURBQVFBLENBQUMwTSxZQUFZLENBQUM7Z0NBQ3JDckwsSUFBSWxDLElBQUlrQyxFQUFFOytCQUNQbEMsSUFBSXlILElBQUk7NEJBR2IsSUFBTStGLGlCQUFpQkosZUFBZXpLLE1BQU0sQ0FDMUMsU0FBQzhLO3VDQUFVQSxNQUFNNUssUUFBUSxDQUFDNkssV0FBVyxPQUFPN0ssU0FBU00sSUFBSSxDQUFDdUssV0FBVzs7NEJBR3ZFLE9BQU8sSUFBSTdNLHFEQUFRQSxDQUFDLHdJQUNmZ0M7Z0NBQ0hnQixRQUFRMko7O3dCQUVaO3dCQUVNSCxxQkFBcUJ0Tiw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUUsU0FBUzJDLFFBQVE7d0JBRXZEbUYsSUFBSXJJLHlEQUFLQSxDQUFDa04sb0JBQW9Cak4seURBQUtBLENBQUMsVUFBVSxNQUFNZ0IseURBQWFBLENBQUN1TSxRQUFRO3dCQUNuRTs7NEJBQU0xTiwyREFBT0EsQ0FBQ3VJOzs7d0JBQXJCOEUsT0FBTzt3QkFFWCxJQUFJLENBQUNBLEtBQUtNLEtBQUssRUFBRTs0QkFDZjs7Z0NBQU8sTUFBS0MsNkJBQTZCLENBQUNQLEtBQUs5RixJQUFJLENBQUMsRUFBRSxFQUFFWjs7d0JBQzFEO3dCQUVBNEIsSUFBSXJJLHlEQUFLQSxDQUFDa04sb0JBQW9Cak4seURBQUtBLENBQUMsVUFBVSxNQUFNZ0IseURBQWFBLENBQUMwTSxVQUFVO3dCQUNyRTs7NEJBQU03TiwyREFBT0EsQ0FBQ3VJOzs7d0JBQXJCOEUsT0FBTzt3QkFFUCxJQUFJLENBQUNBLEtBQUtNLEtBQUssRUFBRTs0QkFDZjs7Z0NBQU8sTUFBS0MsNkJBQTZCLENBQUNQLEtBQUs5RixJQUFJLENBQUMsRUFBRSxFQUFFWjs7d0JBQzFEO3dCQUVBOzs0QkFBTztnQ0FBRU4sU0FBUztnQ0FBTXBCLE1BQU07NEJBQUs7Ozs7UUFDcEM7O0lBRUQsT0FBY3FDLDhCQTRDYixHQTVDRCxTQUFjQTtlQUFkO2dCQUtVMkYsa0JBQ0FySCxXQVNBc0gsZUFDQUMsZ0JBU0F4RyxxQkFlQ1E7Ozs7Ozs7Ozs7d0JBbkNrQjs7NEJBQU1uSCwyREFBT0EsQ0FBQ0YsOERBQVVBLENBQUNXLHVDQUFFQSxFQUFFOzs7d0JBQWhEd00sbUJBQW1CO3dCQUNuQnJILFlBQVlxSCxpQkFBaUIxRixJQUFJLENBQUNFLEdBQUcsQ0FBQyxTQUFDMUg7bUNBQzNDYSxxREFBUUEsQ0FBQzBNLFlBQVksQ0FBQztnQ0FDcEJyTCxJQUFJbEMsSUFBSWtDLEVBQUU7K0JBQ1BsQyxJQUFJeUgsSUFBSTs7d0JBTU87OzRCQUFNeEgsMkRBQU9BLENBQUNGLDhEQUFVQSxDQUFDVyx1Q0FBRUEsRUFBRTs7O3dCQUE3Q3lNLGdCQUFnQjt3QkFDaEJDLGlCQUFpQkQsY0FBYzNGLElBQUksQ0FBQ0UsR0FBRyxDQUFDLFNBQUMxSDttQ0FDN0NjLDBEQUFhQSxDQUFDeU0sWUFBWSxDQUFDO2dDQUN6QnJMLElBQUlsQyxJQUFJa0MsRUFBRTsrQkFDUGxDLElBQUl5SCxJQUFJOzt3QkFHZixtRUFBbUU7d0JBRW5FLDZCQUE2Qjt3QkFDdkJiLHNCQUFzQmYsVUFBVTZCLEdBQUcsQ0FBQzdFLFNBQUFBOzRCQUN4QyxJQUFNMkssaUJBQWlCSixlQUFlekssTUFBTSxDQUMxQyxTQUFDOEs7dUNBQVVBLE1BQU01SyxRQUFRLENBQUM2SyxXQUFXLE9BQU83SyxTQUFTTSxJQUFJLENBQUN1SyxXQUFXOzs0QkFHdkUsT0FBTyxJQUFJN00scURBQVFBLENBQUMsd0lBQ2ZnQztnQ0FDSGdCLFFBQVEySjs7d0JBRVg7d0JBRUQseURBQXlEO3dCQUN6RCw2RUFBNkU7d0JBRTdFOzs0QkFBTzVHOzs7d0JBQ0FRO3dCQUNQVSxRQUFRVixLQUFLLENBQUMscURBQXFEQTt3QkFDbkUsTUFBTUE7Ozs7Ozs7UUFFVjs7SUFFQTs7R0FFQyxHQUNELE9BQU0yRyx1QkFvRUosR0FwRUYsU0FBTUEsd0JBQXdCMUssTUFBYzs7ZUFBNUM7Z0JBU1U2SixrQkFDQXJILFdBT0FzSCxlQUNBQyxnQkFPQXhHLHFCQVdBeUcsb0JBQ0FDLE1BT0FVLFVBb0JDNUc7Ozs7d0JBNURULElBQUksQ0FBQy9ELFFBQVE7NEJBQ1gsTUFBTSxJQUFJaUUsTUFBTTt3QkFDbEI7Ozs7Ozs7Ozt3QkFHMkI7OzRCQUFNckgsMkRBQU9BLENBQUNGLDhEQUFVQSxDQUFDVyx1Q0FBRUEsRUFBRTs7O3dCQUFoRHdNLG1CQUFtQjt3QkFDbkJySCxZQUFZcUgsaUJBQWlCMUYsSUFBSSxDQUFDRSxHQUFHLENBQUMsU0FBQzFIO21DQUMzQ2EscURBQVFBLENBQUMwTSxZQUFZLENBQUM7Z0NBQ3BCckwsSUFBSWxDLElBQUlrQyxFQUFFOytCQUNQbEMsSUFBSXlILElBQUk7O3dCQUlPOzs0QkFBTXhILDJEQUFPQSxDQUFDRiw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUU7Ozt3QkFBN0N5TSxnQkFBZ0I7d0JBQ2hCQyxpQkFBaUJELGNBQWMzRixJQUFJLENBQUNFLEdBQUcsQ0FBQyxTQUFDMUg7bUNBQzdDYywwREFBYUEsQ0FBQ3lNLFlBQVksQ0FBQztnQ0FDekJyTCxJQUFJbEMsSUFBSWtDLEVBQUU7K0JBQ1BsQyxJQUFJeUgsSUFBSTs7d0JBSVRiLHNCQUFzQmYsVUFBVTZCLEdBQUcsQ0FBQzdFLFNBQUFBOzRCQUN4QyxJQUFNMkssaUJBQWlCSixlQUFlekssTUFBTSxDQUMxQyxTQUFDOEs7dUNBQVVBLE1BQU01SyxRQUFRLENBQUM2SyxXQUFXLE9BQU83SyxTQUFTTSxJQUFJLENBQUN1SyxXQUFXOzs0QkFHdkUsT0FBTyxJQUFJN00scURBQVFBLENBQUMsd0lBQ2ZnQztnQ0FDSGdCLFFBQVEySjs7d0JBRVo7d0JBRU1ILHFCQUFxQnROLDhEQUFVQSxDQUFDVyx1Q0FBRUEsRUFBRSxTQUFTMkMsUUFBUTt3QkFDOUM7OzRCQUFNcEQsMkRBQU9BLENBQUNvTjs7O3dCQUFyQkMsT0FBTzt3QkFFYixJQUFJQSxLQUFLTSxLQUFLLEVBQUU7NEJBQ2Q5RixRQUFROUMsR0FBRyxDQUFDOzRCQUNaOzs7O3dCQUNGO3dCQUVpQjs7NEJBQU1pSixRQUFRQyxHQUFHLENBQ2hDWixLQUFLOUYsSUFBSSxDQUFDRSxHQUFHOzJDQUFDLDZFQUFPMUg7d0NBQ2JtTzs7OztnREFBYzs7b0RBQU0sTUFBS04sNkJBQTZCLENBQzFEN04sS0FDQTRHOzs7Z0RBRkl1SCxjQUFjO2dEQUtwQixJQUFJQSxZQUFZakosSUFBSSxFQUFFO29EQUNwQmlKLFlBQVlqSixJQUFJLENBQUNrSixJQUFJLENBQUMsU0FBQ0MsR0FBR0M7NERBQ1REO3dEQUFmLElBQU1FLFNBQVNGLENBQUFBLFdBQUFBLEVBQUUzSSxLQUFLLGNBQVAySSxzQkFBQUEsV0FBVzs0REFDWEM7d0RBQWYsSUFBTUUsU0FBU0YsQ0FBQUEsV0FBQUEsRUFBRTVJLEtBQUssY0FBUDRJLHNCQUFBQSxXQUFXO3dEQUMxQixPQUFPQyxTQUFTQztvREFDbEI7Z0RBQ0Y7Z0RBRUE7O29EQUFPTDs7OztnQ0FDVDtnREFmcUJuTzs7Ozs7O3dCQURqQmdPLFdBQVc7d0JBbUJqQjs7NEJBQU9BOzs7d0JBQ0E1Rzt3QkFDUFUsUUFBUVYsS0FBSyxDQUFDLG9DQUFvQ0E7d0JBQ2xELE1BQU1BOzs7Ozs7O1FBRVQ7O0lBRUQsT0FBTXFILGdCQTBCTCxHQTFCRCxTQUFNQSxpQkFBaUIxTyxVQUErQjtlQUF0RDtnQkFFVTJPLFNBSUVDLFdBZ0JEdkg7Ozs7Ozs7Ozs7d0JBcEJEc0gsVUFBVXBPLDhEQUFZQSxDQUFDSSx1Q0FBRUEsRUFBRTt3QkFFakMsa0VBQWtFO3dCQUNsRSxJQUFJLENBQUNYLFdBQVdtQyxFQUFFLElBQUluQyxXQUFXbUMsRUFBRSxDQUFDME0sSUFBSSxPQUFPLElBQUk7NEJBQzNDRCxZQUFZM08sdURBQUdBLENBQUMwTzs0QkFDdEIzTyxXQUFXbUMsRUFBRSxHQUFHeU0sVUFBVXpNLEVBQUU7d0JBQzlCO3dCQUVBLHFEQUFxRDt3QkFDckQsSUFBSW5DLFdBQVdpSSxTQUFTLEVBQUU7NEJBQ3hCakksV0FBV2lJLFNBQVMsQ0FBQzlGLEVBQUUsR0FBR25DLFdBQVdtQyxFQUFFO3dCQUN6Qzt3QkFFQSw4QkFBOEI7d0JBQzlCbkMsV0FBV2lFLFNBQVMsR0FBRyxJQUFJRDt3QkFFM0Isb0NBQW9DO3dCQUNwQzs7NEJBQU14RCwwREFBTUEsQ0FBQ1AsdURBQUdBLENBQUMwTyxTQUFTM08sV0FBV21DLEVBQUUsR0FBR25DLFdBQVd3TSxZQUFZOzs7d0JBQWpFO3dCQUNBekUsUUFBUTlDLEdBQUcsQ0FBQzt3QkFDWjs7NEJBQU9qRjs7O3dCQUNBcUg7d0JBQ1BVLFFBQVFWLEtBQUssQ0FBQyx1Q0FBdUNBO3dCQUNyRCxNQUFNLElBQUlFLE1BQU07Ozs7Ozs7UUFFcEI7O0lBRUEsT0FBY3VHLDZCQW9GYixHQXBGRCxTQUFjQSw4QkFDWjlHLFVBQStDLEVBQy9DSCxtQkFBK0I7ZUFGakM7Z0JBSVFhLE1BR0FSLGlCQWVBWCxTQW1DQVksU0FDQUMsY0FFQWpDOzs7O3dCQXhEQXVDLE9BQU9WLFdBQVdVLElBQUk7d0JBRTVCLGdEQUFnRDt3QkFDMUNSLGtCQUFrQixDQUFDUSxLQUFLNUIsU0FBUyxNQUFLLEVBQUc2QixHQUFHLENBQUMsU0FBQ3pEO2dDQUV4QkEsNEJBQUFBOzRCQUQxQixxQ0FBcUM7NEJBQ3JDLElBQU00SyxxQkFBb0I1Syx3QkFBQUEsWUFBWXBCLFFBQVEsY0FBcEJvQiw2Q0FBQUEsNkJBQUFBLHNCQUFzQmQsSUFBSSxjQUExQmMsaURBQUFBLDJCQUE0QnlKLFdBQVcsR0FBR2tCLElBQUk7NEJBQ3hFLElBQU1qSCxlQUFlZixvQkFBb0JnQixJQUFJLENBQzNDQyxTQUFBQTt1Q0FBTUEsR0FBRzFFLElBQUksQ0FBQ3VLLFdBQVcsR0FBR2tCLElBQUksT0FBT0M7OzRCQUd6QyxnRUFBZ0U7NEJBQ2hFLE9BQU8sd0lBQ0Y1SztnQ0FDSHBCLFVBQVU4RSxnQkFBZ0IxRCxZQUFZcEIsUUFBUTs7d0JBRWxEO3dCQUVBLDJDQUEyQzt3QkFDckN5RCxVQUFVLElBQUl0RixtREFBT0EsQ0FBQzs0QkFDMUJrQixJQUFJNkUsV0FBVzdFLEVBQUU7NEJBQ2pCMEQsZ0JBQWdCNkIsS0FBSzdCLGNBQWMsSUFBSTs0QkFDdkNDLFdBQVdvQjs0QkFDWG5CLE9BQU8yQixLQUFLM0IsS0FBSyxJQUFJOzRCQUNyQnZDLGFBQWFrRSxLQUFLbEUsV0FBVyxJQUFJOzRCQUNqQ3dDLFVBQVUwQixLQUFLMUIsUUFBUSxJQUFJOzRCQUMzQkcsa0JBQWtCdUIsS0FBS3ZCLGdCQUFnQixJQUFJOzRCQUMzQ1QsYUFBYWdDLEtBQUtoQyxXQUFXLElBQUk7NEJBQ2pDVSxlQUFlc0IsS0FBS3RCLGFBQWEsSUFBSS9FLHlEQUFhQSxDQUFDME4sUUFBUTs0QkFDM0QxTCxRQUFRcUUsS0FBS3JFLE1BQU0sSUFBSTs0QkFDdkJVLFdBQVd0Qyw0RUFBeUJBLENBQUNpRyxLQUFLM0QsU0FBUzs0QkFDbkRFLFdBQVd4Qyw0RUFBeUJBLENBQUNpRyxLQUFLekQsU0FBUzs0QkFDbkRpRSxXQUFXekcsNEVBQXlCQSxDQUFDaUcsS0FBS1EsU0FBUzs0QkFDbkRGLGNBQWNOLEtBQUtNLFlBQVk7NEJBQy9CQyxXQUFXUCxLQUFLTyxTQUFTOzRCQUN6QjlDLE1BQU0sQ0FBQ3VDLEtBQUt2QyxJQUFJLE1BQUssRUFBR3dDLEdBQUcsQ0FBQyxTQUFDNkM7b0NBRURBLHdCQUFBQTtnQ0FEMUIsK0JBQStCO2dDQUMvQixJQUFNc0UscUJBQW9CdEUsb0JBQUFBLFFBQVExSCxRQUFRLGNBQWhCMEgseUNBQUFBLHlCQUFBQSxrQkFBa0JwSCxJQUFJLGNBQXRCb0gsNkNBQUFBLHVCQUF3Qm1ELFdBQVcsR0FBR2tCLElBQUk7Z0NBQ3BFLElBQU1qSCxlQUFlZixvQkFBb0JnQixJQUFJLENBQzNDQyxTQUFBQTsyQ0FBTUEsR0FBRzFFLElBQUksQ0FBQ3VLLFdBQVcsR0FBR2tCLElBQUksT0FBT0M7O2dDQUd6QyxPQUFPLHdJQUNGdEU7b0NBQ0gxSCxVQUFVOEUsZ0JBQWdCNEMsUUFBUTFILFFBQVE7OzRCQUU5Qzs0QkFDQW9ELGVBQWV3QixLQUFLeEIsYUFBYTs0QkFDakNQLE9BQU8rQixLQUFLL0IsS0FBSzs0QkFDakJVLE1BQU1xQixLQUFLckIsSUFBSSxJQUFJbkYsb0RBQVFBLENBQUM4TixRQUFRO3dCQUN0Qzt3QkFFQWpILFFBQVE5QyxHQUFHLENBQUMsd0JBQXdCc0IsUUFBUXBFLEVBQUU7d0JBQzlDLGdDQUFnQzt3QkFDMUJnRixVQUFVbkgsOERBQVVBLENBQUNnSCxXQUFXZ0csR0FBRyxFQUFFO3dCQUN0Qjs7NEJBQU05TSwyREFBT0EsQ0FBQ2lIOzs7d0JBQTdCQyxlQUFlO3dCQUVmakMsT0FBc0JpQyxhQUFhSyxJQUFJLENBQUNFLEdBQUcsQ0FBQ1MsU0FBQUE7Z0NBSXRCb0Msd0JBQUFBOzRCQUgxQixJQUFNQSxVQUFVcEMsT0FBT1YsSUFBSTs0QkFFM0IscUNBQXFDOzRCQUNyQyxJQUFNb0gscUJBQW9CdEUsb0JBQUFBLFFBQVExSCxRQUFRLGNBQWhCMEgseUNBQUFBLHlCQUFBQSxrQkFBa0JwSCxJQUFJLGNBQXRCb0gsNkNBQUFBLHVCQUF3Qm1ELFdBQVcsR0FBR2tCLElBQUk7NEJBQ3BFLElBQU1qSCxlQUFlZixvQkFBb0JnQixJQUFJLENBQzNDQyxTQUFBQTt1Q0FBTUEsR0FBRzFFLElBQUksQ0FBQ3VLLFdBQVcsR0FBR2tCLElBQUksT0FBT0M7OzRCQUd6QyxzQ0FBc0M7NEJBQ3RDLElBQU1HLGtCQUFrQix3SUFDbkJ6RTtnQ0FDSHJJLElBQUlpRyxPQUFPakcsRUFBRTtnQ0FDYitDLFdBQVdxQixRQUFRcEUsRUFBRTtnQ0FDckJXLFVBQVU4RSxnQkFBZ0I0QyxRQUFRMUgsUUFBUTtnQ0FDMUNpQixXQUFXdEMsNEVBQXlCQSxDQUFDK0ksUUFBUXpHLFNBQVM7Z0NBQ3RERSxXQUFXeEMsNEVBQXlCQSxDQUFDK0ksUUFBUXZHLFNBQVM7OzRCQUd4RCwyREFBMkQ7NEJBQzNELE9BQU8sSUFBSXBELHdEQUFXQSxDQUFDb087d0JBQ3pCO3dCQUVBOzs0QkFBTztnQ0FBRTFJLFNBQUFBO2dDQUFTcEIsTUFBQUE7NEJBQUs7Ozs7UUFDekI7O0lBRUEsT0FBTStKLGtCQW1ESixHQW5ERixTQUFNQSxtQkFBbUIsS0FRdkI7WUFQQTVMLFNBRHVCLE1BQ3ZCQSxRQUNBaUQsVUFGdUIsTUFFdkJBLFNBQ0FwQixPQUh1QixNQUd2QkE7ZUFIRjtnQkFZVWdLLGFBRUFDLGNBVUFDLG1CQUdBbEksU0FDQW1JLFVBbUJDakk7Ozs7d0JBdENULElBQUksQ0FBQy9ELFFBQVEsTUFBTSxJQUFJaUUsTUFBTTs7Ozs7Ozs7O3dCQUdyQjRILGNBQWMsSUFBSW5MO3dCQUVsQm9MLGVBQWUsSUFBSW5PLG1EQUFPQSxDQUFDLHdJQUM1QnNGOzRCQUNIVixnQkFBZ0IsR0FBaUJzSixPQUFkNUksUUFBUXBFLEVBQUUsRUFBQyxLQUF5QixPQUF0QmdOLFlBQVlJLE9BQU87NEJBQ3BEbkosZUFBZS9FLHlEQUFhQSxDQUFDdU0sUUFBUTs0QkFDckM3SixXQUFXb0w7NEJBQ1hsTCxXQUFXa0w7NEJBQ1hqSCxXQUFXaUg7NEJBQ1hoSyxJQUFJOzt3QkFHQWtLLG9CQUFvQnBQLHVEQUFHQSxDQUFDRCw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUUsU0FBUzJDLFFBQVE7d0JBQzlEOzs0QkFBTTlDLDBEQUFNQSxDQUFDNk8sbUJBQW1CRCxhQUFhNUMsWUFBWTs7O3dCQUF6RDt3QkFFTXJGLFVBQVVuSCw4REFBVUEsQ0FBQ3FQLG1CQUFtQjt3QkFDeENDLFdBQVc1Tyw4REFBVUEsQ0FBQ0MsdUNBQUVBO3dCQUU5QndFLEtBQUtwQyxPQUFPLENBQUMsU0FBQ2tDLEtBQUtqQzs0QkFDakIsSUFBTXNKLFlBQVlyTSx1REFBR0EsQ0FBQ2tILFNBQVMsR0FBYWdJLE9BQVZsSyxJQUFJOUMsRUFBRSxFQUFDLEtBQXlCLE9BQXRCZ04sWUFBWUksT0FBTzs0QkFDL0RELFNBQVNFLEdBQUcsQ0FBQ2xELFdBQVc7Z0NBQ3RCbkssSUFBSW1LLFVBQVVuSyxFQUFFO2dDQUNoQitDLFdBQVdtSyxrQkFBa0JsTixFQUFFO2dDQUMvQlcsVUFBVW1DLElBQUluQyxRQUFRLENBQUMwSixZQUFZO2dDQUNuQzdHLE9BQU8zQztnQ0FDUGUsV0FBV29MLFlBQVlJLE9BQU87Z0NBQzlCdEwsV0FBV2tMLFlBQVlJLE9BQU87Z0NBQzlCL0osY0FBYztnQ0FDZEUsYUFBYTs0QkFDZjt3QkFDRjt3QkFFQTs7NEJBQU00SixTQUFTN0MsTUFBTTs7O3dCQUFyQjt3QkFFQTs7NEJBQU8yQzs7O3dCQUNBL0g7d0JBQ1BVLFFBQVFWLEtBQUssQ0FBQyxpQ0FBaUNBO3dCQUMvQyxNQUFNQTs7Ozs7OztRQUVUOztJQUVEOzs7R0FHQyxHQUNELE9BQU1vSSxhQTZFTCxHQTdFRCxTQUFNQSxjQUFjLEtBTW5CO1lBTENsTSxXQURrQixNQUNsQkEsVUFDQWdGLGNBRmtCLE1BRWxCQTtlQUZGO2dCQVFRdkQsYUFNQTBLLFVBQ0FDLFdBQ0FDLGNBTUFDLFNBQ0FDLFVBQ0F4TSxRQUdBeU0sY0FDQUMsZUFNQS9ILFdBR0FnSSxpQkFDQUM7Ozs7d0JBL0JOLHdDQUF3Qzt3QkFDbENsTCxjQUFjcEUsOENBQVdBLENBQUNvRSxXQUFXO3dCQUMzQyxJQUFJLENBQUNBLGFBQWE7NEJBQ2hCLE1BQU0sSUFBSXVDLE1BQU07d0JBQ2xCO3dCQUVBLG1DQUFtQzt3QkFDN0JtSSxXQUFXMVAsOERBQVVBLENBQUNXLHVDQUFFQSxFQUFFO3dCQUMxQmdQLFlBQVl2UCx5REFBS0EsQ0FBQ3NQLFVBQVVyUCx5REFBS0EsQ0FBQyxZQUFZLE1BQU1rRDt3QkFDckM7OzRCQUFNckQsMkRBQU9BLENBQUN5UDs7O3dCQUE3QkMsZUFBZTt3QkFFckIsSUFBSUEsYUFBYS9CLEtBQUssRUFBRTs0QkFDdEIsTUFBTSxJQUFJdEcsTUFBTTt3QkFDbEI7d0JBRU1zSSxVQUFVRCxhQUFhbkksSUFBSSxDQUFDLEVBQUU7d0JBQzlCcUksV0FBV0QsUUFBUW5JLElBQUk7d0JBQ3ZCcEUsU0FBU3VNLFFBQVExTixFQUFFO3dCQUV6Qix1Q0FBdUM7d0JBQ2pDNE4sZUFBZTlQLHVEQUFHQSxDQUFDVSx1Q0FBRUEsRUFBRSx3QkFBd0I0SDt3QkFDL0I7OzRCQUFNcEksMERBQU1BLENBQUM0UDs7O3dCQUE3QkMsZ0JBQWdCO3dCQUV0QixJQUFJLENBQUNBLGNBQWM1RixNQUFNLElBQUk7NEJBQzNCLE1BQU0sSUFBSTdDLE1BQU07d0JBQ2xCO3dCQUVNVSxZQUFZK0gsY0FBY3RJLElBQUk7d0JBRXBDLHVDQUF1Qzt3QkFDakN1SSxrQkFBa0IsR0FBa0IzTSxPQUFmaUYsYUFBWSxLQUFhdkUsT0FBVlYsUUFBTyxLQUFjLE9BQVhVLEtBQUttTSxHQUFHO3dCQUN0REQsb0JBQW9COzRCQUN4Qi9OLElBQUk4Tjs0QkFDSmhJLFdBQVdBOzRCQUNYTSxhQUFBQTs0QkFDQWpGLFFBQUFBOzRCQUNBOE0sVUFBVU4sU0FBU00sUUFBUSxJQUFJOzRCQUMvQkMsY0FBY1AsU0FBU08sWUFBWSxJQUFJLENBQUM7NEJBQ3hDQyxVQUFVOzRCQUNWQyxpQkFBaUI7NEJBQ2pCN0ssYUFBYTs0QkFDYjhLLEtBQUtsTjs0QkFDTG1OLFVBQVVYLFNBQVNXLFFBQVEsSUFBSTs0QkFDL0JDLE1BQU07NEJBQ05DLFNBQVM7NEJBQ1RDLFVBQVU7NEJBQ1ZyTixVQUFBQTs0QkFDQXNOLFVBQVUsSUFBSTdNOzRCQUNkRCxXQUFXLElBQUlDOzRCQUNmQyxXQUFXLElBQUlEOzRCQUNmOE0sYUFBYTtnQ0FDWEMsZ0JBQWdCO2dDQUNoQkMsaUJBQWlCO2dDQUNqQkMsYUFBYTtnQ0FDYkMsY0FBYztnQ0FDZEMsY0FBYztnQ0FDZEMsbUJBQW1CO2dDQUNuQkMsaUJBQWlCO2dDQUNqQkMsbUJBQW1CO2dDQUNuQkMsbUJBQW1CO2dDQUNuQkMsdUJBQXVCOzRCQUN6Qjs0QkFDQUMsZUFBZTs0QkFDZkMsZUFBZTs0QkFDZkMsaUJBQWlCOzRCQUNqQkMsUUFBUTt3QkFDVjt3QkFFQSw4QkFBOEI7d0JBQzlCOzs0QkFBTXBSLDBEQUFNQSxDQUFDUCx1REFBR0EsQ0FBQ1UsdUNBQUVBLEVBQUUsa0JBQWtCc1Asa0JBQWtCQzs7O3dCQUF6RDs7Ozs7O1FBQ0Y7O2tFQTF1Q0lqTzs7WUFHQTRQLEtBQUFBO2lCQUFKLHVDQURxQztZQUNyQztnQkFDRSxPQUFPalEsK0NBQUtBLENBQUNrUSxRQUFRLEdBQUd2TCxPQUFPLENBQUNzTCxjQUFjO1lBQ2hEO2lCQUVBLGFBQW1CdEwsT0FBdUI7Z0JBQ3hDM0UsK0NBQUtBLENBQUNzTCxRQUFRLENBQUNyTCxzRUFBaUJBLENBQUMwRTtZQUNuQzs7O1lBRUl3TCxLQUFBQTtpQkFBSjtnQkFDRSxPQUFPblEsK0NBQUtBLENBQUNrUSxRQUFRLEdBQUd2TCxPQUFPLENBQUN5TCxtQkFBbUI7WUFDckQ7aUJBRUEsYUFBdUI3TSxJQUFtQjtnQkFDeEN2RCwrQ0FBS0EsQ0FBQ3NMLFFBQVEsQ0FBQ3BMLDJFQUFzQkEsQ0FBQ3FEO1lBQ3hDOzs7WUFFSThNLEtBQUFBO2lCQUFKO2dCQUNFLE9BQU9yUSwrQ0FBS0EsQ0FBQ2tRLFFBQVEsR0FBR3ZMLE9BQU8sQ0FBQ29HLGNBQWM7WUFDaEQ7aUJBRUEsYUFBMEJBLGNBQThCO2dCQUN0RC9LLCtDQUFLQSxDQUFDc0wsUUFBUSxDQUFDbEwsc0VBQWlCQSxDQUFDMks7WUFDbkM7OztXQXpCSTFLOztBQTZ1Q0MsSUFBTWtCLGlCQUFpQixJQUFJbEIsaUJBQWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9hcGkvZmlyZWJhc2Uvd29ya291dC9zZXJ2aWNlLnRzP2M1ZTIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2FwaS9maXJlYmFzZS93b3Jrb3V0L3NlcnZpY2UudHNcbmltcG9ydCB7XG4gIGNvbGxlY3Rpb24sXG4gIGRvYyxcbiAgZ2V0RG9jcyxcbiAgZ2V0RG9jLFxuICB1cGRhdGVEb2MsXG4gIHF1ZXJ5LFxuICB3aGVyZSxcbiAgb3JkZXJCeSwgXG4gIERvY3VtZW50RGF0YSxcbiAgUXVlcnlEb2N1bWVudFNuYXBzaG90LFxuICBjb2xsZWN0aW9uIGFzIGZzQ29sbGVjdGlvbixcbiAgc2V0RG9jLFxuICBkZWxldGVEb2MsXG4gIHdyaXRlQmF0Y2hcbn0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcblxuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi9jb25maWcnO1xuaW1wb3J0IHsgdXNlclNlcnZpY2UgfSBmcm9tICcuLi91c2VyJztcbmltcG9ydCB7IFxuICBFeGVyY2lzZUxvZywgXG4gIEV4ZXJjaXNlQ2F0ZWdvcnksIFxuICBFeGVyY2lzZSwgXG4gIEJvZHlQYXJ0LCBcbiAgRXhlcmNpc2VWaWRlbywgXG4gIEV4ZXJjaXNlQXV0aG9yLCBcbiAgRXhlcmNpc2VWaWRlb1Zpc2liaWxpdHksIFxuICBFeGVyY2lzZURldGFpbCwgXG4gIEV4ZXJjaXNlUmVmZXJlbmNlIH0gZnJvbSAnLi4vZXhlcmNpc2UvdHlwZXMnO1xuaW1wb3J0IHsgZXhlcmNpc2VTZXJ2aWNlIH0gZnJvbSAnLi4vZXhlcmNpc2Uvc2VydmljZSc7XG5pbXBvcnQgeyBQcm9maWxlSW1hZ2UgfSBmcm9tICcuLi91c2VyL3R5cGVzJ1xuaW1wb3J0IHsgV29ya291dCwgV29ya291dFN1bW1hcnksIEJvZHlab25lLCBJbnRyb1ZpZGVvLCBSZXBzQW5kV2VpZ2h0TG9nLCBXb3Jrb3V0UmF0aW5nIH0gZnJvbSAnLi4vd29ya291dC90eXBlcyc7XG5pbXBvcnQgeyBXb3Jrb3V0U3RhdHVzLCBTd2VhdGxpc3RDb2xsZWN0aW9uIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBmb3JtYXQgfSBmcm9tICdkYXRlLWZucyc7IFxuaW1wb3J0IHsgY29udmVydFRpbWVzdGFtcCwgc2VydmVyVGltZXN0YW1wIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdGltZXN0YW1wJzsgLy8gQWRqdXN0IHRoZSBpbXBvcnQgcGF0aFxuaW1wb3J0IHsgY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL2Zvcm1hdERhdGUnO1xuaW1wb3J0IHsgQ2hhbGxlbmdlLCBDaGFsbGVuZ2VTdGF0dXMsIFVzZXJDaGFsbGVuZ2UgfSBmcm9tICcuLi8uLi8uLi9hcGkvZmlyZWJhc2Uvd29ya291dC90eXBlcyc7XG5cbmltcG9ydCB7IHN0b3JlIH0gZnJvbSAnLi4vLi4vLi4vcmVkdXgvc3RvcmUnO1xuaW1wb3J0IHsgc2V0Q3VycmVudFdvcmtvdXQsIHNldEN1cnJlbnRFeGVyY2lzZUxvZ3MsIHJlc2V0V29ya291dFN0YXRlLCBzZXRXb3Jrb3V0U3VtbWFyeSB9IGZyb20gJy4uLy4uLy4uL3JlZHV4L3dvcmtvdXRTbGljZSc7XG5cblxuaW50ZXJmYWNlIEZpcmVzdG9yZUVycm9yIHtcbiAgY29kZTogc3RyaW5nO1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgc3RhY2s/OiBzdHJpbmc7XG59XG5cbmNsYXNzIFdvcmtvdXRTZXJ2aWNlIHtcblxuLy8gUmVwbGFjZSBnZXR0ZXJzL3NldHRlcnMgdG8gdXNlIFJlZHV4XG4gIGdldCBjdXJyZW50V29ya291dCgpOiBXb3Jrb3V0IHwgbnVsbCB7XG4gICAgcmV0dXJuIHN0b3JlLmdldFN0YXRlKCkud29ya291dC5jdXJyZW50V29ya291dDtcbiAgfVxuXG4gIHNldCBjdXJyZW50V29ya291dCh3b3Jrb3V0OiBXb3Jrb3V0IHwgbnVsbCkge1xuICAgIHN0b3JlLmRpc3BhdGNoKHNldEN1cnJlbnRXb3Jrb3V0KHdvcmtvdXQpKTtcbiAgfVxuXG4gIGdldCBjdXJyZW50V29ya291dExvZ3MoKTogRXhlcmNpc2VMb2dbXSB7XG4gICAgcmV0dXJuIHN0b3JlLmdldFN0YXRlKCkud29ya291dC5jdXJyZW50RXhlcmNpc2VMb2dzO1xuICB9XG5cbiAgc2V0IGN1cnJlbnRXb3Jrb3V0TG9ncyhsb2dzOiBFeGVyY2lzZUxvZ1tdKSB7XG4gICAgc3RvcmUuZGlzcGF0Y2goc2V0Q3VycmVudEV4ZXJjaXNlTG9ncyhsb2dzKSk7XG4gIH1cblxuICBnZXQgY3VycmVudFdvcmtvdXRTdW1tYXJ5KCk6IFdvcmtvdXRTdW1tYXJ5IHwgbnVsbCB7XG4gICAgcmV0dXJuIHN0b3JlLmdldFN0YXRlKCkud29ya291dC53b3Jrb3V0U3VtbWFyeTtcbiAgfVxuXG4gIHNldCBjdXJyZW50V29ya291dFN1bW1hcnkod29ya291dFN1bW1hcnk6IFdvcmtvdXRTdW1tYXJ5KSB7XG4gICAgc3RvcmUuZGlzcGF0Y2goc2V0V29ya291dFN1bW1hcnkod29ya291dFN1bW1hcnkpKTtcbiAgfVxuXG4gICBnZW5lcmF0ZUlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGRvYyhjb2xsZWN0aW9uKGRiLCAnd29ya291dHMnKSkuaWQ7XG4gIH1cblxuICAgIC8vIFVwZGF0ZSB0aGUgZm9ybWF0V29ya291dEFuZEluaXRpYWxpemVMb2dzIGZ1bmN0aW9uXG4gIGFzeW5jIGZvcm1hdFdvcmtvdXRBbmRJbml0aWFsaXplTG9ncyhcbiAgICAgIGV4ZXJjaXNlRGV0YWlsczogRXhlcmNpc2VEZXRhaWxbXSxcbiAgICAgIHdvcmtvdXRBdXRob3I/OiBzdHJpbmdcbiAgICApOiBQcm9taXNlPHsgd29ya291dDogV29ya291dDsgZXhlcmNpc2VMb2dzOiBFeGVyY2lzZUxvZ1tdIH0+IHtcbiAgICAgIGNvbnN0IHdvcmtJZCA9IHRoaXMuZ2VuZXJhdGVJZCgpOyAvLyBVc2UgdGhpcy5nZW5lcmF0ZUlkKCkgc2luY2UgaXQncyBhIGNsYXNzIG1ldGhvZFxuICAgICAgY29uc3QgZXhlcmNpc2VSZWZlcmVuY2VzOiBFeGVyY2lzZVJlZmVyZW5jZVtdID0gW107XG4gICAgICBjb25zdCBleGVyY2lzZUxvZ3M6IEV4ZXJjaXNlTG9nW10gPSBbXTtcblxuICAvLyBFbnN1cmUgZXhlcmNpc2UgZGV0YWlscyBhcmUgdmFsaWQgYmVmb3JlIHByb2Nlc3NpbmdcbiAgY29uc3QgdmFsaWRFeGVyY2lzZURldGFpbHMgPSBleGVyY2lzZURldGFpbHMuZmlsdGVyKGRldGFpbCA9PiBkZXRhaWw/LmV4ZXJjaXNlICYmIGRldGFpbC5leGVyY2lzZS5pZCk7XG5cbiAgdmFsaWRFeGVyY2lzZURldGFpbHMuZm9yRWFjaCgoZGV0YWlsLCBpbmRleCkgPT4ge1xuICAgIC8vIEVuc3VyZSBleGVyY2lzZSBpbnN0YW5jZSBoYXMgYWxsIHJlcXVpcmVkIGZpZWxkc1xuICAgIGNvbnN0IGV4ZXJjaXNlSW5zdGFuY2UgPSBuZXcgRXhlcmNpc2Uoe1xuICAgICAgLi4uZGV0YWlsLmV4ZXJjaXNlLFxuICAgICAgaWQ6IGRldGFpbC5leGVyY2lzZS5pZCB8fCB3b3Jrb3V0U2VydmljZS5nZW5lcmF0ZUlkKCksXG4gICAgICBuYW1lOiBkZXRhaWwuZXhlcmNpc2UubmFtZSB8fCAnJyxcbiAgICAgIGF1dGhvcjogZGV0YWlsLmV4ZXJjaXNlLmF1dGhvciB8fCB7XG4gICAgICAgIHVzZXJJZDogd29ya291dEF1dGhvciB8fCAnUHVsc2VBSScsXG4gICAgICAgIHVzZXJuYW1lOiB3b3Jrb3V0QXV0aG9yIHx8ICdQdWxzZUFJJ1xuICAgICAgfSxcbiAgICAgIGRlc2NyaXB0aW9uOiBkZXRhaWwuZXhlcmNpc2UuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICBjYXRlZ29yeTogZGV0YWlsLmV4ZXJjaXNlLmNhdGVnb3J5IHx8IHsgdHlwZTogJ3dlaWdodFRyYWluaW5nJywgZGV0YWlsczogbnVsbCB9LFxuICAgICAgcHJpbWFyeUJvZHlQYXJ0czogZGV0YWlsLmV4ZXJjaXNlLnByaW1hcnlCb2R5UGFydHMgfHwgW10sXG4gICAgICBzZWNvbmRhcnlCb2R5UGFydHM6IGRldGFpbC5leGVyY2lzZS5zZWNvbmRhcnlCb2R5UGFydHMgfHwgW10sXG4gICAgICB0YWdzOiBkZXRhaWwuZXhlcmNpc2UudGFncyB8fCBbXSxcbiAgICAgIHZpZGVvczogZGV0YWlsLmV4ZXJjaXNlLnZpZGVvcyB8fCBbXSxcbiAgICAgIGNyZWF0ZWRBdDogZGV0YWlsLmV4ZXJjaXNlLmNyZWF0ZWRBdCB8fCBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBkZXRhaWwuZXhlcmNpc2UudXBkYXRlZEF0IHx8IG5ldyBEYXRlKClcbiAgICB9KTtcblxuICAgIC8vIENyZWF0ZSBleGVyY2lzZSByZWZlcmVuY2Ugd2l0aCByZXF1aXJlZCBmaWVsZHNcbiAgICBjb25zdCBleGVyY2lzZVJlZjogRXhlcmNpc2VSZWZlcmVuY2UgPSB7XG4gICAgICBleGVyY2lzZTogZXhlcmNpc2VJbnN0YW5jZSxcbiAgICAgIGdyb3VwSWQ6IGRldGFpbC5ncm91cElkIHx8IDBcbiAgICB9O1xuICAgIGV4ZXJjaXNlUmVmZXJlbmNlcy5wdXNoKGV4ZXJjaXNlUmVmKTtcblxuICAgIC8vIFNldCBkZWZhdWx0IHZhbHVlcyBmb3IgZXhlcmNpc2UgcGFyYW1ldGVyc1xuICAgIGNvbnN0IGNhdGVnb3J5ID0gZGV0YWlsLmNhdGVnb3J5Py50eXBlID09PSAnd2VpZ2h0VHJhaW5pbmcnID8gZGV0YWlsLmNhdGVnb3J5IDoge1xuICAgICAgdHlwZTogJ3dlaWdodFRyYWluaW5nJyxcbiAgICAgIGRldGFpbHM6IHsgc2V0czogMywgcmVwczogWycxMiddLCB3ZWlnaHQ6IDAsIHNjcmVlblRpbWU6IDAgfVxuICAgIH07XG5cbiAgICBjb25zdCBzZXRzID0gY2F0ZWdvcnkuZGV0YWlscz8uc2V0cyA/PyAzO1xuICAgIGNvbnN0IHJlcHMgPSBjYXRlZ29yeS5kZXRhaWxzPy5yZXBzID8/IFsnMTInXTtcbiAgICBjb25zdCB3ZWlnaHQgPSBjYXRlZ29yeS5kZXRhaWxzPy53ZWlnaHQgPz8gMDtcblxuICAgIC8vIENyZWF0ZSBsb2dzIGZvciBlYWNoIHNldCB3aXRoIHZhbGlkYXRlZCBkYXRhXG4gICAgY29uc3Qgc2V0c0xvZ3MgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBzZXRzIH0sICgpID0+IFxuICAgICAgbmV3IFJlcHNBbmRXZWlnaHRMb2coe1xuICAgICAgICByZXBzOiBwYXJzZUludChyZXBzWzBdIHx8ICcxMicsIDEwKSxcbiAgICAgICAgd2VpZ2h0OiB3ZWlnaHQgfHwgMFxuICAgICAgfSlcbiAgICApO1xuXG4gICAgLy8gQ3JlYXRlIGV4ZXJjaXNlIGxvZyB3aXRoIHZhbGlkYXRlZCBkYXRhXG4gICAgY29uc3QgZXhlcmNpc2VMb2dJZCA9IGV4ZXJjaXNlU2VydmljZS5nZW5lcmF0ZUV4ZXJjaXNlTG9nSUQoXG4gICAgICB3b3JrSWQsXG4gICAgICB1c2VyU2VydmljZS5jdXJyZW50VXNlcj8uaWQgfHwgJ2Fub255bW91cydcbiAgICApO1xuXG4gICAgY29uc3QgbG9nID0gbmV3IEV4ZXJjaXNlTG9nKHtcbiAgICAgIGlkOiBleGVyY2lzZUxvZ0lkLFxuICAgICAgd29ya291dElkOiB3b3JrSWQsXG4gICAgICB1c2VySWQ6IHVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyPy5pZCB8fCAnYW5vbnltb3VzJyxcbiAgICAgIGV4ZXJjaXNlOiBleGVyY2lzZUluc3RhbmNlLFxuICAgICAgbG9nczogc2V0c0xvZ3MsXG4gICAgICBmZWVkYmFjazogJycsXG4gICAgICBub3RlOiBkZXRhaWwubm90ZXMgfHwgJycsXG4gICAgICBpc1NwbGl0OiBkZXRhaWwuaXNTcGxpdCB8fCBmYWxzZSxcbiAgICAgIGxvZ1N1Ym1pdHRlZDogZmFsc2UsXG4gICAgICBsb2dJc0VkaXRpbmc6IGZhbHNlLFxuICAgICAgaXNDb21wbGV0ZWQ6IGZhbHNlLFxuICAgICAgb3JkZXI6IGluZGV4ICsgMSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIGNvbXBsZXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgfSk7XG4gICAgXG4gICAgZXhlcmNpc2VMb2dzLnB1c2gobG9nKTtcbiAgfSk7XG5cbiAgLy8gQ3JlYXRlIHdvcmtvdXQgd2l0aCB2YWxpZGF0ZWQgZGF0YVxuICBjb25zdCBuZXdXb3Jrb3V0ID0gbmV3IFdvcmtvdXQoe1xuICAgIGlkOiB3b3JrSWQsXG4gICAgcm91bmRXb3Jrb3V0SWQ6ICcnLFxuICAgIGV4ZXJjaXNlczogZXhlcmNpc2VSZWZlcmVuY2VzLFxuICAgIGxvZ3M6IGV4ZXJjaXNlTG9ncyxcbiAgICB0aXRsZTogJycsXG4gICAgZGVzY3JpcHRpb246ICcnLFxuICAgIGR1cmF0aW9uOiBXb3Jrb3V0LmVzdGltYXRlZER1cmF0aW9uKGV4ZXJjaXNlUmVmZXJlbmNlcykgfHwgMCxcbiAgICB3b3Jrb3V0UmF0aW5nOiAnbm9uZScgYXMgV29ya291dFJhdGluZyxcbiAgICB1c2VBdXRob3JDb250ZW50OiBmYWxzZSxcbiAgICBpc0NvbXBsZXRlZDogZmFsc2UsXG4gICAgd29ya291dFN0YXR1czogJ2FyY2hpdmVkJyBhcyBXb3Jrb3V0U3RhdHVzLFxuICAgIGF1dGhvcjogdXNlclNlcnZpY2UuY3VycmVudFVzZXI/LmlkIHx8ICdQdWxzZUFJJyxcbiAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIHpvbmU6IFdvcmtvdXQuZGV0ZXJtaW5lV29ya291dFpvbmUoZXhlcmNpc2VSZWZlcmVuY2VzKSB8fCAnZnVsbCcgYXMgQm9keVpvbmVcbiAgfSk7XG5cbiAgcmV0dXJuIHsgd29ya291dDogbmV3V29ya291dCwgZXhlcmNpc2VMb2dzIH07XG4gIFxufVxuXG4gIC8qKlxuICAgKiBGZXRjaCB0aGUgdXNlcidzIGN1cnJlbnQgd29ya291dCAoZWl0aGVyIFF1ZXVlZFVwIG9yIEluUHJvZ3Jlc3MpLlxuICAgKi9cbiAgYXN5bmMgZmV0Y2hDdXJyZW50V29ya291dCh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8V29ya291dCB8IG51bGw+IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgdGhpcy5mZXRjaEN1cnJlbnRXb3Jrb3V0U2Vzc2lvbih1c2VySWQpO1xuICAgIHJldHVybiBzZXNzaW9uLndvcmtvdXQ7XG4gIH1cblxuICBhc3luYyBnZXRBbGxTd2VhdGxpc3RzKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxXb3Jrb3V0W10+IHtcbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIElEIGlzIHJlcXVpcmVkJyk7XG4gICAgfVxuICBcbiAgICAvLyBSZWZlcmVuY2UgdG8gdGhlIHVzZXIncyB3b3Jrb3V0IGNvbGxlY3Rpb25cbiAgICBjb25zdCB3b3Jrb3V0c1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycsIHVzZXJJZCwgJ015Q3JlYXRlZFdvcmtvdXRzJyk7XG4gIFxuICAgIHRyeSB7XG4gICAgICAvLyBGZXRjaCBleGVyY2lzZXMgd2l0aCB2aWRlb3NcbiAgICAgIGNvbnN0IGV4ZXJjaXNlc1dpdGhWaWRlb3MgPSBhd2FpdCB0aGlzLmZldGNoQW5kTWFwRXhlcmNpc2VzV2l0aFZpZGVvcygpO1xuICBcbiAgICAgIC8vIFF1ZXJ5IHRvIGZldGNoIGFsbCB3b3Jrb3V0c1xuICAgICAgY29uc3Qgd29ya291dHNTbmFwc2hvdCA9IGF3YWl0IGdldERvY3Mod29ya291dHNSZWYpO1xuICAgICAgY29uc3Qgd29ya291dHM6IFdvcmtvdXRbXSA9IFtdO1xuICBcbiAgICAgIC8vIFByb2Nlc3MgZWFjaCB3b3Jrb3V0IGRvY3VtZW50XG4gICAgICBmb3IgKGNvbnN0IHdvcmtvdXREb2Mgb2Ygd29ya291dHNTbmFwc2hvdC5kb2NzKSB7XG4gICAgICAgIGNvbnN0IHdvcmtvdXREYXRhID0gd29ya291dERvYy5kYXRhKCk7XG4gICAgICAgIGNvbnN0IHdvcmtvdXRJZCA9IHdvcmtvdXREb2MuaWQ7XG4gIFxuICAgICAgICAvLyBNYXAgdGhlIGV4ZXJjaXNlcyBpbiB0aGUgd29ya291dCB0byB0aGUgZnVsbCBleGVyY2lzZSBvYmplY3RzIHdpdGggdmlkZW9zXG4gICAgICAgIGNvbnN0IG1hcHBlZEV4ZXJjaXNlcyA9ICh3b3Jrb3V0RGF0YS5leGVyY2lzZXMgfHwgW10pLm1hcCgoZXhlcmNpc2VSZWY6IGFueSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGZ1bGxFeGVyY2lzZSA9IGV4ZXJjaXNlc1dpdGhWaWRlb3MuZmluZChleCA9PiBleC5uYW1lID09PSBleGVyY2lzZVJlZi5leGVyY2lzZS5uYW1lKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlRoaXMgaXMgdGhlIG1hcHBlZCBleGVyY2lzZTogXCIgKyBmdWxsRXhlcmNpc2UpO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmV4ZXJjaXNlUmVmLFxuICAgICAgICAgICAgZXhlcmNpc2U6IGZ1bGxFeGVyY2lzZSB8fCBleGVyY2lzZVJlZlxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gIFxuICAgICAgICAvLyBQYXJzZSB3b3Jrb3V0IGRhdGEgaW50byB0aGUgZGVzaXJlZCBzdHJ1Y3R1cmVcbiAgICAgICAgY29uc3Qgd29ya291dCA9IG5ldyBXb3Jrb3V0KHtcbiAgICAgICAgICBpZDogd29ya291dERhdGEuaWQgfHwgJycsXG4gICAgICAgICAgcm91bmRXb3Jrb3V0SWQ6IHdvcmtvdXREYXRhLnJvdW5kV29ya291dElkIHx8ICcnLFxuICAgICAgICAgIGNvbGxlY3Rpb25JZDogd29ya291dERhdGEuY29sbGVjdGlvbklkLFxuICAgICAgICAgIGV4ZXJjaXNlczogbWFwcGVkRXhlcmNpc2VzLFxuICAgICAgICAgIGNoYWxsZW5nZTogd29ya291dERhdGEuY2hhbGxlbmdlLFxuICAgICAgICAgIGxvZ3M6IFtdLFxuICAgICAgICAgIHRpdGxlOiB3b3Jrb3V0RGF0YS50aXRsZSB8fCAnJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogd29ya291dERhdGEuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgICAgZHVyYXRpb246IHdvcmtvdXREYXRhLmR1cmF0aW9uIHx8IDAsXG4gICAgICAgICAgd29ya291dFJhdGluZzogd29ya291dERhdGEud29ya291dFJhdGluZyxcbiAgICAgICAgICB1c2VBdXRob3JDb250ZW50OiB3b3Jrb3V0RGF0YS51c2VBdXRob3JDb250ZW50IHx8IGZhbHNlLFxuICAgICAgICAgIGlzQ29tcGxldGVkOiB3b3Jrb3V0RGF0YS5pc0NvbXBsZXRlZCB8fCBmYWxzZSxcbiAgICAgICAgICB3b3Jrb3V0U3RhdHVzOiB3b3Jrb3V0RGF0YS53b3Jrb3V0U3RhdHVzIHx8ICdub3RTdGFydGVkJyxcbiAgICAgICAgICBzdGFydFRpbWU6IHdvcmtvdXREYXRhLnN0YXJ0VGltZSA/IG5ldyBEYXRlKHdvcmtvdXREYXRhLnN0YXJ0VGltZSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgb3JkZXI6IHdvcmtvdXREYXRhLm9yZGVyLFxuICAgICAgICAgIGF1dGhvcjogd29ya291dERhdGEuYXV0aG9yIHx8IHVzZXJJZCxcbiAgICAgICAgICBjcmVhdGVkQXQ6IHdvcmtvdXREYXRhLmNyZWF0ZWRBdCA/IG5ldyBEYXRlKHdvcmtvdXREYXRhLmNyZWF0ZWRBdCkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogd29ya291dERhdGEudXBkYXRlZEF0ID8gbmV3IERhdGUod29ya291dERhdGEudXBkYXRlZEF0KSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgem9uZTogd29ya291dERhdGEuem9uZSB8fCAnRlVMTF9CT0RZJyxcbiAgICAgICAgfSk7ICAgICAgICBcbiAgXG4gICAgICAgIC8vIEZldGNoIGFuZCBwcm9jZXNzIGxvZ3NcbiAgICAgICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycsIHVzZXJJZCwgJ015Q3JlYXRlZFdvcmtvdXRzJywgd29ya291dElkLCAnbG9ncycpO1xuICAgICAgICBjb25zdCBsb2dzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGxvZ3NSZWYpO1xuICAgICAgICB3b3Jrb3V0LmxvZ3MgPSBsb2dzU25hcHNob3QuZG9jcy5tYXAoKGxvZ0RvYykgPT4gKHtcbiAgICAgICAgICAuLi5sb2dEb2MuZGF0YSgpLFxuICAgICAgICAgIGlkOiBsb2dEb2MuaWQsXG4gICAgICAgIH0pKSBhcyBFeGVyY2lzZUxvZ1tdO1xuICBcbiAgICAgICAgd29ya291dHMucHVzaCh3b3Jrb3V0KTtcbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gd29ya291dHM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGZpcmVzdG9yZUVycm9yID0gZXJyb3IgYXMgRmlyZXN0b3JlRXJyb3I7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzd2VhdGxpc3RzOicsIGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggc3dlYXRsaXN0cycpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJDaGFsbGVuZ2VzQnlDaGFsbGVuZ2VJZChjaGFsbGVuZ2VJZDogc3RyaW5nKTogUHJvbWlzZTx7IHVzZXJDaGFsbGVuZ2VzOiBVc2VyQ2hhbGxlbmdlW107IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgICBjb25zdCB1c2VyQ2hhbGxlbmdlc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VyLWNoYWxsZW5nZScpO1xuICAgIGNvbnN0IHEgPSBxdWVyeSh1c2VyQ2hhbGxlbmdlc1JlZiwgd2hlcmUoJ2NoYWxsZW5nZUlkJywgJz09JywgY2hhbGxlbmdlSWQpKTtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgICAgY29uc3QgdXNlckNoYWxsZW5nZXM6IFVzZXJDaGFsbGVuZ2VbXSA9IHNuYXBzaG90LmRvY3MubWFwKChkb2M6IERvY3VtZW50RGF0YSkgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyQ2hhbGxlbmdlKGRvYy5pZCwgZGF0YSk7XG4gICAgICB9KTtcbiAgICAgIGlmICh1c2VyQ2hhbGxlbmdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiB7IHVzZXJDaGFsbGVuZ2VzIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4geyB1c2VyQ2hhbGxlbmdlczogW10sIGVycm9yOiAnTm8gdXNlciBjaGFsbGVuZ2VzIGZvdW5kIGZvciB0aGlzIGNoYWxsZW5nZS4nIH07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgY2hhbGxlbmdlcyBieSBjaGFsbGVuZ2VJZDonLCBlcnJvcik7XG4gICAgICByZXR1cm4geyB1c2VyQ2hhbGxlbmdlczogW10sIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyB9O1xuICAgIH1cbiAgfVxuICBcbiAgLyoqXG4gICAqIEZldGNoZXMgd29ya291dCBzdW1tYXJpZXMgZm9yIGEgc3BlY2lmaWMgZGF0ZS5cbiAgICogQHBhcmFtIGRhdGUgLSBUaGUgZGF0ZSBmb3Igd2hpY2ggd29ya291dCBzdW1tYXJpZXMgYXJlIGJlaW5nIGZldGNoZWQuXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSByZXNvbHZpbmcgdG8gYW4gYXJyYXkgb2Ygd29ya291dCBzdW1tYXJpZXMuXG4gICAqIEB0aHJvd3MgSWYgbm8gdXNlciBpcyBzaWduZWQgaW4gb3IgaWYgdGhlIEZpcmVzdG9yZSBxdWVyeSBmYWlscy5cbiAgICovXG4gIGFzeW5jIGZldGNoV29ya291dFN1bW1hcmllcyhkYXRlOiBEYXRlKTogUHJvbWlzZTxXb3Jrb3V0U3VtbWFyeVtdPiB7XG4gICAgY29uc3QgY3VycmVudFVzZXIgPSB1c2VyU2VydmljZS5jdXJyZW50VXNlcjtcbiAgICBpZiAoIWN1cnJlbnRVc2VyPy5pZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGlzIHNpZ25lZCBpbicpO1xuICAgIH1cblxuICAgIC8vIEZvcm1hdCB0aGUgZGF0ZSB0byBtYXRjaCB0aGUgZm9ybWF0IGluIEZpcmVzdG9yZSAoJ01NLWRkLXl5eXknKVxuICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSBmb3JtYXQoZGF0ZSwgJ01NLWRkLXl5eXknKTtcblxuICAgIC8vIFJlZmVyZW5jZSB0byB0aGUgdXNlcidzIHdvcmtvdXRTdW1tYXJpZXMgc3ViY29sbGVjdGlvblxuICAgIGNvbnN0IHN1bW1hcmllc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycsIGN1cnJlbnRVc2VyLmlkLCAnd29ya291dFN1bW1hcmllcycpO1xuXG4gICAgLy8gQ3JlYXRlIGEgcXVlcnkgdG8gZmlsdGVyIGRvY3VtZW50cyBieSB0aGUgc3BlY2lmaWVkIGRhdGVcbiAgICBjb25zdCBxID0gcXVlcnkoc3VtbWFyaWVzUmVmLCB3aGVyZSgnZGF0ZScsICc9PScsIGZvcm1hdHRlZERhdGUpKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG5cbiAgICAgIC8vIE1hcCB0aGUgZG9jdW1lbnRzIHRvIGFuIGFycmF5IG9mIFdvcmtvdXRTdW1tYXJ5IG9iamVjdHNcbiAgICAgIHJldHVybiBzbmFwc2hvdC5kb2NzLm1hcCgoZG9jOiBEb2N1bWVudERhdGEpID0+ICh7XG4gICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgIC4uLmRvYy5kYXRhKCksXG4gICAgICB9KSkgYXMgV29ya291dFN1bW1hcnlbXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZmlyZXN0b3JlRXJyb3IgPSBlcnJvciBhcyBGaXJlc3RvcmVFcnJvcjtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHdvcmtvdXQgc3VtbWFyaWVzOicsIGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZldGNoQWxsV29ya291dFN1bW1hcmllcygpOiBQcm9taXNlPFdvcmtvdXRTdW1tYXJ5W10+IHtcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IHVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyO1xuICAgIGlmICghY3VycmVudFVzZXI/LmlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgfVxuICBcbiAgICAvLyBSZWZlcmVuY2UgdG8gdGhlIHVzZXIncyB3b3Jrb3V0U3VtbWFyaWVzIHN1YmNvbGxlY3Rpb25cbiAgICBjb25zdCBzdW1tYXJpZXNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCBjdXJyZW50VXNlci5pZCwgJ3dvcmtvdXRTdW1tYXJ5Jyk7XG4gIFxuICAgIC8vIFF1ZXJ5IHRvIHJldHJpZXZlIGFsbCB3b3Jrb3V0IHN1bW1hcmllcywgc29ydGVkIGJ5IGBjcmVhdGVkQXRgIGluIGFzY2VuZGluZyBvcmRlclxuICAgIGNvbnN0IHEgPSBxdWVyeShzdW1tYXJpZXNSZWYsIG9yZGVyQnkoJ2NyZWF0ZWRBdCcsICdhc2MnKSk7IC8vIEFkanVzdCBmaWVsZCBuYW1lIGJhc2VkIG9uIHlvdXIgc2NoZW1hXG4gIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gIFxuICAgICAgLy8gTWFwIHRoZSBkb2N1bWVudHMgdG8gYW4gYXJyYXkgb2YgV29ya291dFN1bW1hcnkgb2JqZWN0c1xuICAgICAgcmV0dXJuIHNuYXBzaG90LmRvY3MubWFwKChkb2M6IERvY3VtZW50RGF0YSkgPT4gKHtcbiAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgLi4uZG9jLmRhdGEoKSxcbiAgICAgIH0pKSBhcyBXb3Jrb3V0U3VtbWFyeVtdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBmaXJlc3RvcmVFcnJvciA9IGVycm9yIGFzIEZpcmVzdG9yZUVycm9yO1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYWxsIHdvcmtvdXQgc3VtbWFyaWVzOicsIGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gKiBGZXRjaCB1c2VyIGNoYWxsZW5nZXMgYnkgdXNlcklkLlxuICogQHBhcmFtIHVzZXJJZCBUaGUgSUQgb2YgdGhlIHVzZXIgdG8gZmV0Y2ggY2hhbGxlbmdlcyBmb3IuXG4gKiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIHRvIGFuIGFycmF5IG9mIHVzZXIgY2hhbGxlbmdlcy5cbiAqIEB0aHJvd3MgSWYgdGhlIEZpcmVzdG9yZSBxdWVyeSBmYWlscy5cbiAqL1xuYXN5bmMgZmV0Y2hVc2VyQ2hhbGxlbmdlc0J5VXNlcklkKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyQ2hhbGxlbmdlW10+IHtcbiAgY29uc3QgdXNlckNoYWxsZW5nZXNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlci1jaGFsbGVuZ2UnKTtcbiAgY29uc3QgcSA9IHF1ZXJ5KHVzZXJDaGFsbGVuZ2VzUmVmLCB3aGVyZSgndXNlcklkJywgJz09JywgdXNlcklkKSk7XG5cbiAgdHJ5IHtcbiAgICAvLyBjb25zb2xlLmxvZyhgRmV0Y2hpbmcgY2hhbGxlbmdlcyBmb3IgdXNlciBJRDogJHt1c2VySWR9YCk7XG5cbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG5cbiAgICAvLyBjb25zb2xlLmxvZyhgVG90YWwgY2hhbGxlbmdlcyBmZXRjaGVkOiAke3NuYXBzaG90LmRvY3MubGVuZ3RofWApO1xuXG4gICAgY29uc3QgdXNlckNoYWxsZW5nZXMgPSBzbmFwc2hvdC5kb2NzLm1hcCgoZG9jOiBEb2N1bWVudERhdGEpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgLy8gY29uc29sZS5sb2coYFByb2Nlc3NpbmcgY2hhbGxlbmdlIHdpdGggSUQ6ICR7ZG9jLmlkfWAsIGRhdGEpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kYXRhLFxuICAgICAgICBjaGFsbGVuZ2U6IGRhdGEuY2hhbGxlbmdlXG4gICAgICAgICAgPyBuZXcgQ2hhbGxlbmdlKHtcbiAgICAgICAgICAgICAgaWQ6IGRhdGEuY2hhbGxlbmdlLmlkLFxuICAgICAgICAgICAgICB0aXRsZTogZGF0YS5jaGFsbGVuZ2UudGl0bGUsXG4gICAgICAgICAgICAgIHN1YnRpdGxlOiBkYXRhLmNoYWxsZW5nZS5zdWJ0aXRsZSxcbiAgICAgICAgICAgICAgcGFydGljaXBhbnRzOiBkYXRhLmNoYWxsZW5nZS5wYXJ0aWNpcGFudHMgfHwgW10sXG4gICAgICAgICAgICAgIHN0YXR1czogZGF0YS5jaGFsbGVuZ2Uuc3RhdHVzIGFzIENoYWxsZW5nZVN0YXR1cyxcbiAgICAgICAgICAgICAgc3RhcnREYXRlOiBkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgZW5kRGF0ZTogZGF0YS5jaGFsbGVuZ2UuZW5kRGF0ZSA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLmVuZERhdGUpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgY3JlYXRlZEF0OiBkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgdXBkYXRlZEF0OiBkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgaW50cm9WaWRlb3M6IChkYXRhLmNoYWxsZW5nZS5pbnRyb1ZpZGVvcyB8fCBbXSkubWFwKCh2OiBhbnkpID0+IFxuICAgICAgICAgICAgICAgIG5ldyBJbnRyb1ZpZGVvKHtcbiAgICAgICAgICAgICAgICAgIGlkOiB2LmlkLFxuICAgICAgICAgICAgICAgICAgdXNlcklkOiB2LnVzZXJJZCxcbiAgICAgICAgICAgICAgICAgIHZpZGVvVXJsOiB2LnZpZGVvVXJsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0VGltZXN0YW1wKGRhdGEuY3JlYXRlZEF0KSxcbiAgICAgICAgdXBkYXRlZEF0OiBjb252ZXJ0VGltZXN0YW1wKGRhdGEudXBkYXRlZEF0KSxcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvLyBjb25zb2xlLmxvZygnQWxsIGNoYWxsZW5nZXMgYWZ0ZXIgcHJvY2Vzc2luZzonLCBKU09OLnN0cmluZ2lmeSh1c2VyQ2hhbGxlbmdlcywgbnVsbCwgMikpO1xuXG4gICAgcmV0dXJuIHVzZXJDaGFsbGVuZ2VzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgY2hhbGxlbmdlcyBieSB1c2VySWQ6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmFzeW5jIGZldGNoQ29sbGVjdGlvbldpdGhTd2VhdExpc3RzKGNvbGxlY3Rpb25JZDogc3RyaW5nKTogUHJvbWlzZTx7IGNvbGxlY3Rpb246IGFueSwgc3dlYXRMaXN0czogV29ya291dFtdIH0+IHtcbiAgdHJ5IHtcbiAgICAvLyBGZXRjaCB0aGUgY29sbGVjdGlvblxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBhd2FpdCB0aGlzLmdldENvbGxlY3Rpb25CeUlkKGNvbGxlY3Rpb25JZCk7XG5cbiAgICAvLyBGZXRjaCBzd2VhdCBsaXN0cyAod29ya291dHMpXG4gICAgY29uc3Qgc3dlYXRMaXN0czogV29ya291dFtdID0gW107XG4gICAgXG4gICAgLy8gQXNzdW1pbmcgY29sbGVjdGlvbiBoYXMgc3dlYXRsaXN0SWRzIHdpdGggYXV0aG9yIGFuZCB3b3Jrb3V0IElEc1xuICAgIGZvciAoY29uc3Qgc3dlYXRsaXN0SWRlbnRpZmllciBvZiBjb2xsZWN0aW9uLnN3ZWF0bGlzdElkcyB8fCBbXSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgW3dvcmtvdXRdID0gYXdhaXQgdGhpcy5mZXRjaFNhdmVkV29ya291dChcbiAgICAgICAgICBzd2VhdGxpc3RJZGVudGlmaWVyLnN3ZWF0bGlzdEF1dGhvcklkLCBcbiAgICAgICAgICBzd2VhdGxpc3RJZGVudGlmaWVyLmlkXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAod29ya291dCkge1xuICAgICAgICAgIHN3ZWF0TGlzdHMucHVzaCh3b3Jrb3V0KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmV0Y2hpbmcgd29ya291dCAke3N3ZWF0bGlzdElkZW50aWZpZXIuaWR9OmAsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBjb2xsZWN0aW9uLCBzd2VhdExpc3RzIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY29sbGVjdGlvbiB3aXRoIHN3ZWF0IGxpc3RzOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5cblxuYXN5bmMgZmV0Y2hTYXZlZFdvcmtvdXQodXNlcklkOiBzdHJpbmcsIHdvcmtvdXRJZDogc3RyaW5nKTogUHJvbWlzZTxbV29ya291dCB8IG51bGwsIEV4ZXJjaXNlTG9nW10gfCBudWxsXT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBmZXRjaFNhdmVkV29ya291dCB3aXRoOicsIHsgdXNlcklkLCB3b3Jrb3V0SWQgfSk7XG5cbiAgICAvLyBGZXRjaCB0aGUgd29ya291dCBkb2N1bWVudFxuICAgIGNvbnN0IHdvcmtvdXRSZWYgPSBkb2MoZGIsICd1c2VycycsIHVzZXJJZCwgJ015Q3JlYXRlZFdvcmtvdXRzJywgd29ya291dElkKTtcbiAgICBjb25zb2xlLmxvZygnRmV0Y2hpbmcgd29ya291dCBkb2N1bWVudCBmcm9tOicsIHdvcmtvdXRSZWYucGF0aCk7XG4gICAgXG4gICAgY29uc3Qgd29ya291dFNuYXAgPSBhd2FpdCBnZXREb2Mod29ya291dFJlZik7XG4gICAgY29uc29sZS5sb2coJ1dvcmtvdXQgZG9jdW1lbnQgZXhpc3RzOicsIHdvcmtvdXRTbmFwLmV4aXN0cygpKTtcblxuICAgIGlmICghd29ya291dFNuYXAuZXhpc3RzKCkpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdObyB3b3Jrb3V0IGRvY3VtZW50IGZvdW5kJyk7XG4gICAgICByZXR1cm4gW251bGwsIG51bGxdO1xuICAgIH1cblxuICAgIGNvbnN0IHdvcmtvdXREYXRhID0gd29ya291dFNuYXAuZGF0YSgpO1xuICAgIGNvbnNvbGUubG9nKCdSYXcgd29ya291dCBkYXRhOicsIHdvcmtvdXREYXRhKTtcblxuICAgIC8vIEdldCBleGVyY2lzZXMgd2l0aCB2aWRlb3MgbWFwcGVkXG4gICAgY29uc29sZS5sb2coJ0ZldGNoaW5nIGV4ZXJjaXNlcyB3aXRoIHZpZGVvcy4uLicpO1xuICAgIGNvbnN0IGV4ZXJjaXNlc1dpdGhWaWRlb3MgPSBhd2FpdCB0aGlzLmZldGNoQW5kTWFwRXhlcmNpc2VzV2l0aFZpZGVvcygpO1xuICAgIGNvbnNvbGUubG9nKCdGZXRjaGVkIGV4ZXJjaXNlcyB3aXRoIHZpZGVvczonLCBleGVyY2lzZXNXaXRoVmlkZW9zKTtcblxuICAgIC8vIE1hcCB0aGUgZXhlcmNpc2VzXG4gICAgY29uc29sZS5sb2coJ01hcHBpbmcgZXhlcmNpc2VzIGluIHdvcmtvdXQ6Jywgd29ya291dERhdGEuZXhlcmNpc2VzKTtcbiAgICBjb25zdCBtYXBwZWRFeGVyY2lzZXMgPSAod29ya291dERhdGEuZXhlcmNpc2VzIHx8IFtdKS5tYXAoKGV4ZXJjaXNlUmVmOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IGZ1bGxFeGVyY2lzZSA9IGV4ZXJjaXNlc1dpdGhWaWRlb3MuZmluZChleCA9PiBleC5uYW1lID09PSBleGVyY2lzZVJlZi5leGVyY2lzZS5uYW1lKTtcbiAgICAgIGNvbnNvbGUubG9nKCdNYXBwaW5nIGV4ZXJjaXNlOicsIHtcbiAgICAgICAgbmFtZTogZXhlcmNpc2VSZWYuZXhlcmNpc2UubmFtZSxcbiAgICAgICAgZm91bmRNYXRjaDogISFmdWxsRXhlcmNpc2VcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZXhlcmNpc2VSZWYsXG4gICAgICAgIGV4ZXJjaXNlOiBmdWxsRXhlcmNpc2UgfHwgZXhlcmNpc2VSZWYuZXhlcmNpc2VcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICB3b3Jrb3V0RGF0YS5leGVyY2lzZXMgPSBtYXBwZWRFeGVyY2lzZXM7XG5cbiAgICAvLyBDcmVhdGUgd29ya291dCBpbnN0YW5jZVxuICAgIGNvbnNvbGUubG9nKCdDcmVhdGluZyBXb3Jrb3V0IGluc3RhbmNlIHdpdGggZGF0YTonLCB7XG4gICAgICBpZDogd29ya291dERhdGEuaWQsXG4gICAgICB0aXRsZTogd29ya291dERhdGEudGl0bGUsXG4gICAgICBleGVyY2lzZUNvdW50OiBtYXBwZWRFeGVyY2lzZXMubGVuZ3RoXG4gICAgfSk7XG5cbiAgICBjb25zdCB3b3Jrb3V0ID0gbmV3IFdvcmtvdXQoe1xuICAgICAgaWQ6IHdvcmtvdXRJZCwgLy8gVXNlIHRoZSB3b3Jrb3V0SWQgcGFzc2VkIHRvIHRoZSBmdW5jdGlvbiBpbnN0ZWFkIG9mIGZyb20gZGF0YVxuICAgICAgLi4ud29ya291dERhdGFcbiAgICB9KTtcblxuICAgIC8vIEZldGNoIGxvZ3NcbiAgICBjb25zb2xlLmxvZygnRmV0Y2hpbmcgd29ya291dCBsb2dzLi4uJyk7XG4gICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24od29ya291dFJlZiwgJ2xvZ3MnKTtcbiAgICBjb25zdCBsb2dzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGxvZ3NSZWYpO1xuICAgIGNvbnNvbGUubG9nKCdGb3VuZCBsb2dzIGNvdW50OicsIGxvZ3NTbmFwc2hvdC5zaXplKTtcblxuICAgIGNvbnN0IGxvZ3M6IEV4ZXJjaXNlTG9nW10gPSBsb2dzU25hcHNob3QuZG9jcy5tYXAobG9nRG9jID0+IHtcbiAgICAgIGNvbnN0IGxvZ0RhdGEgPSBsb2dEb2MuZGF0YSgpO1xuICAgICAgY29uc3QgZnVsbEV4ZXJjaXNlID0gZXhlcmNpc2VzV2l0aFZpZGVvcy5maW5kKGV4ID0+IGV4Lm5hbWUgPT09IGxvZ0RhdGEuZXhlcmNpc2UubmFtZSk7XG4gICAgICBjb25zb2xlLmxvZygnUHJvY2Vzc2luZyBsb2c6Jywge1xuICAgICAgICBsb2dJZDogbG9nRG9jLmlkLFxuICAgICAgICBleGVyY2lzZU5hbWU6IGxvZ0RhdGEuZXhlcmNpc2UubmFtZSxcbiAgICAgICAgZm91bmRFeGVyY2lzZU1hdGNoOiAhIWZ1bGxFeGVyY2lzZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiBuZXcgRXhlcmNpc2VMb2coe1xuICAgICAgICBpZDogbG9nRG9jLmlkLFxuICAgICAgICB3b3Jrb3V0SWQ6IHdvcmtvdXRJZCxcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgIGV4ZXJjaXNlOiBmdWxsRXhlcmNpc2UgfHwgbG9nRGF0YS5leGVyY2lzZSxcbiAgICAgICAgbG9nczogbG9nRGF0YS5sb2cgfHwgW10sXG4gICAgICAgIGZlZWRiYWNrOiBsb2dEYXRhLmZlZWRiYWNrIHx8ICcnLFxuICAgICAgICBub3RlOiBsb2dEYXRhLm5vdGUgfHwgJycsXG4gICAgICAgIHJlY29tbWVuZGVkV2VpZ2h0OiBsb2dEYXRhLnJlY29tbWVuZGVkV2VpZ2h0IHx8ICdjYWxjdWxhdGluZy4uLicsXG4gICAgICAgIGlzU3BsaXQ6IGxvZ0RhdGEuaXNTcGxpdCB8fCBmYWxzZSxcbiAgICAgICAgaXNCb2R5V2VpZ2h0OiBsb2dEYXRhLmlzQm9keVdlaWdodCB8fCBmYWxzZSxcbiAgICAgICAgbG9nU3VibWl0dGVkOiBsb2dEYXRhLmxvZ1N1Ym1pdHRlZCB8fCBmYWxzZSxcbiAgICAgICAgbG9nSXNFZGl0aW5nOiBsb2dEYXRhLmxvZ0lzRWRpdGluZyB8fCBmYWxzZSxcbiAgICAgICAgaXNDb21wbGV0ZWQ6IGxvZ0RhdGEuaXNDb21wbGV0ZWQgfHwgZmFsc2UsXG4gICAgICAgIGNvbXBsZXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGxvZ0RhdGEuY29tcGxldGVkQXQpLFxuICAgICAgICBjcmVhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAobG9nRGF0YS5jcmVhdGVkQXQpLFxuICAgICAgICB1cGRhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAobG9nRGF0YS51cGRhdGVkQXQpXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHdvcmtvdXQubG9ncyA9IGxvZ3M7XG4gICAgY29uc29sZS5sb2coJ1JldHVybmluZyB3b3Jrb3V0IGFuZCBsb2dzOicsIHtcbiAgICAgIHdvcmtvdXRJZDogd29ya291dC5pZCxcbiAgICAgIGxvZ3NDb3VudDogbG9ncy5sZW5ndGhcbiAgICB9KTtcblxuICAgIHJldHVybiBbd29ya291dCwgbG9nc107XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgc2F2ZWQgd29ya291dDonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7IC8vIFRocm93IHRoZSBlcnJvciB0byBzZWUgdGhlIGZ1bGwgc3RhY2sgdHJhY2VcbiAgfVxufVxuXG4vKipcbiAqIEZldGNoIHVzZXIgY2hhbGxlbmdlcyBieSBjaGFsbGVuZ2VJZC5cbiAqIEBwYXJhbSBjaGFsbGVuZ2VJZCBUaGUgSUQgb2YgdGhlIGNoYWxsZW5nZSB0byBmZXRjaCBhc3NvY2lhdGVkIHVzZXIgY2hhbGxlbmdlcyBmb3IuXG4gKiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIHRvIGFuIGFycmF5IG9mIHVzZXIgY2hhbGxlbmdlcy5cbiAqIEB0aHJvd3MgSWYgdGhlIEZpcmVzdG9yZSBxdWVyeSBmYWlscy5cbiAqL1xuYXN5bmMgZmV0Y2hVc2VyQ2hhbGxlbmdlc0J5Q2hhbGxlbmdlSWQoY2hhbGxlbmdlSWQ6IHN0cmluZyk6IFByb21pc2U8VXNlckNoYWxsZW5nZVtdPiB7XG4gIGNvbnN0IHVzZXJDaGFsbGVuZ2VzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXItY2hhbGxlbmdlJyk7XG4gIGNvbnN0IHEgPSBxdWVyeSh1c2VyQ2hhbGxlbmdlc1JlZiwgd2hlcmUoJ2NoYWxsZW5nZUlkJywgJz09JywgY2hhbGxlbmdlSWQpKTtcblxuICB0cnkge1xuICAgIC8vIGNvbnNvbGUubG9nKGBGZXRjaGluZyB1c2VyIGNoYWxsZW5nZXMgZm9yIGNoYWxsZW5nZSBJRDogJHtjaGFsbGVuZ2VJZH1gKTtcblxuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcblxuICAgIC8vIGNvbnNvbGUubG9nKGBUb3RhbCB1c2VyIGNoYWxsZW5nZXMgZmV0Y2hlZDogJHtzbmFwc2hvdC5kb2NzLmxlbmd0aH1gKTtcblxuICAgIGNvbnN0IHVzZXJDaGFsbGVuZ2VzID0gc25hcHNob3QuZG9jcy5tYXAoKGRvYzogRG9jdW1lbnREYXRhKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGBQcm9jZXNzaW5nIHVzZXIgY2hhbGxlbmdlIHdpdGggSUQ6ICR7ZG9jLmlkfWAsIGRhdGEpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kYXRhLFxuICAgICAgICBjaGFsbGVuZ2U6IGRhdGEuY2hhbGxlbmdlXG4gICAgICAgICAgPyBuZXcgQ2hhbGxlbmdlKHtcbiAgICAgICAgICAgICAgaWQ6IGRhdGEuY2hhbGxlbmdlLmlkLFxuICAgICAgICAgICAgICB0aXRsZTogZGF0YS5jaGFsbGVuZ2UudGl0bGUsXG4gICAgICAgICAgICAgIHN1YnRpdGxlOiBkYXRhLmNoYWxsZW5nZS5zdWJ0aXRsZSxcbiAgICAgICAgICAgICAgcGFydGljaXBhbnRzOiBkYXRhLmNoYWxsZW5nZS5wYXJ0aWNpcGFudHMgfHwgW10sXG4gICAgICAgICAgICAgIHN0YXR1czogZGF0YS5jaGFsbGVuZ2Uuc3RhdHVzIGFzIENoYWxsZW5nZVN0YXR1cyxcbiAgICAgICAgICAgICAgc3RhcnREYXRlOiBkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgZW5kRGF0ZTogZGF0YS5jaGFsbGVuZ2UuZW5kRGF0ZSA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLmVuZERhdGUpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgY3JlYXRlZEF0OiBkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgdXBkYXRlZEF0OiBkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgaW50cm9WaWRlb3M6IChkYXRhLmNoYWxsZW5nZS5pbnRyb1ZpZGVvcyB8fCBbXSkubWFwKCh2OiBhbnkpID0+IFxuICAgICAgICAgICAgICAgIG5ldyBJbnRyb1ZpZGVvKHtcbiAgICAgICAgICAgICAgICAgIGlkOiB2LmlkLFxuICAgICAgICAgICAgICAgICAgdXNlcklkOiB2LnVzZXJJZCxcbiAgICAgICAgICAgICAgICAgIHZpZGVvVXJsOiB2LnZpZGVvVXJsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0VGltZXN0YW1wKGRhdGEuY3JlYXRlZEF0KSxcbiAgICAgICAgdXBkYXRlZEF0OiBjb252ZXJ0VGltZXN0YW1wKGRhdGEudXBkYXRlZEF0KSxcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvLyBjb25zb2xlLmxvZygnQWxsIHVzZXIgY2hhbGxlbmdlcyBhZnRlciBwcm9jZXNzaW5nOicsIEpTT04uc3RyaW5naWZ5KHVzZXJDaGFsbGVuZ2VzLCBudWxsLCAyKSk7XG5cbiAgICByZXR1cm4gdXNlckNoYWxsZW5nZXM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBjaGFsbGVuZ2VzIGJ5IGNoYWxsZW5nZUlkOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5hc3luYyBnZXRDb2xsZWN0aW9uQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxTd2VhdGxpc3RDb2xsZWN0aW9uPiB7XG4gIGNvbnNvbGUubG9nKFwiRmV0Y2hpbmcgY29sbGVjdGlvbiB3aXRoIGlkOlwiLCBpZCk7XG4gIHRyeSB7XG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGRiLCBcInN3ZWF0bGlzdC1jb2xsZWN0aW9uXCIsIGlkKTtcbiAgICBjb25zdCBkb2NTbmFwID0gYXdhaXQgZ2V0RG9jKGRvY1JlZik7XG4gICAgaWYgKGRvY1NuYXAuZXhpc3RzKCkpIHtcbiAgICAgIHJldHVybiBuZXcgU3dlYXRsaXN0Q29sbGVjdGlvbih7XG4gICAgICAgIGlkOiBkb2NTbmFwLmlkLFxuICAgICAgICAuLi5kb2NTbmFwLmRhdGEoKVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbGxlY3Rpb24gbm90IGZvdW5kXCIpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBjb2xsZWN0aW9uIGJ5IElEOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuICBcbiAgICAvKipcbiAgICogRmV0Y2ggdXNlciBjaGFsbGVuZ2VzIGJ5IHVzZXJJZCBhbmQgZmlsdGVyIGZvciBhY3RpdmUgY2hhbGxlbmdlcy5cbiAgICogQHJldHVybnMgQSBwcm9taXNlIHJlc29sdmluZyB0byBhbiBhcnJheSBvZiBhY3RpdmUgY2hhbGxlbmdlcy5cbiAgICogQHRocm93cyBJZiBubyB1c2VyIGlzIHNpZ25lZCBpbiBvciBpZiB0aGUgRmlyZXN0b3JlIHF1ZXJ5IGZhaWxzLlxuICAgKi9cbiAgICBhc3luYyBmZXRjaEFjdGl2ZUNoYWxsZW5nZXMoKTogUHJvbWlzZTxVc2VyQ2hhbGxlbmdlW10+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlclNlcnZpY2UuY3VycmVudFVzZXI7XG4gICAgICBpZiAoIWN1cnJlbnRVc2VyPy5pZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgICB9XG4gICAgXG4gICAgICBjb25zdCB1c2VyQ2hhbGxlbmdlc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VyLWNoYWxsZW5nZScpO1xuICAgICAgY29uc3QgcSA9IHF1ZXJ5KHVzZXJDaGFsbGVuZ2VzUmVmLCB3aGVyZSgndXNlcklkJywgJz09JywgY3VycmVudFVzZXIuaWQpKTtcbiAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBGZXRjaGluZyBjaGFsbGVuZ2VzIGZvciB1c2VyIElEOiAke2N1cnJlbnRVc2VyLmlkfWApO1xuICAgIFxuICAgICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBUb3RhbCBjaGFsbGVuZ2VzIGZldGNoZWQ6ICR7c25hcHNob3QuZG9jcy5sZW5ndGh9YCk7XG4gICAgXG4gICAgICAgIGNvbnN0IGFsbENoYWxsZW5nZXMgPSBzbmFwc2hvdC5kb2NzLm1hcCgoZG9jOiBEb2N1bWVudERhdGEpID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgUHJvY2Vzc2luZyBjaGFsbGVuZ2Ugd2l0aCBJRDogJHtkb2MuaWR9YCwgZGF0YSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVXNlIHRoZSBDaGFsbGVuZ2UgY29uc3RydWN0b3IgdG8gcGFyc2UgdGhlIGNoYWxsZW5nZSBkYXRhXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCJkYXRlIGJlZm9yZSBmb3JtYXQ6IFwiICsgY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUpKTtcblxuICAgICAgICAgIGNvbnN0IGNoYWxsZW5nZSA9IGRhdGEuY2hhbGxlbmdlXG4gICAgICAgICAgICA/IG5ldyBDaGFsbGVuZ2Uoe1xuICAgICAgICAgICAgICAgIGlkOiBkYXRhLmNoYWxsZW5nZS5pZCxcbiAgICAgICAgICAgICAgICB0aXRsZTogZGF0YS5jaGFsbGVuZ2UudGl0bGUsXG4gICAgICAgICAgICAgICAgc3VidGl0bGU6IGRhdGEuY2hhbGxlbmdlLnN1YnRpdGxlLFxuICAgICAgICAgICAgICAgIHBhcnRpY2lwYW50czogZGF0YS5jaGFsbGVuZ2UucGFydGljaXBhbnRzIHx8IFtdLFxuICAgICAgICAgICAgICAgIHN0YXR1czogZGF0YS5jaGFsbGVuZ2Uuc3RhdHVzIGFzIENoYWxsZW5nZVN0YXR1cyxcbiAgICAgICAgICAgICAgICBzdGFydERhdGU6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5jaGFsbGVuZ2Uuc3RhcnREYXRlKSxcbiAgICAgICAgICAgICAgICBlbmREYXRlOiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY2hhbGxlbmdlLmVuZERhdGUpLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQpLFxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQpLFxuICAgICAgICAgICAgICAgIGludHJvVmlkZW9zOiAoZGF0YS5jaGFsbGVuZ2UuaW50cm9WaWRlb3MgfHwgW10pLm1hcCgodjogYW55KSA9PiBcbiAgICAgICAgICAgICAgICAgIG5ldyBJbnRyb1ZpZGVvKHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHYuaWQsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogdi51c2VySWQsXG4gICAgICAgICAgICAgICAgICAgIHZpZGVvVXJsOiB2LnZpZGVvVXJsXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICAuLi5kYXRhLFxuICAgICAgICAgICAgY2hhbGxlbmdlLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY3JlYXRlZEF0KSxcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLnVwZGF0ZWRBdCksXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdBbGwgY2hhbGxlbmdlcyBhZnRlciBwcm9jZXNzaW5nOicsIEpTT04uc3RyaW5naWZ5KGFsbENoYWxsZW5nZXMsIG51bGwsIDIpKTtcbiAgICBcbiAgICAgICAgLy8gRmlsdGVyIGZvciBhY3RpdmUgY2hhbGxlbmdlcyAoZW5kRGF0ZSA+IGN1cnJlbnQgZGF0ZSlcbiAgICAgICAgY29uc3QgYWN0aXZlQ2hhbGxlbmdlcyA9IGFsbENoYWxsZW5nZXMuZmlsdGVyKHVzZXJDaGFsbGVuZ2UgPT4ge1xuICAgICAgICAgIGNvbnN0IGVuZERhdGUgPSB1c2VyQ2hhbGxlbmdlLmNoYWxsZW5nZT8uZW5kRGF0ZTtcbiAgICBcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcbiAgICAgICAgICAvLyAgIGBFdmFsdWF0aW5nIGNoYWxsZW5nZSBJRDogJHt1c2VyQ2hhbGxlbmdlLmlkfSwgRW5kIERhdGU6ICR7ZW5kRGF0ZX0sIEN1cnJlbnQgRGF0ZTogJHtuZXcgRGF0ZSgpfWBcbiAgICAgICAgICAvLyApO1xuICAgIFxuICAgICAgICAgIHJldHVybiBlbmREYXRlICYmIGVuZERhdGUgPiBuZXcgRGF0ZSgpO1xuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgLy8gY29uc29sZS5sb2coYFRvdGFsIGFjdGl2ZSBjaGFsbGVuZ2VzOiAke2FjdGl2ZUNoYWxsZW5nZXMubGVuZ3RofWAsIGFjdGl2ZUNoYWxsZW5nZXMpO1xuICAgIFxuICAgICAgICByZXR1cm4gYWN0aXZlQ2hhbGxlbmdlcztcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFjdGl2ZSBjaGFsbGVuZ2VzOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICAgIFxuXG4gIC8qKlxuICAgKiBGZXRjaCB1c2VyIGNoYWxsZW5nZXMgYnkgdXNlcklkLlxuICAgKiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIHRvIGFuIGFycmF5IG9mIGNoYWxsZW5nZXMuXG4gICAqIEB0aHJvd3MgSWYgbm8gdXNlciBpcyBzaWduZWQgaW4gb3IgaWYgdGhlIEZpcmVzdG9yZSBxdWVyeSBmYWlscy5cbiAgICovXG4gIGFzeW5jIGZldGNoVXNlckNoYWxsZW5nZXMoKTogUHJvbWlzZTxVc2VyQ2hhbGxlbmdlW10+IHtcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IHVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyO1xuICAgIGlmICghY3VycmVudFVzZXI/LmlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgfVxuXG4gICAgLy8gUmVmZXJlbmNlIHRvIHRoZSB1c2VyLWNoYWxsZW5nZSBjb2xsZWN0aW9uXG4gICAgY29uc3QgdXNlckNoYWxsZW5nZXNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlci1jaGFsbGVuZ2UnKTtcblxuICAgIC8vIFF1ZXJ5IGNoYWxsZW5nZXMgd2hlcmUgdXNlcklkIG1hdGNoZXMgdGhlIGN1cnJlbnQgdXNlcidzIElEXG4gICAgY29uc3QgcSA9IHF1ZXJ5KHVzZXJDaGFsbGVuZ2VzUmVmLCB3aGVyZSgndXNlcklkJywgJz09JywgY3VycmVudFVzZXIuaWQpKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG5cbiAgICAgIC8vIE1hcCBkb2N1bWVudHMgdG8gYW4gYXJyYXkgb2YgQ2hhbGxlbmdlIG9iamVjdHNcbiAgICAgIHJldHVybiBzbmFwc2hvdC5kb2NzLm1hcCgoZG9jOiBEb2N1bWVudERhdGEpID0+ICh7XG4gICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgIC4uLmRvYy5kYXRhKCksXG4gICAgICB9KSkgYXMgVXNlckNoYWxsZW5nZVtdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyIGNoYWxsZW5nZXM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggdXNlciBjaGFsbGVuZ2VzJyk7XG4gICAgfVxuICB9XG4gIFxuICAvL3VwZGF0ZSB0aGUgd29ya291dCBzdW1tYXJ5LFxuICBhc3luYyB1cGRhdGVXb3Jrb3V0U3VtbWFyeSh7XG4gICAgdXNlcklkLFxuICAgIHdvcmtvdXRJZCxcbiAgICBzdW1tYXJ5XG4gIH06IHtcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICB3b3Jrb3V0SWQ6IHN0cmluZyxcbiAgICBzdW1tYXJ5OiBXb3Jrb3V0U3VtbWFyeVxuICB9KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBJRCBwcm92aWRlZCcpO1xuICAgIH1cbiAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIENyZWF0ZSBhIHJlZmVyZW5jZSB0byB0aGUgY29sbGVjdGlvblxuICAgICAgY29uc3Qgc3VtbWFyeVJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdXNlcklkLCAnd29ya291dFN1bW1hcnknLCBzdW1tYXJ5LmlkKTtcbiAgXG4gICAgICAvLyBDb252ZXJ0IHN1bW1hcnkgdG8gYSBwbGFpbiBvYmplY3QgZm9yIEZpcmVzdG9yZVxuICAgICAgY29uc3Qgc3VtbWFyeURhdGEgPSB7XG4gICAgICAgIGlkOiBzdW1tYXJ5LmlkLFxuICAgICAgICB3b3Jrb3V0SWQ6IHN1bW1hcnkud29ya291dElkLFxuICAgICAgICBleGVyY2lzZXM6IHN1bW1hcnkuZXhlcmNpc2VzLFxuICAgICAgICBib2R5UGFydHM6IHN1bW1hcnkuYm9keVBhcnRzLFxuICAgICAgICBzZWNvbmRhcnlCb2R5UGFydHM6IHN1bW1hcnkuc2Vjb25kYXJ5Qm9keVBhcnRzLFxuICAgICAgICB3b3Jrb3V0VGl0bGU6IHN1bW1hcnkud29ya291dFRpdGxlLFxuICAgICAgICBjYWxvcmllc0J1cm5lZDogc3VtbWFyeS5jYWxvcmllc0J1cm5lZCxcbiAgICAgICAgd29ya291dFJhdGluZzogc3VtbWFyeS53b3Jrb3V0UmF0aW5nLFxuICAgICAgICBleGVyY2lzZXNDb21wbGV0ZWQ6IHN1bW1hcnkuZXhlcmNpc2VzQ29tcGxldGVkLFxuICAgICAgICBhaUluc2lnaHQ6IHN1bW1hcnkuYWlJbnNpZ2h0LFxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IHN1bW1hcnkucmVjb21tZW5kYXRpb25zLFxuICAgICAgICBnaWZVUkxzOiBzdW1tYXJ5LmdpZlVSTHMsXG4gICAgICAgIHJlY29tbWVuZGVkV29yazogc3VtbWFyeS5yZWNvbW1lbmRlZFdvcmssXG4gICAgICAgIGlzQ29tcGxldGVkOiBzdW1tYXJ5LmlzQ29tcGxldGVkLFxuICAgICAgICBjcmVhdGVkQXQ6IHN1bW1hcnkuY3JlYXRlZEF0LFxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIGNvbXBsZXRlZEF0OiBzdW1tYXJ5LmNvbXBsZXRlZEF0LFxuICAgICAgICBkdXJhdGlvbjogc3VtbWFyeS5kdXJhdGlvblxuICAgICAgfTtcbiAgXG4gICAgICAvLyBTZXQgZGF0YSB3aXRoIG1lcmdlIGVuYWJsZWQgKGVxdWl2YWxlbnQgdG8gU3dpZnQncyBzZXREYXRhIHdpdGggbWVyZ2U6IHRydWUpXG4gICAgICBhd2FpdCBzZXREb2Moc3VtbWFyeVJlZiwgc3VtbWFyeURhdGEsIHsgbWVyZ2U6IHRydWUgfSk7XG4gIFxuICAgICAgY29uc29sZS5sb2coJ1dvcmtvdXQgc3VtbWFyeSBkb2N1bWVudCB1cGRhdGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB3b3Jrb3V0IHN1bW1hcnk6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlV29ya291dExvZ3Moe1xuICAgIHVzZXJJZCxcbiAgICB3b3Jrb3V0SWQsIFxuICAgIGxvZ3NcbiAgfToge1xuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIHdvcmtvdXRJZDogc3RyaW5nLCBcbiAgICBsb2dzOiBFeGVyY2lzZUxvZ1tdXG4gIH0pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgd29ya291dFJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdXNlcklkLCAnd29ya291dFNlc3Npb25zJywgd29ya291dElkKTtcbiAgICAgIGNvbnN0IGxvZ3NSZWYgPSBjb2xsZWN0aW9uKHdvcmtvdXRSZWYsICdsb2dzJyk7XG4gICAgICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xuICAgICAgXG4gICAgICBsb2dzLmZvckVhY2gobG9nID0+IHtcbiAgICAgICAgY29uc3QgbG9nRG9jUmVmID0gZG9jKGxvZ3NSZWYsIGxvZy5pZCk7XG4gICAgICAgIGJhdGNoLnVwZGF0ZShsb2dEb2NSZWYsIHtcbiAgICAgICAgICAuLi5sb2cudG9EaWN0aW9uYXJ5KClcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgXG4gICAgICBhd2FpdCBiYXRjaC5jb21taXQoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgd29ya291dCBsb2dzOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRoZSBjYW5jZWxXb3Jrb3V0IG1ldGhvZCDigJMgaXQgZGVsZXRlcyB0aGUgd29ya291dCBzZXNzaW9uIGFuZCBzdW1tYXJ5IChpZiBhbnkpLFxuLy8gY2xlYW5zIHVwIHRoZSBsb2NhbCBzdGF0ZSwgYW5kIGxvZ3MgdGhlIGNhbmNlbGxhdGlvbi5cbmFzeW5jIGNhbmNlbFdvcmtvdXQod29ya291dDogV29ya291dCB8IG51bGwsIHdvcmtvdXRTdW1tYXJ5OiBXb3Jrb3V0U3VtbWFyeSB8IG51bGwpOiBQcm9taXNlPHZvaWQ+IHtcbiAgaWYgKCF1c2VyU2VydmljZS5jdXJyZW50VXNlcj8uaWQgfHwgIXdvcmtvdXQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2VyIG5vdCBhdXRoZW50aWNhdGVkLlwiKTtcbiAgfVxuXG4gIHRyeSB7ICAgIFxuICAgICAgYXdhaXQgdGhpcy5kZWxldGVXb3Jrb3V0U2Vzc2lvbih3b3Jrb3V0LmlkKTtcbiAgICAgIGlmICh3b3Jrb3V0U3VtbWFyeSkge1xuICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZVdvcmtvdXRTdW1tYXJ5KHdvcmtvdXRTdW1tYXJ5LmlkKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhpcy5jbGVhblVwV29ya291dEluUHJvZ3Jlc3MoKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiV29ya291dCBjYW5jZWxlZCBhbmQgY2xlYW5lZCB1cCBzdWNjZXNzZnVsbHkuXCIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjYW5jZWxpbmcgd29ya291dDpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG4gIFxuLy8gRGVsZXRlcyBhIHdvcmtvdXQgc2Vzc2lvbiBkb2N1bWVudCBhbmQgYWxsIGl0cyBzdWJjb2xsZWN0aW9uIFwibG9nc1wiXG5hc3luYyBkZWxldGVXb3Jrb3V0U2Vzc2lvbih3b3Jrb3V0SWQ6IHN0cmluZyB8IG51bGwpOiBQcm9taXNlPHZvaWQ+IHtcbiAgaWYgKCF1c2VyU2VydmljZS5jdXJyZW50VXNlcj8uaWQgfHwgIXdvcmtvdXRJZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXIgbm90IGF1dGhlbnRpY2F0ZWQuXCIpO1xuICB9XG4gIGNvbnN0IHVzZXJJZCA9IHVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyLmlkO1xuICBjb25zdCB3b3Jrb3V0UmVmID0gZG9jKGRiLCBcInVzZXJzXCIsIHVzZXJJZCwgXCJ3b3Jrb3V0U2Vzc2lvbnNcIiwgd29ya291dElkKTtcbiAgXG4gIHRyeSB7XG4gICAgLy8gRGVsZXRlIGFsbCBsb2dzIGluIHRoZSBzdWJjb2xsZWN0aW9uXG4gICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24od29ya291dFJlZiwgXCJsb2dzXCIpO1xuICAgIGNvbnN0IGxvZ3NTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MobG9nc1JlZik7XG4gICAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcbiAgICBcbiAgICBsb2dzU25hcHNob3QuZG9jcy5mb3JFYWNoKChsb2dEb2MpID0+IHtcbiAgICAgIGJhdGNoLmRlbGV0ZShsb2dEb2MucmVmKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBEZWxldGUgdGhlIG1haW4gd29ya291dCBkb2N1bWVudFxuICAgIGJhdGNoLmRlbGV0ZSh3b3Jrb3V0UmVmKTtcbiAgICBcbiAgICBhd2FpdCBiYXRjaC5jb21taXQoKTtcbiAgICBjb25zb2xlLmxvZyhcIldvcmtvdXQgc2Vzc2lvbiBhbmQgbG9ncyBkZWxldGVkIHN1Y2Nlc3NmdWxseS5cIik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGRlbGV0aW5nIHdvcmtvdXQgc2Vzc2lvbjpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbiAgLy8gRGVsZXRlcyB0aGUgd29ya291dCBzdW1tYXJ5IGRvY3VtZW50LlxuICBhc3luYyBkZWxldGVXb3Jrb3V0U3VtbWFyeSh3b3Jrb3V0U3VtbWFyeUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXdvcmtvdXRTdW1tYXJ5SWQgfHwgIXVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyPy5pZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3VtbWFyeVJlZiA9IGRvYyhkYiwgXCJ1c2Vyc1wiLCB1c2VyU2VydmljZS5jdXJyZW50VXNlci5pZCwgXCJ3b3Jrb3V0U3VtbWFyeVwiLCB3b3Jrb3V0U3VtbWFyeUlkKTtcbiAgICAgIGF3YWl0IGRlbGV0ZURvYyhzdW1tYXJ5UmVmKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiV29ya291dCBzdW1tYXJ5IGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5LlwiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGRlbGV0aW5nIHdvcmtvdXQgc3VtbWFyeTpcIiwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gQ2xlYW4gdXAgbG9jYWwgc3RvcmFnZSBhbmQgaW4tbWVtb3J5IHdvcmtvdXQgc3RhdGUuXG4gICAgY2xlYW5VcFdvcmtvdXRJblByb2dyZXNzKCk6IHZvaWQge1xuICAgICAgc3RvcmUuZGlzcGF0Y2gocmVzZXRXb3Jrb3V0U3RhdGUoKSk7XG4gICAgfVxuICAgICAgXG4gIFxuICAvKipcbiAgICogRmV0Y2ggdGhlIHdvcmtvdXQgc2Vzc2lvbiBmcm9tIEZpcmVzdG9yZSwgcmV0dXJuaW5nIHsgd29ya291dCwgbG9ncyB9LlxuICAgKiBDaGVja3MgZmlyc3QgZm9yIGEgUXVldWVkVXAgc2Vzc2lvbiwgdGhlbiBmb3IgSW5Qcm9ncmVzcy5cbiAgICovXG4gIGFzeW5jIGZldGNoQ3VycmVudFdvcmtvdXRTZXNzaW9uKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx7XG4gICAgd29ya291dDogV29ya291dCB8IG51bGw7XG4gICAgbG9nczogRXhlcmNpc2VMb2dbXSB8IG51bGw7XG4gICB9PiB7XG4gICAgaWYgKCF1c2VySWQpIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBJRCBwcm92aWRlZCcpO1xuICAgXG4gICAgY29uc3QgZXhlcmNpc2VTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlcycpKTtcbiAgICBjb25zdCB2aWRlb1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VWaWRlb3MnKSk7XG4gICBcbiAgICBjb25zdCBleGVyY2lzZVZpZGVvcyA9IHZpZGVvU25hcHNob3QuZG9jcy5tYXAoKGRvYykgPT4gXG4gICAgICBFeGVyY2lzZVZpZGVvLmZyb21GaXJlYmFzZSh7XG4gICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgIC4uLmRvYy5kYXRhKClcbiAgICAgIH0pXG4gICAgKTtcbiAgIFxuICAgIGNvbnN0IGV4ZXJjaXNlc1dpdGhWaWRlb3MgPSBleGVyY2lzZVNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiB7XG4gICAgICBjb25zdCBleGVyY2lzZSA9IEV4ZXJjaXNlLmZyb21GaXJlYmFzZSh7XG4gICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgIC4uLmRvYy5kYXRhKClcbiAgICAgIH0pO1xuICAgXG4gICAgICBjb25zdCBtYXRjaGluZ1ZpZGVvcyA9IGV4ZXJjaXNlVmlkZW9zLmZpbHRlcihcbiAgICAgICAgKHZpZGVvKSA9PiB2aWRlby5leGVyY2lzZS50b0xvd2VyQ2FzZSgpID09PSBleGVyY2lzZS5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICk7XG4gICBcbiAgICAgIHJldHVybiBuZXcgRXhlcmNpc2Uoe1xuICAgICAgICAuLi5leGVyY2lzZSxcbiAgICAgICAgdmlkZW9zOiBtYXRjaGluZ1ZpZGVvc1xuICAgICAgfSk7XG4gICAgfSk7XG4gICBcbiAgICBjb25zdCB3b3Jrb3V0U2Vzc2lvbnNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCB1c2VySWQsICd3b3Jrb3V0U2Vzc2lvbnMnKTtcbiAgIFxuICAgIGxldCBxID0gcXVlcnkod29ya291dFNlc3Npb25zUmVmLCB3aGVyZSgnc3RhdHVzJywgJz09JywgV29ya291dFN0YXR1cy5RdWV1ZWRVcCkpO1xuICAgIGxldCBzbmFwID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgIFxuICAgIGlmICghc25hcC5lbXB0eSkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc1dvcmtvdXRTZXNzaW9uRG9jdW1lbnQoc25hcC5kb2NzWzBdLCBleGVyY2lzZXNXaXRoVmlkZW9zKTtcbiAgICB9XG4gICBcbiAgICBxID0gcXVlcnkod29ya291dFNlc3Npb25zUmVmLCB3aGVyZSgnc3RhdHVzJywgJz09JywgV29ya291dFN0YXR1cy5JblByb2dyZXNzKSk7XG4gICAgc25hcCA9IGF3YWl0IGdldERvY3MocSk7XG4gICBcbiAgICBpZiAoIXNuYXAuZW1wdHkpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NXb3Jrb3V0U2Vzc2lvbkRvY3VtZW50KHNuYXAuZG9jc1swXSwgZXhlcmNpc2VzV2l0aFZpZGVvcyk7XG4gICAgfVxuICAgXG4gICAgcmV0dXJuIHsgd29ya291dDogbnVsbCwgbG9nczogbnVsbCB9O1xuICAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZmV0Y2hBbmRNYXBFeGVyY2lzZXNXaXRoVmlkZW9zKCk6IFByb21pc2U8RXhlcmNpc2VbXT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnU3RhcnRpbmcgZmV0Y2hBbmRNYXBFeGVyY2lzZXNXaXRoVmlkZW9zJyk7XG4gIFxuICAgICAgLy8gMS4gRmV0Y2ggYWxsIGV4ZXJjaXNlcyBcbiAgICAgIGNvbnN0IGV4ZXJjaXNlU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZXMnKSk7XG4gICAgICBjb25zdCBleGVyY2lzZXMgPSBleGVyY2lzZVNuYXBzaG90LmRvY3MubWFwKChkb2MpID0+IFxuICAgICAgICBFeGVyY2lzZS5mcm9tRmlyZWJhc2Uoe1xuICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgLi4uZG9jLmRhdGEoKVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGBGZXRjaGVkICR7ZXhlcmNpc2VzLmxlbmd0aH0gZXhlcmNpc2VzYCk7XG4gIFxuICAgICAgLy8gMi4gRmV0Y2ggYWxsIHZpZGVvc1xuICAgICAgY29uc3QgdmlkZW9TbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlVmlkZW9zJykpO1xuICAgICAgY29uc3QgZXhlcmNpc2VWaWRlb3MgPSB2aWRlb1NuYXBzaG90LmRvY3MubWFwKChkb2MpID0+IFxuICAgICAgICBFeGVyY2lzZVZpZGVvLmZyb21GaXJlYmFzZSh7XG4gICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAuLi5kb2MuZGF0YSgpXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgLy8gY29uc29sZS5sb2coYEZldGNoZWQgJHtleGVyY2lzZVZpZGVvcy5sZW5ndGh9IGV4ZXJjaXNlIHZpZGVvc2ApO1xuICBcbiAgICAgIC8vIDMuIE1hcCB2aWRlb3MgdG8gZXhlcmNpc2VzXG4gICAgICBjb25zdCBleGVyY2lzZXNXaXRoVmlkZW9zID0gZXhlcmNpc2VzLm1hcChleGVyY2lzZSA9PiB7XG4gICAgICAgIGNvbnN0IG1hdGNoaW5nVmlkZW9zID0gZXhlcmNpc2VWaWRlb3MuZmlsdGVyKFxuICAgICAgICAgICh2aWRlbykgPT4gdmlkZW8uZXhlcmNpc2UudG9Mb3dlckNhc2UoKSA9PT0gZXhlcmNpc2UubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICk7XG4gICAgICAgXG4gICAgICAgIHJldHVybiBuZXcgRXhlcmNpc2Uoe1xuICAgICAgICAgIC4uLmV4ZXJjaXNlLFxuICAgICAgICAgIHZpZGVvczogbWF0Y2hpbmdWaWRlb3NcbiAgICAgICAgfSk7XG4gICAgICAgfSk7XG4gIFxuICAgICAgLy8gY29uc29sZS5sb2coJ0ZpbmlzaGVkIG1hcHBpbmcgZXhlcmNpc2VzIHdpdGggdmlkZW9zJyk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhgVG90YWwgZXhlcmNpc2VzIHdpdGggdmlkZW9zOiAke2V4ZXJjaXNlc1dpdGhWaWRlb3MubGVuZ3RofWApO1xuICAgICAgICBcbiAgICAgIHJldHVybiBleGVyY2lzZXNXaXRoVmlkZW9zO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhbmQgbWFwcGluZyBleGVyY2lzZXMgd2l0aCB2aWRlb3M6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciB0byBidWlsZCB0aGUgV29ya291dCBvYmplY3QgKyBhbnkgbG9ncyBmcm9tIHRoZSBzbmFwc2hvdC5cbiAgICovXG4gIGFzeW5jIGZldGNoQWxsV29ya291dFNlc3Npb25zKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx7XG4gICAgd29ya291dDogV29ya291dCB8IG51bGw7XG4gICAgbG9nczogRXhlcmNpc2VMb2dbXSB8IG51bGw7XG4gICB9W10+IHtcbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIElEIHByb3ZpZGVkJyk7XG4gICAgfVxuICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGV4ZXJjaXNlU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZXMnKSk7XG4gICAgICBjb25zdCBleGVyY2lzZXMgPSBleGVyY2lzZVNuYXBzaG90LmRvY3MubWFwKChkb2MpID0+IFxuICAgICAgICBFeGVyY2lzZS5mcm9tRmlyZWJhc2Uoe1xuICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgLi4uZG9jLmRhdGEoKVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgIFxuICAgICAgY29uc3QgdmlkZW9TbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlVmlkZW9zJykpO1xuICAgICAgY29uc3QgZXhlcmNpc2VWaWRlb3MgPSB2aWRlb1NuYXBzaG90LmRvY3MubWFwKChkb2MpID0+IFxuICAgICAgICBFeGVyY2lzZVZpZGVvLmZyb21GaXJlYmFzZSh7XG4gICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAuLi5kb2MuZGF0YSgpXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgXG4gICAgICBjb25zdCBleGVyY2lzZXNXaXRoVmlkZW9zID0gZXhlcmNpc2VzLm1hcChleGVyY2lzZSA9PiB7XG4gICAgICAgIGNvbnN0IG1hdGNoaW5nVmlkZW9zID0gZXhlcmNpc2VWaWRlb3MuZmlsdGVyKFxuICAgICAgICAgICh2aWRlbykgPT4gdmlkZW8uZXhlcmNpc2UudG9Mb3dlckNhc2UoKSA9PT0gZXhlcmNpc2UubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICk7XG4gICBcbiAgICAgICAgcmV0dXJuIG5ldyBFeGVyY2lzZSh7XG4gICAgICAgICAgLi4uZXhlcmNpc2UsXG4gICAgICAgICAgdmlkZW9zOiBtYXRjaGluZ1ZpZGVvc1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgXG4gICAgICBjb25zdCB3b3Jrb3V0U2Vzc2lvbnNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCB1c2VySWQsICd3b3Jrb3V0U2Vzc2lvbnMnKTtcbiAgICAgIGNvbnN0IHNuYXAgPSBhd2FpdCBnZXREb2NzKHdvcmtvdXRTZXNzaW9uc1JlZik7XG4gICBcbiAgICAgIGlmIChzbmFwLmVtcHR5KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdObyB3b3Jrb3V0IHNlc3Npb25zIGZvdW5kIGZvciB1c2VyJyk7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgIFxuICAgICAgY29uc3Qgc2Vzc2lvbnMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgc25hcC5kb2NzLm1hcChhc3luYyAoZG9jKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc2Vzc2lvbkRhdGEgPSBhd2FpdCB0aGlzLnByb2Nlc3NXb3Jrb3V0U2Vzc2lvbkRvY3VtZW50KFxuICAgICAgICAgICAgZG9jLCBcbiAgICAgICAgICAgIGV4ZXJjaXNlc1dpdGhWaWRlb3NcbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChzZXNzaW9uRGF0YS5sb2dzKSB7XG4gICAgICAgICAgICBzZXNzaW9uRGF0YS5sb2dzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgY29uc3Qgb3JkZXJBID0gYS5vcmRlciA/PyAwO1xuICAgICAgICAgICAgICBjb25zdCBvcmRlckIgPSBiLm9yZGVyID8/IDA7XG4gICAgICAgICAgICAgIHJldHVybiBvcmRlckEgLSBvcmRlckI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICBcbiAgICAgICAgICByZXR1cm4gc2Vzc2lvbkRhdGE7XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgXG4gICAgICByZXR1cm4gc2Vzc2lvbnM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHdvcmtvdXQgc2Vzc2lvbnM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNvbGxlY3Rpb24oY29sbGVjdGlvbjogU3dlYXRsaXN0Q29sbGVjdGlvbik6IFByb21pc2U8U3dlYXRsaXN0Q29sbGVjdGlvbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb2xsUmVmID0gZnNDb2xsZWN0aW9uKGRiLCBcInN3ZWF0bGlzdC1jb2xsZWN0aW9uXCIpO1xuICBcbiAgICAgIC8vIElmIGNvbGxlY3Rpb24uaWQgaXMgZW1wdHksIGdlbmVyYXRlIGEgbmV3IGRvYyBJRCBhbmQgYXNzaWduIGl0LlxuICAgICAgaWYgKCFjb2xsZWN0aW9uLmlkIHx8IGNvbGxlY3Rpb24uaWQudHJpbSgpID09PSBcIlwiKSB7XG4gICAgICAgIGNvbnN0IG5ld0RvY1JlZiA9IGRvYyhjb2xsUmVmKTtcbiAgICAgICAgY29sbGVjdGlvbi5pZCA9IG5ld0RvY1JlZi5pZDtcbiAgICAgIH1cbiAgXG4gICAgICAvLyBFbnN1cmUgdGhlIGNoYWxsZW5nZSBpZCBtYXRjaGVzIHRoZSBjb2xsZWN0aW9uIGlkLlxuICAgICAgaWYgKGNvbGxlY3Rpb24uY2hhbGxlbmdlKSB7XG4gICAgICAgIGNvbGxlY3Rpb24uY2hhbGxlbmdlLmlkID0gY29sbGVjdGlvbi5pZDtcbiAgICAgIH1cbiAgXG4gICAgICAvLyBVcGRhdGUgdGhlIHVwZGF0ZWRBdCBmaWVsZC5cbiAgICAgIGNvbGxlY3Rpb24udXBkYXRlZEF0ID0gbmV3IERhdGUoKTtcbiAgXG4gICAgICAvLyBTYXZlIHRoZSBjb2xsZWN0aW9uIHRvIEZpcmVzdG9yZS5cbiAgICAgIGF3YWl0IHNldERvYyhkb2MoY29sbFJlZiwgY29sbGVjdGlvbi5pZCksIGNvbGxlY3Rpb24udG9EaWN0aW9uYXJ5KCkpO1xuICAgICAgY29uc29sZS5sb2coXCJDb2xsZWN0aW9uIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgcmV0dXJuIGNvbGxlY3Rpb247XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGRhdGluZyBjb2xsZWN0aW9uIGRvY3VtZW50OlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciB3aGlsZSB1cGRhdGluZyB0aGUgY29sbGVjdGlvblwiKTtcbiAgICB9XG4gIH1cbiAgXG4gIHByaXZhdGUgYXN5bmMgcHJvY2Vzc1dvcmtvdXRTZXNzaW9uRG9jdW1lbnQoXG4gICAgd29ya291dERvYzogUXVlcnlEb2N1bWVudFNuYXBzaG90PERvY3VtZW50RGF0YT4sXG4gICAgZXhlcmNpc2VzV2l0aFZpZGVvczogRXhlcmNpc2VbXVxuICApOiBQcm9taXNlPHsgd29ya291dDogV29ya291dDsgbG9nczogRXhlcmNpc2VMb2dbXSB9PiB7XG4gICAgY29uc3QgZGF0YSA9IHdvcmtvdXREb2MuZGF0YSgpO1xuICBcbiAgICAvLyBNYXAgZXhlcmNpc2VzIHdpdGggdGhlaXIgZnVsbCBkYXRhIGFuZCB2aWRlb3NcbiAgICBjb25zdCBtYXBwZWRFeGVyY2lzZXMgPSAoZGF0YS5leGVyY2lzZXMgfHwgW10pLm1hcCgoZXhlcmNpc2VSZWY6IGFueSkgPT4ge1xuICAgICAgLy8gRmluZCB0aGUgZnVsbCBleGVyY2lzZSB3aXRoIHZpZGVvc1xuICAgICAgY29uc3QgZXhlcmNpc2VOYW1lTG93ZXIgPSBleGVyY2lzZVJlZi5leGVyY2lzZT8ubmFtZT8udG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgICBjb25zdCBmdWxsRXhlcmNpc2UgPSBleGVyY2lzZXNXaXRoVmlkZW9zLmZpbmQoXG4gICAgICAgIGV4ID0+IGV4Lm5hbWUudG9Mb3dlckNhc2UoKS50cmltKCkgPT09IGV4ZXJjaXNlTmFtZUxvd2VyXG4gICAgICApO1xuICBcbiAgICAgIC8vIElmIGZ1bGwgZXhlcmNpc2UgZm91bmQsIHJldHVybiBpdCwgb3RoZXJ3aXNlIHVzZSB0aGUgb3JpZ2luYWxcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmV4ZXJjaXNlUmVmLFxuICAgICAgICBleGVyY2lzZTogZnVsbEV4ZXJjaXNlIHx8IGV4ZXJjaXNlUmVmLmV4ZXJjaXNlXG4gICAgICB9O1xuICAgIH0pO1xuICBcbiAgICAvLyBDcmVhdGUgdGhlIHdvcmtvdXQgd2l0aCBtYXBwZWQgZXhlcmNpc2VzXG4gICAgY29uc3Qgd29ya291dCA9IG5ldyBXb3Jrb3V0KHtcbiAgICAgIGlkOiB3b3Jrb3V0RG9jLmlkLFxuICAgICAgcm91bmRXb3Jrb3V0SWQ6IGRhdGEucm91bmRXb3Jrb3V0SWQgfHwgJycsXG4gICAgICBleGVyY2lzZXM6IG1hcHBlZEV4ZXJjaXNlcyxcbiAgICAgIHRpdGxlOiBkYXRhLnRpdGxlIHx8ICcnLFxuICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICBkdXJhdGlvbjogZGF0YS5kdXJhdGlvbiB8fCAwLFxuICAgICAgdXNlQXV0aG9yQ29udGVudDogZGF0YS51c2VBdXRob3JDb250ZW50IHx8IGZhbHNlLFxuICAgICAgaXNDb21wbGV0ZWQ6IGRhdGEuaXNDb21wbGV0ZWQgfHwgZmFsc2UsXG4gICAgICB3b3Jrb3V0U3RhdHVzOiBkYXRhLndvcmtvdXRTdGF0dXMgfHwgV29ya291dFN0YXR1cy5BcmNoaXZlZCxcbiAgICAgIGF1dGhvcjogZGF0YS5hdXRob3IgfHwgJycsXG4gICAgICBjcmVhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5jcmVhdGVkQXQpLFxuICAgICAgdXBkYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEudXBkYXRlZEF0KSxcbiAgICAgIHN0YXJ0VGltZTogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLnN0YXJ0VGltZSksXG4gICAgICBjb2xsZWN0aW9uSWQ6IGRhdGEuY29sbGVjdGlvbklkLFxuICAgICAgY2hhbGxlbmdlOiBkYXRhLmNoYWxsZW5nZSxcbiAgICAgIGxvZ3M6IChkYXRhLmxvZ3MgfHwgW10pLm1hcCgobG9nRGF0YTogYW55KSA9PiB7XG4gICAgICAgIC8vIE1hcCBsb2dzIHdpdGggZnVsbCBleGVyY2lzZXNcbiAgICAgICAgY29uc3QgZXhlcmNpc2VOYW1lTG93ZXIgPSBsb2dEYXRhLmV4ZXJjaXNlPy5uYW1lPy50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICAgICAgY29uc3QgZnVsbEV4ZXJjaXNlID0gZXhlcmNpc2VzV2l0aFZpZGVvcy5maW5kKFxuICAgICAgICAgIGV4ID0+IGV4Lm5hbWUudG9Mb3dlckNhc2UoKS50cmltKCkgPT09IGV4ZXJjaXNlTmFtZUxvd2VyXG4gICAgICAgICk7XG4gIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmxvZ0RhdGEsXG4gICAgICAgICAgZXhlcmNpc2U6IGZ1bGxFeGVyY2lzZSB8fCBsb2dEYXRhLmV4ZXJjaXNlXG4gICAgICAgIH07XG4gICAgICB9KSxcbiAgICAgIHdvcmtvdXRSYXRpbmc6IGRhdGEud29ya291dFJhdGluZyxcbiAgICAgIG9yZGVyOiBkYXRhLm9yZGVyLFxuICAgICAgem9uZTogZGF0YS56b25lIHx8IEJvZHlab25lLkZ1bGxCb2R5XG4gICAgfSk7XG4gIFxuICAgIGNvbnNvbGUubG9nKFwiVGhlIFdvcmtvdXQgSUQgaXM6IFwiICsgd29ya291dC5pZCk7XG4gICAgLy8gRmV0Y2ggbG9ncyBmcm9tIHN1YmNvbGxlY3Rpb25cbiAgICBjb25zdCBsb2dzUmVmID0gY29sbGVjdGlvbih3b3Jrb3V0RG9jLnJlZiwgJ2xvZ3MnKTtcbiAgICBjb25zdCBsb2dzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGxvZ3NSZWYpO1xuICAgIFxuICAgIGNvbnN0IGxvZ3M6IEV4ZXJjaXNlTG9nW10gPSBsb2dzU25hcHNob3QuZG9jcy5tYXAobG9nRG9jID0+IHtcbiAgICAgIGNvbnN0IGxvZ0RhdGEgPSBsb2dEb2MuZGF0YSgpO1xuICAgICAgXG4gICAgICAvLyBGaW5kIHRoZSBmdWxsIGV4ZXJjaXNlIHdpdGggdmlkZW9zXG4gICAgICBjb25zdCBleGVyY2lzZU5hbWVMb3dlciA9IGxvZ0RhdGEuZXhlcmNpc2U/Lm5hbWU/LnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgICAgY29uc3QgZnVsbEV4ZXJjaXNlID0gZXhlcmNpc2VzV2l0aFZpZGVvcy5maW5kKFxuICAgICAgICBleCA9PiBleC5uYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpID09PSBleGVyY2lzZU5hbWVMb3dlclxuICAgICAgKTtcbiAgXG4gICAgICAvLyBQcmVwYXJlIGxvZyBkYXRhIHdpdGggZnVsbCBleGVyY2lzZVxuICAgICAgY29uc3QgcHJlcGFyZWRMb2dEYXRhID0ge1xuICAgICAgICAuLi5sb2dEYXRhLFxuICAgICAgICBpZDogbG9nRG9jLmlkLFxuICAgICAgICB3b3Jrb3V0SWQ6IHdvcmtvdXQuaWQsXG4gICAgICAgIGV4ZXJjaXNlOiBmdWxsRXhlcmNpc2UgfHwgbG9nRGF0YS5leGVyY2lzZSxcbiAgICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGxvZ0RhdGEuY3JlYXRlZEF0KSxcbiAgICAgICAgdXBkYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGxvZ0RhdGEudXBkYXRlZEF0KVxuICAgICAgfTtcbiAgXG4gICAgICAvLyBVc2UgdGhlIEV4ZXJjaXNlTG9nIGNvbnN0cnVjdG9yIHRvIGVuc3VyZSBwcm9wZXIgbWFwcGluZ1xuICAgICAgcmV0dXJuIG5ldyBFeGVyY2lzZUxvZyhwcmVwYXJlZExvZ0RhdGEpO1xuICAgIH0pO1xuICBcbiAgICByZXR1cm4geyB3b3Jrb3V0LCBsb2dzIH07XG4gIH1cblxuICBhc3luYyBzYXZlV29ya291dFNlc3Npb24oe1xuICAgIHVzZXJJZCxcbiAgICB3b3Jrb3V0LFxuICAgIGxvZ3NcbiAgIH06IHtcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICB3b3Jrb3V0OiBXb3Jrb3V0LFxuICAgIGxvZ3M6IEV4ZXJjaXNlTG9nW11cbiAgIH0pOiBQcm9taXNlPFdvcmtvdXQgfCBudWxsPiB7XG4gICAgaWYgKCF1c2VySWQpIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBJRCBwcm92aWRlZCcpO1xuICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgIFxuICAgICAgY29uc3QgY2xlYW5Xb3Jrb3V0ID0gbmV3IFdvcmtvdXQoe1xuICAgICAgICAuLi53b3Jrb3V0LFxuICAgICAgICByb3VuZFdvcmtvdXRJZDogYCR7d29ya291dC5pZH0tJHtjdXJyZW50RGF0ZS5nZXRUaW1lKCl9YCxcbiAgICAgICAgd29ya291dFN0YXR1czogV29ya291dFN0YXR1cy5RdWV1ZWRVcCxcbiAgICAgICAgY3JlYXRlZEF0OiBjdXJyZW50RGF0ZSxcbiAgICAgICAgdXBkYXRlZEF0OiBjdXJyZW50RGF0ZSxcbiAgICAgICAgc3RhcnRUaW1lOiBjdXJyZW50RGF0ZSxcbiAgICAgICAgbG9nczogW11cbiAgICAgICB9KTtcbiAgIFxuICAgICAgY29uc3Qgd29ya291dFNlc3Npb25SZWYgPSBkb2MoY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgdXNlcklkLCAnd29ya291dFNlc3Npb25zJykpO1xuICAgICAgYXdhaXQgc2V0RG9jKHdvcmtvdXRTZXNzaW9uUmVmLCBjbGVhbldvcmtvdXQudG9EaWN0aW9uYXJ5KCkpO1xuICAgXG4gICAgICBjb25zdCBsb2dzUmVmID0gY29sbGVjdGlvbih3b3Jrb3V0U2Vzc2lvblJlZiwgJ2xvZ3MnKTtcbiAgICAgIGNvbnN0IGxvZ0JhdGNoID0gd3JpdGVCYXRjaChkYik7XG4gICBcbiAgICAgIGxvZ3MuZm9yRWFjaCgobG9nLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBsb2dEb2NSZWYgPSBkb2MobG9nc1JlZiwgYCR7bG9nLmlkfS0ke2N1cnJlbnREYXRlLmdldFRpbWUoKX1gKTtcbiAgICAgICAgbG9nQmF0Y2guc2V0KGxvZ0RvY1JlZiwge1xuICAgICAgICAgIGlkOiBsb2dEb2NSZWYuaWQsXG4gICAgICAgICAgd29ya291dElkOiB3b3Jrb3V0U2Vzc2lvblJlZi5pZCxcbiAgICAgICAgICBleGVyY2lzZTogbG9nLmV4ZXJjaXNlLnRvRGljdGlvbmFyeSgpLCAvLyBjb252ZXJ0IHRoZSBjdXN0b20gRXhlcmNpc2Ugb2JqZWN0XG4gICAgICAgICAgb3JkZXI6IGluZGV4LFxuICAgICAgICAgIGNyZWF0ZWRBdDogY3VycmVudERhdGUuZ2V0VGltZSgpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogY3VycmVudERhdGUuZ2V0VGltZSgpLFxuICAgICAgICAgIGxvZ1N1Ym1pdHRlZDogZmFsc2UsXG4gICAgICAgICAgaXNDb21wbGV0ZWQ6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfSk7IFxuICAgXG4gICAgICBhd2FpdCBsb2dCYXRjaC5jb21taXQoKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIGNsZWFuV29ya291dDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHdvcmtvdXQgc2Vzc2lvbjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICB9XG5cbiAgLyoqXG4gICAqIEV4YW1wbGUgXCJqb2luIGNoYWxsZW5nZVwiIG1ldGhvZCB1c2luZyB0aGUgY2xpZW50IFNESyAobm8gYWRtaW4gcHJpdmlsZWdlcykuXG4gICAqIFRoaXMgY3JlYXRlcyBhIGRvYyBpbiBgdXNlci1jaGFsbGVuZ2VgIHdpdGggdGhlIHVzZXJJZCwgY2hhbGxlbmdlSWQsIGV0Yy5cbiAgICovXG4gIGFzeW5jIGpvaW5DaGFsbGVuZ2Uoe1xuICAgIHVzZXJuYW1lLFxuICAgIGNoYWxsZW5nZUlkXG4gIH06IHtcbiAgICB1c2VybmFtZTogc3RyaW5nO1xuICAgIGNoYWxsZW5nZUlkOiBzdHJpbmc7XG4gIH0pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyAxKSBNYWtlIHN1cmUgd2UgaGF2ZSBhIHNpZ25lZC1pbiB1c2VyXG4gICAgY29uc3QgY3VycmVudFVzZXIgPSB1c2VyU2VydmljZS5jdXJyZW50VXNlcjtcbiAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgfVxuXG4gICAgLy8gMikgRmluZCB0aGUgdXNlciBkb2MgYnkgdXNlcm5hbWVcbiAgICBjb25zdCB1c2Vyc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycpO1xuICAgIGNvbnN0IHVzZXJRdWVyeSA9IHF1ZXJ5KHVzZXJzUmVmLCB3aGVyZSgndXNlcm5hbWUnLCAnPT0nLCB1c2VybmFtZSkpO1xuICAgIGNvbnN0IHVzZXJTbmFwc2hvdCA9IGF3YWl0IGdldERvY3ModXNlclF1ZXJ5KTtcblxuICAgIGlmICh1c2VyU25hcHNob3QuZW1wdHkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBub3QgZm91bmQnKTtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyRG9jID0gdXNlclNuYXBzaG90LmRvY3NbMF07XG4gICAgY29uc3QgdXNlckRhdGEgPSB1c2VyRG9jLmRhdGEoKTtcbiAgICBjb25zdCB1c2VySWQgPSB1c2VyRG9jLmlkO1xuXG4gICAgLy8gMykgQ2hlY2sgaWYgdGhlIGNoYWxsZW5nZSBkb2MgZXhpc3RzXG4gICAgY29uc3QgY2hhbGxlbmdlUmVmID0gZG9jKGRiLCAnc3dlYXRsaXN0LWNvbGxlY3Rpb24nLCBjaGFsbGVuZ2VJZCk7XG4gICAgY29uc3QgY2hhbGxlbmdlU25hcCA9IGF3YWl0IGdldERvYyhjaGFsbGVuZ2VSZWYpO1xuXG4gICAgaWYgKCFjaGFsbGVuZ2VTbmFwLmV4aXN0cygpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NoYWxsZW5nZSBub3QgZm91bmQnKTtcbiAgICB9XG5cbiAgICBjb25zdCBjaGFsbGVuZ2UgPSBjaGFsbGVuZ2VTbmFwLmRhdGEoKTtcblxuICAgIC8vIDQpIEJ1aWxkIG5ldyB1c2VyLWNoYWxsZW5nZSBkb2N1bWVudFxuICAgIGNvbnN0IHVzZXJDaGFsbGVuZ2VJZCA9IGAke2NoYWxsZW5nZUlkfS0ke3VzZXJJZH0tJHtEYXRlLm5vdygpfWA7XG4gICAgY29uc3QgdXNlckNoYWxsZW5nZURhdGEgPSB7XG4gICAgICBpZDogdXNlckNoYWxsZW5nZUlkLFxuICAgICAgY2hhbGxlbmdlOiBjaGFsbGVuZ2UsXG4gICAgICBjaGFsbGVuZ2VJZCxcbiAgICAgIHVzZXJJZCxcbiAgICAgIGZjbVRva2VuOiB1c2VyRGF0YS5mY21Ub2tlbiB8fCAnJyxcbiAgICAgIHByb2ZpbGVJbWFnZTogdXNlckRhdGEucHJvZmlsZUltYWdlIHx8IHt9LFxuICAgICAgcHJvZ3Jlc3M6IDAsXG4gICAgICBjb21wbGV0ZWRXb3Jrb3V0czogW10sXG4gICAgICBpc0NvbXBsZXRlZDogZmFsc2UsXG4gICAgICB1aWQ6IHVzZXJJZCxcbiAgICAgIGxvY2F0aW9uOiB1c2VyRGF0YS5sb2NhdGlvbiB8fCBudWxsLFxuICAgICAgY2l0eTogJycsXG4gICAgICBjb3VudHJ5OiAnJyxcbiAgICAgIHRpbWV6b25lOiAnJyxcbiAgICAgIHVzZXJuYW1lLFxuICAgICAgam9pbkRhdGU6IG5ldyBEYXRlKCksXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBwdWxzZVBvaW50czoge1xuICAgICAgICBiYXNlQ29tcGxldGlvbjogMCxcbiAgICAgICAgZmlyc3RDb21wbGV0aW9uOiAwLFxuICAgICAgICBzdHJlYWtCb251czogMCxcbiAgICAgICAgY2hlY2tJbkJvbnVzOiAwLFxuICAgICAgICBlZmZvcnRSYXRpbmc6IDAsXG4gICAgICAgIGNoYXRQYXJ0aWNpcGF0aW9uOiAwLFxuICAgICAgICBsb2NhdGlvbkNoZWNraW46IDAsXG4gICAgICAgIGNvbnRlbnRFbmdhZ2VtZW50OiAwLFxuICAgICAgICBlbmNvdXJhZ2VtZW50U2VudDogMCxcbiAgICAgICAgZW5jb3VyYWdlbWVudFJlY2VpdmVkOiAwXG4gICAgICB9LFxuICAgICAgY3VycmVudFN0cmVhazogMCxcbiAgICAgIGVuY291cmFnZWRVc2VyczogW10sXG4gICAgICBlbmNvdXJhZ2VkQnlVc2VyczogW10sXG4gICAgICBjaGVja0luczogW11cbiAgICB9O1xuXG4gICAgLy8gNSkgU3RvcmUgdXNlci1jaGFsbGVuZ2UgZG9jXG4gICAgYXdhaXQgc2V0RG9jKGRvYyhkYiwgJ3VzZXItY2hhbGxlbmdlJywgdXNlckNoYWxsZW5nZUlkKSwgdXNlckNoYWxsZW5nZURhdGEpO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCB3b3Jrb3V0U2VydmljZSA9IG5ldyBXb3Jrb3V0U2VydmljZSgpOyJdLCJuYW1lcyI6WyJjb2xsZWN0aW9uIiwiZG9jIiwiZ2V0RG9jcyIsImdldERvYyIsInF1ZXJ5Iiwid2hlcmUiLCJvcmRlckJ5IiwiZnNDb2xsZWN0aW9uIiwic2V0RG9jIiwiZGVsZXRlRG9jIiwid3JpdGVCYXRjaCIsImRiIiwidXNlclNlcnZpY2UiLCJFeGVyY2lzZUxvZyIsIkV4ZXJjaXNlIiwiRXhlcmNpc2VWaWRlbyIsImV4ZXJjaXNlU2VydmljZSIsIldvcmtvdXQiLCJCb2R5Wm9uZSIsIkludHJvVmlkZW8iLCJSZXBzQW5kV2VpZ2h0TG9nIiwiV29ya291dFN0YXR1cyIsIlN3ZWF0bGlzdENvbGxlY3Rpb24iLCJmb3JtYXQiLCJjb252ZXJ0VGltZXN0YW1wIiwiY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcCIsIkNoYWxsZW5nZSIsIlVzZXJDaGFsbGVuZ2UiLCJzdG9yZSIsInNldEN1cnJlbnRXb3Jrb3V0Iiwic2V0Q3VycmVudEV4ZXJjaXNlTG9ncyIsInJlc2V0V29ya291dFN0YXRlIiwic2V0V29ya291dFN1bW1hcnkiLCJXb3Jrb3V0U2VydmljZSIsImdlbmVyYXRlSWQiLCJpZCIsImZvcm1hdFdvcmtvdXRBbmRJbml0aWFsaXplTG9ncyIsImV4ZXJjaXNlRGV0YWlscyIsIndvcmtvdXRBdXRob3IiLCJ3b3JrSWQiLCJleGVyY2lzZVJlZmVyZW5jZXMiLCJleGVyY2lzZUxvZ3MiLCJ2YWxpZEV4ZXJjaXNlRGV0YWlscyIsIm5ld1dvcmtvdXQiLCJmaWx0ZXIiLCJkZXRhaWwiLCJleGVyY2lzZSIsImZvckVhY2giLCJpbmRleCIsImNhdGVnb3J5IiwiZXhlcmNpc2VJbnN0YW5jZSIsIndvcmtvdXRTZXJ2aWNlIiwibmFtZSIsImF1dGhvciIsInVzZXJJZCIsInVzZXJuYW1lIiwiZGVzY3JpcHRpb24iLCJ0eXBlIiwiZGV0YWlscyIsInByaW1hcnlCb2R5UGFydHMiLCJzZWNvbmRhcnlCb2R5UGFydHMiLCJ0YWdzIiwidmlkZW9zIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInVwZGF0ZWRBdCIsImV4ZXJjaXNlUmVmIiwiZ3JvdXBJZCIsInB1c2giLCJzZXRzIiwicmVwcyIsIndlaWdodCIsInNjcmVlblRpbWUiLCJzZXRzTG9ncyIsIkFycmF5IiwiZnJvbSIsImxlbmd0aCIsInBhcnNlSW50IiwiZXhlcmNpc2VMb2dJZCIsImdlbmVyYXRlRXhlcmNpc2VMb2dJRCIsImN1cnJlbnRVc2VyIiwibG9nIiwid29ya291dElkIiwibG9ncyIsImZlZWRiYWNrIiwibm90ZSIsIm5vdGVzIiwiaXNTcGxpdCIsImxvZ1N1Ym1pdHRlZCIsImxvZ0lzRWRpdGluZyIsImlzQ29tcGxldGVkIiwib3JkZXIiLCJjb21wbGV0ZWRBdCIsInJvdW5kV29ya291dElkIiwiZXhlcmNpc2VzIiwidGl0bGUiLCJkdXJhdGlvbiIsImVzdGltYXRlZER1cmF0aW9uIiwid29ya291dFJhdGluZyIsInVzZUF1dGhvckNvbnRlbnQiLCJ3b3Jrb3V0U3RhdHVzIiwiem9uZSIsImRldGVybWluZVdvcmtvdXRab25lIiwid29ya291dCIsImZldGNoQ3VycmVudFdvcmtvdXQiLCJzZXNzaW9uIiwiZmV0Y2hDdXJyZW50V29ya291dFNlc3Npb24iLCJnZXRBbGxTd2VhdGxpc3RzIiwid29ya291dHNSZWYiLCJleGVyY2lzZXNXaXRoVmlkZW9zIiwid29ya291dHNTbmFwc2hvdCIsIndvcmtvdXRzIiwid29ya291dERvYyIsIndvcmtvdXREYXRhIiwibWFwcGVkRXhlcmNpc2VzIiwibG9nc1JlZiIsImxvZ3NTbmFwc2hvdCIsImVycm9yIiwiZmlyZXN0b3JlRXJyb3IiLCJFcnJvciIsImZldGNoQW5kTWFwRXhlcmNpc2VzV2l0aFZpZGVvcyIsImRvY3MiLCJkYXRhIiwibWFwIiwiZnVsbEV4ZXJjaXNlIiwiZmluZCIsImV4IiwiY29uc29sZSIsImNvbGxlY3Rpb25JZCIsImNoYWxsZW5nZSIsInN0YXJ0VGltZSIsInVuZGVmaW5lZCIsImxvZ0RvYyIsIm1lc3NhZ2UiLCJnZXRVc2VyQ2hhbGxlbmdlc0J5Q2hhbGxlbmdlSWQiLCJjaGFsbGVuZ2VJZCIsInVzZXJDaGFsbGVuZ2VzUmVmIiwicSIsInNuYXBzaG90IiwidXNlckNoYWxsZW5nZXMiLCJmZXRjaFdvcmtvdXRTdW1tYXJpZXMiLCJkYXRlIiwiZm9ybWF0dGVkRGF0ZSIsInN1bW1hcmllc1JlZiIsImZldGNoQWxsV29ya291dFN1bW1hcmllcyIsImZldGNoVXNlckNoYWxsZW5nZXNCeVVzZXJJZCIsInN1YnRpdGxlIiwicGFydGljaXBhbnRzIiwic3RhdHVzIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsImludHJvVmlkZW9zIiwidiIsInZpZGVvVXJsIiwiZmV0Y2hDb2xsZWN0aW9uV2l0aFN3ZWF0TGlzdHMiLCJzd2VhdExpc3RzIiwic3dlYXRsaXN0SWRlbnRpZmllciIsImdldENvbGxlY3Rpb25CeUlkIiwic3dlYXRsaXN0SWRzIiwiZmV0Y2hTYXZlZFdvcmtvdXQiLCJzd2VhdGxpc3RBdXRob3JJZCIsIndvcmtvdXRSZWYiLCJ3b3Jrb3V0U25hcCIsInBhdGgiLCJleGlzdHMiLCJmb3VuZE1hdGNoIiwiZXhlcmNpc2VDb3VudCIsInNpemUiLCJsb2dEYXRhIiwibG9nSWQiLCJleGVyY2lzZU5hbWUiLCJmb3VuZEV4ZXJjaXNlTWF0Y2giLCJyZWNvbW1lbmRlZFdlaWdodCIsImlzQm9keVdlaWdodCIsImxvZ3NDb3VudCIsImZldGNoVXNlckNoYWxsZW5nZXNCeUNoYWxsZW5nZUlkIiwiZG9jUmVmIiwiZG9jU25hcCIsImZldGNoQWN0aXZlQ2hhbGxlbmdlcyIsImFsbENoYWxsZW5nZXMiLCJhY3RpdmVDaGFsbGVuZ2VzIiwidXNlckNoYWxsZW5nZSIsImZldGNoVXNlckNoYWxsZW5nZXMiLCJ1cGRhdGVXb3Jrb3V0U3VtbWFyeSIsInN1bW1hcnkiLCJzdW1tYXJ5UmVmIiwic3VtbWFyeURhdGEiLCJib2R5UGFydHMiLCJ3b3Jrb3V0VGl0bGUiLCJjYWxvcmllc0J1cm5lZCIsImV4ZXJjaXNlc0NvbXBsZXRlZCIsImFpSW5zaWdodCIsInJlY29tbWVuZGF0aW9ucyIsImdpZlVSTHMiLCJyZWNvbW1lbmRlZFdvcmsiLCJtZXJnZSIsInVwZGF0ZVdvcmtvdXRMb2dzIiwiYmF0Y2giLCJsb2dEb2NSZWYiLCJ1cGRhdGUiLCJ0b0RpY3Rpb25hcnkiLCJjb21taXQiLCJjYW5jZWxXb3Jrb3V0Iiwid29ya291dFN1bW1hcnkiLCJkZWxldGVXb3Jrb3V0U2Vzc2lvbiIsImRlbGV0ZVdvcmtvdXRTdW1tYXJ5IiwiY2xlYW5VcFdvcmtvdXRJblByb2dyZXNzIiwiZGVsZXRlIiwicmVmIiwid29ya291dFN1bW1hcnlJZCIsImRpc3BhdGNoIiwiZXhlcmNpc2VTbmFwc2hvdCIsInZpZGVvU25hcHNob3QiLCJleGVyY2lzZVZpZGVvcyIsIndvcmtvdXRTZXNzaW9uc1JlZiIsInNuYXAiLCJmcm9tRmlyZWJhc2UiLCJtYXRjaGluZ1ZpZGVvcyIsInZpZGVvIiwidG9Mb3dlckNhc2UiLCJRdWV1ZWRVcCIsImVtcHR5IiwicHJvY2Vzc1dvcmtvdXRTZXNzaW9uRG9jdW1lbnQiLCJJblByb2dyZXNzIiwiZmV0Y2hBbGxXb3Jrb3V0U2Vzc2lvbnMiLCJzZXNzaW9ucyIsIlByb21pc2UiLCJhbGwiLCJzZXNzaW9uRGF0YSIsInNvcnQiLCJhIiwiYiIsIm9yZGVyQSIsIm9yZGVyQiIsInVwZGF0ZUNvbGxlY3Rpb24iLCJjb2xsUmVmIiwibmV3RG9jUmVmIiwidHJpbSIsImV4ZXJjaXNlTmFtZUxvd2VyIiwiQXJjaGl2ZWQiLCJGdWxsQm9keSIsInByZXBhcmVkTG9nRGF0YSIsInNhdmVXb3Jrb3V0U2Vzc2lvbiIsImN1cnJlbnREYXRlIiwiY2xlYW5Xb3Jrb3V0Iiwid29ya291dFNlc3Npb25SZWYiLCJsb2dCYXRjaCIsImdldFRpbWUiLCJzZXQiLCJqb2luQ2hhbGxlbmdlIiwidXNlcnNSZWYiLCJ1c2VyUXVlcnkiLCJ1c2VyU25hcHNob3QiLCJ1c2VyRG9jIiwidXNlckRhdGEiLCJjaGFsbGVuZ2VSZWYiLCJjaGFsbGVuZ2VTbmFwIiwidXNlckNoYWxsZW5nZUlkIiwidXNlckNoYWxsZW5nZURhdGEiLCJub3ciLCJmY21Ub2tlbiIsInByb2ZpbGVJbWFnZSIsInByb2dyZXNzIiwiY29tcGxldGVkV29ya291dHMiLCJ1aWQiLCJsb2NhdGlvbiIsImNpdHkiLCJjb3VudHJ5IiwidGltZXpvbmUiLCJqb2luRGF0ZSIsInB1bHNlUG9pbnRzIiwiYmFzZUNvbXBsZXRpb24iLCJmaXJzdENvbXBsZXRpb24iLCJzdHJlYWtCb251cyIsImNoZWNrSW5Cb251cyIsImVmZm9ydFJhdGluZyIsImNoYXRQYXJ0aWNpcGF0aW9uIiwibG9jYXRpb25DaGVja2luIiwiY29udGVudEVuZ2FnZW1lbnQiLCJlbmNvdXJhZ2VtZW50U2VudCIsImVuY291cmFnZW1lbnRSZWNlaXZlZCIsImN1cnJlbnRTdHJlYWsiLCJlbmNvdXJhZ2VkVXNlcnMiLCJlbmNvdXJhZ2VkQnlVc2VycyIsImNoZWNrSW5zIiwiY3VycmVudFdvcmtvdXQiLCJnZXRTdGF0ZSIsImN1cnJlbnRXb3Jrb3V0TG9ncyIsImN1cnJlbnRFeGVyY2lzZUxvZ3MiLCJjdXJyZW50V29ya291dFN1bW1hcnkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/api/firebase/workout/service.ts\n"));

/***/ })

});
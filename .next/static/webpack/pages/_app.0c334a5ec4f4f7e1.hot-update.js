"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/_app",{

/***/ "./src/api/firebase/exercise/service.ts":
/*!**********************************************!*\
  !*** ./src/api/firebase/exercise/service.ts ***!
  \**********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   exerciseService: function() { return /* binding */ exerciseService; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @swc/helpers/_/_async_to_generator */ \"./node_modules/@swc/helpers/esm/_async_to_generator.js\");\n/* harmony import */ var _swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @swc/helpers/_/_class_call_check */ \"./node_modules/@swc/helpers/esm/_class_call_check.js\");\n/* harmony import */ var _swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @swc/helpers/_/_create_class */ \"./node_modules/@swc/helpers/esm/_create_class.js\");\n/* harmony import */ var _swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @swc/helpers/_/_object_spread */ \"./node_modules/@swc/helpers/esm/_object_spread.js\");\n/* harmony import */ var _swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @swc/helpers/_/_object_spread_props */ \"./node_modules/@swc/helpers/esm/_object_spread_props.js\");\n/* harmony import */ var _swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @swc/helpers/_/_ts_generator */ \"./node_modules/@swc/helpers/esm/_ts_generator.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/api/firebase/config.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../firebase/exercise/types */ \"./src/api/firebase/exercise/types.ts\");\n/* harmony import */ var _utils_formatDate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/formatDate */ \"./src/utils/formatDate.ts\");\n\n\n\n\n\n\n\n\n\n\n\nvar ExerciseService = /*#__PURE__*/ function() {\n    \"use strict\";\n    function ExerciseService() {\n        (0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_4__._)(this, ExerciseService);\n        this._allExercises = [];\n    }\n    var _proto = ExerciseService.prototype;\n    _proto.fetchExercises = function fetchExercises() {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_5__._)(function() {\n            var exerciseSnapshot, exercises, videoSnapshot, exerciseVideos, mappedExercises, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_6__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        exerciseSnapshot.docs.forEach(function(doc) {\n                            console.log(\"Raw exercise data from DB:\", JSON.stringify({\n                                name: doc.data().name,\n                                category: doc.data().category\n                            }, null, 2));\n                        });\n                        // // Log the raw data and what we're passing to the constructor\n                        // exerciseSnapshot.docs.forEach(doc => {\n                        //   const rawData = doc.data();\n                        //   console.log('Data being passed to Exercise constructor:', JSON.stringify({\n                        //     name: rawData.name,\n                        //     rawCategory: rawData.category,\n                        //     rawType: rawData.category?.type,\n                        //     fullData: rawData\n                        //   }, null, 2));\n                        // });\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        // Map videos to their corresponding exercises by name\n                        mappedExercises = exercises.map(function(exercise) {\n                            var videosForExercise = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            }).map(function(video) {\n                                return new _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo(video);\n                            }); // Ensure proper ExerciseVideo instances\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_8__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({}, exercise), {\n                                videos: videosForExercise\n                            }));\n                        });\n                        // Filter out exercises without videos\n                        _this._allExercises = mappedExercises.filter(function(exercise) {\n                            return exercise.videos.length > 0;\n                        });\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching exercises:\", error);\n                        throw new Error(\"Failed to fetch exercises.\");\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchFeaturedExercisesWithVideos = function fetchFeaturedExercisesWithVideos() {\n        var limit = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 24;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_5__._)(function() {\n            var exerciseSnapshot, exercises, videoSnapshot, exerciseVideos, mappedExercises, shuffledExercises, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_6__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        // Map videos to exercises and filter for those with GIFs\n                        mappedExercises = exercises.map(function(exerciseData) {\n                            // Ensure that each video is properly instantiated as an `ExerciseVideo`\n                            var videosForExercise = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exerciseData.name.toLowerCase();\n                            }).map(function(video) {\n                                return new _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo(video);\n                            });\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise({\n                                id: exerciseData.id,\n                                name: exerciseData.name,\n                                description: exerciseData.description,\n                                category: exerciseData.category,\n                                primaryBodyParts: exerciseData.primaryBodyParts || [],\n                                secondaryBodyParts: exerciseData.secondaryBodyParts || [],\n                                tags: exerciseData.tags || [],\n                                videos: videosForExercise,\n                                steps: exerciseData.steps || [],\n                                visibility: exerciseData.visibility || \"live\",\n                                currentVideoPosition: exerciseData.currentVideoPosition || 0,\n                                sets: exerciseData.sets || 0,\n                                reps: exerciseData.reps || \"\",\n                                weight: exerciseData.weight || 0,\n                                author: new _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseAuthor(exerciseData.author || {}),\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_3__.convertFirestoreTimestamp)(exerciseData.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_3__.convertFirestoreTimestamp)(exerciseData.updatedAt)\n                            });\n                        });\n                        // Shuffle and limit results\n                        shuffledExercises = mappedExercises.sort(function() {\n                            return Math.random() - 0.5;\n                        }).slice(0, limit);\n                        return [\n                            2,\n                            shuffledExercises\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching featured exercises:\", error);\n                        return [\n                            2,\n                            []\n                        ];\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getExercisesByAuthor = function getExercisesByAuthor(userId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_5__._)(function() {\n            var videosRef, q, querySnapshot, uniqueExerciseNames, exercises, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_6__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        // Query exerciseVideos collection instead\n                        videosRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(videosRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", userId));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 1:\n                        querySnapshot = _state.sent();\n                        // Create a Set to store unique exercise names\n                        uniqueExerciseNames = new Set();\n                        // Collect all unique exercise names from the videos\n                        querySnapshot.forEach(function(doc) {\n                            var videoData = doc.data();\n                            if (videoData.exerciseName) {\n                                uniqueExerciseNames.add(videoData.exerciseName);\n                            }\n                        });\n                        // Convert to array and create Exercise objects\n                        exercises = Array.from(uniqueExerciseNames).map(function(name) {\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise({\n                                id: name,\n                                name: name,\n                                author: {\n                                    userId: userId\n                                }\n                            });\n                        });\n                        return [\n                            2,\n                            exercises\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error fetching exercises by author:\", error);\n                        return [\n                            2,\n                            []\n                        ];\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchPaginatedExercises = function fetchPaginatedExercises() {\n        var lastDoc = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : null, pageSize = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 15;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_5__._)(function() {\n            var exerciseQuery, exerciseSnapshot, videoSnapshot, exerciseVideos, exercises, mappedExercises, filteredExercises, lastVisible, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_6__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            ,\n                            4\n                        ]);\n                        // Query for exercises with pagination\n                        exerciseQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(pageSize));\n                        if (lastDoc) {\n                            exerciseQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(exerciseQuery, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.startAfter)(lastDoc));\n                        }\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(exerciseQuery)\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        if (exerciseSnapshot.empty) {\n                            return [\n                                2,\n                                {\n                                    exercises: [],\n                                    lastVisible: null\n                                }\n                            ];\n                        }\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        // Map videos to exercises and ensure correct instantiation\n                        mappedExercises = exercises.map(function(exerciseData) {\n                            var videosForExercise = exerciseVideos.filter(function(video) {\n                                return video.exerciseId === exerciseData.id;\n                            });\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_8__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({}, exerciseData), {\n                                videos: videosForExercise\n                            }));\n                        });\n                        // Filter exercises with videos\n                        filteredExercises = mappedExercises.filter(function(exercise) {\n                            return exercise.videos.length > 0;\n                        });\n                        // Update the last visible document for pagination\n                        lastVisible = exerciseSnapshot.docs.length > 0 ? exerciseSnapshot.docs[exerciseSnapshot.docs.length - 1] : null;\n                        return [\n                            2,\n                            {\n                                exercises: filteredExercises,\n                                lastVisible: lastVisible\n                            }\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching paginated exercises:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.generateExerciseLogID = function generateExerciseLogID(workoutId, userId) {\n        // Create a document reference in the logs subcollection of the workout,\n        // then return its generated ID.\n        return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\", workoutId, \"logs\")).id;\n    };\n    (0,_swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_9__._)(ExerciseService, [\n        {\n            key: \"allExercises\",\n            get: function get() {\n                return this._allExercises;\n            }\n        }\n    ]);\n    return ExerciseService;\n}();\nvar exerciseService = new ExerciseService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL2ZpcmViYXNlL2V4ZXJjaXNlL3NlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFVOEI7QUFDQztBQUNJO0FBQzJDO0FBQ1I7QUFFdEUsb0NBQUs7O2FBQUNhOytFQUFBQTthQUNNQyxnQkFBNEIsRUFBRTs7aUJBRHBDRDtJQU9GLE9BQU1FLGNBaUVMLEdBakVELFNBQU1BOztlQUFOO2dCQUdVQyxrQkFvQkFDLFdBTUFDLGVBQ0FDLGdCQVFBQyxpQkF1QkNDOzs7Ozs7Ozs7O3dCQTFEa0I7OzRCQUFNcEIsMkRBQU9BLENBQUNELDhEQUFVQSxDQUFDUSx1Q0FBRUEsRUFBRTs7O3dCQUFoRFEsbUJBQW1CO3dCQUV6QkEsaUJBQWlCTSxJQUFJLENBQUNDLE9BQU8sQ0FBQ2pCLFNBQUFBOzRCQUM1QmtCLFFBQVFDLEdBQUcsQ0FBQyw4QkFBOEJDLEtBQUtDLFNBQVMsQ0FBQztnQ0FDdkRDLE1BQU10QixJQUFJdUIsSUFBSSxHQUFHRCxJQUFJO2dDQUNyQkUsVUFBVXhCLElBQUl1QixJQUFJLEdBQUdDLFFBQVE7NEJBQy9CLEdBQUcsTUFBTTt3QkFDWDt3QkFFQSxnRUFBZ0U7d0JBQ2hFLHlDQUF5Qzt3QkFDekMsZ0NBQWdDO3dCQUNoQywrRUFBK0U7d0JBQy9FLDBCQUEwQjt3QkFDMUIscUNBQXFDO3dCQUNyQyx1Q0FBdUM7d0JBQ3ZDLHdCQUF3Qjt3QkFDeEIsa0JBQWtCO3dCQUNsQixNQUFNO3dCQUVBYixZQUF3QkQsaUJBQWlCTSxJQUFJLENBQUNTLEdBQUcsQ0FBQyxTQUFDekI7bUNBQVEsSUFBSUcsNENBQVFBLENBQUM7Z0NBQzVFdUIsSUFBSTFCLElBQUkwQixFQUFFOytCQUNQMUIsSUFBSXVCLElBQUk7O3dCQUlTOzs0QkFBTTVCLDJEQUFPQSxDQUFDRCw4REFBVUEsQ0FBQ1EsdUNBQUVBLEVBQUU7Ozt3QkFBN0NVLGdCQUFnQjt3QkFDaEJDLGlCQUFrQ0QsY0FBY0ksSUFBSSxDQUFDUyxHQUFHLENBQUMsU0FB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QmYsZUFBZWdCLE1BQU0sQ0FBQyxTQUFDQzt1Q0FBVUEsTUFBTTRDLFVBQVUsS0FBS3JDLGFBQWFYLEVBQUU7OzRCQUUvRixPQUFPLElBQUl2Qiw0Q0FBUUEsQ0FBQyxzSUFDZmtDO2dDQUNITCxRQUFRSjs7d0JBRVo7d0JBRUEsK0JBQStCO3dCQUN6QjJDLG9CQUFnQ3pELGdCQUFnQmUsTUFBTSxDQUFDLFNBQUNGO21DQUFhQSxTQUFTSyxNQUFNLENBQUNDLE1BQU0sR0FBRzs7d0JBRXBHLGtEQUFrRDt3QkFDNUN1QyxjQUFjOUQsaUJBQWlCTSxJQUFJLENBQUNpQixNQUFNLEdBQUcsSUFBSXZCLGlCQUFpQk0sSUFBSSxDQUFDTixpQkFBaUJNLElBQUksQ0FBQ2lCLE1BQU0sR0FBRyxFQUFFLEdBQUc7d0JBRWpIOzs0QkFBTztnQ0FBRXRCLFdBQVc0RDtnQ0FBbUJDLGFBQUFBOzRCQUFZOzs7d0JBRTVDekQ7d0JBQ1BHLFFBQVFILEtBQUssQ0FBQyx1Q0FBdUNBO3dCQUNyRCxNQUFNQTs7Ozs7OztRQUVWOztJQUVBNEQsT0FBQUEscUJBTUMsR0FOREEsU0FBQUEsc0JBQXNCQyxTQUFpQixFQUFFcEIsTUFBYztRQUNyRCx3RUFBd0U7UUFDeEUsZ0NBQWdDO1FBQ2hDLE9BQU94RCx1REFBR0EsQ0FDUk4sOERBQVVBLENBQUNRLHVDQUFFQSxFQUFFLFNBQVNzRCxRQUFRLHFCQUFxQm9CLFdBQVcsU0FDaEVsRCxFQUFFO0lBQ047aUVBNU9BbkI7O1lBR0VzRSxLQUFBQTtpQkFBSjtnQkFDRSxPQUFPLElBQUksQ0FBQ3JFLGFBQWE7WUFDM0I7OztXQUxFRDs7QUErT0csSUFBTXVFLGtCQUFrQixJQUFJdkUsa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9hcGkvZmlyZWJhc2UvZXhlcmNpc2Uvc2VydmljZS50cz9hODMxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgY29sbGVjdGlvbixcbiAgICBnZXREb2NzLFxuICAgIHF1ZXJ5LFxuICAgIG9yZGVyQnksXG4gICAgbGltaXQsXG4gICAgc3RhcnRBZnRlcixcbiAgICBEb2N1bWVudFNuYXBzaG90LFxuICAgIGRvYyxcbiAgICB3aGVyZSxcbiAgfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi9jb25maWcnO1xuaW1wb3J0IHsgRXhlcmNpc2UgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IEV4ZXJjaXNlVmlkZW8sIEV4ZXJjaXNlQXV0aG9yIH0gZnJvbSAnLi4vLi4vZmlyZWJhc2UvZXhlcmNpc2UvdHlwZXMnO1xuaW1wb3J0IHsgY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL2Zvcm1hdERhdGUnO1xuXG5jbGFzcyBFeGVyY2lzZVNlcnZpY2Uge1xuICAgIHByaXZhdGUgX2FsbEV4ZXJjaXNlczogRXhlcmNpc2VbXSA9IFtdO1xuICBcbiAgICBnZXQgYWxsRXhlcmNpc2VzKCk6IEV4ZXJjaXNlW10ge1xuICAgICAgcmV0dXJuIHRoaXMuX2FsbEV4ZXJjaXNlcztcbiAgICB9XG4gIFxuICAgIGFzeW5jIGZldGNoRXhlcmNpc2VzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gRmV0Y2ggYWxsIGV4ZXJjaXNlc1xuICAgICAgICBjb25zdCBleGVyY2lzZVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VzJykpO1xuICAgICAgICBcbiAgICAgICAgZXhlcmNpc2VTbmFwc2hvdC5kb2NzLmZvckVhY2goZG9jID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnUmF3IGV4ZXJjaXNlIGRhdGEgZnJvbSBEQjonLCBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBuYW1lOiBkb2MuZGF0YSgpLm5hbWUsXG4gICAgICAgICAgICBjYXRlZ29yeTogZG9jLmRhdGEoKS5jYXRlZ29yeVxuICAgICAgICAgIH0sIG51bGwsIDIpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gLy8gTG9nIHRoZSByYXcgZGF0YSBhbmQgd2hhdCB3ZSdyZSBwYXNzaW5nIHRvIHRoZSBjb25zdHJ1Y3RvclxuICAgICAgICAvLyBleGVyY2lzZVNuYXBzaG90LmRvY3MuZm9yRWFjaChkb2MgPT4ge1xuICAgICAgICAvLyAgIGNvbnN0IHJhd0RhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgICAvLyAgIGNvbnNvbGUubG9nKCdEYXRhIGJlaW5nIHBhc3NlZCB0byBFeGVyY2lzZSBjb25zdHJ1Y3RvcjonLCBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIC8vICAgICBuYW1lOiByYXdEYXRhLm5hbWUsXG4gICAgICAgIC8vICAgICByYXdDYXRlZ29yeTogcmF3RGF0YS5jYXRlZ29yeSxcbiAgICAgICAgLy8gICAgIHJhd1R5cGU6IHJhd0RhdGEuY2F0ZWdvcnk/LnR5cGUsXG4gICAgICAgIC8vICAgICBmdWxsRGF0YTogcmF3RGF0YVxuICAgICAgICAvLyAgIH0sIG51bGwsIDIpKTtcbiAgICAgICAgLy8gfSk7XG5cbiAgICAgICAgY29uc3QgZXhlcmNpc2VzOiBFeGVyY2lzZVtdID0gZXhlcmNpc2VTbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PiBuZXcgRXhlcmNpc2Uoe1xuICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgLi4uZG9jLmRhdGEoKSxcbiAgICAgICAgfSkpO1xuICAgIFxuICAgICAgICAvLyBGZXRjaCBhbGwgdmlkZW9zXG4gICAgICAgIGNvbnN0IHZpZGVvU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZVZpZGVvcycpKTtcbiAgICAgICAgY29uc3QgZXhlcmNpc2VWaWRlb3M6IEV4ZXJjaXNlVmlkZW9bXSA9IHZpZGVvU25hcHNob3QuZG9jcy5tYXAoKGRvYykgPT5cbiAgICAgICAgICBuZXcgRXhlcmNpc2VWaWRlbyh7XG4gICAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgICAgLi4uZG9jLmRhdGEoKSxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIFxuICAgICAgICAvLyBNYXAgdmlkZW9zIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgZXhlcmNpc2VzIGJ5IG5hbWVcbiAgICAgICAgY29uc3QgbWFwcGVkRXhlcmNpc2VzID0gZXhlcmNpc2VzLm1hcCgoZXhlcmNpc2UpID0+IHtcbiAgICAgICAgICBjb25zdCB2aWRlb3NGb3JFeGVyY2lzZSA9IGV4ZXJjaXNlVmlkZW9zXG4gICAgICAgICAgICAuZmlsdGVyKCh2aWRlbykgPT4gdmlkZW8uZXhlcmNpc2UudG9Mb3dlckNhc2UoKSA9PT0gZXhlcmNpc2UubmFtZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgICAgLm1hcCgodmlkZW8pID0+IG5ldyBFeGVyY2lzZVZpZGVvKHZpZGVvKSk7IC8vIEVuc3VyZSBwcm9wZXIgRXhlcmNpc2VWaWRlbyBpbnN0YW5jZXNcbiAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gbmV3IEV4ZXJjaXNlKHtcbiAgICAgICAgICAgIC4uLmV4ZXJjaXNlLCAvLyBLZWVwIGV4aXN0aW5nIHByb3BlcnRpZXNcbiAgICAgICAgICAgIHZpZGVvczogdmlkZW9zRm9yRXhlcmNpc2UsIC8vIEVuc3VyZSB2aWRlb3MgYXJlIGluc3RhbmNlcyBvZiBFeGVyY2lzZVZpZGVvXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICAvLyBGaWx0ZXIgb3V0IGV4ZXJjaXNlcyB3aXRob3V0IHZpZGVvc1xuICAgICAgICB0aGlzLl9hbGxFeGVyY2lzZXMgPSBtYXBwZWRFeGVyY2lzZXMuZmlsdGVyKChleGVyY2lzZTogRXhlcmNpc2UpID0+IGV4ZXJjaXNlLnZpZGVvcy5sZW5ndGggPiAwKTtcbiAgICBcbiAgICAgICAgLy8gY29uc29sZS5sb2coYEZldGNoZWQgJHt0aGlzLl9hbGxFeGVyY2lzZXMubGVuZ3RofSBleGVyY2lzZXMgd2l0aCB2aWRlb3MuYCk7XG4gICAgICAgIFxuICAgICAgICAvLyBEZXRhaWxlZCBsb2dnaW5nIGZvciBkZWJ1Z2dpbmdcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ1NhbXBsZSBleGVyY2lzZXM6JywgdGhpcy5fYWxsRXhlcmNpc2VzLnNsaWNlKDAsIDUpLm1hcChleCA9PiAoe1xuICAgICAgICAvLyAgIG5hbWU6IGV4Lm5hbWUsXG4gICAgICAgIC8vICAgdmlkZW9Db3VudDogZXgudmlkZW9zLmxlbmd0aCxcbiAgICAgICAgLy8gICBmaXJzdFZpZGVvVXJsOiBleC52aWRlb3NbMF0/LnZpZGVvVVJMXG4gICAgICAgIC8vIH0pKSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBleGVyY2lzZXM6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBleGVyY2lzZXMuJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZmV0Y2hGZWF0dXJlZEV4ZXJjaXNlc1dpdGhWaWRlb3MobGltaXQ6IG51bWJlciA9IDI0KTogUHJvbWlzZTxFeGVyY2lzZVtdPiB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBGZXRjaCBhbGwgZXhlcmNpc2VzXG4gICAgICAgIGNvbnN0IGV4ZXJjaXNlU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZXMnKSk7XG4gICAgICAgIGNvbnN0IGV4ZXJjaXNlczogRXhlcmNpc2VbXSA9IGV4ZXJjaXNlU25hcHNob3QuZG9jcy5tYXAoKGRvYykgPT4gXG4gICAgICAgICBuZXcgRXhlcmNpc2Uoe1xuICAgICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgIC4uLmRvYy5kYXRhKCksXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICBcbiAgICAgICAgLy8gRmV0Y2ggYWxsIHZpZGVvc1xuICAgICAgICBjb25zdCB2aWRlb1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VWaWRlb3MnKSk7XG4gICAgICAgIGNvbnN0IGV4ZXJjaXNlVmlkZW9zOiBFeGVyY2lzZVZpZGVvW10gPSB2aWRlb1NuYXBzaG90LmRvY3MubWFwKChkb2MpID0+XG4gICAgICAgICAgbmV3IEV4ZXJjaXNlVmlkZW8oe1xuICAgICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgIC4uLmRvYy5kYXRhKCksXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICBcbiAgICAgICAgLy8gTWFwIHZpZGVvcyB0byBleGVyY2lzZXMgYW5kIGZpbHRlciBmb3IgdGhvc2Ugd2l0aCBHSUZzXG4gICAgICAgIGNvbnN0IG1hcHBlZEV4ZXJjaXNlcyA9IGV4ZXJjaXNlcy5tYXAoKGV4ZXJjaXNlRGF0YSkgPT4ge1xuICAgICAgICAgIC8vIEVuc3VyZSB0aGF0IGVhY2ggdmlkZW8gaXMgcHJvcGVybHkgaW5zdGFudGlhdGVkIGFzIGFuIGBFeGVyY2lzZVZpZGVvYFxuICAgICAgICAgIGNvbnN0IHZpZGVvc0ZvckV4ZXJjaXNlID0gKGV4ZXJjaXNlVmlkZW9zXG4gICAgICAgICAgICAuZmlsdGVyKCh2aWRlbykgPT4gdmlkZW8uZXhlcmNpc2UudG9Mb3dlckNhc2UoKSA9PT0gZXhlcmNpc2VEYXRhLm5hbWUudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgICAgIC5tYXAoKHZpZGVvKSA9PiBuZXcgRXhlcmNpc2VWaWRlbyh2aWRlbykpKSBhcyBFeGVyY2lzZVZpZGVvW107XG4gICAgICAgIFxuXG4gICAgICAgICAgcmV0dXJuIG5ldyBFeGVyY2lzZSh7XG4gICAgICAgICAgICBpZDogZXhlcmNpc2VEYXRhLmlkLFxuICAgICAgICAgICAgbmFtZTogZXhlcmNpc2VEYXRhLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZXhlcmNpc2VEYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IGV4ZXJjaXNlRGF0YS5jYXRlZ29yeSxcbiAgICAgICAgICAgIHByaW1hcnlCb2R5UGFydHM6IGV4ZXJjaXNlRGF0YS5wcmltYXJ5Qm9keVBhcnRzIHx8IFtdLFxuICAgICAgICAgICAgc2Vjb25kYXJ5Qm9keVBhcnRzOiBleGVyY2lzZURhdGEuc2Vjb25kYXJ5Qm9keVBhcnRzIHx8IFtdLFxuICAgICAgICAgICAgdGFnczogZXhlcmNpc2VEYXRhLnRhZ3MgfHwgW10sXG4gICAgICAgICAgICB2aWRlb3M6IHZpZGVvc0ZvckV4ZXJjaXNlLCAvLyBBdHRhY2ggcHJvcGVybHkgbWFwcGVkIHZpZGVvc1xuICAgICAgICAgICAgc3RlcHM6IGV4ZXJjaXNlRGF0YS5zdGVwcyB8fCBbXSxcbiAgICAgICAgICAgIHZpc2liaWxpdHk6IGV4ZXJjaXNlRGF0YS52aXNpYmlsaXR5IHx8ICdsaXZlJyxcbiAgICAgICAgICAgIGN1cnJlbnRWaWRlb1Bvc2l0aW9uOiBleGVyY2lzZURhdGEuY3VycmVudFZpZGVvUG9zaXRpb24gfHwgMCxcbiAgICAgICAgICAgIHNldHM6IGV4ZXJjaXNlRGF0YS5zZXRzIHx8IDAsXG4gICAgICAgICAgICByZXBzOiBleGVyY2lzZURhdGEucmVwcyB8fCAnJyxcbiAgICAgICAgICAgIHdlaWdodDogZXhlcmNpc2VEYXRhLndlaWdodCB8fCAwLFxuICAgICAgICAgICAgYXV0aG9yOiBuZXcgRXhlcmNpc2VBdXRob3IoZXhlcmNpc2VEYXRhLmF1dGhvciB8fCB7fSksXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZXhlcmNpc2VEYXRhLmNyZWF0ZWRBdCksXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZXhlcmNpc2VEYXRhLnVwZGF0ZWRBdCksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICBcbiAgICAgICAgLy8gU2h1ZmZsZSBhbmQgbGltaXQgcmVzdWx0c1xuICAgICAgICBjb25zdCBzaHVmZmxlZEV4ZXJjaXNlcyA9IG1hcHBlZEV4ZXJjaXNlc1xuICAgICAgICAgIC5zb3J0KCgpID0+IE1hdGgucmFuZG9tKCkgLSAwLjUpXG4gICAgICAgICAgLnNsaWNlKDAsIGxpbWl0KTtcbiAgICBcbiAgICAgICAgcmV0dXJuIHNodWZmbGVkRXhlcmNpc2VzO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgZmVhdHVyZWQgZXhlcmNpc2VzOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldEV4ZXJjaXNlc0J5QXV0aG9yKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxFeGVyY2lzZVtdPiB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBRdWVyeSBleGVyY2lzZVZpZGVvcyBjb2xsZWN0aW9uIGluc3RlYWRcbiAgICAgICAgY29uc3QgdmlkZW9zUmVmID0gY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlVmlkZW9zJyk7XG4gICAgICAgIGNvbnN0IHEgPSBxdWVyeSh2aWRlb3NSZWYsIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpKTtcbiAgICAgICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgYSBTZXQgdG8gc3RvcmUgdW5pcXVlIGV4ZXJjaXNlIG5hbWVzXG4gICAgICAgIGNvbnN0IHVuaXF1ZUV4ZXJjaXNlTmFtZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbGxlY3QgYWxsIHVuaXF1ZSBleGVyY2lzZSBuYW1lcyBmcm9tIHRoZSB2aWRlb3NcbiAgICAgICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKChkb2MpID0+IHtcbiAgICAgICAgICBjb25zdCB2aWRlb0RhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgICAgIGlmICh2aWRlb0RhdGEuZXhlcmNpc2VOYW1lKSB7XG4gICAgICAgICAgICB1bmlxdWVFeGVyY2lzZU5hbWVzLmFkZCh2aWRlb0RhdGEuZXhlcmNpc2VOYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICBcbiAgICAgICAgLy8gQ29udmVydCB0byBhcnJheSBhbmQgY3JlYXRlIEV4ZXJjaXNlIG9iamVjdHNcbiAgICAgICAgY29uc3QgZXhlcmNpc2VzID0gQXJyYXkuZnJvbSh1bmlxdWVFeGVyY2lzZU5hbWVzKS5tYXAobmFtZSA9PiB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBFeGVyY2lzZSh7XG4gICAgICAgICAgICBpZDogbmFtZSwgLy8gVXNpbmcgbmFtZSBhcyBJRCBzaW5jZSB3ZSBqdXN0IG5lZWQgdW5pcXVlIGlkZW50aWZpZXJzXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgYXV0aG9yOiB7IHVzZXJJZDogdXNlcklkIH1cbiAgICAgICAgICAgIC8vIEFkZCBvdGhlciByZXF1aXJlZCBFeGVyY2lzZSBwcm9wZXJ0aWVzIGFzIG5lZWRlZFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBleGVyY2lzZXM7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBleGVyY2lzZXMgYnkgYXV0aG9yOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGZldGNoUGFnaW5hdGVkRXhlcmNpc2VzKFxuICAgICAgICBsYXN0RG9jOiBEb2N1bWVudFNuYXBzaG90IHwgbnVsbCA9IG51bGwsXG4gICAgICAgIHBhZ2VTaXplOiBudW1iZXIgPSAxNVxuICAgICAgKTogUHJvbWlzZTx7IGV4ZXJjaXNlczogRXhlcmNpc2VbXTsgbGFzdFZpc2libGU6IERvY3VtZW50U25hcHNob3QgfCBudWxsIH0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBRdWVyeSBmb3IgZXhlcmNpc2VzIHdpdGggcGFnaW5hdGlvblxuICAgICAgICAgIGxldCBleGVyY2lzZVF1ZXJ5ID0gcXVlcnkoXG4gICAgICAgICAgICBjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VzJyksXG4gICAgICAgICAgICBvcmRlckJ5KCdjcmVhdGVkQXQnLCAnZGVzYycpLFxuICAgICAgICAgICAgbGltaXQocGFnZVNpemUpXG4gICAgICAgICAgKTtcbiAgICBcbiAgICAgICAgICBpZiAobGFzdERvYykge1xuICAgICAgICAgICAgZXhlcmNpc2VRdWVyeSA9IHF1ZXJ5KGV4ZXJjaXNlUXVlcnksIHN0YXJ0QWZ0ZXIobGFzdERvYykpO1xuICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICBjb25zdCBleGVyY2lzZVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhleGVyY2lzZVF1ZXJ5KTtcbiAgICBcbiAgICAgICAgICBpZiAoZXhlcmNpc2VTbmFwc2hvdC5lbXB0eSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgZXhlcmNpc2VzOiBbXSwgbGFzdFZpc2libGU6IG51bGwgfTtcbiAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgLy8gRmV0Y2ggZXhlcmNpc2UgdmlkZW9zIHNlcGFyYXRlbHlcbiAgICAgICAgICBjb25zdCB2aWRlb1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VWaWRlb3MnKSk7XG4gICAgICAgICAgY29uc3QgZXhlcmNpc2VWaWRlb3M6IEV4ZXJjaXNlVmlkZW9bXSA9IHZpZGVvU25hcHNob3QuZG9jcy5tYXAoKGRvYykgPT5cbiAgICAgICAgICAgIG5ldyBFeGVyY2lzZVZpZGVvKHtcbiAgICAgICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgICAgLi4uZG9jLmRhdGEoKSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBleGVyY2lzZXM6IEV4ZXJjaXNlW10gPSBleGVyY2lzZVNuYXBzaG90LmRvY3MubWFwKChkb2MpID0+XG4gICAgICAgICAgICBuZXcgRXhlcmNpc2UoeyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH0pXG4gICAgICAgICAgKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBNYXAgdmlkZW9zIHRvIGV4ZXJjaXNlcyBhbmQgZW5zdXJlIGNvcnJlY3QgaW5zdGFudGlhdGlvblxuICAgICAgICAgIGNvbnN0IG1hcHBlZEV4ZXJjaXNlczogRXhlcmNpc2VbXSA9IGV4ZXJjaXNlcy5tYXAoKGV4ZXJjaXNlRGF0YSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmlkZW9zRm9yRXhlcmNpc2UgPSBleGVyY2lzZVZpZGVvcy5maWx0ZXIoKHZpZGVvKSA9PiB2aWRlby5leGVyY2lzZUlkID09PSBleGVyY2lzZURhdGEuaWQpO1xuICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIG5ldyBFeGVyY2lzZSh7XG4gICAgICAgICAgICAgIC4uLmV4ZXJjaXNlRGF0YSwgLy8gQ29weSBleGlzdGluZyBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgIHZpZGVvczogdmlkZW9zRm9yRXhlcmNpc2UsIC8vIEFzc2lnbiBmaWx0ZXJlZCB2aWRlb3NcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEZpbHRlciBleGVyY2lzZXMgd2l0aCB2aWRlb3NcbiAgICAgICAgICBjb25zdCBmaWx0ZXJlZEV4ZXJjaXNlczogRXhlcmNpc2VbXSA9IG1hcHBlZEV4ZXJjaXNlcy5maWx0ZXIoKGV4ZXJjaXNlKSA9PiBleGVyY2lzZS52aWRlb3MubGVuZ3RoID4gMCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSBsYXN0IHZpc2libGUgZG9jdW1lbnQgZm9yIHBhZ2luYXRpb25cbiAgICAgICAgICBjb25zdCBsYXN0VmlzaWJsZSA9IGV4ZXJjaXNlU25hcHNob3QuZG9jcy5sZW5ndGggPiAwID8gZXhlcmNpc2VTbmFwc2hvdC5kb2NzW2V4ZXJjaXNlU25hcHNob3QuZG9jcy5sZW5ndGggLSAxXSA6IG51bGw7XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIHsgZXhlcmNpc2VzOiBmaWx0ZXJlZEV4ZXJjaXNlcywgbGFzdFZpc2libGUgfTtcbiAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwYWdpbmF0ZWQgZXhlcmNpc2VzOicsIGVycm9yKTtcbiAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBnZW5lcmF0ZUV4ZXJjaXNlTG9nSUQod29ya291dElkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgZG9jdW1lbnQgcmVmZXJlbmNlIGluIHRoZSBsb2dzIHN1YmNvbGxlY3Rpb24gb2YgdGhlIHdvcmtvdXQsXG4gICAgICAgIC8vIHRoZW4gcmV0dXJuIGl0cyBnZW5lcmF0ZWQgSUQuXG4gICAgICAgIHJldHVybiBkb2MoXG4gICAgICAgICAgY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgdXNlcklkLCAnTXlDcmVhdGVkV29ya291dHMnLCB3b3Jrb3V0SWQsICdsb2dzJylcbiAgICAgICAgKS5pZDtcbiAgICAgIH1cbiAgfVxuICBcbiAgZXhwb3J0IGNvbnN0IGV4ZXJjaXNlU2VydmljZSA9IG5ldyBFeGVyY2lzZVNlcnZpY2UoKTsiXSwibmFtZXMiOlsiY29sbGVjdGlvbiIsImdldERvY3MiLCJxdWVyeSIsIm9yZGVyQnkiLCJsaW1pdCIsInN0YXJ0QWZ0ZXIiLCJkb2MiLCJ3aGVyZSIsImRiIiwiRXhlcmNpc2UiLCJFeGVyY2lzZVZpZGVvIiwiRXhlcmNpc2VBdXRob3IiLCJjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wIiwiRXhlcmNpc2VTZXJ2aWNlIiwiX2FsbEV4ZXJjaXNlcyIsImZldGNoRXhlcmNpc2VzIiwiZXhlcmNpc2VTbmFwc2hvdCIsImV4ZXJjaXNlcyIsInZpZGVvU25hcHNob3QiLCJleGVyY2lzZVZpZGVvcyIsIm1hcHBlZEV4ZXJjaXNlcyIsImVycm9yIiwiZG9jcyIsImZvckVhY2giLCJjb25zb2xlIiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsIm5hbWUiLCJkYXRhIiwiY2F0ZWdvcnkiLCJtYXAiLCJpZCIsImV4ZXJjaXNlIiwidmlkZW9zRm9yRXhlcmNpc2UiLCJmaWx0ZXIiLCJ2aWRlbyIsInRvTG93ZXJDYXNlIiwidmlkZW9zIiwibGVuZ3RoIiwiRXJyb3IiLCJmZXRjaEZlYXR1cmVkRXhlcmNpc2VzV2l0aFZpZGVvcyIsInNodWZmbGVkRXhlcmNpc2VzIiwiZXhlcmNpc2VEYXRhIiwiZGVzY3JpcHRpb24iLCJwcmltYXJ5Qm9keVBhcnRzIiwic2Vjb25kYXJ5Qm9keVBhcnRzIiwidGFncyIsInN0ZXBzIiwidmlzaWJpbGl0eSIsImN1cnJlbnRWaWRlb1Bvc2l0aW9uIiwic2V0cyIsInJlcHMiLCJ3ZWlnaHQiLCJhdXRob3IiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJzb3J0IiwiTWF0aCIsInJhbmRvbSIsInNsaWNlIiwiZ2V0RXhlcmNpc2VzQnlBdXRob3IiLCJ1c2VySWQiLCJ2aWRlb3NSZWYiLCJxIiwicXVlcnlTbmFwc2hvdCIsInVuaXF1ZUV4ZXJjaXNlTmFtZXMiLCJTZXQiLCJ2aWRlb0RhdGEiLCJleGVyY2lzZU5hbWUiLCJhZGQiLCJBcnJheSIsImZyb20iLCJmZXRjaFBhZ2luYXRlZEV4ZXJjaXNlcyIsImxhc3REb2MiLCJwYWdlU2l6ZSIsImV4ZXJjaXNlUXVlcnkiLCJmaWx0ZXJlZEV4ZXJjaXNlcyIsImxhc3RWaXNpYmxlIiwiZW1wdHkiLCJleGVyY2lzZUlkIiwiZ2VuZXJhdGVFeGVyY2lzZUxvZ0lEIiwid29ya291dElkIiwiYWxsRXhlcmNpc2VzIiwiZXhlcmNpc2VTZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/api/firebase/exercise/service.ts\n"));

/***/ })

});
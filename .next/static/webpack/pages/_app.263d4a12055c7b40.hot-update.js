"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/_app",{

/***/ "./src/api/firebase/user/service.ts":
/*!******************************************!*\
  !*** ./src/api/firebase/user/service.ts ***!
  \******************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   userService: function() { return /* binding */ userService; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @swc/helpers/_/_async_to_generator */ \"./node_modules/@swc/helpers/esm/_async_to_generator.js\");\n/* harmony import */ var _swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @swc/helpers/_/_class_call_check */ \"./node_modules/@swc/helpers/esm/_class_call_check.js\");\n/* harmony import */ var _swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @swc/helpers/_/_create_class */ \"./node_modules/@swc/helpers/esm/_create_class.js\");\n/* harmony import */ var _swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @swc/helpers/_/_object_spread */ \"./node_modules/@swc/helpers/esm/_object_spread.js\");\n/* harmony import */ var _swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @swc/helpers/_/_object_spread_props */ \"./node_modules/@swc/helpers/esm/_object_spread_props.js\");\n/* harmony import */ var _swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @swc/helpers/_/_ts_generator */ \"./node_modules/@swc/helpers/esm/_ts_generator.js\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ \"./src/api/firebase/user/types.ts\");\n/* harmony import */ var _workout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../workout */ \"./src/api/firebase/workout/index.ts\");\n/* harmony import */ var _exercise_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../exercise/types */ \"./src/api/firebase/exercise/types.ts\");\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../user */ \"./src/api/firebase/user/index.ts\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! firebase/firestore */ \"./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var firebase_storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! firebase/storage */ \"./node_modules/firebase/storage/dist/esm/index.esm.js\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../config */ \"./src/api/firebase/config.ts\");\n/* harmony import */ var _redux_store__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../redux/store */ \"./src/redux/store.ts\");\n/* harmony import */ var _redux_userSlice__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../redux/userSlice */ \"./src/redux/userSlice.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar UserService = /*#__PURE__*/ function() {\n    \"use strict\";\n    function UserService() {\n        (0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_9__._)(this, UserService);\n    }\n    var _proto = UserService.prototype;\n    _proto.fetchUserFromFirestore = function fetchUserFromFirestore(userId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var userRef, userDoc;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\", userId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDoc)(userRef)\n                        ];\n                    case 1:\n                        userDoc = _state.sent();\n                        if (!userDoc.exists()) {\n                            return [\n                                2,\n                                null\n                            ];\n                        }\n                        return [\n                            2,\n                            new _types__WEBPACK_IMPORTED_MODULE_0__.User(userDoc.data())\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.updateUser = function updateUser(userId, user) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var userRef;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\", userId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.setDoc)(userRef, user.toDictionary(), {\n                                merge: true\n                            })\n                        ];\n                    case 1:\n                        _state.sent();\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getUsersByIds = function getUsersByIds(ids) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var users, chunkSize, i, chunk, usersRef, q, querySnapshot;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!ids.length) return [\n                            2,\n                            []\n                        ];\n                        users = [];\n                        chunkSize = 10; // Firestore 'in' queries support up to 10 values\n                        i = 0;\n                        _state.label = 1;\n                    case 1:\n                        if (!(i < ids.length)) return [\n                            3,\n                            4\n                        ];\n                        chunk = ids.slice(i, i + chunkSize);\n                        usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.documentId)(), \"in\", chunk));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q)\n                        ];\n                    case 2:\n                        querySnapshot = _state.sent();\n                        querySnapshot.docs.forEach(function(doc) {\n                            users.push(new _types__WEBPACK_IMPORTED_MODULE_0__.User((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_12__._)({\n                                id: doc.id\n                            }, doc.data())));\n                        });\n                        _state.label = 3;\n                    case 3:\n                        i += chunkSize;\n                        return [\n                            3,\n                            1\n                        ];\n                    case 4:\n                        return [\n                            2,\n                            users\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getUserById = function getUserById(userId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var userDoc, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\", userId))\n                        ];\n                    case 1:\n                        userDoc = _state.sent();\n                        if (!userDoc.exists()) {\n                            throw new Error(\"User not found\");\n                        }\n                        return [\n                            2,\n                            new _types__WEBPACK_IMPORTED_MODULE_0__.User((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_12__._)({\n                                id: userDoc.id\n                            }, userDoc.data()))\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error getting user by ID:\", error);\n                        throw error;\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.deleteUserVideo = function deleteUserVideo(exerciseId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var _this_currentUser, exerciseRef, exerciseDoc, videos, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!((_this_currentUser = _this.currentUser) === null || _this_currentUser === void 0 ? void 0 : _this_currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            6,\n                            ,\n                            7\n                        ]);\n                        exerciseRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"exercises\", exerciseId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDoc)(exerciseRef)\n                        ];\n                    case 2:\n                        exerciseDoc = _state.sent();\n                        if (!exerciseDoc.exists()) return [\n                            3,\n                            4\n                        ];\n                        videos = exerciseDoc.data().videos || [];\n                        // Delete video files from storage\n                        return [\n                            4,\n                            Promise.all(videos.map(function() {\n                                var _ref = (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function(video) {\n                                    var videoRef, gifRef;\n                                    return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                                        switch(_state.label){\n                                            case 0:\n                                                if (!video.videoURL) return [\n                                                    3,\n                                                    2\n                                                ];\n                                                videoRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.ref)((0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.getStorage)(), video.videoURL);\n                                                return [\n                                                    4,\n                                                    (0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.deleteObject)(videoRef)\n                                                ];\n                                            case 1:\n                                                _state.sent();\n                                                _state.label = 2;\n                                            case 2:\n                                                if (!video.gifURL) return [\n                                                    3,\n                                                    4\n                                                ];\n                                                gifRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.ref)((0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.getStorage)(), video.gifURL);\n                                                return [\n                                                    4,\n                                                    (0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.deleteObject)(gifRef)\n                                                ];\n                                            case 3:\n                                                _state.sent();\n                                                _state.label = 4;\n                                            case 4:\n                                                return [\n                                                    2\n                                                ];\n                                        }\n                                    });\n                                });\n                                return function(video) {\n                                    return _ref.apply(this, arguments);\n                                };\n                            }()))\n                        ];\n                    case 3:\n                        _state.sent();\n                        _state.label = 4;\n                    case 4:\n                        // Delete exercise document\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.deleteDoc)(exerciseRef)\n                        ];\n                    case 5:\n                        _state.sent();\n                        return [\n                            3,\n                            7\n                        ];\n                    case 6:\n                        error = _state.sent();\n                        console.error(\"Error deleting user video:\", error);\n                        throw error;\n                    case 7:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.deleteStack = function deleteStack(stackId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var _this_currentUser, stackRef, logsRef, logsSnapshot, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!((_this_currentUser = _this.currentUser) === null || _this_currentUser === void 0 ? void 0 : _this_currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            5,\n                            ,\n                            6\n                        ]);\n                        stackRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\", _this.currentUser.id, \"MyCreatedWorkouts\", stackId);\n                        // Delete associated logs\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(stackRef, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(logsRef)\n                        ];\n                    case 2:\n                        logsSnapshot = _state.sent();\n                        return [\n                            4,\n                            Promise.all(logsSnapshot.docs.map(function(doc) {\n                                return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.deleteDoc)(doc.ref);\n                            }))\n                        ];\n                    case 3:\n                        _state.sent();\n                        // Delete stack document\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.deleteDoc)(stackRef)\n                        ];\n                    case 4:\n                        _state.sent();\n                        return [\n                            3,\n                            6\n                        ];\n                    case 5:\n                        error = _state.sent();\n                        console.error(\"Error deleting stack:\", error);\n                        throw error;\n                    case 6:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.createStack = function createStack(workout, exerciseLogs) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var _this_currentUser, userWorkoutRef, batch, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!((_this_currentUser = _this.currentUser) === null || _this_currentUser === void 0 ? void 0 : _this_currentUser.id)) {\n                            throw new Error(\"No user is signed in.\");\n                        }\n                        // Reference to the new stack document under the user's MyCreatedWorkouts subcollection\n                        userWorkoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\", _this.currentUser.id, \"MyCreatedWorkouts\"), workout.id);\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            5,\n                            ,\n                            6\n                        ]);\n                        // Save the workout document\n                        console.log(\"Right before we save: \" + JSON.stringify(workout.toDictionary()));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.setDoc)(userWorkoutRef, workout.toDictionary())\n                        ];\n                    case 2:\n                        _state.sent();\n                        console.log(\"Stack created successfully\");\n                        if (!(exerciseLogs && exerciseLogs.length > 0)) return [\n                            3,\n                            4\n                        ];\n                        batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_6__.db);\n                        exerciseLogs.forEach(function(log, index) {\n                            // Set the order (index + 1)\n                            log.order = index + 1;\n                            var logRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(userWorkoutRef, \"logs\"), log.id);\n                            batch.set(logRef, log.toDictionary());\n                        });\n                        return [\n                            4,\n                            batch.commit()\n                        ];\n                    case 3:\n                        _state.sent();\n                        console.log(\"Exercise logs saved successfully\");\n                        _state.label = 4;\n                    case 4:\n                        // After successful save, return the workout\n                        return [\n                            2,\n                            workout\n                        ];\n                    case 5:\n                        error = _state.sent();\n                        console.error(\"Error creating stack:\", error);\n                        throw error;\n                    case 6:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchUserStacks = function fetchUserStacks(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var _this_currentUser, currentUserId, stacksRef, querySnapshot, stacks, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUserId = userId || ((_this_currentUser = _this.currentUser) === null || _this_currentUser === void 0 ? void 0 : _this_currentUser.id);\n                        if (!currentUserId) {\n                            throw new Error(\"No user ID provided\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            4,\n                            ,\n                            5\n                        ]);\n                        stacksRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\", currentUserId, \"MyCreatedWorkouts\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(stacksRef)\n                        ];\n                    case 2:\n                        querySnapshot = _state.sent();\n                        return [\n                            4,\n                            Promise.all(querySnapshot.docs.map(function() {\n                                var _ref = (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function(doc) {\n                                    var stackData, logsRef, logsSnapshot, logs;\n                                    return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                                        switch(_state.label){\n                                            case 0:\n                                                stackData = doc.data();\n                                                // Fetch logs for this stack\n                                                logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(doc.ref, \"logs\");\n                                                return [\n                                                    4,\n                                                    (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(logsRef)\n                                                ];\n                                            case 1:\n                                                logsSnapshot = _state.sent();\n                                                logs = logsSnapshot.docs.map(function(logDoc) {\n                                                    return new _exercise_types__WEBPACK_IMPORTED_MODULE_2__.ExerciseLog((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_12__._)({\n                                                        id: logDoc.id\n                                                    }, logDoc.data()));\n                                                });\n                                                return [\n                                                    2,\n                                                    new _workout__WEBPACK_IMPORTED_MODULE_1__.Workout((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_13__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_12__._)({}, stackData), {\n                                                        id: doc.id,\n                                                        logs: logs\n                                                    }))\n                                                ];\n                                        }\n                                    });\n                                });\n                                return function(doc) {\n                                    return _ref.apply(this, arguments);\n                                };\n                            }()))\n                        ];\n                    case 3:\n                        stacks = _state.sent();\n                        return [\n                            2,\n                            stacks\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error fetching user stacks:\", error);\n                        throw error;\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchUserVideos = function fetchUserVideos(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var _this_currentUser, currentUserId, exerciseVideosRef, q, videoSnapshot, videosByExerciseName, exercisesRef, exercisesSnapshot, userExercises, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        // Use current user's ID if no ID is provided\n                        currentUserId = userId || ((_this_currentUser = _this.currentUser) === null || _this_currentUser === void 0 ? void 0 : _this_currentUser.id);\n                        if (!currentUserId) {\n                            throw new Error(\"No user ID provided\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            4,\n                            ,\n                            5\n                        ]);\n                        // Step 1: Fetch user's exercise videos\n                        exerciseVideosRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"exerciseVideos\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(exerciseVideosRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"userId\", \"==\", currentUserId));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q)\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        // Group videos by exercise name\n                        videosByExerciseName = {};\n                        videoSnapshot.docs.forEach(function(doc) {\n                            var videoData = doc.data();\n                            var exerciseName = videoData[\"exercise\"];\n                            if (!exerciseName) {\n                                console.warn(\"Exercise name missing for video \".concat(doc.id));\n                                return;\n                            }\n                            var video = new _exercise_types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo({\n                                id: doc.id,\n                                exerciseId: videoData.exerciseId || \"\",\n                                username: videoData.username || \"\",\n                                userId: videoData.userId || \"\",\n                                videoURL: videoData.videoURL || \"\",\n                                fileName: videoData.fileName || \"\",\n                                exercise: exerciseName,\n                                profileImage: new _user__WEBPACK_IMPORTED_MODULE_3__.ProfileImage(videoData.profileImage || {}),\n                                caption: videoData.caption || \"\",\n                                gifURL: videoData.gifURL || \"\",\n                                thumbnail: videoData.thumbnail || \"\",\n                                visibility: videoData.visibility || \"open\",\n                                totalAccountsReached: videoData.totalAccountsReached || 0,\n                                totalAccountLikes: videoData.totalAccountLikes || 0,\n                                totalAccountBookmarked: videoData.totalAccountBookmarked || 0,\n                                totalAccountUsage: videoData.totalAccountUsage || 0,\n                                isApproved: videoData.isApproved || false,\n                                liked: videoData.liked || false,\n                                bookmarked: videoData.bookmarked || false,\n                                createdAt: videoData.createdAt ? new Date(videoData.createdAt) : new Date(),\n                                updatedAt: videoData.updatedAt ? new Date(videoData.updatedAt) : new Date()\n                            });\n                            if (!videosByExerciseName[exerciseName]) {\n                                videosByExerciseName[exerciseName] = [];\n                            }\n                            videosByExerciseName[exerciseName].push(video);\n                        });\n                        // Step 2: Fetch all exercises\n                        exercisesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"exercises\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(exercisesRef)\n                        ];\n                    case 3:\n                        exercisesSnapshot = _state.sent();\n                        // Step 3: Map videos to exercises\n                        userExercises = exercisesSnapshot.docs.map(function(doc) {\n                            var _exerciseData_author, _exerciseData_author1;\n                            var exerciseData = doc.data();\n                            var exerciseName = exerciseData.name;\n                            // Create base exercise\n                            // For the Exercise:\n                            var exercise = new _exercise_types__WEBPACK_IMPORTED_MODULE_2__.Exercise({\n                                id: doc.id,\n                                name: exerciseName,\n                                category: exerciseData.category,\n                                primaryBodyParts: exerciseData.primaryBodyParts || [],\n                                secondaryBodyParts: exerciseData.secondaryBodyParts || [],\n                                tags: exerciseData.tags || [],\n                                description: exerciseData.description || \"\",\n                                visibility: exerciseData.visibility || \"limited\",\n                                steps: exerciseData.steps || [],\n                                videos: videosByExerciseName[exerciseName] || [],\n                                currentVideoPosition: 0,\n                                reps: exerciseData.reps || \"\",\n                                sets: exerciseData.sets || 0,\n                                weight: exerciseData.weight || 0,\n                                author: new _exercise_types__WEBPACK_IMPORTED_MODULE_2__.ExerciseAuthor({\n                                    userId: ((_exerciseData_author = exerciseData.author) === null || _exerciseData_author === void 0 ? void 0 : _exerciseData_author.userId) || \"\",\n                                    username: ((_exerciseData_author1 = exerciseData.author) === null || _exerciseData_author1 === void 0 ? void 0 : _exerciseData_author1.username) || \"\"\n                                }),\n                                createdAt: exerciseData.createdAt ? new Date(exerciseData.createdAt) : new Date(),\n                                updatedAt: exerciseData.updatedAt ? new Date(exerciseData.updatedAt) : new Date()\n                            });\n                            return exercise;\n                        }).filter(function(exercise) {\n                            return exercise.videos.length > 0;\n                        });\n                        return [\n                            2,\n                            userExercises\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error fetching user videos:\", error);\n                        throw error;\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchFollowing = function fetchFollowing() {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var currentUser, followRequestsRef, q, querySnapshot, followRequests, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _this.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        followRequestsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"followRequests\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(followRequestsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"fromUser.id\", \"==\", currentUser.id));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q)\n                        ];\n                    case 2:\n                        querySnapshot = _state.sent();\n                        followRequests = querySnapshot.docs.map(function(doc) {\n                            var _data_fromUser, _data_fromUser1, _data_fromUser2, _data_toUser, _data_toUser1, _data_toUser2;\n                            var data = doc.data();\n                            return {\n                                fromUser: {\n                                    id: ((_data_fromUser = data.fromUser) === null || _data_fromUser === void 0 ? void 0 : _data_fromUser.id) || \"\",\n                                    username: ((_data_fromUser1 = data.fromUser) === null || _data_fromUser1 === void 0 ? void 0 : _data_fromUser1.username) || \"\",\n                                    displayName: ((_data_fromUser2 = data.fromUser) === null || _data_fromUser2 === void 0 ? void 0 : _data_fromUser2.displayName) || \"\"\n                                },\n                                toUser: {\n                                    id: ((_data_toUser = data.toUser) === null || _data_toUser === void 0 ? void 0 : _data_toUser.id) || \"\",\n                                    username: ((_data_toUser1 = data.toUser) === null || _data_toUser1 === void 0 ? void 0 : _data_toUser1.username) || \"\",\n                                    displayName: ((_data_toUser2 = data.toUser) === null || _data_toUser2 === void 0 ? void 0 : _data_toUser2.displayName) || \"\"\n                                },\n                                status: data.status || \"\",\n                                createdAt: data.createdAt instanceof Date ? data.createdAt : data.createdAt ? new Date(data.createdAt) : new Date(),\n                                updatedAt: data.updatedAt instanceof Date ? data.updatedAt : data.updatedAt ? new Date(data.updatedAt) : new Date()\n                            };\n                        });\n                        return [\n                            2,\n                            followRequests\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching following:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchFollowers = function fetchFollowers() {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var currentUser, followRequestsRef, q, querySnapshot, followRequests, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _this.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        followRequestsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"followRequests\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(followRequestsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"toUser.id\", \"==\", currentUser.id));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q)\n                        ];\n                    case 2:\n                        querySnapshot = _state.sent();\n                        followRequests = querySnapshot.docs.map(function(doc) {\n                            var _data_fromUser, _data_fromUser1, _data_fromUser2, _data_toUser, _data_toUser1, _data_toUser2;\n                            var data = doc.data();\n                            return {\n                                fromUser: {\n                                    id: ((_data_fromUser = data.fromUser) === null || _data_fromUser === void 0 ? void 0 : _data_fromUser.id) || \"\",\n                                    username: ((_data_fromUser1 = data.fromUser) === null || _data_fromUser1 === void 0 ? void 0 : _data_fromUser1.username) || \"\",\n                                    displayName: ((_data_fromUser2 = data.fromUser) === null || _data_fromUser2 === void 0 ? void 0 : _data_fromUser2.displayName) || \"\"\n                                },\n                                toUser: {\n                                    id: ((_data_toUser = data.toUser) === null || _data_toUser === void 0 ? void 0 : _data_toUser.id) || \"\",\n                                    username: ((_data_toUser1 = data.toUser) === null || _data_toUser1 === void 0 ? void 0 : _data_toUser1.username) || \"\",\n                                    displayName: ((_data_toUser2 = data.toUser) === null || _data_toUser2 === void 0 ? void 0 : _data_toUser2.displayName) || \"\"\n                                },\n                                status: data.status || \"\",\n                                createdAt: data.createdAt instanceof Date ? data.createdAt : data.createdAt ? new Date(data.createdAt) : new Date(),\n                                updatedAt: data.updatedAt instanceof Date ? data.updatedAt : data.updatedAt ? new Date(data.updatedAt) : new Date()\n                            };\n                        });\n                        return [\n                            2,\n                            followRequests\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching followers:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetch user ID by username\n   * @param username The username to search for\n   * @returns Promise resolving to the user ID or null if not found\n   */ _proto.getUserIdByUsername = function getUserIdByUsername(username) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var usersRef, q, querySnapshot, userDoc, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"username\", \"==\", username), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.limit)(1));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q)\n                        ];\n                    case 1:\n                        querySnapshot = _state.sent();\n                        if (!querySnapshot.empty) {\n                            userDoc = querySnapshot.docs[0];\n                            return [\n                                2,\n                                userDoc.id\n                            ];\n                        }\n                        return [\n                            2,\n                            null\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error fetching user ID by username:\", error);\n                        return [\n                            2,\n                            null\n                        ];\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getAllUsers = function getAllUsers() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var usersRef, querySnapshot, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(usersRef)\n                        ];\n                    case 1:\n                        querySnapshot = _state.sent();\n                        return [\n                            2,\n                            querySnapshot.docs.map(function(doc) {\n                                return new _types__WEBPACK_IMPORTED_MODULE_0__.User((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_12__._)({\n                                    id: doc.id\n                                }, doc.data()));\n                            }).filter(function(user) {\n                                var _user_profileImage;\n                                return (_user_profileImage = user.profileImage) === null || _user_profileImage === void 0 ? void 0 : _user_profileImage.profileImageURL;\n                            })\n                        ]; // Only return users with profile images\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error fetching users:\", error);\n                        return [\n                            2,\n                            []\n                        ];\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // In userService\n    _proto.getUserByUsername = function getUserByUsername(username) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var usersRef, q, querySnapshot, userData, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"username\", \"==\", username));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q)\n                        ];\n                    case 1:\n                        querySnapshot = _state.sent();\n                        if (querySnapshot.empty) {\n                            return [\n                                2,\n                                null\n                            ];\n                        }\n                        userData = querySnapshot.docs[0].data();\n                        return [\n                            2,\n                            new _types__WEBPACK_IMPORTED_MODULE_0__.User((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_12__._)({\n                                id: querySnapshot.docs[0].id\n                            }, userData))\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        throw error;\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchUsersWithVideosUploaded = function fetchUsersWithVideosUploaded() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var usersRef, q, querySnapshot, users, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        // Create a query against the users collection\n                        usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"videoCount\", \">\", 0) // Only fetch users with videos\n                        );\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q)\n                        ];\n                    case 1:\n                        querySnapshot = _state.sent();\n                        // Map the documents to User objects\n                        users = querySnapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            return new _types__WEBPACK_IMPORTED_MODULE_0__.User((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_12__._)({\n                                id: doc.id\n                            }, data));\n                        })// Filter out users without profile images\n                        .filter(function(user) {\n                            var _user_profileImage;\n                            return (_user_profileImage = user.profileImage) === null || _user_profileImage === void 0 ? void 0 : _user_profileImage.profileImageURL;\n                        })// Shuffle the results\n                        .sort(function() {\n                            return Math.random() - 0.5;\n                        });\n                        return [\n                            2,\n                            users\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error fetching users with videos:\", error);\n                        return [\n                            2,\n                            []\n                        ];\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    (0,_swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_14__._)(UserService, [\n        {\n            key: \"currentUser\",\n            get: function get() {\n                return _redux_store__WEBPACK_IMPORTED_MODULE_7__.store.getState().user.currentUser;\n            },\n            set: function set(user) {\n                _redux_store__WEBPACK_IMPORTED_MODULE_7__.store.dispatch((0,_redux_userSlice__WEBPACK_IMPORTED_MODULE_8__.setUser)(user));\n            }\n        }\n    ]);\n    return UserService;\n}();\nvar userService = new UserService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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d0JBQzFCcUIsSUFBSTlCLHlEQUFLQSxDQUNiNkIsVUFDQTVCLHlEQUFLQSxDQUFDLGNBQWMsS0FBSyxHQUFHLCtCQUErQjs7d0JBR3ZDOzs0QkFBTUMsMkRBQU9BLENBQUM0Qjs7O3dCQUE5QkMsZ0JBQWdCO3dCQUV0QixvQ0FBb0M7d0JBQzlCTixRQUFRTSxjQUFjRyxJQUFJLENBQy9CZ0IsR0FBRyxDQUFDdkQsU0FBQUE7NEJBQ0MsSUFBTXVCLE9BQU92QixJQUFJdUIsSUFBSTs0QkFDckIsT0FBTyxJQUFJOUIsd0NBQUlBLENBQUM7Z0NBQUVpRCxJQUFJMUMsSUFBSTBDLEVBQUU7K0JBQUtuQjt3QkFDckMsRUFDQSwwQ0FBMEM7eUJBQ3pDdUcsTUFBTSxDQUFDckcsU0FBQUE7Z0NBQVFBO29DQUFBQSxxQkFBQUEsS0FBSzBFLFlBQVksY0FBakIxRSx5Q0FBQUEsbUJBQW1CaUgsZUFBZTswQkFDbEQsc0JBQXNCO3lCQUNyQkksSUFBSSxDQUFDO21DQUFNQyxLQUFLQyxNQUFNLEtBQUs7O3dCQUU5Qjs7NEJBQU9sSDs7O3dCQUNBYzt3QkFDUEUsUUFBUUYsS0FBSyxDQUFDLHFDQUFxQ0E7d0JBQ25EOzs7Ozs7Ozs7O1FBRUo7O2tFQXpkSTNCOztZQUNBbUMsS0FBQUE7aUJBQUo7Z0JBQ0UsT0FBT3JDLCtDQUFLQSxDQUFDa0ksUUFBUSxHQUFHeEgsSUFBSSxDQUFDMkIsV0FBVztZQUMxQztpQkFFQSxhQUFnQjNCLElBQWlCO2dCQUMvQlYsK0NBQUtBLENBQUNtSSxRQUFRLENBQUNsSSx5REFBT0EsQ0FBQ1M7WUFDekI7OztXQVBJUjs7QUE0ZEMsSUFBTWtJLGNBQWMsSUFBSWxJLGNBQWMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2FwaS9maXJlYmFzZS91c2VyL3NlcnZpY2UudHM/OGYwYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVc2VyLCBGb2xsb3dSZXF1ZXN0IH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBXb3Jrb3V0IH0gZnJvbSAnLi4vd29ya291dCc7XG5pbXBvcnQgeyBFeGVyY2lzZSwgRXhlcmNpc2VWaWRlbywgRXhlcmNpc2VBdXRob3IsIEV4ZXJjaXNlTG9nIH0gZnJvbSAnLi4vZXhlcmNpc2UvdHlwZXMnO1xuaW1wb3J0IHsgUHJvZmlsZUltYWdlIH0gZnJvbSAnLi4vdXNlcic7XG5cbmltcG9ydCB7IGRvYywgZ2V0RG9jLCBzZXREb2MsIGRvY3VtZW50SWQsIGNvbGxlY3Rpb24sIHF1ZXJ5LCB3aGVyZSwgZ2V0RG9jcywgbGltaXQsIHdyaXRlQmF0Y2gsIGRlbGV0ZURvYyB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XG5pbXBvcnQgeyByZWYsIGRlbGV0ZU9iamVjdCwgZ2V0U3RvcmFnZSB9IGZyb20gJ2ZpcmViYXNlL3N0b3JhZ2UnO1xuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi9jb25maWcnO1xuXG5pbXBvcnQgeyBzdG9yZSB9IGZyb20gJy4uLy4uLy4uL3JlZHV4L3N0b3JlJztcbmltcG9ydCB7IHNldFVzZXIgfSBmcm9tICcuLi8uLi8uLi9yZWR1eC91c2VyU2xpY2UnO1xuXG5jbGFzcyBVc2VyU2VydmljZSB7XG4gIGdldCBjdXJyZW50VXNlcigpOiBVc2VyIHwgbnVsbCB7XG4gICAgcmV0dXJuIHN0b3JlLmdldFN0YXRlKCkudXNlci5jdXJyZW50VXNlcjtcbiAgfVxuXG4gIHNldCBjdXJyZW50VXNlcih1c2VyOiBVc2VyIHwgbnVsbCkge1xuICAgIHN0b3JlLmRpc3BhdGNoKHNldFVzZXIodXNlcikpO1xuICB9XG5cbiAgYXN5bmMgZmV0Y2hVc2VyRnJvbUZpcmVzdG9yZSh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8VXNlciB8IG51bGw+IHtcbiAgICBjb25zdCB1c2VyUmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VySWQpO1xuICAgIGNvbnN0IHVzZXJEb2MgPSBhd2FpdCBnZXREb2ModXNlclJlZik7XG5cbiAgICBpZiAoIXVzZXJEb2MuZXhpc3RzKCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgVXNlcih1c2VyRG9jLmRhdGEoKSk7XG59XG5cbiAgYXN5bmMgdXBkYXRlVXNlcih1c2VySWQ6IHN0cmluZywgdXNlcjogVXNlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHVzZXJSZWYgPSBkb2MoZGIsICd1c2VycycsIHVzZXJJZCk7XG4gICAgYXdhaXQgc2V0RG9jKHVzZXJSZWYsIHVzZXIudG9EaWN0aW9uYXJ5KCksIHsgbWVyZ2U6IHRydWUgfSk7XG4gIH1cblxuICBhc3luYyBnZXRVc2Vyc0J5SWRzKGlkczogc3RyaW5nW10pOiBQcm9taXNlPFVzZXJbXT4ge1xuICAgIGlmICghaWRzLmxlbmd0aCkgcmV0dXJuIFtdO1xuICAgIGNvbnN0IHVzZXJzOiBVc2VyW10gPSBbXTtcbiAgICBjb25zdCBjaHVua1NpemUgPSAxMDsgLy8gRmlyZXN0b3JlICdpbicgcXVlcmllcyBzdXBwb3J0IHVwIHRvIDEwIHZhbHVlc1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaWRzLmxlbmd0aDsgaSArPSBjaHVua1NpemUpIHtcbiAgICAgIGNvbnN0IGNodW5rID0gaWRzLnNsaWNlKGksIGkgKyBjaHVua1NpemUpO1xuICAgICAgY29uc3QgdXNlcnNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnKTtcbiAgICAgIGNvbnN0IHEgPSBxdWVyeSh1c2Vyc1JlZiwgd2hlcmUoZG9jdW1lbnRJZCgpLCAnaW4nLCBjaHVuaykpO1xuICAgICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgICBxdWVyeVNuYXBzaG90LmRvY3MuZm9yRWFjaChkb2MgPT4ge1xuICAgICAgICB1c2Vycy5wdXNoKG5ldyBVc2VyKHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9KSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHVzZXJzO1xuICB9XG5cbiAgYXN5bmMgZ2V0VXNlckJ5SWQodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXI+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlckRvYyA9IGF3YWl0IGdldERvYyhkb2MoZGIsICd1c2VycycsIHVzZXJJZCkpO1xuICAgICAgaWYgKCF1c2VyRG9jLmV4aXN0cygpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBub3QgZm91bmQnKTtcbiAgICAgIH1cbiAgIFxuICAgICAgcmV0dXJuIG5ldyBVc2VyKHtcbiAgICAgICAgaWQ6IHVzZXJEb2MuaWQsXG4gICAgICAgIC4uLnVzZXJEb2MuZGF0YSgpXG4gICAgICB9KTtcbiAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHVzZXIgYnkgSUQ6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgfVxuXG4gICBhc3luYyBkZWxldGVVc2VyVmlkZW8oZXhlcmNpc2VJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRVc2VyPy5pZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGlzIHNpZ25lZCBpbicpO1xuICAgIH1cbiAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGV4ZXJjaXNlUmVmID0gZG9jKGRiLCAnZXhlcmNpc2VzJywgZXhlcmNpc2VJZCk7XG4gICAgICBjb25zdCBleGVyY2lzZURvYyA9IGF3YWl0IGdldERvYyhleGVyY2lzZVJlZik7XG4gIFxuICAgICAgaWYgKGV4ZXJjaXNlRG9jLmV4aXN0cygpKSB7XG4gICAgICAgIGNvbnN0IHZpZGVvcyA9IGV4ZXJjaXNlRG9jLmRhdGEoKS52aWRlb3MgfHwgW107XG4gICAgICAgIFxuICAgICAgICAvLyBEZWxldGUgdmlkZW8gZmlsZXMgZnJvbSBzdG9yYWdlXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgIHZpZGVvcy5tYXAoYXN5bmMgKHZpZGVvOiB7IHZpZGVvVVJMPzogc3RyaW5nLCBnaWZVUkw/OiBzdHJpbmcgfSkgPT4ge1xuICAgICAgICAgICAgaWYgKHZpZGVvLnZpZGVvVVJMKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHZpZGVvUmVmID0gcmVmKGdldFN0b3JhZ2UoKSwgdmlkZW8udmlkZW9VUkwpO1xuICAgICAgICAgICAgICBhd2FpdCBkZWxldGVPYmplY3QodmlkZW9SZWYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZpZGVvLmdpZlVSTCkge1xuICAgICAgICAgICAgICBjb25zdCBnaWZSZWYgPSByZWYoZ2V0U3RvcmFnZSgpLCB2aWRlby5naWZVUkwpO1xuICAgICAgICAgICAgICBhd2FpdCBkZWxldGVPYmplY3QoZ2lmUmVmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfVxuICBcbiAgICAgIC8vIERlbGV0ZSBleGVyY2lzZSBkb2N1bWVudFxuICAgICAgYXdhaXQgZGVsZXRlRG9jKGV4ZXJjaXNlUmVmKTtcbiAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIHVzZXIgdmlkZW86JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG4gIFxuICBhc3luYyBkZWxldGVTdGFjayhzdGFja0lkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuY3VycmVudFVzZXI/LmlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgfVxuICBcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RhY2tSZWYgPSBkb2MoZGIsICd1c2VycycsIHRoaXMuY3VycmVudFVzZXIuaWQsICdNeUNyZWF0ZWRXb3Jrb3V0cycsIHN0YWNrSWQpO1xuICAgICAgXG4gICAgICAvLyBEZWxldGUgYXNzb2NpYXRlZCBsb2dzXG4gICAgICBjb25zdCBsb2dzUmVmID0gY29sbGVjdGlvbihzdGFja1JlZiwgJ2xvZ3MnKTtcbiAgICAgIGNvbnN0IGxvZ3NTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MobG9nc1JlZik7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgbG9nc1NuYXBzaG90LmRvY3MubWFwKGRvYyA9PiBkZWxldGVEb2MoZG9jLnJlZikpXG4gICAgICApO1xuICBcbiAgICAgIC8vIERlbGV0ZSBzdGFjayBkb2N1bWVudFxuICAgICAgYXdhaXQgZGVsZXRlRG9jKHN0YWNrUmVmKTtcbiAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIHN0YWNrOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVN0YWNrKHdvcmtvdXQ6IFdvcmtvdXQsIGV4ZXJjaXNlTG9ncz86IEV4ZXJjaXNlTG9nW10pOiBQcm9taXNlPFdvcmtvdXQ+IHtcbiAgICBpZiAoIXRoaXMuY3VycmVudFVzZXI/LmlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluLicpO1xuICAgIH1cblxuICAgIC8vIFJlZmVyZW5jZSB0byB0aGUgbmV3IHN0YWNrIGRvY3VtZW50IHVuZGVyIHRoZSB1c2VyJ3MgTXlDcmVhdGVkV29ya291dHMgc3ViY29sbGVjdGlvblxuICAgIGNvbnN0IHVzZXJXb3Jrb3V0UmVmID0gZG9jKFxuICAgICAgY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgdGhpcy5jdXJyZW50VXNlci5pZCwgJ015Q3JlYXRlZFdvcmtvdXRzJyksXG4gICAgICB3b3Jrb3V0LmlkXG4gICAgKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBTYXZlIHRoZSB3b3Jrb3V0IGRvY3VtZW50XG4gICAgICBjb25zb2xlLmxvZyhcIlJpZ2h0IGJlZm9yZSB3ZSBzYXZlOiBcIiArIEpTT04uc3RyaW5naWZ5KHdvcmtvdXQudG9EaWN0aW9uYXJ5KCkpKTtcbiAgICAgIGF3YWl0IHNldERvYyh1c2VyV29ya291dFJlZiwgd29ya291dC50b0RpY3Rpb25hcnkoKSk7XG4gICAgICBjb25zb2xlLmxvZygnU3RhY2sgY3JlYXRlZCBzdWNjZXNzZnVsbHknKTtcblxuICAgICAgLy8gSWYgdGhlcmUgYXJlIGV4ZXJjaXNlIGxvZ3MsIHNhdmUgdGhlbSBpbiBhIGJhdGNoIHRvIHRoZSBcImxvZ3NcIiBzdWJjb2xsZWN0aW9uXG4gICAgICBpZiAoZXhlcmNpc2VMb2dzICYmIGV4ZXJjaXNlTG9ncy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XG4gICAgICAgIGV4ZXJjaXNlTG9ncy5mb3JFYWNoKChsb2csIGluZGV4KSA9PiB7XG4gICAgICAgICAgLy8gU2V0IHRoZSBvcmRlciAoaW5kZXggKyAxKVxuICAgICAgICAgIGxvZy5vcmRlciA9IGluZGV4ICsgMTtcbiAgICAgICAgICBjb25zdCBsb2dSZWYgPSBkb2MoY29sbGVjdGlvbih1c2VyV29ya291dFJlZiwgJ2xvZ3MnKSwgbG9nLmlkKTtcbiAgICAgICAgICBiYXRjaC5zZXQobG9nUmVmLCBsb2cudG9EaWN0aW9uYXJ5KCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgYmF0Y2guY29tbWl0KCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdFeGVyY2lzZSBsb2dzIHNhdmVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgfVxuXG4gICAgICAvLyBBZnRlciBzdWNjZXNzZnVsIHNhdmUsIHJldHVybiB0aGUgd29ya291dFxuICAgICAgcmV0dXJuIHdvcmtvdXQ7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgc3RhY2s6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZmV0Y2hVc2VyU3RhY2tzKHVzZXJJZD86IHN0cmluZyk6IFByb21pc2U8V29ya291dFtdPiB7XG4gICAgY29uc3QgY3VycmVudFVzZXJJZCA9IHVzZXJJZCB8fCB0aGlzLmN1cnJlbnRVc2VyPy5pZDtcbiAgICBcbiAgICBpZiAoIWN1cnJlbnRVc2VySWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBJRCBwcm92aWRlZCcpO1xuICAgIH1cbiAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0YWNrc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycsIGN1cnJlbnRVc2VySWQsICdNeUNyZWF0ZWRXb3Jrb3V0cycpO1xuICAgICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3Moc3RhY2tzUmVmKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc3RhY2tzID0gYXdhaXQgUHJvbWlzZS5hbGwocXVlcnlTbmFwc2hvdC5kb2NzLm1hcChhc3luYyBkb2MgPT4ge1xuICAgICAgICBjb25zdCBzdGFja0RhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gRmV0Y2ggbG9ncyBmb3IgdGhpcyBzdGFja1xuICAgICAgICBjb25zdCBsb2dzUmVmID0gY29sbGVjdGlvbihkb2MucmVmLCAnbG9ncycpO1xuICAgICAgICBjb25zdCBsb2dzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGxvZ3NSZWYpO1xuICAgICAgICBjb25zdCBsb2dzID0gbG9nc1NuYXBzaG90LmRvY3MubWFwKGxvZ0RvYyA9PiBcbiAgICAgICAgICBuZXcgRXhlcmNpc2VMb2coeyBpZDogbG9nRG9jLmlkLCAuLi5sb2dEb2MuZGF0YSgpIH0pXG4gICAgICAgICk7XG4gIFxuICAgICAgICByZXR1cm4gbmV3IFdvcmtvdXQoe1xuICAgICAgICAgIC4uLnN0YWNrRGF0YSxcbiAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgIGxvZ3NcbiAgICAgICAgfSk7XG4gICAgICB9KSk7XG4gIFxuICAgICAgcmV0dXJuIHN0YWNrcztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBzdGFja3M6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZmV0Y2hVc2VyVmlkZW9zKHVzZXJJZD86IHN0cmluZyk6IFByb21pc2U8RXhlcmNpc2VbXT4ge1xuICAgIC8vIFVzZSBjdXJyZW50IHVzZXIncyBJRCBpZiBubyBJRCBpcyBwcm92aWRlZFxuICAgIGNvbnN0IGN1cnJlbnRVc2VySWQgPSB1c2VySWQgfHwgdGhpcy5jdXJyZW50VXNlcj8uaWQ7XG4gICAgXG4gICAgaWYgKCFjdXJyZW50VXNlcklkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgSUQgcHJvdmlkZWQnKTtcbiAgICB9XG4gIFxuICAgIHRyeSB7XG4gICAgICAvLyBTdGVwIDE6IEZldGNoIHVzZXIncyBleGVyY2lzZSB2aWRlb3NcbiAgICAgIGNvbnN0IGV4ZXJjaXNlVmlkZW9zUmVmID0gY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlVmlkZW9zJyk7XG4gICAgICBjb25zdCBxID0gcXVlcnkoZXhlcmNpc2VWaWRlb3NSZWYsIHdoZXJlKCd1c2VySWQnLCAnPT0nLCBjdXJyZW50VXNlcklkKSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHZpZGVvU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICBcbiAgICAgIC8vIEdyb3VwIHZpZGVvcyBieSBleGVyY2lzZSBuYW1lXG4gICAgICBjb25zdCB2aWRlb3NCeUV4ZXJjaXNlTmFtZTogeyBba2V5OiBzdHJpbmddOiBFeGVyY2lzZVZpZGVvW10gfSA9IHt9O1xuICBcbiAgICAgIHZpZGVvU25hcHNob3QuZG9jcy5mb3JFYWNoKGRvYyA9PiB7XG4gICAgICAgIGNvbnN0IHZpZGVvRGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICAgIGNvbnN0IGV4ZXJjaXNlTmFtZSA9IHZpZGVvRGF0YVsnZXhlcmNpc2UnXSBhcyBzdHJpbmc7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWV4ZXJjaXNlTmFtZSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihgRXhlcmNpc2UgbmFtZSBtaXNzaW5nIGZvciB2aWRlbyAke2RvYy5pZH1gKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgXG4gICAgICAgIGNvbnN0IHZpZGVvID0gbmV3IEV4ZXJjaXNlVmlkZW8oe1xuICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgZXhlcmNpc2VJZDogdmlkZW9EYXRhLmV4ZXJjaXNlSWQgfHwgJycsXG4gICAgICAgICAgdXNlcm5hbWU6IHZpZGVvRGF0YS51c2VybmFtZSB8fCAnJyxcbiAgICAgICAgICB1c2VySWQ6IHZpZGVvRGF0YS51c2VySWQgfHwgJycsXG4gICAgICAgICAgdmlkZW9VUkw6IHZpZGVvRGF0YS52aWRlb1VSTCB8fCAnJyxcbiAgICAgICAgICBmaWxlTmFtZTogdmlkZW9EYXRhLmZpbGVOYW1lIHx8ICcnLFxuICAgICAgICAgIGV4ZXJjaXNlOiBleGVyY2lzZU5hbWUsXG4gICAgICAgICAgcHJvZmlsZUltYWdlOiBuZXcgUHJvZmlsZUltYWdlKHZpZGVvRGF0YS5wcm9maWxlSW1hZ2UgfHwge30pLCAgLy8gVXNlIFByb2ZpbGVJbWFnZSBjb25zdHJ1Y3RvclxuICAgICAgICAgIGNhcHRpb246IHZpZGVvRGF0YS5jYXB0aW9uIHx8ICcnLFxuICAgICAgICAgIGdpZlVSTDogdmlkZW9EYXRhLmdpZlVSTCB8fCAnJyxcbiAgICAgICAgICB0aHVtYm5haWw6IHZpZGVvRGF0YS50aHVtYm5haWwgfHwgJycsXG4gICAgICAgICAgdmlzaWJpbGl0eTogdmlkZW9EYXRhLnZpc2liaWxpdHkgfHwgJ29wZW4nLFxuICAgICAgICAgIHRvdGFsQWNjb3VudHNSZWFjaGVkOiB2aWRlb0RhdGEudG90YWxBY2NvdW50c1JlYWNoZWQgfHwgMCxcbiAgICAgICAgICB0b3RhbEFjY291bnRMaWtlczogdmlkZW9EYXRhLnRvdGFsQWNjb3VudExpa2VzIHx8IDAsXG4gICAgICAgICAgdG90YWxBY2NvdW50Qm9va21hcmtlZDogdmlkZW9EYXRhLnRvdGFsQWNjb3VudEJvb2ttYXJrZWQgfHwgMCxcbiAgICAgICAgICB0b3RhbEFjY291bnRVc2FnZTogdmlkZW9EYXRhLnRvdGFsQWNjb3VudFVzYWdlIHx8IDAsXG4gICAgICAgICAgaXNBcHByb3ZlZDogdmlkZW9EYXRhLmlzQXBwcm92ZWQgfHwgZmFsc2UsXG4gICAgICAgICAgbGlrZWQ6IHZpZGVvRGF0YS5saWtlZCB8fCBmYWxzZSxcbiAgICAgICAgICBib29rbWFya2VkOiB2aWRlb0RhdGEuYm9va21hcmtlZCB8fCBmYWxzZSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IHZpZGVvRGF0YS5jcmVhdGVkQXQgPyBuZXcgRGF0ZSh2aWRlb0RhdGEuY3JlYXRlZEF0KSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgdXBkYXRlZEF0OiB2aWRlb0RhdGEudXBkYXRlZEF0ID8gbmV3IERhdGUodmlkZW9EYXRhLnVwZGF0ZWRBdCkgOiBuZXcgRGF0ZSgpXG4gICAgICAgIH0pO1xuICBcbiAgICAgICAgaWYgKCF2aWRlb3NCeUV4ZXJjaXNlTmFtZVtleGVyY2lzZU5hbWVdKSB7XG4gICAgICAgICAgdmlkZW9zQnlFeGVyY2lzZU5hbWVbZXhlcmNpc2VOYW1lXSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHZpZGVvc0J5RXhlcmNpc2VOYW1lW2V4ZXJjaXNlTmFtZV0ucHVzaCh2aWRlbyk7XG4gICAgICB9KTtcbiAgXG4gICAgICAvLyBTdGVwIDI6IEZldGNoIGFsbCBleGVyY2lzZXNcbiAgICAgIGNvbnN0IGV4ZXJjaXNlc1JlZiA9IGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZXMnKTtcbiAgICAgIGNvbnN0IGV4ZXJjaXNlc1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhleGVyY2lzZXNSZWYpO1xuICBcbiAgICAgIC8vIFN0ZXAgMzogTWFwIHZpZGVvcyB0byBleGVyY2lzZXNcbiAgICAgIGNvbnN0IHVzZXJFeGVyY2lzZXM6IEV4ZXJjaXNlW10gPSBleGVyY2lzZXNTbmFwc2hvdC5kb2NzXG4gICAgICAgIC5tYXAoZG9jID0+IHtcbiAgICAgICAgICBjb25zdCBleGVyY2lzZURhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgICAgIGNvbnN0IGV4ZXJjaXNlTmFtZSA9IGV4ZXJjaXNlRGF0YS5uYW1lO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENyZWF0ZSBiYXNlIGV4ZXJjaXNlXG4gICAgICAgICAgLy8gRm9yIHRoZSBFeGVyY2lzZTpcbiAgICAgICAgICBjb25zdCBleGVyY2lzZSA9IG5ldyBFeGVyY2lzZSh7XG4gICAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgICAgbmFtZTogZXhlcmNpc2VOYW1lLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IGV4ZXJjaXNlRGF0YS5jYXRlZ29yeSxcbiAgICAgICAgICAgIHByaW1hcnlCb2R5UGFydHM6IGV4ZXJjaXNlRGF0YS5wcmltYXJ5Qm9keVBhcnRzIHx8IFtdLFxuICAgICAgICAgICAgc2Vjb25kYXJ5Qm9keVBhcnRzOiBleGVyY2lzZURhdGEuc2Vjb25kYXJ5Qm9keVBhcnRzIHx8IFtdLFxuICAgICAgICAgICAgdGFnczogZXhlcmNpc2VEYXRhLnRhZ3MgfHwgW10sXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZXhlcmNpc2VEYXRhLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICAgICAgdmlzaWJpbGl0eTogZXhlcmNpc2VEYXRhLnZpc2liaWxpdHkgfHwgJ2xpbWl0ZWQnLFxuICAgICAgICAgICAgc3RlcHM6IGV4ZXJjaXNlRGF0YS5zdGVwcyB8fCBbXSxcbiAgICAgICAgICAgIHZpZGVvczogdmlkZW9zQnlFeGVyY2lzZU5hbWVbZXhlcmNpc2VOYW1lXSB8fCBbXSxcbiAgICAgICAgICAgIGN1cnJlbnRWaWRlb1Bvc2l0aW9uOiAwLFxuICAgICAgICAgICAgcmVwczogZXhlcmNpc2VEYXRhLnJlcHMgfHwgJycsXG4gICAgICAgICAgICBzZXRzOiBleGVyY2lzZURhdGEuc2V0cyB8fCAwLFxuICAgICAgICAgICAgd2VpZ2h0OiBleGVyY2lzZURhdGEud2VpZ2h0IHx8IDAsXG4gICAgICAgICAgICBhdXRob3I6IG5ldyBFeGVyY2lzZUF1dGhvcih7ICAvLyBVc2UgRXhlcmNpc2VBdXRob3IgY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgdXNlcklkOiBleGVyY2lzZURhdGEuYXV0aG9yPy51c2VySWQgfHwgJycsXG4gICAgICAgICAgICAgIHVzZXJuYW1lOiBleGVyY2lzZURhdGEuYXV0aG9yPy51c2VybmFtZSB8fCAnJ1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IGV4ZXJjaXNlRGF0YS5jcmVhdGVkQXQgPyBuZXcgRGF0ZShleGVyY2lzZURhdGEuY3JlYXRlZEF0KSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IGV4ZXJjaXNlRGF0YS51cGRhdGVkQXQgPyBuZXcgRGF0ZShleGVyY2lzZURhdGEudXBkYXRlZEF0KSA6IG5ldyBEYXRlKClcbiAgICAgICAgICB9KTtcbiAgXG4gICAgICAgICAgcmV0dXJuIGV4ZXJjaXNlO1xuICAgICAgICB9KVxuICAgICAgICAuZmlsdGVyKGV4ZXJjaXNlID0+IGV4ZXJjaXNlLnZpZGVvcy5sZW5ndGggPiAwKTtcbiAgXG4gICAgICByZXR1cm4gdXNlckV4ZXJjaXNlcztcbiAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgdmlkZW9zOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZldGNoRm9sbG93aW5nKCk6IFByb21pc2U8Rm9sbG93UmVxdWVzdFtdPiB7XG4gICAgY29uc3QgY3VycmVudFVzZXIgPSB0aGlzLmN1cnJlbnRVc2VyO1xuICAgIGlmICghY3VycmVudFVzZXI/LmlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgfVxuICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgZm9sbG93UmVxdWVzdHNSZWYgPSBjb2xsZWN0aW9uKGRiLCAnZm9sbG93UmVxdWVzdHMnKTtcbiAgICAgIGNvbnN0IHEgPSBxdWVyeShcbiAgICAgICAgZm9sbG93UmVxdWVzdHNSZWYsIFxuICAgICAgICB3aGVyZSgnZnJvbVVzZXIuaWQnLCAnPT0nLCBjdXJyZW50VXNlci5pZClcbiAgICAgICk7XG4gIFxuICAgICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gIFxuICAgICAgY29uc3QgZm9sbG93UmVxdWVzdHM6IEZvbGxvd1JlcXVlc3RbXSA9IHF1ZXJ5U25hcHNob3QuZG9jcy5tYXAoZG9jID0+IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZnJvbVVzZXI6IHtcbiAgICAgICAgICAgIGlkOiBkYXRhLmZyb21Vc2VyPy5pZCB8fCAnJyxcbiAgICAgICAgICAgIHVzZXJuYW1lOiBkYXRhLmZyb21Vc2VyPy51c2VybmFtZSB8fCAnJyxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBkYXRhLmZyb21Vc2VyPy5kaXNwbGF5TmFtZSB8fCAnJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdG9Vc2VyOiB7XG4gICAgICAgICAgICBpZDogZGF0YS50b1VzZXI/LmlkIHx8ICcnLFxuICAgICAgICAgICAgdXNlcm5hbWU6IGRhdGEudG9Vc2VyPy51c2VybmFtZSB8fCAnJyxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBkYXRhLnRvVXNlcj8uZGlzcGxheU5hbWUgfHwgJydcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN0YXR1czogZGF0YS5zdGF0dXMgfHwgJycsXG4gICAgICAgICAgY3JlYXRlZEF0OiBkYXRhLmNyZWF0ZWRBdCBpbnN0YW5jZW9mIERhdGUgXG4gICAgICAgICAgICA/IGRhdGEuY3JlYXRlZEF0IFxuICAgICAgICAgICAgOiAoZGF0YS5jcmVhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNyZWF0ZWRBdCkgOiBuZXcgRGF0ZSgpKSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IGRhdGEudXBkYXRlZEF0IGluc3RhbmNlb2YgRGF0ZSBcbiAgICAgICAgICAgID8gZGF0YS51cGRhdGVkQXQgXG4gICAgICAgICAgICA6IChkYXRhLnVwZGF0ZWRBdCA/IG5ldyBEYXRlKGRhdGEudXBkYXRlZEF0KSA6IG5ldyBEYXRlKCkpXG4gICAgICAgIH0gYXMgRm9sbG93UmVxdWVzdDtcbiAgICAgIH0pO1xuICBcbiAgICAgIHJldHVybiBmb2xsb3dSZXF1ZXN0cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgZm9sbG93aW5nOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuICBcbiAgYXN5bmMgZmV0Y2hGb2xsb3dlcnMoKTogUHJvbWlzZTxGb2xsb3dSZXF1ZXN0W10+IHtcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IHRoaXMuY3VycmVudFVzZXI7XG4gICAgaWYgKCFjdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBpcyBzaWduZWQgaW4nKTtcbiAgICB9XG4gIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBmb2xsb3dSZXF1ZXN0c1JlZiA9IGNvbGxlY3Rpb24oZGIsICdmb2xsb3dSZXF1ZXN0cycpO1xuICAgICAgY29uc3QgcSA9IHF1ZXJ5KFxuICAgICAgICBmb2xsb3dSZXF1ZXN0c1JlZiwgXG4gICAgICAgIHdoZXJlKCd0b1VzZXIuaWQnLCAnPT0nLCBjdXJyZW50VXNlci5pZClcbiAgICAgICk7XG4gIFxuICAgICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gIFxuICAgICAgY29uc3QgZm9sbG93UmVxdWVzdHM6IEZvbGxvd1JlcXVlc3RbXSA9IHF1ZXJ5U25hcHNob3QuZG9jcy5tYXAoZG9jID0+IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZnJvbVVzZXI6IHtcbiAgICAgICAgICAgIGlkOiBkYXRhLmZyb21Vc2VyPy5pZCB8fCAnJyxcbiAgICAgICAgICAgIHVzZXJuYW1lOiBkYXRhLmZyb21Vc2VyPy51c2VybmFtZSB8fCAnJyxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBkYXRhLmZyb21Vc2VyPy5kaXNwbGF5TmFtZSB8fCAnJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdG9Vc2VyOiB7XG4gICAgICAgICAgICBpZDogZGF0YS50b1VzZXI/LmlkIHx8ICcnLFxuICAgICAgICAgICAgdXNlcm5hbWU6IGRhdGEudG9Vc2VyPy51c2VybmFtZSB8fCAnJyxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBkYXRhLnRvVXNlcj8uZGlzcGxheU5hbWUgfHwgJydcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN0YXR1czogZGF0YS5zdGF0dXMgfHwgJycsXG4gICAgICAgICAgY3JlYXRlZEF0OiBkYXRhLmNyZWF0ZWRBdCBpbnN0YW5jZW9mIERhdGUgXG4gICAgICAgICAgICA/IGRhdGEuY3JlYXRlZEF0IFxuICAgICAgICAgICAgOiAoZGF0YS5jcmVhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNyZWF0ZWRBdCkgOiBuZXcgRGF0ZSgpKSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IGRhdGEudXBkYXRlZEF0IGluc3RhbmNlb2YgRGF0ZSBcbiAgICAgICAgICAgID8gZGF0YS51cGRhdGVkQXQgXG4gICAgICAgICAgICA6IChkYXRhLnVwZGF0ZWRBdCA/IG5ldyBEYXRlKGRhdGEudXBkYXRlZEF0KSA6IG5ldyBEYXRlKCkpXG4gICAgICAgIH0gYXMgRm9sbG93UmVxdWVzdDtcbiAgICAgIH0pO1xuICBcbiAgICAgIHJldHVybiBmb2xsb3dSZXF1ZXN0cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgZm9sbG93ZXJzOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gICAvKipcbiAgICogRmV0Y2ggdXNlciBJRCBieSB1c2VybmFtZVxuICAgKiBAcGFyYW0gdXNlcm5hbWUgVGhlIHVzZXJuYW1lIHRvIHNlYXJjaCBmb3JcbiAgICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gdGhlIHVzZXIgSUQgb3IgbnVsbCBpZiBub3QgZm91bmRcbiAgICovXG4gICBhc3luYyBnZXRVc2VySWRCeVVzZXJuYW1lKHVzZXJuYW1lOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlcnNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnKTtcbiAgICAgIGNvbnN0IHEgPSBxdWVyeSh1c2Vyc1JlZiwgd2hlcmUoJ3VzZXJuYW1lJywgJz09JywgdXNlcm5hbWUpLCBsaW1pdCgxKSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgICAgXG4gICAgICBpZiAoIXF1ZXJ5U25hcHNob3QuZW1wdHkpIHtcbiAgICAgICAgY29uc3QgdXNlckRvYyA9IHF1ZXJ5U25hcHNob3QuZG9jc1swXTtcbiAgICAgICAgcmV0dXJuIHVzZXJEb2MuaWQ7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyIElEIGJ5IHVzZXJuYW1lOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldEFsbFVzZXJzKCk6IFByb21pc2U8VXNlcltdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJyk7XG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyh1c2Vyc1JlZik7XG4gICAgICBcbiAgICAgIHJldHVybiBxdWVyeVNuYXBzaG90LmRvY3NcbiAgICAgICAgLm1hcChkb2MgPT4gbmV3IFVzZXIoeyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH0pKVxuICAgICAgICAuZmlsdGVyKHVzZXIgPT4gdXNlci5wcm9maWxlSW1hZ2U/LnByb2ZpbGVJbWFnZVVSTCk7IC8vIE9ubHkgcmV0dXJuIHVzZXJzIHdpdGggcHJvZmlsZSBpbWFnZXNcbiAgICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXJzOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICAvLyBJbiB1c2VyU2VydmljZVxuICBhc3luYyBnZXRVc2VyQnlVc2VybmFtZSh1c2VybmFtZTogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICAgIHRyeSB7ICAgICAgXG4gICAgICBjb25zdCB1c2Vyc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycpO1xuICAgICAgY29uc3QgcSA9IHF1ZXJ5KHVzZXJzUmVmLCB3aGVyZSgndXNlcm5hbWUnLCAnPT0nLCB1c2VybmFtZSkpO1xuICAgICAgXG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICAgICAgICAgIFxuICAgICAgaWYgKHF1ZXJ5U25hcHNob3QuZW1wdHkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVzZXJEYXRhID0gcXVlcnlTbmFwc2hvdC5kb2NzWzBdLmRhdGEoKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIG5ldyBVc2VyKHsgaWQ6IHF1ZXJ5U25hcHNob3QuZG9jc1swXS5pZCwgLi4udXNlckRhdGEgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZldGNoVXNlcnNXaXRoVmlkZW9zVXBsb2FkZWQoKTogUHJvbWlzZTxVc2VyW10+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQ3JlYXRlIGEgcXVlcnkgYWdhaW5zdCB0aGUgdXNlcnMgY29sbGVjdGlvblxuICAgICAgY29uc3QgdXNlcnNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnKTtcbiAgICAgIGNvbnN0IHEgPSBxdWVyeShcbiAgICAgICAgdXNlcnNSZWYsXG4gICAgICAgIHdoZXJlKCd2aWRlb0NvdW50JywgJz4nLCAwKSAvLyBPbmx5IGZldGNoIHVzZXJzIHdpdGggdmlkZW9zXG4gICAgICApO1xuXG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICAgIFxuICAgICAgLy8gTWFwIHRoZSBkb2N1bWVudHMgdG8gVXNlciBvYmplY3RzXG4gICAgICBjb25zdCB1c2VycyA9IHF1ZXJ5U25hcHNob3QuZG9jc1xuICAgICAgLm1hcChkb2MgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVzZXIoeyBpZDogZG9jLmlkLCAuLi5kYXRhIH0pO1xuICAgICAgICB9KVxuICAgICAgICAvLyBGaWx0ZXIgb3V0IHVzZXJzIHdpdGhvdXQgcHJvZmlsZSBpbWFnZXNcbiAgICAgICAgLmZpbHRlcih1c2VyID0+IHVzZXIucHJvZmlsZUltYWdlPy5wcm9maWxlSW1hZ2VVUkwpXG4gICAgICAgIC8vIFNodWZmbGUgdGhlIHJlc3VsdHNcbiAgICAgICAgLnNvcnQoKCkgPT4gTWF0aC5yYW5kb20oKSAtIDAuNSk7XG5cbiAgICAgIHJldHVybiB1c2VycztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlcnMgd2l0aCB2aWRlb3M6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgdXNlclNlcnZpY2UgPSBuZXcgVXNlclNlcnZpY2UoKTsiXSwibmFtZXMiOlsiVXNlciIsIldvcmtvdXQiLCJFeGVyY2lzZSIsIkV4ZXJjaXNlVmlkZW8iLCJFeGVyY2lzZUF1dGhvciIsIkV4ZXJjaXNlTG9nIiwiUHJvZmlsZUltYWdlIiwiZG9jIiwiZ2V0RG9jIiwic2V0RG9jIiwiZG9jdW1lbnRJZCIsImNvbGxlY3Rpb24iLCJxdWVyeSIsIndoZXJlIiwiZ2V0RG9jcyIsImxpbWl0Iiwid3JpdGVCYXRjaCIsImRlbGV0ZURvYyIsInJlZiIsImRlbGV0ZU9iamVjdCIsImdldFN0b3JhZ2UiLCJkYiIsInN0b3JlIiwic2V0VXNlciIsIlVzZXJTZXJ2aWNlIiwiZmV0Y2hVc2VyRnJvbUZpcmVzdG9yZSIsInVzZXJJZCIsInVzZXJSZWYiLCJ1c2VyRG9jIiwiZXhpc3RzIiwiZGF0YSIsInVwZGF0ZVVzZXIiLCJ1c2VyIiwidG9EaWN0aW9uYXJ5IiwibWVyZ2UiLCJnZXRVc2Vyc0J5SWRzIiwiaWRzIiwidXNlcnMiLCJjaHVua1NpemUiLCJpIiwiY2h1bmsiLCJ1c2Vyc1JlZiIsInEiLCJxdWVyeVNuYXBzaG90IiwibGVuZ3RoIiwic2xpY2UiLCJkb2NzIiwiZm9yRWFjaCIsInB1c2giLCJpZCIsImdldFVzZXJCeUlkIiwiZXJyb3IiLCJFcnJvciIsImNvbnNvbGUiLCJkZWxldGVVc2VyVmlkZW8iLCJleGVyY2lzZUlkIiwiZXhlcmNpc2VSZWYiLCJleGVyY2lzZURvYyIsInZpZGVvcyIsImN1cnJlbnRVc2VyIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsInZpZGVvIiwidmlkZW9SZWYiLCJnaWZSZWYiLCJ2aWRlb1VSTCIsImdpZlVSTCIsImRlbGV0ZVN0YWNrIiwic3RhY2tJZCIsInN0YWNrUmVmIiwibG9nc1JlZiIsImxvZ3NTbmFwc2hvdCIsImNyZWF0ZVN0YWNrIiwid29ya291dCIsImV4ZXJjaXNlTG9ncyIsInVzZXJXb3Jrb3V0UmVmIiwiYmF0Y2giLCJsb2ciLCJKU09OIiwic3RyaW5naWZ5IiwiaW5kZXgiLCJvcmRlciIsImxvZ1JlZiIsInNldCIsImNvbW1pdCIsImZldGNoVXNlclN0YWNrcyIsImN1cnJlbnRVc2VySWQiLCJzdGFja3NSZWYiLCJzdGFja3MiLCJzdGFja0RhdGEiLCJsb2dzIiwibG9nRG9jIiwiZmV0Y2hVc2VyVmlkZW9zIiwiZXhlcmNpc2VWaWRlb3NSZWYiLCJ2aWRlb1NuYXBzaG90IiwidmlkZW9zQnlFeGVyY2lzZU5hbWUiLCJleGVyY2lzZXNSZWYiLCJleGVyY2lzZXNTbmFwc2hvdCIsInVzZXJFeGVyY2lzZXMiLCJ2aWRlb0RhdGEiLCJleGVyY2lzZU5hbWUiLCJ3YXJuIiwidXNlcm5hbWUiLCJmaWxlTmFtZSIsImV4ZXJjaXNlIiwicHJvZmlsZUltYWdlIiwiY2FwdGlvbiIsInRodW1ibmFpbCIsInZpc2liaWxpdHkiLCJ0b3RhbEFjY291bnRzUmVhY2hlZCIsInRvdGFsQWNjb3VudExpa2VzIiwidG90YWxBY2NvdW50Qm9va21hcmtlZCIsInRvdGFsQWNjb3VudFVzYWdlIiwiaXNBcHByb3ZlZCIsImxpa2VkIiwiYm9va21hcmtlZCIsImNyZWF0ZWRBdCIsIkRhdGUiLCJ1cGRhdGVkQXQiLCJleGVyY2lzZURhdGEiLCJuYW1lIiwiY2F0ZWdvcnkiLCJwcmltYXJ5Qm9keVBhcnRzIiwic2Vjb25kYXJ5Qm9keVBhcnRzIiwidGFncyIsImRlc2NyaXB0aW9uIiwic3RlcHMiLCJjdXJyZW50VmlkZW9Qb3NpdGlvbiIsInJlcHMiLCJzZXRzIiwid2VpZ2h0IiwiYXV0aG9yIiwiZmlsdGVyIiwiZmV0Y2hGb2xsb3dpbmciLCJmb2xsb3dSZXF1ZXN0c1JlZiIsImZvbGxvd1JlcXVlc3RzIiwiZnJvbVVzZXIiLCJkaXNwbGF5TmFtZSIsInRvVXNlciIsInN0YXR1cyIsImZldGNoRm9sbG93ZXJzIiwiZ2V0VXNlcklkQnlVc2VybmFtZSIsImVtcHR5IiwiZ2V0QWxsVXNlcnMiLCJwcm9maWxlSW1hZ2VVUkwiLCJnZXRVc2VyQnlVc2VybmFtZSIsInVzZXJEYXRhIiwiZmV0Y2hVc2Vyc1dpdGhWaWRlb3NVcGxvYWRlZCIsInNvcnQiLCJNYXRoIiwicmFuZG9tIiwiZ2V0U3RhdGUiLCJkaXNwYXRjaCIsInVzZXJTZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/api/firebase/user/service.ts\n"));

/***/ })

});
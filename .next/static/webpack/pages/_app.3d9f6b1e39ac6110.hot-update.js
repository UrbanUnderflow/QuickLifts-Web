"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/_app",{

/***/ "./src/api/firebase/user/service.ts":
/*!******************************************!*\
  !*** ./src/api/firebase/user/service.ts ***!
  \******************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   userService: function() { return /* binding */ userService; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @swc/helpers/_/_async_to_generator */ \"./node_modules/@swc/helpers/esm/_async_to_generator.js\");\n/* harmony import */ var _swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @swc/helpers/_/_class_call_check */ \"./node_modules/@swc/helpers/esm/_class_call_check.js\");\n/* harmony import */ var _swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @swc/helpers/_/_create_class */ \"./node_modules/@swc/helpers/esm/_create_class.js\");\n/* harmony import */ var _swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @swc/helpers/_/_object_spread */ \"./node_modules/@swc/helpers/esm/_object_spread.js\");\n/* harmony import */ var _swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @swc/helpers/_/_object_spread_props */ \"./node_modules/@swc/helpers/esm/_object_spread_props.js\");\n/* harmony import */ var _swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @swc/helpers/_/_ts_generator */ \"./node_modules/@swc/helpers/esm/_ts_generator.js\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ \"./src/api/firebase/user/types.ts\");\n/* harmony import */ var _workout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../workout */ \"./src/api/firebase/workout/index.ts\");\n/* harmony import */ var _exercise_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../exercise/types */ \"./src/api/firebase/exercise/types.ts\");\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../user */ \"./src/api/firebase/user/index.ts\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! firebase/firestore */ \"./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../config */ \"./src/api/firebase/config.ts\");\n/* harmony import */ var _redux_store__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../redux/store */ \"./src/redux/store.ts\");\n/* harmony import */ var _redux_userSlice__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../redux/userSlice */ \"./src/redux/userSlice.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar UserService = /*#__PURE__*/ function() {\n    \"use strict\";\n    function UserService() {\n        (0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_8__._)(this, UserService);\n    }\n    var _proto = UserService.prototype;\n    _proto.fetchUserFromFirestore = function fetchUserFromFirestore(userId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_9__._)(function() {\n            var userRef, userDoc;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_10__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)(_config__WEBPACK_IMPORTED_MODULE_5__.db, \"users\", userId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDoc)(userRef)\n                        ];\n                    case 1:\n                        userDoc = _state.sent();\n                        if (!userDoc.exists()) {\n                            return [\n                                2,\n                                null\n                            ];\n                        }\n                        return [\n                            2,\n                            new _types__WEBPACK_IMPORTED_MODULE_0__.User(userDoc.data())\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.updateUser = function updateUser(userId, user) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_9__._)(function() {\n            var userRef;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_10__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)(_config__WEBPACK_IMPORTED_MODULE_5__.db, \"users\", userId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.setDoc)(userRef, user.toDictionary(), {\n                                merge: true\n                            })\n                        ];\n                    case 1:\n                        _state.sent();\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getUsersByIds = function getUsersByIds(ids) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_9__._)(function() {\n            var users, chunkSize, i, chunk, usersRef, q, querySnapshot;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_10__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!ids.length) return [\n                            2,\n                            []\n                        ];\n                        users = [];\n                        chunkSize = 10; // Firestore 'in' queries support up to 10 values\n                        i = 0;\n                        _state.label = 1;\n                    case 1:\n                        if (!(i < ids.length)) return [\n                            3,\n                            4\n                        ];\n                        chunk = ids.slice(i, i + chunkSize);\n                        usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_5__.db, \"users\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.documentId)(), \"in\", chunk));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q)\n                        ];\n                    case 2:\n                        querySnapshot = _state.sent();\n                        querySnapshot.docs.forEach(function(doc) {\n                            users.push(new _types__WEBPACK_IMPORTED_MODULE_0__.User((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: doc.id\n                            }, doc.data())));\n                        });\n                        _state.label = 3;\n                    case 3:\n                        i += chunkSize;\n                        return [\n                            3,\n                            1\n                        ];\n                    case 4:\n                        return [\n                            2,\n                            users\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getUserById = function getUserById(userId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_9__._)(function() {\n            var userDoc, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_10__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)(_config__WEBPACK_IMPORTED_MODULE_5__.db, \"users\", userId))\n                        ];\n                    case 1:\n                        userDoc = _state.sent();\n                        if (!userDoc.exists()) {\n                            throw new Error(\"User not found\");\n                        }\n                        return [\n                            2,\n                            new _types__WEBPACK_IMPORTED_MODULE_0__.User((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: userDoc.id\n                            }, userDoc.data()))\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error getting user by ID:\", error);\n                        throw error;\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.deleteUserVideo = function deleteUserVideo(exerciseId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_9__._)(function() {\n            var _this_currentUser, exerciseRef, exerciseDoc, videos, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_10__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!((_this_currentUser = _this.currentUser) === null || _this_currentUser === void 0 ? void 0 : _this_currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            6,\n                            ,\n                            7\n                        ]);\n                        exerciseRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)(_config__WEBPACK_IMPORTED_MODULE_5__.db, \"exercises\", exerciseId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDoc)(exerciseRef)\n                        ];\n                    case 2:\n                        exerciseDoc = _state.sent();\n                        if (!exerciseDoc.exists()) return [\n                            3,\n                            4\n                        ];\n                        videos = exerciseDoc.data().videos || [];\n                        // Delete video files from storage\n                        return [\n                            4,\n                            Promise.all(videos.map(function() {\n                                var _ref = (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_9__._)(function(video) {\n                                    var videoRef, gifRef;\n                                    return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_10__._)(this, function(_state) {\n                                        switch(_state.label){\n                                            case 0:\n                                                if (!video.videoURL) return [\n                                                    3,\n                                                    2\n                                                ];\n                                                videoRef = ref(getStorage(), video.videoURL);\n                                                return [\n                                                    4,\n                                                    deleteObject(videoRef)\n                                                ];\n                                            case 1:\n                                                _state.sent();\n                                                _state.label = 2;\n                                            case 2:\n                                                if (!video.gifURL) return [\n                                                    3,\n                                                    4\n                                                ];\n                                                gifRef = ref(getStorage(), video.gifURL);\n                                                return [\n                                                    4,\n                                                    deleteObject(gifRef)\n                                                ];\n                                            case 3:\n                                                _state.sent();\n                                                _state.label = 4;\n                                            case 4:\n                                                return [\n                                                    2\n                                                ];\n                                        }\n                                    });\n                                });\n                                return function(video) {\n                                    return _ref.apply(this, arguments);\n                                };\n                            }()))\n                        ];\n                    case 3:\n                        _state.sent();\n                        _state.label = 4;\n                    case 4:\n                        // Delete exercise document\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.deleteDoc)(exerciseRef)\n                        ];\n                    case 5:\n                        _state.sent();\n                        return [\n                            3,\n                            7\n                        ];\n                    case 6:\n                        error = _state.sent();\n                        console.error(\"Error deleting user video:\", error);\n                        throw error;\n                    case 7:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.deleteStack = function deleteStack(stackId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_9__._)(function() {\n            var _this_currentUser, stackRef, logsRef, logsSnapshot, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_10__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!((_this_currentUser = _this.currentUser) === null || _this_currentUser === void 0 ? void 0 : _this_currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            5,\n                            ,\n                            6\n                        ]);\n                        stackRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)(_config__WEBPACK_IMPORTED_MODULE_5__.db, \"users\", _this.currentUser.id, \"MyCreatedWorkouts\", stackId);\n                        // Delete associated logs\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(stackRef, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(logsRef)\n                        ];\n                    case 2:\n                        logsSnapshot = _state.sent();\n                        return [\n                            4,\n                            Promise.all(logsSnapshot.docs.map(function(doc) {\n                                return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.deleteDoc)(doc.ref);\n                            }))\n                        ];\n                    case 3:\n                        _state.sent();\n                        // Delete stack document\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.deleteDoc)(stackRef)\n                        ];\n                    case 4:\n                        _state.sent();\n                        return [\n                            3,\n                            6\n                        ];\n                    case 5:\n                        error = _state.sent();\n                        console.error(\"Error deleting stack:\", error);\n                        throw error;\n                    case 6:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.createStack = function createStack(workout, exerciseLogs) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_9__._)(function() {\n            var _this_currentUser, userWorkoutRef, batch, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_10__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!((_this_currentUser = _this.currentUser) === null || _this_currentUser === void 0 ? void 0 : _this_currentUser.id)) {\n                            throw new Error(\"No user is signed in.\");\n                        }\n                        // Reference to the new stack document under the user's MyCreatedWorkouts subcollection\n                        userWorkoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_5__.db, \"users\", _this.currentUser.id, \"MyCreatedWorkouts\"), workout.id);\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            5,\n                            ,\n                            6\n                        ]);\n                        // Save the workout document\n                        console.log(\"Right before we save: \" + JSON.stringify(workout.toDictionary()));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.setDoc)(userWorkoutRef, workout.toDictionary())\n                        ];\n                    case 2:\n                        _state.sent();\n                        console.log(\"Stack created successfully\");\n                        if (!(exerciseLogs && exerciseLogs.length > 0)) return [\n                            3,\n                            4\n                        ];\n                        batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_5__.db);\n                        exerciseLogs.forEach(function(log, index) {\n                            // Set the order (index + 1)\n                            log.order = index + 1;\n                            var logRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(userWorkoutRef, \"logs\"), log.id);\n                            batch.set(logRef, log.toDictionary());\n                        });\n                        return [\n                            4,\n                            batch.commit()\n                        ];\n                    case 3:\n                        _state.sent();\n                        console.log(\"Exercise logs saved successfully\");\n                        _state.label = 4;\n                    case 4:\n                        // After successful save, return the workout\n                        return [\n                            2,\n                            workout\n                        ];\n                    case 5:\n                        error = _state.sent();\n                        console.error(\"Error creating stack:\", error);\n                        throw error;\n                    case 6:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchUserStacks = function fetchUserStacks(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_9__._)(function() {\n            var _this_currentUser, currentUserId, stacksRef, querySnapshot, stacks, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_10__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUserId = userId || ((_this_currentUser = _this.currentUser) === null || _this_currentUser === void 0 ? void 0 : _this_currentUser.id);\n                        if (!currentUserId) {\n                            throw new Error(\"No user ID provided\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            4,\n                            ,\n                            5\n                        ]);\n                        stacksRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_5__.db, \"users\", currentUserId, \"MyCreatedWorkouts\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(stacksRef)\n                        ];\n                    case 2:\n                        querySnapshot = _state.sent();\n                        return [\n                            4,\n                            Promise.all(querySnapshot.docs.map(function() {\n                                var _ref = (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_9__._)(function(doc) {\n                                    var stackData, logsRef, logsSnapshot, logs;\n                                    return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_10__._)(this, function(_state) {\n                                        switch(_state.label){\n                                            case 0:\n                                                stackData = doc.data();\n                                                // Fetch logs for this stack\n                                                logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(doc.ref, \"logs\");\n                                                return [\n                                                    4,\n                                                    (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(logsRef)\n                                                ];\n                                            case 1:\n                                                logsSnapshot = _state.sent();\n                                                logs = logsSnapshot.docs.map(function(logDoc) {\n                                                    return new _exercise_types__WEBPACK_IMPORTED_MODULE_2__.ExerciseLog((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                                        id: logDoc.id\n                                                    }, logDoc.data()));\n                                                });\n                                                return [\n                                                    2,\n                                                    new _workout__WEBPACK_IMPORTED_MODULE_1__.Workout((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({}, stackData), {\n                                                        id: doc.id,\n                                                        logs: logs\n                                                    }))\n                                                ];\n                                        }\n                                    });\n                                });\n                                return function(doc) {\n                                    return _ref.apply(this, arguments);\n                                };\n                            }()))\n                        ];\n                    case 3:\n                        stacks = _state.sent();\n                        return [\n                            2,\n                            stacks\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error fetching user stacks:\", error);\n                        throw error;\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchUserVideos = function fetchUserVideos(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_9__._)(function() {\n            var _this_currentUser, currentUserId, exerciseVideosRef, q, videoSnapshot, videosByExerciseName, exercisesRef, exercisesSnapshot, userExercises, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_10__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        // Use current user's ID if no ID is provided\n                        currentUserId = userId || ((_this_currentUser = _this.currentUser) === null || _this_currentUser === void 0 ? void 0 : _this_currentUser.id);\n                        if (!currentUserId) {\n                            throw new Error(\"No user ID provided\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            4,\n                            ,\n                            5\n                        ]);\n                        // Step 1: Fetch user's exercise videos\n                        exerciseVideosRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_5__.db, \"exerciseVideos\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(exerciseVideosRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"userId\", \"==\", currentUserId));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q)\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        // Group videos by exercise name\n                        videosByExerciseName = {};\n                        videoSnapshot.docs.forEach(function(doc) {\n                            var videoData = doc.data();\n                            var exerciseName = videoData[\"exercise\"];\n                            if (!exerciseName) {\n                                console.warn(\"Exercise name missing for video \".concat(doc.id));\n                                return;\n                            }\n                            var video = new _exercise_types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo({\n                                id: doc.id,\n                                exerciseId: videoData.exerciseId || \"\",\n                                username: videoData.username || \"\",\n                                userId: videoData.userId || \"\",\n                                videoURL: videoData.videoURL || \"\",\n                                fileName: videoData.fileName || \"\",\n                                exercise: exerciseName,\n                                profileImage: new _user__WEBPACK_IMPORTED_MODULE_3__.ProfileImage(videoData.profileImage || {}),\n                                caption: videoData.caption || \"\",\n                                gifURL: videoData.gifURL || \"\",\n                                thumbnail: videoData.thumbnail || \"\",\n                                visibility: videoData.visibility || \"open\",\n                                totalAccountsReached: videoData.totalAccountsReached || 0,\n                                totalAccountLikes: videoData.totalAccountLikes || 0,\n                                totalAccountBookmarked: videoData.totalAccountBookmarked || 0,\n                                totalAccountUsage: videoData.totalAccountUsage || 0,\n                                isApproved: videoData.isApproved || false,\n                                liked: videoData.liked || false,\n                                bookmarked: videoData.bookmarked || false,\n                                createdAt: videoData.createdAt ? new Date(videoData.createdAt) : new Date(),\n                                updatedAt: videoData.updatedAt ? new Date(videoData.updatedAt) : new Date()\n                            });\n                            if (!videosByExerciseName[exerciseName]) {\n                                videosByExerciseName[exerciseName] = [];\n                            }\n                            videosByExerciseName[exerciseName].push(video);\n                        });\n                        // Step 2: Fetch all exercises\n                        exercisesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_5__.db, \"exercises\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(exercisesRef)\n                        ];\n                    case 3:\n                        exercisesSnapshot = _state.sent();\n                        // Step 3: Map videos to exercises\n                        userExercises = exercisesSnapshot.docs.map(function(doc) {\n                            var _exerciseData_author, _exerciseData_author1;\n                            var exerciseData = doc.data();\n                            var exerciseName = exerciseData.name;\n                            // Create base exercise\n                            // For the Exercise:\n                            var exercise = new _exercise_types__WEBPACK_IMPORTED_MODULE_2__.Exercise({\n                                id: doc.id,\n                                name: exerciseName,\n                                category: exerciseData.category,\n                                primaryBodyParts: exerciseData.primaryBodyParts || [],\n                                secondaryBodyParts: exerciseData.secondaryBodyParts || [],\n                                tags: exerciseData.tags || [],\n                                description: exerciseData.description || \"\",\n                                visibility: exerciseData.visibility || \"limited\",\n                                steps: exerciseData.steps || [],\n                                videos: videosByExerciseName[exerciseName] || [],\n                                currentVideoPosition: 0,\n                                reps: exerciseData.reps || \"\",\n                                sets: exerciseData.sets || 0,\n                                weight: exerciseData.weight || 0,\n                                author: new _exercise_types__WEBPACK_IMPORTED_MODULE_2__.ExerciseAuthor({\n                                    userId: ((_exerciseData_author = exerciseData.author) === null || _exerciseData_author === void 0 ? void 0 : _exerciseData_author.userId) || \"\",\n                                    username: ((_exerciseData_author1 = exerciseData.author) === null || _exerciseData_author1 === void 0 ? void 0 : _exerciseData_author1.username) || \"\"\n                                }),\n                                createdAt: exerciseData.createdAt ? new Date(exerciseData.createdAt) : new Date(),\n                                updatedAt: exerciseData.updatedAt ? new Date(exerciseData.updatedAt) : new Date()\n                            });\n                            return exercise;\n                        }).filter(function(exercise) {\n                            return exercise.videos.length > 0;\n                        });\n                        return [\n                            2,\n                            userExercises\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error fetching user videos:\", error);\n                        throw error;\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchFollowing = function fetchFollowing() {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_9__._)(function() {\n            var currentUser, followRequestsRef, q, querySnapshot, followRequests, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_10__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _this.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        followRequestsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_5__.db, \"followRequests\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(followRequestsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"fromUser.id\", \"==\", currentUser.id));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q)\n                        ];\n                    case 2:\n                        querySnapshot = _state.sent();\n                        followRequests = querySnapshot.docs.map(function(doc) {\n                            var _data_fromUser, _data_fromUser1, _data_fromUser2, _data_toUser, _data_toUser1, _data_toUser2;\n                            var data = doc.data();\n                            return {\n                                fromUser: {\n                                    id: ((_data_fromUser = data.fromUser) === null || _data_fromUser === void 0 ? void 0 : _data_fromUser.id) || \"\",\n                                    username: ((_data_fromUser1 = data.fromUser) === null || _data_fromUser1 === void 0 ? void 0 : _data_fromUser1.username) || \"\",\n                                    displayName: ((_data_fromUser2 = data.fromUser) === null || _data_fromUser2 === void 0 ? void 0 : _data_fromUser2.displayName) || \"\"\n                                },\n                                toUser: {\n                                    id: ((_data_toUser = data.toUser) === null || _data_toUser === void 0 ? void 0 : _data_toUser.id) || \"\",\n                                    username: ((_data_toUser1 = data.toUser) === null || _data_toUser1 === void 0 ? void 0 : _data_toUser1.username) || \"\",\n                                    displayName: ((_data_toUser2 = data.toUser) === null || _data_toUser2 === void 0 ? void 0 : _data_toUser2.displayName) || \"\"\n                                },\n                                status: data.status || \"\",\n                                createdAt: data.createdAt instanceof Date ? data.createdAt : data.createdAt ? new Date(data.createdAt) : new Date(),\n                                updatedAt: data.updatedAt instanceof Date ? data.updatedAt : data.updatedAt ? new Date(data.updatedAt) : new Date()\n                            };\n                        });\n                        return [\n                            2,\n                            followRequests\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching following:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchFollowers = function fetchFollowers() {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_9__._)(function() {\n            var currentUser, followRequestsRef, q, querySnapshot, followRequests, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_10__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _this.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        followRequestsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_5__.db, \"followRequests\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(followRequestsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"toUser.id\", \"==\", currentUser.id));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q)\n                        ];\n                    case 2:\n                        querySnapshot = _state.sent();\n                        followRequests = querySnapshot.docs.map(function(doc) {\n                            var _data_fromUser, _data_fromUser1, _data_fromUser2, _data_toUser, _data_toUser1, _data_toUser2;\n                            var data = doc.data();\n                            return {\n                                fromUser: {\n                                    id: ((_data_fromUser = data.fromUser) === null || _data_fromUser === void 0 ? void 0 : _data_fromUser.id) || \"\",\n                                    username: ((_data_fromUser1 = data.fromUser) === null || _data_fromUser1 === void 0 ? void 0 : _data_fromUser1.username) || \"\",\n                                    displayName: ((_data_fromUser2 = data.fromUser) === null || _data_fromUser2 === void 0 ? void 0 : _data_fromUser2.displayName) || \"\"\n                                },\n                                toUser: {\n                                    id: ((_data_toUser = data.toUser) === null || _data_toUser === void 0 ? void 0 : _data_toUser.id) || \"\",\n                                    username: ((_data_toUser1 = data.toUser) === null || _data_toUser1 === void 0 ? void 0 : _data_toUser1.username) || \"\",\n                                    displayName: ((_data_toUser2 = data.toUser) === null || _data_toUser2 === void 0 ? void 0 : _data_toUser2.displayName) || \"\"\n                                },\n                                status: data.status || \"\",\n                                createdAt: data.createdAt instanceof Date ? data.createdAt : data.createdAt ? new Date(data.createdAt) : new Date(),\n                                updatedAt: data.updatedAt instanceof Date ? data.updatedAt : data.updatedAt ? new Date(data.updatedAt) : new Date()\n                            };\n                        });\n                        return [\n                            2,\n                            followRequests\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching followers:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetch user ID by username\n   * @param username The username to search for\n   * @returns Promise resolving to the user ID or null if not found\n   */ _proto.getUserIdByUsername = function getUserIdByUsername(username) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_9__._)(function() {\n            var usersRef, q, querySnapshot, userDoc, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_10__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_5__.db, \"users\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"username\", \"==\", username), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.limit)(1));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q)\n                        ];\n                    case 1:\n                        querySnapshot = _state.sent();\n                        if (!querySnapshot.empty) {\n                            userDoc = querySnapshot.docs[0];\n                            return [\n                                2,\n                                userDoc.id\n                            ];\n                        }\n                        return [\n                            2,\n                            null\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error fetching user ID by username:\", error);\n                        return [\n                            2,\n                            null\n                        ];\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getAllUsers = function getAllUsers() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_9__._)(function() {\n            var usersRef, querySnapshot, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_10__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_5__.db, \"users\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(usersRef)\n                        ];\n                    case 1:\n                        querySnapshot = _state.sent();\n                        return [\n                            2,\n                            querySnapshot.docs.map(function(doc) {\n                                return new _types__WEBPACK_IMPORTED_MODULE_0__.User((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                    id: doc.id\n                                }, doc.data()));\n                            }).filter(function(user) {\n                                var _user_profileImage;\n                                return (_user_profileImage = user.profileImage) === null || _user_profileImage === void 0 ? void 0 : _user_profileImage.profileImageURL;\n                            })\n                        ]; // Only return users with profile images\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error fetching users:\", error);\n                        return [\n                            2,\n                            []\n                        ];\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // In userService\n    _proto.getUserByUsername = function getUserByUsername(username) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_9__._)(function() {\n            var usersRef, q, querySnapshot, userData, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_10__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_5__.db, \"users\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"username\", \"==\", username));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q)\n                        ];\n                    case 1:\n                        querySnapshot = _state.sent();\n                        if (querySnapshot.empty) {\n                            return [\n                                2,\n                                null\n                            ];\n                        }\n                        userData = querySnapshot.docs[0].data();\n                        return [\n                            2,\n                            new _types__WEBPACK_IMPORTED_MODULE_0__.User((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: querySnapshot.docs[0].id\n                            }, userData))\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error fetching user by username:\", error);\n                        throw error;\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchUsersWithVideosUploaded = function fetchUsersWithVideosUploaded() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_9__._)(function() {\n            var usersRef, q, querySnapshot, users, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_10__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        // Create a query against the users collection\n                        usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_5__.db, \"users\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"videoCount\", \">\", 0) // Only fetch users with videos\n                        );\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q)\n                        ];\n                    case 1:\n                        querySnapshot = _state.sent();\n                        // Map the documents to User objects\n                        users = querySnapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            return new _types__WEBPACK_IMPORTED_MODULE_0__.User((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: doc.id\n                            }, data));\n                        })// Filter out users without profile images\n                        .filter(function(user) {\n                            var _user_profileImage;\n                            return (_user_profileImage = user.profileImage) === null || _user_profileImage === void 0 ? void 0 : _user_profileImage.profileImageURL;\n                        })// Shuffle the results\n                        .sort(function() {\n                            return Math.random() - 0.5;\n                        });\n                        return [\n                            2,\n                            users\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error fetching users with videos:\", error);\n                        return [\n                            2,\n                            []\n                        ];\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    (0,_swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_13__._)(UserService, [\n        {\n            key: \"currentUser\",\n            get: function get() {\n                return _redux_store__WEBPACK_IMPORTED_MODULE_6__.store.getState().user.currentUser;\n            },\n            set: function set(user) {\n                _redux_store__WEBPACK_IMPORTED_MODULE_6__.store.dispatch((0,_redux_userSlice__WEBPACK_IMPORTED_MODULE_7__.setUser)(user));\n            }\n        }\n    ]);\n    return UserService;\n}();\nvar userService = new UserService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL2ZpcmViYXNlL3VzZXIvc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEM7QUFDVDtBQUNvRDtBQUNsRDtBQUUrRjtBQUN2RztBQUVjO0FBQ007QUFFbkQsZ0NBQUs7O2FBQUNxQjsrRUFBQUE7O2lCQUFBQTtJQVNKLE9BQU1DLHNCQVNQLEdBVEMsU0FBTUEsdUJBQXVCQyxNQUFjO2VBQTNDO2dCQUNRQyxTQUNBQzs7Ozt3QkFEQUQsVUFBVWpCLHVEQUFHQSxDQUFDVyx1Q0FBRUEsRUFBRSxTQUFTSzt3QkFDakI7OzRCQUFNZiwwREFBTUEsQ0FBQ2dCOzs7d0JBQXZCQyxVQUFVO3dCQUVoQixJQUFJLENBQUNBLFFBQVFDLE1BQU0sSUFBSTs0QkFDckI7O2dDQUFPOzt3QkFDVDt3QkFFQTs7NEJBQU8sSUFBSTFCLHdDQUFJQSxDQUFDeUIsUUFBUUUsSUFBSTs7OztRQUNoQzs7SUFFRSxPQUFNQyxVQUdMLEdBSEQsU0FBTUEsV0FBV0wsTUFBYyxFQUFFTSxJQUFVO2VBQTNDO2dCQUNRTDs7Ozt3QkFBQUEsVUFBVWpCLHVEQUFHQSxDQUFDVyx1Q0FBRUEsRUFBRSxTQUFTSzt3QkFDakM7OzRCQUFNZCwwREFBTUEsQ0FBQ2UsU0FBU0ssS0FBS0MsWUFBWSxJQUFJO2dDQUFFQyxPQUFPOzRCQUFLOzs7d0JBQXpEOzs7Ozs7UUFDRjs7SUFFQSxPQUFNQyxhQWNMLEdBZEQsU0FBTUEsY0FBY0MsR0FBYTtlQUFqQztnQkFFUUMsT0FDQUMsV0FDR0MsR0FDREMsT0FDQUMsVUFDQUMsR0FDQUM7Ozs7d0JBUFIsSUFBSSxDQUFDUCxJQUFJUSxNQUFNLEVBQUU7Ozs7d0JBQ1hQO3dCQUNBQyxZQUFZLElBQUksaURBQWlEO3dCQUM5REMsSUFBSTs7OzZCQUFHQSxDQUFBQSxJQUFJSCxJQUFJUSxNQUFNOzs7O3dCQUN0QkosUUFBUUosSUFBSVMsS0FBSyxDQUFDTixHQUFHQSxJQUFJRDt3QkFDekJHLFdBQVczQiw4REFB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QUNiMEIsVUFDQXpCLHlEQUFLQSxDQUFDLGNBQWMsS0FBSyxHQUFHLCtCQUErQjs7d0JBR3ZDOzs0QkFBTUMsMkRBQU9BLENBQUN5Qjs7O3dCQUE5QkMsZ0JBQWdCO3dCQUV0QixvQ0FBb0M7d0JBQzlCTixRQUFRTSxjQUFjRyxJQUFJLENBQy9CZ0IsR0FBRyxDQUFDcEQsU0FBQUE7NEJBQ0MsSUFBTW9CLE9BQU9wQixJQUFJb0IsSUFBSTs0QkFDckIsT0FBTyxJQUFJM0Isd0NBQUlBLENBQUM7Z0NBQUU4QyxJQUFJdkMsSUFBSXVDLEVBQUU7K0JBQUtuQjt3QkFDckMsRUFDQSwwQ0FBMEM7eUJBQ3pDMEcsTUFBTSxDQUFDeEcsU0FBQUE7Z0NBQVFBO29DQUFBQSxxQkFBQUEsS0FBSzZFLFlBQVksY0FBakI3RSx5Q0FBQUEsbUJBQW1Cb0gsZUFBZTswQkFDbEQsc0JBQXNCO3lCQUNyQkksSUFBSSxDQUFDO21DQUFNQyxLQUFLQyxNQUFNLEtBQUs7O3dCQUU5Qjs7NEJBQU9ySDs7O3dCQUNBYzt3QkFDUEUsUUFBUUYsS0FBSyxDQUFDLHFDQUFxQ0E7d0JBQ25EOzs7Ozs7Ozs7O1FBRUo7O2tFQXhkSTNCOztZQUNBbUMsS0FBQUE7aUJBQUo7Z0JBQ0UsT0FBT3JDLCtDQUFLQSxDQUFDcUksUUFBUSxHQUFHM0gsSUFBSSxDQUFDMkIsV0FBVztZQUMxQztpQkFFQSxhQUFnQjNCLElBQWlCO2dCQUMvQlYsK0NBQUtBLENBQUNzSSxRQUFRLENBQUNySSx5REFBT0EsQ0FBQ1M7WUFDekI7OztXQVBJUjs7QUEyZEMsSUFBTXFJLGNBQWMsSUFBSXJJLGNBQWMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2FwaS9maXJlYmFzZS91c2VyL3NlcnZpY2UudHM/OGYwYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVc2VyLCBGb2xsb3dSZXF1ZXN0IH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBXb3Jrb3V0IH0gZnJvbSAnLi4vd29ya291dCc7XG5pbXBvcnQgeyBFeGVyY2lzZSwgRXhlcmNpc2VWaWRlbywgRXhlcmNpc2VBdXRob3IsIEV4ZXJjaXNlTG9nIH0gZnJvbSAnLi4vZXhlcmNpc2UvdHlwZXMnO1xuaW1wb3J0IHsgUHJvZmlsZUltYWdlIH0gZnJvbSAnLi4vdXNlcic7XG5cbmltcG9ydCB7IGRvYywgZ2V0RG9jLCBzZXREb2MsIGRvY3VtZW50SWQsIGNvbGxlY3Rpb24sIHF1ZXJ5LCB3aGVyZSwgZ2V0RG9jcywgbGltaXQsIHdyaXRlQmF0Y2gsIGRlbGV0ZURvYyB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XG5pbXBvcnQgeyBkYiB9IGZyb20gJy4uL2NvbmZpZyc7XG5cbmltcG9ydCB7IHN0b3JlIH0gZnJvbSAnLi4vLi4vLi4vcmVkdXgvc3RvcmUnO1xuaW1wb3J0IHsgc2V0VXNlciB9IGZyb20gJy4uLy4uLy4uL3JlZHV4L3VzZXJTbGljZSc7XG5cbmNsYXNzIFVzZXJTZXJ2aWNlIHtcbiAgZ2V0IGN1cnJlbnRVc2VyKCk6IFVzZXIgfCBudWxsIHtcbiAgICByZXR1cm4gc3RvcmUuZ2V0U3RhdGUoKS51c2VyLmN1cnJlbnRVc2VyO1xuICB9XG5cbiAgc2V0IGN1cnJlbnRVc2VyKHVzZXI6IFVzZXIgfCBudWxsKSB7XG4gICAgc3RvcmUuZGlzcGF0Y2goc2V0VXNlcih1c2VyKSk7XG4gIH1cblxuICBhc3luYyBmZXRjaFVzZXJGcm9tRmlyZXN0b3JlKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICAgIGNvbnN0IHVzZXJSZWYgPSBkb2MoZGIsICd1c2VycycsIHVzZXJJZCk7XG4gICAgY29uc3QgdXNlckRvYyA9IGF3YWl0IGdldERvYyh1c2VyUmVmKTtcblxuICAgIGlmICghdXNlckRvYy5leGlzdHMoKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBVc2VyKHVzZXJEb2MuZGF0YSgpKTtcbn1cblxuICBhc3luYyB1cGRhdGVVc2VyKHVzZXJJZDogc3RyaW5nLCB1c2VyOiBVc2VyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgdXNlclJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdXNlcklkKTtcbiAgICBhd2FpdCBzZXREb2ModXNlclJlZiwgdXNlci50b0RpY3Rpb25hcnkoKSwgeyBtZXJnZTogdHJ1ZSB9KTtcbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJzQnlJZHMoaWRzOiBzdHJpbmdbXSk6IFByb21pc2U8VXNlcltdPiB7XG4gICAgaWYgKCFpZHMubGVuZ3RoKSByZXR1cm4gW107XG4gICAgY29uc3QgdXNlcnM6IFVzZXJbXSA9IFtdO1xuICAgIGNvbnN0IGNodW5rU2l6ZSA9IDEwOyAvLyBGaXJlc3RvcmUgJ2luJyBxdWVyaWVzIHN1cHBvcnQgdXAgdG8gMTAgdmFsdWVzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpZHMubGVuZ3RoOyBpICs9IGNodW5rU2l6ZSkge1xuICAgICAgY29uc3QgY2h1bmsgPSBpZHMuc2xpY2UoaSwgaSArIGNodW5rU2l6ZSk7XG4gICAgICBjb25zdCB1c2Vyc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycpO1xuICAgICAgY29uc3QgcSA9IHF1ZXJ5KHVzZXJzUmVmLCB3aGVyZShkb2N1bWVudElkKCksICdpbicsIGNodW5rKSk7XG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICAgIHF1ZXJ5U25hcHNob3QuZG9jcy5mb3JFYWNoKGRvYyA9PiB7XG4gICAgICAgIHVzZXJzLnB1c2gobmV3IFVzZXIoeyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH0pKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdXNlcnM7XG4gIH1cblxuICBhc3luYyBnZXRVc2VyQnlJZCh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8VXNlcj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyRG9jID0gYXdhaXQgZ2V0RG9jKGRvYyhkYiwgJ3VzZXJzJywgdXNlcklkKSk7XG4gICAgICBpZiAoIXVzZXJEb2MuZXhpc3RzKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIG5vdCBmb3VuZCcpO1xuICAgICAgfVxuICAgXG4gICAgICByZXR1cm4gbmV3IFVzZXIoe1xuICAgICAgICBpZDogdXNlckRvYy5pZCxcbiAgICAgICAgLi4udXNlckRvYy5kYXRhKClcbiAgICAgIH0pO1xuICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgdXNlciBieSBJRDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICB9XG5cbiAgIGFzeW5jIGRlbGV0ZVVzZXJWaWRlbyhleGVyY2lzZUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuY3VycmVudFVzZXI/LmlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgfVxuICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgZXhlcmNpc2VSZWYgPSBkb2MoZGIsICdleGVyY2lzZXMnLCBleGVyY2lzZUlkKTtcbiAgICAgIGNvbnN0IGV4ZXJjaXNlRG9jID0gYXdhaXQgZ2V0RG9jKGV4ZXJjaXNlUmVmKTtcbiAgXG4gICAgICBpZiAoZXhlcmNpc2VEb2MuZXhpc3RzKCkpIHtcbiAgICAgICAgY29uc3QgdmlkZW9zID0gZXhlcmNpc2VEb2MuZGF0YSgpLnZpZGVvcyB8fCBbXTtcbiAgICAgICAgXG4gICAgICAgIC8vIERlbGV0ZSB2aWRlbyBmaWxlcyBmcm9tIHN0b3JhZ2VcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgICAgdmlkZW9zLm1hcChhc3luYyAodmlkZW86IHsgdmlkZW9VUkw/OiBzdHJpbmcsIGdpZlVSTD86IHN0cmluZyB9KSA9PiB7XG4gICAgICAgICAgICBpZiAodmlkZW8udmlkZW9VUkwpIHtcbiAgICAgICAgICAgICAgY29uc3QgdmlkZW9SZWYgPSByZWYoZ2V0U3RvcmFnZSgpLCB2aWRlby52aWRlb1VSTCk7XG4gICAgICAgICAgICAgIGF3YWl0IGRlbGV0ZU9iamVjdCh2aWRlb1JlZik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmlkZW8uZ2lmVVJMKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGdpZlJlZiA9IHJlZihnZXRTdG9yYWdlKCksIHZpZGVvLmdpZlVSTCk7XG4gICAgICAgICAgICAgIGF3YWl0IGRlbGV0ZU9iamVjdChnaWZSZWYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9XG4gIFxuICAgICAgLy8gRGVsZXRlIGV4ZXJjaXNlIGRvY3VtZW50XG4gICAgICBhd2FpdCBkZWxldGVEb2MoZXhlcmNpc2VSZWYpO1xuICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgdXNlciB2aWRlbzonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbiAgXG4gIGFzeW5jIGRlbGV0ZVN0YWNrKHN0YWNrSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5jdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBpcyBzaWduZWQgaW4nKTtcbiAgICB9XG4gIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdGFja1JlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdGhpcy5jdXJyZW50VXNlci5pZCwgJ015Q3JlYXRlZFdvcmtvdXRzJywgc3RhY2tJZCk7XG4gICAgICBcbiAgICAgIC8vIERlbGV0ZSBhc3NvY2lhdGVkIGxvZ3NcbiAgICAgIGNvbnN0IGxvZ3NSZWYgPSBjb2xsZWN0aW9uKHN0YWNrUmVmLCAnbG9ncycpO1xuICAgICAgY29uc3QgbG9nc1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhsb2dzUmVmKTtcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICBsb2dzU25hcHNob3QuZG9jcy5tYXAoZG9jID0+IGRlbGV0ZURvYyhkb2MucmVmKSlcbiAgICAgICk7XG4gIFxuICAgICAgLy8gRGVsZXRlIHN0YWNrIGRvY3VtZW50XG4gICAgICBhd2FpdCBkZWxldGVEb2Moc3RhY2tSZWYpO1xuICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgc3RhY2s6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlU3RhY2sod29ya291dDogV29ya291dCwgZXhlcmNpc2VMb2dzPzogRXhlcmNpc2VMb2dbXSk6IFByb21pc2U8V29ya291dD4ge1xuICAgIGlmICghdGhpcy5jdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBpcyBzaWduZWQgaW4uJyk7XG4gICAgfVxuXG4gICAgLy8gUmVmZXJlbmNlIHRvIHRoZSBuZXcgc3RhY2sgZG9jdW1lbnQgdW5kZXIgdGhlIHVzZXIncyBNeUNyZWF0ZWRXb3Jrb3V0cyBzdWJjb2xsZWN0aW9uXG4gICAgY29uc3QgdXNlcldvcmtvdXRSZWYgPSBkb2MoXG4gICAgICBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCB0aGlzLmN1cnJlbnRVc2VyLmlkLCAnTXlDcmVhdGVkV29ya291dHMnKSxcbiAgICAgIHdvcmtvdXQuaWRcbiAgICApO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFNhdmUgdGhlIHdvcmtvdXQgZG9jdW1lbnRcbiAgICAgIGNvbnNvbGUubG9nKFwiUmlnaHQgYmVmb3JlIHdlIHNhdmU6IFwiICsgSlNPTi5zdHJpbmdpZnkod29ya291dC50b0RpY3Rpb25hcnkoKSkpO1xuICAgICAgYXdhaXQgc2V0RG9jKHVzZXJXb3Jrb3V0UmVmLCB3b3Jrb3V0LnRvRGljdGlvbmFyeSgpKTtcbiAgICAgIGNvbnNvbGUubG9nKCdTdGFjayBjcmVhdGVkIHN1Y2Nlc3NmdWxseScpO1xuXG4gICAgICAvLyBJZiB0aGVyZSBhcmUgZXhlcmNpc2UgbG9ncywgc2F2ZSB0aGVtIGluIGEgYmF0Y2ggdG8gdGhlIFwibG9nc1wiIHN1YmNvbGxlY3Rpb25cbiAgICAgIGlmIChleGVyY2lzZUxvZ3MgJiYgZXhlcmNpc2VMb2dzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcbiAgICAgICAgZXhlcmNpc2VMb2dzLmZvckVhY2goKGxvZywgaW5kZXgpID0+IHtcbiAgICAgICAgICAvLyBTZXQgdGhlIG9yZGVyIChpbmRleCArIDEpXG4gICAgICAgICAgbG9nLm9yZGVyID0gaW5kZXggKyAxO1xuICAgICAgICAgIGNvbnN0IGxvZ1JlZiA9IGRvYyhjb2xsZWN0aW9uKHVzZXJXb3Jrb3V0UmVmLCAnbG9ncycpLCBsb2cuaWQpO1xuICAgICAgICAgIGJhdGNoLnNldChsb2dSZWYsIGxvZy50b0RpY3Rpb25hcnkoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBiYXRjaC5jb21taXQoKTtcbiAgICAgICAgY29uc29sZS5sb2coJ0V4ZXJjaXNlIGxvZ3Mgc2F2ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFmdGVyIHN1Y2Nlc3NmdWwgc2F2ZSwgcmV0dXJuIHRoZSB3b3Jrb3V0XG4gICAgICByZXR1cm4gd29ya291dDtcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBzdGFjazonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBmZXRjaFVzZXJTdGFja3ModXNlcklkPzogc3RyaW5nKTogUHJvbWlzZTxXb3Jrb3V0W10+IHtcbiAgICBjb25zdCBjdXJyZW50VXNlcklkID0gdXNlcklkIHx8IHRoaXMuY3VycmVudFVzZXI/LmlkO1xuICAgIFxuICAgIGlmICghY3VycmVudFVzZXJJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIElEIHByb3ZpZGVkJyk7XG4gICAgfVxuICBcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RhY2tzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgY3VycmVudFVzZXJJZCwgJ015Q3JlYXRlZFdvcmtvdXRzJyk7XG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhzdGFja3NSZWYpO1xuICAgICAgXG4gICAgICBjb25zdCBzdGFja3MgPSBhd2FpdCBQcm9taXNlLmFsbChxdWVyeVNuYXBzaG90LmRvY3MubWFwKGFzeW5jIGRvYyA9PiB7XG4gICAgICAgIGNvbnN0IHN0YWNrRGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBGZXRjaCBsb2dzIGZvciB0aGlzIHN0YWNrXG4gICAgICAgIGNvbnN0IGxvZ3NSZWYgPSBjb2xsZWN0aW9uKGRvYy5yZWYsICdsb2dzJyk7XG4gICAgICAgIGNvbnN0IGxvZ3NTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MobG9nc1JlZik7XG4gICAgICAgIGNvbnN0IGxvZ3MgPSBsb2dzU25hcHNob3QuZG9jcy5tYXAobG9nRG9jID0+IFxuICAgICAgICAgIG5ldyBFeGVyY2lzZUxvZyh7IGlkOiBsb2dEb2MuaWQsIC4uLmxvZ0RvYy5kYXRhKCkgfSlcbiAgICAgICAgKTtcbiAgXG4gICAgICAgIHJldHVybiBuZXcgV29ya291dCh7XG4gICAgICAgICAgLi4uc3RhY2tEYXRhLFxuICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgbG9nc1xuICAgICAgICB9KTtcbiAgICAgIH0pKTtcbiAgXG4gICAgICByZXR1cm4gc3RhY2tzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyIHN0YWNrczonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBmZXRjaFVzZXJWaWRlb3ModXNlcklkPzogc3RyaW5nKTogUHJvbWlzZTxFeGVyY2lzZVtdPiB7XG4gICAgLy8gVXNlIGN1cnJlbnQgdXNlcidzIElEIGlmIG5vIElEIGlzIHByb3ZpZGVkXG4gICAgY29uc3QgY3VycmVudFVzZXJJZCA9IHVzZXJJZCB8fCB0aGlzLmN1cnJlbnRVc2VyPy5pZDtcbiAgICBcbiAgICBpZiAoIWN1cnJlbnRVc2VySWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBJRCBwcm92aWRlZCcpO1xuICAgIH1cbiAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIFN0ZXAgMTogRmV0Y2ggdXNlcidzIGV4ZXJjaXNlIHZpZGVvc1xuICAgICAgY29uc3QgZXhlcmNpc2VWaWRlb3NSZWYgPSBjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VWaWRlb3MnKTtcbiAgICAgIGNvbnN0IHEgPSBxdWVyeShleGVyY2lzZVZpZGVvc1JlZiwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIGN1cnJlbnRVc2VySWQpKTtcbiAgICAgIFxuICAgICAgY29uc3QgdmlkZW9TbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gIFxuICAgICAgLy8gR3JvdXAgdmlkZW9zIGJ5IGV4ZXJjaXNlIG5hbWVcbiAgICAgIGNvbnN0IHZpZGVvc0J5RXhlcmNpc2VOYW1lOiB7IFtrZXk6IHN0cmluZ106IEV4ZXJjaXNlVmlkZW9bXSB9ID0ge307XG4gIFxuICAgICAgdmlkZW9TbmFwc2hvdC5kb2NzLmZvckVhY2goZG9jID0+IHtcbiAgICAgICAgY29uc3QgdmlkZW9EYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgICAgY29uc3QgZXhlcmNpc2VOYW1lID0gdmlkZW9EYXRhWydleGVyY2lzZSddIGFzIHN0cmluZztcbiAgICAgICAgXG4gICAgICAgIGlmICghZXhlcmNpc2VOYW1lKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGBFeGVyY2lzZSBuYW1lIG1pc3NpbmcgZm9yIHZpZGVvICR7ZG9jLmlkfWApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICBcbiAgICAgICAgY29uc3QgdmlkZW8gPSBuZXcgRXhlcmNpc2VWaWRlbyh7XG4gICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICBleGVyY2lzZUlkOiB2aWRlb0RhdGEuZXhlcmNpc2VJZCB8fCAnJyxcbiAgICAgICAgICB1c2VybmFtZTogdmlkZW9EYXRhLnVzZXJuYW1lIHx8ICcnLFxuICAgICAgICAgIHVzZXJJZDogdmlkZW9EYXRhLnVzZXJJZCB8fCAnJyxcbiAgICAgICAgICB2aWRlb1VSTDogdmlkZW9EYXRhLnZpZGVvVVJMIHx8ICcnLFxuICAgICAgICAgIGZpbGVOYW1lOiB2aWRlb0RhdGEuZmlsZU5hbWUgfHwgJycsXG4gICAgICAgICAgZXhlcmNpc2U6IGV4ZXJjaXNlTmFtZSxcbiAgICAgICAgICBwcm9maWxlSW1hZ2U6IG5ldyBQcm9maWxlSW1hZ2UodmlkZW9EYXRhLnByb2ZpbGVJbWFnZSB8fCB7fSksICAvLyBVc2UgUHJvZmlsZUltYWdlIGNvbnN0cnVjdG9yXG4gICAgICAgICAgY2FwdGlvbjogdmlkZW9EYXRhLmNhcHRpb24gfHwgJycsXG4gICAgICAgICAgZ2lmVVJMOiB2aWRlb0RhdGEuZ2lmVVJMIHx8ICcnLFxuICAgICAgICAgIHRodW1ibmFpbDogdmlkZW9EYXRhLnRodW1ibmFpbCB8fCAnJyxcbiAgICAgICAgICB2aXNpYmlsaXR5OiB2aWRlb0RhdGEudmlzaWJpbGl0eSB8fCAnb3BlbicsXG4gICAgICAgICAgdG90YWxBY2NvdW50c1JlYWNoZWQ6IHZpZGVvRGF0YS50b3RhbEFjY291bnRzUmVhY2hlZCB8fCAwLFxuICAgICAgICAgIHRvdGFsQWNjb3VudExpa2VzOiB2aWRlb0RhdGEudG90YWxBY2NvdW50TGlrZXMgfHwgMCxcbiAgICAgICAgICB0b3RhbEFjY291bnRCb29rbWFya2VkOiB2aWRlb0RhdGEudG90YWxBY2NvdW50Qm9va21hcmtlZCB8fCAwLFxuICAgICAgICAgIHRvdGFsQWNjb3VudFVzYWdlOiB2aWRlb0RhdGEudG90YWxBY2NvdW50VXNhZ2UgfHwgMCxcbiAgICAgICAgICBpc0FwcHJvdmVkOiB2aWRlb0RhdGEuaXNBcHByb3ZlZCB8fCBmYWxzZSxcbiAgICAgICAgICBsaWtlZDogdmlkZW9EYXRhLmxpa2VkIHx8IGZhbHNlLFxuICAgICAgICAgIGJvb2ttYXJrZWQ6IHZpZGVvRGF0YS5ib29rbWFya2VkIHx8IGZhbHNlLFxuICAgICAgICAgIGNyZWF0ZWRBdDogdmlkZW9EYXRhLmNyZWF0ZWRBdCA/IG5ldyBEYXRlKHZpZGVvRGF0YS5jcmVhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IHZpZGVvRGF0YS51cGRhdGVkQXQgPyBuZXcgRGF0ZSh2aWRlb0RhdGEudXBkYXRlZEF0KSA6IG5ldyBEYXRlKClcbiAgICAgICAgfSk7XG4gIFxuICAgICAgICBpZiAoIXZpZGVvc0J5RXhlcmNpc2VOYW1lW2V4ZXJjaXNlTmFtZV0pIHtcbiAgICAgICAgICB2aWRlb3NCeUV4ZXJjaXNlTmFtZVtleGVyY2lzZU5hbWVdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdmlkZW9zQnlFeGVyY2lzZU5hbWVbZXhlcmNpc2VOYW1lXS5wdXNoKHZpZGVvKTtcbiAgICAgIH0pO1xuICBcbiAgICAgIC8vIFN0ZXAgMjogRmV0Y2ggYWxsIGV4ZXJjaXNlc1xuICAgICAgY29uc3QgZXhlcmNpc2VzUmVmID0gY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlcycpO1xuICAgICAgY29uc3QgZXhlcmNpc2VzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGV4ZXJjaXNlc1JlZik7XG4gIFxuICAgICAgLy8gU3RlcCAzOiBNYXAgdmlkZW9zIHRvIGV4ZXJjaXNlc1xuICAgICAgY29uc3QgdXNlckV4ZXJjaXNlczogRXhlcmNpc2VbXSA9IGV4ZXJjaXNlc1NuYXBzaG90LmRvY3NcbiAgICAgICAgLm1hcChkb2MgPT4ge1xuICAgICAgICAgIGNvbnN0IGV4ZXJjaXNlRGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICAgICAgY29uc3QgZXhlcmNpc2VOYW1lID0gZXhlcmNpc2VEYXRhLm5hbWU7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ3JlYXRlIGJhc2UgZXhlcmNpc2VcbiAgICAgICAgICAvLyBGb3IgdGhlIEV4ZXJjaXNlOlxuICAgICAgICAgIGNvbnN0IGV4ZXJjaXNlID0gbmV3IEV4ZXJjaXNlKHtcbiAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICBuYW1lOiBleGVyY2lzZU5hbWUsXG4gICAgICAgICAgICBjYXRlZ29yeTogZXhlcmNpc2VEYXRhLmNhdGVnb3J5LFxuICAgICAgICAgICAgcHJpbWFyeUJvZHlQYXJ0czogZXhlcmNpc2VEYXRhLnByaW1hcnlCb2R5UGFydHMgfHwgW10sXG4gICAgICAgICAgICBzZWNvbmRhcnlCb2R5UGFydHM6IGV4ZXJjaXNlRGF0YS5zZWNvbmRhcnlCb2R5UGFydHMgfHwgW10sXG4gICAgICAgICAgICB0YWdzOiBleGVyY2lzZURhdGEudGFncyB8fCBbXSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBleGVyY2lzZURhdGEuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgICAgICB2aXNpYmlsaXR5OiBleGVyY2lzZURhdGEudmlzaWJpbGl0eSB8fCAnbGltaXRlZCcsXG4gICAgICAgICAgICBzdGVwczogZXhlcmNpc2VEYXRhLnN0ZXBzIHx8IFtdLFxuICAgICAgICAgICAgdmlkZW9zOiB2aWRlb3NCeUV4ZXJjaXNlTmFtZVtleGVyY2lzZU5hbWVdIHx8IFtdLFxuICAgICAgICAgICAgY3VycmVudFZpZGVvUG9zaXRpb246IDAsXG4gICAgICAgICAgICByZXBzOiBleGVyY2lzZURhdGEucmVwcyB8fCAnJyxcbiAgICAgICAgICAgIHNldHM6IGV4ZXJjaXNlRGF0YS5zZXRzIHx8IDAsXG4gICAgICAgICAgICB3ZWlnaHQ6IGV4ZXJjaXNlRGF0YS53ZWlnaHQgfHwgMCxcbiAgICAgICAgICAgIGF1dGhvcjogbmV3IEV4ZXJjaXNlQXV0aG9yKHsgIC8vIFVzZSBFeGVyY2lzZUF1dGhvciBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICB1c2VySWQ6IGV4ZXJjaXNlRGF0YS5hdXRob3I/LnVzZXJJZCB8fCAnJyxcbiAgICAgICAgICAgICAgdXNlcm5hbWU6IGV4ZXJjaXNlRGF0YS5hdXRob3I/LnVzZXJuYW1lIHx8ICcnXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogZXhlcmNpc2VEYXRhLmNyZWF0ZWRBdCA/IG5ldyBEYXRlKGV4ZXJjaXNlRGF0YS5jcmVhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogZXhlcmNpc2VEYXRhLnVwZGF0ZWRBdCA/IG5ldyBEYXRlKGV4ZXJjaXNlRGF0YS51cGRhdGVkQXQpIDogbmV3IERhdGUoKVxuICAgICAgICAgIH0pO1xuICBcbiAgICAgICAgICByZXR1cm4gZXhlcmNpc2U7XG4gICAgICAgIH0pXG4gICAgICAgIC5maWx0ZXIoZXhlcmNpc2UgPT4gZXhlcmNpc2UudmlkZW9zLmxlbmd0aCA+IDApO1xuICBcbiAgICAgIHJldHVybiB1c2VyRXhlcmNpc2VzO1xuICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciB2aWRlb3M6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZmV0Y2hGb2xsb3dpbmcoKTogUHJvbWlzZTxGb2xsb3dSZXF1ZXN0W10+IHtcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IHRoaXMuY3VycmVudFVzZXI7XG4gICAgaWYgKCFjdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBpcyBzaWduZWQgaW4nKTtcbiAgICB9XG4gIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBmb2xsb3dSZXF1ZXN0c1JlZiA9IGNvbGxlY3Rpb24oZGIsICdmb2xsb3dSZXF1ZXN0cycpO1xuICAgICAgY29uc3QgcSA9IHF1ZXJ5KFxuICAgICAgICBmb2xsb3dSZXF1ZXN0c1JlZiwgXG4gICAgICAgIHdoZXJlKCdmcm9tVXNlci5pZCcsICc9PScsIGN1cnJlbnRVc2VyLmlkKVxuICAgICAgKTtcbiAgXG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgXG4gICAgICBjb25zdCBmb2xsb3dSZXF1ZXN0czogRm9sbG93UmVxdWVzdFtdID0gcXVlcnlTbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBmcm9tVXNlcjoge1xuICAgICAgICAgICAgaWQ6IGRhdGEuZnJvbVVzZXI/LmlkIHx8ICcnLFxuICAgICAgICAgICAgdXNlcm5hbWU6IGRhdGEuZnJvbVVzZXI/LnVzZXJuYW1lIHx8ICcnLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IGRhdGEuZnJvbVVzZXI/LmRpc3BsYXlOYW1lIHx8ICcnXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0b1VzZXI6IHtcbiAgICAgICAgICAgIGlkOiBkYXRhLnRvVXNlcj8uaWQgfHwgJycsXG4gICAgICAgICAgICB1c2VybmFtZTogZGF0YS50b1VzZXI/LnVzZXJuYW1lIHx8ICcnLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IGRhdGEudG9Vc2VyPy5kaXNwbGF5TmFtZSB8fCAnJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc3RhdHVzOiBkYXRhLnN0YXR1cyB8fCAnJyxcbiAgICAgICAgICBjcmVhdGVkQXQ6IGRhdGEuY3JlYXRlZEF0IGluc3RhbmNlb2YgRGF0ZSBcbiAgICAgICAgICAgID8gZGF0YS5jcmVhdGVkQXQgXG4gICAgICAgICAgICA6IChkYXRhLmNyZWF0ZWRBdCA/IG5ldyBEYXRlKGRhdGEuY3JlYXRlZEF0KSA6IG5ldyBEYXRlKCkpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogZGF0YS51cGRhdGVkQXQgaW5zdGFuY2VvZiBEYXRlIFxuICAgICAgICAgICAgPyBkYXRhLnVwZGF0ZWRBdCBcbiAgICAgICAgICAgIDogKGRhdGEudXBkYXRlZEF0ID8gbmV3IERhdGUoZGF0YS51cGRhdGVkQXQpIDogbmV3IERhdGUoKSlcbiAgICAgICAgfSBhcyBGb2xsb3dSZXF1ZXN0O1xuICAgICAgfSk7XG4gIFxuICAgICAgcmV0dXJuIGZvbGxvd1JlcXVlc3RzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBmb2xsb3dpbmc6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG4gIFxuICBhc3luYyBmZXRjaEZvbGxvd2VycygpOiBQcm9taXNlPEZvbGxvd1JlcXVlc3RbXT4ge1xuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gdGhpcy5jdXJyZW50VXNlcjtcbiAgICBpZiAoIWN1cnJlbnRVc2VyPy5pZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGlzIHNpZ25lZCBpbicpO1xuICAgIH1cbiAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZvbGxvd1JlcXVlc3RzUmVmID0gY29sbGVjdGlvbihkYiwgJ2ZvbGxvd1JlcXVlc3RzJyk7XG4gICAgICBjb25zdCBxID0gcXVlcnkoXG4gICAgICAgIGZvbGxvd1JlcXVlc3RzUmVmLCBcbiAgICAgICAgd2hlcmUoJ3RvVXNlci5pZCcsICc9PScsIGN1cnJlbnRVc2VyLmlkKVxuICAgICAgKTtcbiAgXG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgXG4gICAgICBjb25zdCBmb2xsb3dSZXF1ZXN0czogRm9sbG93UmVxdWVzdFtdID0gcXVlcnlTbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBmcm9tVXNlcjoge1xuICAgICAgICAgICAgaWQ6IGRhdGEuZnJvbVVzZXI/LmlkIHx8ICcnLFxuICAgICAgICAgICAgdXNlcm5hbWU6IGRhdGEuZnJvbVVzZXI/LnVzZXJuYW1lIHx8ICcnLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IGRhdGEuZnJvbVVzZXI/LmRpc3BsYXlOYW1lIHx8ICcnXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0b1VzZXI6IHtcbiAgICAgICAgICAgIGlkOiBkYXRhLnRvVXNlcj8uaWQgfHwgJycsXG4gICAgICAgICAgICB1c2VybmFtZTogZGF0YS50b1VzZXI/LnVzZXJuYW1lIHx8ICcnLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IGRhdGEudG9Vc2VyPy5kaXNwbGF5TmFtZSB8fCAnJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc3RhdHVzOiBkYXRhLnN0YXR1cyB8fCAnJyxcbiAgICAgICAgICBjcmVhdGVkQXQ6IGRhdGEuY3JlYXRlZEF0IGluc3RhbmNlb2YgRGF0ZSBcbiAgICAgICAgICAgID8gZGF0YS5jcmVhdGVkQXQgXG4gICAgICAgICAgICA6IChkYXRhLmNyZWF0ZWRBdCA/IG5ldyBEYXRlKGRhdGEuY3JlYXRlZEF0KSA6IG5ldyBEYXRlKCkpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogZGF0YS51cGRhdGVkQXQgaW5zdGFuY2VvZiBEYXRlIFxuICAgICAgICAgICAgPyBkYXRhLnVwZGF0ZWRBdCBcbiAgICAgICAgICAgIDogKGRhdGEudXBkYXRlZEF0ID8gbmV3IERhdGUoZGF0YS51cGRhdGVkQXQpIDogbmV3IERhdGUoKSlcbiAgICAgICAgfSBhcyBGb2xsb3dSZXF1ZXN0O1xuICAgICAgfSk7XG4gIFxuICAgICAgcmV0dXJuIGZvbGxvd1JlcXVlc3RzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBmb2xsb3dlcnM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgIC8qKlxuICAgKiBGZXRjaCB1c2VyIElEIGJ5IHVzZXJuYW1lXG4gICAqIEBwYXJhbSB1c2VybmFtZSBUaGUgdXNlcm5hbWUgdG8gc2VhcmNoIGZvclxuICAgKiBAcmV0dXJucyBQcm9taXNlIHJlc29sdmluZyB0byB0aGUgdXNlciBJRCBvciBudWxsIGlmIG5vdCBmb3VuZFxuICAgKi9cbiAgIGFzeW5jIGdldFVzZXJJZEJ5VXNlcm5hbWUodXNlcm5hbWU6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2Vyc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycpO1xuICAgICAgY29uc3QgcSA9IHF1ZXJ5KHVzZXJzUmVmLCB3aGVyZSgndXNlcm5hbWUnLCAnPT0nLCB1c2VybmFtZSksIGxpbWl0KDEpKTtcbiAgICAgIFxuICAgICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgICBcbiAgICAgIGlmICghcXVlcnlTbmFwc2hvdC5lbXB0eSkge1xuICAgICAgICBjb25zdCB1c2VyRG9jID0gcXVlcnlTbmFwc2hvdC5kb2NzWzBdO1xuICAgICAgICByZXR1cm4gdXNlckRvYy5pZDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgSUQgYnkgdXNlcm5hbWU6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0QWxsVXNlcnMoKTogUHJvbWlzZTxVc2VyW10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlcnNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnKTtcbiAgICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHVzZXJzUmVmKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHF1ZXJ5U25hcHNob3QuZG9jc1xuICAgICAgICAubWFwKGRvYyA9PiBuZXcgVXNlcih7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSkpXG4gICAgICAgIC5maWx0ZXIodXNlciA9PiB1c2VyLnByb2ZpbGVJbWFnZT8ucHJvZmlsZUltYWdlVVJMKTsgLy8gT25seSByZXR1cm4gdXNlcnMgd2l0aCBwcm9maWxlIGltYWdlc1xuICAgICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlcnM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8vIEluIHVzZXJTZXJ2aWNlXG4gIGFzeW5jIGdldFVzZXJCeVVzZXJuYW1lKHVzZXJuYW1lOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJyk7XG4gICAgICBjb25zdCBxID0gcXVlcnkodXNlcnNSZWYsIHdoZXJlKCd1c2VybmFtZScsICc9PScsIHVzZXJuYW1lKSk7XG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICAgIFxuICAgICAgaWYgKHF1ZXJ5U25hcHNob3QuZW1wdHkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVzZXJEYXRhID0gcXVlcnlTbmFwc2hvdC5kb2NzWzBdLmRhdGEoKTtcbiAgICAgIHJldHVybiBuZXcgVXNlcih7IGlkOiBxdWVyeVNuYXBzaG90LmRvY3NbMF0uaWQsIC4uLnVzZXJEYXRhIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyIGJ5IHVzZXJuYW1lOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZldGNoVXNlcnNXaXRoVmlkZW9zVXBsb2FkZWQoKTogUHJvbWlzZTxVc2VyW10+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQ3JlYXRlIGEgcXVlcnkgYWdhaW5zdCB0aGUgdXNlcnMgY29sbGVjdGlvblxuICAgICAgY29uc3QgdXNlcnNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnKTtcbiAgICAgIGNvbnN0IHEgPSBxdWVyeShcbiAgICAgICAgdXNlcnNSZWYsXG4gICAgICAgIHdoZXJlKCd2aWRlb0NvdW50JywgJz4nLCAwKSAvLyBPbmx5IGZldGNoIHVzZXJzIHdpdGggdmlkZW9zXG4gICAgICApO1xuXG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICAgIFxuICAgICAgLy8gTWFwIHRoZSBkb2N1bWVudHMgdG8gVXNlciBvYmplY3RzXG4gICAgICBjb25zdCB1c2VycyA9IHF1ZXJ5U25hcHNob3QuZG9jc1xuICAgICAgLm1hcChkb2MgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVzZXIoeyBpZDogZG9jLmlkLCAuLi5kYXRhIH0pO1xuICAgICAgICB9KVxuICAgICAgICAvLyBGaWx0ZXIgb3V0IHVzZXJzIHdpdGhvdXQgcHJvZmlsZSBpbWFnZXNcbiAgICAgICAgLmZpbHRlcih1c2VyID0+IHVzZXIucHJvZmlsZUltYWdlPy5wcm9maWxlSW1hZ2VVUkwpXG4gICAgICAgIC8vIFNodWZmbGUgdGhlIHJlc3VsdHNcbiAgICAgICAgLnNvcnQoKCkgPT4gTWF0aC5yYW5kb20oKSAtIDAuNSk7XG5cbiAgICAgIHJldHVybiB1c2VycztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlcnMgd2l0aCB2aWRlb3M6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgdXNlclNlcnZpY2UgPSBuZXcgVXNlclNlcnZpY2UoKTsiXSwibmFtZXMiOlsiVXNlciIsIldvcmtvdXQiLCJFeGVyY2lzZSIsIkV4ZXJjaXNlVmlkZW8iLCJFeGVyY2lzZUF1dGhvciIsIkV4ZXJjaXNlTG9nIiwiUHJvZmlsZUltYWdlIiwiZG9jIiwiZ2V0RG9jIiwic2V0RG9jIiwiZG9jdW1lbnRJZCIsImNvbGxlY3Rpb24iLCJxdWVyeSIsIndoZXJlIiwiZ2V0RG9jcyIsImxpbWl0Iiwid3JpdGVCYXRjaCIsImRlbGV0ZURvYyIsImRiIiwic3RvcmUiLCJzZXRVc2VyIiwiVXNlclNlcnZpY2UiLCJmZXRjaFVzZXJGcm9tRmlyZXN0b3JlIiwidXNlcklkIiwidXNlclJlZiIsInVzZXJEb2MiLCJleGlzdHMiLCJkYXRhIiwidXBkYXRlVXNlciIsInVzZXIiLCJ0b0RpY3Rpb25hcnkiLCJtZXJnZSIsImdldFVzZXJzQnlJZHMiLCJpZHMiLCJ1c2VycyIsImNodW5rU2l6ZSIsImkiLCJjaHVuayIsInVzZXJzUmVmIiwicSIsInF1ZXJ5U25hcHNob3QiLCJsZW5ndGgiLCJzbGljZSIsImRvY3MiLCJmb3JFYWNoIiwicHVzaCIsImlkIiwiZ2V0VXNlckJ5SWQiLCJlcnJvciIsIkVycm9yIiwiY29uc29sZSIsImRlbGV0ZVVzZXJWaWRlbyIsImV4ZXJjaXNlSWQiLCJleGVyY2lzZVJlZiIsImV4ZXJjaXNlRG9jIiwidmlkZW9zIiwiY3VycmVudFVzZXIiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwidmlkZW8iLCJ2aWRlb1JlZiIsImdpZlJlZiIsInZpZGVvVVJMIiwicmVmIiwiZ2V0U3RvcmFnZSIsImRlbGV0ZU9iamVjdCIsImdpZlVSTCIsImRlbGV0ZVN0YWNrIiwic3RhY2tJZCIsInN0YWNrUmVmIiwibG9nc1JlZiIsImxvZ3NTbmFwc2hvdCIsImNyZWF0ZVN0YWNrIiwid29ya291dCIsImV4ZXJjaXNlTG9ncyIsInVzZXJXb3Jrb3V0UmVmIiwiYmF0Y2giLCJsb2ciLCJKU09OIiwic3RyaW5naWZ5IiwiaW5kZXgiLCJvcmRlciIsImxvZ1JlZiIsInNldCIsImNvbW1pdCIsImZldGNoVXNlclN0YWNrcyIsImN1cnJlbnRVc2VySWQiLCJzdGFja3NSZWYiLCJzdGFja3MiLCJzdGFja0RhdGEiLCJsb2dzIiwibG9nRG9jIiwiZmV0Y2hVc2VyVmlkZW9zIiwiZXhlcmNpc2VWaWRlb3NSZWYiLCJ2aWRlb1NuYXBzaG90IiwidmlkZW9zQnlFeGVyY2lzZU5hbWUiLCJleGVyY2lzZXNSZWYiLCJleGVyY2lzZXNTbmFwc2hvdCIsInVzZXJFeGVyY2lzZXMiLCJ2aWRlb0RhdGEiLCJleGVyY2lzZU5hbWUiLCJ3YXJuIiwidXNlcm5hbWUiLCJmaWxlTmFtZSIsImV4ZXJjaXNlIiwicHJvZmlsZUltYWdlIiwiY2FwdGlvbiIsInRodW1ibmFpbCIsInZpc2liaWxpdHkiLCJ0b3RhbEFjY291bnRzUmVhY2hlZCIsInRvdGFsQWNjb3VudExpa2VzIiwidG90YWxBY2NvdW50Qm9va21hcmtlZCIsInRvdGFsQWNjb3VudFVzYWdlIiwiaXNBcHByb3ZlZCIsImxpa2VkIiwiYm9va21hcmtlZCIsImNyZWF0ZWRBdCIsIkRhdGUiLCJ1cGRhdGVkQXQiLCJleGVyY2lzZURhdGEiLCJuYW1lIiwiY2F0ZWdvcnkiLCJwcmltYXJ5Qm9keVBhcnRzIiwic2Vjb25kYXJ5Qm9keVBhcnRzIiwidGFncyIsImRlc2NyaXB0aW9uIiwic3RlcHMiLCJjdXJyZW50VmlkZW9Qb3NpdGlvbiIsInJlcHMiLCJzZXRzIiwid2VpZ2h0IiwiYXV0aG9yIiwiZmlsdGVyIiwiZmV0Y2hGb2xsb3dpbmciLCJmb2xsb3dSZXF1ZXN0c1JlZiIsImZvbGxvd1JlcXVlc3RzIiwiZnJvbVVzZXIiLCJkaXNwbGF5TmFtZSIsInRvVXNlciIsInN0YXR1cyIsImZldGNoRm9sbG93ZXJzIiwiZ2V0VXNlcklkQnlVc2VybmFtZSIsImVtcHR5IiwiZ2V0QWxsVXNlcnMiLCJwcm9maWxlSW1hZ2VVUkwiLCJnZXRVc2VyQnlVc2VybmFtZSIsInVzZXJEYXRhIiwiZmV0Y2hVc2Vyc1dpdGhWaWRlb3NVcGxvYWRlZCIsInNvcnQiLCJNYXRoIiwicmFuZG9tIiwiZ2V0U3RhdGUiLCJkaXNwYXRjaCIsInVzZXJTZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/api/firebase/user/service.ts\n"));

/***/ })

});
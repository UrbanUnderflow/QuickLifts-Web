"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/_app",{

/***/ "./src/api/firebase/storage/service.ts":
/*!*********************************************!*\
  !*** ./src/api/firebase/storage/service.ts ***!
  \*********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FirebaseStorageService: function() { return /* binding */ FirebaseStorageService; },\n/* harmony export */   UploadImageType: function() { return /* binding */ UploadImageType; },\n/* harmony export */   VideoType: function() { return /* binding */ VideoType; },\n/* harmony export */   firebaseStorageService: function() { return /* binding */ firebaseStorageService; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @swc/helpers/_/_async_to_generator */ \"./node_modules/@swc/helpers/esm/_async_to_generator.js\");\n/* harmony import */ var _swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @swc/helpers/_/_class_call_check */ \"./node_modules/@swc/helpers/esm/_class_call_check.js\");\n/* harmony import */ var _swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @swc/helpers/_/_object_spread */ \"./node_modules/@swc/helpers/esm/_object_spread.js\");\n/* harmony import */ var _swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @swc/helpers/_/_object_spread_props */ \"./node_modules/@swc/helpers/esm/_object_spread_props.js\");\n/* harmony import */ var _swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @swc/helpers/_/_ts_generator */ \"./node_modules/@swc/helpers/esm/_ts_generator.js\");\n/* harmony import */ var firebase_storage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/storage */ \"./node_modules/firebase/storage/dist/esm/index.esm.js\");\n/* harmony import */ var _api_firebase_user__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../api/firebase/user */ \"./src/api/firebase/user/index.ts\");\n/* harmony import */ var _api_firebase_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../api/firebase/config */ \"./src/api/firebase/config.ts\");\n// src/services/FirebaseStorageService.ts\n\n\n\n\n\n\n\n\n\nvar UploadImageType;\n(function(UploadImageType) {\n    UploadImageType[\"Profile\"] = \"profile_images\";\n    UploadImageType[\"Feedback\"] = \"feedback\";\n    UploadImageType[\"CheckIn\"] = \"checkin\";\n    UploadImageType[\"Meal\"] = \"meal\";\n    UploadImageType[\"GroupChat\"] = \"group_chat\";\n})(UploadImageType || (UploadImageType = {}));\nvar VideoType;\n(function(VideoType) {\n    VideoType[\"Exercise\"] = \"exercise\";\n    VideoType[\"Intro\"] = \"intro\";\n    VideoType[\"RoundChat\"] = \"round-chat\";\n})(VideoType || (VideoType = {}));\nvar FirebaseStorageService = /*#__PURE__*/ function() {\n    \"use strict\";\n    function FirebaseStorageService() {\n        (0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_3__._)(this, FirebaseStorageService);\n        this.storage = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.getStorage)();\n        // Optional: Image caching similar to iOS implementation\n        this.imageCache = new Map();\n    }\n    var _proto = FirebaseStorageService.prototype;\n    _proto.uploadVideo = function uploadVideo(file) {\n        var videoType = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : \"exercise\";\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_4__._)(function() {\n            var user, ALLOWED_TYPES, MAX_FILE_SIZE, fileName, storagePath, storageRef, snapshot, downloadURL, gsURL, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_5__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        // Ensure user is authenticated\n                        user = _api_firebase_config__WEBPACK_IMPORTED_MODULE_2__.auth.currentUser;\n                        if (!user) {\n                            throw new Error(\"User must be authenticated to upload video\");\n                        }\n                        // Validate file type and size\n                        ALLOWED_TYPES = [\n                            \"video/mp4\",\n                            \"video/quicktime\",\n                            \"video/x-msvideo\"\n                        ];\n                        MAX_FILE_SIZE = 100 * 1024 * 1024; // 100MB\n                        if (!ALLOWED_TYPES.includes(file.type)) {\n                            throw new Error(\"Invalid file type. Only MP4, AVI, and QuickTime videos are allowed.\");\n                        }\n                        if (file.size > MAX_FILE_SIZE) {\n                            throw new Error(\"File is too large. Maximum size is 100MB.\");\n                        }\n                        // Generate unique filename\n                        fileName = \"\".concat(Date.now(), \"_\").concat(file.name);\n                        storagePath = \"videos/\".concat(user.uid, \"/\").concat(fileName);\n                        // Create storage reference\n                        storageRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.ref)((0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.getStorage)(), storagePath);\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            4,\n                            ,\n                            5\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.uploadBytes)(storageRef, file)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        return [\n                            4,\n                            (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.getDownloadURL)(snapshot.ref)\n                        ];\n                    case 3:\n                        downloadURL = _state.sent();\n                        // Construct GS URL (Google Storage URL)\n                        gsURL = \"gs://\".concat(snapshot.ref.bucket, \"/\").concat(snapshot.ref.fullPath);\n                        return [\n                            2,\n                            {\n                                gsURL: gsURL,\n                                downloadURL: downloadURL\n                            }\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Video upload failed\", error);\n                        throw error;\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.uploadImage = function uploadImage(file) {\n        var imageType = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : \"profile_images\";\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_4__._)(function() {\n            var user, fileName, storagePath, storageRef, snapshot, downloadURL, gsURL, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_5__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        // Ensure user is authenticated\n                        user = _api_firebase_config__WEBPACK_IMPORTED_MODULE_2__.auth.currentUser;\n                        if (!user) {\n                            throw new Error(\"User must be authenticated to upload image\");\n                        }\n                        // Generate unique filename\n                        fileName = \"\".concat(Date.now(), \"_\").concat(file.name);\n                        storagePath = \"\".concat(imageType, \"/\").concat(user.uid, \"/\").concat(fileName);\n                        // Create storage reference\n                        storageRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.ref)(_this.storage, storagePath);\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            6,\n                            ,\n                            7\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.uploadBytes)(storageRef, file)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        return [\n                            4,\n                            (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.getDownloadURL)(snapshot.ref)\n                        ];\n                    case 3:\n                        downloadURL = _state.sent();\n                        // Construct GS URL (Google Storage URL)\n                        gsURL = \"gs://\".concat(snapshot.ref.bucket, \"/\").concat(snapshot.ref.fullPath);\n                        if (!(imageType === \"profile_images\")) return [\n                            3,\n                            5\n                        ];\n                        return [\n                            4,\n                            _this.updateUserProfileImage(downloadURL)\n                        ];\n                    case 4:\n                        _state.sent();\n                        _state.label = 5;\n                    case 5:\n                        return [\n                            2,\n                            {\n                                gsURL: gsURL,\n                                downloadURL: downloadURL\n                            }\n                        ];\n                    case 6:\n                        error = _state.sent();\n                        console.error(\"Image upload failed\", error);\n                        throw error;\n                    case 7:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.updateUserProfileImage = function updateUserProfileImage(imageURL) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_4__._)(function() {\n            var updatedUser;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_5__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        // Ensure current user exists\n                        if (!_api_firebase_user__WEBPACK_IMPORTED_MODULE_1__.userService.currentUser) {\n                            throw new Error(\"No current user found\");\n                        }\n                        // Create a new User object with updated profile image\n                        updatedUser = new _api_firebase_user__WEBPACK_IMPORTED_MODULE_1__.User((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_6__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({}, _api_firebase_user__WEBPACK_IMPORTED_MODULE_1__.userService.currentUser.toDictionary()), {\n                            profileImage: {\n                                profileImageURL: imageURL,\n                                imageOffsetWidth: 0,\n                                imageOffsetHeight: 0\n                            },\n                            updatedAt: new Date()\n                        }));\n                        // Update user in Firestore\n                        return [\n                            4,\n                            _api_firebase_user__WEBPACK_IMPORTED_MODULE_1__.userService.updateUser(updatedUser.id, updatedUser)\n                        ];\n                    case 1:\n                        _state.sent();\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchImage = function fetchImage(url) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_4__._)(function() {\n            var response, blob, imageURL, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_5__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        // Check cache first\n                        if (_this.imageCache.has(url)) {\n                            return [\n                                2,\n                                _this.imageCache.get(url)\n                            ];\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            4,\n                            ,\n                            5\n                        ]);\n                        return [\n                            4,\n                            fetch(url)\n                        ];\n                    case 2:\n                        response = _state.sent();\n                        return [\n                            4,\n                            response.blob()\n                        ];\n                    case 3:\n                        blob = _state.sent();\n                        imageURL = URL.createObjectURL(blob);\n                        // Cache the image URL\n                        _this.imageCache.set(url, imageURL);\n                        return [\n                            2,\n                            imageURL\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Image fetch failed\", error);\n                        throw error;\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    return FirebaseStorageService;\n}();\n// Create a singleton instance\nvar firebaseStorageService = new FirebaseStorageService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDSjs7NEJBQU1BLFNBQVNDLElBQUk7Ozt3QkFBMUJBLE9BQU87d0JBQ1BiLFdBQVdpQixJQUFJQyxlQUFlLENBQUNMO3dCQUVyQyxzQkFBc0I7d0JBQ3RCLE1BQUszQyxVQUFVLENBQUNpRCxHQUFHLENBQUNSLEtBQUtYO3dCQUV6Qjs7NEJBQU9BOzs7d0JBQ0FoQjt3QkFDUFksUUFBUVosS0FBSyxDQUFDLHNCQUFzQkE7d0JBQ3BDLE1BQU1BOzs7Ozs7O1FBRVY7O1dBbklXaEI7SUFvSVo7QUFFRCw4QkFBOEI7QUFDdkIsSUFBTW9ELHlCQUF5QixJQUFJcEQseUJBQXlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9hcGkvZmlyZWJhc2Uvc3RvcmFnZS9zZXJ2aWNlLnRzPzYyMWQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3NlcnZpY2VzL0ZpcmViYXNlU3RvcmFnZVNlcnZpY2UudHNcbmltcG9ydCB7IGdldFN0b3JhZ2UsIHJlZiwgdXBsb2FkQnl0ZXMsIGdldERvd25sb2FkVVJMIH0gZnJvbSBcImZpcmViYXNlL3N0b3JhZ2VcIjtcbmltcG9ydCB7IFVzZXIgfSBmcm9tIFwiLi4vLi4vLi4vYXBpL2ZpcmViYXNlL3VzZXJcIjtcbmltcG9ydCB7IHVzZXJTZXJ2aWNlIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9maXJlYmFzZS91c2VyXCI7XG5pbXBvcnQgeyBhdXRoIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9maXJlYmFzZS9jb25maWdcIjtcblxuZXhwb3J0IGVudW0gVXBsb2FkSW1hZ2VUeXBlIHtcbiAgUHJvZmlsZSA9IFwicHJvZmlsZV9pbWFnZXNcIixcbiAgRmVlZGJhY2sgPSBcImZlZWRiYWNrXCIsXG4gIENoZWNrSW4gPSBcImNoZWNraW5cIixcbiAgTWVhbCA9IFwibWVhbFwiLFxuICBHcm91cENoYXQgPSBcImdyb3VwX2NoYXRcIlxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVwbG9hZFJlc3VsdCB7XG4gIGdzVVJMOiBzdHJpbmc7XG4gIGRvd25sb2FkVVJMOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBlbnVtIFZpZGVvVHlwZSB7XG4gICAgRXhlcmNpc2UgPSBcImV4ZXJjaXNlXCIsXG4gICAgSW50cm8gPSBcImludHJvXCIsXG4gICAgUm91bmRDaGF0ID0gXCJyb3VuZC1jaGF0XCJcbn1cblxuZXhwb3J0IGNsYXNzIEZpcmViYXNlU3RvcmFnZVNlcnZpY2Uge1xuICBwcml2YXRlIHN0b3JhZ2UgPSBnZXRTdG9yYWdlKCk7XG5cbiAgYXN5bmMgdXBsb2FkVmlkZW8oXG4gICAgICBmaWxlOiBGaWxlLCBcbiAgICAgIHZpZGVvVHlwZTogVmlkZW9UeXBlID0gVmlkZW9UeXBlLkV4ZXJjaXNlXG4gICAgKTogUHJvbWlzZTxVcGxvYWRSZXN1bHQ+IHtcbiAgICAgIC8vIEVuc3VyZSB1c2VyIGlzIGF1dGhlbnRpY2F0ZWRcbiAgICAgIGNvbnN0IHVzZXIgPSBhdXRoLmN1cnJlbnRVc2VyO1xuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXIgbXVzdCBiZSBhdXRoZW50aWNhdGVkIHRvIHVwbG9hZCB2aWRlb1wiKTtcbiAgICAgIH1cbiAgXG4gICAgICAvLyBWYWxpZGF0ZSBmaWxlIHR5cGUgYW5kIHNpemVcbiAgICAgIGNvbnN0IEFMTE9XRURfVFlQRVMgPSBbJ3ZpZGVvL21wNCcsICd2aWRlby9xdWlja3RpbWUnLCAndmlkZW8veC1tc3ZpZGVvJ107XG4gICAgICBjb25zdCBNQVhfRklMRV9TSVpFID0gMTAwICogMTAyNCAqIDEwMjQ7IC8vIDEwME1CXG4gIFxuICAgICAgaWYgKCFBTExPV0VEX1RZUEVTLmluY2x1ZGVzKGZpbGUudHlwZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBmaWxlIHR5cGUuIE9ubHkgTVA0LCBBVkksIGFuZCBRdWlja1RpbWUgdmlkZW9zIGFyZSBhbGxvd2VkLlwiKTtcbiAgICAgIH1cbiAgXG4gICAgICBpZiAoZmlsZS5zaXplID4gTUFYX0ZJTEVfU0laRSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGaWxlIGlzIHRvbyBsYXJnZS4gTWF4aW11bSBzaXplIGlzIDEwME1CLlwiKTtcbiAgICAgIH1cbiAgXG4gICAgICAvLyBHZW5lcmF0ZSB1bmlxdWUgZmlsZW5hbWVcbiAgICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7RGF0ZS5ub3coKX1fJHtmaWxlLm5hbWV9YDtcbiAgICAgIGNvbnN0IHN0b3JhZ2VQYXRoID0gYHZpZGVvcy8ke3VzZXIudWlkfS8ke2ZpbGVOYW1lfWA7XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBzdG9yYWdlIHJlZmVyZW5jZVxuICAgICAgY29uc3Qgc3RvcmFnZVJlZiA9IHJlZihnZXRTdG9yYWdlKCksIHN0b3JhZ2VQYXRoKTtcbiAgXG4gICAgICB0cnkge1xuICAgICAgICAvLyBVcGxvYWQgdGhlIGZpbGVcbiAgICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCB1cGxvYWRCeXRlcyhzdG9yYWdlUmVmLCBmaWxlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEdldCBkb3dubG9hZCBVUkxcbiAgICAgICAgY29uc3QgZG93bmxvYWRVUkwgPSBhd2FpdCBnZXREb3dubG9hZFVSTChzbmFwc2hvdC5yZWYpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ29uc3RydWN0IEdTIFVSTCAoR29vZ2xlIFN0b3JhZ2UgVVJMKVxuICAgICAgICBjb25zdCBnc1VSTCA9IGBnczovLyR7c25hcHNob3QucmVmLmJ1Y2tldH0vJHtzbmFwc2hvdC5yZWYuZnVsbFBhdGh9YDtcbiAgXG4gICAgICAgIHJldHVybiB7IGdzVVJMLCBkb3dubG9hZFVSTCB9O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlZpZGVvIHVwbG9hZCBmYWlsZWRcIiwgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICB9XG5cbiAgYXN5bmMgdXBsb2FkSW1hZ2UoXG4gICAgZmlsZTogRmlsZSwgXG4gICAgaW1hZ2VUeXBlOiBVcGxvYWRJbWFnZVR5cGUgPSBVcGxvYWRJbWFnZVR5cGUuUHJvZmlsZVxuICApOiBQcm9taXNlPFVwbG9hZFJlc3VsdD4ge1xuICAgIC8vIEVuc3VyZSB1c2VyIGlzIGF1dGhlbnRpY2F0ZWRcbiAgICBjb25zdCB1c2VyID0gYXV0aC5jdXJyZW50VXNlcjtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXIgbXVzdCBiZSBhdXRoZW50aWNhdGVkIHRvIHVwbG9hZCBpbWFnZVwiKTtcbiAgICB9XG5cbiAgICAvLyBHZW5lcmF0ZSB1bmlxdWUgZmlsZW5hbWVcbiAgICBjb25zdCBmaWxlTmFtZSA9IGAke0RhdGUubm93KCl9XyR7ZmlsZS5uYW1lfWA7XG4gICAgY29uc3Qgc3RvcmFnZVBhdGggPSBgJHtpbWFnZVR5cGV9LyR7dXNlci51aWR9LyR7ZmlsZU5hbWV9YDtcbiAgICBcbiAgICAvLyBDcmVhdGUgc3RvcmFnZSByZWZlcmVuY2VcbiAgICBjb25zdCBzdG9yYWdlUmVmID0gcmVmKHRoaXMuc3RvcmFnZSwgc3RvcmFnZVBhdGgpO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFVwbG9hZCB0aGUgZmlsZVxuICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCB1cGxvYWRCeXRlcyhzdG9yYWdlUmVmLCBmaWxlKTtcbiAgICAgIFxuICAgICAgLy8gR2V0IGRvd25sb2FkIFVSTFxuICAgICAgY29uc3QgZG93bmxvYWRVUkwgPSBhd2FpdCBnZXREb3dubG9hZFVSTChzbmFwc2hvdC5yZWYpO1xuICAgICAgXG4gICAgICAvLyBDb25zdHJ1Y3QgR1MgVVJMIChHb29nbGUgU3RvcmFnZSBVUkwpXG4gICAgICBjb25zdCBnc1VSTCA9IGBnczovLyR7c25hcHNob3QucmVmLmJ1Y2tldH0vJHtzbmFwc2hvdC5yZWYuZnVsbFBhdGh9YDtcblxuICAgICAgLy8gSWYgaXQncyBhIHByb2ZpbGUgaW1hZ2UsIHVwZGF0ZSB0aGUgdXNlclxuICAgICAgaWYgKGltYWdlVHlwZSA9PT0gVXBsb2FkSW1hZ2VUeXBlLlByb2ZpbGUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVVc2VyUHJvZmlsZUltYWdlKGRvd25sb2FkVVJMKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHsgZ3NVUkwsIGRvd25sb2FkVVJMIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJJbWFnZSB1cGxvYWQgZmFpbGVkXCIsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdXBkYXRlVXNlclByb2ZpbGVJbWFnZShpbWFnZVVSTDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gRW5zdXJlIGN1cnJlbnQgdXNlciBleGlzdHNcbiAgICBpZiAoIXVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjdXJyZW50IHVzZXIgZm91bmRcIik7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IFVzZXIgb2JqZWN0IHdpdGggdXBkYXRlZCBwcm9maWxlIGltYWdlXG4gICAgY29uc3QgdXBkYXRlZFVzZXIgPSBuZXcgVXNlcih7XG4gICAgICAuLi51c2VyU2VydmljZS5jdXJyZW50VXNlci50b0RpY3Rpb25hcnkoKSxcbiAgICAgIHByb2ZpbGVJbWFnZToge1xuICAgICAgICBwcm9maWxlSW1hZ2VVUkw6IGltYWdlVVJMLFxuICAgICAgICBpbWFnZU9mZnNldFdpZHRoOiAwLCAgLy8gWW91IG1pZ2h0IHdhbnQgdG8gbWFrZSB0aGVzZSBjb25maWd1cmFibGVcbiAgICAgICAgaW1hZ2VPZmZzZXRIZWlnaHQ6IDBcbiAgICAgIH0sXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICB9KTtcblxuICAgIC8vIFVwZGF0ZSB1c2VyIGluIEZpcmVzdG9yZVxuICAgIGF3YWl0IHVzZXJTZXJ2aWNlLnVwZGF0ZVVzZXIodXBkYXRlZFVzZXIuaWQsIHVwZGF0ZWRVc2VyKTtcbiAgfVxuXG4gIC8vIE9wdGlvbmFsOiBJbWFnZSBjYWNoaW5nIHNpbWlsYXIgdG8gaU9TIGltcGxlbWVudGF0aW9uXG4gIHByaXZhdGUgaW1hZ2VDYWNoZTogTWFwPHN0cmluZywgc3RyaW5nPiA9IG5ldyBNYXAoKTtcblxuICBhc3luYyBmZXRjaEltYWdlKHVybDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAvLyBDaGVjayBjYWNoZSBmaXJzdFxuICAgIGlmICh0aGlzLmltYWdlQ2FjaGUuaGFzKHVybCkpIHtcbiAgICAgIHJldHVybiB0aGlzLmltYWdlQ2FjaGUuZ2V0KHVybCkhO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XG4gICAgICBjb25zdCBibG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xuICAgICAgY29uc3QgaW1hZ2VVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgXG4gICAgICAvLyBDYWNoZSB0aGUgaW1hZ2UgVVJMXG4gICAgICB0aGlzLmltYWdlQ2FjaGUuc2V0KHVybCwgaW1hZ2VVUkwpO1xuICAgICAgXG4gICAgICByZXR1cm4gaW1hZ2VVUkw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJJbWFnZSBmZXRjaCBmYWlsZWRcIiwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG59XG5cbi8vIENyZWF0ZSBhIHNpbmdsZXRvbiBpbnN0YW5jZVxuZXhwb3J0IGNvbnN0IGZpcmViYXNlU3RvcmFnZVNlcnZpY2UgPSBuZXcgRmlyZWJhc2VTdG9yYWdlU2VydmljZSgpOyJdLCJuYW1lcyI6WyJnZXRTdG9yYWdlIiwicmVmIiwidXBsb2FkQnl0ZXMiLCJnZXREb3dubG9hZFVSTCIsIlVzZXIiLCJ1c2VyU2VydmljZSIsImF1dGgiLCJVcGxvYWRJbWFnZVR5cGUiLCJWaWRlb1R5cGUiLCJGaXJlYmFzZVN0b3JhZ2VTZXJ2aWNlIiwic3RvcmFnZSIsImltYWdlQ2FjaGUiLCJNYXAiLCJ1cGxvYWRWaWRlbyIsImZpbGUiLCJ2aWRlb1R5cGUiLCJ1c2VyIiwiQUxMT1dFRF9UWVBFUyIsIk1BWF9GSUxFX1NJWkUiLCJmaWxlTmFtZSIsInN0b3JhZ2VQYXRoIiwic3RvcmFnZVJlZiIsInNuYXBzaG90IiwiZG93bmxvYWRVUkwiLCJnc1VSTCIsImVycm9yIiwiY3VycmVudFVzZXIiLCJFcnJvciIsImluY2x1ZGVzIiwidHlwZSIsInNpemUiLCJEYXRlIiwibm93IiwibmFtZSIsInVpZCIsImJ1Y2tldCIsImZ1bGxQYXRoIiwiY29uc29sZSIsInVwbG9hZEltYWdlIiwiaW1hZ2VUeXBlIiwidXBkYXRlVXNlclByb2ZpbGVJbWFnZSIsImltYWdlVVJMIiwidXBkYXRlZFVzZXIiLCJ0b0RpY3Rpb25hcnkiLCJwcm9maWxlSW1hZ2UiLCJwcm9maWxlSW1hZ2VVUkwiLCJpbWFnZU9mZnNldFdpZHRoIiwiaW1hZ2VPZmZzZXRIZWlnaHQiLCJ1cGRhdGVkQXQiLCJ1cGRhdGVVc2VyIiwiaWQiLCJmZXRjaEltYWdlIiwidXJsIiwicmVzcG9uc2UiLCJibG9iIiwiaGFzIiwiZ2V0IiwiZmV0Y2giLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJzZXQiLCJmaXJlYmFzZVN0b3JhZ2VTZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/api/firebase/storage/service.ts\n"));

/***/ })

});
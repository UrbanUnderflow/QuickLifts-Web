"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/_app",{

/***/ "./src/api/firebase/exercise/service.ts":
/*!**********************************************!*\
  !*** ./src/api/firebase/exercise/service.ts ***!
  \**********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   exerciseService: function() { return /* binding */ exerciseService; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @swc/helpers/_/_async_to_generator */ \"./node_modules/@swc/helpers/esm/_async_to_generator.js\");\n/* harmony import */ var _swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @swc/helpers/_/_class_call_check */ \"./node_modules/@swc/helpers/esm/_class_call_check.js\");\n/* harmony import */ var _swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @swc/helpers/_/_create_class */ \"./node_modules/@swc/helpers/esm/_create_class.js\");\n/* harmony import */ var _swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @swc/helpers/_/_object_spread */ \"./node_modules/@swc/helpers/esm/_object_spread.js\");\n/* harmony import */ var _swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @swc/helpers/_/_object_spread_props */ \"./node_modules/@swc/helpers/esm/_object_spread_props.js\");\n/* harmony import */ var _swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @swc/helpers/_/_ts_generator */ \"./node_modules/@swc/helpers/esm/_ts_generator.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/api/firebase/config.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../firebase/exercise/types */ \"./src/api/firebase/exercise/types.ts\");\n/* harmony import */ var _utils_formatDate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/formatDate */ \"./src/utils/formatDate.ts\");\n\n\n\n\n\n\n\n\n\n\n\nvar ExerciseService = /*#__PURE__*/ function() {\n    \"use strict\";\n    function ExerciseService() {\n        (0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_4__._)(this, ExerciseService);\n        this._allExercises = [];\n    }\n    var _proto = ExerciseService.prototype;\n    _proto.fetchExercises = function fetchExercises() {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_5__._)(function() {\n            var exerciseSnapshot, exercises, videoSnapshot, exerciseVideos, mappedExercises, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_6__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        // Add this log to see raw data\n                        exerciseSnapshot.docs.forEach(function(doc) {\n                            console.log(\"Raw exercise data from DB:\", JSON.stringify({\n                                name: doc.data().name,\n                                category: doc.data().category\n                            }, null, 2));\n                        });\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        // Map videos to their corresponding exercises by name\n                        mappedExercises = exercises.map(function(exercise) {\n                            var _exercise_category;\n                            var videosForExercise = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            }).map(function(video) {\n                                return new _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo(video);\n                            }); // Ensure proper ExerciseVideo instances\n                            console.log(\"Exercise constructor - category data:\", JSON.stringify({\n                                exerciseName: exercise.name,\n                                categoryData: exercise.category,\n                                categoryType: (_exercise_category = exercise.category) === null || _exercise_category === void 0 ? void 0 : _exercise_category.type\n                            }, null, 2));\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_8__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({}, exercise), {\n                                videos: videosForExercise\n                            }));\n                        });\n                        // Filter out exercises without videos\n                        _this._allExercises = mappedExercises.filter(function(exercise) {\n                            return exercise.videos.length > 0;\n                        });\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching exercises:\", error);\n                        throw new Error(\"Failed to fetch exercises.\");\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchFeaturedExercisesWithVideos = function fetchFeaturedExercisesWithVideos() {\n        var limit = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 24;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_5__._)(function() {\n            var exerciseSnapshot, exercises, videoSnapshot, exerciseVideos, mappedExercises, shuffledExercises, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_6__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        // Map videos to exercises and filter for those with GIFs\n                        mappedExercises = exercises.map(function(exerciseData) {\n                            // Ensure that each video is properly instantiated as an `ExerciseVideo`\n                            var videosForExercise = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exerciseData.name.toLowerCase();\n                            }).map(function(video) {\n                                return new _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo(video);\n                            });\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise({\n                                id: exerciseData.id,\n                                name: exerciseData.name,\n                                description: exerciseData.description,\n                                category: exerciseData.category,\n                                primaryBodyParts: exerciseData.primaryBodyParts || [],\n                                secondaryBodyParts: exerciseData.secondaryBodyParts || [],\n                                tags: exerciseData.tags || [],\n                                videos: videosForExercise,\n                                steps: exerciseData.steps || [],\n                                visibility: exerciseData.visibility || \"live\",\n                                currentVideoPosition: exerciseData.currentVideoPosition || 0,\n                                sets: exerciseData.sets || 0,\n                                reps: exerciseData.reps || \"\",\n                                weight: exerciseData.weight || 0,\n                                author: new _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseAuthor(exerciseData.author || {}),\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_3__.convertFirestoreTimestamp)(exerciseData.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_3__.convertFirestoreTimestamp)(exerciseData.updatedAt)\n                            });\n                        });\n                        // Shuffle and limit results\n                        shuffledExercises = mappedExercises.sort(function() {\n                            return Math.random() - 0.5;\n                        }).slice(0, limit);\n                        return [\n                            2,\n                            shuffledExercises\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching featured exercises:\", error);\n                        return [\n                            2,\n                            []\n                        ];\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getExercisesByAuthor = function getExercisesByAuthor(userId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_5__._)(function() {\n            var videosRef, q, querySnapshot, uniqueExerciseNames, exercises, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_6__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        // Query exerciseVideos collection instead\n                        videosRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(videosRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", userId));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 1:\n                        querySnapshot = _state.sent();\n                        // Create a Set to store unique exercise names\n                        uniqueExerciseNames = new Set();\n                        // Collect all unique exercise names from the videos\n                        querySnapshot.forEach(function(doc) {\n                            var videoData = doc.data();\n                            if (videoData.exerciseName) {\n                                uniqueExerciseNames.add(videoData.exerciseName);\n                            }\n                        });\n                        // Convert to array and create Exercise objects\n                        exercises = Array.from(uniqueExerciseNames).map(function(name) {\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise({\n                                id: name,\n                                name: name,\n                                author: {\n                                    userId: userId\n                                }\n                            });\n                        });\n                        return [\n                            2,\n                            exercises\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error fetching exercises by author:\", error);\n                        return [\n                            2,\n                            []\n                        ];\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchPaginatedExercises = function fetchPaginatedExercises() {\n        var lastDoc = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : null, pageSize = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 15;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_5__._)(function() {\n            var exerciseQuery, exerciseSnapshot, videoSnapshot, exerciseVideos, exercises, mappedExercises, filteredExercises, lastVisible, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_6__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            ,\n                            4\n                        ]);\n                        // Query for exercises with pagination\n                        exerciseQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(pageSize));\n                        if (lastDoc) {\n                            exerciseQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(exerciseQuery, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.startAfter)(lastDoc));\n                        }\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(exerciseQuery)\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        if (exerciseSnapshot.empty) {\n                            return [\n                                2,\n                                {\n                                    exercises: [],\n                                    lastVisible: null\n                                }\n                            ];\n                        }\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        // Map videos to exercises and ensure correct instantiation\n                        mappedExercises = exercises.map(function(exerciseData) {\n                            var videosForExercise = exerciseVideos.filter(function(video) {\n                                return video.exerciseId === exerciseData.id;\n                            });\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_8__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({}, exerciseData), {\n                                videos: videosForExercise\n                            }));\n                        });\n                        // Filter exercises with videos\n                        filteredExercises = mappedExercises.filter(function(exercise) {\n                            return exercise.videos.length > 0;\n                        });\n                        // Update the last visible document for pagination\n                        lastVisible = exerciseSnapshot.docs.length > 0 ? exerciseSnapshot.docs[exerciseSnapshot.docs.length - 1] : null;\n                        return [\n                            2,\n                            {\n                                exercises: filteredExercises,\n                                lastVisible: lastVisible\n                            }\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching paginated exercises:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.generateExerciseLogID = function generateExerciseLogID(workoutId, userId) {\n        // Create a document reference in the logs subcollection of the workout,\n        // then return its generated ID.\n        return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\", workoutId, \"logs\")).id;\n    };\n    (0,_swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_9__._)(ExerciseService, [\n        {\n            key: \"allExercises\",\n            get: function get() {\n                return this._allExercises;\n            }\n        }\n    ]);\n    return ExerciseService;\n}();\nvar exerciseService = new ExerciseService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUk7O3dCQUd4QywyREFBMkQ7d0JBQ3JEVCxrQkFBOEJILFVBQVVjLEdBQUcsQ0FBQyxTQUFDZ0I7NEJBQ2pELElBQU1iLG9CQUFvQmYsZUFBZWdCLE1BQU0sQ0FBQyxTQUFDQzt1Q0FBVUEsTUFBTStDLFVBQVUsS0FBS3BDLGFBQWFmLEVBQUU7OzRCQUUvRixPQUFPLElBQUl2Qiw0Q0FBUUEsQ0FBQyxzSUFDZnNDO2dDQUNITCxRQUFRUjs7d0JBRVo7d0JBRUEsK0JBQStCO3dCQUN6QjhDLG9CQUFnQzVELGdCQUFnQmUsTUFBTSxDQUFDLFNBQUNGO21DQUFhQSxTQUFTUyxNQUFNLENBQUNDLE1BQU0sR0FBRzs7d0JBRXBHLGtEQUFrRDt3QkFDNUNzQyxjQUFjakUsaUJBQWlCTSxJQUFJLENBQUNxQixNQUFNLEdBQUcsSUFBSTNCLGlCQUFpQk0sSUFBSSxDQUFDTixpQkFBaUJNLElBQUksQ0FBQ3FCLE1BQU0sR0FBRyxFQUFFLEdBQUc7d0JBRWpIOzs0QkFBTztnQ0FBRTFCLFdBQVcrRDtnQ0FBbUJDLGFBQUFBOzRCQUFZOzs7d0JBRTVDNUQ7d0JBQ1BHLFFBQVFILEtBQUssQ0FBQyx1Q0FBdUNBO3dCQUNyRCxNQUFNQTs7Ozs7OztRQUVWOztJQUVBK0QsT0FBQUEscUJBTUMsR0FOREEsU0FBQUEsc0JBQXNCQyxTQUFpQixFQUFFbkIsTUFBYztRQUNyRCx3RUFBd0U7UUFDeEUsZ0NBQWdDO1FBQ2hDLE9BQU81RCx1REFBR0EsQ0FDUk4sOERBQVVBLENBQUNRLHVDQUFFQSxFQUFFLFNBQVMwRCxRQUFRLHFCQUFxQm1CLFdBQVcsU0FDaEVyRCxFQUFFO0lBQ047aUVBdk9BbkI7O1lBR0V5RSxLQUFBQTtpQkFBSjtnQkFDRSxPQUFPLElBQUksQ0FBQ3hFLGFBQWE7WUFDM0I7OztXQUxFRDs7QUEwT0csSUFBTTBFLGtCQUFrQixJQUFJMUUsa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9hcGkvZmlyZWJhc2UvZXhlcmNpc2Uvc2VydmljZS50cz9hODMxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgY29sbGVjdGlvbixcbiAgICBnZXREb2NzLFxuICAgIHF1ZXJ5LFxuICAgIG9yZGVyQnksXG4gICAgbGltaXQsXG4gICAgc3RhcnRBZnRlcixcbiAgICBEb2N1bWVudFNuYXBzaG90LFxuICAgIGRvYyxcbiAgICB3aGVyZSxcbiAgfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi9jb25maWcnO1xuaW1wb3J0IHsgRXhlcmNpc2UgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IEV4ZXJjaXNlVmlkZW8sIEV4ZXJjaXNlQXV0aG9yIH0gZnJvbSAnLi4vLi4vZmlyZWJhc2UvZXhlcmNpc2UvdHlwZXMnO1xuaW1wb3J0IHsgY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL2Zvcm1hdERhdGUnO1xuXG5jbGFzcyBFeGVyY2lzZVNlcnZpY2Uge1xuICAgIHByaXZhdGUgX2FsbEV4ZXJjaXNlczogRXhlcmNpc2VbXSA9IFtdO1xuICBcbiAgICBnZXQgYWxsRXhlcmNpc2VzKCk6IEV4ZXJjaXNlW10ge1xuICAgICAgcmV0dXJuIHRoaXMuX2FsbEV4ZXJjaXNlcztcbiAgICB9XG4gIFxuICAgIGFzeW5jIGZldGNoRXhlcmNpc2VzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gRmV0Y2ggYWxsIGV4ZXJjaXNlc1xuICAgICAgICBjb25zdCBleGVyY2lzZVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VzJykpO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIHRoaXMgbG9nIHRvIHNlZSByYXcgZGF0YVxuICAgICAgICBleGVyY2lzZVNuYXBzaG90LmRvY3MuZm9yRWFjaChkb2MgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdSYXcgZXhlcmNpc2UgZGF0YSBmcm9tIERCOicsIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIG5hbWU6IGRvYy5kYXRhKCkubmFtZSxcbiAgICAgICAgICAgIGNhdGVnb3J5OiBkb2MuZGF0YSgpLmNhdGVnb3J5XG4gICAgICAgICAgfSwgbnVsbCwgMikpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBleGVyY2lzZXM6IEV4ZXJjaXNlW10gPSBleGVyY2lzZVNuYXBzaG90LmRvY3MubWFwKChkb2MpID0+IG5ldyBFeGVyY2lzZSh7XG4gICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAuLi5kb2MuZGF0YSgpLFxuICAgICAgICB9KSk7XG4gICAgXG4gICAgICAgIC8vIEZldGNoIGFsbCB2aWRlb3NcbiAgICAgICAgY29uc3QgdmlkZW9TbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlVmlkZW9zJykpO1xuICAgICAgICBjb25zdCBleGVyY2lzZVZpZGVvczogRXhlcmNpc2VWaWRlb1tdID0gdmlkZW9TbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PlxuICAgICAgICAgIG5ldyBFeGVyY2lzZVZpZGVvKHtcbiAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICAuLi5kb2MuZGF0YSgpLFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgXG4gICAgICAgIC8vIE1hcCB2aWRlb3MgdG8gdGhlaXIgY29ycmVzcG9uZGluZyBleGVyY2lzZXMgYnkgbmFtZVxuICAgICAgICBjb25zdCBtYXBwZWRFeGVyY2lzZXMgPSBleGVyY2lzZXMubWFwKChleGVyY2lzZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHZpZGVvc0ZvckV4ZXJjaXNlID0gZXhlcmNpc2VWaWRlb3NcbiAgICAgICAgICAgIC5maWx0ZXIoKHZpZGVvKSA9PiB2aWRlby5leGVyY2lzZS50b0xvd2VyQ2FzZSgpID09PSBleGVyY2lzZS5uYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICAgICAubWFwKCh2aWRlbykgPT4gbmV3IEV4ZXJjaXNlVmlkZW8odmlkZW8pKTsgLy8gRW5zdXJlIHByb3BlciBFeGVyY2lzZVZpZGVvIGluc3RhbmNlc1xuICAgICAgICBcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFeGVyY2lzZSBjb25zdHJ1Y3RvciAtIGNhdGVnb3J5IGRhdGE6JywgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICBleGVyY2lzZU5hbWU6IGV4ZXJjaXNlLm5hbWUsXG4gICAgICAgICAgICAgIGNhdGVnb3J5RGF0YTogZXhlcmNpc2UuY2F0ZWdvcnksXG4gICAgICAgICAgICAgIGNhdGVnb3J5VHlwZTogZXhlcmNpc2UuY2F0ZWdvcnk/LnR5cGVcbiAgICAgICAgICAgfSwgbnVsbCwgMikpO1xuXG4gICAgICAgICAgcmV0dXJuIG5ldyBFeGVyY2lzZSh7XG4gICAgICAgICAgICAuLi5leGVyY2lzZSwgLy8gS2VlcCBleGlzdGluZyBwcm9wZXJ0aWVzXG4gICAgICAgICAgICB2aWRlb3M6IHZpZGVvc0ZvckV4ZXJjaXNlLCAvLyBFbnN1cmUgdmlkZW9zIGFyZSBpbnN0YW5jZXMgb2YgRXhlcmNpc2VWaWRlb1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgLy8gRmlsdGVyIG91dCBleGVyY2lzZXMgd2l0aG91dCB2aWRlb3NcbiAgICAgICAgdGhpcy5fYWxsRXhlcmNpc2VzID0gbWFwcGVkRXhlcmNpc2VzLmZpbHRlcigoZXhlcmNpc2U6IEV4ZXJjaXNlKSA9PiBleGVyY2lzZS52aWRlb3MubGVuZ3RoID4gMCk7XG4gICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBGZXRjaGVkICR7dGhpcy5fYWxsRXhlcmNpc2VzLmxlbmd0aH0gZXhlcmNpc2VzIHdpdGggdmlkZW9zLmApO1xuICAgICAgICBcbiAgICAgICAgLy8gRGV0YWlsZWQgbG9nZ2luZyBmb3IgZGVidWdnaW5nXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdTYW1wbGUgZXhlcmNpc2VzOicsIHRoaXMuX2FsbEV4ZXJjaXNlcy5zbGljZSgwLCA1KS5tYXAoZXggPT4gKHtcbiAgICAgICAgLy8gICBuYW1lOiBleC5uYW1lLFxuICAgICAgICAvLyAgIHZpZGVvQ291bnQ6IGV4LnZpZGVvcy5sZW5ndGgsXG4gICAgICAgIC8vICAgZmlyc3RWaWRlb1VybDogZXgudmlkZW9zWzBdPy52aWRlb1VSTFxuICAgICAgICAvLyB9KSkpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgZXhlcmNpc2VzOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggZXhlcmNpc2VzLicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGZldGNoRmVhdHVyZWRFeGVyY2lzZXNXaXRoVmlkZW9zKGxpbWl0OiBudW1iZXIgPSAyNCk6IFByb21pc2U8RXhlcmNpc2VbXT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gRmV0Y2ggYWxsIGV4ZXJjaXNlc1xuICAgICAgICBjb25zdCBleGVyY2lzZVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VzJykpO1xuICAgICAgICBjb25zdCBleGVyY2lzZXM6IEV4ZXJjaXNlW10gPSBleGVyY2lzZVNuYXBzaG90LmRvY3MubWFwKChkb2MpID0+IFxuICAgICAgICAgbmV3IEV4ZXJjaXNlKHtcbiAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICAuLi5kb2MuZGF0YSgpLFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgXG4gICAgICAgIC8vIEZldGNoIGFsbCB2aWRlb3NcbiAgICAgICAgY29uc3QgdmlkZW9TbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlVmlkZW9zJykpO1xuICAgICAgICBjb25zdCBleGVyY2lzZVZpZGVvczogRXhlcmNpc2VWaWRlb1tdID0gdmlkZW9TbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PlxuICAgICAgICAgIG5ldyBFeGVyY2lzZVZpZGVvKHtcbiAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICAuLi5kb2MuZGF0YSgpLFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgXG4gICAgICAgIC8vIE1hcCB2aWRlb3MgdG8gZXhlcmNpc2VzIGFuZCBmaWx0ZXIgZm9yIHRob3NlIHdpdGggR0lGc1xuICAgICAgICBjb25zdCBtYXBwZWRFeGVyY2lzZXMgPSBleGVyY2lzZXMubWFwKChleGVyY2lzZURhdGEpID0+IHtcbiAgICAgICAgICAvLyBFbnN1cmUgdGhhdCBlYWNoIHZpZGVvIGlzIHByb3Blcmx5IGluc3RhbnRpYXRlZCBhcyBhbiBgRXhlcmNpc2VWaWRlb2BcbiAgICAgICAgICBjb25zdCB2aWRlb3NGb3JFeGVyY2lzZSA9IChleGVyY2lzZVZpZGVvc1xuICAgICAgICAgICAgLmZpbHRlcigodmlkZW8pID0+IHZpZGVvLmV4ZXJjaXNlLnRvTG93ZXJDYXNlKCkgPT09IGV4ZXJjaXNlRGF0YS5uYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICAgICAubWFwKCh2aWRlbykgPT4gbmV3IEV4ZXJjaXNlVmlkZW8odmlkZW8pKSkgYXMgRXhlcmNpc2VWaWRlb1tdO1xuICAgICAgICBcblxuICAgICAgICAgIHJldHVybiBuZXcgRXhlcmNpc2Uoe1xuICAgICAgICAgICAgaWQ6IGV4ZXJjaXNlRGF0YS5pZCxcbiAgICAgICAgICAgIG5hbWU6IGV4ZXJjaXNlRGF0YS5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGV4ZXJjaXNlRGF0YS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIGNhdGVnb3J5OiBleGVyY2lzZURhdGEuY2F0ZWdvcnksXG4gICAgICAgICAgICBwcmltYXJ5Qm9keVBhcnRzOiBleGVyY2lzZURhdGEucHJpbWFyeUJvZHlQYXJ0cyB8fCBbXSxcbiAgICAgICAgICAgIHNlY29uZGFyeUJvZHlQYXJ0czogZXhlcmNpc2VEYXRhLnNlY29uZGFyeUJvZHlQYXJ0cyB8fCBbXSxcbiAgICAgICAgICAgIHRhZ3M6IGV4ZXJjaXNlRGF0YS50YWdzIHx8IFtdLFxuICAgICAgICAgICAgdmlkZW9zOiB2aWRlb3NGb3JFeGVyY2lzZSwgLy8gQXR0YWNoIHByb3Blcmx5IG1hcHBlZCB2aWRlb3NcbiAgICAgICAgICAgIHN0ZXBzOiBleGVyY2lzZURhdGEuc3RlcHMgfHwgW10sXG4gICAgICAgICAgICB2aXNpYmlsaXR5OiBleGVyY2lzZURhdGEudmlzaWJpbGl0eSB8fCAnbGl2ZScsXG4gICAgICAgICAgICBjdXJyZW50VmlkZW9Qb3NpdGlvbjogZXhlcmNpc2VEYXRhLmN1cnJlbnRWaWRlb1Bvc2l0aW9uIHx8IDAsXG4gICAgICAgICAgICBzZXRzOiBleGVyY2lzZURhdGEuc2V0cyB8fCAwLFxuICAgICAgICAgICAgcmVwczogZXhlcmNpc2VEYXRhLnJlcHMgfHwgJycsXG4gICAgICAgICAgICB3ZWlnaHQ6IGV4ZXJjaXNlRGF0YS53ZWlnaHQgfHwgMCxcbiAgICAgICAgICAgIGF1dGhvcjogbmV3IEV4ZXJjaXNlQXV0aG9yKGV4ZXJjaXNlRGF0YS5hdXRob3IgfHwge30pLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGV4ZXJjaXNlRGF0YS5jcmVhdGVkQXQpLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGV4ZXJjaXNlRGF0YS51cGRhdGVkQXQpLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgXG4gICAgICAgIC8vIFNodWZmbGUgYW5kIGxpbWl0IHJlc3VsdHNcbiAgICAgICAgY29uc3Qgc2h1ZmZsZWRFeGVyY2lzZXMgPSBtYXBwZWRFeGVyY2lzZXNcbiAgICAgICAgICAuc29ydCgoKSA9PiBNYXRoLnJhbmRvbSgpIC0gMC41KVxuICAgICAgICAgIC5zbGljZSgwLCBsaW1pdCk7XG4gICAgXG4gICAgICAgIHJldHVybiBzaHVmZmxlZEV4ZXJjaXNlcztcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGZlYXR1cmVkIGV4ZXJjaXNlczonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBnZXRFeGVyY2lzZXNCeUF1dGhvcih1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8RXhlcmNpc2VbXT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gUXVlcnkgZXhlcmNpc2VWaWRlb3MgY29sbGVjdGlvbiBpbnN0ZWFkXG4gICAgICAgIGNvbnN0IHZpZGVvc1JlZiA9IGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZVZpZGVvcycpO1xuICAgICAgICBjb25zdCBxID0gcXVlcnkodmlkZW9zUmVmLCB3aGVyZSgndXNlcklkJywgJz09JywgdXNlcklkKSk7XG4gICAgICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIGEgU2V0IHRvIHN0b3JlIHVuaXF1ZSBleGVyY2lzZSBuYW1lc1xuICAgICAgICBjb25zdCB1bmlxdWVFeGVyY2lzZU5hbWVzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBDb2xsZWN0IGFsbCB1bmlxdWUgZXhlcmNpc2UgbmFtZXMgZnJvbSB0aGUgdmlkZW9zXG4gICAgICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaCgoZG9jKSA9PiB7XG4gICAgICAgICAgY29uc3QgdmlkZW9EYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgICAgICBpZiAodmlkZW9EYXRhLmV4ZXJjaXNlTmFtZSkge1xuICAgICAgICAgICAgdW5pcXVlRXhlcmNpc2VOYW1lcy5hZGQodmlkZW9EYXRhLmV4ZXJjaXNlTmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgXG4gICAgICAgIC8vIENvbnZlcnQgdG8gYXJyYXkgYW5kIGNyZWF0ZSBFeGVyY2lzZSBvYmplY3RzXG4gICAgICAgIGNvbnN0IGV4ZXJjaXNlcyA9IEFycmF5LmZyb20odW5pcXVlRXhlcmNpc2VOYW1lcykubWFwKG5hbWUgPT4ge1xuICAgICAgICAgIHJldHVybiBuZXcgRXhlcmNpc2Uoe1xuICAgICAgICAgICAgaWQ6IG5hbWUsIC8vIFVzaW5nIG5hbWUgYXMgSUQgc2luY2Ugd2UganVzdCBuZWVkIHVuaXF1ZSBpZGVudGlmaWVyc1xuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIGF1dGhvcjogeyB1c2VySWQ6IHVzZXJJZCB9XG4gICAgICAgICAgICAvLyBBZGQgb3RoZXIgcmVxdWlyZWQgRXhlcmNpc2UgcHJvcGVydGllcyBhcyBuZWVkZWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZXhlcmNpc2VzO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgZXhlcmNpc2VzIGJ5IGF1dGhvcjonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBmZXRjaFBhZ2luYXRlZEV4ZXJjaXNlcyhcbiAgICAgICAgbGFzdERvYzogRG9jdW1lbnRTbmFwc2hvdCB8IG51bGwgPSBudWxsLFxuICAgICAgICBwYWdlU2l6ZTogbnVtYmVyID0gMTVcbiAgICAgICk6IFByb21pc2U8eyBleGVyY2lzZXM6IEV4ZXJjaXNlW107IGxhc3RWaXNpYmxlOiBEb2N1bWVudFNuYXBzaG90IHwgbnVsbCB9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gUXVlcnkgZm9yIGV4ZXJjaXNlcyB3aXRoIHBhZ2luYXRpb25cbiAgICAgICAgICBsZXQgZXhlcmNpc2VRdWVyeSA9IHF1ZXJ5KFxuICAgICAgICAgICAgY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlcycpLFxuICAgICAgICAgICAgb3JkZXJCeSgnY3JlYXRlZEF0JywgJ2Rlc2MnKSxcbiAgICAgICAgICAgIGxpbWl0KHBhZ2VTaXplKVxuICAgICAgICAgICk7XG4gICAgXG4gICAgICAgICAgaWYgKGxhc3REb2MpIHtcbiAgICAgICAgICAgIGV4ZXJjaXNlUXVlcnkgPSBxdWVyeShleGVyY2lzZVF1ZXJ5LCBzdGFydEFmdGVyKGxhc3REb2MpKTtcbiAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgY29uc3QgZXhlcmNpc2VTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoZXhlcmNpc2VRdWVyeSk7XG4gICAgXG4gICAgICAgICAgaWYgKGV4ZXJjaXNlU25hcHNob3QuZW1wdHkpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGV4ZXJjaXNlczogW10sIGxhc3RWaXNpYmxlOiBudWxsIH07XG4gICAgICAgICAgfVxuICAgIFxuICAgICAgICAgIC8vIEZldGNoIGV4ZXJjaXNlIHZpZGVvcyBzZXBhcmF0ZWx5XG4gICAgICAgICAgY29uc3QgdmlkZW9TbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlVmlkZW9zJykpO1xuICAgICAgICAgIGNvbnN0IGV4ZXJjaXNlVmlkZW9zOiBFeGVyY2lzZVZpZGVvW10gPSB2aWRlb1NuYXBzaG90LmRvY3MubWFwKChkb2MpID0+XG4gICAgICAgICAgICBuZXcgRXhlcmNpc2VWaWRlbyh7XG4gICAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICAgIC4uLmRvYy5kYXRhKCksXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgZXhlcmNpc2VzOiBFeGVyY2lzZVtdID0gZXhlcmNpc2VTbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PlxuICAgICAgICAgICAgbmV3IEV4ZXJjaXNlKHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9KVxuICAgICAgICAgICk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gTWFwIHZpZGVvcyB0byBleGVyY2lzZXMgYW5kIGVuc3VyZSBjb3JyZWN0IGluc3RhbnRpYXRpb25cbiAgICAgICAgICBjb25zdCBtYXBwZWRFeGVyY2lzZXM6IEV4ZXJjaXNlW10gPSBleGVyY2lzZXMubWFwKChleGVyY2lzZURhdGEpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZpZGVvc0ZvckV4ZXJjaXNlID0gZXhlcmNpc2VWaWRlb3MuZmlsdGVyKCh2aWRlbykgPT4gdmlkZW8uZXhlcmNpc2VJZCA9PT0gZXhlcmNpc2VEYXRhLmlkKTtcbiAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBuZXcgRXhlcmNpc2Uoe1xuICAgICAgICAgICAgICAuLi5leGVyY2lzZURhdGEsIC8vIENvcHkgZXhpc3RpbmcgcHJvcGVydGllc1xuICAgICAgICAgICAgICB2aWRlb3M6IHZpZGVvc0ZvckV4ZXJjaXNlLCAvLyBBc3NpZ24gZmlsdGVyZWQgdmlkZW9zXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBGaWx0ZXIgZXhlcmNpc2VzIHdpdGggdmlkZW9zXG4gICAgICAgICAgY29uc3QgZmlsdGVyZWRFeGVyY2lzZXM6IEV4ZXJjaXNlW10gPSBtYXBwZWRFeGVyY2lzZXMuZmlsdGVyKChleGVyY2lzZSkgPT4gZXhlcmNpc2UudmlkZW9zLmxlbmd0aCA+IDApO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbGFzdCB2aXNpYmxlIGRvY3VtZW50IGZvciBwYWdpbmF0aW9uXG4gICAgICAgICAgY29uc3QgbGFzdFZpc2libGUgPSBleGVyY2lzZVNuYXBzaG90LmRvY3MubGVuZ3RoID4gMCA/IGV4ZXJjaXNlU25hcHNob3QuZG9jc1tleGVyY2lzZVNuYXBzaG90LmRvY3MubGVuZ3RoIC0gMV0gOiBudWxsO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB7IGV4ZXJjaXNlczogZmlsdGVyZWRFeGVyY2lzZXMsIGxhc3RWaXNpYmxlIH07XG4gICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcGFnaW5hdGVkIGV4ZXJjaXNlczonLCBlcnJvcik7XG4gICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZ2VuZXJhdGVFeGVyY2lzZUxvZ0lEKHdvcmtvdXRJZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIC8vIENyZWF0ZSBhIGRvY3VtZW50IHJlZmVyZW5jZSBpbiB0aGUgbG9ncyBzdWJjb2xsZWN0aW9uIG9mIHRoZSB3b3Jrb3V0LFxuICAgICAgICAvLyB0aGVuIHJldHVybiBpdHMgZ2VuZXJhdGVkIElELlxuICAgICAgICByZXR1cm4gZG9jKFxuICAgICAgICAgIGNvbGxlY3Rpb24oZGIsICd1c2VycycsIHVzZXJJZCwgJ015Q3JlYXRlZFdvcmtvdXRzJywgd29ya291dElkLCAnbG9ncycpXG4gICAgICAgICkuaWQ7XG4gICAgICB9XG4gIH1cbiAgXG4gIGV4cG9ydCBjb25zdCBleGVyY2lzZVNlcnZpY2UgPSBuZXcgRXhlcmNpc2VTZXJ2aWNlKCk7Il0sIm5hbWVzIjpbImNvbGxlY3Rpb24iLCJnZXREb2NzIiwicXVlcnkiLCJvcmRlckJ5IiwibGltaXQiLCJzdGFydEFmdGVyIiwiZG9jIiwid2hlcmUiLCJkYiIsIkV4ZXJjaXNlIiwiRXhlcmNpc2VWaWRlbyIsIkV4ZXJjaXNlQXV0aG9yIiwiY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcCIsIkV4ZXJjaXNlU2VydmljZSIsIl9hbGxFeGVyY2lzZXMiLCJmZXRjaEV4ZXJjaXNlcyIsImV4ZXJjaXNlU25hcHNob3QiLCJleGVyY2lzZXMiLCJ2aWRlb1NuYXBzaG90IiwiZXhlcmNpc2VWaWRlb3MiLCJtYXBwZWRFeGVyY2lzZXMiLCJlcnJvciIsImRvY3MiLCJmb3JFYWNoIiwiY29uc29sZSIsImxvZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJuYW1lIiwiZGF0YSIsImNhdGVnb3J5IiwibWFwIiwiaWQiLCJleGVyY2lzZSIsInZpZGVvc0ZvckV4ZXJjaXNlIiwiZmlsdGVyIiwidmlkZW8iLCJ0b0xvd2VyQ2FzZSIsImV4ZXJjaXNlTmFtZSIsImNhdGVnb3J5RGF0YSIsImNhdGVnb3J5VHlwZSIsInR5cGUiLCJ2aWRlb3MiLCJsZW5ndGgiLCJFcnJvciIsImZldGNoRmVhdHVyZWRFeGVyY2lzZXNXaXRoVmlkZW9zIiwic2h1ZmZsZWRFeGVyY2lzZXMiLCJleGVyY2lzZURhdGEiLCJkZXNjcmlwdGlvbiIsInByaW1hcnlCb2R5UGFydHMiLCJzZWNvbmRhcnlCb2R5UGFydHMiLCJ0YWdzIiwic3RlcHMiLCJ2aXNpYmlsaXR5IiwiY3VycmVudFZpZGVvUG9zaXRpb24iLCJzZXRzIiwicmVwcyIsIndlaWdodCIsImF1dGhvciIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInNvcnQiLCJNYXRoIiwicmFuZG9tIiwic2xpY2UiLCJnZXRFeGVyY2lzZXNCeUF1dGhvciIsInVzZXJJZCIsInZpZGVvc1JlZiIsInEiLCJxdWVyeVNuYXBzaG90IiwidW5pcXVlRXhlcmNpc2VOYW1lcyIsIlNldCIsInZpZGVvRGF0YSIsImFkZCIsIkFycmF5IiwiZnJvbSIsImZldGNoUGFnaW5hdGVkRXhlcmNpc2VzIiwibGFzdERvYyIsInBhZ2VTaXplIiwiZXhlcmNpc2VRdWVyeSIsImZpbHRlcmVkRXhlcmNpc2VzIiwibGFzdFZpc2libGUiLCJlbXB0eSIsImV4ZXJjaXNlSWQiLCJnZW5lcmF0ZUV4ZXJjaXNlTG9nSUQiLCJ3b3Jrb3V0SWQiLCJhbGxFeGVyY2lzZXMiLCJleGVyY2lzZVNlcnZpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/api/firebase/exercise/service.ts\n"));

/***/ })

});
"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/_app",{

/***/ "./src/api/firebase/workout/service.ts":
/*!*********************************************!*\
  !*** ./src/api/firebase/workout/service.ts ***!
  \*********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   workoutService: function() { return /* binding */ workoutService; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @swc/helpers/_/_async_to_generator */ \"./node_modules/@swc/helpers/esm/_async_to_generator.js\");\n/* harmony import */ var _swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @swc/helpers/_/_class_call_check */ \"./node_modules/@swc/helpers/esm/_class_call_check.js\");\n/* harmony import */ var _swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @swc/helpers/_/_create_class */ \"./node_modules/@swc/helpers/esm/_create_class.js\");\n/* harmony import */ var _swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @swc/helpers/_/_object_spread */ \"./node_modules/@swc/helpers/esm/_object_spread.js\");\n/* harmony import */ var _swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @swc/helpers/_/_object_spread_props */ \"./node_modules/@swc/helpers/esm/_object_spread_props.js\");\n/* harmony import */ var _swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @swc/helpers/_/_sliced_to_array */ \"./node_modules/@swc/helpers/esm/_sliced_to_array.js\");\n/* harmony import */ var _swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @swc/helpers/_/_ts_generator */ \"./node_modules/@swc/helpers/esm/_ts_generator.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/api/firebase/config.ts\");\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../user */ \"./src/api/firebase/user/index.ts\");\n/* harmony import */ var _exercise_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../exercise/types */ \"./src/api/firebase/exercise/types.ts\");\n/* harmony import */ var _workout_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../api/firebase/workout/types */ \"./src/api/firebase/workout/types.ts\");\n/* harmony import */ var _barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! __barrel_optimize__?names=format!=!date-fns */ \"__barrel_optimize__?names=format!=!./node_modules/date-fns/index.js\");\n/* harmony import */ var _utils_timestamp__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/timestamp */ \"./src/utils/timestamp.ts\");\n/* harmony import */ var _utils_formatDate__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/formatDate */ \"./src/utils/formatDate.ts\");\n/* harmony import */ var _redux_store__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../redux/store */ \"./src/redux/store.ts\");\n/* harmony import */ var _redux_workoutSlice__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../redux/workoutSlice */ \"./src/redux/workoutSlice.ts\");\n// src/api/firebase/workout/service.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // Adjust the import path\n\n\n\n\nvar WorkoutService = /*#__PURE__*/ function() {\n    \"use strict\";\n    function WorkoutService() {\n        (0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_9__._)(this, WorkoutService);\n    }\n    var _proto = WorkoutService.prototype;\n    _proto.generateId = function generateId() {\n        return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"workouts\")).id;\n    };\n    /**\n   * Fetch the user's current workout (either QueuedUp or InProgress).\n   */ _proto.fetchCurrentWorkout = function fetchCurrentWorkout(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var session;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        return [\n                            4,\n                            _this.fetchCurrentWorkoutSession(userId)\n                        ];\n                    case 1:\n                        session = _state.sent();\n                        return [\n                            2,\n                            session.workout\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getAllSweatlists = function getAllSweatlists(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var workoutsRef, exercisesWithVideos, workoutsSnapshot, workouts, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, workoutDoc, workoutData, workoutId, mappedExercises, workout, logsRef, logsSnapshot, err, error, firestoreError;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"User ID is required\");\n                        }\n                        // Reference to the user's workout collection\n                        workoutsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\");\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            12,\n                            ,\n                            13\n                        ]);\n                        return [\n                            4,\n                            _this.fetchAndMapExercisesWithVideos()\n                        ];\n                    case 2:\n                        exercisesWithVideos = _state.sent();\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(workoutsRef)\n                        ];\n                    case 3:\n                        workoutsSnapshot = _state.sent();\n                        workouts = [];\n                        _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;\n                        _state.label = 4;\n                    case 4:\n                        _state.trys.push([\n                            4,\n                            9,\n                            10,\n                            11\n                        ]);\n                        _iterator = workoutsSnapshot.docs[Symbol.iterator]();\n                        _state.label = 5;\n                    case 5:\n                        if (!!(_iteratorNormalCompletion = (_step = _iterator.next()).done)) return [\n                            3,\n                            8\n                        ];\n                        workoutDoc = _step.value;\n                        workoutData = workoutDoc.data();\n                        workoutId = workoutDoc.id;\n                        // Map the exercises in the workout to the full exercise objects with videos\n                        mappedExercises = (workoutData.exercises || []).map(function(exerciseRef) {\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name === exerciseRef.exercise.name;\n                            });\n                            console.log(\"This is the mapped exercise: \" + fullExercise);\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, exerciseRef), {\n                                exercise: fullExercise || exerciseRef\n                            });\n                        });\n                        // Parse workout data into the desired structure\n                        workout = new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Workout({\n                            id: workoutData.id || \"\",\n                            roundWorkoutId: workoutData.roundWorkoutId || \"\",\n                            collectionId: workoutData.collectionId,\n                            exercises: mappedExercises,\n                            challenge: workoutData.challenge,\n                            logs: [],\n                            title: workoutData.title || \"\",\n                            description: workoutData.description || \"\",\n                            duration: workoutData.duration || 0,\n                            workoutRating: workoutData.workoutRating,\n                            useAuthorContent: workoutData.useAuthorContent || false,\n                            isCompleted: workoutData.isCompleted || false,\n                            workoutStatus: workoutData.workoutStatus || \"notStarted\",\n                            startTime: workoutData.startTime ? new Date(workoutData.startTime) : undefined,\n                            order: workoutData.order,\n                            author: workoutData.author || userId,\n                            createdAt: workoutData.createdAt ? new Date(workoutData.createdAt) : new Date(),\n                            updatedAt: workoutData.updatedAt ? new Date(workoutData.updatedAt) : new Date(),\n                            zone: workoutData.zone || \"FULL_BODY\"\n                        });\n                        // Fetch and process logs\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\", workoutId, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 6:\n                        logsSnapshot = _state.sent();\n                        workout.logs = logsSnapshot.docs.map(function(logDoc) {\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, logDoc.data()), {\n                                id: logDoc.id\n                            });\n                        });\n                        workouts.push(workout);\n                        _state.label = 7;\n                    case 7:\n                        _iteratorNormalCompletion = true;\n                        return [\n                            3,\n                            5\n                        ];\n                    case 8:\n                        return [\n                            3,\n                            11\n                        ];\n                    case 9:\n                        err = _state.sent();\n                        _didIteratorError = true;\n                        _iteratorError = err;\n                        return [\n                            3,\n                            11\n                        ];\n                    case 10:\n                        try {\n                            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                                _iterator[\"return\"]();\n                            }\n                        } finally{\n                            if (_didIteratorError) {\n                                throw _iteratorError;\n                            }\n                        }\n                        return [\n                            7\n                        ];\n                    case 11:\n                        return [\n                            2,\n                            workouts\n                        ];\n                    case 12:\n                        error = _state.sent();\n                        firestoreError = error;\n                        console.error(\"Error fetching sweatlists:\", firestoreError.message);\n                        throw new Error(\"Failed to fetch sweatlists\");\n                    case 13:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getUserChallengesByChallengeId = function getUserChallengesByChallengeId(challengeId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var userChallengesRef, q, snapshot, userChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"challengeId\", \"==\", challengeId));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        userChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            return new _workout_types__WEBPACK_IMPORTED_MODULE_4__.UserChallenge(doc.id, data);\n                        });\n                        if (userChallenges.length > 0) {\n                            return [\n                                2,\n                                {\n                                    userChallenges: userChallenges\n                                }\n                            ];\n                        } else {\n                            return [\n                                2,\n                                {\n                                    userChallenges: [],\n                                    error: \"No user challenges found for this challenge.\"\n                                }\n                            ];\n                        }\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges by challengeId:\", error);\n                        return [\n                            2,\n                            {\n                                userChallenges: [],\n                                error: error instanceof Error ? error.message : \"Unknown error\"\n                            }\n                        ];\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetches workout summaries for a specific date.\n   * @param date - The date for which workout summaries are being fetched.\n   * @returns A promise resolving to an array of workout summaries.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ _proto.fetchWorkoutSummaries = function fetchWorkoutSummaries(date) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var currentUser, formattedDate, summariesRef, q, snapshot, error, firestoreError;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Format the date to match the format in Firestore ('MM-dd-yyyy')\n                        formattedDate = (0,_barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_14__.format)(date, \"MM-dd-yyyy\");\n                        // Reference to the user's workoutSummaries subcollection\n                        summariesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", currentUser.id, \"workoutSummaries\");\n                        // Create a query to filter documents by the specified date\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(summariesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"date\", \"==\", formattedDate));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // Map the documents to an array of WorkoutSummary objects\n                        return [\n                            2,\n                            snapshot.docs.map(function(doc) {\n                                return (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                    id: doc.id\n                                }, doc.data());\n                            })\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        firestoreError = error;\n                        console.error(\"Error fetching workout summaries:\", firestoreError.message);\n                        throw new Error(firestoreError.message);\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchAllWorkoutSummaries = function fetchAllWorkoutSummaries() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var currentUser, summariesRef, q, snapshot, error, firestoreError;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Reference to the user's workoutSummaries subcollection\n                        summariesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", currentUser.id, \"workoutSummary\");\n                        // Query to retrieve all workout summaries, sorted by `createdAt` in ascending order\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(summariesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"asc\")); // Adjust field name based on your schema\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // Map the documents to an array of WorkoutSummary objects\n                        return [\n                            2,\n                            snapshot.docs.map(function(doc) {\n                                return (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                    id: doc.id\n                                }, doc.data());\n                            })\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        firestoreError = error;\n                        console.error(\"Error fetching all workout summaries:\", firestoreError.message);\n                        throw new Error(firestoreError.message);\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n * Fetch user challenges by userId.\n * @param userId The ID of the user to fetch challenges for.\n * @returns A promise resolving to an array of user challenges.\n * @throws If the Firestore query fails.\n */ _proto.fetchUserChallengesByUserId = function fetchUserChallengesByUserId(userId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var userChallengesRef, q, snapshot, userChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", userId));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // console.log(`Total challenges fetched: ${snapshot.docs.length}`);\n                        userChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            // console.log(`Processing challenge with ID: ${doc.id}`, data);\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                id: doc.id\n                            }, data), {\n                                challenge: data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Challenge({\n                                    id: data.challenge.id,\n                                    title: data.challenge.title,\n                                    subtitle: data.challenge.subtitle,\n                                    participants: data.challenge.participants || [],\n                                    status: data.challenge.status,\n                                    startDate: data.challenge.startDate ? new Date(data.challenge.startDate) : new Date(),\n                                    endDate: data.challenge.endDate ? new Date(data.challenge.endDate) : new Date(),\n                                    createdAt: data.challenge.createdAt ? new Date(data.challenge.createdAt) : new Date(),\n                                    updatedAt: data.challenge.updatedAt ? new Date(data.challenge.updatedAt) : new Date(),\n                                    introVideos: (data.challenge.introVideos || []).map(function(v) {\n                                        return new _workout_types__WEBPACK_IMPORTED_MODULE_4__.IntroVideo({\n                                            id: v.id,\n                                            userId: v.userId,\n                                            videoUrl: v.videoUrl\n                                        });\n                                    })\n                                }) : undefined,\n                                createdAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_5__.convertTimestamp)(data.createdAt),\n                                updatedAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_5__.convertTimestamp)(data.updatedAt)\n                            });\n                        });\n                        // console.log('All challenges after processing:', JSON.stringify(userChallenges, null, 2));\n                        return [\n                            2,\n                            userChallenges\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges by userId:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchCollectionWithSweatLists = function fetchCollectionWithSweatLists(collectionId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var collection, sweatLists, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, sweatlistIdentifier, _ref, workout, error, err, error1;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            12,\n                            ,\n                            13\n                        ]);\n                        return [\n                            4,\n                            _this.getCollectionById(collectionId)\n                        ];\n                    case 1:\n                        collection = _state.sent();\n                        // Fetch sweat lists (workouts)\n                        sweatLists = [];\n                        _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;\n                        _state.label = 2;\n                    case 2:\n                        _state.trys.push([\n                            2,\n                            9,\n                            10,\n                            11\n                        ]);\n                        _iterator = (collection.sweatlistIds || [])[Symbol.iterator]();\n                        _state.label = 3;\n                    case 3:\n                        if (!!(_iteratorNormalCompletion = (_step = _iterator.next()).done)) return [\n                            3,\n                            8\n                        ];\n                        sweatlistIdentifier = _step.value;\n                        _state.label = 4;\n                    case 4:\n                        _state.trys.push([\n                            4,\n                            6,\n                            ,\n                            7\n                        ]);\n                        return [\n                            4,\n                            _this.fetchSavedWorkout(sweatlistIdentifier.sweatlistAuthorId, sweatlistIdentifier.id)\n                        ];\n                    case 5:\n                        _ref = _swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_15__._.apply(void 0, [\n                            _state.sent(),\n                            1\n                        ]), workout = _ref[0];\n                        if (workout) {\n                            sweatLists.push(workout);\n                        }\n                        return [\n                            3,\n                            7\n                        ];\n                    case 6:\n                        error = _state.sent();\n                        console.error(\"Error fetching workout \".concat(sweatlistIdentifier.id, \":\"), error);\n                        return [\n                            3,\n                            7\n                        ];\n                    case 7:\n                        _iteratorNormalCompletion = true;\n                        return [\n                            3,\n                            3\n                        ];\n                    case 8:\n                        return [\n                            3,\n                            11\n                        ];\n                    case 9:\n                        err = _state.sent();\n                        _didIteratorError = true;\n                        _iteratorError = err;\n                        return [\n                            3,\n                            11\n                        ];\n                    case 10:\n                        try {\n                            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                                _iterator[\"return\"]();\n                            }\n                        } finally{\n                            if (_didIteratorError) {\n                                throw _iteratorError;\n                            }\n                        }\n                        return [\n                            7\n                        ];\n                    case 11:\n                        return [\n                            2,\n                            {\n                                collection: collection,\n                                sweatLists: sweatLists\n                            }\n                        ];\n                    case 12:\n                        error1 = _state.sent();\n                        console.error(\"Error fetching collection with sweat lists:\", error1);\n                        throw error1;\n                    case 13:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchSavedWorkout = function fetchSavedWorkout(userId, workoutId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var workoutRef, workoutSnap, exercisesWithVideos, workoutData, mappedExercises, workout, logsRef, logsSnapshot, logs, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            4,\n                            ,\n                            5\n                        ]);\n                        // Fetch the workout document\n                        workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\", workoutId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(workoutRef)\n                        ];\n                    case 1:\n                        workoutSnap = _state.sent();\n                        if (!workoutSnap.exists()) {\n                            return [\n                                2,\n                                [\n                                    null,\n                                    null\n                                ]\n                            ];\n                        }\n                        return [\n                            4,\n                            _this.fetchAndMapExercisesWithVideos()\n                        ];\n                    case 2:\n                        exercisesWithVideos = _state.sent();\n                        workoutData = workoutSnap.data();\n                        // Map the exercises in the workout to the full exercise objects with videos\n                        mappedExercises = (workoutData.exercises || []).map(function(exerciseRef) {\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name === exerciseRef.exercise.name;\n                            });\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, exerciseRef), {\n                                exercise: fullExercise || exerciseRef.exercise\n                            });\n                        });\n                        workoutData.exercises = mappedExercises;\n                        workout = new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Workout({\n                            id: workoutData.id,\n                            roundWorkoutId: workoutData.roundWorkoutId,\n                            collectionId: workoutData.collectionId,\n                            exercises: workoutData.exercises,\n                            challenge: workoutData.challenge,\n                            logs: workoutData.logs,\n                            title: workoutData.title,\n                            description: workoutData.description,\n                            duration: workoutData.duration,\n                            workoutRating: workoutData.workoutRating,\n                            useAuthorContent: workoutData.useAuthorContent,\n                            isCompleted: workoutData.isCompleted,\n                            workoutStatus: workoutData.workoutStatus,\n                            startTime: workoutData.startTime,\n                            order: workoutData.order,\n                            author: workoutData.author,\n                            assignedDate: workoutData.assignedDate,\n                            createdAt: workoutData.createdAt,\n                            updatedAt: workoutData.updatedAt\n                        });\n                        // Fetch logs\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 3:\n                        logsSnapshot = _state.sent();\n                        logs = logsSnapshot.docs.map(function(logDoc) {\n                            var logData = logDoc.data();\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name === logData.exercise.name;\n                            });\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseLog({\n                                id: logDoc.id,\n                                workoutId: workoutId,\n                                userId: userId,\n                                exercise: fullExercise || logData.exercise,\n                                logs: logData.log || [],\n                                feedback: logData.feedback || \"\",\n                                note: logData.note || \"\",\n                                recommendedWeight: logData.recommendedWeight,\n                                isSplit: logData.isSplit || false,\n                                isBodyWeight: logData.isBodyWeight || false,\n                                logSubmitted: logData.logSubmitted || false,\n                                logIsEditing: logData.logIsEditing || false,\n                                isCompleted: logData.isCompleted || false,\n                                completedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(logData.completedAt),\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(logData.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(logData.updatedAt)\n                            });\n                        });\n                        workout.logs = logs;\n                        return [\n                            2,\n                            [\n                                workout,\n                                logs\n                            ]\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error fetching saved workout:\", error);\n                        return [\n                            2,\n                            [\n                                null,\n                                null\n                            ]\n                        ];\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n * Fetch user challenges by challengeId.\n * @param challengeId The ID of the challenge to fetch associated user challenges for.\n * @returns A promise resolving to an array of user challenges.\n * @throws If the Firestore query fails.\n */ _proto.fetchUserChallengesByChallengeId = function fetchUserChallengesByChallengeId(challengeId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var userChallengesRef, q, snapshot, userChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"challengeId\", \"==\", challengeId));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // console.log(`Total user challenges fetched: ${snapshot.docs.length}`);\n                        userChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            // console.log(`Processing user challenge with ID: ${doc.id}`, data);\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                id: doc.id\n                            }, data), {\n                                challenge: data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Challenge({\n                                    id: data.challenge.id,\n                                    title: data.challenge.title,\n                                    subtitle: data.challenge.subtitle,\n                                    participants: data.challenge.participants || [],\n                                    status: data.challenge.status,\n                                    startDate: data.challenge.startDate ? new Date(data.challenge.startDate) : new Date(),\n                                    endDate: data.challenge.endDate ? new Date(data.challenge.endDate) : new Date(),\n                                    createdAt: data.challenge.createdAt ? new Date(data.challenge.createdAt) : new Date(),\n                                    updatedAt: data.challenge.updatedAt ? new Date(data.challenge.updatedAt) : new Date(),\n                                    introVideos: (data.challenge.introVideos || []).map(function(v) {\n                                        return new _workout_types__WEBPACK_IMPORTED_MODULE_4__.IntroVideo({\n                                            id: v.id,\n                                            userId: v.userId,\n                                            videoUrl: v.videoUrl\n                                        });\n                                    })\n                                }) : undefined,\n                                createdAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_5__.convertTimestamp)(data.createdAt),\n                                updatedAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_5__.convertTimestamp)(data.updatedAt)\n                            });\n                        });\n                        // console.log('All user challenges after processing:', JSON.stringify(userChallenges, null, 2));\n                        return [\n                            2,\n                            userChallenges\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges by challengeId:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getCollectionById = function getCollectionById(id) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var docRef, docSnap, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        console.log(\"Fetching collection with id:\", id);\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\", id);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef)\n                        ];\n                    case 2:\n                        docSnap = _state.sent();\n                        if (docSnap.exists()) {\n                            return [\n                                2,\n                                new _workout_types__WEBPACK_IMPORTED_MODULE_4__.SweatlistCollection((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                    id: docSnap.id\n                                }, docSnap.data()))\n                            ];\n                        } else {\n                            throw new Error(\"Collection not found\");\n                        }\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error getting collection by ID:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetch user challenges by userId and filter for active challenges.\n   * @returns A promise resolving to an array of active challenges.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ _proto.fetchActiveChallenges = function fetchActiveChallenges() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var currentUser, userChallengesRef, q, snapshot, allChallenges, activeChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", currentUser.id));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // console.log(`Total challenges fetched: ${snapshot.docs.length}`);\n                        allChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            // console.log(`Processing challenge with ID: ${doc.id}`, data);\n                            // Use the Challenge constructor to parse the challenge data\n                            // console.log(\"date before format: \" + convertFirestoreTimestamp(data.challenge.startDate));\n                            var challenge = data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Challenge({\n                                id: data.challenge.id,\n                                title: data.challenge.title,\n                                subtitle: data.challenge.subtitle,\n                                participants: data.challenge.participants || [],\n                                status: data.challenge.status,\n                                startDate: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.challenge.startDate),\n                                endDate: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.challenge.endDate),\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.challenge.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.challenge.updatedAt),\n                                introVideos: (data.challenge.introVideos || []).map(function(v) {\n                                    return new _workout_types__WEBPACK_IMPORTED_MODULE_4__.IntroVideo({\n                                        id: v.id,\n                                        userId: v.userId,\n                                        videoUrl: v.videoUrl\n                                    });\n                                })\n                            }) : undefined;\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                id: doc.id\n                            }, data), {\n                                challenge: challenge,\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.updatedAt)\n                            });\n                        });\n                        // console.log('All challenges after processing:', JSON.stringify(allChallenges, null, 2));\n                        // Filter for active challenges (endDate > current date)\n                        activeChallenges = allChallenges.filter(function(userChallenge) {\n                            var _userChallenge_challenge;\n                            var endDate = (_userChallenge_challenge = userChallenge.challenge) === null || _userChallenge_challenge === void 0 ? void 0 : _userChallenge_challenge.endDate;\n                            // console.log(\n                            //   `Evaluating challenge ID: ${userChallenge.id}, End Date: ${endDate}, Current Date: ${new Date()}`\n                            // );\n                            return endDate && endDate > new Date();\n                        });\n                        // console.log(`Total active challenges: ${activeChallenges.length}`, activeChallenges);\n                        return [\n                            2,\n                            activeChallenges\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching active challenges:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetch user challenges by userId.\n   * @returns A promise resolving to an array of challenges.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ _proto.fetchUserChallenges = function fetchUserChallenges() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var currentUser, userChallengesRef, q, snapshot, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Reference to the user-challenge collection\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        // Query challenges where userId matches the current user's ID\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", currentUser.id));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // Map documents to an array of Challenge objects\n                        return [\n                            2,\n                            snapshot.docs.map(function(doc) {\n                                return (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                    id: doc.id\n                                }, doc.data());\n                            })\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges:\", error);\n                        throw new Error(\"Failed to fetch user challenges\");\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    //update the workout summary,\n    _proto.updateWorkoutSummary = function updateWorkoutSummary(param) {\n        var userId = param.userId, workoutId = param.workoutId, summary = param.summary;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var summaryRef, summaryData, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"No user ID provided\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        // Create a reference to the collection\n                        summaryRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSummary\", summary.id);\n                        // Convert summary to a plain object for Firestore\n                        summaryData = {\n                            id: summary.id,\n                            workoutId: summary.workoutId,\n                            exercises: summary.exercises,\n                            bodyParts: summary.bodyParts,\n                            secondaryBodyParts: summary.secondaryBodyParts,\n                            workoutTitle: summary.workoutTitle,\n                            caloriesBurned: summary.caloriesBurned,\n                            workoutRating: summary.workoutRating,\n                            exercisesCompleted: summary.exercisesCompleted,\n                            aiInsight: summary.aiInsight,\n                            recommendations: summary.recommendations,\n                            gifURLs: summary.gifURLs,\n                            recommendedWork: summary.recommendedWork,\n                            isCompleted: summary.isCompleted,\n                            createdAt: summary.createdAt,\n                            updatedAt: new Date(),\n                            completedAt: summary.completedAt,\n                            duration: summary.duration\n                        };\n                        // Set data with merge enabled (equivalent to Swift's setData with merge: true)\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(summaryRef, summaryData, {\n                                merge: true\n                            })\n                        ];\n                    case 2:\n                        _state.sent();\n                        console.log(\"Workout summary document updated successfully\");\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error updating workout summary:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.updateWorkoutLogs = function updateWorkoutLogs(param) {\n        var userId = param.userId, workoutId = param.workoutId, logs = param.logs;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var workoutRef, logsRef, batch, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", workoutId);\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\");\n                        batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n                        logs.forEach(function(log) {\n                            var logDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(logsRef, log.id);\n                            batch.update(logDocRef, (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, log.toDictionary()));\n                        });\n                        return [\n                            4,\n                            batch.commit()\n                        ];\n                    case 1:\n                        _state.sent();\n                        return [\n                            3,\n                            3\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error updating workout logs:\", error);\n                        throw error;\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // The cancelWorkout method – it deletes the workout session and summary (if any),\n    // cleans up the local state, and logs the cancellation.\n    _proto.cancelWorkout = function cancelWorkout(workout, workoutSummary) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var _userService_currentUser, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!((_userService_currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser === void 0 ? void 0 : _userService_currentUser.id) || !workout) {\n                            throw new Error(\"User not authenticated.\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            5,\n                            ,\n                            6\n                        ]);\n                        return [\n                            4,\n                            _this.deleteWorkoutSession(workout.id)\n                        ];\n                    case 2:\n                        _state.sent();\n                        if (!workoutSummary) return [\n                            3,\n                            4\n                        ];\n                        return [\n                            4,\n                            _this.deleteWorkoutSummary(workoutSummary.id)\n                        ];\n                    case 3:\n                        _state.sent();\n                        _state.label = 4;\n                    case 4:\n                        _this.cleanUpWorkoutInProgress();\n                        console.log(\"Workout canceled and cleaned up successfully.\");\n                        return [\n                            3,\n                            6\n                        ];\n                    case 5:\n                        error = _state.sent();\n                        console.error(\"Error canceling workout:\", error);\n                        throw error;\n                    case 6:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // Deletes a workout session document and all its subcollection \"logs\"\n    _proto.deleteWorkoutSession = function deleteWorkoutSession(workoutId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var _userService_currentUser, userId, workoutRef, logsRef, logsSnapshot, batch, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!((_userService_currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser === void 0 ? void 0 : _userService_currentUser.id) || !workoutId) {\n                            throw new Error(\"User not authenticated.\");\n                        }\n                        userId = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser.id;\n                        workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", workoutId);\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            4,\n                            ,\n                            5\n                        ]);\n                        // Delete all logs in the subcollection\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 2:\n                        logsSnapshot = _state.sent();\n                        batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n                        logsSnapshot.docs.forEach(function(logDoc) {\n                            batch[\"delete\"](logDoc.ref);\n                        });\n                        // Delete the main workout document\n                        batch[\"delete\"](workoutRef);\n                        return [\n                            4,\n                            batch.commit()\n                        ];\n                    case 3:\n                        _state.sent();\n                        console.log(\"Workout session and logs deleted successfully.\");\n                        return [\n                            3,\n                            5\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error deleting workout session:\", error);\n                        throw error;\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // Deletes the workout summary document.\n    _proto.deleteWorkoutSummary = function deleteWorkoutSummary(workoutSummaryId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var _userService_currentUser, summaryRef, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!workoutSummaryId || !((_userService_currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser === void 0 ? void 0 : _userService_currentUser.id)) {\n                            return [\n                                2\n                            ];\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        summaryRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser.id, \"workoutSummary\", workoutSummaryId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.deleteDoc)(summaryRef)\n                        ];\n                    case 2:\n                        _state.sent();\n                        console.log(\"Workout summary deleted successfully.\");\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error deleting workout summary:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // Clean up local storage and in-memory workout state.\n    _proto.cleanUpWorkoutInProgress = function cleanUpWorkoutInProgress() {\n        _redux_store__WEBPACK_IMPORTED_MODULE_7__.store.dispatch((0,_redux_workoutSlice__WEBPACK_IMPORTED_MODULE_8__.resetWorkoutState)());\n    };\n    /**\n   * Fetch the workout session from Firestore, returning { workout, logs }.\n   * Checks first for a QueuedUp session, then for InProgress.\n   */ _proto.fetchCurrentWorkoutSession = function fetchCurrentWorkoutSession(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var exerciseSnapshot, videoSnapshot, exerciseVideos, exercisesWithVideos, workoutSessionsRef, q, snap;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) throw new Error(\"No user ID provided\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseVideo.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        exercisesWithVideos = exerciseSnapshot.docs.map(function(doc) {\n                            var exercise = _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                id: doc.id\n                            }, doc.data()));\n                            var matchingVideos = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            });\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, exercise), {\n                                videos: matchingVideos\n                            }));\n                        });\n                        workoutSessionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(workoutSessionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", _workout_types__WEBPACK_IMPORTED_MODULE_4__.WorkoutStatus.QueuedUp));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 3:\n                        snap = _state.sent();\n                        if (!snap.empty) {\n                            return [\n                                2,\n                                _this.processWorkoutSessionDocument(snap.docs[0], exercisesWithVideos)\n                            ];\n                        }\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(workoutSessionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", _workout_types__WEBPACK_IMPORTED_MODULE_4__.WorkoutStatus.InProgress));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 4:\n                        snap = _state.sent();\n                        if (!snap.empty) {\n                            return [\n                                2,\n                                _this.processWorkoutSessionDocument(snap.docs[0], exercisesWithVideos)\n                            ];\n                        }\n                        return [\n                            2,\n                            {\n                                workout: null,\n                                logs: null\n                            }\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchAndMapExercisesWithVideos = function fetchAndMapExercisesWithVideos() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var exerciseSnapshot, exercises, videoSnapshot, exerciseVideos, exercisesWithVideos, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseVideo.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        // console.log(`Fetched ${exerciseVideos.length} exercise videos`);\n                        // 3. Map videos to exercises\n                        exercisesWithVideos = exercises.map(function(exercise) {\n                            var matchingVideos = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            });\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, exercise), {\n                                videos: matchingVideos\n                            }));\n                        });\n                        // console.log('Finished mapping exercises with videos');\n                        // console.log(`Total exercises with videos: ${exercisesWithVideos.length}`);\n                        return [\n                            2,\n                            exercisesWithVideos\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching and mapping exercises with videos:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Helper to build the Workout object + any logs from the snapshot.\n   */ _proto.fetchAllWorkoutSessions = function fetchAllWorkoutSessions(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var exerciseSnapshot, exercises, videoSnapshot, exerciseVideos, exercisesWithVideos, workoutSessionsRef, snap, sessions, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"No user ID provided\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            6,\n                            ,\n                            7\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 2:\n                        exerciseSnapshot = _state.sent();\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 3:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseVideo.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        exercisesWithVideos = exercises.map(function(exercise) {\n                            var matchingVideos = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            });\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, exercise), {\n                                videos: matchingVideos\n                            }));\n                        });\n                        workoutSessionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(workoutSessionsRef)\n                        ];\n                    case 4:\n                        snap = _state.sent();\n                        if (snap.empty) {\n                            console.log(\"No workout sessions found for user\");\n                            return [\n                                2,\n                                []\n                            ];\n                        }\n                        return [\n                            4,\n                            Promise.all(snap.docs.map(function() {\n                                var _ref = (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function(doc) {\n                                    var sessionData;\n                                    return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                                        switch(_state.label){\n                                            case 0:\n                                                return [\n                                                    4,\n                                                    _this.processWorkoutSessionDocument(doc, exercisesWithVideos)\n                                                ];\n                                            case 1:\n                                                sessionData = _state.sent();\n                                                if (sessionData.logs) {\n                                                    sessionData.logs.sort(function(a, b) {\n                                                        var _a_order;\n                                                        var orderA = (_a_order = a.order) !== null && _a_order !== void 0 ? _a_order : 0;\n                                                        var _b_order;\n                                                        var orderB = (_b_order = b.order) !== null && _b_order !== void 0 ? _b_order : 0;\n                                                        return orderA - orderB;\n                                                    });\n                                                }\n                                                return [\n                                                    2,\n                                                    sessionData\n                                                ];\n                                        }\n                                    });\n                                });\n                                return function(doc) {\n                                    return _ref.apply(this, arguments);\n                                };\n                            }()))\n                        ];\n                    case 5:\n                        sessions = _state.sent();\n                        return [\n                            2,\n                            sessions\n                        ];\n                    case 6:\n                        error = _state.sent();\n                        console.error(\"Error fetching workout sessions:\", error);\n                        throw error;\n                    case 7:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.updateCollection = function updateCollection(collection) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var collRef, newDocRef, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        collRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\");\n                        // If collection.id is empty, generate a new doc ID and assign it.\n                        if (!collection.id || collection.id.trim() === \"\") {\n                            newDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(collRef);\n                            collection.id = newDocRef.id;\n                        }\n                        // Ensure the challenge id matches the collection id.\n                        if (collection.challenge) {\n                            collection.challenge.id = collection.id;\n                        }\n                        // Update the updatedAt field.\n                        collection.updatedAt = new Date();\n                        // Save the collection to Firestore.\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(collRef, collection.id), collection.toDictionary())\n                        ];\n                    case 1:\n                        _state.sent();\n                        console.log(\"Collection updated successfully\");\n                        return [\n                            2,\n                            collection\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error updating collection document:\", error);\n                        throw new Error(\"Error while updating the collection\");\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.processWorkoutSessionDocument = function processWorkoutSessionDocument(workoutDoc, exercisesWithVideos) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var data, mappedExercises, workout, logsRef, logsSnapshot, logs;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        data = workoutDoc.data();\n                        // Map exercises with their full data and videos\n                        mappedExercises = (data.exercises || []).map(function(exerciseRef) {\n                            var _exerciseRef_exercise_name, _exerciseRef_exercise;\n                            // Find the full exercise with videos\n                            var exerciseNameLower = (_exerciseRef_exercise = exerciseRef.exercise) === null || _exerciseRef_exercise === void 0 ? void 0 : (_exerciseRef_exercise_name = _exerciseRef_exercise.name) === null || _exerciseRef_exercise_name === void 0 ? void 0 : _exerciseRef_exercise_name.toLowerCase().trim();\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name.toLowerCase().trim() === exerciseNameLower;\n                            });\n                            // If full exercise found, return it, otherwise use the original\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, exerciseRef), {\n                                exercise: fullExercise || exerciseRef.exercise\n                            });\n                        });\n                        // Create the workout with mapped exercises\n                        workout = new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Workout({\n                            id: workoutDoc.id,\n                            roundWorkoutId: data.roundWorkoutId || \"\",\n                            exercises: mappedExercises,\n                            title: data.title || \"\",\n                            description: data.description || \"\",\n                            duration: data.duration || 0,\n                            useAuthorContent: data.useAuthorContent || false,\n                            isCompleted: data.isCompleted || false,\n                            workoutStatus: data.workoutStatus || _workout_types__WEBPACK_IMPORTED_MODULE_4__.WorkoutStatus.Archived,\n                            author: data.author || \"\",\n                            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.createdAt),\n                            updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.updatedAt),\n                            startTime: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.startTime),\n                            collectionId: data.collectionId,\n                            challenge: data.challenge,\n                            logs: (data.logs || []).map(function(logData) {\n                                var _logData_exercise_name, _logData_exercise;\n                                // Map logs with full exercises\n                                var exerciseNameLower = (_logData_exercise = logData.exercise) === null || _logData_exercise === void 0 ? void 0 : (_logData_exercise_name = _logData_exercise.name) === null || _logData_exercise_name === void 0 ? void 0 : _logData_exercise_name.toLowerCase().trim();\n                                var fullExercise = exercisesWithVideos.find(function(ex) {\n                                    return ex.name.toLowerCase().trim() === exerciseNameLower;\n                                });\n                                return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, logData), {\n                                    exercise: fullExercise || logData.exercise\n                                });\n                            }),\n                            workoutRating: data.workoutRating,\n                            order: data.order,\n                            zone: data.zone || _workout_types__WEBPACK_IMPORTED_MODULE_4__.BodyZone.FullBody\n                        });\n                        console.log(\"The Workout ID is: \" + workout.id);\n                        // Fetch logs from subcollection\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutDoc.ref, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 1:\n                        logsSnapshot = _state.sent();\n                        logs = logsSnapshot.docs.map(function(logDoc) {\n                            var _logData_exercise_name, _logData_exercise;\n                            var logData = logDoc.data();\n                            // Find the full exercise with videos\n                            var exerciseNameLower = (_logData_exercise = logData.exercise) === null || _logData_exercise === void 0 ? void 0 : (_logData_exercise_name = _logData_exercise.name) === null || _logData_exercise_name === void 0 ? void 0 : _logData_exercise_name.toLowerCase().trim();\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name.toLowerCase().trim() === exerciseNameLower;\n                            });\n                            // Prepare log data with full exercise\n                            var preparedLogData = (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, logData), {\n                                id: logDoc.id,\n                                workoutId: workout.id,\n                                exercise: fullExercise || logData.exercise,\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(logData.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(logData.updatedAt)\n                            });\n                            // Use the ExerciseLog constructor to ensure proper mapping\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseLog(preparedLogData);\n                        });\n                        return [\n                            2,\n                            {\n                                workout: workout,\n                                logs: logs\n                            }\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.saveWorkoutSession = function saveWorkoutSession(param) {\n        var userId = param.userId, workout = param.workout, logs = param.logs;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var currentDate, cleanWorkout, workoutSessionRef, logsRef, logBatch, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) throw new Error(\"No user ID provided\");\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            4,\n                            ,\n                            5\n                        ]);\n                        currentDate = new Date();\n                        cleanWorkout = new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Workout((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, workout), {\n                            roundWorkoutId: \"\".concat(workout.id, \"-\").concat(currentDate.getTime()),\n                            workoutStatus: _workout_types__WEBPACK_IMPORTED_MODULE_4__.WorkoutStatus.QueuedUp,\n                            createdAt: currentDate,\n                            updatedAt: currentDate,\n                            startTime: currentDate,\n                            logs: []\n                        }));\n                        workoutSessionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\"));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(workoutSessionRef, cleanWorkout.toDictionary())\n                        ];\n                    case 2:\n                        _state.sent();\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutSessionRef, \"logs\");\n                        logBatch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n                        logs.forEach(function(log, index) {\n                            var logDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(logsRef, \"\".concat(log.id, \"-\").concat(currentDate.getTime()));\n                            logBatch.set(logDocRef, {\n                                id: logDocRef.id,\n                                workoutId: workoutSessionRef.id,\n                                exercise: log.exercise.toDictionary(),\n                                order: index,\n                                createdAt: currentDate.getTime(),\n                                updatedAt: currentDate.getTime(),\n                                logSubmitted: false,\n                                isCompleted: false\n                            });\n                        });\n                        return [\n                            4,\n                            logBatch.commit()\n                        ];\n                    case 3:\n                        _state.sent();\n                        return [\n                            2,\n                            cleanWorkout\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error saving workout session:\", error);\n                        throw error;\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Example \"join challenge\" method using the client SDK (no admin privileges).\n   * This creates a doc in `user-challenge` with the userId, challengeId, etc.\n   */ _proto.joinChallenge = function joinChallenge(param) {\n        var username = param.username, challengeId = param.challengeId;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var currentUser, usersRef, userQuery, userSnapshot, userDoc, userData, userId, challengeRef, challengeSnap, challenge, userChallengeId, userChallengeData;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        // 1) Make sure we have a signed-in user\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!currentUser) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // 2) Find the user doc by username\n                        usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\");\n                        userQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"username\", \"==\", username));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(userQuery)\n                        ];\n                    case 1:\n                        userSnapshot = _state.sent();\n                        if (userSnapshot.empty) {\n                            throw new Error(\"User not found\");\n                        }\n                        userDoc = userSnapshot.docs[0];\n                        userData = userDoc.data();\n                        userId = userDoc.id;\n                        // 3) Check if the challenge doc exists\n                        challengeRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\", challengeId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(challengeRef)\n                        ];\n                    case 2:\n                        challengeSnap = _state.sent();\n                        if (!challengeSnap.exists()) {\n                            throw new Error(\"Challenge not found\");\n                        }\n                        challenge = challengeSnap.data();\n                        // 4) Build new user-challenge document\n                        userChallengeId = \"\".concat(challengeId, \"-\").concat(userId, \"-\").concat(Date.now());\n                        userChallengeData = {\n                            id: userChallengeId,\n                            challenge: challenge,\n                            challengeId: challengeId,\n                            userId: userId,\n                            fcmToken: userData.fcmToken || \"\",\n                            profileImage: userData.profileImage || {},\n                            progress: 0,\n                            completedWorkouts: [],\n                            isCompleted: false,\n                            uid: userId,\n                            location: userData.location || null,\n                            city: \"\",\n                            country: \"\",\n                            timezone: \"\",\n                            username: username,\n                            joinDate: new Date(),\n                            createdAt: new Date(),\n                            updatedAt: new Date(),\n                            pulsePoints: {\n                                baseCompletion: 0,\n                                firstCompletion: 0,\n                                streakBonus: 0,\n                                checkInBonus: 0,\n                                effortRating: 0,\n                                chatParticipation: 0,\n                                locationCheckin: 0,\n                                contentEngagement: 0,\n                                encouragementSent: 0,\n                                encouragementReceived: 0\n                            },\n                            currentStreak: 0,\n                            encouragedUsers: [],\n                            encouragedByUsers: [],\n                            checkIns: []\n                        };\n                        // 5) Store user-challenge doc\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\", userChallengeId), userChallengeData)\n                        ];\n                    case 3:\n                        _state.sent();\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    (0,_swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_16__._)(WorkoutService, [\n        {\n            key: \"currentWorkout\",\n            get: // Replace getters/setters to use Redux\n            function get() {\n                return _redux_store__WEBPACK_IMPORTED_MODULE_7__.store.getState().workout.currentWorkout;\n            },\n            set: function set(workout) {\n                _redux_store__WEBPACK_IMPORTED_MODULE_7__.store.dispatch((0,_redux_workoutSlice__WEBPACK_IMPORTED_MODULE_8__.setCurrentWorkout)(workout));\n            }\n        },\n        {\n            key: \"currentWorkoutLogs\",\n            get: function get() {\n                return _redux_store__WEBPACK_IMPORTED_MODULE_7__.store.getState().workout.currentExerciseLogs;\n            },\n            set: function set(logs) {\n                _redux_store__WEBPACK_IMPORTED_MODULE_7__.store.dispatch((0,_redux_workoutSlice__WEBPACK_IMPORTED_MODULE_8__.setCurrentExerciseLogs)(logs));\n            }\n        },\n        {\n            key: \"currentWorkoutSummary\",\n            get: function get() {\n                return _redux_store__WEBPACK_IMPORTED_MODULE_7__.store.getState().workout.workoutSummary;\n            },\n            set: function set(workoutSummary) {\n                _redux_store__WEBPACK_IMPORTED_MODULE_7__.store.dispatch((0,_redux_workoutSlice__WEBPACK_IMPORTED_MODULE_8__.setWorkoutSummary)(workoutSummary));\n            }\n        }\n    ]);\n    return WorkoutService;\n}();\nvar workoutService = new WorkoutService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL2ZpcmViYXNlL3dvcmtvdXQvc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxzQ0FBc0M7Ozs7Ozs7O0FBZ0JWO0FBRUc7QUFDTztBQUN3RztBQUU3RDtBQUNwQjtBQUMzQjtBQUMyQyxDQUFDLHlCQUF5QjtBQUNqQztBQUMwQjtBQUVuRDtBQUNpRjtBQVU5SCxtQ0FBSzs7YUFBQytCOytFQUFBQTs7aUJBQUFBO0lBMkJKQyxPQUFBQSxVQUVDLEdBRkRBLFNBQUFBO1FBQ0UsT0FBTy9CLHVEQUFHQSxDQUFDRCw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUUsYUFBYXNCLEVBQUU7SUFDM0M7SUFFQTs7R0FFQyxHQUNELE9BQU1DLG1CQUdMLEdBSEQsU0FBTUEsb0JBQW9CQyxNQUFjOztlQUF4QztnQkFDUUM7Ozs7d0JBQVU7OzRCQUFNLE1BQUtDLDBCQUEwQixDQUFDRjs7O3dCQUFoREMsVUFBVTt3QkFDaEI7OzRCQUFPQSxRQUFRRSxPQUFPOzs7O1FBQ3hCOztJQUVBLE9BQU1DLGdCQXlFTCxHQXpFRCxTQUFNQSxpQkFBaUJKLE1BQWM7O2VBQXJDO2dCQU1RSyxhQUlFQyxxQkFHQUMsa0JBQ0FDLFVBR0QsZ0ZBQU1DLFlBQ0hDLGFBQ0FDLFdBR0FDLGlCQVlBVCxTQXVCQVUsU0FDQUMsbUJBVURDLE9BQ0RDOzs7O3dCQXBFUixJQUFJLENBQUNoQixRQUFROzRCQUNYLE1BQU0sSUFBSWlCLE1BQU07d0JBQ2xCO3dCQUVBLDZDQUE2Qzt3QkFDdkNaLGNBQWN4Qyw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUUsU0FBU3dCLFFBQVE7Ozs7Ozs7Ozt3QkFJdEI7OzRCQUFNLE1BQUtrQiw4QkFBOEI7Ozt3QkFBL0RaLHNCQUFzQjt3QkFHSDs7NEJBQU12QywyREFBT0EsQ0FBQ3NDOzs7d0JBQWpDRSxtQkFBbUI7d0JBQ25CQzt3QkFHRDs7Ozs7Ozs7O3dCQUFBLFlBQW9CRCxpQkFBaUJZLElBQUk7OzsrQkFBekM7Ozs7d0JBQU1WLGFBQU47d0JBQ0dDLGNBQWNELFdBQVdXLElBQUk7d0JBQzdCVCxZQUFZRixXQUFXWCxFQUFFO3dCQUUvQiw0RUFBNEU7d0JBQ3RFYyxrQkFBa0IsQ0FBQ0YsWUFBWVcsU0FBUyxNQUFLLEVBQUdDLEdBQUcsQ0FBQyxTQUFDQzs0QkFDekQsSUFBTUMsZUFBZWxCLG9CQUFvQm1CLElBQUksQ0FBQ0MsU0FBQUE7dUNBQU1BLEdBQUdDLElBQUksS0FBS0osWUFBWUssUUFBUSxDQUFDRCxJQUFJOzs0QkFDekZFLFFBQVFDLEdBQUcsQ0FBQyxrQ0FBa0NOOzRCQUU5QyxPQUFPLHdJQUNGRDtnQ0FDSEssVUFBVUosZ0JBQWdCRDs7d0JBRTlCO3dCQUdBLGdEQUFnRDt3QkFDMUNwQixVQUFVLElBQUl0QixtREFBT0EsQ0FBQzs0QkFDMUJpQixJQUFJWSxZQUFZWixFQUFFLElBQUk7NEJBQ3RCaUMsZ0JBQWdCckIsWUFBWXFCLGNBQWMsSUFBSTs0QkFDOUNDLGNBQWN0QixZQUFZc0IsWUFBWTs0QkFDdENYLFdBQVdUOzRCQUNYcUIsV0FBV3ZCLFlBQVl1QixTQUFTOzRCQUNoQ0MsSUFBSTs0QkFDSkMsT0FBT3pCLFlBQVl5QixLQUFLLElBQUk7NEJBQzVCQyxhQUFhMUIsWUFBWTBCLFdBQVcsSUFBSTs0QkFDeENDLFVBQVUzQixZQUFZMkIsUUFBUSxJQUFJOzRCQUNsQ0MsZUFBZTVCLFlBQVk0QixhQUFhOzRCQUN4Q0Msa0JBQWtCN0IsWUFBWTZCLGdCQUFnQixJQUFJOzRCQUNsREMsYUFBYTlCLFlBQVk4QixXQUFXLElBQUk7NEJBQ3hDQyxlQUFlL0IsWUFBWStCLGFBQWEsSUFBSTs0QkFDNUNDLFdBQVdoQyxZQUFZZ0MsU0FBUyxHQUFHLElBQUlDLEtBQUtqQyxZQUFZZ0MsU0FBUyxJQUFJRTs0QkFDckVDLE9BQU9uQyxZQUFZbUMsS0FBSzs0QkFDeEJDLFFBQVFwQyxZQUFZb0MsTUFBTSxJQUFJOUM7NEJBQzlCK0MsV0FBV3JDLFlBQVlxQyxTQUFTLEdBQUcsSUFBSUosS0FBS2pDLFlBQVlxQyxTQUFTLElBQUksSUFBSUo7NEJBQ3pFSyxXQUFXdEMsWUFBWXNDLFNBQVMsR0FBRyxJQUFJTCxLQUFLakMsWUFBWXNDLFNBQVMsSUFBSSxJQUFJTDs0QkFDekVNLE1BQU12QyxZQUFZdUMsSUFBSSxJQUFJO3dCQUM1Qjt3QkFFQSx5QkFBeUI7d0JBQ25CcEMsVUFBVWhELDhEQUFVQSxDQUFDVyx1Q0FBRUEsRUFBRSxTQUFTd0IsUUFBUSxxQkFBcUJXLFdBQVc7d0JBQzNEOzs0QkFBTTVDLDJEQUFPQSxDQUFDOEM7Ozt3QkFBN0JDLGVBQWU7d0JBQ3JCWCxRQUFRK0IsSUFBSSxHQUFHcEIsYUFBYUssSUFBSSxDQUFDRyxHQUFHLENBQUMsU0FBQzRCO21DQUFZLHdJQUM3Q0EsT0FBTzlCLElBQUk7Z0NBQ2R0QixJQUFJb0QsT0FBT3BELEVBQUU7Ozt3QkFHZlUsU0FBUzJDLElBQUksQ0FBQ2hEOzs7d0JBL0NYOzs7Ozs7Ozs7Ozs7d0JBQUE7d0JBQUE7Ozs7Ozs7aUNBQUE7Z0NBQUE7OztnQ0FBQTtzQ0FBQTs7Ozs7Ozt3QkFrREw7OzRCQUFPSzs7O3dCQUNBTzt3QkFDREMsaUJBQWlCRDt3QkFDdkJjLFFBQVFkLEtBQUssQ0FBQyw4QkFBOEJDLGVBQWVvQyxPQUFPO3dCQUNsRSxNQUFNLElBQUluQyxNQUFNOzs7Ozs7O1FBRXBCOztJQUVBLE9BQU1vQyw4QkFrQkwsR0FsQkQsU0FBTUEsK0JBQStCQyxXQUFtQjtlQUF4RDtnQkFDUUMsbUJBQ0FDLEdBRUVDLFVBQ0FDLGdCQVNDM0M7Ozs7d0JBYkh3QyxvQkFBb0IxRiw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUU7d0JBQ25DZ0YsSUFBSXZGLHlEQUFLQSxDQUFDc0YsbUJBQW1CckYseURBQUtBLENBQUMsZUFBZSxNQUFNb0Y7Ozs7Ozs7Ozt3QkFFM0M7OzRCQUFNdkYsMkRBQU9BLENBQUN5Rjs7O3dCQUF6QkMsV0FBVzt3QkFDWEMsaUJBQWtDRCxTQUFTdEMsSUFBSSxDQUFDRyxHQUFHLENBQUMsU0FBQ3hEOzRCQUN6RCxJQUFNc0QsT0FBT3RELElBQUlzRCxJQUFJOzRCQUNyQixPQUFPLElBQUk5Qix5REFBYUEsQ0FBQ3hCLElBQUlnQyxFQUFFLEVBQUVzQjt3QkFDbkM7d0JBQ0EsSUFBSXNDLGVBQWVDLE1BQU0sR0FBRyxHQUFHOzRCQUM3Qjs7Z0NBQU87b0NBQUVELGdCQUFBQTtnQ0FBZTs7d0JBQzFCLE9BQU87NEJBQ0w7O2dDQUFPO29DQUFFQSxjQUFjO29DQUFNM0MsT0FBTztnQ0FBK0M7O3dCQUNyRjs7Ozs7O3dCQUNPQTt3QkFDUGMsUUFBUWQsS0FBSyxDQUFDLGtEQUFrREE7d0JBQ2hFOzs0QkFBTztnQ0FBRTJDLGNBQWM7Z0NBQU0zQyxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU1xQyxPQUFPLEdBQUc7NEJBQWdCOzs7Ozs7OztRQUVqRzs7SUFFQTs7Ozs7R0FLQyxHQUNELE9BQU1RLHFCQTRCTCxHQTVCRCxTQUFNQSxzQkFBc0JDLElBQVU7ZUFBdEM7Z0JBQ1FDLGFBTUFDLGVBR0FDLGNBR0FSLEdBR0VDLFVBT0MxQyxPQUNEQzs7Ozt3QkF2QkY4QyxjQUFjckYsOENBQVdBLENBQUNxRixXQUFXO3dCQUMzQyxJQUFJLEVBQUNBLHdCQUFBQSxrQ0FBQUEsWUFBYWhFLEVBQUUsR0FBRTs0QkFDcEIsTUFBTSxJQUFJbUIsTUFBTTt3QkFDbEI7d0JBRUEsa0VBQWtFO3dCQUM1RDhDLGdCQUFnQjdFLCtFQUFNQSxDQUFDMkUsTUFBTTt3QkFFbkMseURBQXlEO3dCQUNuREcsZUFBZW5HLDhEQUFVQSxDQUFDVyx1Q0FBRUEsRUFBRSxTQUFTc0YsWUFBWWhFLEVBQUUsRUFBRTt3QkFFN0QsMkRBQTJEO3dCQUNyRDBELElBQUl2Rix5REFBS0EsQ0FBQytGLGNBQWM5Rix5REFBS0EsQ0FBQyxRQUFRLE1BQU02Rjs7Ozs7Ozs7O3dCQUcvQjs7NEJBQU1oRywyREFBT0EsQ0FBQ3lGOzs7d0JBQXpCQyxXQUFXO3dCQUVqQiwwREFBMEQ7d0JBQzFEOzs0QkFBT0EsU0FBU3RDLElBQUksQ0FBQ0csR0FBRyxDQUFDLFNBQUN4RDt1Q0FBdUI7b0NBQy9DZ0MsSUFBSWhDLElBQUlnQyxFQUFFO21DQUNQaEMsSUFBSXNELElBQUk7Ozs7d0JBRU5MO3dCQUNEQyxpQkFBaUJEO3dCQUN2QmMsUUFBUWQsS0FBSyxDQUFDLHFDQUFxQ0MsZUFBZW9DLE9BQU87d0JBQ3pFLE1BQU0sSUFBSW5DLE1BQU1ELGVBQWVvQyxPQUFPOzs7Ozs7O1FBRTFDOztJQUVBLE9BQU1hLHdCQXlCTCxHQXpCRCxTQUFNQTtlQUFOO2dCQUNRSCxhQU1BRSxjQUdBUixHQUdFQyxVQU9DMUMsT0FDREM7Ozs7d0JBcEJGOEMsY0FBY3JGLDhDQUFXQSxDQUFDcUYsV0FBVzt3QkFDM0MsSUFBSSxFQUFDQSx3QkFBQUEsa0NBQUFBLFlBQWFoRSxFQUFFLEdBQUU7NEJBQ3BCLE1BQU0sSUFBSW1CLE1BQU07d0JBQ2xCO3dCQUVBLHlEQUF5RDt3QkFDbkQrQyxlQUFlbkcsOERBQVVBLENBQUNXLHVDQUFFQSxFQUFFLFNBQVNzRixZQUFZaEUsRUFBRSxFQUFFO3dCQUU3RCxvRkFBb0Y7d0JBQzlFMEQsSUFBSXZGLHlEQUFLQSxDQUFDK0YsY0FBYzdGLDJEQUFPQSxDQUFDLGFBQWEsU0FBUyx5Q0FBeUM7Ozs7Ozs7Ozt3QkFHbEY7OzRCQUFNSiwyREFBT0EsQ0FBQ3lGOzs7d0JBQXpCQyxXQUFXO3dCQUVqQiwwREFBMEQ7d0JBQzFEOzs0QkFBT0EsU0FBU3RDLElBQUksQ0FBQ0csR0FBRyxDQUFDLFNBQUN4RDt1Q0FBdUI7b0NBQy9DZ0MsSUFBSWhDLElBQUlnQyxFQUFFO21DQUNQaEMsSUFBSXNELElBQUk7Ozs7d0JBRU5MO3dCQUNEQyxpQkFBaUJEO3dCQUN2QmMsUUFBUWQsS0FBSyxDQUFDLHlDQUF5Q0MsZUFBZW9DLE9BQU87d0JBQzdFLE1BQU0sSUFBSW5DLE1BQU1ELGVBQWVvQyxPQUFPOzs7Ozs7O1FBRTFDOztJQUdBOzs7OztDQUtELEdBQ0QsT0FBTWMsMkJBa0RMLEdBbERELFNBQU1BLDRCQUE0QmxFLE1BQWM7ZUFBaEQ7Z0JBQ1F1RCxtQkFDQUMsR0FLRUMsVUFJQUMsZ0JBbUNDM0M7Ozs7d0JBN0NId0Msb0JBQW9CMUYsOERBQVVBLENBQUNXLHVDQUFFQSxFQUFFO3dCQUNuQ2dGLElBQUl2Rix5REFBS0EsQ0FBQ3NGLG1CQUFtQnJGLHlEQUFLQSxDQUFDLFVBQVUsTUFBTThCOzs7Ozs7Ozs7d0JBS3RDOzs0QkFBTWpDLDJEQUFPQSxDQUFDeUY7Ozt3QkFBekJDLFdBQVc7d0JBRWpCLG9FQUFvRTt3QkFFOURDLGlCQUFpQkQsU0FBU3RDLElBQUksQ0FBQ0csR0FBRyxDQUFDLFNBQUN4RDs0QkFDeEMsSUFBTXNELE9BQU90RCxJQUFJc0QsSUFBSTs0QkFDckIsZ0VBQWdFOzRCQUVoRSxPQUFPO2dDQUNMdEIsSUFBSWhDLElBQUlnQyxFQUFFOytCQUNQc0I7Z0NBQ0hhLFdBQVdiLEtBQUthLFNBQVMsR0FDckIsSUFBSTVDLHFEQUFTQSxDQUFDO29DQUNaUyxJQUFJc0IsS0FBS2EsU0FBUyxDQUFDbkMsRUFBRTtvQ0FDckJxQyxPQUFPZixLQUFLYSxTQUFTLENBQUNFLEtBQUs7b0NBQzNCZ0MsVUFBVS9DLEtBQUthLFNBQVMsQ0FBQ2tDLFFBQVE7b0NBQ2pDQyxjQUFjaEQsS0FBS2EsU0FBUyxDQUFDbUMsWUFBWSxJQUFJLEVBQUU7b0NBQy9DQyxRQUFRakQsS0FBS2EsU0FBUyxDQUFDb0MsTUFBTTtvQ0FDN0JDLFdBQVdsRCxLQUFLYSxTQUFTLENBQUNxQyxTQUFTLEdBQUcsSUFBSTNCLEtBQUt2QixLQUFLYSxTQUFTLENBQUNxQyxTQUFTLElBQUksSUFBSTNCO29DQUMvRTRCLFNBQVNuRCxLQUFLYSxTQUFTLENBQUNzQyxPQUFPLEdBQUcsSUFBSTVCLEtBQUt2QixLQUFLYSxTQUFTLENBQUNzQyxPQUFPLElBQUksSUFBSTVCO29DQUN6RUksV0FBVzNCLEtBQUthLFNBQVMsQ0FBQ2MsU0FBUyxHQUFHLElBQUlKLEtBQUt2QixLQUFLYSxTQUFTLENBQUNjLFNBQVMsSUFBSSxJQUFJSjtvQ0FDL0VLLFdBQVc1QixLQUFLYSxTQUFTLENBQUNlLFNBQVMsR0FBRyxJQUFJTCxLQUFLdkIsS0FBS2EsU0FBUyxDQUFDZSxTQUFTLElBQUksSUFBSUw7b0NBQy9FNkIsYUFBYSxDQUFDcEQsS0FBS2EsU0FBUyxDQUFDdUMsV0FBVyxJQUFJLEVBQUUsRUFBRWxELEdBQUcsQ0FBQyxTQUFDbUQ7K0NBQ25ELElBQUkxRixzREFBVUEsQ0FBQzs0Q0FDYmUsSUFBSTJFLEVBQUUzRSxFQUFFOzRDQUNSRSxRQUFReUUsRUFBRXpFLE1BQU07NENBQ2hCMEUsVUFBVUQsRUFBRUMsUUFBUTt3Q0FDdEI7O2dDQUVKLEtBQ0E5QjtnQ0FDSkcsV0FBVzVELGtFQUFnQkEsQ0FBQ2lDLEtBQUsyQixTQUFTO2dDQUMxQ0MsV0FBVzdELGtFQUFnQkEsQ0FBQ2lDLEtBQUs0QixTQUFTOzt3QkFFOUM7d0JBRUEsNEZBQTRGO3dCQUU1Rjs7NEJBQU9VOzs7d0JBQ0EzQzt3QkFDUGMsUUFBUWQsS0FBSyxDQUFDLDZDQUE2Q0E7d0JBQzNELE1BQU1BOzs7Ozs7O1FBRVY7O0lBRUEsT0FBTTRELDZCQTZCTCxHQTdCRCxTQUFNQSw4QkFBOEIzQyxZQUFvQjs7ZUFBeEQ7Z0JBR1VuRSxZQUdBK0csWUFHRCxnRkFBTUMscUJBRVcsTUFBWDFFLFNBUUFZLFlBTUpBOzs7Ozs7Ozs7O3dCQXRCWTs7NEJBQU0sTUFBSytELGlCQUFpQixDQUFDOUM7Ozt3QkFBMUNuRSxhQUFhO3dCQUVuQiwrQkFBK0I7d0JBQ3pCK0c7d0JBR0Q7Ozs7Ozs7Ozt3QkFBQSxZQUE2Qi9HLENBQUFBLFdBQVdrSCxZQUFZLE1BQUs7OzsrQkFBekQ7Ozs7d0JBQU1GLHNCQUFOOzs7Ozs7Ozs7d0JBRWlCOzs0QkFBTSxNQUFLRyxpQkFBaUIsQ0FDNUNILG9CQUFvQkksaUJBQWlCLEVBQ3JDSixvQkFBb0IvRSxFQUFFOzs7d0JBRk47NEJBQUE7OzRCQUFYSyxVQUFXO3dCQUtsQixJQUFJQSxTQUFTOzRCQUNYeUUsV0FBV3pCLElBQUksQ0FBQ2hEO3dCQUNsQjs7Ozs7O3dCQUNPWTt3QkFDUGMsUUFBUWQsS0FBSyxDQUFDLDBCQUFpRCxPQUF2QjhELG9CQUFvQi9FLEVBQUUsRUFBQyxNQUFJaUI7Ozs7Ozt3QkFYbEU7Ozs7Ozs7Ozs7Ozt3QkFBQTt3QkFBQTs7Ozs7OztpQ0FBQTtnQ0FBQTs7O2dDQUFBO3NDQUFBOzs7Ozs7O3dCQWVMOzs0QkFBTztnQ0FBRWxELFlBQUFBO2dDQUFZK0csWUFBQUE7NEJBQVc7Ozt3QkFDekI3RDt3QkFDUGMsUUFBUWQsS0FBSyxDQUFDLCtDQUErQ0E7d0JBQzdELE1BQU1BOzs7Ozs7O1FBRVY7O0lBRUEsT0FBTWlFLGlCQWdGTCxHQWhGRCxTQUFNQSxrQkFBa0JoRixNQUFjLEVBQUVXLFNBQWlCOztlQUF6RDtnQkFHVXVFLFlBQ0FDLGFBT0E3RSxxQkFDQUksYUFHQUUsaUJBU0FULFNBdUJBVSxTQUNBQyxjQUVBb0IsTUEwQkNuQjs7Ozs7Ozs7Ozt3QkExRVAsNkJBQTZCO3dCQUN2Qm1FLGFBQWFwSCx1REFBR0EsQ0FBQ1UsdUNBQUVBLEVBQUUsU0FBU3dCLFFBQVEscUJBQXFCVzt3QkFDN0M7OzRCQUFNM0MsMERBQU1BLENBQUNrSDs7O3dCQUEzQkMsY0FBYzt3QkFFcEIsSUFBSSxDQUFDQSxZQUFZQyxNQUFNLElBQUk7NEJBQ3pCOzs7b0NBQVE7b0NBQU07Ozt3QkFDaEI7d0JBRzRCOzs0QkFBTSxNQUFLbEUsOEJBQThCOzs7d0JBQS9EWixzQkFBc0I7d0JBQ3RCSSxjQUFjeUUsWUFBWS9ELElBQUk7d0JBRXBDLDRFQUE0RTt3QkFDdEVSLGtCQUFrQixDQUFDRixZQUFZVyxTQUFTLE1BQUssRUFBR0MsR0FBRyxDQUFDLFNBQUNDOzRCQUN6RCxJQUFNQyxlQUFlbEIsb0JBQW9CbUIsSUFBSSxDQUFDQyxTQUFBQTt1Q0FBTUEsR0FBR0MsSUFBSSxLQUFLSixZQUFZSyxRQUFRLENBQUNELElBQUk7OzRCQUN6RixPQUFPLHdJQUNGSjtnQ0FDSEssVUFBVUosZ0JBQWdCRCxZQUFZSyxRQUFROzt3QkFFbEQ7d0JBRUFsQixZQUFZVyxTQUFTLEdBQUdUO3dCQUNsQlQsVUFBVSxJQUFJdEIsbURBQU9BLENBQUM7NEJBQzFCaUIsSUFBSVksWUFBWVosRUFBRTs0QkFDbEJpQyxnQkFBZ0JyQixZQUFZcUIsY0FBYzs0QkFDMUNDLGNBQWN0QixZQUFZc0IsWUFBWTs0QkFDdENYLFdBQVdYLFlBQVlXLFNBQVM7NEJBQ2hDWSxXQUFXdkIsWUFBWXVCLFNBQVM7NEJBQ2hDQyxNQUFNeEIsWUFBWXdCLElBQUk7NEJBQ3RCQyxPQUFPekIsWUFBWXlCLEtBQUs7NEJBQ3hCQyxhQUFhMUIsWUFBWTBCLFdBQVc7NEJBQ3BDQyxVQUFVM0IsWUFBWTJCLFFBQVE7NEJBQzlCQyxlQUFlNUIsWUFBWTRCLGFBQWE7NEJBQ3hDQyxrQkFBa0I3QixZQUFZNkIsZ0JBQWdCOzRCQUM5Q0MsYUFBYTlCLFlBQVk4QixXQUFXOzRCQUNwQ0MsZUFBZS9CLFlBQVkrQixhQUFhOzRCQUN4Q0MsV0FBV2hDLFlBQVlnQyxTQUFTOzRCQUNoQ0csT0FBT25DLFlBQVltQyxLQUFLOzRCQUN4QkMsUUFBUXBDLFlBQVlvQyxNQUFNOzRCQUMxQnVDLGNBQWMzRSxZQUFZMkUsWUFBWTs0QkFDdEN0QyxXQUFXckMsWUFBWXFDLFNBQVM7NEJBQ2hDQyxXQUFXdEMsWUFBWXNDLFNBQVM7d0JBQ2xDO3dCQUVBLGFBQWE7d0JBQ1BuQyxVQUFVaEQsOERBQVVBLENBQUNxSCxZQUFZO3dCQUNsQjs7NEJBQU1uSCwyREFBT0EsQ0FBQzhDOzs7d0JBQTdCQyxlQUFlO3dCQUVmb0IsT0FBc0JwQixhQUFhSyxJQUFJLENBQUNHLEdBQUcsQ0FBQzRCLFNBQUFBOzRCQUNoRCxJQUFNb0MsVUFBVXBDLE9BQU85QixJQUFJOzRCQUMzQixJQUFNSSxlQUFlbEIsb0JBQW9CbUIsSUFBSSxDQUFDQyxTQUFBQTt1Q0FBTUEsR0FBR0MsSUFBSSxLQUFLMkQsUUFBUTFELFFBQVEsQ0FBQ0QsSUFBSTs7NEJBRXJGLE9BQU8sSUFBSWpELHdEQUFXQSxDQUFDO2dDQUNyQm9CLElBQUlvRCxPQUFPcEQsRUFBRTtnQ0FDYmEsV0FBV0E7Z0NBQ1hYLFFBQVFBO2dDQUNSNEIsVUFBVUosZ0JBQWdCOEQsUUFBUTFELFFBQVE7Z0NBQzFDTSxNQUFNb0QsUUFBUXhELEdBQUcsSUFBSSxFQUFFO2dDQUN2QnlELFVBQVVELFFBQVFDLFFBQVEsSUFBSTtnQ0FDOUJDLE1BQU1GLFFBQVFFLElBQUksSUFBSTtnQ0FDdEJDLG1CQUFtQkgsUUFBUUcsaUJBQWlCO2dDQUM1Q0MsU0FBU0osUUFBUUksT0FBTyxJQUFJO2dDQUM1QkMsY0FBY0wsUUFBUUssWUFBWSxJQUFJO2dDQUN0Q0MsY0FBY04sUUFBUU0sWUFBWSxJQUFJO2dDQUN0Q0MsY0FBY1AsUUFBUU8sWUFBWSxJQUFJO2dDQUN0Q3JELGFBQWE4QyxRQUFROUMsV0FBVyxJQUFJO2dDQUNwQ3NELGFBQWExRyw0RUFBeUJBLENBQUNrRyxRQUFRUSxXQUFXO2dDQUMxRC9DLFdBQVczRCw0RUFBeUJBLENBQUNrRyxRQUFRdkMsU0FBUztnQ0FDdERDLFdBQVc1RCw0RUFBeUJBLENBQUNrRyxRQUFRdEMsU0FBUzs0QkFDeEQ7d0JBQ0Y7d0JBRUE3QyxRQUFRK0IsSUFBSSxHQUFHQTt3QkFDZjs7O2dDQUFRL0I7Z0NBQVMrQjs7Ozt3QkFDVm5CO3dCQUNQYyxRQUFRZCxLQUFLLENBQUMsaUNBQWlDQTt3QkFDL0M7OztnQ0FBUTtnQ0FBTTs7Ozs7Ozs7O1FBRWxCOztJQUVBOzs7OztDQUtDLEdBQ0QsT0FBTWdGLGdDQWtETCxHQWxERCxTQUFNQSxpQ0FBaUN6QyxXQUFtQjtlQUExRDtnQkFDUUMsbUJBQ0FDLEdBS0VDLFVBSUFDLGdCQW1DQzNDOzs7O3dCQTdDSHdDLG9CQUFvQjFGLDhEQUFVQSxDQUFDVyx1Q0FBRUEsRUFBRTt3QkFDbkNnRixJQUFJdkYseURBQUtBLENBQUNzRixtQkFBbUJyRix5REFBS0EsQ0FBQyxlQUFlLE1BQU1vRjs7Ozs7Ozs7O3dCQUszQzs7NEJBQU12RiwyREFBT0EsQ0FBQ3lGOzs7d0JBQXpCQyxXQUFXO3dCQUVqQix5RUFBeUU7d0JBRW5FQyxpQkFBaUJELFNBQVN0QyxJQUFJLENBQUNHLEdBQUcsQ0FBQyxTQUFDeEQ7NEJBQ3hDLElBQU1zRCxPQUFPdEQsSUFBSXNELElBQUk7NEJBQ3JCLHFFQUFxRTs0QkFFckUsT0FBTztnQ0FDTHRCLElBQUloQyxJQUFJZ0MsRUFBRTsrQkFDUHNCO2dDQUNIYSxXQUFXYixLQUFLYSxTQUFTLEdBQ3JCLElBQUk1QyxxREFBU0EsQ0FBQztvQ0FDWlMsSUFBSXNCLEtBQUthLFNBQVMsQ0FBQ25DLEVBQUU7b0NBQ3JCcUMsT0FBT2YsS0FBS2EsU0FBUyxDQUFDRSxLQUFLO29DQUMzQmdDLFVBQVUvQyxLQUFLYSxTQUFTLENBQUNrQyxRQUFRO29DQUNqQ0MsY0FBY2hELEtBQUthLFNBQVMsQ0FBQ21DLFlBQVksSUFBSSxFQUFFO29DQUMvQ0MsUUFBUWpELEtBQUthLFNBQVMsQ0FBQ29DLE1BQU07b0NBQzdCQyxXQUFXbEQsS0FBS2EsU0FBUyxDQUFDcUMsU0FBUyxHQUFHLElBQUkzQixLQUFLdkIsS0FBS2EsU0FBUyxDQUFDcUMsU0FBUyxJQUFJLElBQUkzQjtvQ0FDL0U0QixTQUFTbkQsS0FBS2EsU0FBUyxDQUFDc0MsT0FBTyxHQUFHLElBQUk1QixLQUFLdkIsS0FBS2EsU0FBUyxDQUFDc0MsT0FBTyxJQUFJLElBQUk1QjtvQ0FDekVJLFdBQVczQixLQUFLYSxTQUFTLENBQUNjLFNBQVMsR0FBRyxJQUFJSixLQUFLdkIsS0FBS2EsU0FBUyxDQUFDYyxTQUFTLElBQUksSUFBSUo7b0NBQy9FSyxXQUFXNUIsS0FBS2EsU0FBUyxDQUFDZSxTQUFTLEdBQUcsSUFBSUwsS0FBS3ZCLEtBQUthLFNBQVMsQ0FBQ2UsU0FBUyxJQUFJLElBQUlMO29DQUMvRTZCLGFBQWEsQ0FBQ3BELEtBQUthLFNBQVMsQ0FBQ3VDLFdBQVcsSUFBSSxFQUFFLEVBQUVsRCxHQUFHLENBQUMsU0FBQ21EOytDQUNuRCxJQUFJMUYsc0RBQVVBLENBQUM7NENBQ2JlLElBQUkyRSxFQUFFM0UsRUFBRTs0Q0FDUkUsUUFBUXlFLEVBQUV6RSxNQUFNOzRDQUNoQjBFLFVBQVVELEVBQUVDLFFBQVE7d0NBQ3RCOztnQ0FFSixLQUNBOUI7Z0NBQ0pHLFdBQVc1RCxrRUFBZ0JBLENBQUNpQyxLQUFLMkIsU0FBUztnQ0FDMUNDLFdBQVc3RCxrRUFBZ0JBLENBQUNpQyxLQUFLNEIsU0FBUzs7d0JBRTlDO3dCQUVBLGlHQUFpRzt3QkFFakc7OzRCQUFPVTs7O3dCQUNBM0M7d0JBQ1BjLFFBQVFkLEtBQUssQ0FBQyxrREFBa0RBO3dCQUNoRSxNQUFNQTs7Ozs7OztRQUVWOztJQUVBLE9BQU0rRCxpQkFpQkwsR0FqQkQsU0FBTUEsa0JBQWtCaEYsRUFBVTtlQUFsQztnQkFHVWtHLFFBQ0FDLFNBU0NsRjs7Ozt3QkFaVGMsUUFBUUMsR0FBRyxDQUFDLGdDQUFnQ2hDOzs7Ozs7Ozs7d0JBRXBDa0csU0FBU2xJLHVEQUFHQSxDQUFDVSx1Q0FBRUEsRUFBRSx3QkFBd0JzQjt3QkFDL0I7OzRCQUFNOUIsMERBQU1BLENBQUNnSTs7O3dCQUF2QkMsVUFBVTt3QkFDaEIsSUFBSUEsUUFBUWIsTUFBTSxJQUFJOzRCQUNwQjs7Z0NBQU8sSUFBSW5HLCtEQUFtQkEsQ0FBQztvQ0FDN0JhLElBQUltRyxRQUFRbkcsRUFBRTttQ0FDWG1HLFFBQVE3RSxJQUFJOzt3QkFFbkIsT0FBTzs0QkFDTCxNQUFNLElBQUlILE1BQU07d0JBQ2xCOzs7Ozs7d0JBQ09GO3dCQUNQYyxRQUFRZCxLQUFLLENBQUMsbUNBQW1DQTt3QkFDakQsTUFBTUE7Ozs7Ozs7UUFFVjs7SUFHSTs7OztHQUlELEdBQ0MsT0FBTW1GLHFCQXlFTCxHQXpFRCxTQUFNQTtlQUFOO2dCQUNRcEMsYUFLQVAsbUJBQ0FDLEdBS0VDLFVBSUEwQyxlQXdDQUMsa0JBYUNyRjs7Ozt3QkFwRUgrQyxjQUFjckYsOENBQVdBLENBQUNxRixXQUFXO3dCQUMzQyxJQUFJLEVBQUNBLHdCQUFBQSxrQ0FBQUEsWUFBYWhFLEVBQUUsR0FBRTs0QkFDcEIsTUFBTSxJQUFJbUIsTUFBTTt3QkFDbEI7d0JBRU1zQyxvQkFBb0IxRiw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUU7d0JBQ25DZ0YsSUFBSXZGLHlEQUFLQSxDQUFDc0YsbUJBQW1CckYseURBQUtBLENBQUMsVUFBVSxNQUFNNEYsWUFBWWhFLEVBQUU7Ozs7Ozs7Ozt3QkFLcEQ7OzRCQUFNL0IsMkRBQU9BLENBQUN5Rjs7O3dCQUF6QkMsV0FBVzt3QkFFakIsb0VBQW9FO3dCQUU5RDBDLGdCQUFnQjFDLFNBQVN0QyxJQUFJLENBQUNHLEdBQUcsQ0FBQyxTQUFDeEQ7NEJBQ3ZDLElBQU1zRCxPQUFPdEQsSUFBSXNELElBQUk7NEJBQ3JCLGdFQUFnRTs0QkFFaEUsNERBQTREOzRCQUM1RCw2RkFBNkY7NEJBRTdGLElBQU1hLFlBQVliLEtBQUthLFNBQVMsR0FDNUIsSUFBSTVDLHFEQUFTQSxDQUFDO2dDQUNaUyxJQUFJc0IsS0FBS2EsU0FBUyxDQUFDbkMsRUFBRTtnQ0FDckJxQyxPQUFPZixLQUFLYSxTQUFTLENBQUNFLEtBQUs7Z0NBQzNCZ0MsVUFBVS9DLEtBQUthLFNBQVMsQ0FBQ2tDLFFBQVE7Z0NBQ2pDQyxjQUFjaEQsS0FBS2EsU0FBUyxDQUFDbUMsWUFBWSxJQUFJLEVBQUU7Z0NBQy9DQyxRQUFRakQsS0FBS2EsU0FBUyxDQUFDb0MsTUFBTTtnQ0FDN0JDLFdBQVdsRiw0RUFBeUJBLENBQUNnQyxLQUFLYSxTQUFTLENBQUNxQyxTQUFTO2dDQUM3REMsU0FBU25GLDRFQUF5QkEsQ0FBQ2dDLEtBQUthLFNBQVMsQ0FBQ3NDLE9BQU87Z0NBQ3pEeEIsV0FBVzNELDRFQUF5QkEsQ0FBQ2dDLEtBQUthLFNBQVMsQ0FBQ2MsU0FBUztnQ0FDN0RDLFdBQVc1RCw0RUFBeUJBLENBQUNnQyxLQUFLYSxTQUFTLENBQUNlLFNBQVM7Z0NBQzdEd0IsYUFBYSxDQUFDcEQsS0FBS2EsU0FBUyxDQUFDdUMsV0FBVyxJQUFJLEVBQUUsRUFBRWxELEdBQUcsQ0FBQyxTQUFDbUQ7MkNBQ25ELElBQUkxRixzREFBVUEsQ0FBQzt3Q0FDYmUsSUFBSTJFLEVBQUUzRSxFQUFFO3dDQUNSRSxRQUFReUUsRUFBRXpFLE1BQU07d0NBQ2hCMEUsVUFBVUQsRUFBRUMsUUFBUTtvQ0FDdEI7OzRCQUVKLEtBQ0E5Qjs0QkFFSixPQUFPO2dDQUNMOUMsSUFBSWhDLElBQUlnQyxFQUFFOytCQUNQc0I7Z0NBQ0hhLFdBQUFBO2dDQUNBYyxXQUFXM0QsNEVBQXlCQSxDQUFDZ0MsS0FBSzJCLFNBQVM7Z0NBQ25EQyxXQUFXNUQsNEVBQXlCQSxDQUFDZ0MsS0FBSzRCLFNBQVM7O3dCQUV2RDt3QkFFQSwyRkFBMkY7d0JBRTNGLHdEQUF3RDt3QkFDbERvRCxtQkFBbUJELGNBQWNFLE1BQU0sQ0FBQ0MsU0FBQUE7Z0NBQzVCQTs0QkFBaEIsSUFBTS9CLFdBQVUrQiwyQkFBQUEsY0FBY3JFLFNBQVMsY0FBdkJxRSwrQ0FBQUEseUJBQXlCL0IsT0FBTzs0QkFFaEQsZUFBZTs0QkFDZixzR0FBc0c7NEJBQ3RHLEtBQUs7NEJBRUwsT0FBT0EsV0FBV0EsVUFBVSxJQUFJNUI7d0JBQ2xDO3dCQUVBLHdGQUF3Rjt3QkFFeEY7OzRCQUFPeUQ7Ozt3QkFDQXJGO3dCQUNQYyxRQUFRZCxLQUFLLENBQUMscUNBQXFDQTt3QkFDbkQsTUFBTUE7Ozs7Ozs7UUFFVjs7SUFHRjs7OztHQUlDLEdBQ0QsT0FBTXdGLG1CQXdCTCxHQXhCRCxTQUFNQTtlQUFOO2dCQUNRekMsYUFNQVAsbUJBR0FDLEdBR0VDLFVBT0MxQzs7Ozt3QkFuQkgrQyxjQUFjckYsOENBQVdBLENBQUNxRixXQUFXO3dCQUMzQyxJQUFJLEVBQUNBLHdCQUFBQSxrQ0FBQUEsWUFBYWhFLEVBQUUsR0FBRTs0QkFDcEIsTUFBTSxJQUFJbUIsTUFBTTt3QkFDbEI7d0JBRUEsNkNBQTZDO3dCQUN2Q3NDLG9CQUFvQjFGLDhEQUFVQSxDQUFDVyx1Q0FBRUEsRUFBRTt3QkFFekMsOERBQThEO3dCQUN4RGdGLElBQUl2Rix5REFBS0EsQ0FBQ3NGLG1CQUFtQnJGLHlEQUFLQSxDQUFDLFVBQVUsTUFBTTRGLFlBQVloRSxFQUFFOzs7Ozs7Ozs7d0JBR3BEOzs0QkFBTS9CLDJEQUFPQSxDQUFDeUY7Ozt3QkFBekJDLFdBQVc7d0JBRWpCLGlEQUFpRDt3QkFDakQ7OzRCQUFPQSxTQUFTdEMsSUFBSSxDQUFDRyxHQUFHLENBQUMsU0FBQ3hEO3VDQUF1QjtvQ0FDL0NnQyxJQUFJaEMsSUFBSWdDLEVBQUU7bUNBQ1BoQyxJQUFJc0QsSUFBSTs7Ozt3QkFFTkw7d0JBQ1BjLFFBQVFkLEtBQUssQ0FBQyxtQ0FBbUNBO3dCQUNqRCxNQUFNLElBQUlFLE1BQU07Ozs7Ozs7UUFFcEI7O0lBRUEsNkJBQTZCO0lBQzdCLE9BQU11RixvQkErQ0wsR0EvQ0QsU0FBTUEscUJBQXFCLEtBUTFCO1lBUEN4RyxTQUR5QixNQUN6QkEsUUFDQVcsWUFGeUIsTUFFekJBLFdBQ0E4RixVQUh5QixNQUd6QkE7ZUFIRjtnQkFlVUMsWUFHQUMsYUF5QkM1Rjs7Ozt3QkFsQ1QsSUFBSSxDQUFDZixRQUFROzRCQUNYLE1BQU0sSUFBSWlCLE1BQU07d0JBQ2xCOzs7Ozs7Ozs7d0JBR0UsdUNBQXVDO3dCQUNqQ3lGLGFBQWE1SSx1REFBR0EsQ0FBQ1UsdUNBQUVBLEVBQUUsU0FBU3dCLFFBQVEsa0JBQWtCeUcsUUFBUTNHLEVBQUU7d0JBRXhFLGtEQUFrRDt3QkFDNUM2RyxjQUFjOzRCQUNsQjdHLElBQUkyRyxRQUFRM0csRUFBRTs0QkFDZGEsV0FBVzhGLFFBQVE5RixTQUFTOzRCQUM1QlUsV0FBV29GLFFBQVFwRixTQUFTOzRCQUM1QnVGLFdBQVdILFFBQVFHLFNBQVM7NEJBQzVCQyxvQkFBb0JKLFFBQVFJLGtCQUFrQjs0QkFDOUNDLGNBQWNMLFFBQVFLLFlBQVk7NEJBQ2xDQyxnQkFBZ0JOLFFBQVFNLGNBQWM7NEJBQ3RDekUsZUFBZW1FLFFBQVFuRSxhQUFhOzRCQUNwQzBFLG9CQUFvQlAsUUFBUU8sa0JBQWtCOzRCQUM5Q0MsV0FBV1IsUUFBUVEsU0FBUzs0QkFDNUJDLGlCQUFpQlQsUUFBUVMsZUFBZTs0QkFDeENDLFNBQVNWLFFBQVFVLE9BQU87NEJBQ3hCQyxpQkFBaUJYLFFBQVFXLGVBQWU7NEJBQ3hDNUUsYUFBYWlFLFFBQVFqRSxXQUFXOzRCQUNoQ08sV0FBVzBELFFBQVExRCxTQUFTOzRCQUM1QkMsV0FBVyxJQUFJTDs0QkFDZm1ELGFBQWFXLFFBQVFYLFdBQVc7NEJBQ2hDekQsVUFBVW9FLFFBQVFwRSxRQUFRO3dCQUM1Qjt3QkFFQSwrRUFBK0U7d0JBQy9FOzs0QkFBTWhFLDBEQUFNQSxDQUFDcUksWUFBWUMsYUFBYTtnQ0FBRVUsT0FBTzs0QkFBSzs7O3dCQUFwRDt3QkFFQXhGLFFBQVFDLEdBQUcsQ0FBQzs7Ozs7O3dCQUNMZjt3QkFDUGMsUUFBUWQsS0FBSyxDQUFDLG1DQUFtQ0E7d0JBQ2pELE1BQU1BOzs7Ozs7O1FBRVY7O0lBRUEsT0FBTXVHLGlCQTBCTCxHQTFCRCxTQUFNQSxrQkFBa0IsS0FRdkI7WUFQQ3RILFNBRHNCLE1BQ3RCQSxRQUNBVyxZQUZzQixNQUV0QkEsV0FDQXVCLE9BSHNCLE1BR3RCQTtlQUhGO2dCQVVVZ0QsWUFDQXJFLFNBQ0EwRyxPQVVDeEc7Ozs7Ozs7Ozs7d0JBWkRtRSxhQUFhcEgsdURBQUdBLENBQUNVLHVDQUFFQSxFQUFFLFNBQVN3QixRQUFRLG1CQUFtQlc7d0JBQ3pERSxVQUFVaEQsOERBQVVBLENBQUNxSCxZQUFZO3dCQUNqQ3FDLFFBQVFoSiw4REFBVUEsQ0FBQ0MsdUNBQUVBO3dCQUUzQjBELEtBQUtzRixPQUFPLENBQUMxRixTQUFBQTs0QkFDWCxJQUFNMkYsWUFBWTNKLHVEQUFHQSxDQUFDK0MsU0FBU2lCLElBQUloQyxFQUFFOzRCQUNyQ3lILE1BQU1HLE1BQU0sQ0FBQ0QsV0FBVyxtRUFDbkIzRixJQUFJNkYsWUFBWTt3QkFFdkI7d0JBRUE7OzRCQUFNSixNQUFNSyxNQUFNOzs7d0JBQWxCOzs7Ozs7d0JBQ083Rzt3QkFDUGMsUUFBUWQsS0FBSyxDQUFDLGdDQUFnQ0E7d0JBQzlDLE1BQU1BOzs7Ozs7O1FBRVY7O0lBRUEsa0ZBQWtGO0lBQ3BGLHdEQUF3RDtJQUN4RCxPQUFNOEcsYUFpQkwsR0FqQkQsU0FBTUEsY0FBYzFILE9BQXVCLEVBQUUySCxjQUFxQzs7ZUFBbEY7Z0JBQ09ySiwwQkFZSXNDOzs7O3dCQVpULElBQUksR0FBQ3RDLDJCQUFBQSw4Q0FBV0EsQ0FBQ3FGLFdBQVcsY0FBdkJyRiwrQ0FBQUEseUJBQXlCcUIsRUFBRSxLQUFJLENBQUNLLFNBQVM7NEJBQzVDLE1BQU0sSUFBSWMsTUFBTTt3QkFDbEI7Ozs7Ozs7Ozt3QkFHSTs7NEJBQU0sTUFBSzhHLG9CQUFvQixDQUFDNUgsUUFBUUwsRUFBRTs7O3dCQUExQzs2QkFDSWdJLGdCQUFBQTs7Ozt3QkFDRjs7NEJBQU0sTUFBS0Usb0JBQW9CLENBQUNGLGVBQWVoSSxFQUFFOzs7d0JBQWpEOzs7d0JBR0YsTUFBS21JLHdCQUF3Qjt3QkFDN0JwRyxRQUFRQyxHQUFHLENBQUM7Ozs7Ozt3QkFDUGY7d0JBQ1BjLFFBQVFkLEtBQUssQ0FBQyw0QkFBNEJBO3dCQUMxQyxNQUFNQTs7Ozs7OztRQUVWOztJQUVBLHNFQUFzRTtJQUN0RSxPQUFNZ0gsb0JBMEJMLEdBMUJELFNBQU1BLHFCQUFxQnBILFNBQXdCO2VBQW5EO2dCQUNPbEMsMEJBR0N1QixRQUNBa0YsWUFJRXJFLFNBQ0FDLGNBQ0F5RyxPQVdDeEc7Ozs7d0JBckJULElBQUksR0FBQ3RDLDJCQUFBQSw4Q0FBV0EsQ0FBQ3FGLFdBQVcsY0FBdkJyRiwrQ0FBQUEseUJBQXlCcUIsRUFBRSxLQUFJLENBQUNhLFdBQVc7NEJBQzlDLE1BQU0sSUFBSU0sTUFBTTt3QkFDbEI7d0JBQ01qQixTQUFTdkIsOENBQVdBLENBQUNxRixXQUFXLENBQUNoRSxFQUFFO3dCQUNuQ29GLGFBQWFwSCx1REFBR0EsQ0FBQ1UsdUNBQUVBLEVBQUUsU0FBU3dCLFFBQVEsbUJBQW1CVzs7Ozs7Ozs7O3dCQUc3RCx1Q0FBdUM7d0JBQ2pDRSxVQUFVaEQsOERBQVVBLENBQUNxSCxZQUFZO3dCQUNsQjs7NEJBQU1uSCwyREFBT0EsQ0FBQzhDOzs7d0JBQTdCQyxlQUFlO3dCQUNmeUcsUUFBUWhKLDhEQUFVQSxDQUFDQyx1Q0FBRUE7d0JBRTNCc0MsYUFBYUssSUFBSSxDQUFDcUcsT0FBTyxDQUFDLFNBQUN0RTs0QkFDekJxRSxLQUFNVyxDQUFBQSxTQUFNLENBQUNoRixPQUFPaUYsR0FBRzt3QkFDekI7d0JBRUEsbUNBQW1DO3dCQUNuQ1osS0FBTVcsQ0FBQUEsU0FBTSxDQUFDaEQ7d0JBRWI7OzRCQUFNcUMsTUFBTUssTUFBTTs7O3dCQUFsQjt3QkFDQS9GLFFBQVFDLEdBQUcsQ0FBQzs7Ozs7O3dCQUNMZjt3QkFDUGMsUUFBUWQsS0FBSyxDQUFDLG1DQUFtQ0E7d0JBQ2pELE1BQU1BOzs7Ozs7O1FBRVY7O0lBRUUsd0NBQXdDO0lBQ3hDLE9BQU1pSCxvQkFhTCxHQWJELFNBQU1BLHFCQUFxQkksZ0JBQXdCO2VBQW5EO2dCQUM0QjNKLDBCQUtsQmlJLFlBR0MzRjs7Ozt3QkFSVCxJQUFJLENBQUNxSCxvQkFBb0IsR0FBQzNKLDJCQUFBQSw4Q0FBV0EsQ0FBQ3FGLFdBQVcsY0FBdkJyRiwrQ0FBQUEseUJBQXlCcUIsRUFBRSxHQUFFOzRCQUNyRDs7O3dCQUNGOzs7Ozs7Ozs7d0JBR1E0RyxhQUFhNUksdURBQUdBLENBQUNVLHVDQUFFQSxFQUFFLFNBQVNDLDhDQUFXQSxDQUFDcUYsV0FBVyxDQUFDaEUsRUFBRSxFQUFFLGtCQUFrQnNJO3dCQUNsRjs7NEJBQU05Siw2REFBU0EsQ0FBQ29JOzs7d0JBQWhCO3dCQUNBN0UsUUFBUUMsR0FBRyxDQUFDOzs7Ozs7d0JBQ0xmO3dCQUNQYyxRQUFRZCxLQUFLLENBQUMsbUNBQW1DQTt3QkFDakQsTUFBTUE7Ozs7Ozs7UUFFVjs7SUFFQSxzREFBc0Q7SUFDcERrSCxPQUFBQSx3QkFFQyxHQUZEQSxTQUFBQTtRQUNFMUksK0NBQUtBLENBQUM4SSxRQUFRLENBQUMzSSxzRUFBaUJBO0lBQ2xDO0lBR0Y7OztHQUdDLEdBQ0QsT0FBTVEsMEJBaURKLEdBakRGLFNBQU1BLDJCQUEyQkYsTUFBYzs7ZUFBL0M7Z0JBTVFzSSxrQkFDQUMsZUFFQUMsZ0JBT0FsSSxxQkFnQkFtSSxvQkFFRmpGLEdBQ0FrRjs7Ozt3QkEvQkosSUFBSSxDQUFDMUksUUFBUSxNQUFNLElBQUlpQixNQUFNO3dCQUVKOzs0QkFBTWxELDJEQUFPQSxDQUFDRiw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUU7Ozt3QkFBaEQ4SixtQkFBbUI7d0JBQ0g7OzRCQUFNdkssMkRBQU9BLENBQUNGLDhEQUFVQSxDQUFDVyx1Q0FBRUEsRUFBRTs7O3dCQUE3QytKLGdCQUFnQjt3QkFFaEJDLGlCQUFpQkQsY0FBY3BILElBQUksQ0FBQ0csR0FBRyxDQUFDLFNBQUN4RDttQ0FDN0NjLDBEQUFhQSxDQUFDK0osWUFBWSxDQUFDO2dDQUN6QjdJLElBQUloQyxJQUFJZ0MsRUFBRTsrQkFDUGhDLElBQUlzRCxJQUFJOzt3QkFJVGQsc0JBQXNCZ0ksaUJBQWlCbkgsSUFBSSxDQUFDRyxHQUFHLENBQUN4RCxTQUFBQTs0QkFDcEQsSUFBTThELFdBQVdqRCxxREFBUUEsQ0FBQ2dLLFlBQVksQ0FBQztnQ0FDckM3SSxJQUFJaEMsSUFBSWdDLEVBQUU7K0JBQ1BoQyxJQUFJc0QsSUFBSTs0QkFHYixJQUFNd0gsaUJBQWlCSixlQUFlbkMsTUFBTSxDQUMxQyxTQUFDd0M7dUNBQVVBLE1BQU1qSCxRQUFRLENBQUNrSCxXQUFXLE9BQU9sSCxTQUFTRCxJQUFJLENBQUNtSCxXQUFXOzs0QkFHdkUsT0FBTyxJQUFJbksscURBQVFBLENBQUMsd0lBQ2ZpRDtnQ0FDSG1ILFFBQVFIOzt3QkFFWjt3QkFFTUgscUJBQXFCNUssOERBQVVBLENBQUNXLHVDQUFFQSxFQUFFLFNBQVN3QixRQUFRO3dCQUV2RHdELElBQUl2Rix5REFBS0EsQ0FBQ3dLLG9CQUFvQnZLLHlEQUFLQSxDQUFDLFVBQVUsTUFBTWMseURBQWFBLENBQUNnSyxRQUFRO3dCQUNuRTs7NEJBQU1qTCwyREFBT0EsQ0FBQ3lGOzs7d0JBQXJCa0YsT0FBTzt3QkFFWCxJQUFJLENBQUNBLEtBQUtPLEtBQUssRUFBRTs0QkFDZjs7Z0NBQU8sTUFBS0MsNkJBQTZCLENBQUNSLEtBQUt2SCxJQUFJLENBQUMsRUFBRSxFQUFFYjs7d0JBQzFEO3dCQUVBa0QsSUFBSXZGLHlEQUFLQSxDQUFDd0ssb0JBQW9CdksseURBQUtBLENBQUMsVUFBVSxNQUFNYyx5REFBYUEsQ0FBQ21LLFVBQVU7d0JBQ3JFOzs0QkFBTXBMLDJEQUFPQSxDQUFDeUY7Ozt3QkFBckJrRixPQUFPO3dCQUVQLElBQUksQ0FBQ0EsS0FBS08sS0FBSyxFQUFFOzRCQUNmOztnQ0FBTyxNQUFLQyw2QkFBNkIsQ0FBQ1IsS0FBS3ZILElBQUksQ0FBQyxFQUFFLEVBQUViOzt3QkFDMUQ7d0JBRUE7OzRCQUFPO2dDQUFFSCxTQUFTO2dDQUFNK0IsTUFBTTs0QkFBSzs7OztRQUNwQzs7SUFFRCxPQUFjaEIsOEJBNENiLEdBNUNELFNBQWNBO2VBQWQ7Z0JBS1VvSCxrQkFDQWpILFdBU0FrSCxlQUNBQyxnQkFTQWxJLHFCQWVDUzs7Ozs7Ozs7Ozt3QkFuQ2tCOzs0QkFBTWhELDJEQUFPQSxDQUFDRiw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUU7Ozt3QkFBaEQ4SixtQkFBbUI7d0JBQ25CakgsWUFBWWlILGlCQUFpQm5ILElBQUksQ0FBQ0csR0FBRyxDQUFDLFNBQUN4RDttQ0FDM0NhLHFEQUFRQSxDQUFDZ0ssWUFBWSxDQUFDO2dDQUNwQjdJLElBQUloQyxJQUFJZ0MsRUFBRTsrQkFDUGhDLElBQUlzRCxJQUFJOzt3QkFNTzs7NEJBQU1yRCwyREFBT0EsQ0FBQ0YsOERBQVVBLENBQUNXLHVDQUFFQSxFQUFFOzs7d0JBQTdDK0osZ0JBQWdCO3dCQUNoQkMsaUJBQWlCRCxjQUFjcEgsSUFBSSxDQUFDRyxHQUFHLENBQUMsU0FBQ3hEO21DQUM3Q2MsMERBQWFBLENBQUMrSixZQUFZLENBQUM7Z0NBQ3pCN0ksSUFBSWhDLElBQUlnQyxFQUFFOytCQUNQaEMsSUFBSXNELElBQUk7O3dCQUdmLG1FQUFtRTt3QkFFbkUsNkJBQTZCO3dCQUN2QmQsc0JBQXNCZSxVQUFVQyxHQUFHLENBQUNNLFNBQUFBOzRCQUN4QyxJQUFNZ0gsaUJBQWlCSixlQUFlbkMsTUFBTSxDQUMxQyxTQUFDd0M7dUNBQVVBLE1BQU1qSCxRQUFRLENBQUNrSCxXQUFXLE9BQU9sSCxTQUFTRCxJQUFJLENBQUNtSCxXQUFXOzs0QkFHdkUsT0FBTyxJQUFJbksscURBQVFBLENBQUMsd0lBQ2ZpRDtnQ0FDSG1ILFFBQVFIOzt3QkFFWDt3QkFFRCx5REFBeUQ7d0JBQ3pELDZFQUE2RTt3QkFFN0U7OzRCQUFPdEk7Ozt3QkFDQVM7d0JBQ1BjLFFBQVFkLEtBQUssQ0FBQyxxREFBcURBO3dCQUNuRSxNQUFNQTs7Ozs7OztRQUVWOztJQUVBOztHQUVDLEdBQ0QsT0FBTXFJLHVCQW9FSixHQXBFRixTQUFNQSx3QkFBd0JwSixNQUFjOztlQUE1QztnQkFTVXNJLGtCQUNBakgsV0FPQWtILGVBQ0FDLGdCQU9BbEkscUJBV0FtSSxvQkFDQUMsTUFPQVcsVUFvQkN0STs7Ozt3QkE1RFQsSUFBSSxDQUFDZixRQUFROzRCQUNYLE1BQU0sSUFBSWlCLE1BQU07d0JBQ2xCOzs7Ozs7Ozs7d0JBRzJCOzs0QkFBTWxELDJEQUFPQSxDQUFDRiw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUU7Ozt3QkFBaEQ4SixtQkFBbUI7d0JBQ25CakgsWUFBWWlILGlCQUFpQm5ILElBQUksQ0FBQ0csR0FBRyxDQUFDLFNBQUN4RDttQ0FDM0NhLHFEQUFRQSxDQUFDZ0ssWUFBWSxDQUFDO2dDQUNwQjdJLElBQUloQyxJQUFJZ0MsRUFBRTsrQkFDUGhDLElBQUlzRCxJQUFJOzt3QkFJTzs7NEJBQU1yRCwyREFBT0EsQ0FBQ0YsOERBQVVBLENBQUNXLHVDQUFFQSxFQUFFOzs7d0JBQTdDK0osZ0JBQWdCO3dCQUNoQkMsaUJBQWlCRCxjQUFjcEgsSUFBSSxDQUFDRyxHQUFHLENBQUMsU0FBQ3hEO21DQUM3Q2MsMERBQWFBLENBQUMrSixZQUFZLENBQUM7Z0NBQ3pCN0ksSUFBSWhDLElBQUlnQyxFQUFFOytCQUNQaEMsSUFBSXNELElBQUk7O3dCQUlUZCxzQkFBc0JlLFVBQVVDLEdBQUcsQ0FBQ00sU0FBQUE7NEJBQ3hDLElBQU1nSCxpQkFBaUJKLGVBQWVuQyxNQUFNLENBQzFDLFNBQUN3Qzt1Q0FBVUEsTUFBTWpILFFBQVEsQ0FBQ2tILFdBQVcsT0FBT2xILFNBQVNELElBQUksQ0FBQ21ILFdBQVc7OzRCQUd2RSxPQUFPLElBQUluSyxxREFBUUEsQ0FBQyx3SUFDZmlEO2dDQUNIbUgsUUFBUUg7O3dCQUVaO3dCQUVNSCxxQkFBcUI1Syw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUUsU0FBU3dCLFFBQVE7d0JBQzlDOzs0QkFBTWpDLDJEQUFPQSxDQUFDMEs7Ozt3QkFBckJDLE9BQU87d0JBRWIsSUFBSUEsS0FBS08sS0FBSyxFQUFFOzRCQUNkcEgsUUFBUUMsR0FBRyxDQUFDOzRCQUNaOzs7O3dCQUNGO3dCQUVpQjs7NEJBQU13SCxRQUFRQyxHQUFHLENBQ2hDYixLQUFLdkgsSUFBSSxDQUFDRyxHQUFHOzJDQUFDLDZFQUFPeEQ7d0NBQ2IwTDs7OztnREFBYzs7b0RBQU0sTUFBS04sNkJBQTZCLENBQzFEcEwsS0FDQXdDOzs7Z0RBRklrSixjQUFjO2dEQUtwQixJQUFJQSxZQUFZdEgsSUFBSSxFQUFFO29EQUNwQnNILFlBQVl0SCxJQUFJLENBQUN1SCxJQUFJLENBQUMsU0FBQ0MsR0FBR0M7NERBQ1REO3dEQUFmLElBQU1FLFNBQVNGLENBQUFBLFdBQUFBLEVBQUU3RyxLQUFLLGNBQVA2RyxzQkFBQUEsV0FBVzs0REFDWEM7d0RBQWYsSUFBTUUsU0FBU0YsQ0FBQUEsV0FBQUEsRUFBRTlHLEtBQUssY0FBUDhHLHNCQUFBQSxXQUFXO3dEQUMxQixPQUFPQyxTQUFTQztvREFDbEI7Z0RBQ0Y7Z0RBRUE7O29EQUFPTDs7OztnQ0FDVDtnREFmcUIxTDs7Ozs7O3dCQURqQnVMLFdBQVc7d0JBbUJqQjs7NEJBQU9BOzs7d0JBQ0F0STt3QkFDUGMsUUFBUWQsS0FBSyxDQUFDLG9DQUFvQ0E7d0JBQ2xELE1BQU1BOzs7Ozs7O1FBRVQ7O0lBRUQsT0FBTStJLGdCQTBCTCxHQTFCRCxTQUFNQSxpQkFBaUJqTSxVQUErQjtlQUF0RDtnQkFFVWtNLFNBSUVDLFdBZ0JEako7Ozs7Ozs7Ozs7d0JBcEJEZ0osVUFBVTNMLDhEQUFZQSxDQUFDSSx1Q0FBRUEsRUFBRTt3QkFFakMsa0VBQWtFO3dCQUNsRSxJQUFJLENBQUNYLFdBQVdpQyxFQUFFLElBQUlqQyxXQUFXaUMsRUFBRSxDQUFDbUssSUFBSSxPQUFPLElBQUk7NEJBQzNDRCxZQUFZbE0sdURBQUdBLENBQUNpTTs0QkFDdEJsTSxXQUFXaUMsRUFBRSxHQUFHa0ssVUFBVWxLLEVBQUU7d0JBQzlCO3dCQUVBLHFEQUFxRDt3QkFDckQsSUFBSWpDLFdBQVdvRSxTQUFTLEVBQUU7NEJBQ3hCcEUsV0FBV29FLFNBQVMsQ0FBQ25DLEVBQUUsR0FBR2pDLFdBQVdpQyxFQUFFO3dCQUN6Qzt3QkFFQSw4QkFBOEI7d0JBQzlCakMsV0FBV21GLFNBQVMsR0FBRyxJQUFJTDt3QkFFM0Isb0NBQW9DO3dCQUNwQzs7NEJBQU10RSwwREFBTUEsQ0FBQ1AsdURBQUdBLENBQUNpTSxTQUFTbE0sV0FBV2lDLEVBQUUsR0FBR2pDLFdBQVc4SixZQUFZOzs7d0JBQWpFO3dCQUNBOUYsUUFBUUMsR0FBRyxDQUFDO3dCQUNaOzs0QkFBT2pFOzs7d0JBQ0FrRDt3QkFDUGMsUUFBUWQsS0FBSyxDQUFDLHVDQUF1Q0E7d0JBQ3JELE1BQU0sSUFBSUUsTUFBTTs7Ozs7OztRQUVwQjs7SUFFQSxPQUFjaUksNkJBb0ZiLEdBcEZELFNBQWNBLDhCQUNaekksVUFBK0MsRUFDL0NILG1CQUErQjtlQUZqQztnQkFJUWMsTUFHQVIsaUJBZUFULFNBbUNBVSxTQUNBQyxjQUVBb0I7Ozs7d0JBeERBZCxPQUFPWCxXQUFXVyxJQUFJO3dCQUU1QixnREFBZ0Q7d0JBQzFDUixrQkFBa0IsQ0FBQ1EsS0FBS0MsU0FBUyxNQUFLLEVBQUdDLEdBQUcsQ0FBQyxTQUFDQztnQ0FFeEJBLDRCQUFBQTs0QkFEMUIscUNBQXFDOzRCQUNyQyxJQUFNMkkscUJBQW9CM0ksd0JBQUFBLFlBQVlLLFFBQVEsY0FBcEJMLDZDQUFBQSw2QkFBQUEsc0JBQXNCSSxJQUFJLGNBQTFCSixpREFBQUEsMkJBQTRCdUgsV0FBVyxHQUFHbUIsSUFBSTs0QkFDeEUsSUFBTXpJLGVBQWVsQixvQkFBb0JtQixJQUFJLENBQzNDQyxTQUFBQTt1Q0FBTUEsR0FBR0MsSUFBSSxDQUFDbUgsV0FBVyxHQUFHbUIsSUFBSSxPQUFPQzs7NEJBR3pDLGdFQUFnRTs0QkFDaEUsT0FBTyx3SUFDRjNJO2dDQUNISyxVQUFVSixnQkFBZ0JELFlBQVlLLFFBQVE7O3dCQUVsRDt3QkFFQSwyQ0FBMkM7d0JBQ3JDekIsVUFBVSxJQUFJdEIsbURBQU9BLENBQUM7NEJBQzFCaUIsSUFBSVcsV0FBV1gsRUFBRTs0QkFDakJpQyxnQkFBZ0JYLEtBQUtXLGNBQWMsSUFBSTs0QkFDdkNWLFdBQVdUOzRCQUNYdUIsT0FBT2YsS0FBS2UsS0FBSyxJQUFJOzRCQUNyQkMsYUFBYWhCLEtBQUtnQixXQUFXLElBQUk7NEJBQ2pDQyxVQUFVakIsS0FBS2lCLFFBQVEsSUFBSTs0QkFDM0JFLGtCQUFrQm5CLEtBQUttQixnQkFBZ0IsSUFBSTs0QkFDM0NDLGFBQWFwQixLQUFLb0IsV0FBVyxJQUFJOzRCQUNqQ0MsZUFBZXJCLEtBQUtxQixhQUFhLElBQUl6RCx5REFBYUEsQ0FBQ21MLFFBQVE7NEJBQzNEckgsUUFBUTFCLEtBQUswQixNQUFNLElBQUk7NEJBQ3ZCQyxXQUFXM0QsNEVBQXlCQSxDQUFDZ0MsS0FBSzJCLFNBQVM7NEJBQ25EQyxXQUFXNUQsNEVBQXlCQSxDQUFDZ0MsS0FBSzRCLFNBQVM7NEJBQ25ETixXQUFXdEQsNEVBQXlCQSxDQUFDZ0MsS0FBS3NCLFNBQVM7NEJBQ25EVixjQUFjWixLQUFLWSxZQUFZOzRCQUMvQkMsV0FBV2IsS0FBS2EsU0FBUzs0QkFDekJDLE1BQU0sQ0FBQ2QsS0FBS2MsSUFBSSxNQUFLLEVBQUdaLEdBQUcsQ0FBQyxTQUFDZ0U7b0NBRURBLHdCQUFBQTtnQ0FEMUIsK0JBQStCO2dDQUMvQixJQUFNNEUscUJBQW9CNUUsb0JBQUFBLFFBQVExRCxRQUFRLGNBQWhCMEQseUNBQUFBLHlCQUFBQSxrQkFBa0IzRCxJQUFJLGNBQXRCMkQsNkNBQUFBLHVCQUF3QndELFdBQVcsR0FBR21CLElBQUk7Z0NBQ3BFLElBQU16SSxlQUFlbEIsb0JBQW9CbUIsSUFBSSxDQUMzQ0MsU0FBQUE7MkNBQU1BLEdBQUdDLElBQUksQ0FBQ21ILFdBQVcsR0FBR21CLElBQUksT0FBT0M7O2dDQUd6QyxPQUFPLHdJQUNGNUU7b0NBQ0gxRCxVQUFVSixnQkFBZ0I4RCxRQUFRMUQsUUFBUTs7NEJBRTlDOzRCQUNBVSxlQUFlbEIsS0FBS2tCLGFBQWE7NEJBQ2pDTyxPQUFPekIsS0FBS3lCLEtBQUs7NEJBQ2pCSSxNQUFNN0IsS0FBSzZCLElBQUksSUFBSW5FLG9EQUFRQSxDQUFDc0wsUUFBUTt3QkFDdEM7d0JBRUF2SSxRQUFRQyxHQUFHLENBQUMsd0JBQXdCM0IsUUFBUUwsRUFBRTt3QkFDOUMsZ0NBQWdDO3dCQUMxQmUsVUFBVWhELDhEQUFVQSxDQUFDNEMsV0FBVzBILEdBQUcsRUFBRTt3QkFDdEI7OzRCQUFNcEssMkRBQU9BLENBQUM4Qzs7O3dCQUE3QkMsZUFBZTt3QkFFZm9CLE9BQXNCcEIsYUFBYUssSUFBSSxDQUFDRyxHQUFHLENBQUM0QixTQUFBQTtnQ0FJdEJvQyx3QkFBQUE7NEJBSDFCLElBQU1BLFVBQVVwQyxPQUFPOUIsSUFBSTs0QkFFM0IscUNBQXFDOzRCQUNyQyxJQUFNOEkscUJBQW9CNUUsb0JBQUFBLFFBQVExRCxRQUFRLGNBQWhCMEQseUNBQUFBLHlCQUFBQSxrQkFBa0IzRCxJQUFJLGNBQXRCMkQsNkNBQUFBLHVCQUF3QndELFdBQVcsR0FBR21CLElBQUk7NEJBQ3BFLElBQU16SSxlQUFlbEIsb0JBQW9CbUIsSUFBSSxDQUMzQ0MsU0FBQUE7dUNBQU1BLEdBQUdDLElBQUksQ0FBQ21ILFdBQVcsR0FBR21CLElBQUksT0FBT0M7OzRCQUd6QyxzQ0FBc0M7NEJBQ3RDLElBQU1HLGtCQUFrQix3SUFDbkIvRTtnQ0FDSHhGLElBQUlvRCxPQUFPcEQsRUFBRTtnQ0FDYmEsV0FBV1IsUUFBUUwsRUFBRTtnQ0FDckI4QixVQUFVSixnQkFBZ0I4RCxRQUFRMUQsUUFBUTtnQ0FDMUNtQixXQUFXM0QsNEVBQXlCQSxDQUFDa0csUUFBUXZDLFNBQVM7Z0NBQ3REQyxXQUFXNUQsNEVBQXlCQSxDQUFDa0csUUFBUXRDLFNBQVM7OzRCQUd4RCwyREFBMkQ7NEJBQzNELE9BQU8sSUFBSXRFLHdEQUFXQSxDQUFDMkw7d0JBQ3pCO3dCQUVBOzs0QkFBTztnQ0FBRWxLLFNBQUFBO2dDQUFTK0IsTUFBQUE7NEJBQUs7Ozs7UUFDekI7O0lBRUEsT0FBTW9JLGtCQW1ESixHQW5ERixTQUFNQSxtQkFBbUIsS0FRdkI7WUFQQXRLLFNBRHVCLE1BQ3ZCQSxRQUNBRyxVQUZ1QixNQUV2QkEsU0FDQStCLE9BSHVCLE1BR3ZCQTtlQUhGO2dCQVlVcUksYUFFQUMsY0FVQUMsbUJBR0E1SixTQUNBNkosVUFtQkMzSjs7Ozt3QkF0Q1QsSUFBSSxDQUFDZixRQUFRLE1BQU0sSUFBSWlCLE1BQU07Ozs7Ozs7Ozt3QkFHckJzSixjQUFjLElBQUk1SDt3QkFFbEI2SCxlQUFlLElBQUkzTCxtREFBT0EsQ0FBQyx3SUFDNUJzQjs0QkFDSDRCLGdCQUFnQixHQUFpQndJLE9BQWRwSyxRQUFRTCxFQUFFLEVBQUMsS0FBeUIsT0FBdEJ5SyxZQUFZSSxPQUFPOzRCQUNwRGxJLGVBQWV6RCx5REFBYUEsQ0FBQ2dLLFFBQVE7NEJBQ3JDakcsV0FBV3dIOzRCQUNYdkgsV0FBV3VIOzRCQUNYN0gsV0FBVzZIOzRCQUNYckksSUFBSTs7d0JBR0F1SSxvQkFBb0IzTSx1REFBR0EsQ0FBQ0QsOERBQVVBLENBQUNXLHVDQUFFQSxFQUFFLFNBQVN3QixRQUFRO3dCQUM5RDs7NEJBQU0zQiwwREFBTUEsQ0FBQ29NLG1CQUFtQkQsYUFBYTdDLFlBQVk7Ozt3QkFBekQ7d0JBRU05RyxVQUFVaEQsOERBQVVBLENBQUM0TSxtQkFBbUI7d0JBQ3hDQyxXQUFXbk0sOERBQVVBLENBQUNDLHVDQUFFQTt3QkFFOUIwRCxLQUFLc0YsT0FBTyxDQUFDLFNBQUMxRixLQUFLOEk7NEJBQ2pCLElBQU1uRCxZQUFZM0osdURBQUdBLENBQUMrQyxTQUFTLEdBQWEwSixPQUFWekksSUFBSWhDLEVBQUUsRUFBQyxLQUF5QixPQUF0QnlLLFlBQVlJLE9BQU87NEJBQy9ERCxTQUFTRyxHQUFHLENBQUNwRCxXQUFXO2dDQUN0QjNILElBQUkySCxVQUFVM0gsRUFBRTtnQ0FDaEJhLFdBQVc4SixrQkFBa0IzSyxFQUFFO2dDQUMvQjhCLFVBQVVFLElBQUlGLFFBQVEsQ0FBQytGLFlBQVk7Z0NBQ25DOUUsT0FBTytIO2dDQUNQN0gsV0FBV3dILFlBQVlJLE9BQU87Z0NBQzlCM0gsV0FBV3VILFlBQVlJLE9BQU87Z0NBQzlCL0UsY0FBYztnQ0FDZHBELGFBQWE7NEJBQ2Y7d0JBQ0Y7d0JBRUE7OzRCQUFNa0ksU0FBUzlDLE1BQU07Ozt3QkFBckI7d0JBRUE7OzRCQUFPNEM7Ozt3QkFDQXpKO3dCQUNQYyxRQUFRZCxLQUFLLENBQUMsaUNBQWlDQTt3QkFDL0MsTUFBTUE7Ozs7Ozs7UUFFVDs7SUFFRDs7O0dBR0MsR0FDRCxPQUFNK0osYUE2RUwsR0E3RUQsU0FBTUEsY0FBYyxLQU1uQjtZQUxDQyxXQURrQixNQUNsQkEsVUFDQXpILGNBRmtCLE1BRWxCQTtlQUZGO2dCQVFRUSxhQU1Ba0gsVUFDQUMsV0FDQUMsY0FNQUMsU0FDQUMsVUFDQXBMLFFBR0FxTCxjQUNBQyxlQU1BckosV0FHQXNKLGlCQUNBQzs7Ozt3QkEvQk4sd0NBQXdDO3dCQUNsQzFILGNBQWNyRiw4Q0FBV0EsQ0FBQ3FGLFdBQVc7d0JBQzNDLElBQUksQ0FBQ0EsYUFBYTs0QkFDaEIsTUFBTSxJQUFJN0MsTUFBTTt3QkFDbEI7d0JBRUEsbUNBQW1DO3dCQUM3QitKLFdBQVduTiw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUU7d0JBQzFCeU0sWUFBWWhOLHlEQUFLQSxDQUFDK00sVUFBVTlNLHlEQUFLQSxDQUFDLFlBQVksTUFBTTZNO3dCQUNyQzs7NEJBQU1oTiwyREFBT0EsQ0FBQ2tOOzs7d0JBQTdCQyxlQUFlO3dCQUVyQixJQUFJQSxhQUFhakMsS0FBSyxFQUFFOzRCQUN0QixNQUFNLElBQUloSSxNQUFNO3dCQUNsQjt3QkFFTWtLLFVBQVVELGFBQWEvSixJQUFJLENBQUMsRUFBRTt3QkFDOUJpSyxXQUFXRCxRQUFRL0osSUFBSTt3QkFDdkJwQixTQUFTbUwsUUFBUXJMLEVBQUU7d0JBRXpCLHVDQUF1Qzt3QkFDakN1TCxlQUFldk4sdURBQUdBLENBQUNVLHVDQUFFQSxFQUFFLHdCQUF3QjhFO3dCQUMvQjs7NEJBQU10RiwwREFBTUEsQ0FBQ3FOOzs7d0JBQTdCQyxnQkFBZ0I7d0JBRXRCLElBQUksQ0FBQ0EsY0FBY2xHLE1BQU0sSUFBSTs0QkFDM0IsTUFBTSxJQUFJbkUsTUFBTTt3QkFDbEI7d0JBRU1nQixZQUFZcUosY0FBY2xLLElBQUk7d0JBRXBDLHVDQUF1Qzt3QkFDakNtSyxrQkFBa0IsR0FBa0J2TCxPQUFmc0QsYUFBWSxLQUFhWCxPQUFWM0MsUUFBTyxLQUFjLE9BQVgyQyxLQUFLOEksR0FBRzt3QkFDdERELG9CQUFvQjs0QkFDeEIxTCxJQUFJeUw7NEJBQ0p0SixXQUFXQTs0QkFDWHFCLGFBQUFBOzRCQUNBdEQsUUFBQUE7NEJBQ0EwTCxVQUFVTixTQUFTTSxRQUFRLElBQUk7NEJBQy9CQyxjQUFjUCxTQUFTTyxZQUFZLElBQUksQ0FBQzs0QkFDeENDLFVBQVU7NEJBQ1ZDLGlCQUFpQjs0QkFDakJySixhQUFhOzRCQUNic0osS0FBSzlMOzRCQUNMK0wsVUFBVVgsU0FBU1csUUFBUSxJQUFJOzRCQUMvQkMsTUFBTTs0QkFDTkMsU0FBUzs0QkFDVEMsVUFBVTs0QkFDVm5CLFVBQUFBOzRCQUNBb0IsVUFBVSxJQUFJeEo7NEJBQ2RJLFdBQVcsSUFBSUo7NEJBQ2ZLLFdBQVcsSUFBSUw7NEJBQ2Z5SixhQUFhO2dDQUNYQyxnQkFBZ0I7Z0NBQ2hCQyxpQkFBaUI7Z0NBQ2pCQyxhQUFhO2dDQUNiQyxjQUFjO2dDQUNkQyxjQUFjO2dDQUNkQyxtQkFBbUI7Z0NBQ25CQyxpQkFBaUI7Z0NBQ2pCQyxtQkFBbUI7Z0NBQ25CQyxtQkFBbUI7Z0NBQ25CQyx1QkFBdUI7NEJBQ3pCOzRCQUNBQyxlQUFlOzRCQUNmQyxlQUFlOzRCQUNmQyxpQkFBaUI7NEJBQ2pCQyxRQUFRO3dCQUNWO3dCQUVBLDhCQUE4Qjt3QkFDOUI7OzRCQUFNN08sMERBQU1BLENBQUNQLHVEQUFHQSxDQUFDVSx1Q0FBRUEsRUFBRSxrQkFBa0IrTSxrQkFBa0JDOzs7d0JBQXpEOzs7Ozs7UUFDRjs7a0VBM21DSTVMOztZQUdBdU4sS0FBQUE7aUJBQUosdUNBRHFDO1lBQ3JDO2dCQUNFLE9BQU81TiwrQ0FBS0EsQ0FBQzZOLFFBQVEsR0FBR2pOLE9BQU8sQ0FBQ2dOLGNBQWM7WUFDaEQ7aUJBRUEsYUFBbUJoTixPQUF1QjtnQkFDeENaLCtDQUFLQSxDQUFDOEksUUFBUSxDQUFDN0ksc0VBQWlCQSxDQUFDVztZQUNuQzs7O1lBRUlrTixLQUFBQTtpQkFBSjtnQkFDRSxPQUFPOU4sK0NBQUtBLENBQUM2TixRQUFRLEdBQUdqTixPQUFPLENBQUNtTixtQkFBbUI7WUFDckQ7aUJBRUEsYUFBdUJwTCxJQUFtQjtnQkFDeEMzQywrQ0FBS0EsQ0FBQzhJLFFBQVEsQ0FBQzVJLDJFQUFzQkEsQ0FBQ3lDO1lBQ3hDOzs7WUFFSXFMLEtBQUFBO2lCQUFKO2dCQUNFLE9BQU9oTywrQ0FBS0EsQ0FBQzZOLFFBQVEsR0FBR2pOLE9BQU8sQ0FBQzJILGNBQWM7WUFDaEQ7aUJBRUEsYUFBMEJBLGNBQThCO2dCQUN0RHZJLCtDQUFLQSxDQUFDOEksUUFBUSxDQUFDMUksc0VBQWlCQSxDQUFDbUk7WUFDbkM7OztXQXpCSWxJOztBQThtQ0MsSUFBTTROLGlCQUFpQixJQUFJNU4saUJBQWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9hcGkvZmlyZWJhc2Uvd29ya291dC9zZXJ2aWNlLnRzP2M1ZTIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2FwaS9maXJlYmFzZS93b3Jrb3V0L3NlcnZpY2UudHNcbmltcG9ydCB7XG4gIGNvbGxlY3Rpb24sXG4gIGRvYyxcbiAgZ2V0RG9jcyxcbiAgZ2V0RG9jLFxuICB1cGRhdGVEb2MsXG4gIHF1ZXJ5LFxuICB3aGVyZSxcbiAgb3JkZXJCeSwgXG4gIERvY3VtZW50RGF0YSxcbiAgUXVlcnlEb2N1bWVudFNuYXBzaG90LFxuICBjb2xsZWN0aW9uIGFzIGZzQ29sbGVjdGlvbixcbiAgc2V0RG9jLFxuICBkZWxldGVEb2MsXG4gIHdyaXRlQmF0Y2hcbn0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcblxuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi9jb25maWcnO1xuaW1wb3J0IHsgdXNlclNlcnZpY2UgfSBmcm9tICcuLi91c2VyJztcbmltcG9ydCB7IEV4ZXJjaXNlTG9nLCBFeGVyY2lzZUNhdGVnb3J5LCBFeGVyY2lzZSwgQm9keVBhcnQsIEV4ZXJjaXNlVmlkZW8sIEV4ZXJjaXNlQXV0aG9yLCBFeGVyY2lzZVZpZGVvVmlzaWJpbGl0eSB9IGZyb20gJy4uL2V4ZXJjaXNlL3R5cGVzJztcbmltcG9ydCB7UHJvZmlsZUltYWdlfSBmcm9tICcuLi91c2VyL3R5cGVzJ1xuaW1wb3J0IHsgV29ya291dCwgV29ya291dFN1bW1hcnksIEJvZHlab25lLCBJbnRyb1ZpZGVvIH0gZnJvbSAnLi4vd29ya291dC90eXBlcyc7XG5pbXBvcnQgeyBXb3Jrb3V0U3RhdHVzLCBTd2VhdGxpc3RDb2xsZWN0aW9uIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBmb3JtYXQgfSBmcm9tICdkYXRlLWZucyc7IFxuaW1wb3J0IHsgY29udmVydFRpbWVzdGFtcCwgc2VydmVyVGltZXN0YW1wIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdGltZXN0YW1wJzsgLy8gQWRqdXN0IHRoZSBpbXBvcnQgcGF0aFxuaW1wb3J0IHsgY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL2Zvcm1hdERhdGUnO1xuaW1wb3J0IHsgQ2hhbGxlbmdlLCBDaGFsbGVuZ2VTdGF0dXMsIFVzZXJDaGFsbGVuZ2UgfSBmcm9tICcuLi8uLi8uLi9hcGkvZmlyZWJhc2Uvd29ya291dC90eXBlcyc7XG5cbmltcG9ydCB7IHN0b3JlIH0gZnJvbSAnLi4vLi4vLi4vcmVkdXgvc3RvcmUnO1xuaW1wb3J0IHsgc2V0Q3VycmVudFdvcmtvdXQsIHNldEN1cnJlbnRFeGVyY2lzZUxvZ3MsIHJlc2V0V29ya291dFN0YXRlLCBzZXRXb3Jrb3V0U3VtbWFyeSB9IGZyb20gJy4uLy4uLy4uL3JlZHV4L3dvcmtvdXRTbGljZSc7XG5cblxuaW50ZXJmYWNlIEZpcmVzdG9yZUVycm9yIHtcbiAgY29kZTogc3RyaW5nO1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgc3RhY2s/OiBzdHJpbmc7XG59XG5cbmNsYXNzIFdvcmtvdXRTZXJ2aWNlIHtcblxuLy8gUmVwbGFjZSBnZXR0ZXJzL3NldHRlcnMgdG8gdXNlIFJlZHV4XG4gIGdldCBjdXJyZW50V29ya291dCgpOiBXb3Jrb3V0IHwgbnVsbCB7XG4gICAgcmV0dXJuIHN0b3JlLmdldFN0YXRlKCkud29ya291dC5jdXJyZW50V29ya291dDtcbiAgfVxuXG4gIHNldCBjdXJyZW50V29ya291dCh3b3Jrb3V0OiBXb3Jrb3V0IHwgbnVsbCkge1xuICAgIHN0b3JlLmRpc3BhdGNoKHNldEN1cnJlbnRXb3Jrb3V0KHdvcmtvdXQpKTtcbiAgfVxuXG4gIGdldCBjdXJyZW50V29ya291dExvZ3MoKTogRXhlcmNpc2VMb2dbXSB7XG4gICAgcmV0dXJuIHN0b3JlLmdldFN0YXRlKCkud29ya291dC5jdXJyZW50RXhlcmNpc2VMb2dzO1xuICB9XG5cbiAgc2V0IGN1cnJlbnRXb3Jrb3V0TG9ncyhsb2dzOiBFeGVyY2lzZUxvZ1tdKSB7XG4gICAgc3RvcmUuZGlzcGF0Y2goc2V0Q3VycmVudEV4ZXJjaXNlTG9ncyhsb2dzKSk7XG4gIH1cblxuICBnZXQgY3VycmVudFdvcmtvdXRTdW1tYXJ5KCk6IFdvcmtvdXRTdW1tYXJ5IHwgbnVsbCB7XG4gICAgcmV0dXJuIHN0b3JlLmdldFN0YXRlKCkud29ya291dC53b3Jrb3V0U3VtbWFyeTtcbiAgfVxuXG4gIHNldCBjdXJyZW50V29ya291dFN1bW1hcnkod29ya291dFN1bW1hcnk6IFdvcmtvdXRTdW1tYXJ5KSB7XG4gICAgc3RvcmUuZGlzcGF0Y2goc2V0V29ya291dFN1bW1hcnkod29ya291dFN1bW1hcnkpKTtcbiAgfVxuXG4gIGdlbmVyYXRlSWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gZG9jKGNvbGxlY3Rpb24oZGIsICd3b3Jrb3V0cycpKS5pZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCB0aGUgdXNlcidzIGN1cnJlbnQgd29ya291dCAoZWl0aGVyIFF1ZXVlZFVwIG9yIEluUHJvZ3Jlc3MpLlxuICAgKi9cbiAgYXN5bmMgZmV0Y2hDdXJyZW50V29ya291dCh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8V29ya291dCB8IG51bGw+IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgdGhpcy5mZXRjaEN1cnJlbnRXb3Jrb3V0U2Vzc2lvbih1c2VySWQpO1xuICAgIHJldHVybiBzZXNzaW9uLndvcmtvdXQ7XG4gIH1cblxuICBhc3luYyBnZXRBbGxTd2VhdGxpc3RzKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxXb3Jrb3V0W10+IHtcbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIElEIGlzIHJlcXVpcmVkJyk7XG4gICAgfVxuICBcbiAgICAvLyBSZWZlcmVuY2UgdG8gdGhlIHVzZXIncyB3b3Jrb3V0IGNvbGxlY3Rpb25cbiAgICBjb25zdCB3b3Jrb3V0c1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycsIHVzZXJJZCwgJ015Q3JlYXRlZFdvcmtvdXRzJyk7XG4gIFxuICAgIHRyeSB7XG4gICAgICAvLyBGZXRjaCBleGVyY2lzZXMgd2l0aCB2aWRlb3NcbiAgICAgIGNvbnN0IGV4ZXJjaXNlc1dpdGhWaWRlb3MgPSBhd2FpdCB0aGlzLmZldGNoQW5kTWFwRXhlcmNpc2VzV2l0aFZpZGVvcygpO1xuICBcbiAgICAgIC8vIFF1ZXJ5IHRvIGZldGNoIGFsbCB3b3Jrb3V0c1xuICAgICAgY29uc3Qgd29ya291dHNTbmFwc2hvdCA9IGF3YWl0IGdldERvY3Mod29ya291dHNSZWYpO1xuICAgICAgY29uc3Qgd29ya291dHM6IFdvcmtvdXRbXSA9IFtdO1xuICBcbiAgICAgIC8vIFByb2Nlc3MgZWFjaCB3b3Jrb3V0IGRvY3VtZW50XG4gICAgICBmb3IgKGNvbnN0IHdvcmtvdXREb2Mgb2Ygd29ya291dHNTbmFwc2hvdC5kb2NzKSB7XG4gICAgICAgIGNvbnN0IHdvcmtvdXREYXRhID0gd29ya291dERvYy5kYXRhKCk7XG4gICAgICAgIGNvbnN0IHdvcmtvdXRJZCA9IHdvcmtvdXREb2MuaWQ7XG4gIFxuICAgICAgICAvLyBNYXAgdGhlIGV4ZXJjaXNlcyBpbiB0aGUgd29ya291dCB0byB0aGUgZnVsbCBleGVyY2lzZSBvYmplY3RzIHdpdGggdmlkZW9zXG4gICAgICAgIGNvbnN0IG1hcHBlZEV4ZXJjaXNlcyA9ICh3b3Jrb3V0RGF0YS5leGVyY2lzZXMgfHwgW10pLm1hcCgoZXhlcmNpc2VSZWY6IGFueSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGZ1bGxFeGVyY2lzZSA9IGV4ZXJjaXNlc1dpdGhWaWRlb3MuZmluZChleCA9PiBleC5uYW1lID09PSBleGVyY2lzZVJlZi5leGVyY2lzZS5uYW1lKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlRoaXMgaXMgdGhlIG1hcHBlZCBleGVyY2lzZTogXCIgKyBmdWxsRXhlcmNpc2UpO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmV4ZXJjaXNlUmVmLFxuICAgICAgICAgICAgZXhlcmNpc2U6IGZ1bGxFeGVyY2lzZSB8fCBleGVyY2lzZVJlZlxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gIFxuICAgICAgICAvLyBQYXJzZSB3b3Jrb3V0IGRhdGEgaW50byB0aGUgZGVzaXJlZCBzdHJ1Y3R1cmVcbiAgICAgICAgY29uc3Qgd29ya291dCA9IG5ldyBXb3Jrb3V0KHtcbiAgICAgICAgICBpZDogd29ya291dERhdGEuaWQgfHwgJycsXG4gICAgICAgICAgcm91bmRXb3Jrb3V0SWQ6IHdvcmtvdXREYXRhLnJvdW5kV29ya291dElkIHx8ICcnLFxuICAgICAgICAgIGNvbGxlY3Rpb25JZDogd29ya291dERhdGEuY29sbGVjdGlvbklkLFxuICAgICAgICAgIGV4ZXJjaXNlczogbWFwcGVkRXhlcmNpc2VzLFxuICAgICAgICAgIGNoYWxsZW5nZTogd29ya291dERhdGEuY2hhbGxlbmdlLFxuICAgICAgICAgIGxvZ3M6IFtdLFxuICAgICAgICAgIHRpdGxlOiB3b3Jrb3V0RGF0YS50aXRsZSB8fCAnJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogd29ya291dERhdGEuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgICAgZHVyYXRpb246IHdvcmtvdXREYXRhLmR1cmF0aW9uIHx8IDAsXG4gICAgICAgICAgd29ya291dFJhdGluZzogd29ya291dERhdGEud29ya291dFJhdGluZyxcbiAgICAgICAgICB1c2VBdXRob3JDb250ZW50OiB3b3Jrb3V0RGF0YS51c2VBdXRob3JDb250ZW50IHx8IGZhbHNlLFxuICAgICAgICAgIGlzQ29tcGxldGVkOiB3b3Jrb3V0RGF0YS5pc0NvbXBsZXRlZCB8fCBmYWxzZSxcbiAgICAgICAgICB3b3Jrb3V0U3RhdHVzOiB3b3Jrb3V0RGF0YS53b3Jrb3V0U3RhdHVzIHx8ICdub3RTdGFydGVkJyxcbiAgICAgICAgICBzdGFydFRpbWU6IHdvcmtvdXREYXRhLnN0YXJ0VGltZSA/IG5ldyBEYXRlKHdvcmtvdXREYXRhLnN0YXJ0VGltZSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgb3JkZXI6IHdvcmtvdXREYXRhLm9yZGVyLFxuICAgICAgICAgIGF1dGhvcjogd29ya291dERhdGEuYXV0aG9yIHx8IHVzZXJJZCxcbiAgICAgICAgICBjcmVhdGVkQXQ6IHdvcmtvdXREYXRhLmNyZWF0ZWRBdCA/IG5ldyBEYXRlKHdvcmtvdXREYXRhLmNyZWF0ZWRBdCkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogd29ya291dERhdGEudXBkYXRlZEF0ID8gbmV3IERhdGUod29ya291dERhdGEudXBkYXRlZEF0KSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgem9uZTogd29ya291dERhdGEuem9uZSB8fCAnRlVMTF9CT0RZJyxcbiAgICAgICAgfSk7ICAgICAgICBcbiAgXG4gICAgICAgIC8vIEZldGNoIGFuZCBwcm9jZXNzIGxvZ3NcbiAgICAgICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycsIHVzZXJJZCwgJ015Q3JlYXRlZFdvcmtvdXRzJywgd29ya291dElkLCAnbG9ncycpO1xuICAgICAgICBjb25zdCBsb2dzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGxvZ3NSZWYpO1xuICAgICAgICB3b3Jrb3V0LmxvZ3MgPSBsb2dzU25hcHNob3QuZG9jcy5tYXAoKGxvZ0RvYykgPT4gKHtcbiAgICAgICAgICAuLi5sb2dEb2MuZGF0YSgpLFxuICAgICAgICAgIGlkOiBsb2dEb2MuaWQsXG4gICAgICAgIH0pKSBhcyBFeGVyY2lzZUxvZ1tdO1xuICBcbiAgICAgICAgd29ya291dHMucHVzaCh3b3Jrb3V0KTtcbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gd29ya291dHM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGZpcmVzdG9yZUVycm9yID0gZXJyb3IgYXMgRmlyZXN0b3JlRXJyb3I7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzd2VhdGxpc3RzOicsIGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggc3dlYXRsaXN0cycpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJDaGFsbGVuZ2VzQnlDaGFsbGVuZ2VJZChjaGFsbGVuZ2VJZDogc3RyaW5nKTogUHJvbWlzZTx7IHVzZXJDaGFsbGVuZ2VzOiBVc2VyQ2hhbGxlbmdlW107IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgICBjb25zdCB1c2VyQ2hhbGxlbmdlc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VyLWNoYWxsZW5nZScpO1xuICAgIGNvbnN0IHEgPSBxdWVyeSh1c2VyQ2hhbGxlbmdlc1JlZiwgd2hlcmUoJ2NoYWxsZW5nZUlkJywgJz09JywgY2hhbGxlbmdlSWQpKTtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgICAgY29uc3QgdXNlckNoYWxsZW5nZXM6IFVzZXJDaGFsbGVuZ2VbXSA9IHNuYXBzaG90LmRvY3MubWFwKChkb2M6IERvY3VtZW50RGF0YSkgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyQ2hhbGxlbmdlKGRvYy5pZCwgZGF0YSk7XG4gICAgICB9KTtcbiAgICAgIGlmICh1c2VyQ2hhbGxlbmdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiB7IHVzZXJDaGFsbGVuZ2VzIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4geyB1c2VyQ2hhbGxlbmdlczogW10sIGVycm9yOiAnTm8gdXNlciBjaGFsbGVuZ2VzIGZvdW5kIGZvciB0aGlzIGNoYWxsZW5nZS4nIH07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgY2hhbGxlbmdlcyBieSBjaGFsbGVuZ2VJZDonLCBlcnJvcik7XG4gICAgICByZXR1cm4geyB1c2VyQ2hhbGxlbmdlczogW10sIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyB9O1xuICAgIH1cbiAgfVxuICBcbiAgLyoqXG4gICAqIEZldGNoZXMgd29ya291dCBzdW1tYXJpZXMgZm9yIGEgc3BlY2lmaWMgZGF0ZS5cbiAgICogQHBhcmFtIGRhdGUgLSBUaGUgZGF0ZSBmb3Igd2hpY2ggd29ya291dCBzdW1tYXJpZXMgYXJlIGJlaW5nIGZldGNoZWQuXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSByZXNvbHZpbmcgdG8gYW4gYXJyYXkgb2Ygd29ya291dCBzdW1tYXJpZXMuXG4gICAqIEB0aHJvd3MgSWYgbm8gdXNlciBpcyBzaWduZWQgaW4gb3IgaWYgdGhlIEZpcmVzdG9yZSBxdWVyeSBmYWlscy5cbiAgICovXG4gIGFzeW5jIGZldGNoV29ya291dFN1bW1hcmllcyhkYXRlOiBEYXRlKTogUHJvbWlzZTxXb3Jrb3V0U3VtbWFyeVtdPiB7XG4gICAgY29uc3QgY3VycmVudFVzZXIgPSB1c2VyU2VydmljZS5jdXJyZW50VXNlcjtcbiAgICBpZiAoIWN1cnJlbnRVc2VyPy5pZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGlzIHNpZ25lZCBpbicpO1xuICAgIH1cblxuICAgIC8vIEZvcm1hdCB0aGUgZGF0ZSB0byBtYXRjaCB0aGUgZm9ybWF0IGluIEZpcmVzdG9yZSAoJ01NLWRkLXl5eXknKVxuICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSBmb3JtYXQoZGF0ZSwgJ01NLWRkLXl5eXknKTtcblxuICAgIC8vIFJlZmVyZW5jZSB0byB0aGUgdXNlcidzIHdvcmtvdXRTdW1tYXJpZXMgc3ViY29sbGVjdGlvblxuICAgIGNvbnN0IHN1bW1hcmllc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycsIGN1cnJlbnRVc2VyLmlkLCAnd29ya291dFN1bW1hcmllcycpO1xuXG4gICAgLy8gQ3JlYXRlIGEgcXVlcnkgdG8gZmlsdGVyIGRvY3VtZW50cyBieSB0aGUgc3BlY2lmaWVkIGRhdGVcbiAgICBjb25zdCBxID0gcXVlcnkoc3VtbWFyaWVzUmVmLCB3aGVyZSgnZGF0ZScsICc9PScsIGZvcm1hdHRlZERhdGUpKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG5cbiAgICAgIC8vIE1hcCB0aGUgZG9jdW1lbnRzIHRvIGFuIGFycmF5IG9mIFdvcmtvdXRTdW1tYXJ5IG9iamVjdHNcbiAgICAgIHJldHVybiBzbmFwc2hvdC5kb2NzLm1hcCgoZG9jOiBEb2N1bWVudERhdGEpID0+ICh7XG4gICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgIC4uLmRvYy5kYXRhKCksXG4gICAgICB9KSkgYXMgV29ya291dFN1bW1hcnlbXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZmlyZXN0b3JlRXJyb3IgPSBlcnJvciBhcyBGaXJlc3RvcmVFcnJvcjtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHdvcmtvdXQgc3VtbWFyaWVzOicsIGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZldGNoQWxsV29ya291dFN1bW1hcmllcygpOiBQcm9taXNlPFdvcmtvdXRTdW1tYXJ5W10+IHtcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IHVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyO1xuICAgIGlmICghY3VycmVudFVzZXI/LmlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgfVxuICBcbiAgICAvLyBSZWZlcmVuY2UgdG8gdGhlIHVzZXIncyB3b3Jrb3V0U3VtbWFyaWVzIHN1YmNvbGxlY3Rpb25cbiAgICBjb25zdCBzdW1tYXJpZXNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCBjdXJyZW50VXNlci5pZCwgJ3dvcmtvdXRTdW1tYXJ5Jyk7XG4gIFxuICAgIC8vIFF1ZXJ5IHRvIHJldHJpZXZlIGFsbCB3b3Jrb3V0IHN1bW1hcmllcywgc29ydGVkIGJ5IGBjcmVhdGVkQXRgIGluIGFzY2VuZGluZyBvcmRlclxuICAgIGNvbnN0IHEgPSBxdWVyeShzdW1tYXJpZXNSZWYsIG9yZGVyQnkoJ2NyZWF0ZWRBdCcsICdhc2MnKSk7IC8vIEFkanVzdCBmaWVsZCBuYW1lIGJhc2VkIG9uIHlvdXIgc2NoZW1hXG4gIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gIFxuICAgICAgLy8gTWFwIHRoZSBkb2N1bWVudHMgdG8gYW4gYXJyYXkgb2YgV29ya291dFN1bW1hcnkgb2JqZWN0c1xuICAgICAgcmV0dXJuIHNuYXBzaG90LmRvY3MubWFwKChkb2M6IERvY3VtZW50RGF0YSkgPT4gKHtcbiAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgLi4uZG9jLmRhdGEoKSxcbiAgICAgIH0pKSBhcyBXb3Jrb3V0U3VtbWFyeVtdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBmaXJlc3RvcmVFcnJvciA9IGVycm9yIGFzIEZpcmVzdG9yZUVycm9yO1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYWxsIHdvcmtvdXQgc3VtbWFyaWVzOicsIGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gKiBGZXRjaCB1c2VyIGNoYWxsZW5nZXMgYnkgdXNlcklkLlxuICogQHBhcmFtIHVzZXJJZCBUaGUgSUQgb2YgdGhlIHVzZXIgdG8gZmV0Y2ggY2hhbGxlbmdlcyBmb3IuXG4gKiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIHRvIGFuIGFycmF5IG9mIHVzZXIgY2hhbGxlbmdlcy5cbiAqIEB0aHJvd3MgSWYgdGhlIEZpcmVzdG9yZSBxdWVyeSBmYWlscy5cbiAqL1xuYXN5bmMgZmV0Y2hVc2VyQ2hhbGxlbmdlc0J5VXNlcklkKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyQ2hhbGxlbmdlW10+IHtcbiAgY29uc3QgdXNlckNoYWxsZW5nZXNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlci1jaGFsbGVuZ2UnKTtcbiAgY29uc3QgcSA9IHF1ZXJ5KHVzZXJDaGFsbGVuZ2VzUmVmLCB3aGVyZSgndXNlcklkJywgJz09JywgdXNlcklkKSk7XG5cbiAgdHJ5IHtcbiAgICAvLyBjb25zb2xlLmxvZyhgRmV0Y2hpbmcgY2hhbGxlbmdlcyBmb3IgdXNlciBJRDogJHt1c2VySWR9YCk7XG5cbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG5cbiAgICAvLyBjb25zb2xlLmxvZyhgVG90YWwgY2hhbGxlbmdlcyBmZXRjaGVkOiAke3NuYXBzaG90LmRvY3MubGVuZ3RofWApO1xuXG4gICAgY29uc3QgdXNlckNoYWxsZW5nZXMgPSBzbmFwc2hvdC5kb2NzLm1hcCgoZG9jOiBEb2N1bWVudERhdGEpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgLy8gY29uc29sZS5sb2coYFByb2Nlc3NpbmcgY2hhbGxlbmdlIHdpdGggSUQ6ICR7ZG9jLmlkfWAsIGRhdGEpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kYXRhLFxuICAgICAgICBjaGFsbGVuZ2U6IGRhdGEuY2hhbGxlbmdlXG4gICAgICAgICAgPyBuZXcgQ2hhbGxlbmdlKHtcbiAgICAgICAgICAgICAgaWQ6IGRhdGEuY2hhbGxlbmdlLmlkLFxuICAgICAgICAgICAgICB0aXRsZTogZGF0YS5jaGFsbGVuZ2UudGl0bGUsXG4gICAgICAgICAgICAgIHN1YnRpdGxlOiBkYXRhLmNoYWxsZW5nZS5zdWJ0aXRsZSxcbiAgICAgICAgICAgICAgcGFydGljaXBhbnRzOiBkYXRhLmNoYWxsZW5nZS5wYXJ0aWNpcGFudHMgfHwgW10sXG4gICAgICAgICAgICAgIHN0YXR1czogZGF0YS5jaGFsbGVuZ2Uuc3RhdHVzIGFzIENoYWxsZW5nZVN0YXR1cyxcbiAgICAgICAgICAgICAgc3RhcnREYXRlOiBkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgZW5kRGF0ZTogZGF0YS5jaGFsbGVuZ2UuZW5kRGF0ZSA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLmVuZERhdGUpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgY3JlYXRlZEF0OiBkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgdXBkYXRlZEF0OiBkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgaW50cm9WaWRlb3M6IChkYXRhLmNoYWxsZW5nZS5pbnRyb1ZpZGVvcyB8fCBbXSkubWFwKCh2OiBhbnkpID0+IFxuICAgICAgICAgICAgICAgIG5ldyBJbnRyb1ZpZGVvKHtcbiAgICAgICAgICAgICAgICAgIGlkOiB2LmlkLFxuICAgICAgICAgICAgICAgICAgdXNlcklkOiB2LnVzZXJJZCxcbiAgICAgICAgICAgICAgICAgIHZpZGVvVXJsOiB2LnZpZGVvVXJsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0VGltZXN0YW1wKGRhdGEuY3JlYXRlZEF0KSxcbiAgICAgICAgdXBkYXRlZEF0OiBjb252ZXJ0VGltZXN0YW1wKGRhdGEudXBkYXRlZEF0KSxcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvLyBjb25zb2xlLmxvZygnQWxsIGNoYWxsZW5nZXMgYWZ0ZXIgcHJvY2Vzc2luZzonLCBKU09OLnN0cmluZ2lmeSh1c2VyQ2hhbGxlbmdlcywgbnVsbCwgMikpO1xuXG4gICAgcmV0dXJuIHVzZXJDaGFsbGVuZ2VzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgY2hhbGxlbmdlcyBieSB1c2VySWQ6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmFzeW5jIGZldGNoQ29sbGVjdGlvbldpdGhTd2VhdExpc3RzKGNvbGxlY3Rpb25JZDogc3RyaW5nKTogUHJvbWlzZTx7IGNvbGxlY3Rpb246IGFueSwgc3dlYXRMaXN0czogV29ya291dFtdIH0+IHtcbiAgdHJ5IHtcbiAgICAvLyBGZXRjaCB0aGUgY29sbGVjdGlvblxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBhd2FpdCB0aGlzLmdldENvbGxlY3Rpb25CeUlkKGNvbGxlY3Rpb25JZCk7XG5cbiAgICAvLyBGZXRjaCBzd2VhdCBsaXN0cyAod29ya291dHMpXG4gICAgY29uc3Qgc3dlYXRMaXN0czogV29ya291dFtdID0gW107XG4gICAgXG4gICAgLy8gQXNzdW1pbmcgY29sbGVjdGlvbiBoYXMgc3dlYXRsaXN0SWRzIHdpdGggYXV0aG9yIGFuZCB3b3Jrb3V0IElEc1xuICAgIGZvciAoY29uc3Qgc3dlYXRsaXN0SWRlbnRpZmllciBvZiBjb2xsZWN0aW9uLnN3ZWF0bGlzdElkcyB8fCBbXSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgW3dvcmtvdXRdID0gYXdhaXQgdGhpcy5mZXRjaFNhdmVkV29ya291dChcbiAgICAgICAgICBzd2VhdGxpc3RJZGVudGlmaWVyLnN3ZWF0bGlzdEF1dGhvcklkLCBcbiAgICAgICAgICBzd2VhdGxpc3RJZGVudGlmaWVyLmlkXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAod29ya291dCkge1xuICAgICAgICAgIHN3ZWF0TGlzdHMucHVzaCh3b3Jrb3V0KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmV0Y2hpbmcgd29ya291dCAke3N3ZWF0bGlzdElkZW50aWZpZXIuaWR9OmAsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBjb2xsZWN0aW9uLCBzd2VhdExpc3RzIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY29sbGVjdGlvbiB3aXRoIHN3ZWF0IGxpc3RzOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5hc3luYyBmZXRjaFNhdmVkV29ya291dCh1c2VySWQ6IHN0cmluZywgd29ya291dElkOiBzdHJpbmcpOiBQcm9taXNlPFtXb3Jrb3V0IHwgbnVsbCwgRXhlcmNpc2VMb2dbXSB8IG51bGxdPiB7XG4gIHRyeSB7XG4gICAgLy8gRmV0Y2ggdGhlIHdvcmtvdXQgZG9jdW1lbnRcbiAgICBjb25zdCB3b3Jrb3V0UmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VySWQsICdNeUNyZWF0ZWRXb3Jrb3V0cycsIHdvcmtvdXRJZCk7XG4gICAgY29uc3Qgd29ya291dFNuYXAgPSBhd2FpdCBnZXREb2Mod29ya291dFJlZik7XG5cbiAgICBpZiAoIXdvcmtvdXRTbmFwLmV4aXN0cygpKSB7XG4gICAgICByZXR1cm4gW251bGwsIG51bGxdO1xuICAgIH1cblxuICAgIC8vIEdldCBleGVyY2lzZXMgd2l0aCB2aWRlb3MgbWFwcGVkXG4gICAgY29uc3QgZXhlcmNpc2VzV2l0aFZpZGVvcyA9IGF3YWl0IHRoaXMuZmV0Y2hBbmRNYXBFeGVyY2lzZXNXaXRoVmlkZW9zKCk7XG4gICAgY29uc3Qgd29ya291dERhdGEgPSB3b3Jrb3V0U25hcC5kYXRhKCk7XG5cbiAgICAvLyBNYXAgdGhlIGV4ZXJjaXNlcyBpbiB0aGUgd29ya291dCB0byB0aGUgZnVsbCBleGVyY2lzZSBvYmplY3RzIHdpdGggdmlkZW9zXG4gICAgY29uc3QgbWFwcGVkRXhlcmNpc2VzID0gKHdvcmtvdXREYXRhLmV4ZXJjaXNlcyB8fCBbXSkubWFwKChleGVyY2lzZVJlZjogYW55KSA9PiB7XG4gICAgICBjb25zdCBmdWxsRXhlcmNpc2UgPSBleGVyY2lzZXNXaXRoVmlkZW9zLmZpbmQoZXggPT4gZXgubmFtZSA9PT0gZXhlcmNpc2VSZWYuZXhlcmNpc2UubmFtZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5leGVyY2lzZVJlZixcbiAgICAgICAgZXhlcmNpc2U6IGZ1bGxFeGVyY2lzZSB8fCBleGVyY2lzZVJlZi5leGVyY2lzZVxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIHdvcmtvdXREYXRhLmV4ZXJjaXNlcyA9IG1hcHBlZEV4ZXJjaXNlcztcbiAgICBjb25zdCB3b3Jrb3V0ID0gbmV3IFdvcmtvdXQoe1xuICAgICAgaWQ6IHdvcmtvdXREYXRhLmlkLFxuICAgICAgcm91bmRXb3Jrb3V0SWQ6IHdvcmtvdXREYXRhLnJvdW5kV29ya291dElkLFxuICAgICAgY29sbGVjdGlvbklkOiB3b3Jrb3V0RGF0YS5jb2xsZWN0aW9uSWQsXG4gICAgICBleGVyY2lzZXM6IHdvcmtvdXREYXRhLmV4ZXJjaXNlcyxcbiAgICAgIGNoYWxsZW5nZTogd29ya291dERhdGEuY2hhbGxlbmdlLFxuICAgICAgbG9nczogd29ya291dERhdGEubG9ncyxcbiAgICAgIHRpdGxlOiB3b3Jrb3V0RGF0YS50aXRsZSxcbiAgICAgIGRlc2NyaXB0aW9uOiB3b3Jrb3V0RGF0YS5kZXNjcmlwdGlvbixcbiAgICAgIGR1cmF0aW9uOiB3b3Jrb3V0RGF0YS5kdXJhdGlvbixcbiAgICAgIHdvcmtvdXRSYXRpbmc6IHdvcmtvdXREYXRhLndvcmtvdXRSYXRpbmcsXG4gICAgICB1c2VBdXRob3JDb250ZW50OiB3b3Jrb3V0RGF0YS51c2VBdXRob3JDb250ZW50LFxuICAgICAgaXNDb21wbGV0ZWQ6IHdvcmtvdXREYXRhLmlzQ29tcGxldGVkLFxuICAgICAgd29ya291dFN0YXR1czogd29ya291dERhdGEud29ya291dFN0YXR1cyxcbiAgICAgIHN0YXJ0VGltZTogd29ya291dERhdGEuc3RhcnRUaW1lLFxuICAgICAgb3JkZXI6IHdvcmtvdXREYXRhLm9yZGVyLFxuICAgICAgYXV0aG9yOiB3b3Jrb3V0RGF0YS5hdXRob3IsXG4gICAgICBhc3NpZ25lZERhdGU6IHdvcmtvdXREYXRhLmFzc2lnbmVkRGF0ZSxcbiAgICAgIGNyZWF0ZWRBdDogd29ya291dERhdGEuY3JlYXRlZEF0LFxuICAgICAgdXBkYXRlZEF0OiB3b3Jrb3V0RGF0YS51cGRhdGVkQXRcbiAgICB9KTtcblxuICAgIC8vIEZldGNoIGxvZ3NcbiAgICBjb25zdCBsb2dzUmVmID0gY29sbGVjdGlvbih3b3Jrb3V0UmVmLCAnbG9ncycpO1xuICAgIGNvbnN0IGxvZ3NTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MobG9nc1JlZik7XG5cbiAgICBjb25zdCBsb2dzOiBFeGVyY2lzZUxvZ1tdID0gbG9nc1NuYXBzaG90LmRvY3MubWFwKGxvZ0RvYyA9PiB7XG4gICAgICBjb25zdCBsb2dEYXRhID0gbG9nRG9jLmRhdGEoKTtcbiAgICAgIGNvbnN0IGZ1bGxFeGVyY2lzZSA9IGV4ZXJjaXNlc1dpdGhWaWRlb3MuZmluZChleCA9PiBleC5uYW1lID09PSBsb2dEYXRhLmV4ZXJjaXNlLm5hbWUpO1xuICAgICAgXG4gICAgICByZXR1cm4gbmV3IEV4ZXJjaXNlTG9nKHtcbiAgICAgICAgaWQ6IGxvZ0RvYy5pZCxcbiAgICAgICAgd29ya291dElkOiB3b3Jrb3V0SWQsXG4gICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICBleGVyY2lzZTogZnVsbEV4ZXJjaXNlIHx8IGxvZ0RhdGEuZXhlcmNpc2UsXG4gICAgICAgIGxvZ3M6IGxvZ0RhdGEubG9nIHx8IFtdLFxuICAgICAgICBmZWVkYmFjazogbG9nRGF0YS5mZWVkYmFjayB8fCAnJyxcbiAgICAgICAgbm90ZTogbG9nRGF0YS5ub3RlIHx8ICcnLFxuICAgICAgICByZWNvbW1lbmRlZFdlaWdodDogbG9nRGF0YS5yZWNvbW1lbmRlZFdlaWdodCxcbiAgICAgICAgaXNTcGxpdDogbG9nRGF0YS5pc1NwbGl0IHx8IGZhbHNlLFxuICAgICAgICBpc0JvZHlXZWlnaHQ6IGxvZ0RhdGEuaXNCb2R5V2VpZ2h0IHx8IGZhbHNlLFxuICAgICAgICBsb2dTdWJtaXR0ZWQ6IGxvZ0RhdGEubG9nU3VibWl0dGVkIHx8IGZhbHNlLFxuICAgICAgICBsb2dJc0VkaXRpbmc6IGxvZ0RhdGEubG9nSXNFZGl0aW5nIHx8IGZhbHNlLFxuICAgICAgICBpc0NvbXBsZXRlZDogbG9nRGF0YS5pc0NvbXBsZXRlZCB8fCBmYWxzZSxcbiAgICAgICAgY29tcGxldGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAobG9nRGF0YS5jb21wbGV0ZWRBdCksXG4gICAgICAgIGNyZWF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChsb2dEYXRhLmNyZWF0ZWRBdCksXG4gICAgICAgIHVwZGF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChsb2dEYXRhLnVwZGF0ZWRBdClcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgd29ya291dC5sb2dzID0gbG9ncztcbiAgICByZXR1cm4gW3dvcmtvdXQsIGxvZ3NdO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHNhdmVkIHdvcmtvdXQ6JywgZXJyb3IpO1xuICAgIHJldHVybiBbbnVsbCwgbnVsbF07XG4gIH1cbn1cblxuLyoqXG4gKiBGZXRjaCB1c2VyIGNoYWxsZW5nZXMgYnkgY2hhbGxlbmdlSWQuXG4gKiBAcGFyYW0gY2hhbGxlbmdlSWQgVGhlIElEIG9mIHRoZSBjaGFsbGVuZ2UgdG8gZmV0Y2ggYXNzb2NpYXRlZCB1c2VyIGNoYWxsZW5nZXMgZm9yLlxuICogQHJldHVybnMgQSBwcm9taXNlIHJlc29sdmluZyB0byBhbiBhcnJheSBvZiB1c2VyIGNoYWxsZW5nZXMuXG4gKiBAdGhyb3dzIElmIHRoZSBGaXJlc3RvcmUgcXVlcnkgZmFpbHMuXG4gKi9cbmFzeW5jIGZldGNoVXNlckNoYWxsZW5nZXNCeUNoYWxsZW5nZUlkKGNoYWxsZW5nZUlkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXJDaGFsbGVuZ2VbXT4ge1xuICBjb25zdCB1c2VyQ2hhbGxlbmdlc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VyLWNoYWxsZW5nZScpO1xuICBjb25zdCBxID0gcXVlcnkodXNlckNoYWxsZW5nZXNSZWYsIHdoZXJlKCdjaGFsbGVuZ2VJZCcsICc9PScsIGNoYWxsZW5nZUlkKSk7XG5cbiAgdHJ5IHtcbiAgICAvLyBjb25zb2xlLmxvZyhgRmV0Y2hpbmcgdXNlciBjaGFsbGVuZ2VzIGZvciBjaGFsbGVuZ2UgSUQ6ICR7Y2hhbGxlbmdlSWR9YCk7XG5cbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG5cbiAgICAvLyBjb25zb2xlLmxvZyhgVG90YWwgdXNlciBjaGFsbGVuZ2VzIGZldGNoZWQ6ICR7c25hcHNob3QuZG9jcy5sZW5ndGh9YCk7XG5cbiAgICBjb25zdCB1c2VyQ2hhbGxlbmdlcyA9IHNuYXBzaG90LmRvY3MubWFwKChkb2M6IERvY3VtZW50RGF0YSkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhgUHJvY2Vzc2luZyB1c2VyIGNoYWxsZW5nZSB3aXRoIElEOiAke2RvYy5pZH1gLCBkYXRhKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgY2hhbGxlbmdlOiBkYXRhLmNoYWxsZW5nZVxuICAgICAgICAgID8gbmV3IENoYWxsZW5nZSh7XG4gICAgICAgICAgICAgIGlkOiBkYXRhLmNoYWxsZW5nZS5pZCxcbiAgICAgICAgICAgICAgdGl0bGU6IGRhdGEuY2hhbGxlbmdlLnRpdGxlLFxuICAgICAgICAgICAgICBzdWJ0aXRsZTogZGF0YS5jaGFsbGVuZ2Uuc3VidGl0bGUsXG4gICAgICAgICAgICAgIHBhcnRpY2lwYW50czogZGF0YS5jaGFsbGVuZ2UucGFydGljaXBhbnRzIHx8IFtdLFxuICAgICAgICAgICAgICBzdGF0dXM6IGRhdGEuY2hhbGxlbmdlLnN0YXR1cyBhcyBDaGFsbGVuZ2VTdGF0dXMsXG4gICAgICAgICAgICAgIHN0YXJ0RGF0ZTogZGF0YS5jaGFsbGVuZ2Uuc3RhcnREYXRlID8gbmV3IERhdGUoZGF0YS5jaGFsbGVuZ2Uuc3RhcnREYXRlKSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgIGVuZERhdGU6IGRhdGEuY2hhbGxlbmdlLmVuZERhdGUgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS5lbmREYXRlKSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgIGNyZWF0ZWRBdDogZGF0YS5jaGFsbGVuZ2UuY3JlYXRlZEF0ID8gbmV3IERhdGUoZGF0YS5jaGFsbGVuZ2UuY3JlYXRlZEF0KSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgIHVwZGF0ZWRBdDogZGF0YS5jaGFsbGVuZ2UudXBkYXRlZEF0ID8gbmV3IERhdGUoZGF0YS5jaGFsbGVuZ2UudXBkYXRlZEF0KSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgIGludHJvVmlkZW9zOiAoZGF0YS5jaGFsbGVuZ2UuaW50cm9WaWRlb3MgfHwgW10pLm1hcCgodjogYW55KSA9PiBcbiAgICAgICAgICAgICAgICBuZXcgSW50cm9WaWRlbyh7XG4gICAgICAgICAgICAgICAgICBpZDogdi5pZCxcbiAgICAgICAgICAgICAgICAgIHVzZXJJZDogdi51c2VySWQsXG4gICAgICAgICAgICAgICAgICB2aWRlb1VybDogdi52aWRlb1VybFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgIGNyZWF0ZWRBdDogY29udmVydFRpbWVzdGFtcChkYXRhLmNyZWF0ZWRBdCksXG4gICAgICAgIHVwZGF0ZWRBdDogY29udmVydFRpbWVzdGFtcChkYXRhLnVwZGF0ZWRBdCksXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gY29uc29sZS5sb2coJ0FsbCB1c2VyIGNoYWxsZW5nZXMgYWZ0ZXIgcHJvY2Vzc2luZzonLCBKU09OLnN0cmluZ2lmeSh1c2VyQ2hhbGxlbmdlcywgbnVsbCwgMikpO1xuXG4gICAgcmV0dXJuIHVzZXJDaGFsbGVuZ2VzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgY2hhbGxlbmdlcyBieSBjaGFsbGVuZ2VJZDonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuYXN5bmMgZ2V0Q29sbGVjdGlvbkJ5SWQoaWQ6IHN0cmluZyk6IFByb21pc2U8U3dlYXRsaXN0Q29sbGVjdGlvbj4ge1xuICBjb25zb2xlLmxvZyhcIkZldGNoaW5nIGNvbGxlY3Rpb24gd2l0aCBpZDpcIiwgaWQpO1xuICB0cnkge1xuICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhkYiwgXCJzd2VhdGxpc3QtY29sbGVjdGlvblwiLCBpZCk7XG4gICAgY29uc3QgZG9jU25hcCA9IGF3YWl0IGdldERvYyhkb2NSZWYpO1xuICAgIGlmIChkb2NTbmFwLmV4aXN0cygpKSB7XG4gICAgICByZXR1cm4gbmV3IFN3ZWF0bGlzdENvbGxlY3Rpb24oe1xuICAgICAgICBpZDogZG9jU25hcC5pZCxcbiAgICAgICAgLi4uZG9jU25hcC5kYXRhKClcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb2xsZWN0aW9uIG5vdCBmb3VuZFwiKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdldHRpbmcgY29sbGVjdGlvbiBieSBJRDpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbiAgXG4gICAgLyoqXG4gICAqIEZldGNoIHVzZXIgY2hhbGxlbmdlcyBieSB1c2VySWQgYW5kIGZpbHRlciBmb3IgYWN0aXZlIGNoYWxsZW5nZXMuXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSByZXNvbHZpbmcgdG8gYW4gYXJyYXkgb2YgYWN0aXZlIGNoYWxsZW5nZXMuXG4gICAqIEB0aHJvd3MgSWYgbm8gdXNlciBpcyBzaWduZWQgaW4gb3IgaWYgdGhlIEZpcmVzdG9yZSBxdWVyeSBmYWlscy5cbiAgICovXG4gICAgYXN5bmMgZmV0Y2hBY3RpdmVDaGFsbGVuZ2VzKCk6IFByb21pc2U8VXNlckNoYWxsZW5nZVtdPiB7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGlzIHNpZ25lZCBpbicpO1xuICAgICAgfVxuICAgIFxuICAgICAgY29uc3QgdXNlckNoYWxsZW5nZXNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlci1jaGFsbGVuZ2UnKTtcbiAgICAgIGNvbnN0IHEgPSBxdWVyeSh1c2VyQ2hhbGxlbmdlc1JlZiwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIGN1cnJlbnRVc2VyLmlkKSk7XG4gICAgXG4gICAgICB0cnkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhgRmV0Y2hpbmcgY2hhbGxlbmdlcyBmb3IgdXNlciBJRDogJHtjdXJyZW50VXNlci5pZH1gKTtcbiAgICBcbiAgICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgVG90YWwgY2hhbGxlbmdlcyBmZXRjaGVkOiAke3NuYXBzaG90LmRvY3MubGVuZ3RofWApO1xuICAgIFxuICAgICAgICBjb25zdCBhbGxDaGFsbGVuZ2VzID0gc25hcHNob3QuZG9jcy5tYXAoKGRvYzogRG9jdW1lbnREYXRhKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coYFByb2Nlc3NpbmcgY2hhbGxlbmdlIHdpdGggSUQ6ICR7ZG9jLmlkfWAsIGRhdGEpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFVzZSB0aGUgQ2hhbGxlbmdlIGNvbnN0cnVjdG9yIHRvIHBhcnNlIHRoZSBjaGFsbGVuZ2UgZGF0YVxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiZGF0ZSBiZWZvcmUgZm9ybWF0OiBcIiArIGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5jaGFsbGVuZ2Uuc3RhcnREYXRlKSk7XG5cbiAgICAgICAgICBjb25zdCBjaGFsbGVuZ2UgPSBkYXRhLmNoYWxsZW5nZVxuICAgICAgICAgICAgPyBuZXcgQ2hhbGxlbmdlKHtcbiAgICAgICAgICAgICAgICBpZDogZGF0YS5jaGFsbGVuZ2UuaWQsXG4gICAgICAgICAgICAgICAgdGl0bGU6IGRhdGEuY2hhbGxlbmdlLnRpdGxlLFxuICAgICAgICAgICAgICAgIHN1YnRpdGxlOiBkYXRhLmNoYWxsZW5nZS5zdWJ0aXRsZSxcbiAgICAgICAgICAgICAgICBwYXJ0aWNpcGFudHM6IGRhdGEuY2hhbGxlbmdlLnBhcnRpY2lwYW50cyB8fCBbXSxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IGRhdGEuY2hhbGxlbmdlLnN0YXR1cyBhcyBDaGFsbGVuZ2VTdGF0dXMsXG4gICAgICAgICAgICAgICAgc3RhcnREYXRlOiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY2hhbGxlbmdlLnN0YXJ0RGF0ZSksXG4gICAgICAgICAgICAgICAgZW5kRGF0ZTogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNoYWxsZW5nZS5lbmREYXRlKSxcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5jaGFsbGVuZ2UuY3JlYXRlZEF0KSxcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5jaGFsbGVuZ2UudXBkYXRlZEF0KSxcbiAgICAgICAgICAgICAgICBpbnRyb1ZpZGVvczogKGRhdGEuY2hhbGxlbmdlLmludHJvVmlkZW9zIHx8IFtdKS5tYXAoKHY6IGFueSkgPT4gXG4gICAgICAgICAgICAgICAgICBuZXcgSW50cm9WaWRlbyh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiB2LmlkLFxuICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHYudXNlcklkLFxuICAgICAgICAgICAgICAgICAgICB2aWRlb1VybDogdi52aWRlb1VybFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICAgIGNoYWxsZW5nZSxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNyZWF0ZWRBdCksXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS51cGRhdGVkQXQpLFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZygnQWxsIGNoYWxsZW5nZXMgYWZ0ZXIgcHJvY2Vzc2luZzonLCBKU09OLnN0cmluZ2lmeShhbGxDaGFsbGVuZ2VzLCBudWxsLCAyKSk7XG4gICAgXG4gICAgICAgIC8vIEZpbHRlciBmb3IgYWN0aXZlIGNoYWxsZW5nZXMgKGVuZERhdGUgPiBjdXJyZW50IGRhdGUpXG4gICAgICAgIGNvbnN0IGFjdGl2ZUNoYWxsZW5nZXMgPSBhbGxDaGFsbGVuZ2VzLmZpbHRlcih1c2VyQ2hhbGxlbmdlID0+IHtcbiAgICAgICAgICBjb25zdCBlbmREYXRlID0gdXNlckNoYWxsZW5nZS5jaGFsbGVuZ2U/LmVuZERhdGU7XG4gICAgXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXG4gICAgICAgICAgLy8gICBgRXZhbHVhdGluZyBjaGFsbGVuZ2UgSUQ6ICR7dXNlckNoYWxsZW5nZS5pZH0sIEVuZCBEYXRlOiAke2VuZERhdGV9LCBDdXJyZW50IERhdGU6ICR7bmV3IERhdGUoKX1gXG4gICAgICAgICAgLy8gKTtcbiAgICBcbiAgICAgICAgICByZXR1cm4gZW5kRGF0ZSAmJiBlbmREYXRlID4gbmV3IERhdGUoKTtcbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBUb3RhbCBhY3RpdmUgY2hhbGxlbmdlczogJHthY3RpdmVDaGFsbGVuZ2VzLmxlbmd0aH1gLCBhY3RpdmVDaGFsbGVuZ2VzKTtcbiAgICBcbiAgICAgICAgcmV0dXJuIGFjdGl2ZUNoYWxsZW5nZXM7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhY3RpdmUgY2hhbGxlbmdlczonLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH1cbiAgICBcblxuICAvKipcbiAgICogRmV0Y2ggdXNlciBjaGFsbGVuZ2VzIGJ5IHVzZXJJZC5cbiAgICogQHJldHVybnMgQSBwcm9taXNlIHJlc29sdmluZyB0byBhbiBhcnJheSBvZiBjaGFsbGVuZ2VzLlxuICAgKiBAdGhyb3dzIElmIG5vIHVzZXIgaXMgc2lnbmVkIGluIG9yIGlmIHRoZSBGaXJlc3RvcmUgcXVlcnkgZmFpbHMuXG4gICAqL1xuICBhc3luYyBmZXRjaFVzZXJDaGFsbGVuZ2VzKCk6IFByb21pc2U8VXNlckNoYWxsZW5nZVtdPiB7XG4gICAgY29uc3QgY3VycmVudFVzZXIgPSB1c2VyU2VydmljZS5jdXJyZW50VXNlcjtcbiAgICBpZiAoIWN1cnJlbnRVc2VyPy5pZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGlzIHNpZ25lZCBpbicpO1xuICAgIH1cblxuICAgIC8vIFJlZmVyZW5jZSB0byB0aGUgdXNlci1jaGFsbGVuZ2UgY29sbGVjdGlvblxuICAgIGNvbnN0IHVzZXJDaGFsbGVuZ2VzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXItY2hhbGxlbmdlJyk7XG5cbiAgICAvLyBRdWVyeSBjaGFsbGVuZ2VzIHdoZXJlIHVzZXJJZCBtYXRjaGVzIHRoZSBjdXJyZW50IHVzZXIncyBJRFxuICAgIGNvbnN0IHEgPSBxdWVyeSh1c2VyQ2hhbGxlbmdlc1JlZiwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIGN1cnJlbnRVc2VyLmlkKSk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuXG4gICAgICAvLyBNYXAgZG9jdW1lbnRzIHRvIGFuIGFycmF5IG9mIENoYWxsZW5nZSBvYmplY3RzXG4gICAgICByZXR1cm4gc25hcHNob3QuZG9jcy5tYXAoKGRvYzogRG9jdW1lbnREYXRhKSA9PiAoe1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kb2MuZGF0YSgpLFxuICAgICAgfSkpIGFzIFVzZXJDaGFsbGVuZ2VbXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBjaGFsbGVuZ2VzOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIHVzZXIgY2hhbGxlbmdlcycpO1xuICAgIH1cbiAgfVxuICBcbiAgLy91cGRhdGUgdGhlIHdvcmtvdXQgc3VtbWFyeSxcbiAgYXN5bmMgdXBkYXRlV29ya291dFN1bW1hcnkoe1xuICAgIHVzZXJJZCxcbiAgICB3b3Jrb3V0SWQsXG4gICAgc3VtbWFyeVxuICB9OiB7XG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgd29ya291dElkOiBzdHJpbmcsXG4gICAgc3VtbWFyeTogV29ya291dFN1bW1hcnlcbiAgfSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdXNlcklkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgSUQgcHJvdmlkZWQnKTtcbiAgICB9XG4gIFxuICAgIHRyeSB7XG4gICAgICAvLyBDcmVhdGUgYSByZWZlcmVuY2UgdG8gdGhlIGNvbGxlY3Rpb25cbiAgICAgIGNvbnN0IHN1bW1hcnlSZWYgPSBkb2MoZGIsICd1c2VycycsIHVzZXJJZCwgJ3dvcmtvdXRTdW1tYXJ5Jywgc3VtbWFyeS5pZCk7XG4gIFxuICAgICAgLy8gQ29udmVydCBzdW1tYXJ5IHRvIGEgcGxhaW4gb2JqZWN0IGZvciBGaXJlc3RvcmVcbiAgICAgIGNvbnN0IHN1bW1hcnlEYXRhID0ge1xuICAgICAgICBpZDogc3VtbWFyeS5pZCxcbiAgICAgICAgd29ya291dElkOiBzdW1tYXJ5LndvcmtvdXRJZCxcbiAgICAgICAgZXhlcmNpc2VzOiBzdW1tYXJ5LmV4ZXJjaXNlcyxcbiAgICAgICAgYm9keVBhcnRzOiBzdW1tYXJ5LmJvZHlQYXJ0cyxcbiAgICAgICAgc2Vjb25kYXJ5Qm9keVBhcnRzOiBzdW1tYXJ5LnNlY29uZGFyeUJvZHlQYXJ0cyxcbiAgICAgICAgd29ya291dFRpdGxlOiBzdW1tYXJ5LndvcmtvdXRUaXRsZSxcbiAgICAgICAgY2Fsb3JpZXNCdXJuZWQ6IHN1bW1hcnkuY2Fsb3JpZXNCdXJuZWQsXG4gICAgICAgIHdvcmtvdXRSYXRpbmc6IHN1bW1hcnkud29ya291dFJhdGluZyxcbiAgICAgICAgZXhlcmNpc2VzQ29tcGxldGVkOiBzdW1tYXJ5LmV4ZXJjaXNlc0NvbXBsZXRlZCxcbiAgICAgICAgYWlJbnNpZ2h0OiBzdW1tYXJ5LmFpSW5zaWdodCxcbiAgICAgICAgcmVjb21tZW5kYXRpb25zOiBzdW1tYXJ5LnJlY29tbWVuZGF0aW9ucyxcbiAgICAgICAgZ2lmVVJMczogc3VtbWFyeS5naWZVUkxzLFxuICAgICAgICByZWNvbW1lbmRlZFdvcms6IHN1bW1hcnkucmVjb21tZW5kZWRXb3JrLFxuICAgICAgICBpc0NvbXBsZXRlZDogc3VtbWFyeS5pc0NvbXBsZXRlZCxcbiAgICAgICAgY3JlYXRlZEF0OiBzdW1tYXJ5LmNyZWF0ZWRBdCxcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICBjb21wbGV0ZWRBdDogc3VtbWFyeS5jb21wbGV0ZWRBdCxcbiAgICAgICAgZHVyYXRpb246IHN1bW1hcnkuZHVyYXRpb25cbiAgICAgIH07XG4gIFxuICAgICAgLy8gU2V0IGRhdGEgd2l0aCBtZXJnZSBlbmFibGVkIChlcXVpdmFsZW50IHRvIFN3aWZ0J3Mgc2V0RGF0YSB3aXRoIG1lcmdlOiB0cnVlKVxuICAgICAgYXdhaXQgc2V0RG9jKHN1bW1hcnlSZWYsIHN1bW1hcnlEYXRhLCB7IG1lcmdlOiB0cnVlIH0pO1xuICBcbiAgICAgIGNvbnNvbGUubG9nKCdXb3Jrb3V0IHN1bW1hcnkgZG9jdW1lbnQgdXBkYXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgd29ya291dCBzdW1tYXJ5OicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVdvcmtvdXRMb2dzKHtcbiAgICB1c2VySWQsXG4gICAgd29ya291dElkLCBcbiAgICBsb2dzXG4gIH06IHtcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICB3b3Jrb3V0SWQ6IHN0cmluZywgXG4gICAgbG9nczogRXhlcmNpc2VMb2dbXVxuICB9KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHdvcmtvdXRSZWYgPSBkb2MoZGIsICd1c2VycycsIHVzZXJJZCwgJ3dvcmtvdXRTZXNzaW9ucycsIHdvcmtvdXRJZCk7XG4gICAgICBjb25zdCBsb2dzUmVmID0gY29sbGVjdGlvbih3b3Jrb3V0UmVmLCAnbG9ncycpO1xuICAgICAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcbiAgICAgIFxuICAgICAgbG9ncy5mb3JFYWNoKGxvZyA9PiB7XG4gICAgICAgIGNvbnN0IGxvZ0RvY1JlZiA9IGRvYyhsb2dzUmVmLCBsb2cuaWQpO1xuICAgICAgICBiYXRjaC51cGRhdGUobG9nRG9jUmVmLCB7XG4gICAgICAgICAgLi4ubG9nLnRvRGljdGlvbmFyeSgpXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gIFxuICAgICAgYXdhaXQgYmF0Y2guY29tbWl0KCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHdvcmtvdXQgbG9nczonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvLyBUaGUgY2FuY2VsV29ya291dCBtZXRob2Qg4oCTIGl0IGRlbGV0ZXMgdGhlIHdvcmtvdXQgc2Vzc2lvbiBhbmQgc3VtbWFyeSAoaWYgYW55KSxcbi8vIGNsZWFucyB1cCB0aGUgbG9jYWwgc3RhdGUsIGFuZCBsb2dzIHRoZSBjYW5jZWxsYXRpb24uXG5hc3luYyBjYW5jZWxXb3Jrb3V0KHdvcmtvdXQ6IFdvcmtvdXQgfCBudWxsLCB3b3Jrb3V0U3VtbWFyeTogV29ya291dFN1bW1hcnkgfCBudWxsKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmICghdXNlclNlcnZpY2UuY3VycmVudFVzZXI/LmlkIHx8ICF3b3Jrb3V0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlciBub3QgYXV0aGVudGljYXRlZC5cIik7XG4gIH1cblxuICB0cnkgeyAgICBcbiAgICAgIGF3YWl0IHRoaXMuZGVsZXRlV29ya291dFNlc3Npb24od29ya291dC5pZCk7XG4gICAgICBpZiAod29ya291dFN1bW1hcnkpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5kZWxldGVXb3Jrb3V0U3VtbWFyeSh3b3Jrb3V0U3VtbWFyeS5pZCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRoaXMuY2xlYW5VcFdvcmtvdXRJblByb2dyZXNzKCk7XG4gICAgICBjb25zb2xlLmxvZyhcIldvcmtvdXQgY2FuY2VsZWQgYW5kIGNsZWFuZWQgdXAgc3VjY2Vzc2Z1bGx5LlwiKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY2FuY2VsaW5nIHdvcmtvdXQ6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuICBcbi8vIERlbGV0ZXMgYSB3b3Jrb3V0IHNlc3Npb24gZG9jdW1lbnQgYW5kIGFsbCBpdHMgc3ViY29sbGVjdGlvbiBcImxvZ3NcIlxuYXN5bmMgZGVsZXRlV29ya291dFNlc3Npb24od29ya291dElkOiBzdHJpbmcgfCBudWxsKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmICghdXNlclNlcnZpY2UuY3VycmVudFVzZXI/LmlkIHx8ICF3b3Jrb3V0SWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2VyIG5vdCBhdXRoZW50aWNhdGVkLlwiKTtcbiAgfVxuICBjb25zdCB1c2VySWQgPSB1c2VyU2VydmljZS5jdXJyZW50VXNlci5pZDtcbiAgY29uc3Qgd29ya291dFJlZiA9IGRvYyhkYiwgXCJ1c2Vyc1wiLCB1c2VySWQsIFwid29ya291dFNlc3Npb25zXCIsIHdvcmtvdXRJZCk7XG4gIFxuICB0cnkge1xuICAgIC8vIERlbGV0ZSBhbGwgbG9ncyBpbiB0aGUgc3ViY29sbGVjdGlvblxuICAgIGNvbnN0IGxvZ3NSZWYgPSBjb2xsZWN0aW9uKHdvcmtvdXRSZWYsIFwibG9nc1wiKTtcbiAgICBjb25zdCBsb2dzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGxvZ3NSZWYpO1xuICAgIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XG4gICAgXG4gICAgbG9nc1NuYXBzaG90LmRvY3MuZm9yRWFjaCgobG9nRG9jKSA9PiB7XG4gICAgICBiYXRjaC5kZWxldGUobG9nRG9jLnJlZik7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gRGVsZXRlIHRoZSBtYWluIHdvcmtvdXQgZG9jdW1lbnRcbiAgICBiYXRjaC5kZWxldGUod29ya291dFJlZik7XG4gICAgXG4gICAgYXdhaXQgYmF0Y2guY29tbWl0KCk7XG4gICAgY29uc29sZS5sb2coXCJXb3Jrb3V0IHNlc3Npb24gYW5kIGxvZ3MgZGVsZXRlZCBzdWNjZXNzZnVsbHkuXCIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZWxldGluZyB3b3Jrb3V0IHNlc3Npb246XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4gIC8vIERlbGV0ZXMgdGhlIHdvcmtvdXQgc3VtbWFyeSBkb2N1bWVudC5cbiAgYXN5bmMgZGVsZXRlV29ya291dFN1bW1hcnkod29ya291dFN1bW1hcnlJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF3b3Jrb3V0U3VtbWFyeUlkIHx8ICF1c2VyU2VydmljZS5jdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN1bW1hcnlSZWYgPSBkb2MoZGIsIFwidXNlcnNcIiwgdXNlclNlcnZpY2UuY3VycmVudFVzZXIuaWQsIFwid29ya291dFN1bW1hcnlcIiwgd29ya291dFN1bW1hcnlJZCk7XG4gICAgICBhd2FpdCBkZWxldGVEb2Moc3VtbWFyeVJlZik7XG4gICAgICBjb25zb2xlLmxvZyhcIldvcmtvdXQgc3VtbWFyeSBkZWxldGVkIHN1Y2Nlc3NmdWxseS5cIik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZWxldGluZyB3b3Jrb3V0IHN1bW1hcnk6XCIsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIENsZWFuIHVwIGxvY2FsIHN0b3JhZ2UgYW5kIGluLW1lbW9yeSB3b3Jrb3V0IHN0YXRlLlxuICAgIGNsZWFuVXBXb3Jrb3V0SW5Qcm9ncmVzcygpOiB2b2lkIHtcbiAgICAgIHN0b3JlLmRpc3BhdGNoKHJlc2V0V29ya291dFN0YXRlKCkpO1xuICAgIH1cbiAgICAgIFxuICBcbiAgLyoqXG4gICAqIEZldGNoIHRoZSB3b3Jrb3V0IHNlc3Npb24gZnJvbSBGaXJlc3RvcmUsIHJldHVybmluZyB7IHdvcmtvdXQsIGxvZ3MgfS5cbiAgICogQ2hlY2tzIGZpcnN0IGZvciBhIFF1ZXVlZFVwIHNlc3Npb24sIHRoZW4gZm9yIEluUHJvZ3Jlc3MuXG4gICAqL1xuICBhc3luYyBmZXRjaEN1cnJlbnRXb3Jrb3V0U2Vzc2lvbih1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8e1xuICAgIHdvcmtvdXQ6IFdvcmtvdXQgfCBudWxsO1xuICAgIGxvZ3M6IEV4ZXJjaXNlTG9nW10gfCBudWxsO1xuICAgfT4ge1xuICAgIGlmICghdXNlcklkKSB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgSUQgcHJvdmlkZWQnKTtcbiAgIFxuICAgIGNvbnN0IGV4ZXJjaXNlU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZXMnKSk7XG4gICAgY29uc3QgdmlkZW9TbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlVmlkZW9zJykpO1xuICAgXG4gICAgY29uc3QgZXhlcmNpc2VWaWRlb3MgPSB2aWRlb1NuYXBzaG90LmRvY3MubWFwKChkb2MpID0+IFxuICAgICAgRXhlcmNpc2VWaWRlby5mcm9tRmlyZWJhc2Uoe1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kb2MuZGF0YSgpXG4gICAgICB9KVxuICAgICk7XG4gICBcbiAgICBjb25zdCBleGVyY2lzZXNXaXRoVmlkZW9zID0gZXhlcmNpc2VTbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4ge1xuICAgICAgY29uc3QgZXhlcmNpc2UgPSBFeGVyY2lzZS5mcm9tRmlyZWJhc2Uoe1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kb2MuZGF0YSgpXG4gICAgICB9KTtcbiAgIFxuICAgICAgY29uc3QgbWF0Y2hpbmdWaWRlb3MgPSBleGVyY2lzZVZpZGVvcy5maWx0ZXIoXG4gICAgICAgICh2aWRlbykgPT4gdmlkZW8uZXhlcmNpc2UudG9Mb3dlckNhc2UoKSA9PT0gZXhlcmNpc2UubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICApO1xuICAgXG4gICAgICByZXR1cm4gbmV3IEV4ZXJjaXNlKHtcbiAgICAgICAgLi4uZXhlcmNpc2UsXG4gICAgICAgIHZpZGVvczogbWF0Y2hpbmdWaWRlb3NcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgXG4gICAgY29uc3Qgd29ya291dFNlc3Npb25zUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgdXNlcklkLCAnd29ya291dFNlc3Npb25zJyk7XG4gICBcbiAgICBsZXQgcSA9IHF1ZXJ5KHdvcmtvdXRTZXNzaW9uc1JlZiwgd2hlcmUoJ3N0YXR1cycsICc9PScsIFdvcmtvdXRTdGF0dXMuUXVldWVkVXApKTtcbiAgICBsZXQgc25hcCA9IGF3YWl0IGdldERvY3MocSk7XG4gICBcbiAgICBpZiAoIXNuYXAuZW1wdHkpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NXb3Jrb3V0U2Vzc2lvbkRvY3VtZW50KHNuYXAuZG9jc1swXSwgZXhlcmNpc2VzV2l0aFZpZGVvcyk7XG4gICAgfVxuICAgXG4gICAgcSA9IHF1ZXJ5KHdvcmtvdXRTZXNzaW9uc1JlZiwgd2hlcmUoJ3N0YXR1cycsICc9PScsIFdvcmtvdXRTdGF0dXMuSW5Qcm9ncmVzcykpO1xuICAgIHNuYXAgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgXG4gICAgaWYgKCFzbmFwLmVtcHR5KSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9jZXNzV29ya291dFNlc3Npb25Eb2N1bWVudChzbmFwLmRvY3NbMF0sIGV4ZXJjaXNlc1dpdGhWaWRlb3MpO1xuICAgIH1cbiAgIFxuICAgIHJldHVybiB7IHdvcmtvdXQ6IG51bGwsIGxvZ3M6IG51bGwgfTtcbiAgIH1cblxuICBwcml2YXRlIGFzeW5jIGZldGNoQW5kTWFwRXhlcmNpc2VzV2l0aFZpZGVvcygpOiBQcm9taXNlPEV4ZXJjaXNlW10+IHtcbiAgICB0cnkge1xuICAgICAgLy8gY29uc29sZS5sb2coJ1N0YXJ0aW5nIGZldGNoQW5kTWFwRXhlcmNpc2VzV2l0aFZpZGVvcycpO1xuICBcbiAgICAgIC8vIDEuIEZldGNoIGFsbCBleGVyY2lzZXMgXG4gICAgICBjb25zdCBleGVyY2lzZVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VzJykpO1xuICAgICAgY29uc3QgZXhlcmNpc2VzID0gZXhlcmNpc2VTbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PiBcbiAgICAgICAgRXhlcmNpc2UuZnJvbUZpcmViYXNlKHtcbiAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgIC4uLmRvYy5kYXRhKClcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhgRmV0Y2hlZCAke2V4ZXJjaXNlcy5sZW5ndGh9IGV4ZXJjaXNlc2ApO1xuICBcbiAgICAgIC8vIDIuIEZldGNoIGFsbCB2aWRlb3NcbiAgICAgIGNvbnN0IHZpZGVvU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZVZpZGVvcycpKTtcbiAgICAgIGNvbnN0IGV4ZXJjaXNlVmlkZW9zID0gdmlkZW9TbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PiBcbiAgICAgICAgRXhlcmNpc2VWaWRlby5mcm9tRmlyZWJhc2Uoe1xuICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgLi4uZG9jLmRhdGEoKVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGBGZXRjaGVkICR7ZXhlcmNpc2VWaWRlb3MubGVuZ3RofSBleGVyY2lzZSB2aWRlb3NgKTtcbiAgXG4gICAgICAvLyAzLiBNYXAgdmlkZW9zIHRvIGV4ZXJjaXNlc1xuICAgICAgY29uc3QgZXhlcmNpc2VzV2l0aFZpZGVvcyA9IGV4ZXJjaXNlcy5tYXAoZXhlcmNpc2UgPT4ge1xuICAgICAgICBjb25zdCBtYXRjaGluZ1ZpZGVvcyA9IGV4ZXJjaXNlVmlkZW9zLmZpbHRlcihcbiAgICAgICAgICAodmlkZW8pID0+IHZpZGVvLmV4ZXJjaXNlLnRvTG93ZXJDYXNlKCkgPT09IGV4ZXJjaXNlLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICApO1xuICAgICAgIFxuICAgICAgICByZXR1cm4gbmV3IEV4ZXJjaXNlKHtcbiAgICAgICAgICAuLi5leGVyY2lzZSxcbiAgICAgICAgICB2aWRlb3M6IG1hdGNoaW5nVmlkZW9zXG4gICAgICAgIH0pO1xuICAgICAgIH0pO1xuICBcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdGaW5pc2hlZCBtYXBwaW5nIGV4ZXJjaXNlcyB3aXRoIHZpZGVvcycpO1xuICAgICAgLy8gY29uc29sZS5sb2coYFRvdGFsIGV4ZXJjaXNlcyB3aXRoIHZpZGVvczogJHtleGVyY2lzZXNXaXRoVmlkZW9zLmxlbmd0aH1gKTtcbiAgICAgICAgXG4gICAgICByZXR1cm4gZXhlcmNpc2VzV2l0aFZpZGVvcztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYW5kIG1hcHBpbmcgZXhlcmNpc2VzIHdpdGggdmlkZW9zOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgdG8gYnVpbGQgdGhlIFdvcmtvdXQgb2JqZWN0ICsgYW55IGxvZ3MgZnJvbSB0aGUgc25hcHNob3QuXG4gICAqL1xuICBhc3luYyBmZXRjaEFsbFdvcmtvdXRTZXNzaW9ucyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8e1xuICAgIHdvcmtvdXQ6IFdvcmtvdXQgfCBudWxsO1xuICAgIGxvZ3M6IEV4ZXJjaXNlTG9nW10gfCBudWxsO1xuICAgfVtdPiB7XG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBJRCBwcm92aWRlZCcpO1xuICAgIH1cbiAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBleGVyY2lzZVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VzJykpO1xuICAgICAgY29uc3QgZXhlcmNpc2VzID0gZXhlcmNpc2VTbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PiBcbiAgICAgICAgRXhlcmNpc2UuZnJvbUZpcmViYXNlKHtcbiAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgIC4uLmRvYy5kYXRhKClcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICBcbiAgICAgIGNvbnN0IHZpZGVvU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZVZpZGVvcycpKTtcbiAgICAgIGNvbnN0IGV4ZXJjaXNlVmlkZW9zID0gdmlkZW9TbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PiBcbiAgICAgICAgRXhlcmNpc2VWaWRlby5mcm9tRmlyZWJhc2Uoe1xuICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgLi4uZG9jLmRhdGEoKVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgIFxuICAgICAgY29uc3QgZXhlcmNpc2VzV2l0aFZpZGVvcyA9IGV4ZXJjaXNlcy5tYXAoZXhlcmNpc2UgPT4ge1xuICAgICAgICBjb25zdCBtYXRjaGluZ1ZpZGVvcyA9IGV4ZXJjaXNlVmlkZW9zLmZpbHRlcihcbiAgICAgICAgICAodmlkZW8pID0+IHZpZGVvLmV4ZXJjaXNlLnRvTG93ZXJDYXNlKCkgPT09IGV4ZXJjaXNlLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICApO1xuICAgXG4gICAgICAgIHJldHVybiBuZXcgRXhlcmNpc2Uoe1xuICAgICAgICAgIC4uLmV4ZXJjaXNlLFxuICAgICAgICAgIHZpZGVvczogbWF0Y2hpbmdWaWRlb3NcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgIFxuICAgICAgY29uc3Qgd29ya291dFNlc3Npb25zUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgdXNlcklkLCAnd29ya291dFNlc3Npb25zJyk7XG4gICAgICBjb25zdCBzbmFwID0gYXdhaXQgZ2V0RG9jcyh3b3Jrb3V0U2Vzc2lvbnNSZWYpO1xuICAgXG4gICAgICBpZiAoc25hcC5lbXB0eSkge1xuICAgICAgICBjb25zb2xlLmxvZygnTm8gd29ya291dCBzZXNzaW9ucyBmb3VuZCBmb3IgdXNlcicpO1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICBcbiAgICAgIGNvbnN0IHNlc3Npb25zID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIHNuYXAuZG9jcy5tYXAoYXN5bmMgKGRvYykgPT4ge1xuICAgICAgICAgIGNvbnN0IHNlc3Npb25EYXRhID0gYXdhaXQgdGhpcy5wcm9jZXNzV29ya291dFNlc3Npb25Eb2N1bWVudChcbiAgICAgICAgICAgIGRvYywgXG4gICAgICAgICAgICBleGVyY2lzZXNXaXRoVmlkZW9zXG4gICAgICAgICAgKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoc2Vzc2lvbkRhdGEubG9ncykge1xuICAgICAgICAgICAgc2Vzc2lvbkRhdGEubG9ncy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IG9yZGVyQSA9IGEub3JkZXIgPz8gMDtcbiAgICAgICAgICAgICAgY29uc3Qgb3JkZXJCID0gYi5vcmRlciA/PyAwO1xuICAgICAgICAgICAgICByZXR1cm4gb3JkZXJBIC0gb3JkZXJCO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgXG4gICAgICAgICAgcmV0dXJuIHNlc3Npb25EYXRhO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgIFxuICAgICAgcmV0dXJuIHNlc3Npb25zO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB3b3Jrb3V0IHNlc3Npb25zOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgIH1cblxuICBhc3luYyB1cGRhdGVDb2xsZWN0aW9uKGNvbGxlY3Rpb246IFN3ZWF0bGlzdENvbGxlY3Rpb24pOiBQcm9taXNlPFN3ZWF0bGlzdENvbGxlY3Rpb24+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29sbFJlZiA9IGZzQ29sbGVjdGlvbihkYiwgXCJzd2VhdGxpc3QtY29sbGVjdGlvblwiKTtcbiAgXG4gICAgICAvLyBJZiBjb2xsZWN0aW9uLmlkIGlzIGVtcHR5LCBnZW5lcmF0ZSBhIG5ldyBkb2MgSUQgYW5kIGFzc2lnbiBpdC5cbiAgICAgIGlmICghY29sbGVjdGlvbi5pZCB8fCBjb2xsZWN0aW9uLmlkLnRyaW0oKSA9PT0gXCJcIikge1xuICAgICAgICBjb25zdCBuZXdEb2NSZWYgPSBkb2MoY29sbFJlZik7XG4gICAgICAgIGNvbGxlY3Rpb24uaWQgPSBuZXdEb2NSZWYuaWQ7XG4gICAgICB9XG4gIFxuICAgICAgLy8gRW5zdXJlIHRoZSBjaGFsbGVuZ2UgaWQgbWF0Y2hlcyB0aGUgY29sbGVjdGlvbiBpZC5cbiAgICAgIGlmIChjb2xsZWN0aW9uLmNoYWxsZW5nZSkge1xuICAgICAgICBjb2xsZWN0aW9uLmNoYWxsZW5nZS5pZCA9IGNvbGxlY3Rpb24uaWQ7XG4gICAgICB9XG4gIFxuICAgICAgLy8gVXBkYXRlIHRoZSB1cGRhdGVkQXQgZmllbGQuXG4gICAgICBjb2xsZWN0aW9uLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCk7XG4gIFxuICAgICAgLy8gU2F2ZSB0aGUgY29sbGVjdGlvbiB0byBGaXJlc3RvcmUuXG4gICAgICBhd2FpdCBzZXREb2MoZG9jKGNvbGxSZWYsIGNvbGxlY3Rpb24uaWQpLCBjb2xsZWN0aW9uLnRvRGljdGlvbmFyeSgpKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiQ29sbGVjdGlvbiB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgIHJldHVybiBjb2xsZWN0aW9uO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgY29sbGVjdGlvbiBkb2N1bWVudDpcIiwgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3Igd2hpbGUgdXBkYXRpbmcgdGhlIGNvbGxlY3Rpb25cIik7XG4gICAgfVxuICB9XG4gIFxuICBwcml2YXRlIGFzeW5jIHByb2Nlc3NXb3Jrb3V0U2Vzc2lvbkRvY3VtZW50KFxuICAgIHdvcmtvdXREb2M6IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdDxEb2N1bWVudERhdGE+LFxuICAgIGV4ZXJjaXNlc1dpdGhWaWRlb3M6IEV4ZXJjaXNlW11cbiAgKTogUHJvbWlzZTx7IHdvcmtvdXQ6IFdvcmtvdXQ7IGxvZ3M6IEV4ZXJjaXNlTG9nW10gfT4ge1xuICAgIGNvbnN0IGRhdGEgPSB3b3Jrb3V0RG9jLmRhdGEoKTtcbiAgXG4gICAgLy8gTWFwIGV4ZXJjaXNlcyB3aXRoIHRoZWlyIGZ1bGwgZGF0YSBhbmQgdmlkZW9zXG4gICAgY29uc3QgbWFwcGVkRXhlcmNpc2VzID0gKGRhdGEuZXhlcmNpc2VzIHx8IFtdKS5tYXAoKGV4ZXJjaXNlUmVmOiBhbnkpID0+IHtcbiAgICAgIC8vIEZpbmQgdGhlIGZ1bGwgZXhlcmNpc2Ugd2l0aCB2aWRlb3NcbiAgICAgIGNvbnN0IGV4ZXJjaXNlTmFtZUxvd2VyID0gZXhlcmNpc2VSZWYuZXhlcmNpc2U/Lm5hbWU/LnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgICAgY29uc3QgZnVsbEV4ZXJjaXNlID0gZXhlcmNpc2VzV2l0aFZpZGVvcy5maW5kKFxuICAgICAgICBleCA9PiBleC5uYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpID09PSBleGVyY2lzZU5hbWVMb3dlclxuICAgICAgKTtcbiAgXG4gICAgICAvLyBJZiBmdWxsIGV4ZXJjaXNlIGZvdW5kLCByZXR1cm4gaXQsIG90aGVyd2lzZSB1c2UgdGhlIG9yaWdpbmFsXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5leGVyY2lzZVJlZixcbiAgICAgICAgZXhlcmNpc2U6IGZ1bGxFeGVyY2lzZSB8fCBleGVyY2lzZVJlZi5leGVyY2lzZVxuICAgICAgfTtcbiAgICB9KTtcbiAgXG4gICAgLy8gQ3JlYXRlIHRoZSB3b3Jrb3V0IHdpdGggbWFwcGVkIGV4ZXJjaXNlc1xuICAgIGNvbnN0IHdvcmtvdXQgPSBuZXcgV29ya291dCh7XG4gICAgICBpZDogd29ya291dERvYy5pZCxcbiAgICAgIHJvdW5kV29ya291dElkOiBkYXRhLnJvdW5kV29ya291dElkIHx8ICcnLFxuICAgICAgZXhlcmNpc2VzOiBtYXBwZWRFeGVyY2lzZXMsXG4gICAgICB0aXRsZTogZGF0YS50aXRsZSB8fCAnJyxcbiAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgZHVyYXRpb246IGRhdGEuZHVyYXRpb24gfHwgMCxcbiAgICAgIHVzZUF1dGhvckNvbnRlbnQ6IGRhdGEudXNlQXV0aG9yQ29udGVudCB8fCBmYWxzZSxcbiAgICAgIGlzQ29tcGxldGVkOiBkYXRhLmlzQ29tcGxldGVkIHx8IGZhbHNlLFxuICAgICAgd29ya291dFN0YXR1czogZGF0YS53b3Jrb3V0U3RhdHVzIHx8IFdvcmtvdXRTdGF0dXMuQXJjaGl2ZWQsXG4gICAgICBhdXRob3I6IGRhdGEuYXV0aG9yIHx8ICcnLFxuICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY3JlYXRlZEF0KSxcbiAgICAgIHVwZGF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLnVwZGF0ZWRBdCksXG4gICAgICBzdGFydFRpbWU6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5zdGFydFRpbWUpLFxuICAgICAgY29sbGVjdGlvbklkOiBkYXRhLmNvbGxlY3Rpb25JZCxcbiAgICAgIGNoYWxsZW5nZTogZGF0YS5jaGFsbGVuZ2UsXG4gICAgICBsb2dzOiAoZGF0YS5sb2dzIHx8IFtdKS5tYXAoKGxvZ0RhdGE6IGFueSkgPT4ge1xuICAgICAgICAvLyBNYXAgbG9ncyB3aXRoIGZ1bGwgZXhlcmNpc2VzXG4gICAgICAgIGNvbnN0IGV4ZXJjaXNlTmFtZUxvd2VyID0gbG9nRGF0YS5leGVyY2lzZT8ubmFtZT8udG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgICAgIGNvbnN0IGZ1bGxFeGVyY2lzZSA9IGV4ZXJjaXNlc1dpdGhWaWRlb3MuZmluZChcbiAgICAgICAgICBleCA9PiBleC5uYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpID09PSBleGVyY2lzZU5hbWVMb3dlclxuICAgICAgICApO1xuICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5sb2dEYXRhLFxuICAgICAgICAgIGV4ZXJjaXNlOiBmdWxsRXhlcmNpc2UgfHwgbG9nRGF0YS5leGVyY2lzZVxuICAgICAgICB9O1xuICAgICAgfSksXG4gICAgICB3b3Jrb3V0UmF0aW5nOiBkYXRhLndvcmtvdXRSYXRpbmcsXG4gICAgICBvcmRlcjogZGF0YS5vcmRlcixcbiAgICAgIHpvbmU6IGRhdGEuem9uZSB8fCBCb2R5Wm9uZS5GdWxsQm9keVxuICAgIH0pO1xuICBcbiAgICBjb25zb2xlLmxvZyhcIlRoZSBXb3Jrb3V0IElEIGlzOiBcIiArIHdvcmtvdXQuaWQpO1xuICAgIC8vIEZldGNoIGxvZ3MgZnJvbSBzdWJjb2xsZWN0aW9uXG4gICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24od29ya291dERvYy5yZWYsICdsb2dzJyk7XG4gICAgY29uc3QgbG9nc1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhsb2dzUmVmKTtcbiAgICBcbiAgICBjb25zdCBsb2dzOiBFeGVyY2lzZUxvZ1tdID0gbG9nc1NuYXBzaG90LmRvY3MubWFwKGxvZ0RvYyA9PiB7XG4gICAgICBjb25zdCBsb2dEYXRhID0gbG9nRG9jLmRhdGEoKTtcbiAgICAgIFxuICAgICAgLy8gRmluZCB0aGUgZnVsbCBleGVyY2lzZSB3aXRoIHZpZGVvc1xuICAgICAgY29uc3QgZXhlcmNpc2VOYW1lTG93ZXIgPSBsb2dEYXRhLmV4ZXJjaXNlPy5uYW1lPy50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICAgIGNvbnN0IGZ1bGxFeGVyY2lzZSA9IGV4ZXJjaXNlc1dpdGhWaWRlb3MuZmluZChcbiAgICAgICAgZXggPT4gZXgubmFtZS50b0xvd2VyQ2FzZSgpLnRyaW0oKSA9PT0gZXhlcmNpc2VOYW1lTG93ZXJcbiAgICAgICk7XG4gIFxuICAgICAgLy8gUHJlcGFyZSBsb2cgZGF0YSB3aXRoIGZ1bGwgZXhlcmNpc2VcbiAgICAgIGNvbnN0IHByZXBhcmVkTG9nRGF0YSA9IHtcbiAgICAgICAgLi4ubG9nRGF0YSxcbiAgICAgICAgaWQ6IGxvZ0RvYy5pZCxcbiAgICAgICAgd29ya291dElkOiB3b3Jrb3V0LmlkLFxuICAgICAgICBleGVyY2lzZTogZnVsbEV4ZXJjaXNlIHx8IGxvZ0RhdGEuZXhlcmNpc2UsXG4gICAgICAgIGNyZWF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChsb2dEYXRhLmNyZWF0ZWRBdCksXG4gICAgICAgIHVwZGF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChsb2dEYXRhLnVwZGF0ZWRBdClcbiAgICAgIH07XG4gIFxuICAgICAgLy8gVXNlIHRoZSBFeGVyY2lzZUxvZyBjb25zdHJ1Y3RvciB0byBlbnN1cmUgcHJvcGVyIG1hcHBpbmdcbiAgICAgIHJldHVybiBuZXcgRXhlcmNpc2VMb2cocHJlcGFyZWRMb2dEYXRhKTtcbiAgICB9KTtcbiAgXG4gICAgcmV0dXJuIHsgd29ya291dCwgbG9ncyB9O1xuICB9XG5cbiAgYXN5bmMgc2F2ZVdvcmtvdXRTZXNzaW9uKHtcbiAgICB1c2VySWQsXG4gICAgd29ya291dCxcbiAgICBsb2dzXG4gICB9OiB7XG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgd29ya291dDogV29ya291dCxcbiAgICBsb2dzOiBFeGVyY2lzZUxvZ1tdXG4gICB9KTogUHJvbWlzZTxXb3Jrb3V0IHwgbnVsbD4ge1xuICAgIGlmICghdXNlcklkKSB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgSUQgcHJvdmlkZWQnKTtcbiAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNsZWFuV29ya291dCA9IG5ldyBXb3Jrb3V0KHtcbiAgICAgICAgLi4ud29ya291dCxcbiAgICAgICAgcm91bmRXb3Jrb3V0SWQ6IGAke3dvcmtvdXQuaWR9LSR7Y3VycmVudERhdGUuZ2V0VGltZSgpfWAsXG4gICAgICAgIHdvcmtvdXRTdGF0dXM6IFdvcmtvdXRTdGF0dXMuUXVldWVkVXAsXG4gICAgICAgIGNyZWF0ZWRBdDogY3VycmVudERhdGUsXG4gICAgICAgIHVwZGF0ZWRBdDogY3VycmVudERhdGUsXG4gICAgICAgIHN0YXJ0VGltZTogY3VycmVudERhdGUsXG4gICAgICAgIGxvZ3M6IFtdXG4gICAgICAgfSk7XG4gICBcbiAgICAgIGNvbnN0IHdvcmtvdXRTZXNzaW9uUmVmID0gZG9jKGNvbGxlY3Rpb24oZGIsICd1c2VycycsIHVzZXJJZCwgJ3dvcmtvdXRTZXNzaW9ucycpKTtcbiAgICAgIGF3YWl0IHNldERvYyh3b3Jrb3V0U2Vzc2lvblJlZiwgY2xlYW5Xb3Jrb3V0LnRvRGljdGlvbmFyeSgpKTtcbiAgIFxuICAgICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24od29ya291dFNlc3Npb25SZWYsICdsb2dzJyk7XG4gICAgICBjb25zdCBsb2dCYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xuICAgXG4gICAgICBsb2dzLmZvckVhY2goKGxvZywgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgbG9nRG9jUmVmID0gZG9jKGxvZ3NSZWYsIGAke2xvZy5pZH0tJHtjdXJyZW50RGF0ZS5nZXRUaW1lKCl9YCk7XG4gICAgICAgIGxvZ0JhdGNoLnNldChsb2dEb2NSZWYsIHtcbiAgICAgICAgICBpZDogbG9nRG9jUmVmLmlkLFxuICAgICAgICAgIHdvcmtvdXRJZDogd29ya291dFNlc3Npb25SZWYuaWQsXG4gICAgICAgICAgZXhlcmNpc2U6IGxvZy5leGVyY2lzZS50b0RpY3Rpb25hcnkoKSwgLy8gY29udmVydCB0aGUgY3VzdG9tIEV4ZXJjaXNlIG9iamVjdFxuICAgICAgICAgIG9yZGVyOiBpbmRleCxcbiAgICAgICAgICBjcmVhdGVkQXQ6IGN1cnJlbnREYXRlLmdldFRpbWUoKSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IGN1cnJlbnREYXRlLmdldFRpbWUoKSxcbiAgICAgICAgICBsb2dTdWJtaXR0ZWQ6IGZhbHNlLFxuICAgICAgICAgIGlzQ29tcGxldGVkOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgIH0pOyBcbiAgIFxuICAgICAgYXdhaXQgbG9nQmF0Y2guY29tbWl0KCk7XG4gICAgICBcbiAgICAgIHJldHVybiBjbGVhbldvcmtvdXQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyB3b3Jrb3V0IHNlc3Npb246JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgfVxuXG4gIC8qKlxuICAgKiBFeGFtcGxlIFwiam9pbiBjaGFsbGVuZ2VcIiBtZXRob2QgdXNpbmcgdGhlIGNsaWVudCBTREsgKG5vIGFkbWluIHByaXZpbGVnZXMpLlxuICAgKiBUaGlzIGNyZWF0ZXMgYSBkb2MgaW4gYHVzZXItY2hhbGxlbmdlYCB3aXRoIHRoZSB1c2VySWQsIGNoYWxsZW5nZUlkLCBldGMuXG4gICAqL1xuICBhc3luYyBqb2luQ2hhbGxlbmdlKHtcbiAgICB1c2VybmFtZSxcbiAgICBjaGFsbGVuZ2VJZFxuICB9OiB7XG4gICAgdXNlcm5hbWU6IHN0cmluZztcbiAgICBjaGFsbGVuZ2VJZDogc3RyaW5nO1xuICB9KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gMSkgTWFrZSBzdXJlIHdlIGhhdmUgYSBzaWduZWQtaW4gdXNlclxuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlclNlcnZpY2UuY3VycmVudFVzZXI7XG4gICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGlzIHNpZ25lZCBpbicpO1xuICAgIH1cblxuICAgIC8vIDIpIEZpbmQgdGhlIHVzZXIgZG9jIGJ5IHVzZXJuYW1lXG4gICAgY29uc3QgdXNlcnNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnKTtcbiAgICBjb25zdCB1c2VyUXVlcnkgPSBxdWVyeSh1c2Vyc1JlZiwgd2hlcmUoJ3VzZXJuYW1lJywgJz09JywgdXNlcm5hbWUpKTtcbiAgICBjb25zdCB1c2VyU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHVzZXJRdWVyeSk7XG5cbiAgICBpZiAodXNlclNuYXBzaG90LmVtcHR5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlckRvYyA9IHVzZXJTbmFwc2hvdC5kb2NzWzBdO1xuICAgIGNvbnN0IHVzZXJEYXRhID0gdXNlckRvYy5kYXRhKCk7XG4gICAgY29uc3QgdXNlcklkID0gdXNlckRvYy5pZDtcblxuICAgIC8vIDMpIENoZWNrIGlmIHRoZSBjaGFsbGVuZ2UgZG9jIGV4aXN0c1xuICAgIGNvbnN0IGNoYWxsZW5nZVJlZiA9IGRvYyhkYiwgJ3N3ZWF0bGlzdC1jb2xsZWN0aW9uJywgY2hhbGxlbmdlSWQpO1xuICAgIGNvbnN0IGNoYWxsZW5nZVNuYXAgPSBhd2FpdCBnZXREb2MoY2hhbGxlbmdlUmVmKTtcblxuICAgIGlmICghY2hhbGxlbmdlU25hcC5leGlzdHMoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDaGFsbGVuZ2Ugbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgY29uc3QgY2hhbGxlbmdlID0gY2hhbGxlbmdlU25hcC5kYXRhKCk7XG5cbiAgICAvLyA0KSBCdWlsZCBuZXcgdXNlci1jaGFsbGVuZ2UgZG9jdW1lbnRcbiAgICBjb25zdCB1c2VyQ2hhbGxlbmdlSWQgPSBgJHtjaGFsbGVuZ2VJZH0tJHt1c2VySWR9LSR7RGF0ZS5ub3coKX1gO1xuICAgIGNvbnN0IHVzZXJDaGFsbGVuZ2VEYXRhID0ge1xuICAgICAgaWQ6IHVzZXJDaGFsbGVuZ2VJZCxcbiAgICAgIGNoYWxsZW5nZTogY2hhbGxlbmdlLFxuICAgICAgY2hhbGxlbmdlSWQsXG4gICAgICB1c2VySWQsXG4gICAgICBmY21Ub2tlbjogdXNlckRhdGEuZmNtVG9rZW4gfHwgJycsXG4gICAgICBwcm9maWxlSW1hZ2U6IHVzZXJEYXRhLnByb2ZpbGVJbWFnZSB8fCB7fSxcbiAgICAgIHByb2dyZXNzOiAwLFxuICAgICAgY29tcGxldGVkV29ya291dHM6IFtdLFxuICAgICAgaXNDb21wbGV0ZWQ6IGZhbHNlLFxuICAgICAgdWlkOiB1c2VySWQsXG4gICAgICBsb2NhdGlvbjogdXNlckRhdGEubG9jYXRpb24gfHwgbnVsbCxcbiAgICAgIGNpdHk6ICcnLFxuICAgICAgY291bnRyeTogJycsXG4gICAgICB0aW1lem9uZTogJycsXG4gICAgICB1c2VybmFtZSxcbiAgICAgIGpvaW5EYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgcHVsc2VQb2ludHM6IHtcbiAgICAgICAgYmFzZUNvbXBsZXRpb246IDAsXG4gICAgICAgIGZpcnN0Q29tcGxldGlvbjogMCxcbiAgICAgICAgc3RyZWFrQm9udXM6IDAsXG4gICAgICAgIGNoZWNrSW5Cb251czogMCxcbiAgICAgICAgZWZmb3J0UmF0aW5nOiAwLFxuICAgICAgICBjaGF0UGFydGljaXBhdGlvbjogMCxcbiAgICAgICAgbG9jYXRpb25DaGVja2luOiAwLFxuICAgICAgICBjb250ZW50RW5nYWdlbWVudDogMCxcbiAgICAgICAgZW5jb3VyYWdlbWVudFNlbnQ6IDAsXG4gICAgICAgIGVuY291cmFnZW1lbnRSZWNlaXZlZDogMFxuICAgICAgfSxcbiAgICAgIGN1cnJlbnRTdHJlYWs6IDAsXG4gICAgICBlbmNvdXJhZ2VkVXNlcnM6IFtdLFxuICAgICAgZW5jb3VyYWdlZEJ5VXNlcnM6IFtdLFxuICAgICAgY2hlY2tJbnM6IFtdXG4gICAgfTtcblxuICAgIC8vIDUpIFN0b3JlIHVzZXItY2hhbGxlbmdlIGRvY1xuICAgIGF3YWl0IHNldERvYyhkb2MoZGIsICd1c2VyLWNoYWxsZW5nZScsIHVzZXJDaGFsbGVuZ2VJZCksIHVzZXJDaGFsbGVuZ2VEYXRhKTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3Qgd29ya291dFNlcnZpY2UgPSBuZXcgV29ya291dFNlcnZpY2UoKTsiXSwibmFtZXMiOlsiY29sbGVjdGlvbiIsImRvYyIsImdldERvY3MiLCJnZXREb2MiLCJxdWVyeSIsIndoZXJlIiwib3JkZXJCeSIsImZzQ29sbGVjdGlvbiIsInNldERvYyIsImRlbGV0ZURvYyIsIndyaXRlQmF0Y2giLCJkYiIsInVzZXJTZXJ2aWNlIiwiRXhlcmNpc2VMb2ciLCJFeGVyY2lzZSIsIkV4ZXJjaXNlVmlkZW8iLCJXb3Jrb3V0IiwiQm9keVpvbmUiLCJJbnRyb1ZpZGVvIiwiV29ya291dFN0YXR1cyIsIlN3ZWF0bGlzdENvbGxlY3Rpb24iLCJmb3JtYXQiLCJjb252ZXJ0VGltZXN0YW1wIiwiY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcCIsIkNoYWxsZW5nZSIsIlVzZXJDaGFsbGVuZ2UiLCJzdG9yZSIsInNldEN1cnJlbnRXb3Jrb3V0Iiwic2V0Q3VycmVudEV4ZXJjaXNlTG9ncyIsInJlc2V0V29ya291dFN0YXRlIiwic2V0V29ya291dFN1bW1hcnkiLCJXb3Jrb3V0U2VydmljZSIsImdlbmVyYXRlSWQiLCJpZCIsImZldGNoQ3VycmVudFdvcmtvdXQiLCJ1c2VySWQiLCJzZXNzaW9uIiwiZmV0Y2hDdXJyZW50V29ya291dFNlc3Npb24iLCJ3b3Jrb3V0IiwiZ2V0QWxsU3dlYXRsaXN0cyIsIndvcmtvdXRzUmVmIiwiZXhlcmNpc2VzV2l0aFZpZGVvcyIsIndvcmtvdXRzU25hcHNob3QiLCJ3b3Jrb3V0cyIsIndvcmtvdXREb2MiLCJ3b3Jrb3V0RGF0YSIsIndvcmtvdXRJZCIsIm1hcHBlZEV4ZXJjaXNlcyIsImxvZ3NSZWYiLCJsb2dzU25hcHNob3QiLCJlcnJvciIsImZpcmVzdG9yZUVycm9yIiwiRXJyb3IiLCJmZXRjaEFuZE1hcEV4ZXJjaXNlc1dpdGhWaWRlb3MiLCJkb2NzIiwiZGF0YSIsImV4ZXJjaXNlcyIsIm1hcCIsImV4ZXJjaXNlUmVmIiwiZnVsbEV4ZXJjaXNlIiwiZmluZCIsImV4IiwibmFtZSIsImV4ZXJjaXNlIiwiY29uc29sZSIsImxvZyIsInJvdW5kV29ya291dElkIiwiY29sbGVjdGlvbklkIiwiY2hhbGxlbmdlIiwibG9ncyIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkdXJhdGlvbiIsIndvcmtvdXRSYXRpbmciLCJ1c2VBdXRob3JDb250ZW50IiwiaXNDb21wbGV0ZWQiLCJ3b3Jrb3V0U3RhdHVzIiwic3RhcnRUaW1lIiwiRGF0ZSIsInVuZGVmaW5lZCIsIm9yZGVyIiwiYXV0aG9yIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0Iiwiem9uZSIsImxvZ0RvYyIsInB1c2giLCJtZXNzYWdlIiwiZ2V0VXNlckNoYWxsZW5nZXNCeUNoYWxsZW5nZUlkIiwiY2hhbGxlbmdlSWQiLCJ1c2VyQ2hhbGxlbmdlc1JlZiIsInEiLCJzbmFwc2hvdCIsInVzZXJDaGFsbGVuZ2VzIiwibGVuZ3RoIiwiZmV0Y2hXb3Jrb3V0U3VtbWFyaWVzIiwiZGF0ZSIsImN1cnJlbnRVc2VyIiwiZm9ybWF0dGVkRGF0ZSIsInN1bW1hcmllc1JlZiIsImZldGNoQWxsV29ya291dFN1bW1hcmllcyIsImZldGNoVXNlckNoYWxsZW5nZXNCeVVzZXJJZCIsInN1YnRpdGxlIiwicGFydGljaXBhbnRzIiwic3RhdHVzIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsImludHJvVmlkZW9zIiwidiIsInZpZGVvVXJsIiwiZmV0Y2hDb2xsZWN0aW9uV2l0aFN3ZWF0TGlzdHMiLCJzd2VhdExpc3RzIiwic3dlYXRsaXN0SWRlbnRpZmllciIsImdldENvbGxlY3Rpb25CeUlkIiwic3dlYXRsaXN0SWRzIiwiZmV0Y2hTYXZlZFdvcmtvdXQiLCJzd2VhdGxpc3RBdXRob3JJZCIsIndvcmtvdXRSZWYiLCJ3b3Jrb3V0U25hcCIsImV4aXN0cyIsImFzc2lnbmVkRGF0ZSIsImxvZ0RhdGEiLCJmZWVkYmFjayIsIm5vdGUiLCJyZWNvbW1lbmRlZFdlaWdodCIsImlzU3BsaXQiLCJpc0JvZHlXZWlnaHQiLCJsb2dTdWJtaXR0ZWQiLCJsb2dJc0VkaXRpbmciLCJjb21wbGV0ZWRBdCIsImZldGNoVXNlckNoYWxsZW5nZXNCeUNoYWxsZW5nZUlkIiwiZG9jUmVmIiwiZG9jU25hcCIsImZldGNoQWN0aXZlQ2hhbGxlbmdlcyIsImFsbENoYWxsZW5nZXMiLCJhY3RpdmVDaGFsbGVuZ2VzIiwiZmlsdGVyIiwidXNlckNoYWxsZW5nZSIsImZldGNoVXNlckNoYWxsZW5nZXMiLCJ1cGRhdGVXb3Jrb3V0U3VtbWFyeSIsInN1bW1hcnkiLCJzdW1tYXJ5UmVmIiwic3VtbWFyeURhdGEiLCJib2R5UGFydHMiLCJzZWNvbmRhcnlCb2R5UGFydHMiLCJ3b3Jrb3V0VGl0bGUiLCJjYWxvcmllc0J1cm5lZCIsImV4ZXJjaXNlc0NvbXBsZXRlZCIsImFpSW5zaWdodCIsInJlY29tbWVuZGF0aW9ucyIsImdpZlVSTHMiLCJyZWNvbW1lbmRlZFdvcmsiLCJtZXJnZSIsInVwZGF0ZVdvcmtvdXRMb2dzIiwiYmF0Y2giLCJmb3JFYWNoIiwibG9nRG9jUmVmIiwidXBkYXRlIiwidG9EaWN0aW9uYXJ5IiwiY29tbWl0IiwiY2FuY2VsV29ya291dCIsIndvcmtvdXRTdW1tYXJ5IiwiZGVsZXRlV29ya291dFNlc3Npb24iLCJkZWxldGVXb3Jrb3V0U3VtbWFyeSIsImNsZWFuVXBXb3Jrb3V0SW5Qcm9ncmVzcyIsImRlbGV0ZSIsInJlZiIsIndvcmtvdXRTdW1tYXJ5SWQiLCJkaXNwYXRjaCIsImV4ZXJjaXNlU25hcHNob3QiLCJ2aWRlb1NuYXBzaG90IiwiZXhlcmNpc2VWaWRlb3MiLCJ3b3Jrb3V0U2Vzc2lvbnNSZWYiLCJzbmFwIiwiZnJvbUZpcmViYXNlIiwibWF0Y2hpbmdWaWRlb3MiLCJ2aWRlbyIsInRvTG93ZXJDYXNlIiwidmlkZW9zIiwiUXVldWVkVXAiLCJlbXB0eSIsInByb2Nlc3NXb3Jrb3V0U2Vzc2lvbkRvY3VtZW50IiwiSW5Qcm9ncmVzcyIsImZldGNoQWxsV29ya291dFNlc3Npb25zIiwic2Vzc2lvbnMiLCJQcm9taXNlIiwiYWxsIiwic2Vzc2lvbkRhdGEiLCJzb3J0IiwiYSIsImIiLCJvcmRlckEiLCJvcmRlckIiLCJ1cGRhdGVDb2xsZWN0aW9uIiwiY29sbFJlZiIsIm5ld0RvY1JlZiIsInRyaW0iLCJleGVyY2lzZU5hbWVMb3dlciIsIkFyY2hpdmVkIiwiRnVsbEJvZHkiLCJwcmVwYXJlZExvZ0RhdGEiLCJzYXZlV29ya291dFNlc3Npb24iLCJjdXJyZW50RGF0ZSIsImNsZWFuV29ya291dCIsIndvcmtvdXRTZXNzaW9uUmVmIiwibG9nQmF0Y2giLCJnZXRUaW1lIiwiaW5kZXgiLCJzZXQiLCJqb2luQ2hhbGxlbmdlIiwidXNlcm5hbWUiLCJ1c2Vyc1JlZiIsInVzZXJRdWVyeSIsInVzZXJTbmFwc2hvdCIsInVzZXJEb2MiLCJ1c2VyRGF0YSIsImNoYWxsZW5nZVJlZiIsImNoYWxsZW5nZVNuYXAiLCJ1c2VyQ2hhbGxlbmdlSWQiLCJ1c2VyQ2hhbGxlbmdlRGF0YSIsIm5vdyIsImZjbVRva2VuIiwicHJvZmlsZUltYWdlIiwicHJvZ3Jlc3MiLCJjb21wbGV0ZWRXb3Jrb3V0cyIsInVpZCIsImxvY2F0aW9uIiwiY2l0eSIsImNvdW50cnkiLCJ0aW1lem9uZSIsImpvaW5EYXRlIiwicHVsc2VQb2ludHMiLCJiYXNlQ29tcGxldGlvbiIsImZpcnN0Q29tcGxldGlvbiIsInN0cmVha0JvbnVzIiwiY2hlY2tJbkJvbnVzIiwiZWZmb3J0UmF0aW5nIiwiY2hhdFBhcnRpY2lwYXRpb24iLCJsb2NhdGlvbkNoZWNraW4iLCJjb250ZW50RW5nYWdlbWVudCIsImVuY291cmFnZW1lbnRTZW50IiwiZW5jb3VyYWdlbWVudFJlY2VpdmVkIiwiY3VycmVudFN0cmVhayIsImVuY291cmFnZWRVc2VycyIsImVuY291cmFnZWRCeVVzZXJzIiwiY2hlY2tJbnMiLCJjdXJyZW50V29ya291dCIsImdldFN0YXRlIiwiY3VycmVudFdvcmtvdXRMb2dzIiwiY3VycmVudEV4ZXJjaXNlTG9ncyIsImN1cnJlbnRXb3Jrb3V0U3VtbWFyeSIsIndvcmtvdXRTZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/api/firebase/workout/service.ts\n"));

/***/ })

});
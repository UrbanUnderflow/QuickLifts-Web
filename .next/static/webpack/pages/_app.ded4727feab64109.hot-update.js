"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/_app",{

/***/ "./src/api/firebase/workout/service.ts":
/*!*********************************************!*\
  !*** ./src/api/firebase/workout/service.ts ***!
  \*********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   workoutService: function() { return /* binding */ workoutService; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @swc/helpers/_/_async_to_generator */ \"./node_modules/@swc/helpers/esm/_async_to_generator.js\");\n/* harmony import */ var _swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @swc/helpers/_/_class_call_check */ \"./node_modules/@swc/helpers/esm/_class_call_check.js\");\n/* harmony import */ var _swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @swc/helpers/_/_create_class */ \"./node_modules/@swc/helpers/esm/_create_class.js\");\n/* harmony import */ var _swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @swc/helpers/_/_object_spread */ \"./node_modules/@swc/helpers/esm/_object_spread.js\");\n/* harmony import */ var _swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @swc/helpers/_/_object_spread_props */ \"./node_modules/@swc/helpers/esm/_object_spread_props.js\");\n/* harmony import */ var _swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @swc/helpers/_/_sliced_to_array */ \"./node_modules/@swc/helpers/esm/_sliced_to_array.js\");\n/* harmony import */ var _swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @swc/helpers/_/_to_consumable_array */ \"./node_modules/@swc/helpers/esm/_to_consumable_array.js\");\n/* harmony import */ var _swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @swc/helpers/_/_ts_generator */ \"./node_modules/@swc/helpers/esm/_ts_generator.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/api/firebase/config.ts\");\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../user */ \"./src/api/firebase/user/index.ts\");\n/* harmony import */ var _exercise_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../exercise/types */ \"./src/api/firebase/exercise/types.ts\");\n/* harmony import */ var _exercise_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../exercise/service */ \"./src/api/firebase/exercise/service.ts\");\n/* harmony import */ var _user_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../user/types */ \"./src/api/firebase/user/types.ts\");\n/* harmony import */ var _workout_types__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../api/firebase/workout/types */ \"./src/api/firebase/workout/types.ts\");\n/* harmony import */ var _barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! __barrel_optimize__?names=format!=!date-fns */ \"__barrel_optimize__?names=format!=!./node_modules/date-fns/index.js\");\n/* harmony import */ var _utils_timestamp__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../utils/timestamp */ \"./src/utils/timestamp.ts\");\n/* harmony import */ var _utils_formatDate__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../utils/formatDate */ \"./src/utils/formatDate.ts\");\n/* harmony import */ var _redux_store__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../redux/store */ \"./src/redux/store.ts\");\n/* harmony import */ var _redux_workoutSlice__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../redux/workoutSlice */ \"./src/redux/workoutSlice.ts\");\n// src/api/firebase/workout/service.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // Adjust the import path\n\n\n\n\nvar WorkoutService = /*#__PURE__*/ function() {\n    \"use strict\";\n    function WorkoutService() {\n        (0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_11__._)(this, WorkoutService);\n    }\n    var _proto = WorkoutService.prototype;\n    _proto.generateId = function generateId() {\n        return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"workouts\")).id;\n    };\n    // Update the formatWorkoutAndInitializeLogs function\n    _proto.formatWorkoutAndInitializeLogs = function formatWorkoutAndInitializeLogs(exerciseDetails, workoutAuthor) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var _userService_currentUser, workId, exerciseReferences, exerciseLogs, validExerciseDetails, newWorkout;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                workId = _this.generateId(); // Use this.generateId() since it's a class method\n                exerciseReferences = [];\n                exerciseLogs = [];\n                // Ensure exercise details are valid before processing\n                validExerciseDetails = exerciseDetails.filter(function(detail) {\n                    return (detail === null || detail === void 0 ? void 0 : detail.exercise) && detail.exercise.id;\n                });\n                validExerciseDetails.forEach(function(detail, index) {\n                    var _detail_category, _detail_category1, _detail_category_details, _detail_category2, _detail_category_details1, _detail_category3, _detail_category_details2, _detail_category4, _detail_category_details3, _detail_category5, _detail_category_details4, _detail_category6, _detail_category_details5, _detail_category7, _detail_category_details6, _detail_category8, _detail_category_details7, _detail_category9, _detail_category_details8, _detail_category10, _detail_category_details9, _detail_category11, _userService_currentUser, _userService_currentUser1, _category_details, _category_details1, _category_details2, _userService_currentUser2, _userService_currentUser3;\n                    if (detail.exercise.id == null) {\n                        return;\n                    }\n                    var _detail_category_details_sets, _detail_category_details_reps, _detail_category_details_weight, _detail_category_details_screenTime, _detail_category_details_selectedVideo, _detail_category_details_duration, _detail_category_details_bpm, _detail_category_details_calories, _detail_category_details_screenTime1, _detail_category_details_selectedVideo1;\n                    // Create the category first\n                    var category = {\n                        type: ((_detail_category = detail.category) === null || _detail_category === void 0 ? void 0 : _detail_category.type) || \"weight-training\",\n                        details: ((_detail_category1 = detail.category) === null || _detail_category1 === void 0 ? void 0 : _detail_category1.type) === \"weight-training\" ? {\n                            sets: (_detail_category_details_sets = (_detail_category2 = detail.category) === null || _detail_category2 === void 0 ? void 0 : (_detail_category_details = _detail_category2.details) === null || _detail_category_details === void 0 ? void 0 : _detail_category_details.sets) !== null && _detail_category_details_sets !== void 0 ? _detail_category_details_sets : 3,\n                            reps: (_detail_category_details_reps = (_detail_category3 = detail.category) === null || _detail_category3 === void 0 ? void 0 : (_detail_category_details1 = _detail_category3.details) === null || _detail_category_details1 === void 0 ? void 0 : _detail_category_details1.reps) !== null && _detail_category_details_reps !== void 0 ? _detail_category_details_reps : [\n                                \"12\"\n                            ],\n                            weight: (_detail_category_details_weight = (_detail_category4 = detail.category) === null || _detail_category4 === void 0 ? void 0 : (_detail_category_details2 = _detail_category4.details) === null || _detail_category_details2 === void 0 ? void 0 : _detail_category_details2.weight) !== null && _detail_category_details_weight !== void 0 ? _detail_category_details_weight : 0,\n                            screenTime: (_detail_category_details_screenTime = (_detail_category5 = detail.category) === null || _detail_category5 === void 0 ? void 0 : (_detail_category_details3 = _detail_category5.details) === null || _detail_category_details3 === void 0 ? void 0 : _detail_category_details3.screenTime) !== null && _detail_category_details_screenTime !== void 0 ? _detail_category_details_screenTime : 0,\n                            selectedVideo: (_detail_category_details_selectedVideo = (_detail_category6 = detail.category) === null || _detail_category6 === void 0 ? void 0 : (_detail_category_details4 = _detail_category6.details) === null || _detail_category_details4 === void 0 ? void 0 : _detail_category_details4.selectedVideo) !== null && _detail_category_details_selectedVideo !== void 0 ? _detail_category_details_selectedVideo : null\n                        } : {\n                            duration: (_detail_category_details_duration = (_detail_category7 = detail.category) === null || _detail_category7 === void 0 ? void 0 : (_detail_category_details5 = _detail_category7.details) === null || _detail_category_details5 === void 0 ? void 0 : _detail_category_details5.duration) !== null && _detail_category_details_duration !== void 0 ? _detail_category_details_duration : 60,\n                            bpm: (_detail_category_details_bpm = (_detail_category8 = detail.category) === null || _detail_category8 === void 0 ? void 0 : (_detail_category_details6 = _detail_category8.details) === null || _detail_category_details6 === void 0 ? void 0 : _detail_category_details6.bpm) !== null && _detail_category_details_bpm !== void 0 ? _detail_category_details_bpm : 140,\n                            calories: (_detail_category_details_calories = (_detail_category9 = detail.category) === null || _detail_category9 === void 0 ? void 0 : (_detail_category_details7 = _detail_category9.details) === null || _detail_category_details7 === void 0 ? void 0 : _detail_category_details7.calories) !== null && _detail_category_details_calories !== void 0 ? _detail_category_details_calories : 0,\n                            screenTime: (_detail_category_details_screenTime1 = (_detail_category10 = detail.category) === null || _detail_category10 === void 0 ? void 0 : (_detail_category_details8 = _detail_category10.details) === null || _detail_category_details8 === void 0 ? void 0 : _detail_category_details8.screenTime) !== null && _detail_category_details_screenTime1 !== void 0 ? _detail_category_details_screenTime1 : 0,\n                            selectedVideo: (_detail_category_details_selectedVideo1 = (_detail_category11 = detail.category) === null || _detail_category11 === void 0 ? void 0 : (_detail_category_details9 = _detail_category11.details) === null || _detail_category_details9 === void 0 ? void 0 : _detail_category_details9.selectedVideo) !== null && _detail_category_details_selectedVideo1 !== void 0 ? _detail_category_details_selectedVideo1 : null\n                        }\n                    };\n                    console.log(\"Category being used:\", category); // Debug log\n                    // Create exercise instance with our new category\n                    var exerciseInstance = new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_14__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({}, detail.exercise), {\n                        id: detail.exercise.id || workoutService.generateId(),\n                        name: detail.exercise.name || \"\",\n                        author: detail.exercise.author || {\n                            userId: workoutAuthor || ((_userService_currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser === void 0 ? void 0 : _userService_currentUser.id),\n                            username: workoutAuthor || ((_userService_currentUser1 = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser1 === void 0 ? void 0 : _userService_currentUser1.username)\n                        },\n                        description: detail.exercise.description || \"\",\n                        category: category,\n                        primaryBodyParts: detail.exercise.primaryBodyParts || [],\n                        secondaryBodyParts: detail.exercise.secondaryBodyParts || [],\n                        tags: detail.exercise.tags || [],\n                        videos: detail.exercise.videos || [],\n                        createdAt: detail.exercise.createdAt || new Date(),\n                        updatedAt: detail.exercise.updatedAt || new Date()\n                    }));\n                    // Create exercise reference\n                    var exerciseRef = {\n                        exercise: exerciseInstance,\n                        groupId: detail.groupId || 0\n                    };\n                    exerciseReferences.push(exerciseRef);\n                    var _category_details_sets;\n                    // Create logs using the same category details\n                    var sets = (_category_details_sets = (_category_details = category.details) === null || _category_details === void 0 ? void 0 : _category_details.sets) !== null && _category_details_sets !== void 0 ? _category_details_sets : 3;\n                    var _category_details_reps;\n                    var reps = (_category_details_reps = (_category_details1 = category.details) === null || _category_details1 === void 0 ? void 0 : _category_details1.reps) !== null && _category_details_reps !== void 0 ? _category_details_reps : [\n                        \"12\"\n                    ];\n                    var _category_details_weight;\n                    var weight = (_category_details_weight = (_category_details2 = category.details) === null || _category_details2 === void 0 ? void 0 : _category_details2.weight) !== null && _category_details_weight !== void 0 ? _category_details_weight : 0;\n                    // Create logs for each set with validated data\n                    var setsLogs = Array.from({\n                        length: sets\n                    }, function() {\n                        return new _workout_types__WEBPACK_IMPORTED_MODULE_6__.RepsAndWeightLog({\n                            reps: parseInt(reps[0] || \"12\", 10),\n                            weight: weight || 0\n                        });\n                    });\n                    // Create exercise log with validated data\n                    var exerciseLogId = _exercise_service__WEBPACK_IMPORTED_MODULE_4__.exerciseService.generateExerciseLogID(workId, ((_userService_currentUser2 = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser2 === void 0 ? void 0 : _userService_currentUser2.id) || \"anonymous\");\n                    var log = new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseLog({\n                        id: exerciseLogId,\n                        workoutId: workId,\n                        userId: ((_userService_currentUser3 = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser3 === void 0 ? void 0 : _userService_currentUser3.id) || \"anonymous\",\n                        exercise: exerciseInstance,\n                        logs: setsLogs,\n                        feedback: \"\",\n                        note: detail.notes || \"\",\n                        isSplit: detail.isSplit || false,\n                        logSubmitted: false,\n                        logIsEditing: false,\n                        isCompleted: false,\n                        order: index + 1,\n                        createdAt: new Date(),\n                        updatedAt: new Date(),\n                        completedAt: new Date()\n                    });\n                    exerciseLogs.push(log);\n                });\n                // Create workout with validated data\n                newWorkout = new _workout_types__WEBPACK_IMPORTED_MODULE_6__.Workout({\n                    id: workId,\n                    roundWorkoutId: \"\",\n                    exercises: exerciseReferences,\n                    logs: exerciseLogs,\n                    title: \"\",\n                    description: \"\",\n                    duration: 0,\n                    workoutRating: \"none\",\n                    useAuthorContent: false,\n                    isCompleted: false,\n                    workoutStatus: \"archived\",\n                    author: ((_userService_currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser === void 0 ? void 0 : _userService_currentUser.id) || \"PulseAI\",\n                    createdAt: new Date(),\n                    updatedAt: new Date(),\n                    zone: _workout_types__WEBPACK_IMPORTED_MODULE_6__.Workout.determineWorkoutZone(exerciseReferences) || \"full\"\n                });\n                return [\n                    2,\n                    {\n                        workout: newWorkout,\n                        exerciseLogs: exerciseLogs\n                    }\n                ];\n            });\n        })();\n    };\n    _proto.getUserById = function getUserById(userId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var userDoc, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId))\n                        ];\n                    case 1:\n                        userDoc = _state.sent();\n                        if (!userDoc.exists()) {\n                            throw new Error(\"User not found\");\n                        }\n                        return [\n                            2,\n                            new _user_types__WEBPACK_IMPORTED_MODULE_5__.User((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({\n                                id: userDoc.id\n                            }, userDoc.data()))\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error getting user by ID:\", error);\n                        throw error;\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // In WorkoutService\n    _proto.revertAuthorFormat = function revertAuthorFormat(workoutId, authorId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var _userService_currentUser, workoutRef;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!((_userService_currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser === void 0 ? void 0 : _userService_currentUser.id)) throw new Error(\"No user signed in\");\n                        workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser.id, \"MyCreatedWorkouts\", workoutId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(workoutRef, {\n                                author: authorId\n                            })\n                        ];\n                    case 1:\n                        _state.sent();\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.updateWorkout = function updateWorkout(workout) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var _userService_currentUser, workoutRef, batch, logsRef, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!((_userService_currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser === void 0 ? void 0 : _userService_currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            5,\n                            ,\n                            6\n                        ]);\n                        workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser.id, \"MyCreatedWorkouts\", workout.id);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(workoutRef, workout.toDictionary(), {\n                                merge: true\n                            })\n                        ];\n                    case 2:\n                        _state.sent();\n                        if (!(workout.logs && workout.logs.length > 0)) return [\n                            3,\n                            4\n                        ];\n                        batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\");\n                        workout.logs.forEach(function(log) {\n                            var logRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(logsRef, log.id);\n                            batch.set(logRef, log.toDictionary(), {\n                                merge: true\n                            });\n                        });\n                        return [\n                            4,\n                            batch.commit()\n                        ];\n                    case 3:\n                        _state.sent();\n                        _state.label = 4;\n                    case 4:\n                        return [\n                            3,\n                            6\n                        ];\n                    case 5:\n                        error = _state.sent();\n                        console.error(\"Error updating workout:\", error);\n                        throw error;\n                    case 6:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetch the user's current workout (either QueuedUp or InProgress).\n   */ _proto.fetchCurrentWorkout = function fetchCurrentWorkout(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var session;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        return [\n                            4,\n                            _this.fetchCurrentWorkoutSession(userId)\n                        ];\n                    case 1:\n                        session = _state.sent();\n                        return [\n                            2,\n                            session.workout\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getAllSweatlists = function getAllSweatlists(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var workoutsRef, exercisesWithVideos, workoutsSnapshot, workouts, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, workoutDoc, workoutData, workoutId, mappedExercises, workout, logsRef, logsSnapshot, err, error, firestoreError;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"User ID is required\");\n                        }\n                        // Reference to the user's workout collection\n                        workoutsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\");\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            12,\n                            ,\n                            13\n                        ]);\n                        return [\n                            4,\n                            _this.fetchAndMapExercisesWithVideos()\n                        ];\n                    case 2:\n                        exercisesWithVideos = _state.sent();\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(workoutsRef)\n                        ];\n                    case 3:\n                        workoutsSnapshot = _state.sent();\n                        workouts = [];\n                        _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;\n                        _state.label = 4;\n                    case 4:\n                        _state.trys.push([\n                            4,\n                            9,\n                            10,\n                            11\n                        ]);\n                        _iterator = workoutsSnapshot.docs[Symbol.iterator]();\n                        _state.label = 5;\n                    case 5:\n                        if (!!(_iteratorNormalCompletion = (_step = _iterator.next()).done)) return [\n                            3,\n                            8\n                        ];\n                        workoutDoc = _step.value;\n                        workoutData = workoutDoc.data();\n                        workoutId = workoutDoc.id;\n                        // Map the exercises in the workout to the full exercise objects with videos\n                        mappedExercises = (workoutData.exercises || []).map(function(exerciseRef) {\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name === exerciseRef.exercise.name;\n                            });\n                            console.log(\"This is the mapped exercise: \" + fullExercise);\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_14__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({}, exerciseRef), {\n                                exercise: fullExercise || exerciseRef\n                            });\n                        });\n                        // Parse workout data into the desired structure\n                        workout = new _workout_types__WEBPACK_IMPORTED_MODULE_6__.Workout({\n                            id: workoutData.id || \"\",\n                            roundWorkoutId: workoutData.roundWorkoutId || \"\",\n                            collectionId: workoutData.collectionId,\n                            exercises: mappedExercises,\n                            challenge: workoutData.challenge,\n                            logs: [],\n                            title: workoutData.title || \"\",\n                            description: workoutData.description || \"\",\n                            duration: workoutData.duration || 0,\n                            workoutRating: workoutData.workoutRating,\n                            useAuthorContent: workoutData.useAuthorContent || false,\n                            isCompleted: workoutData.isCompleted || false,\n                            workoutStatus: workoutData.workoutStatus || \"notStarted\",\n                            startTime: workoutData.startTime ? new Date(workoutData.startTime) : undefined,\n                            order: workoutData.order,\n                            author: workoutData.author || userId,\n                            createdAt: workoutData.createdAt ? new Date(workoutData.createdAt) : new Date(),\n                            updatedAt: workoutData.updatedAt ? new Date(workoutData.updatedAt) : new Date(),\n                            zone: workoutData.zone || \"FULL_BODY\"\n                        });\n                        // Fetch and process logs\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\", workoutId, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 6:\n                        logsSnapshot = _state.sent();\n                        workout.logs = logsSnapshot.docs.map(function(logDoc) {\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_14__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({}, logDoc.data()), {\n                                id: logDoc.id\n                            });\n                        });\n                        workouts.push(workout);\n                        _state.label = 7;\n                    case 7:\n                        _iteratorNormalCompletion = true;\n                        return [\n                            3,\n                            5\n                        ];\n                    case 8:\n                        return [\n                            3,\n                            11\n                        ];\n                    case 9:\n                        err = _state.sent();\n                        _didIteratorError = true;\n                        _iteratorError = err;\n                        return [\n                            3,\n                            11\n                        ];\n                    case 10:\n                        try {\n                            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                                _iterator[\"return\"]();\n                            }\n                        } finally{\n                            if (_didIteratorError) {\n                                throw _iteratorError;\n                            }\n                        }\n                        return [\n                            7\n                        ];\n                    case 11:\n                        return [\n                            2,\n                            workouts\n                        ];\n                    case 12:\n                        error = _state.sent();\n                        firestoreError = error;\n                        console.error(\"Error fetching sweatlists:\", firestoreError.message);\n                        throw new Error(\"Failed to fetch sweatlists\");\n                    case 13:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getUserChallengesByChallengeId = function getUserChallengesByChallengeId(challengeId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var userChallengesRef, q, snapshot, userChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"challengeId\", \"==\", challengeId));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        userChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            return new _workout_types__WEBPACK_IMPORTED_MODULE_6__.UserChallenge(data);\n                        });\n                        if (userChallenges.length > 0) {\n                            return [\n                                2,\n                                {\n                                    userChallenges: userChallenges\n                                }\n                            ];\n                        } else {\n                            return [\n                                2,\n                                {\n                                    userChallenges: [],\n                                    error: \"No user challenges found for this challenge.\"\n                                }\n                            ];\n                        }\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges by challengeId:\", error);\n                        return [\n                            2,\n                            {\n                                userChallenges: [],\n                                error: error instanceof Error ? error.message : \"Unknown error\"\n                            }\n                        ];\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetches workout summaries for a specific date.\n   * @param date - The date for which workout summaries are being fetched.\n   * @returns A promise resolving to an array of workout summaries.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ _proto.fetchWorkoutSummaries = function fetchWorkoutSummaries(date) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var currentUser, formattedDate, summariesRef, q, snapshot, error, firestoreError;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Format the date to match the format in Firestore ('MM-dd-yyyy')\n                        formattedDate = (0,_barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_16__.format)(date, \"MM-dd-yyyy\");\n                        // Reference to the user's workoutSummaries subcollection\n                        summariesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", currentUser.id, \"workoutSummaries\");\n                        // Create a query to filter documents by the specified date\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(summariesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"date\", \"==\", formattedDate));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // Map the documents to an array of WorkoutSummary objects\n                        return [\n                            2,\n                            snapshot.docs.map(function(doc) {\n                                return (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({\n                                    id: doc.id\n                                }, doc.data());\n                            })\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        firestoreError = error;\n                        console.error(\"Error fetching workout summaries:\", firestoreError.message);\n                        throw new Error(firestoreError.message);\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchAllWorkoutSummaries = function fetchAllWorkoutSummaries() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var currentUser, summariesRef, q, snapshot, error, firestoreError;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Reference to the user's workoutSummaries subcollection\n                        summariesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", currentUser.id, \"workoutSummary\");\n                        // Query to retrieve all workout summaries, sorted by `createdAt` in ascending order\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(summariesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"asc\")); // Adjust field name based on your schema\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // Map the documents to an array of WorkoutSummary objects\n                        return [\n                            2,\n                            snapshot.docs.map(function(doc) {\n                                return (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({\n                                    id: doc.id\n                                }, doc.data());\n                            })\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        firestoreError = error;\n                        console.error(\"Error fetching all workout summaries:\", firestoreError.message);\n                        throw new Error(firestoreError.message);\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n * Fetch user challenges by userId.\n * @param userId The ID of the user to fetch challenges for.\n * @returns A promise resolving to an array of user challenges.\n * @throws If the Firestore query fails.\n */ _proto.fetchUserChallengesByUserId = function fetchUserChallengesByUserId(userId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var userChallengesRef, q, snapshot, userChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", userId));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // console.log(`Total challenges fetched: ${snapshot.docs.length}`);\n                        userChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            // console.log(`Processing challenge with ID: ${doc.id}`, data);\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_14__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({\n                                id: doc.id\n                            }, data), {\n                                challenge: data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_6__.Challenge({\n                                    id: data.challenge.id,\n                                    title: data.challenge.title,\n                                    subtitle: data.challenge.subtitle,\n                                    participants: data.challenge.participants || [],\n                                    status: data.challenge.status,\n                                    startDate: data.challenge.startDate ? new Date(data.challenge.startDate) : new Date(),\n                                    endDate: data.challenge.endDate ? new Date(data.challenge.endDate) : new Date(),\n                                    createdAt: data.challenge.createdAt ? new Date(data.challenge.createdAt) : new Date(),\n                                    updatedAt: data.challenge.updatedAt ? new Date(data.challenge.updatedAt) : new Date(),\n                                    introVideos: (data.challenge.introVideos || []).map(function(v) {\n                                        return new _workout_types__WEBPACK_IMPORTED_MODULE_6__.IntroVideo({\n                                            id: v.id,\n                                            userId: v.userId,\n                                            videoUrl: v.videoUrl\n                                        });\n                                    })\n                                }) : undefined,\n                                createdAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_7__.convertTimestamp)(data.createdAt),\n                                updatedAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_7__.convertTimestamp)(data.updatedAt)\n                            });\n                        });\n                        // console.log('All challenges after processing:', JSON.stringify(userChallenges, null, 2));\n                        return [\n                            2,\n                            userChallenges\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges by userId:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchCollectionWithSweatLists = function fetchCollectionWithSweatLists(collectionId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var collection, sweatLists, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, sweatlistIdentifier, _ref, workout, error, err, error1;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            12,\n                            ,\n                            13\n                        ]);\n                        return [\n                            4,\n                            _this.getCollectionById(collectionId)\n                        ];\n                    case 1:\n                        collection = _state.sent();\n                        // Fetch sweat lists (workouts)\n                        sweatLists = [];\n                        _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;\n                        _state.label = 2;\n                    case 2:\n                        _state.trys.push([\n                            2,\n                            9,\n                            10,\n                            11\n                        ]);\n                        _iterator = (collection.sweatlistIds || [])[Symbol.iterator]();\n                        _state.label = 3;\n                    case 3:\n                        if (!!(_iteratorNormalCompletion = (_step = _iterator.next()).done)) return [\n                            3,\n                            8\n                        ];\n                        sweatlistIdentifier = _step.value;\n                        _state.label = 4;\n                    case 4:\n                        _state.trys.push([\n                            4,\n                            6,\n                            ,\n                            7\n                        ]);\n                        return [\n                            4,\n                            _this.fetchSavedWorkout(sweatlistIdentifier.sweatlistAuthorId, sweatlistIdentifier.id)\n                        ];\n                    case 5:\n                        _ref = _swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_17__._.apply(void 0, [\n                            _state.sent(),\n                            1\n                        ]), workout = _ref[0];\n                        if (workout) {\n                            sweatLists.push(workout);\n                        }\n                        return [\n                            3,\n                            7\n                        ];\n                    case 6:\n                        error = _state.sent();\n                        console.error(\"Error fetching workout \".concat(sweatlistIdentifier.id, \":\"), error);\n                        return [\n                            3,\n                            7\n                        ];\n                    case 7:\n                        _iteratorNormalCompletion = true;\n                        return [\n                            3,\n                            3\n                        ];\n                    case 8:\n                        return [\n                            3,\n                            11\n                        ];\n                    case 9:\n                        err = _state.sent();\n                        _didIteratorError = true;\n                        _iteratorError = err;\n                        return [\n                            3,\n                            11\n                        ];\n                    case 10:\n                        try {\n                            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                                _iterator[\"return\"]();\n                            }\n                        } finally{\n                            if (_didIteratorError) {\n                                throw _iteratorError;\n                            }\n                        }\n                        return [\n                            7\n                        ];\n                    case 11:\n                        return [\n                            2,\n                            {\n                                collection: collection,\n                                sweatLists: sweatLists\n                            }\n                        ];\n                    case 12:\n                        error1 = _state.sent();\n                        console.error(\"Error fetching collection with sweat lists:\", error1);\n                        throw error1;\n                    case 13:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchSavedWorkout = function fetchSavedWorkout(userId, workoutId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var workoutRef, workoutSnap, workoutData, exercisesWithVideos, mappedExercises, workout, logsRef, logsSnapshot, logs, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            4,\n                            ,\n                            5\n                        ]);\n                        // Fetch workout document\n                        workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\", workoutId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(workoutRef)\n                        ];\n                    case 1:\n                        workoutSnap = _state.sent();\n                        if (!workoutSnap.exists()) {\n                            return [\n                                2,\n                                [\n                                    null,\n                                    null\n                                ]\n                            ];\n                        }\n                        workoutData = workoutSnap.data();\n                        return [\n                            4,\n                            _this.fetchAndMapExercisesWithVideos()\n                        ];\n                    case 2:\n                        exercisesWithVideos = _state.sent();\n                        // Map the exercises\n                        mappedExercises = (workoutData.exercises || []).map(function(exerciseRef) {\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name === exerciseRef.exercise.name;\n                            });\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_14__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({}, exerciseRef), {\n                                exercise: fullExercise || exerciseRef.exercise\n                            });\n                        });\n                        workoutData.exercises = mappedExercises;\n                        workout = new _workout_types__WEBPACK_IMPORTED_MODULE_6__.Workout((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({\n                            id: workoutId\n                        }, workoutData));\n                        // Fetch and map logs\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 3:\n                        logsSnapshot = _state.sent();\n                        console.log(\"Found logs count:\", logsSnapshot.size);\n                        logs = logsSnapshot.docs.map(function(logDoc) {\n                            var _logData_exercise_category_details, _logData_exercise_category, _logData_exercise_category1, _fullExercise_category, _fullExercise_category1, _logData_exercise_category2, _logData_exercise_category_details1, _logData_exercise_category3, _fullExercise_category_details, _fullExercise_category2, _updatedExercise_category_details, _updatedExercise_category;\n                            var logData = logDoc.data();\n                            console.log(\"Raw log data from Firebase:\", {\n                                exerciseName: logData.exercise.name,\n                                exerciseCategory: logData.exercise.category,\n                                savedScreenTime: (_logData_exercise_category = logData.exercise.category) === null || _logData_exercise_category === void 0 ? void 0 : (_logData_exercise_category_details = _logData_exercise_category.details) === null || _logData_exercise_category_details === void 0 ? void 0 : _logData_exercise_category_details.screenTime\n                            });\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name === logData.exercise.name;\n                            });\n                            var _logData_exercise_category_details_screenTime, _ref;\n                            // Preserve the saved category details while merging with template exercise\n                            var updatedExercise = fullExercise ? (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_14__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({}, fullExercise), {\n                                category: {\n                                    type: ((_logData_exercise_category1 = logData.exercise.category) === null || _logData_exercise_category1 === void 0 ? void 0 : _logData_exercise_category1.type) || ((_fullExercise_category = fullExercise.category) === null || _fullExercise_category === void 0 ? void 0 : _fullExercise_category.type),\n                                    details: (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_14__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({}, ((_fullExercise_category1 = fullExercise.category) === null || _fullExercise_category1 === void 0 ? void 0 : _fullExercise_category1.details) || {}, ((_logData_exercise_category2 = logData.exercise.category) === null || _logData_exercise_category2 === void 0 ? void 0 : _logData_exercise_category2.details) || {}), {\n                                        // Explicitly preserve screenTime\n                                        screenTime: (_ref = (_logData_exercise_category_details_screenTime = (_logData_exercise_category3 = logData.exercise.category) === null || _logData_exercise_category3 === void 0 ? void 0 : (_logData_exercise_category_details1 = _logData_exercise_category3.details) === null || _logData_exercise_category_details1 === void 0 ? void 0 : _logData_exercise_category_details1.screenTime) !== null && _logData_exercise_category_details_screenTime !== void 0 ? _logData_exercise_category_details_screenTime : (_fullExercise_category2 = fullExercise.category) === null || _fullExercise_category2 === void 0 ? void 0 : (_fullExercise_category_details = _fullExercise_category2.details) === null || _fullExercise_category_details === void 0 ? void 0 : _fullExercise_category_details.screenTime) !== null && _ref !== void 0 ? _ref : 0\n                                    })\n                                }\n                            }) : logData.exercise;\n                            console.log(\"Updated exercise category:\", {\n                                name: updatedExercise.name,\n                                category: updatedExercise.category,\n                                screenTime: (_updatedExercise_category = updatedExercise.category) === null || _updatedExercise_category === void 0 ? void 0 : (_updatedExercise_category_details = _updatedExercise_category.details) === null || _updatedExercise_category_details === void 0 ? void 0 : _updatedExercise_category_details.screenTime\n                            });\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseLog({\n                                id: logDoc.id,\n                                workoutId: workoutId,\n                                userId: userId,\n                                exercise: updatedExercise,\n                                logs: logData.log || [],\n                                feedback: logData.feedback || \"\",\n                                note: logData.note || \"\",\n                                recommendedWeight: logData.recommendedWeight || \"calculating...\",\n                                isSplit: logData.isSplit || false,\n                                isBodyWeight: logData.isBodyWeight || false,\n                                logSubmitted: logData.logSubmitted || false,\n                                logIsEditing: logData.logIsEditing || false,\n                                isCompleted: logData.isCompleted || false,\n                                completedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(logData.completedAt),\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(logData.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(logData.updatedAt)\n                            });\n                        });\n                        workout.logs = logs;\n                        return [\n                            2,\n                            [\n                                workout,\n                                logs\n                            ]\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error fetching saved workout:\", error);\n                        throw error;\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n * Fetch user challenges by challengeId.\n * @param challengeId The ID of the challenge to fetch associated user challenges for.\n * @returns A promise resolving to an array of user challenges.\n * @throws If the Firestore query fails.\n */ _proto.fetchUserChallengesByChallengeId = function fetchUserChallengesByChallengeId(challengeId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var userChallengesRef, q, snapshot, userChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"challengeId\", \"==\", challengeId));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // console.log(`Total user challenges fetched: ${snapshot.docs.length}`);\n                        userChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            // console.log(`Processing user challenge with ID: ${doc.id}`, data);\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_14__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({\n                                id: doc.id\n                            }, data), {\n                                challenge: data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_6__.Challenge({\n                                    id: data.challenge.id,\n                                    title: data.challenge.title,\n                                    subtitle: data.challenge.subtitle,\n                                    participants: data.challenge.participants || [],\n                                    status: data.challenge.status,\n                                    startDate: data.challenge.startDate ? new Date(data.challenge.startDate) : new Date(),\n                                    endDate: data.challenge.endDate ? new Date(data.challenge.endDate) : new Date(),\n                                    createdAt: data.challenge.createdAt ? new Date(data.challenge.createdAt) : new Date(),\n                                    updatedAt: data.challenge.updatedAt ? new Date(data.challenge.updatedAt) : new Date(),\n                                    introVideos: (data.challenge.introVideos || []).map(function(v) {\n                                        return new _workout_types__WEBPACK_IMPORTED_MODULE_6__.IntroVideo({\n                                            id: v.id,\n                                            userId: v.userId,\n                                            videoUrl: v.videoUrl\n                                        });\n                                    })\n                                }) : undefined,\n                                createdAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_7__.convertTimestamp)(data.createdAt),\n                                updatedAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_7__.convertTimestamp)(data.updatedAt)\n                            });\n                        });\n                        // console.log('All user challenges after processing:', JSON.stringify(userChallenges, null, 2));\n                        return [\n                            2,\n                            userChallenges\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges by challengeId:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getCollectionById = function getCollectionById(id) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var docRef, docSnap, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        console.log(\"Fetching collection with id:\", id);\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\", id);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef)\n                        ];\n                    case 2:\n                        docSnap = _state.sent();\n                        if (docSnap.exists()) {\n                            return [\n                                2,\n                                new _workout_types__WEBPACK_IMPORTED_MODULE_6__.SweatlistCollection((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({\n                                    id: docSnap.id\n                                }, docSnap.data()))\n                            ];\n                        } else {\n                            throw new Error(\"Collection not found\");\n                        }\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error getting collection by ID:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // In WorkoutService class\n    _proto.getCollectionsByIds = function getCollectionsByIds(collectionIds) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var collections, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        return [\n                            4,\n                            Promise.all(collectionIds.map(function() {\n                                var _ref = (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function(id) {\n                                    var docRef, docSnap, error;\n                                    return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                                        switch(_state.label){\n                                            case 0:\n                                                _state.trys.push([\n                                                    0,\n                                                    2,\n                                                    ,\n                                                    3\n                                                ]);\n                                                docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\", id);\n                                                return [\n                                                    4,\n                                                    (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef)\n                                                ];\n                                            case 1:\n                                                docSnap = _state.sent();\n                                                if (docSnap.exists()) {\n                                                    return [\n                                                        2,\n                                                        new _workout_types__WEBPACK_IMPORTED_MODULE_6__.SweatlistCollection((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({\n                                                            id: docSnap.id\n                                                        }, docSnap.data()))\n                                                    ];\n                                                }\n                                                return [\n                                                    2,\n                                                    null\n                                                ];\n                                            case 2:\n                                                error = _state.sent();\n                                                console.error(\"Error fetching collection \".concat(id, \":\"), error);\n                                                return [\n                                                    2,\n                                                    null\n                                                ];\n                                            case 3:\n                                                return [\n                                                    2\n                                                ];\n                                        }\n                                    });\n                                });\n                                return function(id) {\n                                    return _ref.apply(this, arguments);\n                                };\n                            }()))\n                        ];\n                    case 1:\n                        collections = _state.sent();\n                        // Filter out any null values from failed fetches\n                        return [\n                            2,\n                            collections.filter(function(collection) {\n                                return collection !== null;\n                            })\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error fetching collections:\", error);\n                        throw error;\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchCollections = function fetchCollections(userId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var collectionsRef, qArray, snapshotArray, collectionsFromArray, qString, snapshotString, collectionsFromString, combined, uniqueCollections, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"User ID is required\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            4,\n                            ,\n                            5\n                        ]);\n                        collectionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\");\n                        // Query for records where ownerId is an array that contains the userId.\n                        qArray = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(collectionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"ownerId\", \"array-contains\", userId));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(qArray)\n                        ];\n                    case 2:\n                        snapshotArray = _state.sent();\n                        collectionsFromArray = snapshotArray.docs.map(function(doc) {\n                            var data = (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({\n                                id: doc.id\n                            }, doc.data());\n                            return new _workout_types__WEBPACK_IMPORTED_MODULE_6__.SweatlistCollection(data);\n                        });\n                        console.log(\"The array collections\", collectionsFromArray);\n                        // Query for records where ownerId is a string equal to the userId.\n                        qString = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(collectionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"ownerId\", \"==\", userId));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(qString)\n                        ];\n                    case 3:\n                        snapshotString = _state.sent();\n                        collectionsFromString = snapshotString.docs.map(function(doc) {\n                            var data = (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({\n                                id: doc.id\n                            }, doc.data());\n                            return new _workout_types__WEBPACK_IMPORTED_MODULE_6__.SweatlistCollection(data);\n                        });\n                        console.log(\"The string collections\", collectionsFromString);\n                        // Combine both arrays and remove duplicates (if any) based on the collection id.\n                        combined = (0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_18__._)(collectionsFromArray).concat((0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_18__._)(collectionsFromString));\n                        uniqueCollections = new Map();\n                        combined.forEach(function(collection) {\n                            uniqueCollections.set(collection.id, collection);\n                        });\n                        return [\n                            2,\n                            Array.from(uniqueCollections.values())\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error fetching sweatlists:\", error);\n                        throw error;\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetch user challenges by userId and filter for active challenges.\n   * @returns A promise resolving to an array of active challenges.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ _proto.fetchActiveChallenges = function fetchActiveChallenges() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var currentUser, userChallengesRef, q, snapshot, allChallenges, activeChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", currentUser.id));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // console.log(`Total challenges fetched: ${snapshot.docs.length}`);\n                        allChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            // console.log(`Processing challenge with ID: ${doc.id}`, data);\n                            // Use the Challenge constructor to parse the challenge data\n                            // console.log(\"date before format: \" + convertFirestoreTimestamp(data.challenge.startDate));\n                            var challenge = data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_6__.Challenge({\n                                id: data.challenge.id,\n                                title: data.challenge.title,\n                                subtitle: data.challenge.subtitle,\n                                participants: data.challenge.participants || [],\n                                status: data.challenge.status,\n                                startDate: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.challenge.startDate),\n                                endDate: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.challenge.endDate),\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.challenge.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.challenge.updatedAt),\n                                introVideos: (data.challenge.introVideos || []).map(function(v) {\n                                    return new _workout_types__WEBPACK_IMPORTED_MODULE_6__.IntroVideo({\n                                        id: v.id,\n                                        userId: v.userId,\n                                        videoUrl: v.videoUrl\n                                    });\n                                })\n                            }) : undefined;\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_14__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({\n                                id: doc.id\n                            }, data), {\n                                challenge: challenge,\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.updatedAt)\n                            });\n                        });\n                        // console.log('All challenges after processing:', JSON.stringify(allChallenges, null, 2));\n                        // Filter for active challenges (endDate > current date)\n                        activeChallenges = allChallenges.filter(function(userChallenge) {\n                            var _userChallenge_challenge;\n                            var endDate = (_userChallenge_challenge = userChallenge.challenge) === null || _userChallenge_challenge === void 0 ? void 0 : _userChallenge_challenge.endDate;\n                            // console.log(\n                            //   `Evaluating challenge ID: ${userChallenge.id}, End Date: ${endDate}, Current Date: ${new Date()}`\n                            // );\n                            return endDate && endDate > new Date();\n                        });\n                        // console.log(`Total active challenges: ${activeChallenges.length}`, activeChallenges);\n                        return [\n                            2,\n                            activeChallenges\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching active challenges:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetch user challenges by userId.\n   * @returns A promise resolving to an array of challenges.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ _proto.fetchUserChallenges = function fetchUserChallenges() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var currentUser, userChallengesRef, q, snapshot, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Reference to the user-challenge collection\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        // Query challenges where userId matches the current user's ID\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", currentUser.id));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // Map documents to an array of Challenge objects\n                        return [\n                            2,\n                            snapshot.docs.map(function(doc) {\n                                return new _workout_types__WEBPACK_IMPORTED_MODULE_6__.UserChallenge((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({\n                                    id: doc.id\n                                }, doc.data()));\n                            })\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges:\", error);\n                        throw new Error(\"Failed to fetch user challenges\");\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    //update the workout summary,\n    _proto.updateWorkoutSummary = function updateWorkoutSummary(param) {\n        var userId = param.userId, workoutId = param.workoutId, summary = param.summary;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var summaryRef, summaryData, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"No user ID provided\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        // Create a reference to the collection\n                        summaryRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSummary\", summary.id);\n                        // Convert summary to a plain object for Firestore\n                        summaryData = {\n                            id: summary.id,\n                            workoutId: summary.workoutId,\n                            exercises: summary.exercises,\n                            bodyParts: summary.bodyParts,\n                            secondaryBodyParts: summary.secondaryBodyParts,\n                            workoutTitle: summary.workoutTitle,\n                            caloriesBurned: summary.caloriesBurned,\n                            workoutRating: summary.workoutRating,\n                            exercisesCompleted: summary.exercisesCompleted,\n                            aiInsight: summary.aiInsight,\n                            recommendations: summary.recommendations,\n                            gifURLs: summary.gifURLs,\n                            recommendedWork: summary.recommendedWork,\n                            isCompleted: summary.isCompleted,\n                            createdAt: summary.createdAt,\n                            updatedAt: new Date(),\n                            completedAt: summary.completedAt,\n                            duration: summary.duration\n                        };\n                        // Set data with merge enabled (equivalent to Swift's setData with merge: true)\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(summaryRef, summaryData, {\n                                merge: true\n                            })\n                        ];\n                    case 2:\n                        _state.sent();\n                        console.log(\"Workout summary document updated successfully\");\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error updating workout summary:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.updateWorkoutLogs = function updateWorkoutLogs(param) {\n        var userId = param.userId, workoutId = param.workoutId, logs = param.logs;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var workoutRef, logsRef, batch, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", workoutId);\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\");\n                        batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n                        logs.forEach(function(log) {\n                            var logDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(logsRef, log.id);\n                            batch.update(logDocRef, (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({}, log.toDictionary()));\n                        });\n                        return [\n                            4,\n                            batch.commit()\n                        ];\n                    case 1:\n                        _state.sent();\n                        return [\n                            3,\n                            3\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error updating workout logs:\", error);\n                        throw error;\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // The cancelWorkout method  it deletes the workout session and summary (if any),\n    // cleans up the local state, and logs the cancellation.\n    _proto.cancelWorkout = function cancelWorkout(workout, workoutSummary) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var _userService_currentUser, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!((_userService_currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser === void 0 ? void 0 : _userService_currentUser.id) || !workout) {\n                            throw new Error(\"User not authenticated.\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            5,\n                            ,\n                            6\n                        ]);\n                        return [\n                            4,\n                            _this.deleteWorkoutSession(workout.id)\n                        ];\n                    case 2:\n                        _state.sent();\n                        if (!workoutSummary) return [\n                            3,\n                            4\n                        ];\n                        return [\n                            4,\n                            _this.deleteWorkoutSummary(workoutSummary.id)\n                        ];\n                    case 3:\n                        _state.sent();\n                        _state.label = 4;\n                    case 4:\n                        _this.cleanUpWorkoutInProgress();\n                        console.log(\"Workout canceled and cleaned up successfully.\");\n                        return [\n                            3,\n                            6\n                        ];\n                    case 5:\n                        error = _state.sent();\n                        console.error(\"Error canceling workout:\", error);\n                        throw error;\n                    case 6:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // Deletes a workout session document and all its subcollection \"logs\"\n    _proto.deleteWorkoutSession = function deleteWorkoutSession(workoutId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var _userService_currentUser, userId, workoutRef, logsRef, logsSnapshot, batch, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!((_userService_currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser === void 0 ? void 0 : _userService_currentUser.id) || !workoutId) {\n                            throw new Error(\"User not authenticated.\");\n                        }\n                        userId = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser.id;\n                        workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", workoutId);\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            4,\n                            ,\n                            5\n                        ]);\n                        // Delete all logs in the subcollection\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 2:\n                        logsSnapshot = _state.sent();\n                        batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n                        logsSnapshot.docs.forEach(function(logDoc) {\n                            batch[\"delete\"](logDoc.ref);\n                        });\n                        // Delete the main workout document\n                        batch[\"delete\"](workoutRef);\n                        return [\n                            4,\n                            batch.commit()\n                        ];\n                    case 3:\n                        _state.sent();\n                        console.log(\"Workout session and logs deleted successfully.\");\n                        return [\n                            3,\n                            5\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error deleting workout session:\", error);\n                        throw error;\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // Deletes the workout summary document.\n    _proto.deleteWorkoutSummary = function deleteWorkoutSummary(workoutSummaryId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var _userService_currentUser, summaryRef, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!workoutSummaryId || !((_userService_currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser === void 0 ? void 0 : _userService_currentUser.id)) {\n                            return [\n                                2\n                            ];\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        summaryRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser.id, \"workoutSummary\", workoutSummaryId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.deleteDoc)(summaryRef)\n                        ];\n                    case 2:\n                        _state.sent();\n                        console.log(\"Workout summary deleted successfully.\");\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error deleting workout summary:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // Clean up local storage and in-memory workout state.\n    _proto.cleanUpWorkoutInProgress = function cleanUpWorkoutInProgress() {\n        _redux_store__WEBPACK_IMPORTED_MODULE_9__.store.dispatch((0,_redux_workoutSlice__WEBPACK_IMPORTED_MODULE_10__.resetWorkoutState)());\n    };\n    /**\n   * Fetch the workout session from Firestore, returning { workout, logs }.\n   * Checks first for a QueuedUp session, then for InProgress.\n   */ _proto.fetchCurrentWorkoutSession = function fetchCurrentWorkoutSession(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var exerciseSnapshot, videoSnapshot, exerciseVideos, exercisesWithVideos, workoutSessionsRef, q, snap;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) throw new Error(\"No user ID provided\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseVideo((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        exercisesWithVideos = exerciseSnapshot.docs.map(function(doc) {\n                            var exercise = new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({\n                                id: doc.id\n                            }, doc.data()));\n                            var matchingVideos = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            });\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_14__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({}, exercise), {\n                                videos: matchingVideos\n                            }));\n                        });\n                        workoutSessionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(workoutSessionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", _workout_types__WEBPACK_IMPORTED_MODULE_6__.WorkoutStatus.QueuedUp));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 3:\n                        snap = _state.sent();\n                        if (!snap.empty) {\n                            return [\n                                2,\n                                _this.processWorkoutSessionDocument(snap.docs[0], exercisesWithVideos)\n                            ];\n                        }\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(workoutSessionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", _workout_types__WEBPACK_IMPORTED_MODULE_6__.WorkoutStatus.InProgress));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 4:\n                        snap = _state.sent();\n                        if (!snap.empty) {\n                            return [\n                                2,\n                                _this.processWorkoutSessionDocument(snap.docs[0], exercisesWithVideos)\n                            ];\n                        }\n                        return [\n                            2,\n                            {\n                                workout: null,\n                                logs: null\n                            }\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchAndMapExercisesWithVideos = function fetchAndMapExercisesWithVideos() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var exerciseSnapshot, exercises, videoSnapshot, exerciseVideos, exercisesWithVideos, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseVideo((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        // console.log(`Fetched ${exerciseVideos.length} exercise videos`);\n                        // 3. Map videos to exercises\n                        exercisesWithVideos = exercises.map(function(exercise) {\n                            var matchingVideos = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            });\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_14__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({}, exercise), {\n                                videos: matchingVideos\n                            }));\n                        });\n                        // console.log('Finished mapping exercises with videos');\n                        // console.log(`Total exercises with videos: ${exercisesWithVideos.length}`);\n                        return [\n                            2,\n                            exercisesWithVideos\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching and mapping exercises with videos:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Helper to build the Workout object + any logs from the snapshot.\n   */ _proto.fetchAllWorkoutSessions = function fetchAllWorkoutSessions(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var exerciseSnapshot, exercises, videoSnapshot, exerciseVideos, exercisesWithVideos, workoutSessionsRef, snap, sessions, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"No user ID provided\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            6,\n                            ,\n                            7\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 2:\n                        exerciseSnapshot = _state.sent();\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 3:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseVideo((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        exercisesWithVideos = exercises.map(function(exercise) {\n                            var matchingVideos = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            });\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_14__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({}, exercise), {\n                                videos: matchingVideos\n                            }));\n                        });\n                        workoutSessionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(workoutSessionsRef)\n                        ];\n                    case 4:\n                        snap = _state.sent();\n                        if (snap.empty) {\n                            console.log(\"No workout sessions found for user\");\n                            return [\n                                2,\n                                []\n                            ];\n                        }\n                        return [\n                            4,\n                            Promise.all(snap.docs.map(function() {\n                                var _ref = (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function(doc) {\n                                    var sessionData;\n                                    return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                                        switch(_state.label){\n                                            case 0:\n                                                return [\n                                                    4,\n                                                    _this.processWorkoutSessionDocument(doc, exercisesWithVideos)\n                                                ];\n                                            case 1:\n                                                sessionData = _state.sent();\n                                                if (sessionData.logs) {\n                                                    sessionData.logs.sort(function(a, b) {\n                                                        var _a_order;\n                                                        var orderA = (_a_order = a.order) !== null && _a_order !== void 0 ? _a_order : 0;\n                                                        var _b_order;\n                                                        var orderB = (_b_order = b.order) !== null && _b_order !== void 0 ? _b_order : 0;\n                                                        return orderA - orderB;\n                                                    });\n                                                }\n                                                return [\n                                                    2,\n                                                    sessionData\n                                                ];\n                                        }\n                                    });\n                                });\n                                return function(doc) {\n                                    return _ref.apply(this, arguments);\n                                };\n                            }()))\n                        ];\n                    case 5:\n                        sessions = _state.sent();\n                        return [\n                            2,\n                            sessions\n                        ];\n                    case 6:\n                        error = _state.sent();\n                        console.error(\"Error fetching workout sessions:\", error);\n                        throw error;\n                    case 7:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // Add the updateUserChallenge method\n    _proto.updateUserChallenge = function updateUserChallenge(challenge) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var _userService_currentUser, challengeRef, challengeData, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!((_userService_currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser === void 0 ? void 0 : _userService_currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        challengeRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\", challenge.id);\n                        challengeData = (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_14__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({}, challenge), {\n                            updatedAt: new Date()\n                        });\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(challengeRef, challengeData, {\n                                merge: true\n                            })\n                        ];\n                    case 2:\n                        _state.sent();\n                        console.log(\"User challenge updated successfully\");\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error updating user challenge:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.updateCollection = function updateCollection(collection) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var collRef, newDocRef, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        collRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\");\n                        // If collection.id is empty, generate a new doc ID and assign it.\n                        if (!collection.id || collection.id.trim() === \"\") {\n                            newDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(collRef);\n                            collection.id = newDocRef.id;\n                        }\n                        // Ensure the challenge id matches the collection id.\n                        if (collection.challenge) {\n                            collection.challenge.id = collection.id;\n                        }\n                        // Update the updatedAt field.\n                        collection.updatedAt = new Date();\n                        // Save the collection to Firestore.\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(collRef, collection.id), collection.toDictionary())\n                        ];\n                    case 1:\n                        _state.sent();\n                        console.log(\"Collection updated successfully\");\n                        return [\n                            2,\n                            collection\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error updating collection document:\", error);\n                        throw new Error(\"Error while updating the collection\");\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.processWorkoutSessionDocument = function processWorkoutSessionDocument(workoutDoc, exercisesWithVideos) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var data, mappedExercises, workout, logsRef, logsSnapshot, logs;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        data = workoutDoc.data();\n                        // Map exercises with their full data and videos\n                        mappedExercises = (data.exercises || []).map(function(exerciseRef) {\n                            var _exerciseRef_exercise_name, _exerciseRef_exercise;\n                            // Find the full exercise with videos\n                            var exerciseNameLower = (_exerciseRef_exercise = exerciseRef.exercise) === null || _exerciseRef_exercise === void 0 ? void 0 : (_exerciseRef_exercise_name = _exerciseRef_exercise.name) === null || _exerciseRef_exercise_name === void 0 ? void 0 : _exerciseRef_exercise_name.toLowerCase().trim();\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name.toLowerCase().trim() === exerciseNameLower;\n                            });\n                            // If full exercise found, return it, otherwise use the original\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_14__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({}, exerciseRef), {\n                                exercise: fullExercise || exerciseRef.exercise\n                            });\n                        });\n                        // Create the workout with mapped exercises\n                        workout = new _workout_types__WEBPACK_IMPORTED_MODULE_6__.Workout({\n                            id: workoutDoc.id,\n                            roundWorkoutId: data.roundWorkoutId || \"\",\n                            exercises: mappedExercises,\n                            title: data.title || \"\",\n                            description: data.description || \"\",\n                            duration: data.duration || 0,\n                            useAuthorContent: data.useAuthorContent || false,\n                            isCompleted: data.isCompleted || false,\n                            workoutStatus: data.workoutStatus || _workout_types__WEBPACK_IMPORTED_MODULE_6__.WorkoutStatus.Archived,\n                            author: data.author || \"\",\n                            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.createdAt),\n                            updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.updatedAt),\n                            startTime: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.startTime),\n                            collectionId: data.collectionId,\n                            challenge: data.challenge,\n                            logs: (data.logs || []).map(function(logData) {\n                                var _logData_exercise_name, _logData_exercise;\n                                // Map logs with full exercises\n                                var exerciseNameLower = (_logData_exercise = logData.exercise) === null || _logData_exercise === void 0 ? void 0 : (_logData_exercise_name = _logData_exercise.name) === null || _logData_exercise_name === void 0 ? void 0 : _logData_exercise_name.toLowerCase().trim();\n                                var fullExercise = exercisesWithVideos.find(function(ex) {\n                                    return ex.name.toLowerCase().trim() === exerciseNameLower;\n                                });\n                                return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_14__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({}, logData), {\n                                    exercise: fullExercise || logData.exercise\n                                });\n                            }),\n                            workoutRating: data.workoutRating,\n                            order: data.order,\n                            zone: data.zone || _workout_types__WEBPACK_IMPORTED_MODULE_6__.BodyZone.FullBody\n                        });\n                        // Fetch logs from subcollection\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutDoc.ref, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 1:\n                        logsSnapshot = _state.sent();\n                        logs = logsSnapshot.docs.map(function(logDoc) {\n                            var _logData_exercise_name, _logData_exercise;\n                            var logData = logDoc.data();\n                            // Find the full exercise with videos\n                            var exerciseNameLower = (_logData_exercise = logData.exercise) === null || _logData_exercise === void 0 ? void 0 : (_logData_exercise_name = _logData_exercise.name) === null || _logData_exercise_name === void 0 ? void 0 : _logData_exercise_name.toLowerCase().trim();\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name.toLowerCase().trim() === exerciseNameLower;\n                            });\n                            var updatedExercise = fullExercise ? (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_14__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({}, fullExercise), {\n                                category: logData.exercise.category\n                            }) : logData.exercise;\n                            // Prepare log data with full exercise\n                            var preparedLogData = (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_14__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({}, logData), {\n                                id: logDoc.id,\n                                workoutId: workout.id,\n                                exercise: updatedExercise,\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(logData.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(logData.updatedAt)\n                            });\n                            // Use the ExerciseLog constructor to ensure proper mapping\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseLog(preparedLogData);\n                        });\n                        return [\n                            2,\n                            {\n                                workout: workout,\n                                logs: logs\n                            }\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.saveWorkoutSession = function saveWorkoutSession(param) {\n        var userId = param.userId, workout = param.workout, logs = param.logs;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var currentDate, cleanWorkout, workoutSessionRef, logsRef, logBatch, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) throw new Error(\"No user ID provided\");\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            4,\n                            ,\n                            5\n                        ]);\n                        currentDate = new Date();\n                        cleanWorkout = new _workout_types__WEBPACK_IMPORTED_MODULE_6__.Workout((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_14__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_15__._)({}, workout), {\n                            roundWorkoutId: \"\".concat(workout.id, \"-\").concat(currentDate.getTime()),\n                            workoutStatus: _workout_types__WEBPACK_IMPORTED_MODULE_6__.WorkoutStatus.QueuedUp,\n                            createdAt: currentDate,\n                            updatedAt: currentDate,\n                            startTime: currentDate,\n                            logs: []\n                        }));\n                        workoutSessionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\"));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(workoutSessionRef, cleanWorkout.toDictionary())\n                        ];\n                    case 2:\n                        _state.sent();\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutSessionRef, \"logs\");\n                        logBatch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n                        logs.forEach(function(log, index) {\n                            var logDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(logsRef, \"\".concat(log.id, \"-\").concat(currentDate.getTime()));\n                            logBatch.set(logDocRef, {\n                                id: logDocRef.id,\n                                workoutId: workoutSessionRef.id,\n                                exercise: log.exercise.toDictionary(),\n                                order: index,\n                                createdAt: currentDate.getTime(),\n                                updatedAt: currentDate.getTime(),\n                                logSubmitted: false,\n                                isCompleted: false\n                            });\n                        });\n                        return [\n                            4,\n                            logBatch.commit()\n                        ];\n                    case 3:\n                        _state.sent();\n                        return [\n                            2,\n                            cleanWorkout\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error saving workout session:\", error);\n                        throw error;\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Example \"join challenge\" method using the client SDK (no admin privileges).\n   * This creates a doc in `user-challenge` with the userId, challengeId, etc.\n   */ _proto.joinChallenge = function joinChallenge(param) {\n        var username = param.username, challengeId = param.challengeId;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_12__._)(function() {\n            var currentUser, usersRef, userQuery, userSnapshot, userDoc, userData, userId, challengeRef, challengeSnap, challenge, userChallengeId, userChallengeData;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_13__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        // 1) Make sure we have a signed-in user\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!currentUser) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // 2) Find the user doc by username\n                        usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\");\n                        userQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"username\", \"==\", username));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(userQuery)\n                        ];\n                    case 1:\n                        userSnapshot = _state.sent();\n                        if (userSnapshot.empty) {\n                            throw new Error(\"User not found\");\n                        }\n                        userDoc = userSnapshot.docs[0];\n                        userData = userDoc.data();\n                        userId = userDoc.id;\n                        // 3) Check if the challenge doc exists\n                        challengeRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\", challengeId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(challengeRef)\n                        ];\n                    case 2:\n                        challengeSnap = _state.sent();\n                        if (!challengeSnap.exists()) {\n                            throw new Error(\"Challenge not found\");\n                        }\n                        challenge = challengeSnap.data();\n                        // 4) Build new user-challenge document\n                        userChallengeId = \"\".concat(challengeId, \"-\").concat(userId, \"-\").concat(Date.now());\n                        userChallengeData = {\n                            id: userChallengeId,\n                            challenge: challenge,\n                            challengeId: challengeId,\n                            userId: userId,\n                            fcmToken: userData.fcmToken || \"\",\n                            profileImage: userData.profileImage || {},\n                            progress: 0,\n                            completedWorkouts: [],\n                            isCompleted: false,\n                            uid: userId,\n                            location: userData.location || null,\n                            city: \"\",\n                            country: \"\",\n                            timezone: \"\",\n                            username: username,\n                            joinDate: new Date(),\n                            createdAt: new Date(),\n                            updatedAt: new Date(),\n                            pulsePoints: {\n                                baseCompletion: 0,\n                                firstCompletion: 0,\n                                streakBonus: 0,\n                                checkInBonus: 0,\n                                effortRating: 0,\n                                chatParticipation: 0,\n                                locationCheckin: 0,\n                                contentEngagement: 0,\n                                encouragementSent: 0,\n                                encouragementReceived: 0\n                            },\n                            currentStreak: 0,\n                            encouragedUsers: [],\n                            encouragedByUsers: [],\n                            checkIns: []\n                        };\n                        // 5) Store user-challenge doc\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\", userChallengeId), userChallengeData)\n                        ];\n                    case 3:\n                        _state.sent();\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    (0,_swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_19__._)(WorkoutService, [\n        {\n            key: \"currentWorkout\",\n            get: // Replace getters/setters to use Redux\n            function get() {\n                return _redux_store__WEBPACK_IMPORTED_MODULE_9__.store.getState().workout.currentWorkout;\n            },\n            set: function set(workout) {\n                _redux_store__WEBPACK_IMPORTED_MODULE_9__.store.dispatch((0,_redux_workoutSlice__WEBPACK_IMPORTED_MODULE_10__.setCurrentWorkout)(workout));\n            }\n        },\n        {\n            key: \"currentWorkoutLogs\",\n            get: function get() {\n                return _redux_store__WEBPACK_IMPORTED_MODULE_9__.store.getState().workout.currentExerciseLogs;\n            },\n            set: function set(logs) {\n                _redux_store__WEBPACK_IMPORTED_MODULE_9__.store.dispatch((0,_redux_workoutSlice__WEBPACK_IMPORTED_MODULE_10__.setCurrentExerciseLogs)(logs));\n            }\n        },\n        {\n            key: \"currentWorkoutSummary\",\n            get: function get() {\n                return _redux_store__WEBPACK_IMPORTED_MODULE_9__.store.getState().workout.workoutSummary;\n            },\n            set: function set(workoutSummary) {\n                _redux_store__WEBPACK_IMPORTED_MODULE_9__.store.dispatch((0,_redux_workoutSlice__WEBPACK_IMPORTED_MODULE_10__.setWorkoutSummary)(workoutSummary));\n            }\n        }\n    ]);\n    return WorkoutService;\n}();\nvar workoutService = new WorkoutService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MjVDQyxJQUFNOEIsaUJBQWlCLElBQUk5QixpQkFBaUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2FwaS9maXJlYmFzZS93b3Jrb3V0L3NlcnZpY2UudHM/YzVlMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvYXBpL2ZpcmViYXNlL3dvcmtvdXQvc2VydmljZS50c1xuaW1wb3J0IHtcbiAgY29sbGVjdGlvbixcbiAgZG9jLFxuICBnZXREb2NzLFxuICBnZXREb2MsXG4gIHVwZGF0ZURvYyxcbiAgcXVlcnksXG4gIHdoZXJlLFxuICBvcmRlckJ5LCBcbiAgRG9jdW1lbnREYXRhLFxuICBRdWVyeURvY3VtZW50U25hcHNob3QsXG4gIGNvbGxlY3Rpb24gYXMgZnNDb2xsZWN0aW9uLFxuICBzZXREb2MsXG4gIGRlbGV0ZURvYyxcbiAgd3JpdGVCYXRjaFxufSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xuXG5pbXBvcnQgeyBkYiB9IGZyb20gJy4uL2NvbmZpZyc7XG5pbXBvcnQgeyB1c2VyU2VydmljZSB9IGZyb20gJy4uL3VzZXInO1xuaW1wb3J0IHsgXG4gIEV4ZXJjaXNlTG9nLCBcbiAgRXhlcmNpc2VDYXRlZ29yeSwgXG4gIEV4ZXJjaXNlLCBcbiAgQm9keVBhcnQsIFxuICBFeGVyY2lzZVZpZGVvLCBcbiAgRXhlcmNpc2VBdXRob3IsIFxuICBFeGVyY2lzZVZpZGVvVmlzaWJpbGl0eSwgXG4gIEV4ZXJjaXNlRGV0YWlsLCBcbiAgRXhlcmNpc2VSZWZlcmVuY2UgfSBmcm9tICcuLi9leGVyY2lzZS90eXBlcyc7XG5pbXBvcnQgeyBleGVyY2lzZVNlcnZpY2UgfSBmcm9tICcuLi9leGVyY2lzZS9zZXJ2aWNlJztcbmltcG9ydCB7IFByb2ZpbGVJbWFnZSwgVXNlciB9IGZyb20gJy4uL3VzZXIvdHlwZXMnXG5pbXBvcnQgeyBXb3Jrb3V0LCBXb3Jrb3V0U3VtbWFyeSwgQm9keVpvbmUsIEludHJvVmlkZW8sIFJlcHNBbmRXZWlnaHRMb2csIFdvcmtvdXRSYXRpbmcgfSBmcm9tICcuLi93b3Jrb3V0L3R5cGVzJztcbmltcG9ydCB7IFdvcmtvdXRTdGF0dXMsIFN3ZWF0bGlzdENvbGxlY3Rpb24gfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGZvcm1hdCB9IGZyb20gJ2RhdGUtZm5zJzsgXG5pbXBvcnQgeyBjb252ZXJ0VGltZXN0YW1wLCBzZXJ2ZXJUaW1lc3RhbXAgfSBmcm9tICcuLi8uLi8uLi91dGlscy90aW1lc3RhbXAnOyAvLyBBZGp1c3QgdGhlIGltcG9ydCBwYXRoXG5pbXBvcnQgeyBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvZm9ybWF0RGF0ZSc7XG5pbXBvcnQgeyBDaGFsbGVuZ2UsIENoYWxsZW5nZVN0YXR1cywgVXNlckNoYWxsZW5nZSB9IGZyb20gJy4uLy4uLy4uL2FwaS9maXJlYmFzZS93b3Jrb3V0L3R5cGVzJztcblxuaW1wb3J0IHsgc3RvcmUgfSBmcm9tICcuLi8uLi8uLi9yZWR1eC9zdG9yZSc7XG5pbXBvcnQgeyBzZXRDdXJyZW50V29ya291dCwgc2V0Q3VycmVudEV4ZXJjaXNlTG9ncywgcmVzZXRXb3Jrb3V0U3RhdGUsIHNldFdvcmtvdXRTdW1tYXJ5IH0gZnJvbSAnLi4vLi4vLi4vcmVkdXgvd29ya291dFNsaWNlJztcblxuXG5pbnRlcmZhY2UgRmlyZXN0b3JlRXJyb3Ige1xuICBjb2RlOiBzdHJpbmc7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBzdGFjaz86IHN0cmluZztcbn1cblxuY2xhc3MgV29ya291dFNlcnZpY2Uge1xuXG4vLyBSZXBsYWNlIGdldHRlcnMvc2V0dGVycyB0byB1c2UgUmVkdXhcbiAgZ2V0IGN1cnJlbnRXb3Jrb3V0KCk6IFdvcmtvdXQgfCBudWxsIHtcbiAgICByZXR1cm4gc3RvcmUuZ2V0U3RhdGUoKS53b3Jrb3V0LmN1cnJlbnRXb3Jrb3V0O1xuICB9XG5cbiAgc2V0IGN1cnJlbnRXb3Jrb3V0KHdvcmtvdXQ6IFdvcmtvdXQgfCBudWxsKSB7XG4gICAgc3RvcmUuZGlzcGF0Y2goc2V0Q3VycmVudFdvcmtvdXQod29ya291dCkpO1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRXb3Jrb3V0TG9ncygpOiBFeGVyY2lzZUxvZ1tdIHtcbiAgICByZXR1cm4gc3RvcmUuZ2V0U3RhdGUoKS53b3Jrb3V0LmN1cnJlbnRFeGVyY2lzZUxvZ3M7XG4gIH1cblxuICBzZXQgY3VycmVudFdvcmtvdXRMb2dzKGxvZ3M6IEV4ZXJjaXNlTG9nW10pIHtcbiAgICBzdG9yZS5kaXNwYXRjaChzZXRDdXJyZW50RXhlcmNpc2VMb2dzKGxvZ3MpKTtcbiAgfVxuXG4gIGdldCBjdXJyZW50V29ya291dFN1bW1hcnkoKTogV29ya291dFN1bW1hcnkgfCBudWxsIHtcbiAgICByZXR1cm4gc3RvcmUuZ2V0U3RhdGUoKS53b3Jrb3V0LndvcmtvdXRTdW1tYXJ5O1xuICB9XG5cbiAgc2V0IGN1cnJlbnRXb3Jrb3V0U3VtbWFyeSh3b3Jrb3V0U3VtbWFyeTogV29ya291dFN1bW1hcnkpIHtcbiAgICBzdG9yZS5kaXNwYXRjaChzZXRXb3Jrb3V0U3VtbWFyeSh3b3Jrb3V0U3VtbWFyeSkpO1xuICB9XG5cbiAgIGdlbmVyYXRlSWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gZG9jKGNvbGxlY3Rpb24oZGIsICd3b3Jrb3V0cycpKS5pZDtcbiAgfVxuXG4gICAgLy8gVXBkYXRlIHRoZSBmb3JtYXRXb3Jrb3V0QW5kSW5pdGlhbGl6ZUxvZ3MgZnVuY3Rpb25cbiAgYXN5bmMgZm9ybWF0V29ya291dEFuZEluaXRpYWxpemVMb2dzKFxuICAgICAgZXhlcmNpc2VEZXRhaWxzOiBFeGVyY2lzZURldGFpbFtdLFxuICAgICAgd29ya291dEF1dGhvcj86IHN0cmluZ1xuICAgICk6IFByb21pc2U8eyB3b3Jrb3V0OiBXb3Jrb3V0OyBleGVyY2lzZUxvZ3M6IEV4ZXJjaXNlTG9nW10gfT4ge1xuICAgICAgY29uc3Qgd29ya0lkID0gdGhpcy5nZW5lcmF0ZUlkKCk7IC8vIFVzZSB0aGlzLmdlbmVyYXRlSWQoKSBzaW5jZSBpdCdzIGEgY2xhc3MgbWV0aG9kXG4gICAgICBjb25zdCBleGVyY2lzZVJlZmVyZW5jZXM6IEV4ZXJjaXNlUmVmZXJlbmNlW10gPSBbXTtcbiAgICAgIGNvbnN0IGV4ZXJjaXNlTG9nczogRXhlcmNpc2VMb2dbXSA9IFtdO1xuXG4gIC8vIEVuc3VyZSBleGVyY2lzZSBkZXRhaWxzIGFyZSB2YWxpZCBiZWZvcmUgcHJvY2Vzc2luZ1xuICBjb25zdCB2YWxpZEV4ZXJjaXNlRGV0YWlscyA9IGV4ZXJjaXNlRGV0YWlscy5maWx0ZXIoZGV0YWlsID0+IGRldGFpbD8uZXhlcmNpc2UgJiYgZGV0YWlsLmV4ZXJjaXNlLmlkKTtcblxuICB2YWxpZEV4ZXJjaXNlRGV0YWlscy5mb3JFYWNoKChkZXRhaWwsIGluZGV4KSA9PiB7XG4gICAgaWYgKGRldGFpbC5leGVyY2lzZS5pZCA9PSBudWxsKSB7IHJldHVybiB9XG5cbiAgICAvLyBDcmVhdGUgdGhlIGNhdGVnb3J5IGZpcnN0XG4gICAgY29uc3QgY2F0ZWdvcnkgPSB7XG4gICAgICB0eXBlOiBkZXRhaWwuY2F0ZWdvcnk/LnR5cGUgfHwgJ3dlaWdodC10cmFpbmluZycsXG4gICAgICBkZXRhaWxzOiBkZXRhaWwuY2F0ZWdvcnk/LnR5cGUgPT09ICd3ZWlnaHQtdHJhaW5pbmcnIFxuICAgICAgICA/IHtcbiAgICAgICAgICAgIHNldHM6IGRldGFpbC5jYXRlZ29yeT8uZGV0YWlscz8uc2V0cyA/PyAzLFxuICAgICAgICAgICAgcmVwczogZGV0YWlsLmNhdGVnb3J5Py5kZXRhaWxzPy5yZXBzID8/IFsnMTInXSxcbiAgICAgICAgICAgIHdlaWdodDogZGV0YWlsLmNhdGVnb3J5Py5kZXRhaWxzPy53ZWlnaHQgPz8gMCxcbiAgICAgICAgICAgIHNjcmVlblRpbWU6IGRldGFpbC5jYXRlZ29yeT8uZGV0YWlscz8uc2NyZWVuVGltZSA/PyAwLFxuICAgICAgICAgICAgc2VsZWN0ZWRWaWRlbzogZGV0YWlsLmNhdGVnb3J5Py5kZXRhaWxzPy5zZWxlY3RlZFZpZGVvID8/IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgZHVyYXRpb246IGRldGFpbC5jYXRlZ29yeT8uZGV0YWlscz8uZHVyYXRpb24gPz8gNjAsXG4gICAgICAgICAgICBicG06IGRldGFpbC5jYXRlZ29yeT8uZGV0YWlscz8uYnBtID8/IDE0MCxcbiAgICAgICAgICAgIGNhbG9yaWVzOiBkZXRhaWwuY2F0ZWdvcnk/LmRldGFpbHM/LmNhbG9yaWVzID8/IDAsXG4gICAgICAgICAgICBzY3JlZW5UaW1lOiBkZXRhaWwuY2F0ZWdvcnk/LmRldGFpbHM/LnNjcmVlblRpbWUgPz8gMCxcbiAgICAgICAgICAgIHNlbGVjdGVkVmlkZW86IGRldGFpbC5jYXRlZ29yeT8uZGV0YWlscz8uc2VsZWN0ZWRWaWRlbyA/PyBudWxsXG4gICAgICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zb2xlLmxvZyhcIkNhdGVnb3J5IGJlaW5nIHVzZWQ6XCIsIGNhdGVnb3J5KTsgLy8gRGVidWcgbG9nXG5cbiAgICAvLyBDcmVhdGUgZXhlcmNpc2UgaW5zdGFuY2Ugd2l0aCBvdXIgbmV3IGNhdGVnb3J5XG4gICAgY29uc3QgZXhlcmNpc2VJbnN0YW5jZSA9IG5ldyBFeGVyY2lzZSh7XG4gICAgICAuLi5kZXRhaWwuZXhlcmNpc2UsXG4gICAgICBpZDogZGV0YWlsLmV4ZXJjaXNlLmlkIHx8IHdvcmtvdXRTZXJ2aWNlLmdlbmVyYXRlSWQoKSxcbiAgICAgIG5hbWU6IGRldGFpbC5leGVyY2lzZS5uYW1lIHx8ICcnLFxuICAgICAgYXV0aG9yOiBkZXRhaWwuZXhlcmNpc2UuYXV0aG9yIHx8IHtcbiAgICAgICAgdXNlcklkOiB3b3Jrb3V0QXV0aG9yIHx8IHVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyPy5pZCxcbiAgICAgICAgdXNlcm5hbWU6IHdvcmtvdXRBdXRob3IgfHwgdXNlclNlcnZpY2UuY3VycmVudFVzZXI/LnVzZXJuYW1lXG4gICAgICB9LFxuICAgICAgZGVzY3JpcHRpb246IGRldGFpbC5leGVyY2lzZS5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgIGNhdGVnb3J5OiBjYXRlZ29yeSwgIC8vIFVzZSBvdXIgbmV3IGNhdGVnb3J5IG9iamVjdFxuICAgICAgcHJpbWFyeUJvZHlQYXJ0czogZGV0YWlsLmV4ZXJjaXNlLnByaW1hcnlCb2R5UGFydHMgfHwgW10sXG4gICAgICBzZWNvbmRhcnlCb2R5UGFydHM6IGRldGFpbC5leGVyY2lzZS5zZWNvbmRhcnlCb2R5UGFydHMgfHwgW10sXG4gICAgICB0YWdzOiBkZXRhaWwuZXhlcmNpc2UudGFncyB8fCBbXSxcbiAgICAgIHZpZGVvczogZGV0YWlsLmV4ZXJjaXNlLnZpZGVvcyB8fCBbXSxcbiAgICAgIGNyZWF0ZWRBdDogZGV0YWlsLmV4ZXJjaXNlLmNyZWF0ZWRBdCB8fCBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBkZXRhaWwuZXhlcmNpc2UudXBkYXRlZEF0IHx8IG5ldyBEYXRlKClcbiAgICB9KTtcblxuICAgIC8vIENyZWF0ZSBleGVyY2lzZSByZWZlcmVuY2VcbiAgICBjb25zdCBleGVyY2lzZVJlZjogRXhlcmNpc2VSZWZlcmVuY2UgPSB7XG4gICAgICBleGVyY2lzZTogZXhlcmNpc2VJbnN0YW5jZSxcbiAgICAgIGdyb3VwSWQ6IGRldGFpbC5ncm91cElkIHx8IDBcbiAgICB9O1xuICAgIGV4ZXJjaXNlUmVmZXJlbmNlcy5wdXNoKGV4ZXJjaXNlUmVmKTtcblxuICAgIC8vIENyZWF0ZSBsb2dzIHVzaW5nIHRoZSBzYW1lIGNhdGVnb3J5IGRldGFpbHNcbiAgICBjb25zdCBzZXRzID0gY2F0ZWdvcnkuZGV0YWlscz8uc2V0cyA/PyAzO1xuICAgIGNvbnN0IHJlcHMgPSBjYXRlZ29yeS5kZXRhaWxzPy5yZXBzID8/IFsnMTInXTtcbiAgICBjb25zdCB3ZWlnaHQgPSBjYXRlZ29yeS5kZXRhaWxzPy53ZWlnaHQgPz8gMDtcblxuICAgIC8vIENyZWF0ZSBsb2dzIGZvciBlYWNoIHNldCB3aXRoIHZhbGlkYXRlZCBkYXRhXG4gICAgY29uc3Qgc2V0c0xvZ3MgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBzZXRzIH0sICgpID0+IFxuICAgICAgbmV3IFJlcHNBbmRXZWlnaHRMb2coe1xuICAgICAgICByZXBzOiBwYXJzZUludChyZXBzWzBdIHx8ICcxMicsIDEwKSxcbiAgICAgICAgd2VpZ2h0OiB3ZWlnaHQgfHwgMFxuICAgICAgfSlcbiAgICApO1xuXG4gICAgLy8gQ3JlYXRlIGV4ZXJjaXNlIGxvZyB3aXRoIHZhbGlkYXRlZCBkYXRhXG4gICAgY29uc3QgZXhlcmNpc2VMb2dJZCA9IGV4ZXJjaXNlU2VydmljZS5nZW5lcmF0ZUV4ZXJjaXNlTG9nSUQoXG4gICAgICB3b3JrSWQsXG4gICAgICB1c2VyU2VydmljZS5jdXJyZW50VXNlcj8uaWQgfHwgJ2Fub255bW91cydcbiAgICApO1xuXG4gICAgY29uc3QgbG9nID0gbmV3IEV4ZXJjaXNlTG9nKHtcbiAgICAgIGlkOiBleGVyY2lzZUxvZ0lkLFxuICAgICAgd29ya291dElkOiB3b3JrSWQsXG4gICAgICB1c2VySWQ6IHVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyPy5pZCB8fCAnYW5vbnltb3VzJyxcbiAgICAgIGV4ZXJjaXNlOiBleGVyY2lzZUluc3RhbmNlLFxuICAgICAgbG9nczogc2V0c0xvZ3MsXG4gICAgICBmZWVkYmFjazogJycsXG4gICAgICBub3RlOiBkZXRhaWwubm90ZXMgfHwgJycsXG4gICAgICBpc1NwbGl0OiBkZXRhaWwuaXNTcGxpdCB8fCBmYWxzZSxcbiAgICAgIGxvZ1N1Ym1pdHRlZDogZmFsc2UsXG4gICAgICBsb2dJc0VkaXRpbmc6IGZhbHNlLFxuICAgICAgaXNDb21wbGV0ZWQ6IGZhbHNlLFxuICAgICAgb3JkZXI6IGluZGV4ICsgMSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIGNvbXBsZXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgfSk7XG4gICAgXG4gICAgZXhlcmNpc2VMb2dzLnB1c2gobG9nKTtcbiAgfSk7XG5cbiAgLy8gQ3JlYXRlIHdvcmtvdXQgd2l0aCB2YWxpZGF0ZWQgZGF0YVxuICBjb25zdCBuZXdXb3Jrb3V0ID0gbmV3IFdvcmtvdXQoe1xuICAgIGlkOiB3b3JrSWQsXG4gICAgcm91bmRXb3Jrb3V0SWQ6ICcnLFxuICAgIGV4ZXJjaXNlczogZXhlcmNpc2VSZWZlcmVuY2VzLFxuICAgIGxvZ3M6IGV4ZXJjaXNlTG9ncyxcbiAgICB0aXRsZTogJycsXG4gICAgZGVzY3JpcHRpb246ICcnLFxuICAgIGR1cmF0aW9uOiAwLFxuICAgIHdvcmtvdXRSYXRpbmc6ICdub25lJyBhcyBXb3Jrb3V0UmF0aW5nLFxuICAgIHVzZUF1dGhvckNvbnRlbnQ6IGZhbHNlLFxuICAgIGlzQ29tcGxldGVkOiBmYWxzZSxcbiAgICB3b3Jrb3V0U3RhdHVzOiAnYXJjaGl2ZWQnIGFzIFdvcmtvdXRTdGF0dXMsXG4gICAgYXV0aG9yOiB1c2VyU2VydmljZS5jdXJyZW50VXNlcj8uaWQgfHwgJ1B1bHNlQUknLFxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgem9uZTogV29ya291dC5kZXRlcm1pbmVXb3Jrb3V0Wm9uZShleGVyY2lzZVJlZmVyZW5jZXMpIHx8ICdmdWxsJyBhcyBCb2R5Wm9uZVxuICB9KTtcblxuICByZXR1cm4geyB3b3Jrb3V0OiBuZXdXb3Jrb3V0LCBleGVyY2lzZUxvZ3MgfTtcblxufVxuXG4gIGFzeW5jIGdldFVzZXJCeUlkKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJEb2MgPSBhd2FpdCBnZXREb2MoZG9jKGRiLCAndXNlcnMnLCB1c2VySWQpKTtcbiAgICAgIGlmICghdXNlckRvYy5leGlzdHMoKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgbm90IGZvdW5kJyk7XG4gICAgICB9XG4gIFxuICAgICAgcmV0dXJuIG5ldyBVc2VyKHtcbiAgICAgICAgaWQ6IHVzZXJEb2MuaWQsXG4gICAgICAgIC4uLnVzZXJEb2MuZGF0YSgpIFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgdXNlciBieSBJRDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvLyBJbiBXb3Jrb3V0U2VydmljZVxuICBhc3luYyByZXZlcnRBdXRob3JGb3JtYXQod29ya291dElkOiBzdHJpbmcsIGF1dGhvcklkOiBzdHJpbmcpIHtcbiAgICBpZiAoIXVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyPy5pZCkgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIHNpZ25lZCBpbicpO1xuICAgIFxuICAgIGNvbnN0IHdvcmtvdXRSZWYgPSBkb2MoZGIsICd1c2VycycsIHVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyLmlkLCAnTXlDcmVhdGVkV29ya291dHMnLCB3b3Jrb3V0SWQpO1xuICAgIGF3YWl0IHVwZGF0ZURvYyh3b3Jrb3V0UmVmLCB7XG4gICAgICBhdXRob3I6IGF1dGhvcklkXG4gICAgfSk7XG4gICB9XG5cbmFzeW5jIHVwZGF0ZVdvcmtvdXQod29ya291dDogV29ya291dCk6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoIXVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyPy5pZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBpcyBzaWduZWQgaW4nKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3Qgd29ya291dFJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdXNlclNlcnZpY2UuY3VycmVudFVzZXIuaWQsICdNeUNyZWF0ZWRXb3Jrb3V0cycsIHdvcmtvdXQuaWQpO1xuICAgIGF3YWl0IHNldERvYyh3b3Jrb3V0UmVmLCB3b3Jrb3V0LnRvRGljdGlvbmFyeSgpLCB7IG1lcmdlOiB0cnVlIH0pO1xuXG4gICAgLy8gVXBkYXRlIGxvZ3MgaWYgdGhleSBleGlzdFxuICAgIGlmICh3b3Jrb3V0LmxvZ3MgJiYgd29ya291dC5sb2dzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XG4gICAgICBjb25zdCBsb2dzUmVmID0gY29sbGVjdGlvbih3b3Jrb3V0UmVmLCAnbG9ncycpO1xuXG4gICAgICB3b3Jrb3V0LmxvZ3MuZm9yRWFjaChsb2cgPT4ge1xuICAgICAgICBjb25zdCBsb2dSZWYgPSBkb2MobG9nc1JlZiwgbG9nLmlkKTtcbiAgICAgICAgYmF0Y2guc2V0KGxvZ1JlZiwgbG9nLnRvRGljdGlvbmFyeSgpLCB7IG1lcmdlOiB0cnVlIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB3b3Jrb3V0OicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4gIC8qKlxuICAgKiBGZXRjaCB0aGUgdXNlcidzIGN1cnJlbnQgd29ya291dCAoZWl0aGVyIFF1ZXVlZFVwIG9yIEluUHJvZ3Jlc3MpLlxuICAgKi9cbiAgYXN5bmMgZmV0Y2hDdXJyZW50V29ya291dCh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8V29ya291dCB8IG51bGw+IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgdGhpcy5mZXRjaEN1cnJlbnRXb3Jrb3V0U2Vzc2lvbih1c2VySWQpO1xuICAgIHJldHVybiBzZXNzaW9uLndvcmtvdXQ7XG4gIH1cblxuICBhc3luYyBnZXRBbGxTd2VhdGxpc3RzKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxXb3Jrb3V0W10+IHtcbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIElEIGlzIHJlcXVpcmVkJyk7XG4gICAgfVxuICBcbiAgICAvLyBSZWZlcmVuY2UgdG8gdGhlIHVzZXIncyB3b3Jrb3V0IGNvbGxlY3Rpb25cbiAgICBjb25zdCB3b3Jrb3V0c1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycsIHVzZXJJZCwgJ015Q3JlYXRlZFdvcmtvdXRzJyk7XG4gIFxuICAgIHRyeSB7XG4gICAgICAvLyBGZXRjaCBleGVyY2lzZXMgd2l0aCB2aWRlb3NcbiAgICAgIGNvbnN0IGV4ZXJjaXNlc1dpdGhWaWRlb3MgPSBhd2FpdCB0aGlzLmZldGNoQW5kTWFwRXhlcmNpc2VzV2l0aFZpZGVvcygpO1xuICBcbiAgICAgIC8vIFF1ZXJ5IHRvIGZldGNoIGFsbCB3b3Jrb3V0c1xuICAgICAgY29uc3Qgd29ya291dHNTbmFwc2hvdCA9IGF3YWl0IGdldERvY3Mod29ya291dHNSZWYpO1xuICAgICAgY29uc3Qgd29ya291dHM6IFdvcmtvdXRbXSA9IFtdO1xuICBcbiAgICAgIC8vIFByb2Nlc3MgZWFjaCB3b3Jrb3V0IGRvY3VtZW50XG4gICAgICBmb3IgKGNvbnN0IHdvcmtvdXREb2Mgb2Ygd29ya291dHNTbmFwc2hvdC5kb2NzKSB7XG4gICAgICAgIGNvbnN0IHdvcmtvdXREYXRhID0gd29ya291dERvYy5kYXRhKCk7XG4gICAgICAgIGNvbnN0IHdvcmtvdXRJZCA9IHdvcmtvdXREb2MuaWQ7XG4gIFxuICAgICAgICAvLyBNYXAgdGhlIGV4ZXJjaXNlcyBpbiB0aGUgd29ya291dCB0byB0aGUgZnVsbCBleGVyY2lzZSBvYmplY3RzIHdpdGggdmlkZW9zXG4gICAgICAgIGNvbnN0IG1hcHBlZEV4ZXJjaXNlcyA9ICh3b3Jrb3V0RGF0YS5leGVyY2lzZXMgfHwgW10pLm1hcCgoZXhlcmNpc2VSZWY6IGFueSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGZ1bGxFeGVyY2lzZSA9IGV4ZXJjaXNlc1dpdGhWaWRlb3MuZmluZChleCA9PiBleC5uYW1lID09PSBleGVyY2lzZVJlZi5leGVyY2lzZS5uYW1lKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlRoaXMgaXMgdGhlIG1hcHBlZCBleGVyY2lzZTogXCIgKyBmdWxsRXhlcmNpc2UpO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmV4ZXJjaXNlUmVmLFxuICAgICAgICAgICAgZXhlcmNpc2U6IGZ1bGxFeGVyY2lzZSB8fCBleGVyY2lzZVJlZlxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gIFxuICAgICAgICAvLyBQYXJzZSB3b3Jrb3V0IGRhdGEgaW50byB0aGUgZGVzaXJlZCBzdHJ1Y3R1cmVcbiAgICAgICAgY29uc3Qgd29ya291dCA9IG5ldyBXb3Jrb3V0KHtcbiAgICAgICAgICBpZDogd29ya291dERhdGEuaWQgfHwgJycsXG4gICAgICAgICAgcm91bmRXb3Jrb3V0SWQ6IHdvcmtvdXREYXRhLnJvdW5kV29ya291dElkIHx8ICcnLFxuICAgICAgICAgIGNvbGxlY3Rpb25JZDogd29ya291dERhdGEuY29sbGVjdGlvbklkLFxuICAgICAgICAgIGV4ZXJjaXNlczogbWFwcGVkRXhlcmNpc2VzLFxuICAgICAgICAgIGNoYWxsZW5nZTogd29ya291dERhdGEuY2hhbGxlbmdlLFxuICAgICAgICAgIGxvZ3M6IFtdLFxuICAgICAgICAgIHRpdGxlOiB3b3Jrb3V0RGF0YS50aXRsZSB8fCAnJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogd29ya291dERhdGEuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgICAgZHVyYXRpb246IHdvcmtvdXREYXRhLmR1cmF0aW9uIHx8IDAsXG4gICAgICAgICAgd29ya291dFJhdGluZzogd29ya291dERhdGEud29ya291dFJhdGluZyxcbiAgICAgICAgICB1c2VBdXRob3JDb250ZW50OiB3b3Jrb3V0RGF0YS51c2VBdXRob3JDb250ZW50IHx8IGZhbHNlLFxuICAgICAgICAgIGlzQ29tcGxldGVkOiB3b3Jrb3V0RGF0YS5pc0NvbXBsZXRlZCB8fCBmYWxzZSxcbiAgICAgICAgICB3b3Jrb3V0U3RhdHVzOiB3b3Jrb3V0RGF0YS53b3Jrb3V0U3RhdHVzIHx8ICdub3RTdGFydGVkJyxcbiAgICAgICAgICBzdGFydFRpbWU6IHdvcmtvdXREYXRhLnN0YXJ0VGltZSA/IG5ldyBEYXRlKHdvcmtvdXREYXRhLnN0YXJ0VGltZSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgb3JkZXI6IHdvcmtvdXREYXRhLm9yZGVyLFxuICAgICAgICAgIGF1dGhvcjogd29ya291dERhdGEuYXV0aG9yIHx8IHVzZXJJZCxcbiAgICAgICAgICBjcmVhdGVkQXQ6IHdvcmtvdXREYXRhLmNyZWF0ZWRBdCA/IG5ldyBEYXRlKHdvcmtvdXREYXRhLmNyZWF0ZWRBdCkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogd29ya291dERhdGEudXBkYXRlZEF0ID8gbmV3IERhdGUod29ya291dERhdGEudXBkYXRlZEF0KSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgem9uZTogd29ya291dERhdGEuem9uZSB8fCAnRlVMTF9CT0RZJyxcbiAgICAgICAgfSk7ICAgICAgICBcbiAgXG4gICAgICAgIC8vIEZldGNoIGFuZCBwcm9jZXNzIGxvZ3NcbiAgICAgICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycsIHVzZXJJZCwgJ015Q3JlYXRlZFdvcmtvdXRzJywgd29ya291dElkLCAnbG9ncycpO1xuICAgICAgICBjb25zdCBsb2dzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGxvZ3NSZWYpO1xuICAgICAgICB3b3Jrb3V0LmxvZ3MgPSBsb2dzU25hcHNob3QuZG9jcy5tYXAoKGxvZ0RvYykgPT4gKHtcbiAgICAgICAgICAuLi5sb2dEb2MuZGF0YSgpLFxuICAgICAgICAgIGlkOiBsb2dEb2MuaWQsXG4gICAgICAgIH0pKSBhcyBFeGVyY2lzZUxvZ1tdO1xuICBcbiAgICAgICAgd29ya291dHMucHVzaCh3b3Jrb3V0KTtcbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gd29ya291dHM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGZpcmVzdG9yZUVycm9yID0gZXJyb3IgYXMgRmlyZXN0b3JlRXJyb3I7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzd2VhdGxpc3RzOicsIGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggc3dlYXRsaXN0cycpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJDaGFsbGVuZ2VzQnlDaGFsbGVuZ2VJZChjaGFsbGVuZ2VJZDogc3RyaW5nKTogUHJvbWlzZTx7IHVzZXJDaGFsbGVuZ2VzOiBVc2VyQ2hhbGxlbmdlW107IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgICBjb25zdCB1c2VyQ2hhbGxlbmdlc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VyLWNoYWxsZW5nZScpO1xuICAgIGNvbnN0IHEgPSBxdWVyeSh1c2VyQ2hhbGxlbmdlc1JlZiwgd2hlcmUoJ2NoYWxsZW5nZUlkJywgJz09JywgY2hhbGxlbmdlSWQpKTtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgICAgY29uc3QgdXNlckNoYWxsZW5nZXM6IFVzZXJDaGFsbGVuZ2VbXSA9IHNuYXBzaG90LmRvY3MubWFwKChkb2M6IERvY3VtZW50RGF0YSkgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyQ2hhbGxlbmdlKGRhdGEpO1xuICAgICAgfSk7XG4gICAgICBpZiAodXNlckNoYWxsZW5nZXMubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4geyB1c2VyQ2hhbGxlbmdlcyB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgdXNlckNoYWxsZW5nZXM6IFtdLCBlcnJvcjogJ05vIHVzZXIgY2hhbGxlbmdlcyBmb3VuZCBmb3IgdGhpcyBjaGFsbGVuZ2UuJyB9O1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyIGNoYWxsZW5nZXMgYnkgY2hhbGxlbmdlSWQ6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHsgdXNlckNoYWxsZW5nZXM6IFtdLCBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicgfTtcbiAgICB9XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBGZXRjaGVzIHdvcmtvdXQgc3VtbWFyaWVzIGZvciBhIHNwZWNpZmljIGRhdGUuXG4gICAqIEBwYXJhbSBkYXRlIC0gVGhlIGRhdGUgZm9yIHdoaWNoIHdvcmtvdXQgc3VtbWFyaWVzIGFyZSBiZWluZyBmZXRjaGVkLlxuICAgKiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIHRvIGFuIGFycmF5IG9mIHdvcmtvdXQgc3VtbWFyaWVzLlxuICAgKiBAdGhyb3dzIElmIG5vIHVzZXIgaXMgc2lnbmVkIGluIG9yIGlmIHRoZSBGaXJlc3RvcmUgcXVlcnkgZmFpbHMuXG4gICAqL1xuICBhc3luYyBmZXRjaFdvcmtvdXRTdW1tYXJpZXMoZGF0ZTogRGF0ZSk6IFByb21pc2U8V29ya291dFN1bW1hcnlbXT4ge1xuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlclNlcnZpY2UuY3VycmVudFVzZXI7XG4gICAgaWYgKCFjdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBpcyBzaWduZWQgaW4nKTtcbiAgICB9XG5cbiAgICAvLyBGb3JtYXQgdGhlIGRhdGUgdG8gbWF0Y2ggdGhlIGZvcm1hdCBpbiBGaXJlc3RvcmUgKCdNTS1kZC15eXl5JylcbiAgICBjb25zdCBmb3JtYXR0ZWREYXRlID0gZm9ybWF0KGRhdGUsICdNTS1kZC15eXl5Jyk7XG5cbiAgICAvLyBSZWZlcmVuY2UgdG8gdGhlIHVzZXIncyB3b3Jrb3V0U3VtbWFyaWVzIHN1YmNvbGxlY3Rpb25cbiAgICBjb25zdCBzdW1tYXJpZXNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCBjdXJyZW50VXNlci5pZCwgJ3dvcmtvdXRTdW1tYXJpZXMnKTtcblxuICAgIC8vIENyZWF0ZSBhIHF1ZXJ5IHRvIGZpbHRlciBkb2N1bWVudHMgYnkgdGhlIHNwZWNpZmllZCBkYXRlXG4gICAgY29uc3QgcSA9IHF1ZXJ5KHN1bW1hcmllc1JlZiwgd2hlcmUoJ2RhdGUnLCAnPT0nLCBmb3JtYXR0ZWREYXRlKSk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuXG4gICAgICAvLyBNYXAgdGhlIGRvY3VtZW50cyB0byBhbiBhcnJheSBvZiBXb3Jrb3V0U3VtbWFyeSBvYmplY3RzXG4gICAgICByZXR1cm4gc25hcHNob3QuZG9jcy5tYXAoKGRvYzogRG9jdW1lbnREYXRhKTogV29ya291dFN1bW1hcnkgPT4gKHtcbiAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgLi4uZG9jLmRhdGEoKSxcbiAgICAgIH0pKTtcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBmaXJlc3RvcmVFcnJvciA9IGVycm9yIGFzIEZpcmVzdG9yZUVycm9yO1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgd29ya291dCBzdW1tYXJpZXM6JywgZmlyZXN0b3JlRXJyb3IubWVzc2FnZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZmlyZXN0b3JlRXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZmV0Y2hBbGxXb3Jrb3V0U3VtbWFyaWVzKCk6IFByb21pc2U8V29ya291dFN1bW1hcnlbXT4ge1xuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlclNlcnZpY2UuY3VycmVudFVzZXI7XG4gICAgaWYgKCFjdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBpcyBzaWduZWQgaW4nKTtcbiAgICB9XG4gIFxuICAgIC8vIFJlZmVyZW5jZSB0byB0aGUgdXNlcidzIHdvcmtvdXRTdW1tYXJpZXMgc3ViY29sbGVjdGlvblxuICAgIGNvbnN0IHN1bW1hcmllc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycsIGN1cnJlbnRVc2VyLmlkLCAnd29ya291dFN1bW1hcnknKTtcbiAgXG4gICAgLy8gUXVlcnkgdG8gcmV0cmlldmUgYWxsIHdvcmtvdXQgc3VtbWFyaWVzLCBzb3J0ZWQgYnkgYGNyZWF0ZWRBdGAgaW4gYXNjZW5kaW5nIG9yZGVyXG4gICAgY29uc3QgcSA9IHF1ZXJ5KHN1bW1hcmllc1JlZiwgb3JkZXJCeSgnY3JlYXRlZEF0JywgJ2FzYycpKTsgLy8gQWRqdXN0IGZpZWxkIG5hbWUgYmFzZWQgb24geW91ciBzY2hlbWFcbiAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgXG4gICAgICAvLyBNYXAgdGhlIGRvY3VtZW50cyB0byBhbiBhcnJheSBvZiBXb3Jrb3V0U3VtbWFyeSBvYmplY3RzXG4gICAgICByZXR1cm4gc25hcHNob3QuZG9jcy5tYXAoKGRvYzogRG9jdW1lbnREYXRhKTogV29ya291dFN1bW1hcnkgPT4gKHtcbiAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgLi4uZG9jLmRhdGEoKSxcbiAgICAgIH0pKTtcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBmaXJlc3RvcmVFcnJvciA9IGVycm9yIGFzIEZpcmVzdG9yZUVycm9yO1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYWxsIHdvcmtvdXQgc3VtbWFyaWVzOicsIGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gKiBGZXRjaCB1c2VyIGNoYWxsZW5nZXMgYnkgdXNlcklkLlxuICogQHBhcmFtIHVzZXJJZCBUaGUgSUQgb2YgdGhlIHVzZXIgdG8gZmV0Y2ggY2hhbGxlbmdlcyBmb3IuXG4gKiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIHRvIGFuIGFycmF5IG9mIHVzZXIgY2hhbGxlbmdlcy5cbiAqIEB0aHJvd3MgSWYgdGhlIEZpcmVzdG9yZSBxdWVyeSBmYWlscy5cbiAqL1xuYXN5bmMgZmV0Y2hVc2VyQ2hhbGxlbmdlc0J5VXNlcklkKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyQ2hhbGxlbmdlW10+IHtcbiAgY29uc3QgdXNlckNoYWxsZW5nZXNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlci1jaGFsbGVuZ2UnKTtcbiAgY29uc3QgcSA9IHF1ZXJ5KHVzZXJDaGFsbGVuZ2VzUmVmLCB3aGVyZSgndXNlcklkJywgJz09JywgdXNlcklkKSk7XG5cbiAgdHJ5IHtcbiAgICAvLyBjb25zb2xlLmxvZyhgRmV0Y2hpbmcgY2hhbGxlbmdlcyBmb3IgdXNlciBJRDogJHt1c2VySWR9YCk7XG5cbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG5cbiAgICAvLyBjb25zb2xlLmxvZyhgVG90YWwgY2hhbGxlbmdlcyBmZXRjaGVkOiAke3NuYXBzaG90LmRvY3MubGVuZ3RofWApO1xuXG4gICAgY29uc3QgdXNlckNoYWxsZW5nZXMgPSBzbmFwc2hvdC5kb2NzLm1hcCgoZG9jOiBEb2N1bWVudERhdGEpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgLy8gY29uc29sZS5sb2coYFByb2Nlc3NpbmcgY2hhbGxlbmdlIHdpdGggSUQ6ICR7ZG9jLmlkfWAsIGRhdGEpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kYXRhLFxuICAgICAgICBjaGFsbGVuZ2U6IGRhdGEuY2hhbGxlbmdlXG4gICAgICAgICAgPyBuZXcgQ2hhbGxlbmdlKHtcbiAgICAgICAgICAgICAgaWQ6IGRhdGEuY2hhbGxlbmdlLmlkLFxuICAgICAgICAgICAgICB0aXRsZTogZGF0YS5jaGFsbGVuZ2UudGl0bGUsXG4gICAgICAgICAgICAgIHN1YnRpdGxlOiBkYXRhLmNoYWxsZW5nZS5zdWJ0aXRsZSxcbiAgICAgICAgICAgICAgcGFydGljaXBhbnRzOiBkYXRhLmNoYWxsZW5nZS5wYXJ0aWNpcGFudHMgfHwgW10sXG4gICAgICAgICAgICAgIHN0YXR1czogZGF0YS5jaGFsbGVuZ2Uuc3RhdHVzIGFzIENoYWxsZW5nZVN0YXR1cyxcbiAgICAgICAgICAgICAgc3RhcnREYXRlOiBkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgZW5kRGF0ZTogZGF0YS5jaGFsbGVuZ2UuZW5kRGF0ZSA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLmVuZERhdGUpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgY3JlYXRlZEF0OiBkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgdXBkYXRlZEF0OiBkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgaW50cm9WaWRlb3M6IChkYXRhLmNoYWxsZW5nZS5pbnRyb1ZpZGVvcyB8fCBbXSkubWFwKCh2OiBhbnkpID0+IFxuICAgICAgICAgICAgICAgIG5ldyBJbnRyb1ZpZGVvKHtcbiAgICAgICAgICAgICAgICAgIGlkOiB2LmlkLFxuICAgICAgICAgICAgICAgICAgdXNlcklkOiB2LnVzZXJJZCxcbiAgICAgICAgICAgICAgICAgIHZpZGVvVXJsOiB2LnZpZGVvVXJsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0VGltZXN0YW1wKGRhdGEuY3JlYXRlZEF0KSxcbiAgICAgICAgdXBkYXRlZEF0OiBjb252ZXJ0VGltZXN0YW1wKGRhdGEudXBkYXRlZEF0KSxcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvLyBjb25zb2xlLmxvZygnQWxsIGNoYWxsZW5nZXMgYWZ0ZXIgcHJvY2Vzc2luZzonLCBKU09OLnN0cmluZ2lmeSh1c2VyQ2hhbGxlbmdlcywgbnVsbCwgMikpO1xuXG4gICAgcmV0dXJuIHVzZXJDaGFsbGVuZ2VzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgY2hhbGxlbmdlcyBieSB1c2VySWQ6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmFzeW5jIGZldGNoQ29sbGVjdGlvbldpdGhTd2VhdExpc3RzKGNvbGxlY3Rpb25JZDogc3RyaW5nKTogUHJvbWlzZTx7IGNvbGxlY3Rpb246IGFueSwgc3dlYXRMaXN0czogV29ya291dFtdIH0+IHtcbiAgdHJ5IHtcbiAgICAvLyBGZXRjaCB0aGUgY29sbGVjdGlvblxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBhd2FpdCB0aGlzLmdldENvbGxlY3Rpb25CeUlkKGNvbGxlY3Rpb25JZCk7XG5cbiAgICAvLyBGZXRjaCBzd2VhdCBsaXN0cyAod29ya291dHMpXG4gICAgY29uc3Qgc3dlYXRMaXN0czogV29ya291dFtdID0gW107XG4gICAgXG4gICAgLy8gQXNzdW1pbmcgY29sbGVjdGlvbiBoYXMgc3dlYXRsaXN0SWRzIHdpdGggYXV0aG9yIGFuZCB3b3Jrb3V0IElEc1xuICAgIGZvciAoY29uc3Qgc3dlYXRsaXN0SWRlbnRpZmllciBvZiBjb2xsZWN0aW9uLnN3ZWF0bGlzdElkcyB8fCBbXSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgW3dvcmtvdXRdID0gYXdhaXQgdGhpcy5mZXRjaFNhdmVkV29ya291dChcbiAgICAgICAgICBzd2VhdGxpc3RJZGVudGlmaWVyLnN3ZWF0bGlzdEF1dGhvcklkLCBcbiAgICAgICAgICBzd2VhdGxpc3RJZGVudGlmaWVyLmlkXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAod29ya291dCkge1xuICAgICAgICAgIHN3ZWF0TGlzdHMucHVzaCh3b3Jrb3V0KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmV0Y2hpbmcgd29ya291dCAke3N3ZWF0bGlzdElkZW50aWZpZXIuaWR9OmAsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBjb2xsZWN0aW9uLCBzd2VhdExpc3RzIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY29sbGVjdGlvbiB3aXRoIHN3ZWF0IGxpc3RzOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5cblxuYXN5bmMgZmV0Y2hTYXZlZFdvcmtvdXQodXNlcklkOiBzdHJpbmcsIHdvcmtvdXRJZDogc3RyaW5nKTogUHJvbWlzZTxbV29ya291dCB8IG51bGwsIEV4ZXJjaXNlTG9nW10gfCBudWxsXT4ge1xuICB0cnkge1xuICAgIC8vIEZldGNoIHdvcmtvdXQgZG9jdW1lbnRcbiAgICBjb25zdCB3b3Jrb3V0UmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VySWQsICdNeUNyZWF0ZWRXb3Jrb3V0cycsIHdvcmtvdXRJZCk7XG4gICAgY29uc3Qgd29ya291dFNuYXAgPSBhd2FpdCBnZXREb2Mod29ya291dFJlZik7XG4gICAgXG4gICAgaWYgKCF3b3Jrb3V0U25hcC5leGlzdHMoKSkge1xuICAgICAgcmV0dXJuIFtudWxsLCBudWxsXTtcbiAgICB9XG5cbiAgICBjb25zdCB3b3Jrb3V0RGF0YSA9IHdvcmtvdXRTbmFwLmRhdGEoKTtcbiAgICBjb25zdCBleGVyY2lzZXNXaXRoVmlkZW9zID0gYXdhaXQgdGhpcy5mZXRjaEFuZE1hcEV4ZXJjaXNlc1dpdGhWaWRlb3MoKTtcblxuICAgIC8vIE1hcCB0aGUgZXhlcmNpc2VzXG4gICAgY29uc3QgbWFwcGVkRXhlcmNpc2VzID0gKHdvcmtvdXREYXRhLmV4ZXJjaXNlcyB8fCBbXSkubWFwKChleGVyY2lzZVJlZjogYW55KSA9PiB7XG4gICAgICBjb25zdCBmdWxsRXhlcmNpc2UgPSBleGVyY2lzZXNXaXRoVmlkZW9zLmZpbmQoZXggPT4gZXgubmFtZSA9PT0gZXhlcmNpc2VSZWYuZXhlcmNpc2UubmFtZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5leGVyY2lzZVJlZixcbiAgICAgICAgZXhlcmNpc2U6IGZ1bGxFeGVyY2lzZSB8fCBleGVyY2lzZVJlZi5leGVyY2lzZVxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIHdvcmtvdXREYXRhLmV4ZXJjaXNlcyA9IG1hcHBlZEV4ZXJjaXNlcztcbiAgICBjb25zdCB3b3Jrb3V0ID0gbmV3IFdvcmtvdXQoe1xuICAgICAgaWQ6IHdvcmtvdXRJZCxcbiAgICAgIC4uLndvcmtvdXREYXRhXG4gICAgfSk7XG5cbiAgICAvLyBGZXRjaCBhbmQgbWFwIGxvZ3NcbiAgICBjb25zdCBsb2dzUmVmID0gY29sbGVjdGlvbih3b3Jrb3V0UmVmLCAnbG9ncycpO1xuICAgIGNvbnN0IGxvZ3NTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MobG9nc1JlZik7XG4gICAgY29uc29sZS5sb2coJ0ZvdW5kIGxvZ3MgY291bnQ6JywgbG9nc1NuYXBzaG90LnNpemUpO1xuXG4gICAgY29uc3QgbG9nczogRXhlcmNpc2VMb2dbXSA9IGxvZ3NTbmFwc2hvdC5kb2NzLm1hcChsb2dEb2MgPT4ge1xuICAgICAgY29uc3QgbG9nRGF0YSA9IGxvZ0RvYy5kYXRhKCk7XG4gICAgICBjb25zb2xlLmxvZygnUmF3IGxvZyBkYXRhIGZyb20gRmlyZWJhc2U6Jywge1xuICAgICAgICBleGVyY2lzZU5hbWU6IGxvZ0RhdGEuZXhlcmNpc2UubmFtZSxcbiAgICAgICAgZXhlcmNpc2VDYXRlZ29yeTogbG9nRGF0YS5leGVyY2lzZS5jYXRlZ29yeSxcbiAgICAgICAgc2F2ZWRTY3JlZW5UaW1lOiBsb2dEYXRhLmV4ZXJjaXNlLmNhdGVnb3J5Py5kZXRhaWxzPy5zY3JlZW5UaW1lXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgZnVsbEV4ZXJjaXNlID0gZXhlcmNpc2VzV2l0aFZpZGVvcy5maW5kKGV4ID0+IGV4Lm5hbWUgPT09IGxvZ0RhdGEuZXhlcmNpc2UubmFtZSk7XG4gICAgICBcbiAgICAgIC8vIFByZXNlcnZlIHRoZSBzYXZlZCBjYXRlZ29yeSBkZXRhaWxzIHdoaWxlIG1lcmdpbmcgd2l0aCB0ZW1wbGF0ZSBleGVyY2lzZVxuICAgICAgY29uc3QgdXBkYXRlZEV4ZXJjaXNlID0gZnVsbEV4ZXJjaXNlXG4gICAgICAgID8ge1xuICAgICAgICAgICAgLi4uZnVsbEV4ZXJjaXNlLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IHtcbiAgICAgICAgICAgICAgdHlwZTogbG9nRGF0YS5leGVyY2lzZS5jYXRlZ29yeT8udHlwZSB8fCBmdWxsRXhlcmNpc2UuY2F0ZWdvcnk/LnR5cGUsXG4gICAgICAgICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICAgICAgICAuLi4oZnVsbEV4ZXJjaXNlLmNhdGVnb3J5Py5kZXRhaWxzIHx8IHt9KSxcbiAgICAgICAgICAgICAgICAuLi4obG9nRGF0YS5leGVyY2lzZS5jYXRlZ29yeT8uZGV0YWlscyB8fCB7fSksXG4gICAgICAgICAgICAgICAgLy8gRXhwbGljaXRseSBwcmVzZXJ2ZSBzY3JlZW5UaW1lXG4gICAgICAgICAgICAgICAgc2NyZWVuVGltZTogbG9nRGF0YS5leGVyY2lzZS5jYXRlZ29yeT8uZGV0YWlscz8uc2NyZWVuVGltZSA/PyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsbEV4ZXJjaXNlLmNhdGVnb3J5Py5kZXRhaWxzPy5zY3JlZW5UaW1lID8/IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIDogbG9nRGF0YS5leGVyY2lzZTtcblxuICAgICAgY29uc29sZS5sb2coJ1VwZGF0ZWQgZXhlcmNpc2UgY2F0ZWdvcnk6Jywge1xuICAgICAgICBuYW1lOiB1cGRhdGVkRXhlcmNpc2UubmFtZSxcbiAgICAgICAgY2F0ZWdvcnk6IHVwZGF0ZWRFeGVyY2lzZS5jYXRlZ29yeSxcbiAgICAgICAgc2NyZWVuVGltZTogdXBkYXRlZEV4ZXJjaXNlLmNhdGVnb3J5Py5kZXRhaWxzPy5zY3JlZW5UaW1lXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIG5ldyBFeGVyY2lzZUxvZyh7XG4gICAgICAgIGlkOiBsb2dEb2MuaWQsXG4gICAgICAgIHdvcmtvdXRJZDogd29ya291dElkLFxuICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgZXhlcmNpc2U6IHVwZGF0ZWRFeGVyY2lzZSxcbiAgICAgICAgbG9nczogbG9nRGF0YS5sb2cgfHwgW10sXG4gICAgICAgIGZlZWRiYWNrOiBsb2dEYXRhLmZlZWRiYWNrIHx8ICcnLFxuICAgICAgICBub3RlOiBsb2dEYXRhLm5vdGUgfHwgJycsXG4gICAgICAgIHJlY29tbWVuZGVkV2VpZ2h0OiBsb2dEYXRhLnJlY29tbWVuZGVkV2VpZ2h0IHx8ICdjYWxjdWxhdGluZy4uLicsXG4gICAgICAgIGlzU3BsaXQ6IGxvZ0RhdGEuaXNTcGxpdCB8fCBmYWxzZSxcbiAgICAgICAgaXNCb2R5V2VpZ2h0OiBsb2dEYXRhLmlzQm9keVdlaWdodCB8fCBmYWxzZSxcbiAgICAgICAgbG9nU3VibWl0dGVkOiBsb2dEYXRhLmxvZ1N1Ym1pdHRlZCB8fCBmYWxzZSxcbiAgICAgICAgbG9nSXNFZGl0aW5nOiBsb2dEYXRhLmxvZ0lzRWRpdGluZyB8fCBmYWxzZSxcbiAgICAgICAgaXNDb21wbGV0ZWQ6IGxvZ0RhdGEuaXNDb21wbGV0ZWQgfHwgZmFsc2UsXG4gICAgICAgIGNvbXBsZXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGxvZ0RhdGEuY29tcGxldGVkQXQpLFxuICAgICAgICBjcmVhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAobG9nRGF0YS5jcmVhdGVkQXQpLFxuICAgICAgICB1cGRhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAobG9nRGF0YS51cGRhdGVkQXQpXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHdvcmtvdXQubG9ncyA9IGxvZ3M7XG4gICAgcmV0dXJuIFt3b3Jrb3V0LCBsb2dzXTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzYXZlZCB3b3Jrb3V0OicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIEZldGNoIHVzZXIgY2hhbGxlbmdlcyBieSBjaGFsbGVuZ2VJZC5cbiAqIEBwYXJhbSBjaGFsbGVuZ2VJZCBUaGUgSUQgb2YgdGhlIGNoYWxsZW5nZSB0byBmZXRjaCBhc3NvY2lhdGVkIHVzZXIgY2hhbGxlbmdlcyBmb3IuXG4gKiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIHRvIGFuIGFycmF5IG9mIHVzZXIgY2hhbGxlbmdlcy5cbiAqIEB0aHJvd3MgSWYgdGhlIEZpcmVzdG9yZSBxdWVyeSBmYWlscy5cbiAqL1xuYXN5bmMgZmV0Y2hVc2VyQ2hhbGxlbmdlc0J5Q2hhbGxlbmdlSWQoY2hhbGxlbmdlSWQ6IHN0cmluZyk6IFByb21pc2U8VXNlckNoYWxsZW5nZVtdPiB7XG4gIGNvbnN0IHVzZXJDaGFsbGVuZ2VzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXItY2hhbGxlbmdlJyk7XG4gIGNvbnN0IHEgPSBxdWVyeSh1c2VyQ2hhbGxlbmdlc1JlZiwgd2hlcmUoJ2NoYWxsZW5nZUlkJywgJz09JywgY2hhbGxlbmdlSWQpKTtcblxuICB0cnkge1xuICAgIC8vIGNvbnNvbGUubG9nKGBGZXRjaGluZyB1c2VyIGNoYWxsZW5nZXMgZm9yIGNoYWxsZW5nZSBJRDogJHtjaGFsbGVuZ2VJZH1gKTtcblxuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcblxuICAgIC8vIGNvbnNvbGUubG9nKGBUb3RhbCB1c2VyIGNoYWxsZW5nZXMgZmV0Y2hlZDogJHtzbmFwc2hvdC5kb2NzLmxlbmd0aH1gKTtcblxuICAgIGNvbnN0IHVzZXJDaGFsbGVuZ2VzID0gc25hcHNob3QuZG9jcy5tYXAoKGRvYzogRG9jdW1lbnREYXRhKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGBQcm9jZXNzaW5nIHVzZXIgY2hhbGxlbmdlIHdpdGggSUQ6ICR7ZG9jLmlkfWAsIGRhdGEpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kYXRhLFxuICAgICAgICBjaGFsbGVuZ2U6IGRhdGEuY2hhbGxlbmdlXG4gICAgICAgICAgPyBuZXcgQ2hhbGxlbmdlKHtcbiAgICAgICAgICAgICAgaWQ6IGRhdGEuY2hhbGxlbmdlLmlkLFxuICAgICAgICAgICAgICB0aXRsZTogZGF0YS5jaGFsbGVuZ2UudGl0bGUsXG4gICAgICAgICAgICAgIHN1YnRpdGxlOiBkYXRhLmNoYWxsZW5nZS5zdWJ0aXRsZSxcbiAgICAgICAgICAgICAgcGFydGljaXBhbnRzOiBkYXRhLmNoYWxsZW5nZS5wYXJ0aWNpcGFudHMgfHwgW10sXG4gICAgICAgICAgICAgIHN0YXR1czogZGF0YS5jaGFsbGVuZ2Uuc3RhdHVzIGFzIENoYWxsZW5nZVN0YXR1cyxcbiAgICAgICAgICAgICAgc3RhcnREYXRlOiBkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgZW5kRGF0ZTogZGF0YS5jaGFsbGVuZ2UuZW5kRGF0ZSA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLmVuZERhdGUpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgY3JlYXRlZEF0OiBkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgdXBkYXRlZEF0OiBkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgaW50cm9WaWRlb3M6IChkYXRhLmNoYWxsZW5nZS5pbnRyb1ZpZGVvcyB8fCBbXSkubWFwKCh2OiBhbnkpID0+IFxuICAgICAgICAgICAgICAgIG5ldyBJbnRyb1ZpZGVvKHtcbiAgICAgICAgICAgICAgICAgIGlkOiB2LmlkLFxuICAgICAgICAgICAgICAgICAgdXNlcklkOiB2LnVzZXJJZCxcbiAgICAgICAgICAgICAgICAgIHZpZGVvVXJsOiB2LnZpZGVvVXJsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0VGltZXN0YW1wKGRhdGEuY3JlYXRlZEF0KSxcbiAgICAgICAgdXBkYXRlZEF0OiBjb252ZXJ0VGltZXN0YW1wKGRhdGEudXBkYXRlZEF0KSxcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvLyBjb25zb2xlLmxvZygnQWxsIHVzZXIgY2hhbGxlbmdlcyBhZnRlciBwcm9jZXNzaW5nOicsIEpTT04uc3RyaW5naWZ5KHVzZXJDaGFsbGVuZ2VzLCBudWxsLCAyKSk7XG5cbiAgICByZXR1cm4gdXNlckNoYWxsZW5nZXM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBjaGFsbGVuZ2VzIGJ5IGNoYWxsZW5nZUlkOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5hc3luYyBnZXRDb2xsZWN0aW9uQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxTd2VhdGxpc3RDb2xsZWN0aW9uPiB7XG4gIGNvbnNvbGUubG9nKFwiRmV0Y2hpbmcgY29sbGVjdGlvbiB3aXRoIGlkOlwiLCBpZCk7XG4gIHRyeSB7XG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGRiLCBcInN3ZWF0bGlzdC1jb2xsZWN0aW9uXCIsIGlkKTtcbiAgICBjb25zdCBkb2NTbmFwID0gYXdhaXQgZ2V0RG9jKGRvY1JlZik7XG4gICAgaWYgKGRvY1NuYXAuZXhpc3RzKCkpIHtcbiAgICAgIHJldHVybiBuZXcgU3dlYXRsaXN0Q29sbGVjdGlvbih7XG4gICAgICAgIGlkOiBkb2NTbmFwLmlkLFxuICAgICAgICAuLi5kb2NTbmFwLmRhdGEoKVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbGxlY3Rpb24gbm90IGZvdW5kXCIpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBjb2xsZWN0aW9uIGJ5IElEOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gSW4gV29ya291dFNlcnZpY2UgY2xhc3NcbmFzeW5jIGdldENvbGxlY3Rpb25zQnlJZHMoY29sbGVjdGlvbklkczogc3RyaW5nW10pOiBQcm9taXNlPFN3ZWF0bGlzdENvbGxlY3Rpb25bXT4ge1xuICB0cnkge1xuICAgIC8vIFVzZSBQcm9taXNlLmFsbCB0byBmZXRjaCBhbGwgY29sbGVjdGlvbnMgaW4gcGFyYWxsZWxcbiAgICBjb25zdCBjb2xsZWN0aW9ucyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgY29sbGVjdGlvbklkcy5tYXAoYXN5bmMgKGlkKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZG9jUmVmID0gZG9jKGRiLCBcInN3ZWF0bGlzdC1jb2xsZWN0aW9uXCIsIGlkKTtcbiAgICAgICAgICBjb25zdCBkb2NTbmFwID0gYXdhaXQgZ2V0RG9jKGRvY1JlZik7XG4gICAgICAgICAgaWYgKGRvY1NuYXAuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3dlYXRsaXN0Q29sbGVjdGlvbih7XG4gICAgICAgICAgICAgIGlkOiBkb2NTbmFwLmlkLFxuICAgICAgICAgICAgICAuLi5kb2NTbmFwLmRhdGEoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZldGNoaW5nIGNvbGxlY3Rpb24gJHtpZH06YCwgZXJyb3IpO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICk7XG5cbiAgICAvLyBGaWx0ZXIgb3V0IGFueSBudWxsIHZhbHVlcyBmcm9tIGZhaWxlZCBmZXRjaGVzXG4gICAgcmV0dXJuIGNvbGxlY3Rpb25zLmZpbHRlcigoY29sbGVjdGlvbik6IGNvbGxlY3Rpb24gaXMgU3dlYXRsaXN0Q29sbGVjdGlvbiA9PiBjb2xsZWN0aW9uICE9PSBudWxsKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgY29sbGVjdGlvbnM6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4gIFxuYXN5bmMgZmV0Y2hDb2xsZWN0aW9ucyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8U3dlYXRsaXN0Q29sbGVjdGlvbltdPiB7XG4gIGlmICghdXNlcklkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIElEIGlzIHJlcXVpcmVkJyk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGNvbGxlY3Rpb25zUmVmID0gZnNDb2xsZWN0aW9uKGRiLCBcInN3ZWF0bGlzdC1jb2xsZWN0aW9uXCIpO1xuXG4gICAgLy8gUXVlcnkgZm9yIHJlY29yZHMgd2hlcmUgb3duZXJJZCBpcyBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIHRoZSB1c2VySWQuXG4gICAgY29uc3QgcUFycmF5ID0gcXVlcnkoY29sbGVjdGlvbnNSZWYsIHdoZXJlKFwib3duZXJJZFwiLCBcImFycmF5LWNvbnRhaW5zXCIsIHVzZXJJZCkpO1xuICAgIGNvbnN0IHNuYXBzaG90QXJyYXkgPSBhd2FpdCBnZXREb2NzKHFBcnJheSk7XG4gICAgY29uc3QgY29sbGVjdGlvbnNGcm9tQXJyYXk6IFN3ZWF0bGlzdENvbGxlY3Rpb25bXSA9IHNuYXBzaG90QXJyYXkuZG9jcy5tYXAoKGRvYzogUXVlcnlEb2N1bWVudFNuYXBzaG90PERvY3VtZW50RGF0YT4pID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSB7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfTtcbiAgICAgIHJldHVybiBuZXcgU3dlYXRsaXN0Q29sbGVjdGlvbihkYXRhKTtcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKFwiVGhlIGFycmF5IGNvbGxlY3Rpb25zXCIsIGNvbGxlY3Rpb25zRnJvbUFycmF5KTtcblxuICAgIC8vIFF1ZXJ5IGZvciByZWNvcmRzIHdoZXJlIG93bmVySWQgaXMgYSBzdHJpbmcgZXF1YWwgdG8gdGhlIHVzZXJJZC5cbiAgICBjb25zdCBxU3RyaW5nID0gcXVlcnkoY29sbGVjdGlvbnNSZWYsIHdoZXJlKFwib3duZXJJZFwiLCBcIj09XCIsIHVzZXJJZCkpO1xuICAgIGNvbnN0IHNuYXBzaG90U3RyaW5nID0gYXdhaXQgZ2V0RG9jcyhxU3RyaW5nKTtcbiAgICBjb25zdCBjb2xsZWN0aW9uc0Zyb21TdHJpbmc6IFN3ZWF0bGlzdENvbGxlY3Rpb25bXSA9IHNuYXBzaG90U3RyaW5nLmRvY3MubWFwKChkb2M6IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdDxEb2N1bWVudERhdGE+KSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0geyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH07XG4gICAgICByZXR1cm4gbmV3IFN3ZWF0bGlzdENvbGxlY3Rpb24oZGF0YSk7XG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZyhcIlRoZSBzdHJpbmcgY29sbGVjdGlvbnNcIiwgY29sbGVjdGlvbnNGcm9tU3RyaW5nKTtcblxuXG4gICAgLy8gQ29tYmluZSBib3RoIGFycmF5cyBhbmQgcmVtb3ZlIGR1cGxpY2F0ZXMgKGlmIGFueSkgYmFzZWQgb24gdGhlIGNvbGxlY3Rpb24gaWQuXG4gICAgY29uc3QgY29tYmluZWQgPSBbLi4uY29sbGVjdGlvbnNGcm9tQXJyYXksIC4uLmNvbGxlY3Rpb25zRnJvbVN0cmluZ107XG4gICAgY29uc3QgdW5pcXVlQ29sbGVjdGlvbnMgPSBuZXcgTWFwPHN0cmluZywgU3dlYXRsaXN0Q29sbGVjdGlvbj4oKTtcbiAgICBjb21iaW5lZC5mb3JFYWNoKGNvbGxlY3Rpb24gPT4ge1xuICAgICAgdW5pcXVlQ29sbGVjdGlvbnMuc2V0KGNvbGxlY3Rpb24uaWQsIGNvbGxlY3Rpb24pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIEFycmF5LmZyb20odW5pcXVlQ29sbGVjdGlvbnMudmFsdWVzKCkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBzd2VhdGxpc3RzOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuXG5cbiAgICAvKipcbiAgICogRmV0Y2ggdXNlciBjaGFsbGVuZ2VzIGJ5IHVzZXJJZCBhbmQgZmlsdGVyIGZvciBhY3RpdmUgY2hhbGxlbmdlcy5cbiAgICogQHJldHVybnMgQSBwcm9taXNlIHJlc29sdmluZyB0byBhbiBhcnJheSBvZiBhY3RpdmUgY2hhbGxlbmdlcy5cbiAgICogQHRocm93cyBJZiBubyB1c2VyIGlzIHNpZ25lZCBpbiBvciBpZiB0aGUgRmlyZXN0b3JlIHF1ZXJ5IGZhaWxzLlxuICAgKi9cbiAgICBhc3luYyBmZXRjaEFjdGl2ZUNoYWxsZW5nZXMoKTogUHJvbWlzZTxVc2VyQ2hhbGxlbmdlW10+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlclNlcnZpY2UuY3VycmVudFVzZXI7XG4gICAgICBpZiAoIWN1cnJlbnRVc2VyPy5pZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgICB9XG4gICAgXG4gICAgICBjb25zdCB1c2VyQ2hhbGxlbmdlc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VyLWNoYWxsZW5nZScpO1xuICAgICAgY29uc3QgcSA9IHF1ZXJ5KHVzZXJDaGFsbGVuZ2VzUmVmLCB3aGVyZSgndXNlcklkJywgJz09JywgY3VycmVudFVzZXIuaWQpKTtcbiAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBGZXRjaGluZyBjaGFsbGVuZ2VzIGZvciB1c2VyIElEOiAke2N1cnJlbnRVc2VyLmlkfWApO1xuICAgIFxuICAgICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBUb3RhbCBjaGFsbGVuZ2VzIGZldGNoZWQ6ICR7c25hcHNob3QuZG9jcy5sZW5ndGh9YCk7XG4gICAgXG4gICAgICAgIGNvbnN0IGFsbENoYWxsZW5nZXMgPSBzbmFwc2hvdC5kb2NzLm1hcCgoZG9jOiBEb2N1bWVudERhdGEpID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgUHJvY2Vzc2luZyBjaGFsbGVuZ2Ugd2l0aCBJRDogJHtkb2MuaWR9YCwgZGF0YSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVXNlIHRoZSBDaGFsbGVuZ2UgY29uc3RydWN0b3IgdG8gcGFyc2UgdGhlIGNoYWxsZW5nZSBkYXRhXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCJkYXRlIGJlZm9yZSBmb3JtYXQ6IFwiICsgY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUpKTtcblxuICAgICAgICAgIGNvbnN0IGNoYWxsZW5nZSA9IGRhdGEuY2hhbGxlbmdlXG4gICAgICAgICAgICA/IG5ldyBDaGFsbGVuZ2Uoe1xuICAgICAgICAgICAgICAgIGlkOiBkYXRhLmNoYWxsZW5nZS5pZCxcbiAgICAgICAgICAgICAgICB0aXRsZTogZGF0YS5jaGFsbGVuZ2UudGl0bGUsXG4gICAgICAgICAgICAgICAgc3VidGl0bGU6IGRhdGEuY2hhbGxlbmdlLnN1YnRpdGxlLFxuICAgICAgICAgICAgICAgIHBhcnRpY2lwYW50czogZGF0YS5jaGFsbGVuZ2UucGFydGljaXBhbnRzIHx8IFtdLFxuICAgICAgICAgICAgICAgIHN0YXR1czogZGF0YS5jaGFsbGVuZ2Uuc3RhdHVzIGFzIENoYWxsZW5nZVN0YXR1cyxcbiAgICAgICAgICAgICAgICBzdGFydERhdGU6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5jaGFsbGVuZ2Uuc3RhcnREYXRlKSxcbiAgICAgICAgICAgICAgICBlbmREYXRlOiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY2hhbGxlbmdlLmVuZERhdGUpLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQpLFxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQpLFxuICAgICAgICAgICAgICAgIGludHJvVmlkZW9zOiAoZGF0YS5jaGFsbGVuZ2UuaW50cm9WaWRlb3MgfHwgW10pLm1hcCgodjogYW55KSA9PiBcbiAgICAgICAgICAgICAgICAgIG5ldyBJbnRyb1ZpZGVvKHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHYuaWQsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogdi51c2VySWQsXG4gICAgICAgICAgICAgICAgICAgIHZpZGVvVXJsOiB2LnZpZGVvVXJsXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICAuLi5kYXRhLFxuICAgICAgICAgICAgY2hhbGxlbmdlLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY3JlYXRlZEF0KSxcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLnVwZGF0ZWRBdCksXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdBbGwgY2hhbGxlbmdlcyBhZnRlciBwcm9jZXNzaW5nOicsIEpTT04uc3RyaW5naWZ5KGFsbENoYWxsZW5nZXMsIG51bGwsIDIpKTtcbiAgICBcbiAgICAgICAgLy8gRmlsdGVyIGZvciBhY3RpdmUgY2hhbGxlbmdlcyAoZW5kRGF0ZSA+IGN1cnJlbnQgZGF0ZSlcbiAgICAgICAgY29uc3QgYWN0aXZlQ2hhbGxlbmdlcyA9IGFsbENoYWxsZW5nZXMuZmlsdGVyKHVzZXJDaGFsbGVuZ2UgPT4ge1xuICAgICAgICAgIGNvbnN0IGVuZERhdGUgPSB1c2VyQ2hhbGxlbmdlLmNoYWxsZW5nZT8uZW5kRGF0ZTtcbiAgICBcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcbiAgICAgICAgICAvLyAgIGBFdmFsdWF0aW5nIGNoYWxsZW5nZSBJRDogJHt1c2VyQ2hhbGxlbmdlLmlkfSwgRW5kIERhdGU6ICR7ZW5kRGF0ZX0sIEN1cnJlbnQgRGF0ZTogJHtuZXcgRGF0ZSgpfWBcbiAgICAgICAgICAvLyApO1xuICAgIFxuICAgICAgICAgIHJldHVybiBlbmREYXRlICYmIGVuZERhdGUgPiBuZXcgRGF0ZSgpO1xuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgLy8gY29uc29sZS5sb2coYFRvdGFsIGFjdGl2ZSBjaGFsbGVuZ2VzOiAke2FjdGl2ZUNoYWxsZW5nZXMubGVuZ3RofWAsIGFjdGl2ZUNoYWxsZW5nZXMpO1xuICAgIFxuICAgICAgICByZXR1cm4gYWN0aXZlQ2hhbGxlbmdlcztcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFjdGl2ZSBjaGFsbGVuZ2VzOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICAgIFxuXG4gIC8qKlxuICAgKiBGZXRjaCB1c2VyIGNoYWxsZW5nZXMgYnkgdXNlcklkLlxuICAgKiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIHRvIGFuIGFycmF5IG9mIGNoYWxsZW5nZXMuXG4gICAqIEB0aHJvd3MgSWYgbm8gdXNlciBpcyBzaWduZWQgaW4gb3IgaWYgdGhlIEZpcmVzdG9yZSBxdWVyeSBmYWlscy5cbiAgICovXG4gIGFzeW5jIGZldGNoVXNlckNoYWxsZW5nZXMoKTogUHJvbWlzZTxVc2VyQ2hhbGxlbmdlW10+IHtcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IHVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyO1xuICAgIGlmICghY3VycmVudFVzZXI/LmlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgfVxuXG4gICAgLy8gUmVmZXJlbmNlIHRvIHRoZSB1c2VyLWNoYWxsZW5nZSBjb2xsZWN0aW9uXG4gICAgY29uc3QgdXNlckNoYWxsZW5nZXNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlci1jaGFsbGVuZ2UnKTtcblxuICAgIC8vIFF1ZXJ5IGNoYWxsZW5nZXMgd2hlcmUgdXNlcklkIG1hdGNoZXMgdGhlIGN1cnJlbnQgdXNlcidzIElEXG4gICAgY29uc3QgcSA9IHF1ZXJ5KHVzZXJDaGFsbGVuZ2VzUmVmLCB3aGVyZSgndXNlcklkJywgJz09JywgY3VycmVudFVzZXIuaWQpKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG5cbiAgICAgIC8vIE1hcCBkb2N1bWVudHMgdG8gYW4gYXJyYXkgb2YgQ2hhbGxlbmdlIG9iamVjdHNcbiAgICAgIHJldHVybiBzbmFwc2hvdC5kb2NzLm1hcCgoZG9jOiBEb2N1bWVudERhdGEpID0+IG5ldyBVc2VyQ2hhbGxlbmdlKHtcbiAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgLi4uZG9jLmRhdGEoKSxcbiAgICAgIH0pKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBjaGFsbGVuZ2VzOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIHVzZXIgY2hhbGxlbmdlcycpO1xuICAgIH1cbiAgfVxuICBcbiAgLy91cGRhdGUgdGhlIHdvcmtvdXQgc3VtbWFyeSxcbiAgYXN5bmMgdXBkYXRlV29ya291dFN1bW1hcnkoe1xuICAgIHVzZXJJZCxcbiAgICB3b3Jrb3V0SWQsXG4gICAgc3VtbWFyeVxuICB9OiB7XG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgd29ya291dElkOiBzdHJpbmcsXG4gICAgc3VtbWFyeTogV29ya291dFN1bW1hcnlcbiAgfSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdXNlcklkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgSUQgcHJvdmlkZWQnKTtcbiAgICB9XG4gIFxuICAgIHRyeSB7XG4gICAgICAvLyBDcmVhdGUgYSByZWZlcmVuY2UgdG8gdGhlIGNvbGxlY3Rpb25cbiAgICAgIGNvbnN0IHN1bW1hcnlSZWYgPSBkb2MoZGIsICd1c2VycycsIHVzZXJJZCwgJ3dvcmtvdXRTdW1tYXJ5Jywgc3VtbWFyeS5pZCk7XG4gIFxuICAgICAgLy8gQ29udmVydCBzdW1tYXJ5IHRvIGEgcGxhaW4gb2JqZWN0IGZvciBGaXJlc3RvcmVcbiAgICAgIGNvbnN0IHN1bW1hcnlEYXRhID0ge1xuICAgICAgICBpZDogc3VtbWFyeS5pZCxcbiAgICAgICAgd29ya291dElkOiBzdW1tYXJ5LndvcmtvdXRJZCxcbiAgICAgICAgZXhlcmNpc2VzOiBzdW1tYXJ5LmV4ZXJjaXNlcyxcbiAgICAgICAgYm9keVBhcnRzOiBzdW1tYXJ5LmJvZHlQYXJ0cyxcbiAgICAgICAgc2Vjb25kYXJ5Qm9keVBhcnRzOiBzdW1tYXJ5LnNlY29uZGFyeUJvZHlQYXJ0cyxcbiAgICAgICAgd29ya291dFRpdGxlOiBzdW1tYXJ5LndvcmtvdXRUaXRsZSxcbiAgICAgICAgY2Fsb3JpZXNCdXJuZWQ6IHN1bW1hcnkuY2Fsb3JpZXNCdXJuZWQsXG4gICAgICAgIHdvcmtvdXRSYXRpbmc6IHN1bW1hcnkud29ya291dFJhdGluZyxcbiAgICAgICAgZXhlcmNpc2VzQ29tcGxldGVkOiBzdW1tYXJ5LmV4ZXJjaXNlc0NvbXBsZXRlZCxcbiAgICAgICAgYWlJbnNpZ2h0OiBzdW1tYXJ5LmFpSW5zaWdodCxcbiAgICAgICAgcmVjb21tZW5kYXRpb25zOiBzdW1tYXJ5LnJlY29tbWVuZGF0aW9ucyxcbiAgICAgICAgZ2lmVVJMczogc3VtbWFyeS5naWZVUkxzLFxuICAgICAgICByZWNvbW1lbmRlZFdvcms6IHN1bW1hcnkucmVjb21tZW5kZWRXb3JrLFxuICAgICAgICBpc0NvbXBsZXRlZDogc3VtbWFyeS5pc0NvbXBsZXRlZCxcbiAgICAgICAgY3JlYXRlZEF0OiBzdW1tYXJ5LmNyZWF0ZWRBdCxcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICBjb21wbGV0ZWRBdDogc3VtbWFyeS5jb21wbGV0ZWRBdCxcbiAgICAgICAgZHVyYXRpb246IHN1bW1hcnkuZHVyYXRpb25cbiAgICAgIH07XG4gIFxuICAgICAgLy8gU2V0IGRhdGEgd2l0aCBtZXJnZSBlbmFibGVkIChlcXVpdmFsZW50IHRvIFN3aWZ0J3Mgc2V0RGF0YSB3aXRoIG1lcmdlOiB0cnVlKVxuICAgICAgYXdhaXQgc2V0RG9jKHN1bW1hcnlSZWYsIHN1bW1hcnlEYXRhLCB7IG1lcmdlOiB0cnVlIH0pO1xuICBcbiAgICAgIGNvbnNvbGUubG9nKCdXb3Jrb3V0IHN1bW1hcnkgZG9jdW1lbnQgdXBkYXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgd29ya291dCBzdW1tYXJ5OicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVdvcmtvdXRMb2dzKHtcbiAgICB1c2VySWQsXG4gICAgd29ya291dElkLCBcbiAgICBsb2dzXG4gIH06IHtcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICB3b3Jrb3V0SWQ6IHN0cmluZywgXG4gICAgbG9nczogRXhlcmNpc2VMb2dbXVxuICB9KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHdvcmtvdXRSZWYgPSBkb2MoZGIsICd1c2VycycsIHVzZXJJZCwgJ3dvcmtvdXRTZXNzaW9ucycsIHdvcmtvdXRJZCk7XG4gICAgICBjb25zdCBsb2dzUmVmID0gY29sbGVjdGlvbih3b3Jrb3V0UmVmLCAnbG9ncycpO1xuICAgICAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcbiAgICAgIFxuICAgICAgbG9ncy5mb3JFYWNoKGxvZyA9PiB7XG4gICAgICAgIGNvbnN0IGxvZ0RvY1JlZiA9IGRvYyhsb2dzUmVmLCBsb2cuaWQpO1xuICAgICAgICBiYXRjaC51cGRhdGUobG9nRG9jUmVmLCB7XG4gICAgICAgICAgLi4ubG9nLnRvRGljdGlvbmFyeSgpXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gIFxuICAgICAgYXdhaXQgYmF0Y2guY29tbWl0KCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHdvcmtvdXQgbG9nczonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvLyBUaGUgY2FuY2VsV29ya291dCBtZXRob2Qg4oCTIGl0IGRlbGV0ZXMgdGhlIHdvcmtvdXQgc2Vzc2lvbiBhbmQgc3VtbWFyeSAoaWYgYW55KSxcbi8vIGNsZWFucyB1cCB0aGUgbG9jYWwgc3RhdGUsIGFuZCBsb2dzIHRoZSBjYW5jZWxsYXRpb24uXG5hc3luYyBjYW5jZWxXb3Jrb3V0KHdvcmtvdXQ6IFdvcmtvdXQgfCBudWxsLCB3b3Jrb3V0U3VtbWFyeTogV29ya291dFN1bW1hcnkgfCBudWxsKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmICghdXNlclNlcnZpY2UuY3VycmVudFVzZXI/LmlkIHx8ICF3b3Jrb3V0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlciBub3QgYXV0aGVudGljYXRlZC5cIik7XG4gIH1cblxuICB0cnkgeyAgICBcbiAgICAgIGF3YWl0IHRoaXMuZGVsZXRlV29ya291dFNlc3Npb24od29ya291dC5pZCk7XG4gICAgICBpZiAod29ya291dFN1bW1hcnkpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5kZWxldGVXb3Jrb3V0U3VtbWFyeSh3b3Jrb3V0U3VtbWFyeS5pZCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRoaXMuY2xlYW5VcFdvcmtvdXRJblByb2dyZXNzKCk7XG4gICAgICBjb25zb2xlLmxvZyhcIldvcmtvdXQgY2FuY2VsZWQgYW5kIGNsZWFuZWQgdXAgc3VjY2Vzc2Z1bGx5LlwiKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY2FuY2VsaW5nIHdvcmtvdXQ6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuICBcbi8vIERlbGV0ZXMgYSB3b3Jrb3V0IHNlc3Npb24gZG9jdW1lbnQgYW5kIGFsbCBpdHMgc3ViY29sbGVjdGlvbiBcImxvZ3NcIlxuYXN5bmMgZGVsZXRlV29ya291dFNlc3Npb24od29ya291dElkOiBzdHJpbmcgfCBudWxsKTogUHJvbWlzZTx2b2lkPiB7XG4gIGlmICghdXNlclNlcnZpY2UuY3VycmVudFVzZXI/LmlkIHx8ICF3b3Jrb3V0SWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2VyIG5vdCBhdXRoZW50aWNhdGVkLlwiKTtcbiAgfVxuICBjb25zdCB1c2VySWQgPSB1c2VyU2VydmljZS5jdXJyZW50VXNlci5pZDtcbiAgY29uc3Qgd29ya291dFJlZiA9IGRvYyhkYiwgXCJ1c2Vyc1wiLCB1c2VySWQsIFwid29ya291dFNlc3Npb25zXCIsIHdvcmtvdXRJZCk7XG4gIFxuICB0cnkge1xuICAgIC8vIERlbGV0ZSBhbGwgbG9ncyBpbiB0aGUgc3ViY29sbGVjdGlvblxuICAgIGNvbnN0IGxvZ3NSZWYgPSBjb2xsZWN0aW9uKHdvcmtvdXRSZWYsIFwibG9nc1wiKTtcbiAgICBjb25zdCBsb2dzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGxvZ3NSZWYpO1xuICAgIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XG4gICAgXG4gICAgbG9nc1NuYXBzaG90LmRvY3MuZm9yRWFjaCgobG9nRG9jKSA9PiB7XG4gICAgICBiYXRjaC5kZWxldGUobG9nRG9jLnJlZik7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gRGVsZXRlIHRoZSBtYWluIHdvcmtvdXQgZG9jdW1lbnRcbiAgICBiYXRjaC5kZWxldGUod29ya291dFJlZik7XG4gICAgXG4gICAgYXdhaXQgYmF0Y2guY29tbWl0KCk7XG4gICAgY29uc29sZS5sb2coXCJXb3Jrb3V0IHNlc3Npb24gYW5kIGxvZ3MgZGVsZXRlZCBzdWNjZXNzZnVsbHkuXCIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZWxldGluZyB3b3Jrb3V0IHNlc3Npb246XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4gIC8vIERlbGV0ZXMgdGhlIHdvcmtvdXQgc3VtbWFyeSBkb2N1bWVudC5cbiAgYXN5bmMgZGVsZXRlV29ya291dFN1bW1hcnkod29ya291dFN1bW1hcnlJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF3b3Jrb3V0U3VtbWFyeUlkIHx8ICF1c2VyU2VydmljZS5jdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN1bW1hcnlSZWYgPSBkb2MoZGIsIFwidXNlcnNcIiwgdXNlclNlcnZpY2UuY3VycmVudFVzZXIuaWQsIFwid29ya291dFN1bW1hcnlcIiwgd29ya291dFN1bW1hcnlJZCk7XG4gICAgICBhd2FpdCBkZWxldGVEb2Moc3VtbWFyeVJlZik7XG4gICAgICBjb25zb2xlLmxvZyhcIldvcmtvdXQgc3VtbWFyeSBkZWxldGVkIHN1Y2Nlc3NmdWxseS5cIik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZWxldGluZyB3b3Jrb3V0IHN1bW1hcnk6XCIsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIENsZWFuIHVwIGxvY2FsIHN0b3JhZ2UgYW5kIGluLW1lbW9yeSB3b3Jrb3V0IHN0YXRlLlxuICAgIGNsZWFuVXBXb3Jrb3V0SW5Qcm9ncmVzcygpOiB2b2lkIHtcbiAgICAgIHN0b3JlLmRpc3BhdGNoKHJlc2V0V29ya291dFN0YXRlKCkpO1xuICAgIH1cbiAgICAgIFxuICBcbiAgLyoqXG4gICAqIEZldGNoIHRoZSB3b3Jrb3V0IHNlc3Npb24gZnJvbSBGaXJlc3RvcmUsIHJldHVybmluZyB7IHdvcmtvdXQsIGxvZ3MgfS5cbiAgICogQ2hlY2tzIGZpcnN0IGZvciBhIFF1ZXVlZFVwIHNlc3Npb24sIHRoZW4gZm9yIEluUHJvZ3Jlc3MuXG4gICAqL1xuICBhc3luYyBmZXRjaEN1cnJlbnRXb3Jrb3V0U2Vzc2lvbih1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8e1xuICAgIHdvcmtvdXQ6IFdvcmtvdXQgfCBudWxsO1xuICAgIGxvZ3M6IEV4ZXJjaXNlTG9nW10gfCBudWxsO1xuICAgfT4ge1xuICAgIGlmICghdXNlcklkKSB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgSUQgcHJvdmlkZWQnKTtcbiAgIFxuICAgIGNvbnN0IGV4ZXJjaXNlU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZXMnKSk7XG4gICAgY29uc3QgdmlkZW9TbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlVmlkZW9zJykpO1xuICAgXG4gICAgY29uc3QgZXhlcmNpc2VWaWRlb3MgPSB2aWRlb1NuYXBzaG90LmRvY3MubWFwKChkb2MpID0+IFxuICAgICAgbmV3IEV4ZXJjaXNlVmlkZW8oe1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kb2MuZGF0YSgpXG4gICAgICB9KVxuICAgICk7XG4gICBcbiAgICBjb25zdCBleGVyY2lzZXNXaXRoVmlkZW9zID0gZXhlcmNpc2VTbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4ge1xuICAgICAgY29uc3QgZXhlcmNpc2UgPSBuZXcgRXhlcmNpc2Uoe1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kb2MuZGF0YSgpXG4gICAgICB9KTtcbiAgIFxuICAgICAgY29uc3QgbWF0Y2hpbmdWaWRlb3MgPSBleGVyY2lzZVZpZGVvcy5maWx0ZXIoXG4gICAgICAgICh2aWRlbykgPT4gdmlkZW8uZXhlcmNpc2UudG9Mb3dlckNhc2UoKSA9PT0gZXhlcmNpc2UubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICApO1xuICAgXG4gICAgICByZXR1cm4gbmV3IEV4ZXJjaXNlKHtcbiAgICAgICAgLi4uZXhlcmNpc2UsXG4gICAgICAgIHZpZGVvczogbWF0Y2hpbmdWaWRlb3NcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgXG4gICAgY29uc3Qgd29ya291dFNlc3Npb25zUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgdXNlcklkLCAnd29ya291dFNlc3Npb25zJyk7XG4gICBcbiAgICBsZXQgcSA9IHF1ZXJ5KHdvcmtvdXRTZXNzaW9uc1JlZiwgd2hlcmUoJ3N0YXR1cycsICc9PScsIFdvcmtvdXRTdGF0dXMuUXVldWVkVXApKTtcbiAgICBsZXQgc25hcCA9IGF3YWl0IGdldERvY3MocSk7XG4gICBcbiAgICBpZiAoIXNuYXAuZW1wdHkpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NXb3Jrb3V0U2Vzc2lvbkRvY3VtZW50KHNuYXAuZG9jc1swXSwgZXhlcmNpc2VzV2l0aFZpZGVvcyk7XG4gICAgfVxuICAgXG4gICAgcSA9IHF1ZXJ5KHdvcmtvdXRTZXNzaW9uc1JlZiwgd2hlcmUoJ3N0YXR1cycsICc9PScsIFdvcmtvdXRTdGF0dXMuSW5Qcm9ncmVzcykpO1xuICAgIHNuYXAgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgXG4gICAgaWYgKCFzbmFwLmVtcHR5KSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9jZXNzV29ya291dFNlc3Npb25Eb2N1bWVudChzbmFwLmRvY3NbMF0sIGV4ZXJjaXNlc1dpdGhWaWRlb3MpO1xuICAgIH1cbiAgIFxuICAgIHJldHVybiB7IHdvcmtvdXQ6IG51bGwsIGxvZ3M6IG51bGwgfTtcbiAgIH1cblxuICBwcml2YXRlIGFzeW5jIGZldGNoQW5kTWFwRXhlcmNpc2VzV2l0aFZpZGVvcygpOiBQcm9taXNlPEV4ZXJjaXNlW10+IHtcbiAgICB0cnkge1xuICAgICAgLy8gY29uc29sZS5sb2coJ1N0YXJ0aW5nIGZldGNoQW5kTWFwRXhlcmNpc2VzV2l0aFZpZGVvcycpO1xuICBcbiAgICAgIC8vIDEuIEZldGNoIGFsbCBleGVyY2lzZXMgXG4gICAgICBjb25zdCBleGVyY2lzZVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VzJykpO1xuICAgICAgY29uc3QgZXhlcmNpc2VzID0gZXhlcmNpc2VTbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PiBcbiAgICAgICAgbmV3IEV4ZXJjaXNlKHtcbiAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgIC4uLmRvYy5kYXRhKClcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhgRmV0Y2hlZCAke2V4ZXJjaXNlcy5sZW5ndGh9IGV4ZXJjaXNlc2ApO1xuICBcbiAgICAgIC8vIDIuIEZldGNoIGFsbCB2aWRlb3NcbiAgICAgIGNvbnN0IHZpZGVvU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZVZpZGVvcycpKTtcbiAgICAgIGNvbnN0IGV4ZXJjaXNlVmlkZW9zID0gdmlkZW9TbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PiBcbiAgICAgICAgbmV3IEV4ZXJjaXNlVmlkZW8oe1xuICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgLi4uZG9jLmRhdGEoKVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGBGZXRjaGVkICR7ZXhlcmNpc2VWaWRlb3MubGVuZ3RofSBleGVyY2lzZSB2aWRlb3NgKTtcbiAgXG4gICAgICAvLyAzLiBNYXAgdmlkZW9zIHRvIGV4ZXJjaXNlc1xuICAgICAgY29uc3QgZXhlcmNpc2VzV2l0aFZpZGVvcyA9IGV4ZXJjaXNlcy5tYXAoZXhlcmNpc2UgPT4ge1xuICAgICAgICBjb25zdCBtYXRjaGluZ1ZpZGVvcyA9IGV4ZXJjaXNlVmlkZW9zLmZpbHRlcihcbiAgICAgICAgICAodmlkZW8pID0+IHZpZGVvLmV4ZXJjaXNlLnRvTG93ZXJDYXNlKCkgPT09IGV4ZXJjaXNlLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICApO1xuICAgICAgIFxuICAgICAgICByZXR1cm4gbmV3IEV4ZXJjaXNlKHtcbiAgICAgICAgICAuLi5leGVyY2lzZSxcbiAgICAgICAgICB2aWRlb3M6IG1hdGNoaW5nVmlkZW9zXG4gICAgICAgIH0pO1xuICAgICAgIH0pO1xuICBcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdGaW5pc2hlZCBtYXBwaW5nIGV4ZXJjaXNlcyB3aXRoIHZpZGVvcycpO1xuICAgICAgLy8gY29uc29sZS5sb2coYFRvdGFsIGV4ZXJjaXNlcyB3aXRoIHZpZGVvczogJHtleGVyY2lzZXNXaXRoVmlkZW9zLmxlbmd0aH1gKTtcbiAgICAgICAgXG4gICAgICByZXR1cm4gZXhlcmNpc2VzV2l0aFZpZGVvcztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYW5kIG1hcHBpbmcgZXhlcmNpc2VzIHdpdGggdmlkZW9zOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgdG8gYnVpbGQgdGhlIFdvcmtvdXQgb2JqZWN0ICsgYW55IGxvZ3MgZnJvbSB0aGUgc25hcHNob3QuXG4gICAqL1xuICBhc3luYyBmZXRjaEFsbFdvcmtvdXRTZXNzaW9ucyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8e1xuICAgIHdvcmtvdXQ6IFdvcmtvdXQgfCBudWxsO1xuICAgIGxvZ3M6IEV4ZXJjaXNlTG9nW10gfCBudWxsO1xuICAgfVtdPiB7XG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBJRCBwcm92aWRlZCcpO1xuICAgIH1cbiAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBleGVyY2lzZVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VzJykpO1xuICAgICAgY29uc3QgZXhlcmNpc2VzID0gZXhlcmNpc2VTbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PiBcbiAgICAgICAgbmV3IEV4ZXJjaXNlKHtcbiAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgIC4uLmRvYy5kYXRhKClcbiAgICAgICAgfSlcbiAgICAgICk7XG4gIFxuICAgICAgY29uc3QgdmlkZW9TbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlVmlkZW9zJykpO1xuICAgICAgY29uc3QgZXhlcmNpc2VWaWRlb3MgPSB2aWRlb1NuYXBzaG90LmRvY3MubWFwKChkb2MpID0+IFxuICAgICAgICBuZXcgRXhlcmNpc2VWaWRlbyh7XG4gICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAuLi5kb2MuZGF0YSgpXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgXG4gICAgICBjb25zdCBleGVyY2lzZXNXaXRoVmlkZW9zID0gZXhlcmNpc2VzLm1hcChleGVyY2lzZSA9PiB7XG4gICAgICAgIGNvbnN0IG1hdGNoaW5nVmlkZW9zID0gZXhlcmNpc2VWaWRlb3MuZmlsdGVyKFxuICAgICAgICAgICh2aWRlbykgPT4gdmlkZW8uZXhlcmNpc2UudG9Mb3dlckNhc2UoKSA9PT0gZXhlcmNpc2UubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICk7XG4gICBcbiAgICAgICAgcmV0dXJuIG5ldyBFeGVyY2lzZSh7XG4gICAgICAgICAgLi4uZXhlcmNpc2UsXG4gICAgICAgICAgdmlkZW9zOiBtYXRjaGluZ1ZpZGVvc1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgXG4gICAgICBjb25zdCB3b3Jrb3V0U2Vzc2lvbnNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCB1c2VySWQsICd3b3Jrb3V0U2Vzc2lvbnMnKTtcbiAgICAgIGNvbnN0IHNuYXAgPSBhd2FpdCBnZXREb2NzKHdvcmtvdXRTZXNzaW9uc1JlZik7XG4gICBcbiAgICAgIGlmIChzbmFwLmVtcHR5KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdObyB3b3Jrb3V0IHNlc3Npb25zIGZvdW5kIGZvciB1c2VyJyk7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgIFxuICAgICAgY29uc3Qgc2Vzc2lvbnMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgc25hcC5kb2NzLm1hcChhc3luYyAoZG9jKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc2Vzc2lvbkRhdGEgPSBhd2FpdCB0aGlzLnByb2Nlc3NXb3Jrb3V0U2Vzc2lvbkRvY3VtZW50KFxuICAgICAgICAgICAgZG9jLCBcbiAgICAgICAgICAgIGV4ZXJjaXNlc1dpdGhWaWRlb3NcbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChzZXNzaW9uRGF0YS5sb2dzKSB7XG4gICAgICAgICAgICBzZXNzaW9uRGF0YS5sb2dzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgY29uc3Qgb3JkZXJBID0gYS5vcmRlciA/PyAwO1xuICAgICAgICAgICAgICBjb25zdCBvcmRlckIgPSBiLm9yZGVyID8/IDA7XG4gICAgICAgICAgICAgIHJldHVybiBvcmRlckEgLSBvcmRlckI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICBcbiAgICAgICAgICByZXR1cm4gc2Vzc2lvbkRhdGE7XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgXG4gICAgICByZXR1cm4gc2Vzc2lvbnM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHdvcmtvdXQgc2Vzc2lvbnM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgfVxuXG4gICAvLyBBZGQgdGhlIHVwZGF0ZVVzZXJDaGFsbGVuZ2UgbWV0aG9kXG4gIGFzeW5jIHVwZGF0ZVVzZXJDaGFsbGVuZ2UoY2hhbGxlbmdlOiBVc2VyQ2hhbGxlbmdlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF1c2VyU2VydmljZS5jdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGlzIHNpZ25lZCBpbicpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNoYWxsZW5nZVJlZiA9IGRvYyhkYiwgJ3VzZXItY2hhbGxlbmdlJywgY2hhbGxlbmdlLmlkKTtcbiAgICAgICAgY29uc3QgY2hhbGxlbmdlRGF0YSA9IHtcbiAgICAgICAgICAgIC4uLmNoYWxsZW5nZSxcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxuICAgICAgICB9O1xuXG4gICAgICAgIGF3YWl0IHNldERvYyhjaGFsbGVuZ2VSZWYsIGNoYWxsZW5nZURhdGEsIHsgbWVyZ2U6IHRydWUgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIGNoYWxsZW5nZSB1cGRhdGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHVzZXIgY2hhbGxlbmdlOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ29sbGVjdGlvbihjb2xsZWN0aW9uOiBTd2VhdGxpc3RDb2xsZWN0aW9uKTogUHJvbWlzZTxTd2VhdGxpc3RDb2xsZWN0aW9uPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbGxSZWYgPSBmc0NvbGxlY3Rpb24oZGIsIFwic3dlYXRsaXN0LWNvbGxlY3Rpb25cIik7XG4gIFxuICAgICAgLy8gSWYgY29sbGVjdGlvbi5pZCBpcyBlbXB0eSwgZ2VuZXJhdGUgYSBuZXcgZG9jIElEIGFuZCBhc3NpZ24gaXQuXG4gICAgICBpZiAoIWNvbGxlY3Rpb24uaWQgfHwgY29sbGVjdGlvbi5pZC50cmltKCkgPT09IFwiXCIpIHtcbiAgICAgICAgY29uc3QgbmV3RG9jUmVmID0gZG9jKGNvbGxSZWYpO1xuICAgICAgICBjb2xsZWN0aW9uLmlkID0gbmV3RG9jUmVmLmlkO1xuICAgICAgfVxuICBcbiAgICAgIC8vIEVuc3VyZSB0aGUgY2hhbGxlbmdlIGlkIG1hdGNoZXMgdGhlIGNvbGxlY3Rpb24gaWQuXG4gICAgICBpZiAoY29sbGVjdGlvbi5jaGFsbGVuZ2UpIHtcbiAgICAgICAgY29sbGVjdGlvbi5jaGFsbGVuZ2UuaWQgPSBjb2xsZWN0aW9uLmlkO1xuICAgICAgfVxuICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgdXBkYXRlZEF0IGZpZWxkLlxuICAgICAgY29sbGVjdGlvbi51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpO1xuICBcbiAgICAgIC8vIFNhdmUgdGhlIGNvbGxlY3Rpb24gdG8gRmlyZXN0b3JlLlxuICAgICAgYXdhaXQgc2V0RG9jKGRvYyhjb2xsUmVmLCBjb2xsZWN0aW9uLmlkKSwgY29sbGVjdGlvbi50b0RpY3Rpb25hcnkoKSk7XG4gICAgICBjb25zb2xlLmxvZyhcIkNvbGxlY3Rpb24gdXBkYXRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICByZXR1cm4gY29sbGVjdGlvbjtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIGNvbGxlY3Rpb24gZG9jdW1lbnQ6XCIsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIHdoaWxlIHVwZGF0aW5nIHRoZSBjb2xsZWN0aW9uXCIpO1xuICAgIH1cbiAgfVxuICBcbiAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzV29ya291dFNlc3Npb25Eb2N1bWVudChcbiAgICB3b3Jrb3V0RG9jOiBRdWVyeURvY3VtZW50U25hcHNob3Q8RG9jdW1lbnREYXRhPixcbiAgICBleGVyY2lzZXNXaXRoVmlkZW9zOiBFeGVyY2lzZVtdXG4gICk6IFByb21pc2U8eyB3b3Jrb3V0OiBXb3Jrb3V0OyBsb2dzOiBFeGVyY2lzZUxvZ1tdIH0+IHtcbiAgICBjb25zdCBkYXRhID0gd29ya291dERvYy5kYXRhKCk7XG4gIFxuXG4gICAgLy8gTWFwIGV4ZXJjaXNlcyB3aXRoIHRoZWlyIGZ1bGwgZGF0YSBhbmQgdmlkZW9zXG4gICAgY29uc3QgbWFwcGVkRXhlcmNpc2VzID0gKGRhdGEuZXhlcmNpc2VzIHx8IFtdKS5tYXAoKGV4ZXJjaXNlUmVmOiBhbnkpID0+IHtcbiAgICAgIC8vIEZpbmQgdGhlIGZ1bGwgZXhlcmNpc2Ugd2l0aCB2aWRlb3NcbiAgICAgIGNvbnN0IGV4ZXJjaXNlTmFtZUxvd2VyID0gZXhlcmNpc2VSZWYuZXhlcmNpc2U/Lm5hbWU/LnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgICAgY29uc3QgZnVsbEV4ZXJjaXNlID0gZXhlcmNpc2VzV2l0aFZpZGVvcy5maW5kKFxuICAgICAgICBleCA9PiBleC5uYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpID09PSBleGVyY2lzZU5hbWVMb3dlclxuICAgICAgKTtcbiAgXG4gICAgICAvLyBJZiBmdWxsIGV4ZXJjaXNlIGZvdW5kLCByZXR1cm4gaXQsIG90aGVyd2lzZSB1c2UgdGhlIG9yaWdpbmFsXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5leGVyY2lzZVJlZixcbiAgICAgICAgZXhlcmNpc2U6IGZ1bGxFeGVyY2lzZSB8fCBleGVyY2lzZVJlZi5leGVyY2lzZVxuICAgICAgfTtcbiAgICB9KTtcbiAgXG4gICAgLy8gQ3JlYXRlIHRoZSB3b3Jrb3V0IHdpdGggbWFwcGVkIGV4ZXJjaXNlc1xuICAgIGNvbnN0IHdvcmtvdXQgPSBuZXcgV29ya291dCh7XG4gICAgICBpZDogd29ya291dERvYy5pZCxcbiAgICAgIHJvdW5kV29ya291dElkOiBkYXRhLnJvdW5kV29ya291dElkIHx8ICcnLFxuICAgICAgZXhlcmNpc2VzOiBtYXBwZWRFeGVyY2lzZXMsXG4gICAgICB0aXRsZTogZGF0YS50aXRsZSB8fCAnJyxcbiAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgZHVyYXRpb246IGRhdGEuZHVyYXRpb24gfHwgMCxcbiAgICAgIHVzZUF1dGhvckNvbnRlbnQ6IGRhdGEudXNlQXV0aG9yQ29udGVudCB8fCBmYWxzZSxcbiAgICAgIGlzQ29tcGxldGVkOiBkYXRhLmlzQ29tcGxldGVkIHx8IGZhbHNlLFxuICAgICAgd29ya291dFN0YXR1czogZGF0YS53b3Jrb3V0U3RhdHVzIHx8IFdvcmtvdXRTdGF0dXMuQXJjaGl2ZWQsXG4gICAgICBhdXRob3I6IGRhdGEuYXV0aG9yIHx8ICcnLFxuICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY3JlYXRlZEF0KSxcbiAgICAgIHVwZGF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLnVwZGF0ZWRBdCksXG4gICAgICBzdGFydFRpbWU6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5zdGFydFRpbWUpLFxuICAgICAgY29sbGVjdGlvbklkOiBkYXRhLmNvbGxlY3Rpb25JZCxcbiAgICAgIGNoYWxsZW5nZTogZGF0YS5jaGFsbGVuZ2UsXG4gICAgICBsb2dzOiAoZGF0YS5sb2dzIHx8IFtdKS5tYXAoKGxvZ0RhdGE6IGFueSkgPT4ge1xuICAgICAgICAvLyBNYXAgbG9ncyB3aXRoIGZ1bGwgZXhlcmNpc2VzXG4gICAgICAgIGNvbnN0IGV4ZXJjaXNlTmFtZUxvd2VyID0gbG9nRGF0YS5leGVyY2lzZT8ubmFtZT8udG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgICAgIGNvbnN0IGZ1bGxFeGVyY2lzZSA9IGV4ZXJjaXNlc1dpdGhWaWRlb3MuZmluZChcbiAgICAgICAgICBleCA9PiBleC5uYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpID09PSBleGVyY2lzZU5hbWVMb3dlclxuICAgICAgICApO1xuICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5sb2dEYXRhLFxuICAgICAgICAgIGV4ZXJjaXNlOiBmdWxsRXhlcmNpc2UgfHwgbG9nRGF0YS5leGVyY2lzZVxuICAgICAgICB9O1xuICAgICAgfSksXG4gICAgICB3b3Jrb3V0UmF0aW5nOiBkYXRhLndvcmtvdXRSYXRpbmcsXG4gICAgICBvcmRlcjogZGF0YS5vcmRlcixcbiAgICAgIHpvbmU6IGRhdGEuem9uZSB8fCBCb2R5Wm9uZS5GdWxsQm9keVxuICAgIH0pO1xuICBcbiAgICAvLyBGZXRjaCBsb2dzIGZyb20gc3ViY29sbGVjdGlvblxuICAgIGNvbnN0IGxvZ3NSZWYgPSBjb2xsZWN0aW9uKHdvcmtvdXREb2MucmVmLCAnbG9ncycpO1xuICAgIGNvbnN0IGxvZ3NTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MobG9nc1JlZik7XG4gICAgXG4gICAgY29uc3QgbG9nczogRXhlcmNpc2VMb2dbXSA9IGxvZ3NTbmFwc2hvdC5kb2NzLm1hcChsb2dEb2MgPT4ge1xuICAgICAgY29uc3QgbG9nRGF0YSA9IGxvZ0RvYy5kYXRhKCk7XG4gICAgICBcbiAgICAgIC8vIEZpbmQgdGhlIGZ1bGwgZXhlcmNpc2Ugd2l0aCB2aWRlb3NcbiAgICAgIGNvbnN0IGV4ZXJjaXNlTmFtZUxvd2VyID0gbG9nRGF0YS5leGVyY2lzZT8ubmFtZT8udG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgICBjb25zdCBmdWxsRXhlcmNpc2UgPSBleGVyY2lzZXNXaXRoVmlkZW9zLmZpbmQoXG4gICAgICAgIGV4ID0+IGV4Lm5hbWUudG9Mb3dlckNhc2UoKS50cmltKCkgPT09IGV4ZXJjaXNlTmFtZUxvd2VyXG4gICAgICApO1xuXG4gICAgICBjb25zdCB1cGRhdGVkRXhlcmNpc2UgPSBmdWxsRXhlcmNpc2VcbiAgICAgID8ge1xuICAgICAgICAgIC4uLmZ1bGxFeGVyY2lzZSxcbiAgICAgICAgICBjYXRlZ29yeTogbG9nRGF0YS5leGVyY2lzZS5jYXRlZ29yeSxcbiAgICAgICAgfVxuICAgICAgOiBsb2dEYXRhLmV4ZXJjaXNlO1xuICBcbiAgICAgIC8vIFByZXBhcmUgbG9nIGRhdGEgd2l0aCBmdWxsIGV4ZXJjaXNlXG4gICAgICBjb25zdCBwcmVwYXJlZExvZ0RhdGEgPSB7XG4gICAgICAgIC4uLmxvZ0RhdGEsXG4gICAgICAgIGlkOiBsb2dEb2MuaWQsXG4gICAgICAgIHdvcmtvdXRJZDogd29ya291dC5pZCxcbiAgICAgICAgZXhlcmNpc2U6IHVwZGF0ZWRFeGVyY2lzZSxcbiAgICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGxvZ0RhdGEuY3JlYXRlZEF0KSxcbiAgICAgICAgdXBkYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGxvZ0RhdGEudXBkYXRlZEF0KVxuICAgICAgfTtcbiAgXG4gICAgICAvLyBVc2UgdGhlIEV4ZXJjaXNlTG9nIGNvbnN0cnVjdG9yIHRvIGVuc3VyZSBwcm9wZXIgbWFwcGluZ1xuICAgICAgcmV0dXJuIG5ldyBFeGVyY2lzZUxvZyhwcmVwYXJlZExvZ0RhdGEpO1xuICAgIH0pO1xuICBcbiAgICByZXR1cm4geyB3b3Jrb3V0LCBsb2dzIH07XG4gIH1cblxuICBhc3luYyBzYXZlV29ya291dFNlc3Npb24oe1xuICAgIHVzZXJJZCxcbiAgICB3b3Jrb3V0LFxuICAgIGxvZ3NcbiAgIH06IHtcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICB3b3Jrb3V0OiBXb3Jrb3V0LFxuICAgIGxvZ3M6IEV4ZXJjaXNlTG9nW11cbiAgIH0pOiBQcm9taXNlPFdvcmtvdXQgfCBudWxsPiB7XG4gICAgaWYgKCF1c2VySWQpIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBJRCBwcm92aWRlZCcpO1xuICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgIFxuICAgICAgY29uc3QgY2xlYW5Xb3Jrb3V0ID0gbmV3IFdvcmtvdXQoe1xuICAgICAgICAuLi53b3Jrb3V0LFxuICAgICAgICByb3VuZFdvcmtvdXRJZDogYCR7d29ya291dC5pZH0tJHtjdXJyZW50RGF0ZS5nZXRUaW1lKCl9YCxcbiAgICAgICAgd29ya291dFN0YXR1czogV29ya291dFN0YXR1cy5RdWV1ZWRVcCxcbiAgICAgICAgY3JlYXRlZEF0OiBjdXJyZW50RGF0ZSxcbiAgICAgICAgdXBkYXRlZEF0OiBjdXJyZW50RGF0ZSxcbiAgICAgICAgc3RhcnRUaW1lOiBjdXJyZW50RGF0ZSxcbiAgICAgICAgbG9nczogW11cbiAgICAgICB9KTtcbiAgIFxuICAgICAgY29uc3Qgd29ya291dFNlc3Npb25SZWYgPSBkb2MoY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgdXNlcklkLCAnd29ya291dFNlc3Npb25zJykpO1xuICAgICAgYXdhaXQgc2V0RG9jKHdvcmtvdXRTZXNzaW9uUmVmLCBjbGVhbldvcmtvdXQudG9EaWN0aW9uYXJ5KCkpO1xuICAgXG4gICAgICBjb25zdCBsb2dzUmVmID0gY29sbGVjdGlvbih3b3Jrb3V0U2Vzc2lvblJlZiwgJ2xvZ3MnKTtcbiAgICAgIGNvbnN0IGxvZ0JhdGNoID0gd3JpdGVCYXRjaChkYik7XG4gICBcbiAgICAgIGxvZ3MuZm9yRWFjaCgobG9nLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBsb2dEb2NSZWYgPSBkb2MobG9nc1JlZiwgYCR7bG9nLmlkfS0ke2N1cnJlbnREYXRlLmdldFRpbWUoKX1gKTtcbiAgICAgICAgbG9nQmF0Y2guc2V0KGxvZ0RvY1JlZiwge1xuICAgICAgICAgIGlkOiBsb2dEb2NSZWYuaWQsXG4gICAgICAgICAgd29ya291dElkOiB3b3Jrb3V0U2Vzc2lvblJlZi5pZCxcbiAgICAgICAgICBleGVyY2lzZTogbG9nLmV4ZXJjaXNlLnRvRGljdGlvbmFyeSgpLCAvLyBjb252ZXJ0IHRoZSBjdXN0b20gRXhlcmNpc2Ugb2JqZWN0XG4gICAgICAgICAgb3JkZXI6IGluZGV4LFxuICAgICAgICAgIGNyZWF0ZWRBdDogY3VycmVudERhdGUuZ2V0VGltZSgpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogY3VycmVudERhdGUuZ2V0VGltZSgpLFxuICAgICAgICAgIGxvZ1N1Ym1pdHRlZDogZmFsc2UsXG4gICAgICAgICAgaXNDb21wbGV0ZWQ6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfSk7IFxuICAgXG4gICAgICBhd2FpdCBsb2dCYXRjaC5jb21taXQoKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIGNsZWFuV29ya291dDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHdvcmtvdXQgc2Vzc2lvbjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICB9XG5cbiAgLyoqXG4gICAqIEV4YW1wbGUgXCJqb2luIGNoYWxsZW5nZVwiIG1ldGhvZCB1c2luZyB0aGUgY2xpZW50IFNESyAobm8gYWRtaW4gcHJpdmlsZWdlcykuXG4gICAqIFRoaXMgY3JlYXRlcyBhIGRvYyBpbiBgdXNlci1jaGFsbGVuZ2VgIHdpdGggdGhlIHVzZXJJZCwgY2hhbGxlbmdlSWQsIGV0Yy5cbiAgICovXG4gIGFzeW5jIGpvaW5DaGFsbGVuZ2Uoe1xuICAgIHVzZXJuYW1lLFxuICAgIGNoYWxsZW5nZUlkXG4gIH06IHtcbiAgICB1c2VybmFtZTogc3RyaW5nO1xuICAgIGNoYWxsZW5nZUlkOiBzdHJpbmc7XG4gIH0pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyAxKSBNYWtlIHN1cmUgd2UgaGF2ZSBhIHNpZ25lZC1pbiB1c2VyXG4gICAgY29uc3QgY3VycmVudFVzZXIgPSB1c2VyU2VydmljZS5jdXJyZW50VXNlcjtcbiAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgfVxuXG4gICAgLy8gMikgRmluZCB0aGUgdXNlciBkb2MgYnkgdXNlcm5hbWVcbiAgICBjb25zdCB1c2Vyc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycpO1xuICAgIGNvbnN0IHVzZXJRdWVyeSA9IHF1ZXJ5KHVzZXJzUmVmLCB3aGVyZSgndXNlcm5hbWUnLCAnPT0nLCB1c2VybmFtZSkpO1xuICAgIGNvbnN0IHVzZXJTbmFwc2hvdCA9IGF3YWl0IGdldERvY3ModXNlclF1ZXJ5KTtcblxuICAgIGlmICh1c2VyU25hcHNob3QuZW1wdHkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBub3QgZm91bmQnKTtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyRG9jID0gdXNlclNuYXBzaG90LmRvY3NbMF07XG4gICAgY29uc3QgdXNlckRhdGEgPSB1c2VyRG9jLmRhdGEoKTtcbiAgICBjb25zdCB1c2VySWQgPSB1c2VyRG9jLmlkO1xuXG4gICAgLy8gMykgQ2hlY2sgaWYgdGhlIGNoYWxsZW5nZSBkb2MgZXhpc3RzXG4gICAgY29uc3QgY2hhbGxlbmdlUmVmID0gZG9jKGRiLCAnc3dlYXRsaXN0LWNvbGxlY3Rpb24nLCBjaGFsbGVuZ2VJZCk7XG4gICAgY29uc3QgY2hhbGxlbmdlU25hcCA9IGF3YWl0IGdldERvYyhjaGFsbGVuZ2VSZWYpO1xuXG4gICAgaWYgKCFjaGFsbGVuZ2VTbmFwLmV4aXN0cygpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NoYWxsZW5nZSBub3QgZm91bmQnKTtcbiAgICB9XG5cbiAgICBjb25zdCBjaGFsbGVuZ2UgPSBjaGFsbGVuZ2VTbmFwLmRhdGEoKTtcblxuICAgIC8vIDQpIEJ1aWxkIG5ldyB1c2VyLWNoYWxsZW5nZSBkb2N1bWVudFxuICAgIGNvbnN0IHVzZXJDaGFsbGVuZ2VJZCA9IGAke2NoYWxsZW5nZUlkfS0ke3VzZXJJZH0tJHtEYXRlLm5vdygpfWA7XG4gICAgY29uc3QgdXNlckNoYWxsZW5nZURhdGEgPSB7XG4gICAgICBpZDogdXNlckNoYWxsZW5nZUlkLFxuICAgICAgY2hhbGxlbmdlOiBjaGFsbGVuZ2UsXG4gICAgICBjaGFsbGVuZ2VJZCxcbiAgICAgIHVzZXJJZCxcbiAgICAgIGZjbVRva2VuOiB1c2VyRGF0YS5mY21Ub2tlbiB8fCAnJyxcbiAgICAgIHByb2ZpbGVJbWFnZTogdXNlckRhdGEucHJvZmlsZUltYWdlIHx8IHt9LFxuICAgICAgcHJvZ3Jlc3M6IDAsXG4gICAgICBjb21wbGV0ZWRXb3Jrb3V0czogW10sXG4gICAgICBpc0NvbXBsZXRlZDogZmFsc2UsXG4gICAgICB1aWQ6IHVzZXJJZCxcbiAgICAgIGxvY2F0aW9uOiB1c2VyRGF0YS5sb2NhdGlvbiB8fCBudWxsLFxuICAgICAgY2l0eTogJycsXG4gICAgICBjb3VudHJ5OiAnJyxcbiAgICAgIHRpbWV6b25lOiAnJyxcbiAgICAgIHVzZXJuYW1lLFxuICAgICAgam9pbkRhdGU6IG5ldyBEYXRlKCksXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBwdWxzZVBvaW50czoge1xuICAgICAgICBiYXNlQ29tcGxldGlvbjogMCxcbiAgICAgICAgZmlyc3RDb21wbGV0aW9uOiAwLFxuICAgICAgICBzdHJlYWtCb251czogMCxcbiAgICAgICAgY2hlY2tJbkJvbnVzOiAwLFxuICAgICAgICBlZmZvcnRSYXRpbmc6IDAsXG4gICAgICAgIGNoYXRQYXJ0aWNpcGF0aW9uOiAwLFxuICAgICAgICBsb2NhdGlvbkNoZWNraW46IDAsXG4gICAgICAgIGNvbnRlbnRFbmdhZ2VtZW50OiAwLFxuICAgICAgICBlbmNvdXJhZ2VtZW50U2VudDogMCxcbiAgICAgICAgZW5jb3VyYWdlbWVudFJlY2VpdmVkOiAwXG4gICAgICB9LFxuICAgICAgY3VycmVudFN0cmVhazogMCxcbiAgICAgIGVuY291cmFnZWRVc2VyczogW10sXG4gICAgICBlbmNvdXJhZ2VkQnlVc2VyczogW10sXG4gICAgICBjaGVja0luczogW11cbiAgICB9O1xuXG4gICAgLy8gNSkgU3RvcmUgdXNlci1jaGFsbGVuZ2UgZG9jXG4gICAgYXdhaXQgc2V0RG9jKGRvYyhkYiwgJ3VzZXItY2hhbGxlbmdlJywgdXNlckNoYWxsZW5nZUlkKSwgdXNlckNoYWxsZW5nZURhdGEpO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCB3b3Jrb3V0U2VydmljZSA9IG5ldyBXb3Jrb3V0U2VydmljZSgpOyJdLCJuYW1lcyI6WyJjb2xsZWN0aW9uIiwiZG9jIiwiZ2V0RG9jcyIsImdldERvYyIsInVwZGF0ZURvYyIsInF1ZXJ5Iiwid2hlcmUiLCJvcmRlckJ5IiwiZnNDb2xsZWN0aW9uIiwic2V0RG9jIiwiZGVsZXRlRG9jIiwid3JpdGVCYXRjaCIsImRiIiwidXNlclNlcnZpY2UiLCJFeGVyY2lzZUxvZyIsIkV4ZXJjaXNlIiwiRXhlcmNpc2VWaWRlbyIsImV4ZXJjaXNlU2VydmljZSIsIlVzZXIiLCJXb3Jrb3V0IiwiQm9keVpvbmUiLCJJbnRyb1ZpZGVvIiwiUmVwc0FuZFdlaWdodExvZyIsIldvcmtvdXRTdGF0dXMiLCJTd2VhdGxpc3RDb2xsZWN0aW9uIiwiZm9ybWF0IiwiY29udmVydFRpbWVzdGFtcCIsImNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAiLCJDaGFsbGVuZ2UiLCJVc2VyQ2hhbGxlbmdlIiwic3RvcmUiLCJzZXRDdXJyZW50V29ya291dCIsInNldEN1cnJlbnRFeGVyY2lzZUxvZ3MiLCJyZXNldFdvcmtvdXRTdGF0ZSIsInNldFdvcmtvdXRTdW1tYXJ5IiwiV29ya291dFNlcnZpY2UiLCJnZW5lcmF0ZUlkIiwiaWQiLCJmb3JtYXRXb3Jrb3V0QW5kSW5pdGlhbGl6ZUxvZ3MiLCJleGVyY2lzZURldGFpbHMiLCJ3b3Jrb3V0QXV0aG9yIiwid29ya0lkIiwiZXhlcmNpc2VSZWZlcmVuY2VzIiwiZXhlcmNpc2VMb2dzIiwidmFsaWRFeGVyY2lzZURldGFpbHMiLCJuZXdXb3Jrb3V0IiwiZmlsdGVyIiwiZGV0YWlsIiwiZXhlcmNpc2UiLCJmb3JFYWNoIiwiaW5kZXgiLCJjYXRlZ29yeSIsInR5cGUiLCJkZXRhaWxzIiwic2V0cyIsInJlcHMiLCJ3ZWlnaHQiLCJzY3JlZW5UaW1lIiwic2VsZWN0ZWRWaWRlbyIsImR1cmF0aW9uIiwiYnBtIiwiY2Fsb3JpZXMiLCJjb25zb2xlIiwibG9nIiwiZXhlcmNpc2VJbnN0YW5jZSIsIndvcmtvdXRTZXJ2aWNlIiwibmFtZSIsImF1dGhvciIsInVzZXJJZCIsImN1cnJlbnRVc2VyIiwidXNlcm5hbWUiLCJkZXNjcmlwdGlvbiIsInByaW1hcnlCb2R5UGFydHMiLCJzZWNvbmRhcnlCb2R5UGFydHMiLCJ0YWdzIiwidmlkZW9zIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInVwZGF0ZWRBdCIsImV4ZXJjaXNlUmVmIiwiZ3JvdXBJZCIsInB1c2giLCJzZXRzTG9ncyIsIkFycmF5IiwiZnJvbSIsImxlbmd0aCIsInBhcnNlSW50IiwiZXhlcmNpc2VMb2dJZCIsImdlbmVyYXRlRXhlcmNpc2VMb2dJRCIsIndvcmtvdXRJZCIsImxvZ3MiLCJmZWVkYmFjayIsIm5vdGUiLCJub3RlcyIsImlzU3BsaXQiLCJsb2dTdWJtaXR0ZWQiLCJsb2dJc0VkaXRpbmciLCJpc0NvbXBsZXRlZCIsIm9yZGVyIiwiY29tcGxldGVkQXQiLCJyb3VuZFdvcmtvdXRJZCIsImV4ZXJjaXNlcyIsInRpdGxlIiwid29ya291dFJhdGluZyIsInVzZUF1dGhvckNvbnRlbnQiLCJ3b3Jrb3V0U3RhdHVzIiwiem9uZSIsImRldGVybWluZVdvcmtvdXRab25lIiwid29ya291dCIsImdldFVzZXJCeUlkIiwidXNlckRvYyIsImVycm9yIiwiZXhpc3RzIiwiRXJyb3IiLCJkYXRhIiwicmV2ZXJ0QXV0aG9yRm9ybWF0IiwiYXV0aG9ySWQiLCJ3b3Jrb3V0UmVmIiwidXBkYXRlV29ya291dCIsImJhdGNoIiwibG9nc1JlZiIsInRvRGljdGlvbmFyeSIsIm1lcmdlIiwibG9nUmVmIiwic2V0IiwiY29tbWl0IiwiZmV0Y2hDdXJyZW50V29ya291dCIsInNlc3Npb24iLCJmZXRjaEN1cnJlbnRXb3Jrb3V0U2Vzc2lvbiIsImdldEFsbFN3ZWF0bGlzdHMiLCJ3b3Jrb3V0c1JlZiIsImV4ZXJjaXNlc1dpdGhWaWRlb3MiLCJ3b3Jrb3V0c1NuYXBzaG90Iiwid29ya291dHMiLCJ3b3Jrb3V0RG9jIiwid29ya291dERhdGEiLCJtYXBwZWRFeGVyY2lzZXMiLCJsb2dzU25hcHNob3QiLCJmaXJlc3RvcmVFcnJvciIsImZldGNoQW5kTWFwRXhlcmNpc2VzV2l0aFZpZGVvcyIsImRvY3MiLCJtYXAiLCJmdWxsRXhlcmNpc2UiLCJmaW5kIiwiZXgiLCJjb2xsZWN0aW9uSWQiLCJjaGFsbGVuZ2UiLCJzdGFydFRpbWUiLCJ1bmRlZmluZWQiLCJsb2dEb2MiLCJtZXNzYWdlIiwiZ2V0VXNlckNoYWxsZW5nZXNCeUNoYWxsZW5nZUlkIiwiY2hhbGxlbmdlSWQiLCJ1c2VyQ2hhbGxlbmdlc1JlZiIsInEiLCJzbmFwc2hvdCIsInVzZXJDaGFsbGVuZ2VzIiwiZmV0Y2hXb3Jrb3V0U3VtbWFyaWVzIiwiZGF0ZSIsImZvcm1hdHRlZERhdGUiLCJzdW1tYXJpZXNSZWYiLCJmZXRjaEFsbFdvcmtvdXRTdW1tYXJpZXMiLCJmZXRjaFVzZXJDaGFsbGVuZ2VzQnlVc2VySWQiLCJzdWJ0aXRsZSIsInBhcnRpY2lwYW50cyIsInN0YXR1cyIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJpbnRyb1ZpZGVvcyIsInYiLCJ2aWRlb1VybCIsImZldGNoQ29sbGVjdGlvbldpdGhTd2VhdExpc3RzIiwic3dlYXRMaXN0cyIsInN3ZWF0bGlzdElkZW50aWZpZXIiLCJnZXRDb2xsZWN0aW9uQnlJZCIsInN3ZWF0bGlzdElkcyIsImZldGNoU2F2ZWRXb3Jrb3V0Iiwic3dlYXRsaXN0QXV0aG9ySWQiLCJ3b3Jrb3V0U25hcCIsInNpemUiLCJsb2dEYXRhIiwidXBkYXRlZEV4ZXJjaXNlIiwiZXhlcmNpc2VOYW1lIiwiZXhlcmNpc2VDYXRlZ29yeSIsInNhdmVkU2NyZWVuVGltZSIsInJlY29tbWVuZGVkV2VpZ2h0IiwiaXNCb2R5V2VpZ2h0IiwiZmV0Y2hVc2VyQ2hhbGxlbmdlc0J5Q2hhbGxlbmdlSWQiLCJkb2NSZWYiLCJkb2NTbmFwIiwiZ2V0Q29sbGVjdGlvbnNCeUlkcyIsImNvbGxlY3Rpb25JZHMiLCJjb2xsZWN0aW9ucyIsIlByb21pc2UiLCJhbGwiLCJmZXRjaENvbGxlY3Rpb25zIiwiY29sbGVjdGlvbnNSZWYiLCJxQXJyYXkiLCJzbmFwc2hvdEFycmF5IiwiY29sbGVjdGlvbnNGcm9tQXJyYXkiLCJxU3RyaW5nIiwic25hcHNob3RTdHJpbmciLCJjb2xsZWN0aW9uc0Zyb21TdHJpbmciLCJjb21iaW5lZCIsInVuaXF1ZUNvbGxlY3Rpb25zIiwiTWFwIiwidmFsdWVzIiwiZmV0Y2hBY3RpdmVDaGFsbGVuZ2VzIiwiYWxsQ2hhbGxlbmdlcyIsImFjdGl2ZUNoYWxsZW5nZXMiLCJ1c2VyQ2hhbGxlbmdlIiwiZmV0Y2hVc2VyQ2hhbGxlbmdlcyIsInVwZGF0ZVdvcmtvdXRTdW1tYXJ5Iiwic3VtbWFyeSIsInN1bW1hcnlSZWYiLCJzdW1tYXJ5RGF0YSIsImJvZHlQYXJ0cyIsIndvcmtvdXRUaXRsZSIsImNhbG9yaWVzQnVybmVkIiwiZXhlcmNpc2VzQ29tcGxldGVkIiwiYWlJbnNpZ2h0IiwicmVjb21tZW5kYXRpb25zIiwiZ2lmVVJMcyIsInJlY29tbWVuZGVkV29yayIsInVwZGF0ZVdvcmtvdXRMb2dzIiwibG9nRG9jUmVmIiwidXBkYXRlIiwiY2FuY2VsV29ya291dCIsIndvcmtvdXRTdW1tYXJ5IiwiZGVsZXRlV29ya291dFNlc3Npb24iLCJkZWxldGVXb3Jrb3V0U3VtbWFyeSIsImNsZWFuVXBXb3Jrb3V0SW5Qcm9ncmVzcyIsImRlbGV0ZSIsInJlZiIsIndvcmtvdXRTdW1tYXJ5SWQiLCJkaXNwYXRjaCIsImV4ZXJjaXNlU25hcHNob3QiLCJ2aWRlb1NuYXBzaG90IiwiZXhlcmNpc2VWaWRlb3MiLCJ3b3Jrb3V0U2Vzc2lvbnNSZWYiLCJzbmFwIiwibWF0Y2hpbmdWaWRlb3MiLCJ2aWRlbyIsInRvTG93ZXJDYXNlIiwiUXVldWVkVXAiLCJlbXB0eSIsInByb2Nlc3NXb3Jrb3V0U2Vzc2lvbkRvY3VtZW50IiwiSW5Qcm9ncmVzcyIsImZldGNoQWxsV29ya291dFNlc3Npb25zIiwic2Vzc2lvbnMiLCJzZXNzaW9uRGF0YSIsInNvcnQiLCJhIiwiYiIsIm9yZGVyQSIsIm9yZGVyQiIsInVwZGF0ZVVzZXJDaGFsbGVuZ2UiLCJjaGFsbGVuZ2VSZWYiLCJjaGFsbGVuZ2VEYXRhIiwidXBkYXRlQ29sbGVjdGlvbiIsImNvbGxSZWYiLCJuZXdEb2NSZWYiLCJ0cmltIiwiZXhlcmNpc2VOYW1lTG93ZXIiLCJBcmNoaXZlZCIsIkZ1bGxCb2R5IiwicHJlcGFyZWRMb2dEYXRhIiwic2F2ZVdvcmtvdXRTZXNzaW9uIiwiY3VycmVudERhdGUiLCJjbGVhbldvcmtvdXQiLCJ3b3Jrb3V0U2Vzc2lvblJlZiIsImxvZ0JhdGNoIiwiZ2V0VGltZSIsImpvaW5DaGFsbGVuZ2UiLCJ1c2Vyc1JlZiIsInVzZXJRdWVyeSIsInVzZXJTbmFwc2hvdCIsInVzZXJEYXRhIiwiY2hhbGxlbmdlU25hcCIsInVzZXJDaGFsbGVuZ2VJZCIsInVzZXJDaGFsbGVuZ2VEYXRhIiwibm93IiwiZmNtVG9rZW4iLCJwcm9maWxlSW1hZ2UiLCJwcm9ncmVzcyIsImNvbXBsZXRlZFdvcmtvdXRzIiwidWlkIiwibG9jYXRpb24iLCJjaXR5IiwiY291bnRyeSIsInRpbWV6b25lIiwiam9pbkRhdGUiLCJwdWxzZVBvaW50cyIsImJhc2VDb21wbGV0aW9uIiwiZmlyc3RDb21wbGV0aW9uIiwic3RyZWFrQm9udXMiLCJjaGVja0luQm9udXMiLCJlZmZvcnRSYXRpbmciLCJjaGF0UGFydGljaXBhdGlvbiIsImxvY2F0aW9uQ2hlY2tpbiIsImNvbnRlbnRFbmdhZ2VtZW50IiwiZW5jb3VyYWdlbWVudFNlbnQiLCJlbmNvdXJhZ2VtZW50UmVjZWl2ZWQiLCJjdXJyZW50U3RyZWFrIiwiZW5jb3VyYWdlZFVzZXJzIiwiZW5jb3VyYWdlZEJ5VXNlcnMiLCJjaGVja0lucyIsImN1cnJlbnRXb3Jrb3V0IiwiZ2V0U3RhdGUiLCJjdXJyZW50V29ya291dExvZ3MiLCJjdXJyZW50RXhlcmNpc2VMb2dzIiwiY3VycmVudFdvcmtvdXRTdW1tYXJ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/api/firebase/workout/service.ts\n"));

/***/ })

});
"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/createRound",{

/***/ "./src/api/firebase/gemini/service.ts":
/*!********************************************!*\
  !*** ./src/api/firebase/gemini/service.ts ***!
  \********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GeminiService: function() { return /* binding */ GeminiService; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @swc/helpers/_/_async_to_generator */ \"./node_modules/@swc/helpers/esm/_async_to_generator.js\");\n/* harmony import */ var _swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @swc/helpers/_/_class_call_check */ \"./node_modules/@swc/helpers/esm/_class_call_check.js\");\n/* harmony import */ var _swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @swc/helpers/_/_ts_generator */ \"./node_modules/@swc/helpers/esm/_ts_generator.js\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config */ \"./src/api/firebase/config.ts\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n// services/GeminiService.ts\n\n\n\n\n\nvar GeminiService = /*#__PURE__*/ function() {\n    \"use strict\";\n    function GeminiService() {\n        (0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_2__._)(this, GeminiService);\n    }\n    var _proto = GeminiService.prototype;\n    _proto.sendPrompt = function sendPrompt(prompt) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_3__._)(function() {\n            var generateRef, response, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_4__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_config__WEBPACK_IMPORTED_MODULE_0__.db, \"generate\"), {\n                                prompt: prompt\n                            })\n                        ];\n                    case 1:\n                        generateRef = _state.sent();\n                        console.log(\"Generated prompt document ID:\", generateRef.id);\n                        return [\n                            4,\n                            _this.fetchOutputWithRetry(generateRef, 30, 2000)\n                        ];\n                    case 2:\n                        response = _state.sent();\n                        return [\n                            2,\n                            response\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error sending prompt:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchOutputWithRetry = function fetchOutputWithRetry(docRef, attempts, delay) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_3__._)(function() {\n            var snapshot, data;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_4__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (attempts === 0) {\n                            throw new Error(\"Max retry attempts reached\");\n                        }\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDoc)(docRef)\n                        ];\n                    case 1:\n                        snapshot = _state.sent();\n                        data = snapshot.data();\n                        if (data === null || data === void 0 ? void 0 : data.output) {\n                            return [\n                                2,\n                                data.output\n                            ];\n                        }\n                        // Wait for the specified delay\n                        return [\n                            4,\n                            new Promise(function(resolve) {\n                                return setTimeout(resolve, delay);\n                            })\n                        ];\n                    case 2:\n                        _state.sent();\n                        // Retry\n                        return [\n                            2,\n                            _this.fetchOutputWithRetry(docRef, attempts - 1, delay)\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.generateRound = function generateRound(mustIncludeExercises, userPrompt, preferences, creatorExercises, allAvailableExercises) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_3__._)(function() {\n            var mustIncludeList, creatorExerciseList, allExerciseList, prompt, response, jsonString, parsedResponse, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_4__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        // Combine all available exercises\n                        mustIncludeList = mustIncludeExercises.join(\", \");\n                        creatorExerciseList = creatorExercises.map(function(ex) {\n                            return ex.name;\n                        }).join(\", \");\n                        allExerciseList = allAvailableExercises.map(function(ex) {\n                            return ex.name;\n                        }).join(\", \");\n                        prompt = \"\\n  As an AI fitness expert, create a fitness program with the following requirements:\\n\\n  USER DESCRIPTION:\\n  \".concat(userPrompt, \"\\n\\n  EXERCISE SELECTION PRIORITIES:\\n  1. Must include these exercises: \").concat(mustIncludeList, \"\\n  2. Prefer these creator-specific exercises when possible: \").concat(creatorExerciseList, \"\\n  3. Can also include any of these exercises as needed: \").concat(allExerciseList, \"\\n\\n  PREFERENCES:\\n  \").concat(preferences.join(\"\\n\"), '\\n\\n  Please ensure:\\n  - Balanced program structure\\n  - Proper exercise sequencing\\n  - Rest and recovery consideration\\n  - Progressive overload\\n  - Exercise variety while maintaining focus\\n\\n  Create a complete workout program with multiple stacks (workout sessions). Each stack should have a specific focus and purpose.\\n\\n  Format your response as a JSON object with the following structure:\\n  {\\n    \"stacks\": [\\n      {\\n        \"title\": \"Name of the workout stack\",\\n        \"description\": \"Detailed description of this stack\\'s focus and goals\",\\n        \"exercises\": [\\n          {\\n            \"name\": \"Exercise Name\",\\n            \"category\": {\\n              \"details\": {\\n                \"sets\": 3,\\n                \"reps\": [\"8\",\"10\"],  // Array format: [\"min reps\", \"max reps\"] or [\"exact reps\"] if no range\\n                \"weight\": 0,\\n                \"screenTime\": 45     // Duration in seconds for exercise demonstration\\n              }\\n            }\\n          }\\n        ]\\n      }\\n    ]\\n  }\\n\\n  IMPORTANT FORMATTING RULES:\\n  1. Only include exercises from the provided list\\n  2. Each stack should have 4-6 exercises\\n  3. Provide detailed, meaningful titles and descriptions\\n  4. Consider the user\\'s preferences\\n  5. Ensure proper exercise order and flow within each stack\\n  6. Format as valid JSON\\n  7. REPS MUST BE AN ARRAY:\\n     - For a range: [\"8\",\"12\"] means 8-12 reps\\n     - For exact reps: [\"10\"] means exactly 10 reps\\n     - For timed exercises: [\"30s\"] means 30 seconds\\n     - For endurance: [\"20\"] or [\"15\",\"20\"] for rep ranges\\n  8. Include screenTime (in seconds) for each exercise\\n  9. Weight should be in pounds (0 for bodyweight exercises)\\n');\n                        console.log(\"The prompt is\", prompt);\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            _this.sendPrompt(prompt)\n                        ];\n                    case 2:\n                        response = _state.sent();\n                        // Clean up the response\n                        jsonString = response.replace(/```json/, \"\") // Remove opening JSON markdown\n                        .replace(/```/, \"\") // Remove closing markdown\n                        .trim(); // Remove extra whitespace\n                        try {\n                            parsedResponse = JSON.parse(jsonString);\n                            // Validate the response structure\n                            if (!parsedResponse.stacks || !Array.isArray(parsedResponse.stacks)) {\n                                throw new Error(\"Invalid response structure - missing stacks array\");\n                            }\n                            return [\n                                2,\n                                parsedResponse\n                            ];\n                        } catch (parseError) {\n                            console.error(\"JSON Parse Error:\", parseError);\n                            console.log(\"Raw Response:\", response);\n                            console.log(\"Cleaned Response:\", jsonString);\n                            throw new Error(\"Failed to parse AI response\");\n                        }\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Generation Error:\", error);\n                        throw new Error(\"Failed to generate workout round\");\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.parseExercises = function parseExercises(input) {\n        // Remove any leading/trailing whitespace and parse the JSON array\n        var trimmedInput = input.trim();\n        try {\n            return JSON.parse(trimmedInput);\n        } catch (error) {\n            console.error(\"Error parsing exercises:\", error);\n            throw new Error(\"Failed to parse exercise response\");\n        }\n    };\n    GeminiService.getInstance = function getInstance() {\n        if (!GeminiService.instance) {\n            GeminiService.instance = new GeminiService();\n        }\n        return GeminiService.instance;\n    };\n    return GeminiService;\n}();\n/* harmony default export */ __webpack_exports__[\"default\"] = (GeminiService);\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPZTs7d0JBQ1QsRUFBRSxPQUFPWSxZQUFZOzRCQUNuQnBDLFFBQVFELEtBQUssQ0FBQyxxQkFBcUJxQzs0QkFDbkNwQyxRQUFRQyxHQUFHLENBQUMsaUJBQWlCSDs0QkFDN0JFLFFBQVFDLEdBQUcsQ0FBQyxxQkFBcUJzQjs0QkFDakMsTUFBTSxJQUFJZCxNQUFNO3dCQUNsQjs7Ozs7O3dCQUNPVjt3QkFDUEMsUUFBUUQsS0FBSyxDQUFDLHFCQUFxQkE7d0JBQ25DLE1BQU0sSUFBSVUsTUFBTTs7Ozs7OztRQUVwQjs7SUFFRSxPQUFRNEIsY0FTUCxHQVRELFNBQVFBLGVBQWVDLEtBQWE7UUFDbEMsa0VBQWtFO1FBQ2xFLElBQU1DLGVBQWVELE1BQU1SLElBQUk7UUFDL0IsSUFBSTtZQUNGLE9BQU9DLEtBQUtDLEtBQUssQ0FBQ087UUFDcEIsRUFBRSxPQUFPeEMsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsNEJBQTRCQTtZQUMxQyxNQUFNLElBQUlVLE1BQU07UUFDbEI7SUFDRjtJQXhLV2YsY0FLRzhDLFdBS2IsR0FMRCxTQUFjQTtRQUNaLElBQUksQ0FBQzlDLGNBQWMrQyxRQUFRLEVBQUU7WUFOcEIvQyxjQU9PK0MsUUFBUSxHQUFHLElBUGxCL0M7UUFRVDtRQUNBLE9BQU9BLGNBQWMrQyxRQUFRO0lBQy9CO1dBVlcvQztJQXlLWjtBQUVELCtEQUFlQSxhQUFhQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9hcGkvZmlyZWJhc2UvZ2VtaW5pL3NlcnZpY2UudHM/NmZiNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzZXJ2aWNlcy9HZW1pbmlTZXJ2aWNlLnRzXG5pbXBvcnQgeyBFeGVyY2lzZSB9IGZyb20gJy4uL2V4ZXJjaXNlJztcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vY29uZmlnJztcbmltcG9ydCB7IGNvbGxlY3Rpb24sIGFkZERvYywgZ2V0RG9jLCBEb2N1bWVudFJlZmVyZW5jZSB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XG5cbi8vIGFwaS9maXJlYmFzZS9nZW1pbmkvdHlwZXMudHNcbmludGVyZmFjZSBHZW5lcmF0ZWRFeGVyY2lzZSB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHNldHM6IG51bWJlcjtcbiAgICByZXBzOiBzdHJpbmdbXTtcbiAgICBjYXRlZ29yeToge1xuICAgICAgdHlwZTogJ3dlaWdodFRyYWluaW5nJztcbiAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgc2V0czogbnVtYmVyO1xuICAgICAgICByZXBzOiBzdHJpbmdbXTtcbiAgICAgICAgd2VpZ2h0OiBudW1iZXI7XG4gICAgICAgIHNjcmVlblRpbWU6IG51bWJlcjtcbiAgICAgIH07XG4gICAgfTtcbiAgfVxuICBcbiAgaW50ZXJmYWNlIEdlbmVyYXRlZFN0YWNrIHtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgZXhlcmNpc2VzOiBHZW5lcmF0ZWRFeGVyY2lzZVtdO1xuICB9XG4gIFxuICBpbnRlcmZhY2UgR2VuZXJhdGVkUm91bmRSZXNwb25zZSB7XG4gICAgc3RhY2tzOiBHZW5lcmF0ZWRTdGFja1tdO1xuICB9XG5cbmV4cG9ydCBjbGFzcyBHZW1pbmlTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IEdlbWluaVNlcnZpY2U7XG4gIFxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cblxuICBwdWJsaWMgc3RhdGljIGdldEluc3RhbmNlKCk6IEdlbWluaVNlcnZpY2Uge1xuICAgIGlmICghR2VtaW5pU2VydmljZS5pbnN0YW5jZSkge1xuICAgICAgR2VtaW5pU2VydmljZS5pbnN0YW5jZSA9IG5ldyBHZW1pbmlTZXJ2aWNlKCk7XG4gICAgfVxuICAgIHJldHVybiBHZW1pbmlTZXJ2aWNlLmluc3RhbmNlO1xuICB9XG5cbiAgYXN5bmMgc2VuZFByb21wdChwcm9tcHQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENyZWF0ZSBhIG5ldyBkb2N1bWVudCBpbiB0aGUgJ2dlbmVyYXRlJyBjb2xsZWN0aW9uXG4gICAgICBjb25zdCBnZW5lcmF0ZVJlZiA9IGF3YWl0IGFkZERvYyhjb2xsZWN0aW9uKGRiLCAnZ2VuZXJhdGUnKSwge1xuICAgICAgICBwcm9tcHQ6IHByb21wdFxuICAgICAgfSk7XG4gIFxuICAgICAgY29uc29sZS5sb2coJ0dlbmVyYXRlZCBwcm9tcHQgZG9jdW1lbnQgSUQ6JywgZ2VuZXJhdGVSZWYuaWQpO1xuICBcbiAgICAgIC8vIFdhaXQgZm9yIHRoZSByZXNwb25zZSB3aXRoIHJldHJpZXNcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5mZXRjaE91dHB1dFdpdGhSZXRyeShnZW5lcmF0ZVJlZiwgMzAsIDIwMDApO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIHByb21wdDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGZldGNoT3V0cHV0V2l0aFJldHJ5KFxuICAgIGRvY1JlZjogRG9jdW1lbnRSZWZlcmVuY2UsXG4gICAgYXR0ZW1wdHM6IG51bWJlcixcbiAgICBkZWxheTogbnVtYmVyXG4gICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgaWYgKGF0dGVtcHRzID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01heCByZXRyeSBhdHRlbXB0cyByZWFjaGVkJyk7XG4gICAgfVxuXG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2MoZG9jUmVmKTtcbiAgICBjb25zdCBkYXRhID0gc25hcHNob3QuZGF0YSgpO1xuXG4gICAgaWYgKGRhdGE/Lm91dHB1dCkge1xuICAgICAgcmV0dXJuIGRhdGEub3V0cHV0O1xuICAgIH1cblxuICAgIC8vIFdhaXQgZm9yIHRoZSBzcGVjaWZpZWQgZGVsYXlcbiAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZGVsYXkpKTtcblxuICAgIC8vIFJldHJ5XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hPdXRwdXRXaXRoUmV0cnkoZG9jUmVmLCBhdHRlbXB0cyAtIDEsIGRlbGF5KTtcbiAgfVxuXG5hc3luYyBnZW5lcmF0ZVJvdW5kKFxuICBtdXN0SW5jbHVkZUV4ZXJjaXNlczogc3RyaW5nW10sXG4gIHVzZXJQcm9tcHQ6IHN0cmluZyxcbiAgcHJlZmVyZW5jZXM6IHN0cmluZ1tdLFxuICBjcmVhdG9yRXhlcmNpc2VzOiBFeGVyY2lzZVtdLFxuICBhbGxBdmFpbGFibGVFeGVyY2lzZXM6IEV4ZXJjaXNlW11cbik6IFByb21pc2U8R2VuZXJhdGVkUm91bmRSZXNwb25zZT4ge1xuICAvLyBDb21iaW5lIGFsbCBhdmFpbGFibGUgZXhlcmNpc2VzXG4gIGNvbnN0IG11c3RJbmNsdWRlTGlzdCA9IG11c3RJbmNsdWRlRXhlcmNpc2VzLmpvaW4oXCIsIFwiKTtcbiAgY29uc3QgY3JlYXRvckV4ZXJjaXNlTGlzdCA9IGNyZWF0b3JFeGVyY2lzZXMubWFwKGV4ID0+IGV4Lm5hbWUpLmpvaW4oXCIsIFwiKTtcbiAgY29uc3QgYWxsRXhlcmNpc2VMaXN0ID0gYWxsQXZhaWxhYmxlRXhlcmNpc2VzLm1hcChleCA9PiBleC5uYW1lKS5qb2luKFwiLCBcIik7XG4gIFxuICBjb25zdCBwcm9tcHQgPSBgXG4gIEFzIGFuIEFJIGZpdG5lc3MgZXhwZXJ0LCBjcmVhdGUgYSBmaXRuZXNzIHByb2dyYW0gd2l0aCB0aGUgZm9sbG93aW5nIHJlcXVpcmVtZW50czpcblxuICBVU0VSIERFU0NSSVBUSU9OOlxuICAke3VzZXJQcm9tcHR9XG5cbiAgRVhFUkNJU0UgU0VMRUNUSU9OIFBSSU9SSVRJRVM6XG4gIDEuIE11c3QgaW5jbHVkZSB0aGVzZSBleGVyY2lzZXM6ICR7bXVzdEluY2x1ZGVMaXN0fVxuICAyLiBQcmVmZXIgdGhlc2UgY3JlYXRvci1zcGVjaWZpYyBleGVyY2lzZXMgd2hlbiBwb3NzaWJsZTogJHtjcmVhdG9yRXhlcmNpc2VMaXN0fVxuICAzLiBDYW4gYWxzbyBpbmNsdWRlIGFueSBvZiB0aGVzZSBleGVyY2lzZXMgYXMgbmVlZGVkOiAke2FsbEV4ZXJjaXNlTGlzdH1cblxuICBQUkVGRVJFTkNFUzpcbiAgJHtwcmVmZXJlbmNlcy5qb2luKFwiXFxuXCIpfVxuXG4gIFBsZWFzZSBlbnN1cmU6XG4gIC0gQmFsYW5jZWQgcHJvZ3JhbSBzdHJ1Y3R1cmVcbiAgLSBQcm9wZXIgZXhlcmNpc2Ugc2VxdWVuY2luZ1xuICAtIFJlc3QgYW5kIHJlY292ZXJ5IGNvbnNpZGVyYXRpb25cbiAgLSBQcm9ncmVzc2l2ZSBvdmVybG9hZFxuICAtIEV4ZXJjaXNlIHZhcmlldHkgd2hpbGUgbWFpbnRhaW5pbmcgZm9jdXNcblxuICBDcmVhdGUgYSBjb21wbGV0ZSB3b3Jrb3V0IHByb2dyYW0gd2l0aCBtdWx0aXBsZSBzdGFja3MgKHdvcmtvdXQgc2Vzc2lvbnMpLiBFYWNoIHN0YWNrIHNob3VsZCBoYXZlIGEgc3BlY2lmaWMgZm9jdXMgYW5kIHB1cnBvc2UuXG5cbiAgRm9ybWF0IHlvdXIgcmVzcG9uc2UgYXMgYSBKU09OIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgc3RydWN0dXJlOlxuICB7XG4gICAgXCJzdGFja3NcIjogW1xuICAgICAge1xuICAgICAgICBcInRpdGxlXCI6IFwiTmFtZSBvZiB0aGUgd29ya291dCBzdGFja1wiLFxuICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiRGV0YWlsZWQgZGVzY3JpcHRpb24gb2YgdGhpcyBzdGFjaydzIGZvY3VzIGFuZCBnb2Fsc1wiLFxuICAgICAgICBcImV4ZXJjaXNlc1wiOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgXCJuYW1lXCI6IFwiRXhlcmNpc2UgTmFtZVwiLFxuICAgICAgICAgICAgXCJjYXRlZ29yeVwiOiB7XG4gICAgICAgICAgICAgIFwiZGV0YWlsc1wiOiB7XG4gICAgICAgICAgICAgICAgXCJzZXRzXCI6IDMsXG4gICAgICAgICAgICAgICAgXCJyZXBzXCI6IFtcIjhcIixcIjEwXCJdLCAgLy8gQXJyYXkgZm9ybWF0OiBbXCJtaW4gcmVwc1wiLCBcIm1heCByZXBzXCJdIG9yIFtcImV4YWN0IHJlcHNcIl0gaWYgbm8gcmFuZ2VcbiAgICAgICAgICAgICAgICBcIndlaWdodFwiOiAwLFxuICAgICAgICAgICAgICAgIFwic2NyZWVuVGltZVwiOiA0NSAgICAgLy8gRHVyYXRpb24gaW4gc2Vjb25kcyBmb3IgZXhlcmNpc2UgZGVtb25zdHJhdGlvblxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgXVxuICB9XG5cbiAgSU1QT1JUQU5UIEZPUk1BVFRJTkcgUlVMRVM6XG4gIDEuIE9ubHkgaW5jbHVkZSBleGVyY2lzZXMgZnJvbSB0aGUgcHJvdmlkZWQgbGlzdFxuICAyLiBFYWNoIHN0YWNrIHNob3VsZCBoYXZlIDQtNiBleGVyY2lzZXNcbiAgMy4gUHJvdmlkZSBkZXRhaWxlZCwgbWVhbmluZ2Z1bCB0aXRsZXMgYW5kIGRlc2NyaXB0aW9uc1xuICA0LiBDb25zaWRlciB0aGUgdXNlcidzIHByZWZlcmVuY2VzXG4gIDUuIEVuc3VyZSBwcm9wZXIgZXhlcmNpc2Ugb3JkZXIgYW5kIGZsb3cgd2l0aGluIGVhY2ggc3RhY2tcbiAgNi4gRm9ybWF0IGFzIHZhbGlkIEpTT05cbiAgNy4gUkVQUyBNVVNUIEJFIEFOIEFSUkFZOlxuICAgICAtIEZvciBhIHJhbmdlOiBbXCI4XCIsXCIxMlwiXSBtZWFucyA4LTEyIHJlcHNcbiAgICAgLSBGb3IgZXhhY3QgcmVwczogW1wiMTBcIl0gbWVhbnMgZXhhY3RseSAxMCByZXBzXG4gICAgIC0gRm9yIHRpbWVkIGV4ZXJjaXNlczogW1wiMzBzXCJdIG1lYW5zIDMwIHNlY29uZHNcbiAgICAgLSBGb3IgZW5kdXJhbmNlOiBbXCIyMFwiXSBvciBbXCIxNVwiLFwiMjBcIl0gZm9yIHJlcCByYW5nZXNcbiAgOC4gSW5jbHVkZSBzY3JlZW5UaW1lIChpbiBzZWNvbmRzKSBmb3IgZWFjaCBleGVyY2lzZVxuICA5LiBXZWlnaHQgc2hvdWxkIGJlIGluIHBvdW5kcyAoMCBmb3IgYm9keXdlaWdodCBleGVyY2lzZXMpXG5gO1xuXG4gIGNvbnNvbGUubG9nKFwiVGhlIHByb21wdCBpc1wiLCBwcm9tcHQpO1xuICBcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFByb21wdChwcm9tcHQpO1xuXG4gICAgLy8gQ2xlYW4gdXAgdGhlIHJlc3BvbnNlXG4gICAgbGV0IGpzb25TdHJpbmcgPSByZXNwb25zZVxuICAgICAgLnJlcGxhY2UoL2BgYGpzb24vLCAnJykgIC8vIFJlbW92ZSBvcGVuaW5nIEpTT04gbWFya2Rvd25cbiAgICAgIC5yZXBsYWNlKC9gYGAvLCAnJykgICAgICAvLyBSZW1vdmUgY2xvc2luZyBtYXJrZG93blxuICAgICAgLnRyaW0oKTsgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBleHRyYSB3aGl0ZXNwYWNlXG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkUmVzcG9uc2UgPSBKU09OLnBhcnNlKGpzb25TdHJpbmcpO1xuICAgICAgXG4gICAgICAvLyBWYWxpZGF0ZSB0aGUgcmVzcG9uc2Ugc3RydWN0dXJlXG4gICAgICBpZiAoIXBhcnNlZFJlc3BvbnNlLnN0YWNrcyB8fCAhQXJyYXkuaXNBcnJheShwYXJzZWRSZXNwb25zZS5zdGFja3MpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZXNwb25zZSBzdHJ1Y3R1cmUgLSBtaXNzaW5nIHN0YWNrcyBhcnJheScpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcGFyc2VkUmVzcG9uc2U7XG4gICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignSlNPTiBQYXJzZSBFcnJvcjonLCBwYXJzZUVycm9yKTtcbiAgICAgIGNvbnNvbGUubG9nKCdSYXcgUmVzcG9uc2U6JywgcmVzcG9uc2UpO1xuICAgICAgY29uc29sZS5sb2coJ0NsZWFuZWQgUmVzcG9uc2U6JywganNvblN0cmluZyk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBBSSByZXNwb25zZScpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdHZW5lcmF0aW9uIEVycm9yOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBnZW5lcmF0ZSB3b3Jrb3V0IHJvdW5kJyk7XG4gIH1cbn1cblxuICBwcml2YXRlIHBhcnNlRXhlcmNpc2VzKGlucHV0OiBzdHJpbmcpOiBzdHJpbmdbXVtdIHtcbiAgICAvLyBSZW1vdmUgYW55IGxlYWRpbmcvdHJhaWxpbmcgd2hpdGVzcGFjZSBhbmQgcGFyc2UgdGhlIEpTT04gYXJyYXlcbiAgICBjb25zdCB0cmltbWVkSW5wdXQgPSBpbnB1dC50cmltKCk7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKHRyaW1tZWRJbnB1dCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgZXhlcmNpc2VzOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHBhcnNlIGV4ZXJjaXNlIHJlc3BvbnNlJyk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEdlbWluaVNlcnZpY2U7Il0sIm5hbWVzIjpbImRiIiwiY29sbGVjdGlvbiIsImFkZERvYyIsImdldERvYyIsIkdlbWluaVNlcnZpY2UiLCJzZW5kUHJvbXB0IiwicHJvbXB0IiwiZ2VuZXJhdGVSZWYiLCJyZXNwb25zZSIsImVycm9yIiwiY29uc29sZSIsImxvZyIsImlkIiwiZmV0Y2hPdXRwdXRXaXRoUmV0cnkiLCJkb2NSZWYiLCJhdHRlbXB0cyIsImRlbGF5Iiwic25hcHNob3QiLCJkYXRhIiwiRXJyb3IiLCJvdXRwdXQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJnZW5lcmF0ZVJvdW5kIiwibXVzdEluY2x1ZGVFeGVyY2lzZXMiLCJ1c2VyUHJvbXB0IiwicHJlZmVyZW5jZXMiLCJjcmVhdG9yRXhlcmNpc2VzIiwiYWxsQXZhaWxhYmxlRXhlcmNpc2VzIiwibXVzdEluY2x1ZGVMaXN0IiwiY3JlYXRvckV4ZXJjaXNlTGlzdCIsImFsbEV4ZXJjaXNlTGlzdCIsImpzb25TdHJpbmciLCJwYXJzZWRSZXNwb25zZSIsImpvaW4iLCJtYXAiLCJleCIsIm5hbWUiLCJyZXBsYWNlIiwidHJpbSIsIkpTT04iLCJwYXJzZSIsInN0YWNrcyIsIkFycmF5IiwiaXNBcnJheSIsInBhcnNlRXJyb3IiLCJwYXJzZUV4ZXJjaXNlcyIsImlucHV0IiwidHJpbW1lZElucHV0IiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/api/firebase/gemini/service.ts\n"));

/***/ })

});
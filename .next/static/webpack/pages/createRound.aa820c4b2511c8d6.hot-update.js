"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/createRound",{

/***/ "./src/api/firebase/gemini/service.ts":
/*!********************************************!*\
  !*** ./src/api/firebase/gemini/service.ts ***!
  \********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GeminiService: function() { return /* binding */ GeminiService; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @swc/helpers/_/_async_to_generator */ \"./node_modules/@swc/helpers/esm/_async_to_generator.js\");\n/* harmony import */ var _swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @swc/helpers/_/_class_call_check */ \"./node_modules/@swc/helpers/esm/_class_call_check.js\");\n/* harmony import */ var _swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @swc/helpers/_/_ts_generator */ \"./node_modules/@swc/helpers/esm/_ts_generator.js\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config */ \"./src/api/firebase/config.ts\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n// services/GeminiService.ts\n\n\n\n\n\nvar GeminiService = /*#__PURE__*/ function() {\n    \"use strict\";\n    function GeminiService() {\n        (0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_2__._)(this, GeminiService);\n    }\n    var _proto = GeminiService.prototype;\n    _proto.sendPrompt = function sendPrompt(prompt) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_3__._)(function() {\n            var generateRef, response, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_4__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_config__WEBPACK_IMPORTED_MODULE_0__.db, \"generate\"), {\n                                prompt: prompt\n                            })\n                        ];\n                    case 1:\n                        generateRef = _state.sent();\n                        console.log(\"Generated prompt document ID:\", generateRef.id);\n                        return [\n                            4,\n                            _this.fetchOutputWithRetry(generateRef, 30, 2000)\n                        ];\n                    case 2:\n                        response = _state.sent();\n                        return [\n                            2,\n                            response\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error sending prompt:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchOutputWithRetry = function fetchOutputWithRetry(docRef, attempts, delay) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_3__._)(function() {\n            var snapshot, data;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_4__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (attempts === 0) {\n                            throw new Error(\"Max retry attempts reached\");\n                        }\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDoc)(docRef)\n                        ];\n                    case 1:\n                        snapshot = _state.sent();\n                        data = snapshot.data();\n                        if (data === null || data === void 0 ? void 0 : data.output) {\n                            return [\n                                2,\n                                data.output\n                            ];\n                        }\n                        // Wait for the specified delay\n                        return [\n                            4,\n                            new Promise(function(resolve) {\n                                return setTimeout(resolve, delay);\n                            })\n                        ];\n                    case 2:\n                        _state.sent();\n                        // Retry\n                        return [\n                            2,\n                            _this.fetchOutputWithRetry(docRef, attempts - 1, delay)\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.generateRound = function generateRound(mustIncludeExercises, userPrompt, preferences, creatorExercises, allAvailableExercises) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_3__._)(function() {\n            var mustIncludeList, creatorExerciseList, allExerciseList, prompt, response, jsonString, parsedResponse, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_4__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        // Combine all available exercises\n                        mustIncludeList = mustIncludeExercises.join(\", \");\n                        creatorExerciseList = creatorExercises.map(function(ex) {\n                            return ex.name;\n                        }).join(\", \");\n                        allExerciseList = allAvailableExercises.map(function(ex) {\n                            return ex.name;\n                        }).join(\", \");\n                        prompt = \"\\n  You are a JSON-generating fitness AI. Your response must be PURE JSON - no markdown, no HTML, no explanations.\\n  \\n  Task: Create a fitness program with these requirements:\\n\\n  USER DESCRIPTION:\\n  \".concat(userPrompt, \"\\n\\n  EXERCISE SELECTION PRIORITIES:\\n  1. Must include these exercises: \").concat(mustIncludeList, \"\\n  2. Prefer these creator-specific exercises when possible: \").concat(creatorExerciseList, \"\\n  3. Can also include any of these exercises as needed: \").concat(allExerciseList, \"\\n\\n  PREFERENCES:\\n  \").concat(preferences.join(\"\\n\"), '\\n\\n  RESPONSE FORMAT REQUIREMENTS:\\n  1. Response must be valid JSON only\\n  2. No markdown backticks\\n  3. No HTML encoding\\n  4. No explanatory text\\n  5. Array values must use straight quotes only: [\"8\",\"10\"] not [\"8\",\"10\"]\\n  6. Numbers must be numeric: 45 not \"45\"\\n\\n  JSON STRUCTURE:\\n  {\\n    \"stacks\": [\\n      {\\n        \"title\": \"Upper Body Power\",\\n        \"description\": \"Focus on upper body strength\",\\n        \"exercises\": [\\n          {\\n            \"name\": \"Bench Press\",\\n            \"category\": {\\n              \"type\": \"weightTraining\",\\n              \"details\": {\\n                \"sets\": 3,\\n                \"reps\": [\"8\",\"10\"],\\n                \"weight\": 0,\\n                \"screenTime\": 45\\n              }\\n            }\\n          }\\n        ]\\n      }\\n    ]\\n  }\\n\\n  REMEMBER:\\n  - Use only exercises from the provided lists\\n  - 4-6 exercises per stack\\n  - Only return the JSON object, nothing else\\n  ');\n                        console.log(\"The prompt is\", prompt);\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            _this.sendPrompt(prompt)\n                        ];\n                    case 2:\n                        response = _state.sent();\n                        // Clean and sanitize the response\n                        jsonString = response.replace(/```json/g, \"\") // Remove JSON markdown\n                        .replace(/```/g, \"\") // Remove markdown backticks\n                        .replace(/[\\u201C\\u201D]/g, '\"') // Replace smart quotes\n                        .replace(/&quot;/g, '\"') // Replace HTML quotes\n                        .replace(/\\n/g, \"\") // Remove newlines\n                        .replace(/\\r/g, \"\") // Remove carriage returns\n                        .replace(/\\t/g, \"\") // Remove tabs\n                        .replace(/\\\\/g, \"\") // Remove backslashes\n                        .trim(); // Remove whitespace\n                        // Validate JSON structure before parsing\n                        if (!jsonString.startsWith(\"{\") || !jsonString.endsWith(\"}\")) {\n                            throw new Error(\"Invalid JSON structure\");\n                        }\n                        try {\n                            parsedResponse = JSON.parse(jsonString);\n                            // Validate the response structure\n                            if (!parsedResponse.stacks || !Array.isArray(parsedResponse.stacks)) {\n                                throw new Error(\"Invalid response structure - missing stacks array\");\n                            }\n                            // Additional validation of the response structure\n                            parsedResponse.stacks.forEach(function(stack, index) {\n                                if (!stack.title || !stack.description || !Array.isArray(stack.exercises)) {\n                                    throw new Error(\"Invalid stack structure at index \".concat(index));\n                                }\n                                stack.exercises.forEach(function(exercise, exIndex) {\n                                    var _exercise_category_details, _exercise_category;\n                                    if (!exercise.name || !((_exercise_category = exercise.category) === null || _exercise_category === void 0 ? void 0 : (_exercise_category_details = _exercise_category.details) === null || _exercise_category_details === void 0 ? void 0 : _exercise_category_details.reps)) {\n                                        throw new Error(\"Invalid exercise structure at stack \".concat(index, \", exercise \").concat(exIndex));\n                                    }\n                                });\n                            });\n                            return [\n                                2,\n                                parsedResponse\n                            ];\n                        } catch (parseError) {\n                            console.error(\"JSON Parse Error:\", parseError);\n                            console.error(\"Raw Response:\", response);\n                            console.error(\"Cleaned Response:\", jsonString);\n                            throw new Error(\"Failed to parse AI response\");\n                        }\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Generation Error:\", error);\n                        throw new Error(\"Failed to generate workout round\");\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.parseExercises = function parseExercises(input) {\n        // Remove any leading/trailing whitespace and parse the JSON array\n        var trimmedInput = input.trim();\n        try {\n            return JSON.parse(trimmedInput);\n        } catch (error) {\n            console.error(\"Error parsing exercises:\", error);\n            throw new Error(\"Failed to parse exercise response\");\n        }\n    };\n    GeminiService.getInstance = function getInstance() {\n        if (!GeminiService.instance) {\n            GeminiService.instance = new GeminiService();\n        }\n        return GeminiService.instance;\n    };\n    return GeminiService;\n}();\n/* harmony default export */ __webpack_exports__[\"default\"] = (GeminiService);\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL2ZpcmViYXNlL2dlbWluaS9zZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLDRCQUE0Qjs7OztBQUVHO0FBQ29EO0FBNEI1RSxrQ0FBSzs7YUFBQ0k7K0VBQUFBOztpQkFBQUE7SUFZWCxPQUFNQyxVQWdCTCxHQWhCRCxTQUFNQSxXQUFXQyxNQUFjOztlQUEvQjtnQkFHVUMsYUFPQUMsVUFFQ0M7Ozs7Ozs7Ozs7d0JBVGE7OzRCQUFNUCwwREFBTUEsQ0FBQ0QsOERBQVVBLENBQUNELHVDQUFFQSxFQUFFLGFBQWE7Z0NBQzNETSxRQUFRQTs0QkFDVjs7O3dCQUZNQyxjQUFjO3dCQUlwQkcsUUFBUUMsR0FBRyxDQUFDLGlDQUFpQ0osWUFBWUssRUFBRTt3QkFHMUM7OzRCQUFNLE1BQUtDLG9CQUFvQixDQUFDTixhQUFhLElBQUk7Ozt3QkFBNURDLFdBQVc7d0JBQ2pCOzs0QkFBT0E7Ozt3QkFDQUM7d0JBQ1BDLFFBQVFELEtBQUssQ0FBQyx5QkFBeUJBO3dCQUN2QyxNQUFNQTs7Ozs7OztRQUVWOztJQUVBLE9BQWNJLG9CQXFCYixHQXJCRCxTQUFjQSxxQkFDWkMsTUFBeUIsRUFDekJDLFFBQWdCLEVBQ2hCQyxLQUFhOztlQUhmO2dCQVNRQyxVQUNBQzs7Ozt3QkFMTixJQUFJSCxhQUFhLEdBQUc7NEJBQ2xCLE1BQU0sSUFBSUksTUFBTTt3QkFDbEI7d0JBRWlCOzs0QkFBTWhCLDBEQUFNQSxDQUFDVzs7O3dCQUF4QkcsV0FBVzt3QkFDWEMsT0FBT0QsU0FBU0MsSUFBSTt3QkFFMUIsSUFBSUEsaUJBQUFBLDJCQUFBQSxLQUFNRSxNQUFNLEVBQUU7NEJBQ2hCOztnQ0FBT0YsS0FBS0UsTUFBTTs7d0JBQ3BCO3dCQUVBLCtCQUErQjt3QkFDL0I7OzRCQUFNLElBQUlDLFFBQVFDLFNBQUFBO3VDQUFXQyxXQUFXRCxTQUFTTjs7Ozt3QkFBakQ7d0JBRUEsUUFBUTt3QkFDUjs7NEJBQU8sTUFBS0gsb0JBQW9CLENBQUNDLFFBQVFDLFdBQVcsR0FBR0M7Ozs7UUFDekQ7O0lBRUYsT0FBTVEsYUF1SEwsR0F2SEQsU0FBTUEsY0FDSkMsb0JBQThCLEVBQzlCQyxVQUFrQixFQUNsQkMsV0FBcUIsRUFDckJDLGdCQUE0QixFQUM1QkMscUJBQWlDOztlQUxuQztnQkFRUUMsaUJBQ0FDLHFCQUNBQyxpQkFFQTFCLFFBeURFRSxVQUdGeUIsWUFpQklDLGdCQTBCRHpCOzs7O3dCQTVHVCxrQ0FBa0M7d0JBQzVCcUIsa0JBQWtCTCxxQkFBcUJVLElBQUksQ0FBQzt3QkFDNUNKLHNCQUFzQkgsaUJBQWlCUSxHQUFHLENBQUNDLFNBQUFBO21DQUFNQSxHQUFHQyxJQUFJOzJCQUFFSCxJQUFJLENBQUM7d0JBQy9ESCxrQkFBa0JILHNCQUFzQk8sR0FBRyxDQUFDQyxTQUFBQTttQ0FBTUEsR0FBR0MsSUFBSTsyQkFBRUgsSUFBSSxDQUFDO3dCQUVoRTdCLFNBQVMsK01BU29Cd0IsT0FIakNKLFlBQVcsNkVBSStDSyxPQUR6QkQsaUJBQWdCLGtFQUVLRSxPQURJRCxxQkFBb0IsOERBSTlFSixPQUhzREssaUJBQWdCLDBCQUcvQyxPQUF2QkwsWUFBWVEsSUFBSSxDQUFDLE9BQU07d0JBd0N6QnpCLFFBQVFDLEdBQUcsQ0FBQyxpQkFBaUJMOzs7Ozs7Ozs7d0JBR1Y7OzRCQUFNLE1BQUtELFVBQVUsQ0FBQ0M7Ozt3QkFBakNFLFdBQVc7d0JBRWpCLGtDQUFrQzt3QkFDOUJ5QixhQUFhekIsU0FDZCtCLE9BQU8sQ0FBQyxZQUFZLElBQVEsdUJBQXVCO3lCQUNuREEsT0FBTyxDQUFDLFFBQVEsSUFBWSw0QkFBNEI7eUJBQ3hEQSxPQUFPLENBQUMsbUJBQW1CLEtBQUssdUJBQXVCO3lCQUN2REEsT0FBTyxDQUFDLFdBQVcsS0FBUyxzQkFBc0I7eUJBQ2xEQSxPQUFPLENBQUMsT0FBTyxJQUFhLGtCQUFrQjt5QkFDOUNBLE9BQU8sQ0FBQyxPQUFPLElBQWEsMEJBQTBCO3lCQUN0REEsT0FBTyxDQUFDLE9BQU8sSUFBYSxjQUFjO3lCQUMxQ0EsT0FBTyxDQUFDLE9BQU8sSUFBYSxxQkFBcUI7eUJBQ2pEQyxJQUFJLElBQXdCLG9CQUFvQjt3QkFFbkQseUNBQXlDO3dCQUN6QyxJQUFJLENBQUNQLFdBQVdRLFVBQVUsQ0FBQyxRQUFRLENBQUNSLFdBQVdTLFFBQVEsQ0FBQyxNQUFNOzRCQUM1RCxNQUFNLElBQUl2QixNQUFNO3dCQUNsQjt3QkFFQSxJQUFJOzRCQUNJZSxpQkFBaUJTLEtBQUtDLEtBQUssQ0FBQ1g7NEJBRWxDLGtDQUFrQzs0QkFDbEMsSUFBSSxDQUFDQyxlQUFlVyxNQUFNLElBQUksQ0FBQ0MsTUFBTUMsT0FBTyxDQUFDYixlQUFlVyxNQUFNLEdBQUc7Z0NBQ25FLE1BQU0sSUFBSTFCLE1BQU07NEJBQ2xCOzRCQUVBLGtEQUFrRDs0QkFDbERlLGVBQWVXLE1BQU0sQ0FBQ0csT0FBTyxDQUFDLFNBQUNDLE9BQVlDO2dDQUN6QyxJQUFJLENBQUNELE1BQU1FLEtBQUssSUFBSSxDQUFDRixNQUFNRyxXQUFXLElBQUksQ0FBQ04sTUFBTUMsT0FBTyxDQUFDRSxNQUFNSSxTQUFTLEdBQUc7b0NBQ3pFLE1BQU0sSUFBSWxDLE1BQU0sb0NBQTBDLE9BQU4rQjtnQ0FDdEQ7Z0NBQ0FELE1BQU1JLFNBQVMsQ0FBQ0wsT0FBTyxDQUFDLFNBQUNNLFVBQWVDO3dDQUNmRCw0QkFBQUE7b0NBQXZCLElBQUksQ0FBQ0EsU0FBU2hCLElBQUksSUFBSSxHQUFDZ0IscUJBQUFBLFNBQVNFLFFBQVEsY0FBakJGLDBDQUFBQSw2QkFBQUEsbUJBQW1CRyxPQUFPLGNBQTFCSCxpREFBQUEsMkJBQTRCSSxJQUFJLEdBQUU7d0NBQ3ZELE1BQU0sSUFBSXZDLE1BQU0sdUNBQTBEb0MsT0FBbkJMLE9BQU0sZUFBcUIsT0FBUks7b0NBQzVFO2dDQUNGOzRCQUNGOzRCQUVBOztnQ0FBT3JCOzt3QkFDVCxFQUFFLE9BQU95QixZQUFZOzRCQUNuQmpELFFBQVFELEtBQUssQ0FBQyxxQkFBcUJrRDs0QkFDbkNqRCxRQUFRRCxLQUFLLENBQUMsaUJBQWlCRDs0QkFDL0JFLFFBQVFELEtBQUssQ0FBQyxxQkFBcUJ3Qjs0QkFDbkMsTUFBTSxJQUFJZCxNQUFNO3dCQUNsQjs7Ozs7O3dCQUNPVjt3QkFDUEMsUUFBUUQsS0FBSyxDQUFDLHFCQUFxQkE7d0JBQ25DLE1BQU0sSUFBSVUsTUFBTTs7Ozs7OztRQUVwQjs7SUFFRSxPQUFReUMsY0FTUCxHQVRELFNBQVFBLGVBQWVDLEtBQWE7UUFDbEMsa0VBQWtFO1FBQ2xFLElBQU1DLGVBQWVELE1BQU1yQixJQUFJO1FBQy9CLElBQUk7WUFDRixPQUFPRyxLQUFLQyxLQUFLLENBQUNrQjtRQUNwQixFQUFFLE9BQU9yRCxPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyw0QkFBNEJBO1lBQzFDLE1BQU0sSUFBSVUsTUFBTTtRQUNsQjtJQUNGO0lBdkxXZixjQUtHMkQsV0FLYixHQUxELFNBQWNBO1FBQ1osSUFBSSxDQUFDM0QsY0FBYzRELFFBQVEsRUFBRTtZQU5wQjVELGNBT080RCxRQUFRLEdBQUcsSUFQbEI1RDtRQVFUO1FBQ0EsT0FBT0EsY0FBYzRELFFBQVE7SUFDL0I7V0FWVzVEO0lBd0xaO0FBRUQsK0RBQWVBLGFBQWFBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2FwaS9maXJlYmFzZS9nZW1pbmkvc2VydmljZS50cz82ZmI1Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNlcnZpY2VzL0dlbWluaVNlcnZpY2UudHNcbmltcG9ydCB7IEV4ZXJjaXNlIH0gZnJvbSAnLi4vZXhlcmNpc2UnO1xuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi9jb25maWcnO1xuaW1wb3J0IHsgY29sbGVjdGlvbiwgYWRkRG9jLCBnZXREb2MsIERvY3VtZW50UmVmZXJlbmNlIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcblxuLy8gYXBpL2ZpcmViYXNlL2dlbWluaS90eXBlcy50c1xuaW50ZXJmYWNlIEdlbmVyYXRlZEV4ZXJjaXNlIHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgc2V0czogbnVtYmVyO1xuICAgIHJlcHM6IHN0cmluZ1tdO1xuICAgIGNhdGVnb3J5OiB7XG4gICAgICB0eXBlOiAnd2VpZ2h0VHJhaW5pbmcnO1xuICAgICAgZGV0YWlsczoge1xuICAgICAgICBzZXRzOiBudW1iZXI7XG4gICAgICAgIHJlcHM6IHN0cmluZ1tdO1xuICAgICAgICB3ZWlnaHQ6IG51bWJlcjtcbiAgICAgICAgc2NyZWVuVGltZTogbnVtYmVyO1xuICAgICAgfTtcbiAgICB9O1xuICB9XG4gIFxuICBpbnRlcmZhY2UgR2VuZXJhdGVkU3RhY2sge1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBleGVyY2lzZXM6IEdlbmVyYXRlZEV4ZXJjaXNlW107XG4gIH1cbiAgXG4gIGludGVyZmFjZSBHZW5lcmF0ZWRSb3VuZFJlc3BvbnNlIHtcbiAgICBzdGFja3M6IEdlbmVyYXRlZFN0YWNrW107XG4gIH1cblxuZXhwb3J0IGNsYXNzIEdlbWluaVNlcnZpY2Uge1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogR2VtaW5pU2VydmljZTtcbiAgXG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogR2VtaW5pU2VydmljZSB7XG4gICAgaWYgKCFHZW1pbmlTZXJ2aWNlLmluc3RhbmNlKSB7XG4gICAgICBHZW1pbmlTZXJ2aWNlLmluc3RhbmNlID0gbmV3IEdlbWluaVNlcnZpY2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIEdlbWluaVNlcnZpY2UuaW5zdGFuY2U7XG4gIH1cblxuICBhc3luYyBzZW5kUHJvbXB0KHByb21wdDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQ3JlYXRlIGEgbmV3IGRvY3VtZW50IGluIHRoZSAnZ2VuZXJhdGUnIGNvbGxlY3Rpb25cbiAgICAgIGNvbnN0IGdlbmVyYXRlUmVmID0gYXdhaXQgYWRkRG9jKGNvbGxlY3Rpb24oZGIsICdnZW5lcmF0ZScpLCB7XG4gICAgICAgIHByb21wdDogcHJvbXB0XG4gICAgICB9KTtcbiAgXG4gICAgICBjb25zb2xlLmxvZygnR2VuZXJhdGVkIHByb21wdCBkb2N1bWVudCBJRDonLCBnZW5lcmF0ZVJlZi5pZCk7XG4gIFxuICAgICAgLy8gV2FpdCBmb3IgdGhlIHJlc3BvbnNlIHdpdGggcmV0cmllc1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmZldGNoT3V0cHV0V2l0aFJldHJ5KGdlbmVyYXRlUmVmLCAzMCwgMjAwMCk7XG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgcHJvbXB0OicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZmV0Y2hPdXRwdXRXaXRoUmV0cnkoXG4gICAgZG9jUmVmOiBEb2N1bWVudFJlZmVyZW5jZSxcbiAgICBhdHRlbXB0czogbnVtYmVyLFxuICAgIGRlbGF5OiBudW1iZXJcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBpZiAoYXR0ZW1wdHMgPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWF4IHJldHJ5IGF0dGVtcHRzIHJlYWNoZWQnKTtcbiAgICB9XG5cbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvYyhkb2NSZWYpO1xuICAgIGNvbnN0IGRhdGEgPSBzbmFwc2hvdC5kYXRhKCk7XG5cbiAgICBpZiAoZGF0YT8ub3V0cHV0KSB7XG4gICAgICByZXR1cm4gZGF0YS5vdXRwdXQ7XG4gICAgfVxuXG4gICAgLy8gV2FpdCBmb3IgdGhlIHNwZWNpZmllZCBkZWxheVxuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheSkpO1xuXG4gICAgLy8gUmV0cnlcbiAgICByZXR1cm4gdGhpcy5mZXRjaE91dHB1dFdpdGhSZXRyeShkb2NSZWYsIGF0dGVtcHRzIC0gMSwgZGVsYXkpO1xuICB9XG5cbmFzeW5jIGdlbmVyYXRlUm91bmQoXG4gIG11c3RJbmNsdWRlRXhlcmNpc2VzOiBzdHJpbmdbXSxcbiAgdXNlclByb21wdDogc3RyaW5nLFxuICBwcmVmZXJlbmNlczogc3RyaW5nW10sXG4gIGNyZWF0b3JFeGVyY2lzZXM6IEV4ZXJjaXNlW10sXG4gIGFsbEF2YWlsYWJsZUV4ZXJjaXNlczogRXhlcmNpc2VbXVxuKTogUHJvbWlzZTxHZW5lcmF0ZWRSb3VuZFJlc3BvbnNlPiB7XG4gIC8vIENvbWJpbmUgYWxsIGF2YWlsYWJsZSBleGVyY2lzZXNcbiAgY29uc3QgbXVzdEluY2x1ZGVMaXN0ID0gbXVzdEluY2x1ZGVFeGVyY2lzZXMuam9pbihcIiwgXCIpO1xuICBjb25zdCBjcmVhdG9yRXhlcmNpc2VMaXN0ID0gY3JlYXRvckV4ZXJjaXNlcy5tYXAoZXggPT4gZXgubmFtZSkuam9pbihcIiwgXCIpO1xuICBjb25zdCBhbGxFeGVyY2lzZUxpc3QgPSBhbGxBdmFpbGFibGVFeGVyY2lzZXMubWFwKGV4ID0+IGV4Lm5hbWUpLmpvaW4oXCIsIFwiKTtcbiAgXG4gIGNvbnN0IHByb21wdCA9IGBcbiAgWW91IGFyZSBhIEpTT04tZ2VuZXJhdGluZyBmaXRuZXNzIEFJLiBZb3VyIHJlc3BvbnNlIG11c3QgYmUgUFVSRSBKU09OIC0gbm8gbWFya2Rvd24sIG5vIEhUTUwsIG5vIGV4cGxhbmF0aW9ucy5cbiAgXG4gIFRhc2s6IENyZWF0ZSBhIGZpdG5lc3MgcHJvZ3JhbSB3aXRoIHRoZXNlIHJlcXVpcmVtZW50czpcblxuICBVU0VSIERFU0NSSVBUSU9OOlxuICAke3VzZXJQcm9tcHR9XG5cbiAgRVhFUkNJU0UgU0VMRUNUSU9OIFBSSU9SSVRJRVM6XG4gIDEuIE11c3QgaW5jbHVkZSB0aGVzZSBleGVyY2lzZXM6ICR7bXVzdEluY2x1ZGVMaXN0fVxuICAyLiBQcmVmZXIgdGhlc2UgY3JlYXRvci1zcGVjaWZpYyBleGVyY2lzZXMgd2hlbiBwb3NzaWJsZTogJHtjcmVhdG9yRXhlcmNpc2VMaXN0fVxuICAzLiBDYW4gYWxzbyBpbmNsdWRlIGFueSBvZiB0aGVzZSBleGVyY2lzZXMgYXMgbmVlZGVkOiAke2FsbEV4ZXJjaXNlTGlzdH1cblxuICBQUkVGRVJFTkNFUzpcbiAgJHtwcmVmZXJlbmNlcy5qb2luKFwiXFxuXCIpfVxuXG4gIFJFU1BPTlNFIEZPUk1BVCBSRVFVSVJFTUVOVFM6XG4gIDEuIFJlc3BvbnNlIG11c3QgYmUgdmFsaWQgSlNPTiBvbmx5XG4gIDIuIE5vIG1hcmtkb3duIGJhY2t0aWNrc1xuICAzLiBObyBIVE1MIGVuY29kaW5nXG4gIDQuIE5vIGV4cGxhbmF0b3J5IHRleHRcbiAgNS4gQXJyYXkgdmFsdWVzIG11c3QgdXNlIHN0cmFpZ2h0IHF1b3RlcyBvbmx5OiBbXCI4XCIsXCIxMFwiXSBub3QgW1wiOFwiLFwiMTBcIl1cbiAgNi4gTnVtYmVycyBtdXN0IGJlIG51bWVyaWM6IDQ1IG5vdCBcIjQ1XCJcblxuICBKU09OIFNUUlVDVFVSRTpcbiAge1xuICAgIFwic3RhY2tzXCI6IFtcbiAgICAgIHtcbiAgICAgICAgXCJ0aXRsZVwiOiBcIlVwcGVyIEJvZHkgUG93ZXJcIixcbiAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIkZvY3VzIG9uIHVwcGVyIGJvZHkgc3RyZW5ndGhcIixcbiAgICAgICAgXCJleGVyY2lzZXNcIjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIkJlbmNoIFByZXNzXCIsXG4gICAgICAgICAgICBcImNhdGVnb3J5XCI6IHtcbiAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwid2VpZ2h0VHJhaW5pbmdcIixcbiAgICAgICAgICAgICAgXCJkZXRhaWxzXCI6IHtcbiAgICAgICAgICAgICAgICBcInNldHNcIjogMyxcbiAgICAgICAgICAgICAgICBcInJlcHNcIjogW1wiOFwiLFwiMTBcIl0sXG4gICAgICAgICAgICAgICAgXCJ3ZWlnaHRcIjogMCxcbiAgICAgICAgICAgICAgICBcInNjcmVlblRpbWVcIjogNDVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfVxuICAgIF1cbiAgfVxuXG4gIFJFTUVNQkVSOlxuICAtIFVzZSBvbmx5IGV4ZXJjaXNlcyBmcm9tIHRoZSBwcm92aWRlZCBsaXN0c1xuICAtIDQtNiBleGVyY2lzZXMgcGVyIHN0YWNrXG4gIC0gT25seSByZXR1cm4gdGhlIEpTT04gb2JqZWN0LCBub3RoaW5nIGVsc2VcbiAgYDtcblxuICBjb25zb2xlLmxvZyhcIlRoZSBwcm9tcHQgaXNcIiwgcHJvbXB0KTtcbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRQcm9tcHQocHJvbXB0KTtcblxuICAgIC8vIENsZWFuIGFuZCBzYW5pdGl6ZSB0aGUgcmVzcG9uc2VcbiAgICBsZXQganNvblN0cmluZyA9IHJlc3BvbnNlXG4gICAgICAucmVwbGFjZSgvYGBganNvbi9nLCAnJykgICAgIC8vIFJlbW92ZSBKU09OIG1hcmtkb3duXG4gICAgICAucmVwbGFjZSgvYGBgL2csICcnKSAgICAgICAgIC8vIFJlbW92ZSBtYXJrZG93biBiYWNrdGlja3NcbiAgICAgIC5yZXBsYWNlKC9bXFx1MjAxQ1xcdTIwMURdL2csICdcIicpIC8vIFJlcGxhY2Ugc21hcnQgcXVvdGVzXG4gICAgICAucmVwbGFjZSgvJnF1b3Q7L2csICdcIicpICAgICAvLyBSZXBsYWNlIEhUTUwgcXVvdGVzXG4gICAgICAucmVwbGFjZSgvXFxuL2csICcnKSAgICAgICAgICAvLyBSZW1vdmUgbmV3bGluZXNcbiAgICAgIC5yZXBsYWNlKC9cXHIvZywgJycpICAgICAgICAgIC8vIFJlbW92ZSBjYXJyaWFnZSByZXR1cm5zXG4gICAgICAucmVwbGFjZSgvXFx0L2csICcnKSAgICAgICAgICAvLyBSZW1vdmUgdGFic1xuICAgICAgLnJlcGxhY2UoL1xcXFwvZywgJycpICAgICAgICAgIC8vIFJlbW92ZSBiYWNrc2xhc2hlc1xuICAgICAgLnRyaW0oKTsgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgd2hpdGVzcGFjZVxuXG4gICAgLy8gVmFsaWRhdGUgSlNPTiBzdHJ1Y3R1cmUgYmVmb3JlIHBhcnNpbmdcbiAgICBpZiAoIWpzb25TdHJpbmcuc3RhcnRzV2l0aCgneycpIHx8ICFqc29uU3RyaW5nLmVuZHNXaXRoKCd9JykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBKU09OIHN0cnVjdHVyZScpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJzZWRSZXNwb25zZSA9IEpTT04ucGFyc2UoanNvblN0cmluZyk7XG4gICAgICBcbiAgICAgIC8vIFZhbGlkYXRlIHRoZSByZXNwb25zZSBzdHJ1Y3R1cmVcbiAgICAgIGlmICghcGFyc2VkUmVzcG9uc2Uuc3RhY2tzIHx8ICFBcnJheS5pc0FycmF5KHBhcnNlZFJlc3BvbnNlLnN0YWNrcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHJlc3BvbnNlIHN0cnVjdHVyZSAtIG1pc3Npbmcgc3RhY2tzIGFycmF5Jyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZGl0aW9uYWwgdmFsaWRhdGlvbiBvZiB0aGUgcmVzcG9uc2Ugc3RydWN0dXJlXG4gICAgICBwYXJzZWRSZXNwb25zZS5zdGFja3MuZm9yRWFjaCgoc3RhY2s6IGFueSwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICBpZiAoIXN0YWNrLnRpdGxlIHx8ICFzdGFjay5kZXNjcmlwdGlvbiB8fCAhQXJyYXkuaXNBcnJheShzdGFjay5leGVyY2lzZXMpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHN0YWNrIHN0cnVjdHVyZSBhdCBpbmRleCAke2luZGV4fWApO1xuICAgICAgICB9XG4gICAgICAgIHN0YWNrLmV4ZXJjaXNlcy5mb3JFYWNoKChleGVyY2lzZTogYW55LCBleEluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICBpZiAoIWV4ZXJjaXNlLm5hbWUgfHwgIWV4ZXJjaXNlLmNhdGVnb3J5Py5kZXRhaWxzPy5yZXBzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZXhlcmNpc2Ugc3RydWN0dXJlIGF0IHN0YWNrICR7aW5kZXh9LCBleGVyY2lzZSAke2V4SW5kZXh9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gcGFyc2VkUmVzcG9uc2U7XG4gICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignSlNPTiBQYXJzZSBFcnJvcjonLCBwYXJzZUVycm9yKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1JhdyBSZXNwb25zZTonLCByZXNwb25zZSk7XG4gICAgICBjb25zb2xlLmVycm9yKCdDbGVhbmVkIFJlc3BvbnNlOicsIGpzb25TdHJpbmcpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gcGFyc2UgQUkgcmVzcG9uc2UnKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignR2VuZXJhdGlvbiBFcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZ2VuZXJhdGUgd29ya291dCByb3VuZCcpO1xuICB9XG59XG5cbiAgcHJpdmF0ZSBwYXJzZUV4ZXJjaXNlcyhpbnB1dDogc3RyaW5nKTogc3RyaW5nW11bXSB7XG4gICAgLy8gUmVtb3ZlIGFueSBsZWFkaW5nL3RyYWlsaW5nIHdoaXRlc3BhY2UgYW5kIHBhcnNlIHRoZSBKU09OIGFycmF5XG4gICAgY29uc3QgdHJpbW1lZElucHV0ID0gaW5wdXQudHJpbSgpO1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZSh0cmltbWVkSW5wdXQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIGV4ZXJjaXNlczonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBleGVyY2lzZSByZXNwb25zZScpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBHZW1pbmlTZXJ2aWNlOyJdLCJuYW1lcyI6WyJkYiIsImNvbGxlY3Rpb24iLCJhZGREb2MiLCJnZXREb2MiLCJHZW1pbmlTZXJ2aWNlIiwic2VuZFByb21wdCIsInByb21wdCIsImdlbmVyYXRlUmVmIiwicmVzcG9uc2UiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJpZCIsImZldGNoT3V0cHV0V2l0aFJldHJ5IiwiZG9jUmVmIiwiYXR0ZW1wdHMiLCJkZWxheSIsInNuYXBzaG90IiwiZGF0YSIsIkVycm9yIiwib3V0cHV0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiZ2VuZXJhdGVSb3VuZCIsIm11c3RJbmNsdWRlRXhlcmNpc2VzIiwidXNlclByb21wdCIsInByZWZlcmVuY2VzIiwiY3JlYXRvckV4ZXJjaXNlcyIsImFsbEF2YWlsYWJsZUV4ZXJjaXNlcyIsIm11c3RJbmNsdWRlTGlzdCIsImNyZWF0b3JFeGVyY2lzZUxpc3QiLCJhbGxFeGVyY2lzZUxpc3QiLCJqc29uU3RyaW5nIiwicGFyc2VkUmVzcG9uc2UiLCJqb2luIiwibWFwIiwiZXgiLCJuYW1lIiwicmVwbGFjZSIsInRyaW0iLCJzdGFydHNXaXRoIiwiZW5kc1dpdGgiLCJKU09OIiwicGFyc2UiLCJzdGFja3MiLCJBcnJheSIsImlzQXJyYXkiLCJmb3JFYWNoIiwic3RhY2siLCJpbmRleCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJleGVyY2lzZXMiLCJleGVyY2lzZSIsImV4SW5kZXgiLCJjYXRlZ29yeSIsImRldGFpbHMiLCJyZXBzIiwicGFyc2VFcnJvciIsInBhcnNlRXhlcmNpc2VzIiwiaW5wdXQiLCJ0cmltbWVkSW5wdXQiLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/api/firebase/gemini/service.ts\n"));

/***/ })

});
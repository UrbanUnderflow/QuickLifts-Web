"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/index",{

/***/ "./src/api/firebase/exercise/service.ts":
/*!**********************************************!*\
  !*** ./src/api/firebase/exercise/service.ts ***!
  \**********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   exerciseService: function() { return /* binding */ exerciseService; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @swc/helpers/_/_async_to_generator */ \"./node_modules/@swc/helpers/esm/_async_to_generator.js\");\n/* harmony import */ var _swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @swc/helpers/_/_class_call_check */ \"./node_modules/@swc/helpers/esm/_class_call_check.js\");\n/* harmony import */ var _swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @swc/helpers/_/_create_class */ \"./node_modules/@swc/helpers/esm/_create_class.js\");\n/* harmony import */ var _swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @swc/helpers/_/_object_spread */ \"./node_modules/@swc/helpers/esm/_object_spread.js\");\n/* harmony import */ var _swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @swc/helpers/_/_object_spread_props */ \"./node_modules/@swc/helpers/esm/_object_spread_props.js\");\n/* harmony import */ var _swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @swc/helpers/_/_ts_generator */ \"./node_modules/@swc/helpers/esm/_ts_generator.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/api/firebase/config.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../firebase/exercise/types */ \"./src/api/firebase/exercise/types.ts\");\n/* harmony import */ var _utils_formatDate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/formatDate */ \"./src/utils/formatDate.ts\");\n\n\n\n\n\n\n\n\n\n\n\nvar ExerciseService = /*#__PURE__*/ function() {\n    \"use strict\";\n    function ExerciseService() {\n        (0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_4__._)(this, ExerciseService);\n        this._allExercises = [];\n    }\n    var _proto = ExerciseService.prototype;\n    _proto.fetchExercises = function fetchExercises() {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_5__._)(function() {\n            var exerciseSnapshot, exercises, videoSnapshot, exerciseVideos, mappedExercises, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_6__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return _types__WEBPACK_IMPORTED_MODULE_2__.Exercise.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        // Map videos to their corresponding exercises by name\n                        mappedExercises = exercises.map(function(exercise) {\n                            var videosForExercise = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            }).map(function(video) {\n                                return _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo.fromFirebase(video);\n                            }); // Ensure proper ExerciseVideo instances\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_8__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({}, exercise), {\n                                videos: videosForExercise\n                            }));\n                        });\n                        // Filter out exercises without videos\n                        _this._allExercises = mappedExercises.filter(function(exercise) {\n                            return exercise.videos.length > 0;\n                        });\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching exercises:\", error);\n                        throw new Error(\"Failed to fetch exercises.\");\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchFeaturedExercisesWithVideos = function fetchFeaturedExercisesWithVideos() {\n        var limit = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 24;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_5__._)(function() {\n            var exerciseSnapshot, exercises, videoSnapshot, exerciseVideos, mappedExercises, shuffledExercises, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_6__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return _types__WEBPACK_IMPORTED_MODULE_2__.Exercise.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        // Map videos to exercises and filter for those with GIFs\n                        mappedExercises = exercises.map(function(exerciseData) {\n                            // Ensure that each video is properly instantiated as an `ExerciseVideo`\n                            var videosForExercise = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exerciseData.name.toLowerCase();\n                            }).map(function(video) {\n                                return _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo.fromFirebase(video);\n                            });\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise({\n                                id: exerciseData.id,\n                                name: exerciseData.name,\n                                description: exerciseData.description,\n                                category: exerciseData.category || {},\n                                primaryBodyParts: exerciseData.primaryBodyParts || [],\n                                secondaryBodyParts: exerciseData.secondaryBodyParts || [],\n                                tags: exerciseData.tags || [],\n                                videos: videosForExercise,\n                                steps: exerciseData.steps || [],\n                                visibility: exerciseData.visibility || \"live\",\n                                currentVideoPosition: exerciseData.currentVideoPosition || 0,\n                                sets: exerciseData.sets || 0,\n                                reps: exerciseData.reps || \"\",\n                                weight: exerciseData.weight || 0,\n                                author: _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseAuthor.fromFirebase(exerciseData.author || {}),\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_3__.convertFirestoreTimestamp)(exerciseData.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_3__.convertFirestoreTimestamp)(exerciseData.updatedAt)\n                            });\n                        });\n                        // Shuffle and limit results\n                        shuffledExercises = mappedExercises.sort(function() {\n                            return Math.random() - 0.5;\n                        }).slice(0, limit);\n                        return [\n                            2,\n                            shuffledExercises\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching featured exercises:\", error);\n                        return [\n                            2,\n                            []\n                        ];\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchPaginatedExercises = function fetchPaginatedExercises() {\n        var lastDoc = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : null, pageSize = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 15;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_5__._)(function() {\n            var exerciseQuery, exerciseSnapshot, videoSnapshot, exerciseVideos, exercises, mappedExercises, filteredExercises, lastVisible, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_6__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            ,\n                            4\n                        ]);\n                        // Query for exercises with pagination\n                        exerciseQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(pageSize));\n                        if (lastDoc) {\n                            exerciseQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(exerciseQuery, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.startAfter)(lastDoc));\n                        }\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(exerciseQuery)\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        if (exerciseSnapshot.empty) {\n                            return [\n                                2,\n                                {\n                                    exercises: [],\n                                    lastVisible: null\n                                }\n                            ];\n                        }\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return _types__WEBPACK_IMPORTED_MODULE_2__.Exercise.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        // Map videos to exercises and ensure correct instantiation\n                        mappedExercises = exercises.map(function(exerciseData) {\n                            var videosForExercise = exerciseVideos.filter(function(video) {\n                                return video.exerciseId === exerciseData.id;\n                            });\n                            return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_8__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({}, exerciseData), {\n                                videos: videosForExercise\n                            }));\n                        });\n                        // Filter exercises with videos\n                        filteredExercises = mappedExercises.filter(function(exercise) {\n                            return exercise.videos.length > 0;\n                        });\n                        // Update the last visible document for pagination\n                        lastVisible = exerciseSnapshot.docs.length > 0 ? exerciseSnapshot.docs[exerciseSnapshot.docs.length - 1] : null;\n                        return [\n                            2,\n                            {\n                                exercises: filteredExercises,\n                                lastVisible: lastVisible\n                            }\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching paginated exercises:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.generateExerciseLogID = function generateExerciseLogID(workoutId, userId) {\n        // Create a document reference in the logs subcollection of the workout,\n        // then return its generated ID.\n        return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\", workoutId, \"logs\")).id;\n    };\n    (0,_swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_9__._)(ExerciseService, [\n        {\n            key: \"allExercises\",\n            get: function get() {\n                return this._allExercises;\n            }\n        }\n    ]);\n    return ExerciseService;\n}();\nvar exerciseService = new ExerciseService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUEsQ0FBQyxzSUFDZjhCO2dDQUNITixRQUFRTDs7d0JBRVo7d0JBRUEsK0JBQStCO3dCQUN6QmtDLG9CQUFnQzFDLGdCQUFnQlMsTUFBTSxDQUFDLFNBQUNGO21DQUFhQSxTQUFTTSxNQUFNLENBQUNDLE1BQU0sR0FBRzs7d0JBRXBHLGtEQUFrRDt3QkFDNUM2QixjQUFjL0MsaUJBQWlCTSxJQUFJLENBQUNZLE1BQU0sR0FBRyxJQUFJbEIsaUJBQWlCTSxJQUFJLENBQUNOLGlCQUFpQk0sSUFBSSxDQUFDWSxNQUFNLEdBQUcsRUFBRSxHQUFHO3dCQUVqSDs7NEJBQU87Z0NBQUVqQixXQUFXNkM7Z0NBQW1CQyxhQUFBQTs0QkFBWTs7O3dCQUU1QzFDO3dCQUNQYyxRQUFRZCxLQUFLLENBQUMsdUNBQXVDQTt3QkFDckQsTUFBTUE7Ozs7Ozs7UUFFVjs7SUFFQTZDLE9BQUFBLHFCQU1DLEdBTkRBLFNBQUFBLHNCQUFzQkMsU0FBaUIsRUFBRUMsTUFBYztRQUNyRCx3RUFBd0U7UUFDeEUsZ0NBQWdDO1FBQ2hDLE9BQU83RCx1REFBR0EsQ0FDUk4sOERBQVVBLENBQUNPLHVDQUFFQSxFQUFFLFNBQVM0RCxRQUFRLHFCQUFxQkQsV0FBVyxTQUNoRTFDLEVBQUU7SUFDTjtpRUFwTEFaOztZQUdFd0QsS0FBQUE7aUJBQUo7Z0JBQ0UsT0FBTyxJQUFJLENBQUN2RCxhQUFhO1lBQzNCOzs7V0FMRUQ7O0FBdUxHLElBQU15RCxrQkFBa0IsSUFBSXpELGtCQUFrQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvYXBpL2ZpcmViYXNlL2V4ZXJjaXNlL3NlcnZpY2UudHM/YTgzMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIGNvbGxlY3Rpb24sXG4gICAgZ2V0RG9jcyxcbiAgICBxdWVyeSxcbiAgICBvcmRlckJ5LFxuICAgIGxpbWl0LFxuICAgIHN0YXJ0QWZ0ZXIsXG4gICAgRG9jdW1lbnRTbmFwc2hvdCxcbiAgICBkb2MsXG4gIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vY29uZmlnJztcbmltcG9ydCB7IEV4ZXJjaXNlIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBFeGVyY2lzZVZpZGVvLCBFeGVyY2lzZUF1dGhvciB9IGZyb20gJy4uLy4uL2ZpcmViYXNlL2V4ZXJjaXNlL3R5cGVzJztcbmltcG9ydCB7IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAgfSBmcm9tICcuLi8uLi8uLi91dGlscy9mb3JtYXREYXRlJztcblxuY2xhc3MgRXhlcmNpc2VTZXJ2aWNlIHtcbiAgICBwcml2YXRlIF9hbGxFeGVyY2lzZXM6IEV4ZXJjaXNlW10gPSBbXTtcbiAgXG4gICAgZ2V0IGFsbEV4ZXJjaXNlcygpOiBFeGVyY2lzZVtdIHtcbiAgICAgIHJldHVybiB0aGlzLl9hbGxFeGVyY2lzZXM7XG4gICAgfVxuICBcbiAgICBhc3luYyBmZXRjaEV4ZXJjaXNlcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEZldGNoIGFsbCBleGVyY2lzZXNcbiAgICAgICAgY29uc3QgZXhlcmNpc2VTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlcycpKTtcbiAgICAgICAgY29uc3QgZXhlcmNpc2VzOiBFeGVyY2lzZVtdID0gZXhlcmNpc2VTbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PiBFeGVyY2lzZS5mcm9tRmlyZWJhc2Uoe1xuICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgLi4uZG9jLmRhdGEoKSxcbiAgICAgICAgfSkpO1xuICAgIFxuICAgICAgICAvLyBGZXRjaCBhbGwgdmlkZW9zXG4gICAgICAgIGNvbnN0IHZpZGVvU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZVZpZGVvcycpKTtcbiAgICAgICAgY29uc3QgZXhlcmNpc2VWaWRlb3M6IEV4ZXJjaXNlVmlkZW9bXSA9IHZpZGVvU25hcHNob3QuZG9jcy5tYXAoKGRvYykgPT5cbiAgICAgICAgICBFeGVyY2lzZVZpZGVvLmZyb21GaXJlYmFzZSh7XG4gICAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgICAgLi4uZG9jLmRhdGEoKSxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIFxuICAgICAgICAvLyBNYXAgdmlkZW9zIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgZXhlcmNpc2VzIGJ5IG5hbWVcbiAgICAgICAgY29uc3QgbWFwcGVkRXhlcmNpc2VzID0gZXhlcmNpc2VzLm1hcCgoZXhlcmNpc2UpID0+IHtcbiAgICAgICAgICBjb25zdCB2aWRlb3NGb3JFeGVyY2lzZSA9IGV4ZXJjaXNlVmlkZW9zXG4gICAgICAgICAgICAuZmlsdGVyKCh2aWRlbykgPT4gdmlkZW8uZXhlcmNpc2UudG9Mb3dlckNhc2UoKSA9PT0gZXhlcmNpc2UubmFtZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgICAgLm1hcCgodmlkZW8pID0+IEV4ZXJjaXNlVmlkZW8uZnJvbUZpcmViYXNlKHZpZGVvKSk7IC8vIEVuc3VyZSBwcm9wZXIgRXhlcmNpc2VWaWRlbyBpbnN0YW5jZXNcbiAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIG5ldyBFeGVyY2lzZSh7XG4gICAgICAgICAgICAuLi5leGVyY2lzZSwgLy8gS2VlcCBleGlzdGluZyBwcm9wZXJ0aWVzXG4gICAgICAgICAgICB2aWRlb3M6IHZpZGVvc0ZvckV4ZXJjaXNlLCAvLyBFbnN1cmUgdmlkZW9zIGFyZSBpbnN0YW5jZXMgb2YgRXhlcmNpc2VWaWRlb1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgLy8gRmlsdGVyIG91dCBleGVyY2lzZXMgd2l0aG91dCB2aWRlb3NcbiAgICAgICAgdGhpcy5fYWxsRXhlcmNpc2VzID0gbWFwcGVkRXhlcmNpc2VzLmZpbHRlcigoZXhlcmNpc2U6IEV4ZXJjaXNlKSA9PiBleGVyY2lzZS52aWRlb3MubGVuZ3RoID4gMCk7XG4gICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBGZXRjaGVkICR7dGhpcy5fYWxsRXhlcmNpc2VzLmxlbmd0aH0gZXhlcmNpc2VzIHdpdGggdmlkZW9zLmApO1xuICAgICAgICBcbiAgICAgICAgLy8gRGV0YWlsZWQgbG9nZ2luZyBmb3IgZGVidWdnaW5nXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdTYW1wbGUgZXhlcmNpc2VzOicsIHRoaXMuX2FsbEV4ZXJjaXNlcy5zbGljZSgwLCA1KS5tYXAoZXggPT4gKHtcbiAgICAgICAgLy8gICBuYW1lOiBleC5uYW1lLFxuICAgICAgICAvLyAgIHZpZGVvQ291bnQ6IGV4LnZpZGVvcy5sZW5ndGgsXG4gICAgICAgIC8vICAgZmlyc3RWaWRlb1VybDogZXgudmlkZW9zWzBdPy52aWRlb1VSTFxuICAgICAgICAvLyB9KSkpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgZXhlcmNpc2VzOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggZXhlcmNpc2VzLicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGZldGNoRmVhdHVyZWRFeGVyY2lzZXNXaXRoVmlkZW9zKGxpbWl0OiBudW1iZXIgPSAyNCk6IFByb21pc2U8RXhlcmNpc2VbXT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gRmV0Y2ggYWxsIGV4ZXJjaXNlc1xuICAgICAgICBjb25zdCBleGVyY2lzZVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VzJykpO1xuICAgICAgICBjb25zdCBleGVyY2lzZXM6IEV4ZXJjaXNlW10gPSBleGVyY2lzZVNuYXBzaG90LmRvY3MubWFwKChkb2MpID0+IFxuICAgICAgICAgIEV4ZXJjaXNlLmZyb21GaXJlYmFzZSh7XG4gICAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgICAgLi4uZG9jLmRhdGEoKSxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIFxuICAgICAgICAvLyBGZXRjaCBhbGwgdmlkZW9zXG4gICAgICAgIGNvbnN0IHZpZGVvU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZVZpZGVvcycpKTtcbiAgICAgICAgY29uc3QgZXhlcmNpc2VWaWRlb3M6IEV4ZXJjaXNlVmlkZW9bXSA9IHZpZGVvU25hcHNob3QuZG9jcy5tYXAoKGRvYykgPT5cbiAgICAgICAgICBFeGVyY2lzZVZpZGVvLmZyb21GaXJlYmFzZSh7XG4gICAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgICAgLi4uZG9jLmRhdGEoKSxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIFxuICAgICAgICAvLyBNYXAgdmlkZW9zIHRvIGV4ZXJjaXNlcyBhbmQgZmlsdGVyIGZvciB0aG9zZSB3aXRoIEdJRnNcbiAgICAgICAgY29uc3QgbWFwcGVkRXhlcmNpc2VzID0gZXhlcmNpc2VzLm1hcCgoZXhlcmNpc2VEYXRhKSA9PiB7XG4gICAgICAgICAgLy8gRW5zdXJlIHRoYXQgZWFjaCB2aWRlbyBpcyBwcm9wZXJseSBpbnN0YW50aWF0ZWQgYXMgYW4gYEV4ZXJjaXNlVmlkZW9gXG4gICAgICAgICAgY29uc3QgdmlkZW9zRm9yRXhlcmNpc2UgPSAoZXhlcmNpc2VWaWRlb3NcbiAgICAgICAgICAgIC5maWx0ZXIoKHZpZGVvKSA9PiB2aWRlby5leGVyY2lzZS50b0xvd2VyQ2FzZSgpID09PSBleGVyY2lzZURhdGEubmFtZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgICAgLm1hcCgodmlkZW8pID0+IEV4ZXJjaXNlVmlkZW8uZnJvbUZpcmViYXNlKHZpZGVvKSkpIGFzIEV4ZXJjaXNlVmlkZW9bXTtcbiAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIG5ldyBFeGVyY2lzZSh7XG4gICAgICAgICAgICBpZDogZXhlcmNpc2VEYXRhLmlkLFxuICAgICAgICAgICAgbmFtZTogZXhlcmNpc2VEYXRhLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZXhlcmNpc2VEYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IGV4ZXJjaXNlRGF0YS5jYXRlZ29yeSB8fCB7fSwgLy8gRW5zdXJlIHByb3BlciBjYXRlZ29yeSBoYW5kbGluZ1xuICAgICAgICAgICAgcHJpbWFyeUJvZHlQYXJ0czogZXhlcmNpc2VEYXRhLnByaW1hcnlCb2R5UGFydHMgfHwgW10sXG4gICAgICAgICAgICBzZWNvbmRhcnlCb2R5UGFydHM6IGV4ZXJjaXNlRGF0YS5zZWNvbmRhcnlCb2R5UGFydHMgfHwgW10sXG4gICAgICAgICAgICB0YWdzOiBleGVyY2lzZURhdGEudGFncyB8fCBbXSxcbiAgICAgICAgICAgIHZpZGVvczogdmlkZW9zRm9yRXhlcmNpc2UsIC8vIEF0dGFjaCBwcm9wZXJseSBtYXBwZWQgdmlkZW9zXG4gICAgICAgICAgICBzdGVwczogZXhlcmNpc2VEYXRhLnN0ZXBzIHx8IFtdLFxuICAgICAgICAgICAgdmlzaWJpbGl0eTogZXhlcmNpc2VEYXRhLnZpc2liaWxpdHkgfHwgJ2xpdmUnLFxuICAgICAgICAgICAgY3VycmVudFZpZGVvUG9zaXRpb246IGV4ZXJjaXNlRGF0YS5jdXJyZW50VmlkZW9Qb3NpdGlvbiB8fCAwLFxuICAgICAgICAgICAgc2V0czogZXhlcmNpc2VEYXRhLnNldHMgfHwgMCxcbiAgICAgICAgICAgIHJlcHM6IGV4ZXJjaXNlRGF0YS5yZXBzIHx8ICcnLFxuICAgICAgICAgICAgd2VpZ2h0OiBleGVyY2lzZURhdGEud2VpZ2h0IHx8IDAsXG4gICAgICAgICAgICBhdXRob3I6IEV4ZXJjaXNlQXV0aG9yLmZyb21GaXJlYmFzZShleGVyY2lzZURhdGEuYXV0aG9yIHx8IHt9KSxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChleGVyY2lzZURhdGEuY3JlYXRlZEF0KSxcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChleGVyY2lzZURhdGEudXBkYXRlZEF0KSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgIFxuICAgICAgICAvLyBTaHVmZmxlIGFuZCBsaW1pdCByZXN1bHRzXG4gICAgICAgIGNvbnN0IHNodWZmbGVkRXhlcmNpc2VzID0gbWFwcGVkRXhlcmNpc2VzXG4gICAgICAgICAgLnNvcnQoKCkgPT4gTWF0aC5yYW5kb20oKSAtIDAuNSlcbiAgICAgICAgICAuc2xpY2UoMCwgbGltaXQpO1xuICAgIFxuICAgICAgICByZXR1cm4gc2h1ZmZsZWRFeGVyY2lzZXM7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBmZWF0dXJlZCBleGVyY2lzZXM6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZmV0Y2hQYWdpbmF0ZWRFeGVyY2lzZXMoXG4gICAgICAgIGxhc3REb2M6IERvY3VtZW50U25hcHNob3QgfCBudWxsID0gbnVsbCxcbiAgICAgICAgcGFnZVNpemU6IG51bWJlciA9IDE1XG4gICAgICApOiBQcm9taXNlPHsgZXhlcmNpc2VzOiBFeGVyY2lzZVtdOyBsYXN0VmlzaWJsZTogRG9jdW1lbnRTbmFwc2hvdCB8IG51bGwgfT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFF1ZXJ5IGZvciBleGVyY2lzZXMgd2l0aCBwYWdpbmF0aW9uXG4gICAgICAgICAgbGV0IGV4ZXJjaXNlUXVlcnkgPSBxdWVyeShcbiAgICAgICAgICAgIGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZXMnKSxcbiAgICAgICAgICAgIG9yZGVyQnkoJ2NyZWF0ZWRBdCcsICdkZXNjJyksXG4gICAgICAgICAgICBsaW1pdChwYWdlU2l6ZSlcbiAgICAgICAgICApO1xuICAgIFxuICAgICAgICAgIGlmIChsYXN0RG9jKSB7XG4gICAgICAgICAgICBleGVyY2lzZVF1ZXJ5ID0gcXVlcnkoZXhlcmNpc2VRdWVyeSwgc3RhcnRBZnRlcihsYXN0RG9jKSk7XG4gICAgICAgICAgfVxuICAgIFxuICAgICAgICAgIGNvbnN0IGV4ZXJjaXNlU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGV4ZXJjaXNlUXVlcnkpO1xuICAgIFxuICAgICAgICAgIGlmIChleGVyY2lzZVNuYXBzaG90LmVtcHR5KSB7XG4gICAgICAgICAgICByZXR1cm4geyBleGVyY2lzZXM6IFtdLCBsYXN0VmlzaWJsZTogbnVsbCB9O1xuICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAvLyBGZXRjaCBleGVyY2lzZSB2aWRlb3Mgc2VwYXJhdGVseVxuICAgICAgICAgIGNvbnN0IHZpZGVvU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZVZpZGVvcycpKTtcbiAgICAgICAgICBjb25zdCBleGVyY2lzZVZpZGVvczogRXhlcmNpc2VWaWRlb1tdID0gdmlkZW9TbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PlxuICAgICAgICAgICAgRXhlcmNpc2VWaWRlby5mcm9tRmlyZWJhc2Uoe1xuICAgICAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgICAgICAuLi5kb2MuZGF0YSgpLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGV4ZXJjaXNlczogRXhlcmNpc2VbXSA9IGV4ZXJjaXNlU25hcHNob3QuZG9jcy5tYXAoKGRvYykgPT5cbiAgICAgICAgICAgIEV4ZXJjaXNlLmZyb21GaXJlYmFzZSh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSlcbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIE1hcCB2aWRlb3MgdG8gZXhlcmNpc2VzIGFuZCBlbnN1cmUgY29ycmVjdCBpbnN0YW50aWF0aW9uXG4gICAgICAgICAgY29uc3QgbWFwcGVkRXhlcmNpc2VzOiBFeGVyY2lzZVtdID0gZXhlcmNpc2VzLm1hcCgoZXhlcmNpc2VEYXRhKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2aWRlb3NGb3JFeGVyY2lzZSA9IGV4ZXJjaXNlVmlkZW9zLmZpbHRlcigodmlkZW8pID0+IHZpZGVvLmV4ZXJjaXNlSWQgPT09IGV4ZXJjaXNlRGF0YS5pZCk7XG4gICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gbmV3IEV4ZXJjaXNlKHtcbiAgICAgICAgICAgICAgLi4uZXhlcmNpc2VEYXRhLCAvLyBDb3B5IGV4aXN0aW5nIHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgdmlkZW9zOiB2aWRlb3NGb3JFeGVyY2lzZSwgLy8gQXNzaWduIGZpbHRlcmVkIHZpZGVvc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRmlsdGVyIGV4ZXJjaXNlcyB3aXRoIHZpZGVvc1xuICAgICAgICAgIGNvbnN0IGZpbHRlcmVkRXhlcmNpc2VzOiBFeGVyY2lzZVtdID0gbWFwcGVkRXhlcmNpc2VzLmZpbHRlcigoZXhlcmNpc2UpID0+IGV4ZXJjaXNlLnZpZGVvcy5sZW5ndGggPiAwKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIGxhc3QgdmlzaWJsZSBkb2N1bWVudCBmb3IgcGFnaW5hdGlvblxuICAgICAgICAgIGNvbnN0IGxhc3RWaXNpYmxlID0gZXhlcmNpc2VTbmFwc2hvdC5kb2NzLmxlbmd0aCA+IDAgPyBleGVyY2lzZVNuYXBzaG90LmRvY3NbZXhlcmNpc2VTbmFwc2hvdC5kb2NzLmxlbmd0aCAtIDFdIDogbnVsbDtcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4geyBleGVyY2lzZXM6IGZpbHRlcmVkRXhlcmNpc2VzLCBsYXN0VmlzaWJsZSB9O1xuICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHBhZ2luYXRlZCBleGVyY2lzZXM6JywgZXJyb3IpO1xuICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGdlbmVyYXRlRXhlcmNpc2VMb2dJRCh3b3Jrb3V0SWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICAvLyBDcmVhdGUgYSBkb2N1bWVudCByZWZlcmVuY2UgaW4gdGhlIGxvZ3Mgc3ViY29sbGVjdGlvbiBvZiB0aGUgd29ya291dCxcbiAgICAgICAgLy8gdGhlbiByZXR1cm4gaXRzIGdlbmVyYXRlZCBJRC5cbiAgICAgICAgcmV0dXJuIGRvYyhcbiAgICAgICAgICBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCB1c2VySWQsICdNeUNyZWF0ZWRXb3Jrb3V0cycsIHdvcmtvdXRJZCwgJ2xvZ3MnKVxuICAgICAgICApLmlkO1xuICAgICAgfVxuICB9XG4gIFxuICBleHBvcnQgY29uc3QgZXhlcmNpc2VTZXJ2aWNlID0gbmV3IEV4ZXJjaXNlU2VydmljZSgpOyJdLCJuYW1lcyI6WyJjb2xsZWN0aW9uIiwiZ2V0RG9jcyIsInF1ZXJ5Iiwib3JkZXJCeSIsImxpbWl0Iiwic3RhcnRBZnRlciIsImRvYyIsImRiIiwiRXhlcmNpc2UiLCJFeGVyY2lzZVZpZGVvIiwiRXhlcmNpc2VBdXRob3IiLCJjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wIiwiRXhlcmNpc2VTZXJ2aWNlIiwiX2FsbEV4ZXJjaXNlcyIsImZldGNoRXhlcmNpc2VzIiwiZXhlcmNpc2VTbmFwc2hvdCIsImV4ZXJjaXNlcyIsInZpZGVvU25hcHNob3QiLCJleGVyY2lzZVZpZGVvcyIsIm1hcHBlZEV4ZXJjaXNlcyIsImVycm9yIiwiZG9jcyIsIm1hcCIsImZyb21GaXJlYmFzZSIsImlkIiwiZGF0YSIsImV4ZXJjaXNlIiwidmlkZW9zRm9yRXhlcmNpc2UiLCJmaWx0ZXIiLCJ2aWRlbyIsInRvTG93ZXJDYXNlIiwibmFtZSIsInZpZGVvcyIsImxlbmd0aCIsImNvbnNvbGUiLCJFcnJvciIsImZldGNoRmVhdHVyZWRFeGVyY2lzZXNXaXRoVmlkZW9zIiwic2h1ZmZsZWRFeGVyY2lzZXMiLCJleGVyY2lzZURhdGEiLCJkZXNjcmlwdGlvbiIsImNhdGVnb3J5IiwicHJpbWFyeUJvZHlQYXJ0cyIsInNlY29uZGFyeUJvZHlQYXJ0cyIsInRhZ3MiLCJzdGVwcyIsInZpc2liaWxpdHkiLCJjdXJyZW50VmlkZW9Qb3NpdGlvbiIsInNldHMiLCJyZXBzIiwid2VpZ2h0IiwiYXV0aG9yIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0Iiwic29ydCIsIk1hdGgiLCJyYW5kb20iLCJzbGljZSIsImZldGNoUGFnaW5hdGVkRXhlcmNpc2VzIiwibGFzdERvYyIsInBhZ2VTaXplIiwiZXhlcmNpc2VRdWVyeSIsImZpbHRlcmVkRXhlcmNpc2VzIiwibGFzdFZpc2libGUiLCJlbXB0eSIsImV4ZXJjaXNlSWQiLCJnZW5lcmF0ZUV4ZXJjaXNlTG9nSUQiLCJ3b3Jrb3V0SWQiLCJ1c2VySWQiLCJhbGxFeGVyY2lzZXMiLCJleGVyY2lzZVNlcnZpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/api/firebase/exercise/service.ts\n"));

/***/ })

});
"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/index",{

/***/ "./src/api/firebase/workout/service.ts":
/*!*********************************************!*\
  !*** ./src/api/firebase/workout/service.ts ***!
  \*********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   workoutService: function() { return /* binding */ workoutService; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @swc/helpers/_/_async_to_generator */ \"./node_modules/@swc/helpers/esm/_async_to_generator.js\");\n/* harmony import */ var _swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @swc/helpers/_/_class_call_check */ \"./node_modules/@swc/helpers/esm/_class_call_check.js\");\n/* harmony import */ var _swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @swc/helpers/_/_create_class */ \"./node_modules/@swc/helpers/esm/_create_class.js\");\n/* harmony import */ var _swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @swc/helpers/_/_object_spread */ \"./node_modules/@swc/helpers/esm/_object_spread.js\");\n/* harmony import */ var _swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @swc/helpers/_/_object_spread_props */ \"./node_modules/@swc/helpers/esm/_object_spread_props.js\");\n/* harmony import */ var _swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @swc/helpers/_/_sliced_to_array */ \"./node_modules/@swc/helpers/esm/_sliced_to_array.js\");\n/* harmony import */ var _swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @swc/helpers/_/_ts_generator */ \"./node_modules/@swc/helpers/esm/_ts_generator.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/api/firebase/config.ts\");\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../user */ \"./src/api/firebase/user/index.ts\");\n/* harmony import */ var _exercise_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../exercise/types */ \"./src/api/firebase/exercise/types.ts\");\n/* harmony import */ var _workout_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../api/firebase/workout/types */ \"./src/api/firebase/workout/types.ts\");\n/* harmony import */ var _barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! __barrel_optimize__?names=format!=!date-fns */ \"__barrel_optimize__?names=format!=!./node_modules/date-fns/index.js\");\n/* harmony import */ var _utils_timestamp__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/timestamp */ \"./src/utils/timestamp.ts\");\n/* harmony import */ var _utils_formatDate__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/formatDate */ \"./src/utils/formatDate.ts\");\n/* harmony import */ var _redux_store__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../redux/store */ \"./src/redux/store.ts\");\n/* harmony import */ var _redux_workoutSlice__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../redux/workoutSlice */ \"./src/redux/workoutSlice.ts\");\n// src/api/firebase/workout/service.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // Adjust the import path\n\n\n\n\nvar WorkoutService = /*#__PURE__*/ function() {\n    \"use strict\";\n    function WorkoutService() {\n        (0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_9__._)(this, WorkoutService);\n    }\n    var _proto = WorkoutService.prototype;\n    /**\n   * Fetch the user's current workout (either QueuedUp or InProgress).\n   */ _proto.fetchCurrentWorkout = function fetchCurrentWorkout(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var session;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        return [\n                            4,\n                            _this.fetchCurrentWorkoutSession(userId)\n                        ];\n                    case 1:\n                        session = _state.sent();\n                        return [\n                            2,\n                            session.workout\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getAllSweatlists = function getAllSweatlists(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var workoutsRef, exercisesWithVideos, workoutsSnapshot, workouts, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, workoutDoc, workoutData, workoutId, mappedExercises, workout, logsRef, logsSnapshot, err, error, firestoreError;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"User ID is required\");\n                        }\n                        // Reference to the user's workout collection\n                        workoutsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\");\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            12,\n                            ,\n                            13\n                        ]);\n                        return [\n                            4,\n                            _this.fetchAndMapExercisesWithVideos()\n                        ];\n                    case 2:\n                        exercisesWithVideos = _state.sent();\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(workoutsRef)\n                        ];\n                    case 3:\n                        workoutsSnapshot = _state.sent();\n                        workouts = [];\n                        _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;\n                        _state.label = 4;\n                    case 4:\n                        _state.trys.push([\n                            4,\n                            9,\n                            10,\n                            11\n                        ]);\n                        _iterator = workoutsSnapshot.docs[Symbol.iterator]();\n                        _state.label = 5;\n                    case 5:\n                        if (!!(_iteratorNormalCompletion = (_step = _iterator.next()).done)) return [\n                            3,\n                            8\n                        ];\n                        workoutDoc = _step.value;\n                        workoutData = workoutDoc.data();\n                        workoutId = workoutDoc.id;\n                        // Map the exercises in the workout to the full exercise objects with videos\n                        mappedExercises = (workoutData.exercises || []).map(function(exerciseRef) {\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name === exerciseRef.exercise.name;\n                            });\n                            console.log(\"This is the mapped exercise: \" + fullExercise);\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, exerciseRef), {\n                                exercise: fullExercise || exerciseRef\n                            });\n                        });\n                        // Parse workout data into the desired structure\n                        workout = new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Workout({\n                            id: workoutData.id || \"\",\n                            roundWorkoutId: workoutData.roundWorkoutId || \"\",\n                            collectionId: workoutData.collectionId,\n                            exercises: mappedExercises,\n                            challenge: workoutData.challenge,\n                            logs: [],\n                            title: workoutData.title || \"\",\n                            description: workoutData.description || \"\",\n                            duration: workoutData.duration || 0,\n                            workoutRating: workoutData.workoutRating,\n                            useAuthorContent: workoutData.useAuthorContent || false,\n                            isCompleted: workoutData.isCompleted || false,\n                            workoutStatus: workoutData.workoutStatus || \"notStarted\",\n                            startTime: workoutData.startTime ? new Date(workoutData.startTime) : undefined,\n                            order: workoutData.order,\n                            author: workoutData.author || userId,\n                            createdAt: workoutData.createdAt ? new Date(workoutData.createdAt) : new Date(),\n                            updatedAt: workoutData.updatedAt ? new Date(workoutData.updatedAt) : new Date(),\n                            zone: workoutData.zone || \"FULL_BODY\"\n                        });\n                        // Fetch and process logs\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\", workoutId, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 6:\n                        logsSnapshot = _state.sent();\n                        workout.logs = logsSnapshot.docs.map(function(logDoc) {\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, logDoc.data()), {\n                                id: logDoc.id\n                            });\n                        });\n                        workouts.push(workout);\n                        _state.label = 7;\n                    case 7:\n                        _iteratorNormalCompletion = true;\n                        return [\n                            3,\n                            5\n                        ];\n                    case 8:\n                        return [\n                            3,\n                            11\n                        ];\n                    case 9:\n                        err = _state.sent();\n                        _didIteratorError = true;\n                        _iteratorError = err;\n                        return [\n                            3,\n                            11\n                        ];\n                    case 10:\n                        try {\n                            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                                _iterator[\"return\"]();\n                            }\n                        } finally{\n                            if (_didIteratorError) {\n                                throw _iteratorError;\n                            }\n                        }\n                        return [\n                            7\n                        ];\n                    case 11:\n                        return [\n                            2,\n                            workouts\n                        ];\n                    case 12:\n                        error = _state.sent();\n                        firestoreError = error;\n                        console.error(\"Error fetching sweatlists:\", firestoreError.message);\n                        throw new Error(\"Failed to fetch sweatlists\");\n                    case 13:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getUserChallengesByChallengeId = function getUserChallengesByChallengeId(challengeId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var userChallengesRef, q, snapshot, userChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"challengeId\", \"==\", challengeId));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        userChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            return new _workout_types__WEBPACK_IMPORTED_MODULE_4__.UserChallenge(doc.id, data);\n                        });\n                        if (userChallenges.length > 0) {\n                            return [\n                                2,\n                                {\n                                    userChallenges: userChallenges\n                                }\n                            ];\n                        } else {\n                            return [\n                                2,\n                                {\n                                    userChallenges: [],\n                                    error: \"No user challenges found for this challenge.\"\n                                }\n                            ];\n                        }\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges by challengeId:\", error);\n                        return [\n                            2,\n                            {\n                                userChallenges: [],\n                                error: error instanceof Error ? error.message : \"Unknown error\"\n                            }\n                        ];\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetches workout summaries for a specific date.\n   * @param date - The date for which workout summaries are being fetched.\n   * @returns A promise resolving to an array of workout summaries.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ _proto.fetchWorkoutSummaries = function fetchWorkoutSummaries(date) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var currentUser, formattedDate, summariesRef, q, snapshot, error, firestoreError;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Format the date to match the format in Firestore ('MM-dd-yyyy')\n                        formattedDate = (0,_barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_14__.format)(date, \"MM-dd-yyyy\");\n                        // Reference to the user's workoutSummaries subcollection\n                        summariesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", currentUser.id, \"workoutSummaries\");\n                        // Create a query to filter documents by the specified date\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(summariesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"date\", \"==\", formattedDate));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // Map the documents to an array of WorkoutSummary objects\n                        return [\n                            2,\n                            snapshot.docs.map(function(doc) {\n                                return (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                    id: doc.id\n                                }, doc.data());\n                            })\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        firestoreError = error;\n                        console.error(\"Error fetching workout summaries:\", firestoreError.message);\n                        throw new Error(firestoreError.message);\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchAllWorkoutSummaries = function fetchAllWorkoutSummaries() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var currentUser, summariesRef, q, snapshot, error, firestoreError;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Reference to the user's workoutSummaries subcollection\n                        summariesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", currentUser.id, \"workoutSummary\");\n                        // Query to retrieve all workout summaries, sorted by `createdAt` in ascending order\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(summariesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"asc\")); // Adjust field name based on your schema\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // Map the documents to an array of WorkoutSummary objects\n                        return [\n                            2,\n                            snapshot.docs.map(function(doc) {\n                                return (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                    id: doc.id\n                                }, doc.data());\n                            })\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        firestoreError = error;\n                        console.error(\"Error fetching all workout summaries:\", firestoreError.message);\n                        throw new Error(firestoreError.message);\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n * Fetch user challenges by userId.\n * @param userId The ID of the user to fetch challenges for.\n * @returns A promise resolving to an array of user challenges.\n * @throws If the Firestore query fails.\n */ _proto.fetchUserChallengesByUserId = function fetchUserChallengesByUserId(userId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var userChallengesRef, q, snapshot, userChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", userId));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // console.log(`Total challenges fetched: ${snapshot.docs.length}`);\n                        userChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            // console.log(`Processing challenge with ID: ${doc.id}`, data);\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                id: doc.id\n                            }, data), {\n                                challenge: data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Challenge({\n                                    id: data.challenge.id,\n                                    title: data.challenge.title,\n                                    subtitle: data.challenge.subtitle,\n                                    participants: data.challenge.participants || [],\n                                    status: data.challenge.status,\n                                    startDate: data.challenge.startDate ? new Date(data.challenge.startDate) : new Date(),\n                                    endDate: data.challenge.endDate ? new Date(data.challenge.endDate) : new Date(),\n                                    createdAt: data.challenge.createdAt ? new Date(data.challenge.createdAt) : new Date(),\n                                    updatedAt: data.challenge.updatedAt ? new Date(data.challenge.updatedAt) : new Date(),\n                                    introVideos: (data.challenge.introVideos || []).map(function(v) {\n                                        return new _workout_types__WEBPACK_IMPORTED_MODULE_4__.IntroVideo({\n                                            id: v.id,\n                                            userId: v.userId,\n                                            videoUrl: v.videoUrl\n                                        });\n                                    })\n                                }) : undefined,\n                                createdAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_5__.convertTimestamp)(data.createdAt),\n                                updatedAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_5__.convertTimestamp)(data.updatedAt)\n                            });\n                        });\n                        // console.log('All challenges after processing:', JSON.stringify(userChallenges, null, 2));\n                        return [\n                            2,\n                            userChallenges\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges by userId:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchCollectionWithSweatLists = function fetchCollectionWithSweatLists(collectionId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var collection, sweatLists, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, sweatlistIdentifier, _ref, workout, error, err, error1;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            12,\n                            ,\n                            13\n                        ]);\n                        return [\n                            4,\n                            _this.getCollectionById(collectionId)\n                        ];\n                    case 1:\n                        collection = _state.sent();\n                        // Fetch sweat lists (workouts)\n                        sweatLists = [];\n                        _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;\n                        _state.label = 2;\n                    case 2:\n                        _state.trys.push([\n                            2,\n                            9,\n                            10,\n                            11\n                        ]);\n                        _iterator = (collection.sweatlistIds || [])[Symbol.iterator]();\n                        _state.label = 3;\n                    case 3:\n                        if (!!(_iteratorNormalCompletion = (_step = _iterator.next()).done)) return [\n                            3,\n                            8\n                        ];\n                        sweatlistIdentifier = _step.value;\n                        _state.label = 4;\n                    case 4:\n                        _state.trys.push([\n                            4,\n                            6,\n                            ,\n                            7\n                        ]);\n                        return [\n                            4,\n                            _this.fetchSavedWorkout(sweatlistIdentifier.sweatlistAuthorId, sweatlistIdentifier.id)\n                        ];\n                    case 5:\n                        _ref = _swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_15__._.apply(void 0, [\n                            _state.sent(),\n                            1\n                        ]), workout = _ref[0];\n                        if (workout) {\n                            sweatLists.push(workout);\n                        }\n                        return [\n                            3,\n                            7\n                        ];\n                    case 6:\n                        error = _state.sent();\n                        console.error(\"Error fetching workout \".concat(sweatlistIdentifier.id, \":\"), error);\n                        return [\n                            3,\n                            7\n                        ];\n                    case 7:\n                        _iteratorNormalCompletion = true;\n                        return [\n                            3,\n                            3\n                        ];\n                    case 8:\n                        return [\n                            3,\n                            11\n                        ];\n                    case 9:\n                        err = _state.sent();\n                        _didIteratorError = true;\n                        _iteratorError = err;\n                        return [\n                            3,\n                            11\n                        ];\n                    case 10:\n                        try {\n                            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                                _iterator[\"return\"]();\n                            }\n                        } finally{\n                            if (_didIteratorError) {\n                                throw _iteratorError;\n                            }\n                        }\n                        return [\n                            7\n                        ];\n                    case 11:\n                        return [\n                            2,\n                            {\n                                collection: collection,\n                                sweatLists: sweatLists\n                            }\n                        ];\n                    case 12:\n                        error1 = _state.sent();\n                        console.error(\"Error fetching collection with sweat lists:\", error1);\n                        throw error1;\n                    case 13:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchSavedWorkout = function fetchSavedWorkout(userId, workoutId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var workoutRef, workoutSnap, exercisesWithVideos, workoutData, mappedExercises, workout, logsRef, logsSnapshot, logs, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            4,\n                            ,\n                            5\n                        ]);\n                        // Fetch the workout document\n                        workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\", workoutId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(workoutRef)\n                        ];\n                    case 1:\n                        workoutSnap = _state.sent();\n                        if (!workoutSnap.exists()) {\n                            return [\n                                2,\n                                [\n                                    null,\n                                    null\n                                ]\n                            ];\n                        }\n                        return [\n                            4,\n                            _this.fetchAndMapExercisesWithVideos()\n                        ];\n                    case 2:\n                        exercisesWithVideos = _state.sent();\n                        workoutData = workoutSnap.data();\n                        // Map the exercises in the workout to the full exercise objects with videos\n                        mappedExercises = (workoutData.exercises || []).map(function(exerciseRef) {\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name === exerciseRef.exercise.name;\n                            });\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, exerciseRef), {\n                                exercise: fullExercise || exerciseRef.exercise\n                            });\n                        });\n                        workoutData.exercises = mappedExercises;\n                        workout = new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Workout({\n                            id: workoutData.id,\n                            roundWorkoutId: workoutData.roundWorkoutId,\n                            collectionId: workoutData.collectionId,\n                            exercises: workoutData.exercises,\n                            challenge: workoutData.challenge,\n                            logs: workoutData.logs,\n                            title: workoutData.title,\n                            description: workoutData.description,\n                            duration: workoutData.duration,\n                            workoutRating: workoutData.workoutRating,\n                            useAuthorContent: workoutData.useAuthorContent,\n                            isCompleted: workoutData.isCompleted,\n                            workoutStatus: workoutData.workoutStatus,\n                            startTime: workoutData.startTime,\n                            order: workoutData.order,\n                            author: workoutData.author,\n                            assignedDate: workoutData.assignedDate,\n                            createdAt: workoutData.createdAt,\n                            updatedAt: workoutData.updatedAt\n                        });\n                        // Fetch logs\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 3:\n                        logsSnapshot = _state.sent();\n                        logs = logsSnapshot.docs.map(function(logDoc) {\n                            var logData = logDoc.data();\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name === logData.exercise.name;\n                            });\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseLog({\n                                id: logDoc.id,\n                                workoutId: workoutId,\n                                userId: userId,\n                                exercise: fullExercise || logData.exercise,\n                                logs: logData.log || [],\n                                feedback: logData.feedback || \"\",\n                                note: logData.note || \"\",\n                                recommendedWeight: logData.recommendedWeight,\n                                isSplit: logData.isSplit || false,\n                                isBodyWeight: logData.isBodyWeight || false,\n                                logSubmitted: logData.logSubmitted || false,\n                                logIsEditing: logData.logIsEditing || false,\n                                isCompleted: logData.isCompleted || false,\n                                completedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(logData.completedAt),\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(logData.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(logData.updatedAt)\n                            });\n                        });\n                        workout.logs = logs;\n                        return [\n                            2,\n                            [\n                                workout,\n                                logs\n                            ]\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error fetching saved workout:\", error);\n                        return [\n                            2,\n                            [\n                                null,\n                                null\n                            ]\n                        ];\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n * Fetch user challenges by challengeId.\n * @param challengeId The ID of the challenge to fetch associated user challenges for.\n * @returns A promise resolving to an array of user challenges.\n * @throws If the Firestore query fails.\n */ _proto.fetchUserChallengesByChallengeId = function fetchUserChallengesByChallengeId(challengeId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var userChallengesRef, q, snapshot, userChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"challengeId\", \"==\", challengeId));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // console.log(`Total user challenges fetched: ${snapshot.docs.length}`);\n                        userChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            // console.log(`Processing user challenge with ID: ${doc.id}`, data);\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                id: doc.id\n                            }, data), {\n                                challenge: data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Challenge({\n                                    id: data.challenge.id,\n                                    title: data.challenge.title,\n                                    subtitle: data.challenge.subtitle,\n                                    participants: data.challenge.participants || [],\n                                    status: data.challenge.status,\n                                    startDate: data.challenge.startDate ? new Date(data.challenge.startDate) : new Date(),\n                                    endDate: data.challenge.endDate ? new Date(data.challenge.endDate) : new Date(),\n                                    createdAt: data.challenge.createdAt ? new Date(data.challenge.createdAt) : new Date(),\n                                    updatedAt: data.challenge.updatedAt ? new Date(data.challenge.updatedAt) : new Date(),\n                                    introVideos: (data.challenge.introVideos || []).map(function(v) {\n                                        return new _workout_types__WEBPACK_IMPORTED_MODULE_4__.IntroVideo({\n                                            id: v.id,\n                                            userId: v.userId,\n                                            videoUrl: v.videoUrl\n                                        });\n                                    })\n                                }) : undefined,\n                                createdAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_5__.convertTimestamp)(data.createdAt),\n                                updatedAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_5__.convertTimestamp)(data.updatedAt)\n                            });\n                        });\n                        // console.log('All user challenges after processing:', JSON.stringify(userChallenges, null, 2));\n                        return [\n                            2,\n                            userChallenges\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges by challengeId:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getCollectionById = function getCollectionById(id) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var docRef, docSnap, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        console.log(\"Fetching collection with id:\", id);\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\", id);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef)\n                        ];\n                    case 2:\n                        docSnap = _state.sent();\n                        if (docSnap.exists()) {\n                            return [\n                                2,\n                                new _workout_types__WEBPACK_IMPORTED_MODULE_4__.SweatlistCollection((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                    id: docSnap.id\n                                }, docSnap.data()))\n                            ];\n                        } else {\n                            throw new Error(\"Collection not found\");\n                        }\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error getting collection by ID:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetch user challenges by userId and filter for active challenges.\n   * @returns A promise resolving to an array of active challenges.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ _proto.fetchActiveChallenges = function fetchActiveChallenges() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var currentUser, userChallengesRef, q, snapshot, allChallenges, activeChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", currentUser.id));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // console.log(`Total challenges fetched: ${snapshot.docs.length}`);\n                        allChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            // console.log(`Processing challenge with ID: ${doc.id}`, data);\n                            // Use the Challenge constructor to parse the challenge data\n                            // console.log(\"date before format: \" + convertFirestoreTimestamp(data.challenge.startDate));\n                            var challenge = data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Challenge({\n                                id: data.challenge.id,\n                                title: data.challenge.title,\n                                subtitle: data.challenge.subtitle,\n                                participants: data.challenge.participants || [],\n                                status: data.challenge.status,\n                                startDate: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.challenge.startDate),\n                                endDate: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.challenge.endDate),\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.challenge.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.challenge.updatedAt),\n                                introVideos: (data.challenge.introVideos || []).map(function(v) {\n                                    return new _workout_types__WEBPACK_IMPORTED_MODULE_4__.IntroVideo({\n                                        id: v.id,\n                                        userId: v.userId,\n                                        videoUrl: v.videoUrl\n                                    });\n                                })\n                            }) : undefined;\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                id: doc.id\n                            }, data), {\n                                challenge: challenge,\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.updatedAt)\n                            });\n                        });\n                        // console.log('All challenges after processing:', JSON.stringify(allChallenges, null, 2));\n                        // Filter for active challenges (endDate > current date)\n                        activeChallenges = allChallenges.filter(function(userChallenge) {\n                            var _userChallenge_challenge;\n                            var endDate = (_userChallenge_challenge = userChallenge.challenge) === null || _userChallenge_challenge === void 0 ? void 0 : _userChallenge_challenge.endDate;\n                            // console.log(\n                            //   `Evaluating challenge ID: ${userChallenge.id}, End Date: ${endDate}, Current Date: ${new Date()}`\n                            // );\n                            return endDate && endDate > new Date();\n                        });\n                        // console.log(`Total active challenges: ${activeChallenges.length}`, activeChallenges);\n                        return [\n                            2,\n                            activeChallenges\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching active challenges:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetch user challenges by userId.\n   * @returns A promise resolving to an array of challenges.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ _proto.fetchUserChallenges = function fetchUserChallenges() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var currentUser, userChallengesRef, q, snapshot, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Reference to the user-challenge collection\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        // Query challenges where userId matches the current user's ID\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", currentUser.id));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // Map documents to an array of Challenge objects\n                        return [\n                            2,\n                            snapshot.docs.map(function(doc) {\n                                return (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                    id: doc.id\n                                }, doc.data());\n                            })\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges:\", error);\n                        throw new Error(\"Failed to fetch user challenges\");\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    //update the workout summary,\n    _proto.updateWorkoutSummary = function updateWorkoutSummary(param) {\n        var userId = param.userId, workoutId = param.workoutId, summary = param.summary;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var summaryRef, summaryData, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"No user ID provided\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        // Create a reference to the collection\n                        summaryRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSummary\", summary.id);\n                        // Convert summary to a plain object for Firestore\n                        summaryData = {\n                            id: summary.id,\n                            workoutId: summary.workoutId,\n                            exercises: summary.exercises,\n                            bodyParts: summary.bodyParts,\n                            secondaryBodyParts: summary.secondaryBodyParts,\n                            workoutTitle: summary.workoutTitle,\n                            caloriesBurned: summary.caloriesBurned,\n                            workoutRating: summary.workoutRating,\n                            exercisesCompleted: summary.exercisesCompleted,\n                            aiInsight: summary.aiInsight,\n                            recommendations: summary.recommendations,\n                            gifURLs: summary.gifURLs,\n                            recommendedWork: summary.recommendedWork,\n                            isCompleted: summary.isCompleted,\n                            createdAt: summary.createdAt,\n                            updatedAt: new Date(),\n                            completedAt: summary.completedAt,\n                            duration: summary.duration\n                        };\n                        // Set data with merge enabled (equivalent to Swift's setData with merge: true)\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(summaryRef, summaryData, {\n                                merge: true\n                            })\n                        ];\n                    case 2:\n                        _state.sent();\n                        console.log(\"Workout summary document updated successfully\");\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error updating workout summary:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.updateWorkoutLogs = function updateWorkoutLogs(param) {\n        var userId = param.userId, workoutId = param.workoutId, logs = param.logs;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var workoutRef, logsRef, batch, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", workoutId);\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\");\n                        batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n                        logs.forEach(function(log) {\n                            var logDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(logsRef, log.id);\n                            batch.update(logDocRef, (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, log.toDictionary()));\n                        });\n                        return [\n                            4,\n                            batch.commit()\n                        ];\n                    case 1:\n                        _state.sent();\n                        return [\n                            3,\n                            3\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error updating workout logs:\", error);\n                        throw error;\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // The cancelWorkout method  it deletes the workout session and summary (if any),\n    // cleans up the local state, and logs the cancellation.\n    _proto.cancelWorkout = function cancelWorkout(workout, workoutSummary) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            4,\n                            ,\n                            5\n                        ]);\n                        return [\n                            4,\n                            _this.deleteWorkoutSession(workout.id)\n                        ];\n                    case 1:\n                        _state.sent();\n                        if (!workoutSummary) return [\n                            3,\n                            3\n                        ];\n                        return [\n                            4,\n                            _this.deleteWorkoutSummary(workoutSummary.id)\n                        ];\n                    case 2:\n                        _state.sent();\n                        _state.label = 3;\n                    case 3:\n                        _this.cleanUpWorkoutInProgress();\n                        console.log(\"Workout canceled and cleaned up successfully.\");\n                        return [\n                            3,\n                            5\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error canceling workout:\", error);\n                        throw error;\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // Deletes a workout session document and all its subcollection \"logs\"\n    _proto.deleteWorkoutSession = function deleteWorkoutSession(workoutId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var _userService_currentUser, userId, workoutRef, logsRef, logsSnapshot, batch, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!((_userService_currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser === void 0 ? void 0 : _userService_currentUser.id)) {\n                            throw new Error(\"User not authenticated.\");\n                        }\n                        userId = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser.id;\n                        workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", workoutId);\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            4,\n                            ,\n                            5\n                        ]);\n                        // Delete all logs in the subcollection\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 2:\n                        logsSnapshot = _state.sent();\n                        batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n                        logsSnapshot.docs.forEach(function(logDoc) {\n                            batch[\"delete\"](logDoc.ref);\n                        });\n                        // Delete the main workout document\n                        batch[\"delete\"](workoutRef);\n                        return [\n                            4,\n                            batch.commit()\n                        ];\n                    case 3:\n                        _state.sent();\n                        console.log(\"Workout session and logs deleted successfully.\");\n                        return [\n                            3,\n                            5\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error deleting workout session:\", error);\n                        throw error;\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // Deletes the workout summary document.\n    _proto.deleteWorkoutSummary = function deleteWorkoutSummary(workoutSummaryId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var _userService_currentUser, summaryRef, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!workoutSummaryId || !((_userService_currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser === void 0 ? void 0 : _userService_currentUser.id)) {\n                            return [\n                                2\n                            ];\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        summaryRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser.id, \"workoutSummary\", workoutSummaryId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.deleteDoc)(summaryRef)\n                        ];\n                    case 2:\n                        _state.sent();\n                        console.log(\"Workout summary deleted successfully.\");\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error deleting workout summary:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // Clean up local storage and in-memory workout state.\n    _proto.cleanUpWorkoutInProgress = function cleanUpWorkoutInProgress() {\n        _redux_store__WEBPACK_IMPORTED_MODULE_7__.store.dispatch((0,_redux_workoutSlice__WEBPACK_IMPORTED_MODULE_8__.resetWorkoutState)());\n    };\n    /**\n   * Fetch the workout session from Firestore, returning { workout, logs }.\n   * Checks first for a QueuedUp session, then for InProgress.\n   */ _proto.fetchCurrentWorkoutSession = function fetchCurrentWorkoutSession(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var exerciseSnapshot, videoSnapshot, exerciseVideos, exercisesWithVideos, workoutSessionsRef, q, snap;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) throw new Error(\"No user ID provided\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseVideo.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        exercisesWithVideos = exerciseSnapshot.docs.map(function(doc) {\n                            var exercise = _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                id: doc.id\n                            }, doc.data()));\n                            var matchingVideos = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            });\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, exercise), {\n                                videos: matchingVideos\n                            }));\n                        });\n                        workoutSessionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(workoutSessionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", _workout_types__WEBPACK_IMPORTED_MODULE_4__.WorkoutStatus.QueuedUp));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 3:\n                        snap = _state.sent();\n                        if (!snap.empty) {\n                            return [\n                                2,\n                                _this.processWorkoutSessionDocument(snap.docs[0], exercisesWithVideos)\n                            ];\n                        }\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(workoutSessionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", _workout_types__WEBPACK_IMPORTED_MODULE_4__.WorkoutStatus.InProgress));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 4:\n                        snap = _state.sent();\n                        if (!snap.empty) {\n                            return [\n                                2,\n                                _this.processWorkoutSessionDocument(snap.docs[0], exercisesWithVideos)\n                            ];\n                        }\n                        return [\n                            2,\n                            {\n                                workout: null,\n                                logs: null\n                            }\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchAndMapExercisesWithVideos = function fetchAndMapExercisesWithVideos() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var exerciseSnapshot, exercises, videoSnapshot, exerciseVideos, exercisesWithVideos, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseVideo.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        // console.log(`Fetched ${exerciseVideos.length} exercise videos`);\n                        // 3. Map videos to exercises\n                        exercisesWithVideos = exercises.map(function(exercise) {\n                            var matchingVideos = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            });\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, exercise), {\n                                videos: matchingVideos\n                            }));\n                        });\n                        // console.log('Finished mapping exercises with videos');\n                        // console.log(`Total exercises with videos: ${exercisesWithVideos.length}`);\n                        return [\n                            2,\n                            exercisesWithVideos\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching and mapping exercises with videos:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Helper to build the Workout object + any logs from the snapshot.\n   */ _proto.fetchAllWorkoutSessions = function fetchAllWorkoutSessions(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var exerciseSnapshot, exercises, videoSnapshot, exerciseVideos, exercisesWithVideos, workoutSessionsRef, snap, sessions, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"No user ID provided\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            6,\n                            ,\n                            7\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 2:\n                        exerciseSnapshot = _state.sent();\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 3:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseVideo.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        exercisesWithVideos = exercises.map(function(exercise) {\n                            var matchingVideos = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            });\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, exercise), {\n                                videos: matchingVideos\n                            }));\n                        });\n                        workoutSessionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(workoutSessionsRef)\n                        ];\n                    case 4:\n                        snap = _state.sent();\n                        if (snap.empty) {\n                            console.log(\"No workout sessions found for user\");\n                            return [\n                                2,\n                                []\n                            ];\n                        }\n                        return [\n                            4,\n                            Promise.all(snap.docs.map(function() {\n                                var _ref = (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function(doc) {\n                                    var sessionData;\n                                    return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                                        switch(_state.label){\n                                            case 0:\n                                                return [\n                                                    4,\n                                                    _this.processWorkoutSessionDocument(doc, exercisesWithVideos)\n                                                ];\n                                            case 1:\n                                                sessionData = _state.sent();\n                                                if (sessionData.logs) {\n                                                    sessionData.logs.sort(function(a, b) {\n                                                        var _a_order;\n                                                        var orderA = (_a_order = a.order) !== null && _a_order !== void 0 ? _a_order : 0;\n                                                        var _b_order;\n                                                        var orderB = (_b_order = b.order) !== null && _b_order !== void 0 ? _b_order : 0;\n                                                        return orderA - orderB;\n                                                    });\n                                                }\n                                                return [\n                                                    2,\n                                                    sessionData\n                                                ];\n                                        }\n                                    });\n                                });\n                                return function(doc) {\n                                    return _ref.apply(this, arguments);\n                                };\n                            }()))\n                        ];\n                    case 5:\n                        sessions = _state.sent();\n                        return [\n                            2,\n                            sessions\n                        ];\n                    case 6:\n                        error = _state.sent();\n                        console.error(\"Error fetching workout sessions:\", error);\n                        throw error;\n                    case 7:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.updateCollection = function updateCollection(collection) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var collRef, newDocRef, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        collRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\");\n                        // If collection.id is empty, generate a new doc ID and assign it.\n                        if (!collection.id || collection.id.trim() === \"\") {\n                            newDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(collRef);\n                            collection.id = newDocRef.id;\n                        }\n                        // Ensure the challenge id matches the collection id.\n                        if (collection.challenge) {\n                            collection.challenge.id = collection.id;\n                        }\n                        // Update the updatedAt field.\n                        collection.updatedAt = new Date();\n                        // Save the collection to Firestore.\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(collRef, collection.id), collection.toDictionary())\n                        ];\n                    case 1:\n                        _state.sent();\n                        console.log(\"Collection updated successfully\");\n                        return [\n                            2,\n                            collection\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error updating collection document:\", error);\n                        throw new Error(\"Error while updating the collection\");\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.processWorkoutSessionDocument = function processWorkoutSessionDocument(workoutDoc, exercisesWithVideos) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var data, mappedExercises, workout, logsRef, logsSnapshot, logs;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        data = workoutDoc.data();\n                        // Map exercises with their full data and videos\n                        mappedExercises = (data.exercises || []).map(function(exerciseRef) {\n                            var _exerciseRef_exercise_name, _exerciseRef_exercise;\n                            // Find the full exercise with videos\n                            var exerciseNameLower = (_exerciseRef_exercise = exerciseRef.exercise) === null || _exerciseRef_exercise === void 0 ? void 0 : (_exerciseRef_exercise_name = _exerciseRef_exercise.name) === null || _exerciseRef_exercise_name === void 0 ? void 0 : _exerciseRef_exercise_name.toLowerCase().trim();\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name.toLowerCase().trim() === exerciseNameLower;\n                            });\n                            // If full exercise found, return it, otherwise use the original\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, exerciseRef), {\n                                exercise: fullExercise || exerciseRef.exercise\n                            });\n                        });\n                        // Create the workout with mapped exercises\n                        workout = new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Workout({\n                            id: workoutDoc.id,\n                            roundWorkoutId: data.roundWorkoutId || \"\",\n                            exercises: mappedExercises,\n                            title: data.title || \"\",\n                            description: data.description || \"\",\n                            duration: data.duration || 0,\n                            useAuthorContent: data.useAuthorContent || false,\n                            isCompleted: data.isCompleted || false,\n                            workoutStatus: data.workoutStatus || _workout_types__WEBPACK_IMPORTED_MODULE_4__.WorkoutStatus.Archived,\n                            author: data.author || \"\",\n                            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.createdAt),\n                            updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.updatedAt),\n                            startTime: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.startTime),\n                            collectionId: data.collectionId,\n                            challenge: data.challenge,\n                            logs: (data.logs || []).map(function(logData) {\n                                var _logData_exercise_name, _logData_exercise;\n                                // Map logs with full exercises\n                                var exerciseNameLower = (_logData_exercise = logData.exercise) === null || _logData_exercise === void 0 ? void 0 : (_logData_exercise_name = _logData_exercise.name) === null || _logData_exercise_name === void 0 ? void 0 : _logData_exercise_name.toLowerCase().trim();\n                                var fullExercise = exercisesWithVideos.find(function(ex) {\n                                    return ex.name.toLowerCase().trim() === exerciseNameLower;\n                                });\n                                return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, logData), {\n                                    exercise: fullExercise || logData.exercise\n                                });\n                            }),\n                            workoutRating: data.workoutRating,\n                            order: data.order,\n                            zone: data.zone || _workout_types__WEBPACK_IMPORTED_MODULE_4__.BodyZone.FullBody\n                        });\n                        console.log(\"The Workout ID is: \" + workout.id);\n                        // Fetch logs from subcollection\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutDoc.ref, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 1:\n                        logsSnapshot = _state.sent();\n                        logs = logsSnapshot.docs.map(function(logDoc) {\n                            var _logData_exercise_name, _logData_exercise;\n                            var logData = logDoc.data();\n                            // Find the full exercise with videos\n                            var exerciseNameLower = (_logData_exercise = logData.exercise) === null || _logData_exercise === void 0 ? void 0 : (_logData_exercise_name = _logData_exercise.name) === null || _logData_exercise_name === void 0 ? void 0 : _logData_exercise_name.toLowerCase().trim();\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name.toLowerCase().trim() === exerciseNameLower;\n                            });\n                            // Prepare log data with full exercise\n                            var preparedLogData = (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, logData), {\n                                id: logDoc.id,\n                                workoutId: workout.id,\n                                exercise: fullExercise || logData.exercise,\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(logData.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(logData.updatedAt)\n                            });\n                            // Use the ExerciseLog constructor to ensure proper mapping\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseLog(preparedLogData);\n                        });\n                        return [\n                            2,\n                            {\n                                workout: workout,\n                                logs: logs\n                            }\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.saveWorkoutSession = function saveWorkoutSession(param) {\n        var userId = param.userId, workout = param.workout, logs = param.logs;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var currentDate, cleanWorkout, workoutSessionRef, logsRef, logBatch, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) throw new Error(\"No user ID provided\");\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            4,\n                            ,\n                            5\n                        ]);\n                        currentDate = new Date();\n                        cleanWorkout = new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Workout((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_12__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_13__._)({}, workout), {\n                            roundWorkoutId: \"\".concat(workout.id, \"-\").concat(currentDate.getTime()),\n                            workoutStatus: _workout_types__WEBPACK_IMPORTED_MODULE_4__.WorkoutStatus.QueuedUp,\n                            createdAt: currentDate,\n                            updatedAt: currentDate,\n                            startTime: currentDate,\n                            logs: []\n                        }));\n                        workoutSessionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\"));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(workoutSessionRef, cleanWorkout)\n                        ];\n                    case 2:\n                        _state.sent();\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutSessionRef, \"logs\");\n                        logBatch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n                        logs.forEach(function(log, index) {\n                            var logDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(logsRef, \"\".concat(log.id, \"-\").concat(currentDate.getTime()));\n                            logBatch.set(logDocRef, {\n                                id: logDocRef.id,\n                                workoutId: workoutSessionRef.id,\n                                exercise: {\n                                    id: log.exercise.id,\n                                    name: log.exercise.name,\n                                    category: log.exercise.category,\n                                    videos: log.exercise.videos || []\n                                },\n                                order: index,\n                                createdAt: currentDate,\n                                updatedAt: currentDate,\n                                logSubmitted: false,\n                                isCompleted: false\n                            });\n                        });\n                        return [\n                            4,\n                            logBatch.commit()\n                        ];\n                    case 3:\n                        _state.sent();\n                        return [\n                            2,\n                            cleanWorkout\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error saving workout session:\", error);\n                        throw error;\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Example \"join challenge\" method using the client SDK (no admin privileges).\n   * This creates a doc in `user-challenge` with the userId, challengeId, etc.\n   */ _proto.joinChallenge = function joinChallenge(param) {\n        var username = param.username, challengeId = param.challengeId;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_10__._)(function() {\n            var currentUser, usersRef, userQuery, userSnapshot, userDoc, userData, userId, challengeRef, challengeSnap, challenge, userChallengeId, userChallengeData;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_11__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        // 1) Make sure we have a signed-in user\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!currentUser) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // 2) Find the user doc by username\n                        usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\");\n                        userQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"username\", \"==\", username));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(userQuery)\n                        ];\n                    case 1:\n                        userSnapshot = _state.sent();\n                        if (userSnapshot.empty) {\n                            throw new Error(\"User not found\");\n                        }\n                        userDoc = userSnapshot.docs[0];\n                        userData = userDoc.data();\n                        userId = userDoc.id;\n                        // 3) Check if the challenge doc exists\n                        challengeRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\", challengeId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(challengeRef)\n                        ];\n                    case 2:\n                        challengeSnap = _state.sent();\n                        if (!challengeSnap.exists()) {\n                            throw new Error(\"Challenge not found\");\n                        }\n                        challenge = challengeSnap.data();\n                        // 4) Build new user-challenge document\n                        userChallengeId = \"\".concat(challengeId, \"-\").concat(userId, \"-\").concat(Date.now());\n                        userChallengeData = {\n                            id: userChallengeId,\n                            challenge: challenge,\n                            challengeId: challengeId,\n                            userId: userId,\n                            fcmToken: userData.fcmToken || \"\",\n                            profileImage: userData.profileImage || {},\n                            progress: 0,\n                            completedWorkouts: [],\n                            isCompleted: false,\n                            uid: userId,\n                            location: userData.location || null,\n                            city: \"\",\n                            country: \"\",\n                            timezone: \"\",\n                            username: username,\n                            joinDate: new Date(),\n                            createdAt: new Date(),\n                            updatedAt: new Date(),\n                            pulsePoints: {\n                                baseCompletion: 0,\n                                firstCompletion: 0,\n                                streakBonus: 0,\n                                checkInBonus: 0,\n                                effortRating: 0,\n                                chatParticipation: 0,\n                                locationCheckin: 0,\n                                contentEngagement: 0,\n                                encouragementSent: 0,\n                                encouragementReceived: 0\n                            },\n                            currentStreak: 0,\n                            encouragedUsers: [],\n                            encouragedByUsers: [],\n                            checkIns: []\n                        };\n                        // 5) Store user-challenge doc\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\", userChallengeId), userChallengeData)\n                        ];\n                    case 3:\n                        _state.sent();\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    (0,_swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_16__._)(WorkoutService, [\n        {\n            key: \"currentWorkout\",\n            get: // Replace getters/setters to use Redux\n            function get() {\n                return _redux_store__WEBPACK_IMPORTED_MODULE_7__.store.getState().workout.currentWorkout;\n            },\n            set: function set(workout) {\n                _redux_store__WEBPACK_IMPORTED_MODULE_7__.store.dispatch((0,_redux_workoutSlice__WEBPACK_IMPORTED_MODULE_8__.setCurrentWorkout)(workout));\n            }\n        },\n        {\n            key: \"currentWorkoutLogs\",\n            get: function get() {\n                return _redux_store__WEBPACK_IMPORTED_MODULE_7__.store.getState().workout.currentExerciseLogs;\n            },\n            set: function set(logs) {\n                _redux_store__WEBPACK_IMPORTED_MODULE_7__.store.dispatch((0,_redux_workoutSlice__WEBPACK_IMPORTED_MODULE_8__.setCurrentExerciseLogs)(logs));\n            }\n        }\n    ]);\n    return WorkoutService;\n}();\nvar workoutService = new WorkoutService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU8zTiwrQ0FBS0EsQ0FBQzROLFFBQVEsR0FBR25OLE9BQU8sQ0FBQ2tOLGNBQWM7WUFDaEQ7aUJBRUEsYUFBbUJsTixPQUF1QjtnQkFDeENULCtDQUFLQSxDQUFDNEksUUFBUSxDQUFDM0ksc0VBQWlCQSxDQUFDUTtZQUNuQzs7O1lBRUlvTixLQUFBQTtpQkFBSjtnQkFDRSxPQUFPN04sK0NBQUtBLENBQUM0TixRQUFRLEdBQUduTixPQUFPLENBQUNxTixtQkFBbUI7WUFDckQ7aUJBRUEsYUFBdUJyTCxJQUFtQjtnQkFDeEN6QywrQ0FBS0EsQ0FBQzRJLFFBQVEsQ0FBQzFJLDJFQUFzQkEsQ0FBQ3VDO1lBQ3hDOzs7V0FqQklyQzs7QUFtbUNDLElBQU0yTixpQkFBaUIsSUFBSTNOLGlCQUFpQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvYXBpL2ZpcmViYXNlL3dvcmtvdXQvc2VydmljZS50cz9jNWUyIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9hcGkvZmlyZWJhc2Uvd29ya291dC9zZXJ2aWNlLnRzXG5pbXBvcnQge1xuICBjb2xsZWN0aW9uLFxuICBkb2MsXG4gIGdldERvY3MsXG4gIGdldERvYyxcbiAgdXBkYXRlRG9jLFxuICBxdWVyeSxcbiAgd2hlcmUsXG4gIG9yZGVyQnksIFxuICBEb2N1bWVudERhdGEsXG4gIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCxcbiAgY29sbGVjdGlvbiBhcyBmc0NvbGxlY3Rpb24sXG4gIHNldERvYyxcbiAgZGVsZXRlRG9jLFxuICB3cml0ZUJhdGNoXG59IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XG5cbmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vY29uZmlnJztcbmltcG9ydCB7IHVzZXJTZXJ2aWNlIH0gZnJvbSAnLi4vdXNlcic7XG5pbXBvcnQgeyBFeGVyY2lzZUxvZywgRXhlcmNpc2VDYXRlZ29yeSwgRXhlcmNpc2UsIEJvZHlQYXJ0LCBFeGVyY2lzZVZpZGVvLCBFeGVyY2lzZUF1dGhvciwgRXhlcmNpc2VWaWRlb1Zpc2liaWxpdHkgfSBmcm9tICcuLi9leGVyY2lzZS90eXBlcyc7XG5pbXBvcnQge1Byb2ZpbGVJbWFnZX0gZnJvbSAnLi4vdXNlci90eXBlcydcbmltcG9ydCB7IFdvcmtvdXQsIFdvcmtvdXRTdW1tYXJ5LCBCb2R5Wm9uZSwgSW50cm9WaWRlbyB9IGZyb20gJy4uL3dvcmtvdXQvdHlwZXMnO1xuaW1wb3J0IHsgV29ya291dFN0YXR1cywgU3dlYXRsaXN0Q29sbGVjdGlvbiB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSAnZGF0ZS1mbnMnOyBcbmltcG9ydCB7IGNvbnZlcnRUaW1lc3RhbXAsIHNlcnZlclRpbWVzdGFtcCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3RpbWVzdGFtcCc7IC8vIEFkanVzdCB0aGUgaW1wb3J0IHBhdGhcbmltcG9ydCB7IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAgfSBmcm9tICcuLi8uLi8uLi91dGlscy9mb3JtYXREYXRlJztcbmltcG9ydCB7IENoYWxsZW5nZSwgQ2hhbGxlbmdlU3RhdHVzLCBVc2VyQ2hhbGxlbmdlIH0gZnJvbSAnLi4vLi4vLi4vYXBpL2ZpcmViYXNlL3dvcmtvdXQvdHlwZXMnO1xuXG5pbXBvcnQgeyBzdG9yZSB9IGZyb20gJy4uLy4uLy4uL3JlZHV4L3N0b3JlJztcbmltcG9ydCB7IHNldEN1cnJlbnRXb3Jrb3V0LCBzZXRDdXJyZW50RXhlcmNpc2VMb2dzLCByZXNldFdvcmtvdXRTdGF0ZSB9IGZyb20gJy4uLy4uLy4uL3JlZHV4L3dvcmtvdXRTbGljZSc7XG5cblxuaW50ZXJmYWNlIEZpcmVzdG9yZUVycm9yIHtcbiAgY29kZTogc3RyaW5nO1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgc3RhY2s/OiBzdHJpbmc7XG59XG5cbmNsYXNzIFdvcmtvdXRTZXJ2aWNlIHtcblxuLy8gUmVwbGFjZSBnZXR0ZXJzL3NldHRlcnMgdG8gdXNlIFJlZHV4XG4gIGdldCBjdXJyZW50V29ya291dCgpOiBXb3Jrb3V0IHwgbnVsbCB7XG4gICAgcmV0dXJuIHN0b3JlLmdldFN0YXRlKCkud29ya291dC5jdXJyZW50V29ya291dDtcbiAgfVxuXG4gIHNldCBjdXJyZW50V29ya291dCh3b3Jrb3V0OiBXb3Jrb3V0IHwgbnVsbCkge1xuICAgIHN0b3JlLmRpc3BhdGNoKHNldEN1cnJlbnRXb3Jrb3V0KHdvcmtvdXQpKTtcbiAgfVxuXG4gIGdldCBjdXJyZW50V29ya291dExvZ3MoKTogRXhlcmNpc2VMb2dbXSB7XG4gICAgcmV0dXJuIHN0b3JlLmdldFN0YXRlKCkud29ya291dC5jdXJyZW50RXhlcmNpc2VMb2dzO1xuICB9XG5cbiAgc2V0IGN1cnJlbnRXb3Jrb3V0TG9ncyhsb2dzOiBFeGVyY2lzZUxvZ1tdKSB7XG4gICAgc3RvcmUuZGlzcGF0Y2goc2V0Q3VycmVudEV4ZXJjaXNlTG9ncyhsb2dzKSk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggdGhlIHVzZXIncyBjdXJyZW50IHdvcmtvdXQgKGVpdGhlciBRdWV1ZWRVcCBvciBJblByb2dyZXNzKS5cbiAgICovXG4gIGFzeW5jIGZldGNoQ3VycmVudFdvcmtvdXQodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFdvcmtvdXQgfCBudWxsPiB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHRoaXMuZmV0Y2hDdXJyZW50V29ya291dFNlc3Npb24odXNlcklkKTtcbiAgICByZXR1cm4gc2Vzc2lvbi53b3Jrb3V0O1xuICB9XG5cbiAgYXN5bmMgZ2V0QWxsU3dlYXRsaXN0cyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8V29ya291dFtdPiB7XG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBJRCBpcyByZXF1aXJlZCcpO1xuICAgIH1cbiAgXG4gICAgLy8gUmVmZXJlbmNlIHRvIHRoZSB1c2VyJ3Mgd29ya291dCBjb2xsZWN0aW9uXG4gICAgY29uc3Qgd29ya291dHNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCB1c2VySWQsICdNeUNyZWF0ZWRXb3Jrb3V0cycpO1xuICBcbiAgICB0cnkge1xuICAgICAgLy8gRmV0Y2ggZXhlcmNpc2VzIHdpdGggdmlkZW9zXG4gICAgICBjb25zdCBleGVyY2lzZXNXaXRoVmlkZW9zID0gYXdhaXQgdGhpcy5mZXRjaEFuZE1hcEV4ZXJjaXNlc1dpdGhWaWRlb3MoKTtcbiAgXG4gICAgICAvLyBRdWVyeSB0byBmZXRjaCBhbGwgd29ya291dHNcbiAgICAgIGNvbnN0IHdvcmtvdXRzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHdvcmtvdXRzUmVmKTtcbiAgICAgIGNvbnN0IHdvcmtvdXRzOiBXb3Jrb3V0W10gPSBbXTtcbiAgXG4gICAgICAvLyBQcm9jZXNzIGVhY2ggd29ya291dCBkb2N1bWVudFxuICAgICAgZm9yIChjb25zdCB3b3Jrb3V0RG9jIG9mIHdvcmtvdXRzU25hcHNob3QuZG9jcykge1xuICAgICAgICBjb25zdCB3b3Jrb3V0RGF0YSA9IHdvcmtvdXREb2MuZGF0YSgpO1xuICAgICAgICBjb25zdCB3b3Jrb3V0SWQgPSB3b3Jrb3V0RG9jLmlkO1xuICBcbiAgICAgICAgLy8gTWFwIHRoZSBleGVyY2lzZXMgaW4gdGhlIHdvcmtvdXQgdG8gdGhlIGZ1bGwgZXhlcmNpc2Ugb2JqZWN0cyB3aXRoIHZpZGVvc1xuICAgICAgICBjb25zdCBtYXBwZWRFeGVyY2lzZXMgPSAod29ya291dERhdGEuZXhlcmNpc2VzIHx8IFtdKS5tYXAoKGV4ZXJjaXNlUmVmOiBhbnkpID0+IHtcbiAgICAgICAgICBjb25zdCBmdWxsRXhlcmNpc2UgPSBleGVyY2lzZXNXaXRoVmlkZW9zLmZpbmQoZXggPT4gZXgubmFtZSA9PT0gZXhlcmNpc2VSZWYuZXhlcmNpc2UubmFtZSk7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJUaGlzIGlzIHRoZSBtYXBwZWQgZXhlcmNpc2U6IFwiICsgZnVsbEV4ZXJjaXNlKTtcblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5leGVyY2lzZVJlZixcbiAgICAgICAgICAgIGV4ZXJjaXNlOiBmdWxsRXhlcmNpc2UgfHwgZXhlcmNpc2VSZWZcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICBcbiAgICAgICAgLy8gUGFyc2Ugd29ya291dCBkYXRhIGludG8gdGhlIGRlc2lyZWQgc3RydWN0dXJlXG4gICAgICAgIGNvbnN0IHdvcmtvdXQgPSBuZXcgV29ya291dCh7XG4gICAgICAgICAgaWQ6IHdvcmtvdXREYXRhLmlkIHx8ICcnLFxuICAgICAgICAgIHJvdW5kV29ya291dElkOiB3b3Jrb3V0RGF0YS5yb3VuZFdvcmtvdXRJZCB8fCAnJyxcbiAgICAgICAgICBjb2xsZWN0aW9uSWQ6IHdvcmtvdXREYXRhLmNvbGxlY3Rpb25JZCxcbiAgICAgICAgICBleGVyY2lzZXM6IG1hcHBlZEV4ZXJjaXNlcyxcbiAgICAgICAgICBjaGFsbGVuZ2U6IHdvcmtvdXREYXRhLmNoYWxsZW5nZSxcbiAgICAgICAgICBsb2dzOiBbXSxcbiAgICAgICAgICB0aXRsZTogd29ya291dERhdGEudGl0bGUgfHwgJycsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHdvcmtvdXREYXRhLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICAgIGR1cmF0aW9uOiB3b3Jrb3V0RGF0YS5kdXJhdGlvbiB8fCAwLFxuICAgICAgICAgIHdvcmtvdXRSYXRpbmc6IHdvcmtvdXREYXRhLndvcmtvdXRSYXRpbmcsXG4gICAgICAgICAgdXNlQXV0aG9yQ29udGVudDogd29ya291dERhdGEudXNlQXV0aG9yQ29udGVudCB8fCBmYWxzZSxcbiAgICAgICAgICBpc0NvbXBsZXRlZDogd29ya291dERhdGEuaXNDb21wbGV0ZWQgfHwgZmFsc2UsXG4gICAgICAgICAgd29ya291dFN0YXR1czogd29ya291dERhdGEud29ya291dFN0YXR1cyB8fCAnbm90U3RhcnRlZCcsXG4gICAgICAgICAgc3RhcnRUaW1lOiB3b3Jrb3V0RGF0YS5zdGFydFRpbWUgPyBuZXcgRGF0ZSh3b3Jrb3V0RGF0YS5zdGFydFRpbWUpIDogdW5kZWZpbmVkLFxuICAgICAgICAgIG9yZGVyOiB3b3Jrb3V0RGF0YS5vcmRlcixcbiAgICAgICAgICBhdXRob3I6IHdvcmtvdXREYXRhLmF1dGhvciB8fCB1c2VySWQsXG4gICAgICAgICAgY3JlYXRlZEF0OiB3b3Jrb3V0RGF0YS5jcmVhdGVkQXQgPyBuZXcgRGF0ZSh3b3Jrb3V0RGF0YS5jcmVhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IHdvcmtvdXREYXRhLnVwZGF0ZWRBdCA/IG5ldyBEYXRlKHdvcmtvdXREYXRhLnVwZGF0ZWRBdCkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHpvbmU6IHdvcmtvdXREYXRhLnpvbmUgfHwgJ0ZVTExfQk9EWScsXG4gICAgICAgIH0pOyAgICAgICAgXG4gIFxuICAgICAgICAvLyBGZXRjaCBhbmQgcHJvY2VzcyBsb2dzXG4gICAgICAgIGNvbnN0IGxvZ3NSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCB1c2VySWQsICdNeUNyZWF0ZWRXb3Jrb3V0cycsIHdvcmtvdXRJZCwgJ2xvZ3MnKTtcbiAgICAgICAgY29uc3QgbG9nc1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhsb2dzUmVmKTtcbiAgICAgICAgd29ya291dC5sb2dzID0gbG9nc1NuYXBzaG90LmRvY3MubWFwKChsb2dEb2MpID0+ICh7XG4gICAgICAgICAgLi4ubG9nRG9jLmRhdGEoKSxcbiAgICAgICAgICBpZDogbG9nRG9jLmlkLFxuICAgICAgICB9KSkgYXMgRXhlcmNpc2VMb2dbXTtcbiAgXG4gICAgICAgIHdvcmtvdXRzLnB1c2god29ya291dCk7XG4gICAgICB9XG4gIFxuICAgICAgcmV0dXJuIHdvcmtvdXRzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBmaXJlc3RvcmVFcnJvciA9IGVycm9yIGFzIEZpcmVzdG9yZUVycm9yO1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgc3dlYXRsaXN0czonLCBmaXJlc3RvcmVFcnJvci5tZXNzYWdlKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIHN3ZWF0bGlzdHMnKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRVc2VyQ2hhbGxlbmdlc0J5Q2hhbGxlbmdlSWQoY2hhbGxlbmdlSWQ6IHN0cmluZyk6IFByb21pc2U8eyB1c2VyQ2hhbGxlbmdlczogVXNlckNoYWxsZW5nZVtdOyBlcnJvcj86IHN0cmluZyB9PiB7XG4gICAgY29uc3QgdXNlckNoYWxsZW5nZXNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlci1jaGFsbGVuZ2UnKTtcbiAgICBjb25zdCBxID0gcXVlcnkodXNlckNoYWxsZW5nZXNSZWYsIHdoZXJlKCdjaGFsbGVuZ2VJZCcsICc9PScsIGNoYWxsZW5nZUlkKSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICAgIGNvbnN0IHVzZXJDaGFsbGVuZ2VzOiBVc2VyQ2hhbGxlbmdlW10gPSBzbmFwc2hvdC5kb2NzLm1hcCgoZG9jOiBEb2N1bWVudERhdGEpID0+IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICAgIHJldHVybiBuZXcgVXNlckNoYWxsZW5nZShkb2MuaWQsIGRhdGEpO1xuICAgICAgfSk7XG4gICAgICBpZiAodXNlckNoYWxsZW5nZXMubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4geyB1c2VyQ2hhbGxlbmdlcyB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgdXNlckNoYWxsZW5nZXM6IFtdLCBlcnJvcjogJ05vIHVzZXIgY2hhbGxlbmdlcyBmb3VuZCBmb3IgdGhpcyBjaGFsbGVuZ2UuJyB9O1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyIGNoYWxsZW5nZXMgYnkgY2hhbGxlbmdlSWQ6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHsgdXNlckNoYWxsZW5nZXM6IFtdLCBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicgfTtcbiAgICB9XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBGZXRjaGVzIHdvcmtvdXQgc3VtbWFyaWVzIGZvciBhIHNwZWNpZmljIGRhdGUuXG4gICAqIEBwYXJhbSBkYXRlIC0gVGhlIGRhdGUgZm9yIHdoaWNoIHdvcmtvdXQgc3VtbWFyaWVzIGFyZSBiZWluZyBmZXRjaGVkLlxuICAgKiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIHRvIGFuIGFycmF5IG9mIHdvcmtvdXQgc3VtbWFyaWVzLlxuICAgKiBAdGhyb3dzIElmIG5vIHVzZXIgaXMgc2lnbmVkIGluIG9yIGlmIHRoZSBGaXJlc3RvcmUgcXVlcnkgZmFpbHMuXG4gICAqL1xuICBhc3luYyBmZXRjaFdvcmtvdXRTdW1tYXJpZXMoZGF0ZTogRGF0ZSk6IFByb21pc2U8V29ya291dFN1bW1hcnlbXT4ge1xuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlclNlcnZpY2UuY3VycmVudFVzZXI7XG4gICAgaWYgKCFjdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBpcyBzaWduZWQgaW4nKTtcbiAgICB9XG5cbiAgICAvLyBGb3JtYXQgdGhlIGRhdGUgdG8gbWF0Y2ggdGhlIGZvcm1hdCBpbiBGaXJlc3RvcmUgKCdNTS1kZC15eXl5JylcbiAgICBjb25zdCBmb3JtYXR0ZWREYXRlID0gZm9ybWF0KGRhdGUsICdNTS1kZC15eXl5Jyk7XG5cbiAgICAvLyBSZWZlcmVuY2UgdG8gdGhlIHVzZXIncyB3b3Jrb3V0U3VtbWFyaWVzIHN1YmNvbGxlY3Rpb25cbiAgICBjb25zdCBzdW1tYXJpZXNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCBjdXJyZW50VXNlci5pZCwgJ3dvcmtvdXRTdW1tYXJpZXMnKTtcblxuICAgIC8vIENyZWF0ZSBhIHF1ZXJ5IHRvIGZpbHRlciBkb2N1bWVudHMgYnkgdGhlIHNwZWNpZmllZCBkYXRlXG4gICAgY29uc3QgcSA9IHF1ZXJ5KHN1bW1hcmllc1JlZiwgd2hlcmUoJ2RhdGUnLCAnPT0nLCBmb3JtYXR0ZWREYXRlKSk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuXG4gICAgICAvLyBNYXAgdGhlIGRvY3VtZW50cyB0byBhbiBhcnJheSBvZiBXb3Jrb3V0U3VtbWFyeSBvYmplY3RzXG4gICAgICByZXR1cm4gc25hcHNob3QuZG9jcy5tYXAoKGRvYzogRG9jdW1lbnREYXRhKSA9PiAoe1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kb2MuZGF0YSgpLFxuICAgICAgfSkpIGFzIFdvcmtvdXRTdW1tYXJ5W107XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGZpcmVzdG9yZUVycm9yID0gZXJyb3IgYXMgRmlyZXN0b3JlRXJyb3I7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB3b3Jrb3V0IHN1bW1hcmllczonLCBmaXJlc3RvcmVFcnJvci5tZXNzYWdlKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihmaXJlc3RvcmVFcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBmZXRjaEFsbFdvcmtvdXRTdW1tYXJpZXMoKTogUHJvbWlzZTxXb3Jrb3V0U3VtbWFyeVtdPiB7XG4gICAgY29uc3QgY3VycmVudFVzZXIgPSB1c2VyU2VydmljZS5jdXJyZW50VXNlcjtcbiAgICBpZiAoIWN1cnJlbnRVc2VyPy5pZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGlzIHNpZ25lZCBpbicpO1xuICAgIH1cbiAgXG4gICAgLy8gUmVmZXJlbmNlIHRvIHRoZSB1c2VyJ3Mgd29ya291dFN1bW1hcmllcyBzdWJjb2xsZWN0aW9uXG4gICAgY29uc3Qgc3VtbWFyaWVzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgY3VycmVudFVzZXIuaWQsICd3b3Jrb3V0U3VtbWFyeScpO1xuICBcbiAgICAvLyBRdWVyeSB0byByZXRyaWV2ZSBhbGwgd29ya291dCBzdW1tYXJpZXMsIHNvcnRlZCBieSBgY3JlYXRlZEF0YCBpbiBhc2NlbmRpbmcgb3JkZXJcbiAgICBjb25zdCBxID0gcXVlcnkoc3VtbWFyaWVzUmVmLCBvcmRlckJ5KCdjcmVhdGVkQXQnLCAnYXNjJykpOyAvLyBBZGp1c3QgZmllbGQgbmFtZSBiYXNlZCBvbiB5b3VyIHNjaGVtYVxuICBcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICBcbiAgICAgIC8vIE1hcCB0aGUgZG9jdW1lbnRzIHRvIGFuIGFycmF5IG9mIFdvcmtvdXRTdW1tYXJ5IG9iamVjdHNcbiAgICAgIHJldHVybiBzbmFwc2hvdC5kb2NzLm1hcCgoZG9jOiBEb2N1bWVudERhdGEpID0+ICh7XG4gICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgIC4uLmRvYy5kYXRhKCksXG4gICAgICB9KSkgYXMgV29ya291dFN1bW1hcnlbXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZmlyZXN0b3JlRXJyb3IgPSBlcnJvciBhcyBGaXJlc3RvcmVFcnJvcjtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFsbCB3b3Jrb3V0IHN1bW1hcmllczonLCBmaXJlc3RvcmVFcnJvci5tZXNzYWdlKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihmaXJlc3RvcmVFcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICogRmV0Y2ggdXNlciBjaGFsbGVuZ2VzIGJ5IHVzZXJJZC5cbiAqIEBwYXJhbSB1c2VySWQgVGhlIElEIG9mIHRoZSB1c2VyIHRvIGZldGNoIGNoYWxsZW5nZXMgZm9yLlxuICogQHJldHVybnMgQSBwcm9taXNlIHJlc29sdmluZyB0byBhbiBhcnJheSBvZiB1c2VyIGNoYWxsZW5nZXMuXG4gKiBAdGhyb3dzIElmIHRoZSBGaXJlc3RvcmUgcXVlcnkgZmFpbHMuXG4gKi9cbmFzeW5jIGZldGNoVXNlckNoYWxsZW5nZXNCeVVzZXJJZCh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8VXNlckNoYWxsZW5nZVtdPiB7XG4gIGNvbnN0IHVzZXJDaGFsbGVuZ2VzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXItY2hhbGxlbmdlJyk7XG4gIGNvbnN0IHEgPSBxdWVyeSh1c2VyQ2hhbGxlbmdlc1JlZiwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIHVzZXJJZCkpO1xuXG4gIHRyeSB7XG4gICAgLy8gY29uc29sZS5sb2coYEZldGNoaW5nIGNoYWxsZW5nZXMgZm9yIHVzZXIgSUQ6ICR7dXNlcklkfWApO1xuXG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuXG4gICAgLy8gY29uc29sZS5sb2coYFRvdGFsIGNoYWxsZW5nZXMgZmV0Y2hlZDogJHtzbmFwc2hvdC5kb2NzLmxlbmd0aH1gKTtcblxuICAgIGNvbnN0IHVzZXJDaGFsbGVuZ2VzID0gc25hcHNob3QuZG9jcy5tYXAoKGRvYzogRG9jdW1lbnREYXRhKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGBQcm9jZXNzaW5nIGNoYWxsZW5nZSB3aXRoIElEOiAke2RvYy5pZH1gLCBkYXRhKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgY2hhbGxlbmdlOiBkYXRhLmNoYWxsZW5nZVxuICAgICAgICAgID8gbmV3IENoYWxsZW5nZSh7XG4gICAgICAgICAgICAgIGlkOiBkYXRhLmNoYWxsZW5nZS5pZCxcbiAgICAgICAgICAgICAgdGl0bGU6IGRhdGEuY2hhbGxlbmdlLnRpdGxlLFxuICAgICAgICAgICAgICBzdWJ0aXRsZTogZGF0YS5jaGFsbGVuZ2Uuc3VidGl0bGUsXG4gICAgICAgICAgICAgIHBhcnRpY2lwYW50czogZGF0YS5jaGFsbGVuZ2UucGFydGljaXBhbnRzIHx8IFtdLFxuICAgICAgICAgICAgICBzdGF0dXM6IGRhdGEuY2hhbGxlbmdlLnN0YXR1cyBhcyBDaGFsbGVuZ2VTdGF0dXMsXG4gICAgICAgICAgICAgIHN0YXJ0RGF0ZTogZGF0YS5jaGFsbGVuZ2Uuc3RhcnREYXRlID8gbmV3IERhdGUoZGF0YS5jaGFsbGVuZ2Uuc3RhcnREYXRlKSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgIGVuZERhdGU6IGRhdGEuY2hhbGxlbmdlLmVuZERhdGUgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS5lbmREYXRlKSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgIGNyZWF0ZWRBdDogZGF0YS5jaGFsbGVuZ2UuY3JlYXRlZEF0ID8gbmV3IERhdGUoZGF0YS5jaGFsbGVuZ2UuY3JlYXRlZEF0KSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgIHVwZGF0ZWRBdDogZGF0YS5jaGFsbGVuZ2UudXBkYXRlZEF0ID8gbmV3IERhdGUoZGF0YS5jaGFsbGVuZ2UudXBkYXRlZEF0KSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgIGludHJvVmlkZW9zOiAoZGF0YS5jaGFsbGVuZ2UuaW50cm9WaWRlb3MgfHwgW10pLm1hcCgodjogYW55KSA9PiBcbiAgICAgICAgICAgICAgICBuZXcgSW50cm9WaWRlbyh7XG4gICAgICAgICAgICAgICAgICBpZDogdi5pZCxcbiAgICAgICAgICAgICAgICAgIHVzZXJJZDogdi51c2VySWQsXG4gICAgICAgICAgICAgICAgICB2aWRlb1VybDogdi52aWRlb1VybFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgIGNyZWF0ZWRBdDogY29udmVydFRpbWVzdGFtcChkYXRhLmNyZWF0ZWRBdCksXG4gICAgICAgIHVwZGF0ZWRBdDogY29udmVydFRpbWVzdGFtcChkYXRhLnVwZGF0ZWRBdCksXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gY29uc29sZS5sb2coJ0FsbCBjaGFsbGVuZ2VzIGFmdGVyIHByb2Nlc3Npbmc6JywgSlNPTi5zdHJpbmdpZnkodXNlckNoYWxsZW5nZXMsIG51bGwsIDIpKTtcblxuICAgIHJldHVybiB1c2VyQ2hhbGxlbmdlcztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyIGNoYWxsZW5nZXMgYnkgdXNlcklkOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5hc3luYyBmZXRjaENvbGxlY3Rpb25XaXRoU3dlYXRMaXN0cyhjb2xsZWN0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8eyBjb2xsZWN0aW9uOiBhbnksIHN3ZWF0TGlzdHM6IFdvcmtvdXRbXSB9PiB7XG4gIHRyeSB7XG4gICAgLy8gRmV0Y2ggdGhlIGNvbGxlY3Rpb25cbiAgICBjb25zdCBjb2xsZWN0aW9uID0gYXdhaXQgdGhpcy5nZXRDb2xsZWN0aW9uQnlJZChjb2xsZWN0aW9uSWQpO1xuXG4gICAgLy8gRmV0Y2ggc3dlYXQgbGlzdHMgKHdvcmtvdXRzKVxuICAgIGNvbnN0IHN3ZWF0TGlzdHM6IFdvcmtvdXRbXSA9IFtdO1xuICAgIFxuICAgIC8vIEFzc3VtaW5nIGNvbGxlY3Rpb24gaGFzIHN3ZWF0bGlzdElkcyB3aXRoIGF1dGhvciBhbmQgd29ya291dCBJRHNcbiAgICBmb3IgKGNvbnN0IHN3ZWF0bGlzdElkZW50aWZpZXIgb2YgY29sbGVjdGlvbi5zd2VhdGxpc3RJZHMgfHwgW10pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IFt3b3Jrb3V0XSA9IGF3YWl0IHRoaXMuZmV0Y2hTYXZlZFdvcmtvdXQoXG4gICAgICAgICAgc3dlYXRsaXN0SWRlbnRpZmllci5zd2VhdGxpc3RBdXRob3JJZCwgXG4gICAgICAgICAgc3dlYXRsaXN0SWRlbnRpZmllci5pZFxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKHdvcmtvdXQpIHtcbiAgICAgICAgICBzd2VhdExpc3RzLnB1c2god29ya291dCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZldGNoaW5nIHdvcmtvdXQgJHtzd2VhdGxpc3RJZGVudGlmaWVyLmlkfTpgLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgY29sbGVjdGlvbiwgc3dlYXRMaXN0cyB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNvbGxlY3Rpb24gd2l0aCBzd2VhdCBsaXN0czonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuYXN5bmMgZmV0Y2hTYXZlZFdvcmtvdXQodXNlcklkOiBzdHJpbmcsIHdvcmtvdXRJZDogc3RyaW5nKTogUHJvbWlzZTxbV29ya291dCB8IG51bGwsIEV4ZXJjaXNlTG9nW10gfCBudWxsXT4ge1xuICB0cnkge1xuICAgIC8vIEZldGNoIHRoZSB3b3Jrb3V0IGRvY3VtZW50XG4gICAgY29uc3Qgd29ya291dFJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdXNlcklkLCAnTXlDcmVhdGVkV29ya291dHMnLCB3b3Jrb3V0SWQpO1xuICAgIGNvbnN0IHdvcmtvdXRTbmFwID0gYXdhaXQgZ2V0RG9jKHdvcmtvdXRSZWYpO1xuXG4gICAgaWYgKCF3b3Jrb3V0U25hcC5leGlzdHMoKSkge1xuICAgICAgcmV0dXJuIFtudWxsLCBudWxsXTtcbiAgICB9XG5cbiAgICAvLyBHZXQgZXhlcmNpc2VzIHdpdGggdmlkZW9zIG1hcHBlZFxuICAgIGNvbnN0IGV4ZXJjaXNlc1dpdGhWaWRlb3MgPSBhd2FpdCB0aGlzLmZldGNoQW5kTWFwRXhlcmNpc2VzV2l0aFZpZGVvcygpO1xuICAgIGNvbnN0IHdvcmtvdXREYXRhID0gd29ya291dFNuYXAuZGF0YSgpO1xuXG4gICAgLy8gTWFwIHRoZSBleGVyY2lzZXMgaW4gdGhlIHdvcmtvdXQgdG8gdGhlIGZ1bGwgZXhlcmNpc2Ugb2JqZWN0cyB3aXRoIHZpZGVvc1xuICAgIGNvbnN0IG1hcHBlZEV4ZXJjaXNlcyA9ICh3b3Jrb3V0RGF0YS5leGVyY2lzZXMgfHwgW10pLm1hcCgoZXhlcmNpc2VSZWY6IGFueSkgPT4ge1xuICAgICAgY29uc3QgZnVsbEV4ZXJjaXNlID0gZXhlcmNpc2VzV2l0aFZpZGVvcy5maW5kKGV4ID0+IGV4Lm5hbWUgPT09IGV4ZXJjaXNlUmVmLmV4ZXJjaXNlLm5hbWUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZXhlcmNpc2VSZWYsXG4gICAgICAgIGV4ZXJjaXNlOiBmdWxsRXhlcmNpc2UgfHwgZXhlcmNpc2VSZWYuZXhlcmNpc2VcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICB3b3Jrb3V0RGF0YS5leGVyY2lzZXMgPSBtYXBwZWRFeGVyY2lzZXM7XG4gICAgY29uc3Qgd29ya291dCA9IG5ldyBXb3Jrb3V0KHtcbiAgICAgIGlkOiB3b3Jrb3V0RGF0YS5pZCxcbiAgICAgIHJvdW5kV29ya291dElkOiB3b3Jrb3V0RGF0YS5yb3VuZFdvcmtvdXRJZCxcbiAgICAgIGNvbGxlY3Rpb25JZDogd29ya291dERhdGEuY29sbGVjdGlvbklkLFxuICAgICAgZXhlcmNpc2VzOiB3b3Jrb3V0RGF0YS5leGVyY2lzZXMsXG4gICAgICBjaGFsbGVuZ2U6IHdvcmtvdXREYXRhLmNoYWxsZW5nZSxcbiAgICAgIGxvZ3M6IHdvcmtvdXREYXRhLmxvZ3MsXG4gICAgICB0aXRsZTogd29ya291dERhdGEudGl0bGUsXG4gICAgICBkZXNjcmlwdGlvbjogd29ya291dERhdGEuZGVzY3JpcHRpb24sXG4gICAgICBkdXJhdGlvbjogd29ya291dERhdGEuZHVyYXRpb24sXG4gICAgICB3b3Jrb3V0UmF0aW5nOiB3b3Jrb3V0RGF0YS53b3Jrb3V0UmF0aW5nLFxuICAgICAgdXNlQXV0aG9yQ29udGVudDogd29ya291dERhdGEudXNlQXV0aG9yQ29udGVudCxcbiAgICAgIGlzQ29tcGxldGVkOiB3b3Jrb3V0RGF0YS5pc0NvbXBsZXRlZCxcbiAgICAgIHdvcmtvdXRTdGF0dXM6IHdvcmtvdXREYXRhLndvcmtvdXRTdGF0dXMsXG4gICAgICBzdGFydFRpbWU6IHdvcmtvdXREYXRhLnN0YXJ0VGltZSxcbiAgICAgIG9yZGVyOiB3b3Jrb3V0RGF0YS5vcmRlcixcbiAgICAgIGF1dGhvcjogd29ya291dERhdGEuYXV0aG9yLFxuICAgICAgYXNzaWduZWREYXRlOiB3b3Jrb3V0RGF0YS5hc3NpZ25lZERhdGUsXG4gICAgICBjcmVhdGVkQXQ6IHdvcmtvdXREYXRhLmNyZWF0ZWRBdCxcbiAgICAgIHVwZGF0ZWRBdDogd29ya291dERhdGEudXBkYXRlZEF0XG4gICAgfSk7XG5cbiAgICAvLyBGZXRjaCBsb2dzXG4gICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24od29ya291dFJlZiwgJ2xvZ3MnKTtcbiAgICBjb25zdCBsb2dzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGxvZ3NSZWYpO1xuXG4gICAgY29uc3QgbG9nczogRXhlcmNpc2VMb2dbXSA9IGxvZ3NTbmFwc2hvdC5kb2NzLm1hcChsb2dEb2MgPT4ge1xuICAgICAgY29uc3QgbG9nRGF0YSA9IGxvZ0RvYy5kYXRhKCk7XG4gICAgICBjb25zdCBmdWxsRXhlcmNpc2UgPSBleGVyY2lzZXNXaXRoVmlkZW9zLmZpbmQoZXggPT4gZXgubmFtZSA9PT0gbG9nRGF0YS5leGVyY2lzZS5uYW1lKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIG5ldyBFeGVyY2lzZUxvZyh7XG4gICAgICAgIGlkOiBsb2dEb2MuaWQsXG4gICAgICAgIHdvcmtvdXRJZDogd29ya291dElkLFxuICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgZXhlcmNpc2U6IGZ1bGxFeGVyY2lzZSB8fCBsb2dEYXRhLmV4ZXJjaXNlLFxuICAgICAgICBsb2dzOiBsb2dEYXRhLmxvZyB8fCBbXSxcbiAgICAgICAgZmVlZGJhY2s6IGxvZ0RhdGEuZmVlZGJhY2sgfHwgJycsXG4gICAgICAgIG5vdGU6IGxvZ0RhdGEubm90ZSB8fCAnJyxcbiAgICAgICAgcmVjb21tZW5kZWRXZWlnaHQ6IGxvZ0RhdGEucmVjb21tZW5kZWRXZWlnaHQsXG4gICAgICAgIGlzU3BsaXQ6IGxvZ0RhdGEuaXNTcGxpdCB8fCBmYWxzZSxcbiAgICAgICAgaXNCb2R5V2VpZ2h0OiBsb2dEYXRhLmlzQm9keVdlaWdodCB8fCBmYWxzZSxcbiAgICAgICAgbG9nU3VibWl0dGVkOiBsb2dEYXRhLmxvZ1N1Ym1pdHRlZCB8fCBmYWxzZSxcbiAgICAgICAgbG9nSXNFZGl0aW5nOiBsb2dEYXRhLmxvZ0lzRWRpdGluZyB8fCBmYWxzZSxcbiAgICAgICAgaXNDb21wbGV0ZWQ6IGxvZ0RhdGEuaXNDb21wbGV0ZWQgfHwgZmFsc2UsXG4gICAgICAgIGNvbXBsZXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGxvZ0RhdGEuY29tcGxldGVkQXQpLFxuICAgICAgICBjcmVhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAobG9nRGF0YS5jcmVhdGVkQXQpLFxuICAgICAgICB1cGRhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAobG9nRGF0YS51cGRhdGVkQXQpXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHdvcmtvdXQubG9ncyA9IGxvZ3M7XG4gICAgcmV0dXJuIFt3b3Jrb3V0LCBsb2dzXTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzYXZlZCB3b3Jrb3V0OicsIGVycm9yKTtcbiAgICByZXR1cm4gW251bGwsIG51bGxdO1xuICB9XG59XG5cbi8qKlxuICogRmV0Y2ggdXNlciBjaGFsbGVuZ2VzIGJ5IGNoYWxsZW5nZUlkLlxuICogQHBhcmFtIGNoYWxsZW5nZUlkIFRoZSBJRCBvZiB0aGUgY2hhbGxlbmdlIHRvIGZldGNoIGFzc29jaWF0ZWQgdXNlciBjaGFsbGVuZ2VzIGZvci5cbiAqIEByZXR1cm5zIEEgcHJvbWlzZSByZXNvbHZpbmcgdG8gYW4gYXJyYXkgb2YgdXNlciBjaGFsbGVuZ2VzLlxuICogQHRocm93cyBJZiB0aGUgRmlyZXN0b3JlIHF1ZXJ5IGZhaWxzLlxuICovXG5hc3luYyBmZXRjaFVzZXJDaGFsbGVuZ2VzQnlDaGFsbGVuZ2VJZChjaGFsbGVuZ2VJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyQ2hhbGxlbmdlW10+IHtcbiAgY29uc3QgdXNlckNoYWxsZW5nZXNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlci1jaGFsbGVuZ2UnKTtcbiAgY29uc3QgcSA9IHF1ZXJ5KHVzZXJDaGFsbGVuZ2VzUmVmLCB3aGVyZSgnY2hhbGxlbmdlSWQnLCAnPT0nLCBjaGFsbGVuZ2VJZCkpO1xuXG4gIHRyeSB7XG4gICAgLy8gY29uc29sZS5sb2coYEZldGNoaW5nIHVzZXIgY2hhbGxlbmdlcyBmb3IgY2hhbGxlbmdlIElEOiAke2NoYWxsZW5nZUlkfWApO1xuXG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuXG4gICAgLy8gY29uc29sZS5sb2coYFRvdGFsIHVzZXIgY2hhbGxlbmdlcyBmZXRjaGVkOiAke3NuYXBzaG90LmRvY3MubGVuZ3RofWApO1xuXG4gICAgY29uc3QgdXNlckNoYWxsZW5nZXMgPSBzbmFwc2hvdC5kb2NzLm1hcCgoZG9jOiBEb2N1bWVudERhdGEpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgLy8gY29uc29sZS5sb2coYFByb2Nlc3NpbmcgdXNlciBjaGFsbGVuZ2Ugd2l0aCBJRDogJHtkb2MuaWR9YCwgZGF0YSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgIC4uLmRhdGEsXG4gICAgICAgIGNoYWxsZW5nZTogZGF0YS5jaGFsbGVuZ2VcbiAgICAgICAgICA/IG5ldyBDaGFsbGVuZ2Uoe1xuICAgICAgICAgICAgICBpZDogZGF0YS5jaGFsbGVuZ2UuaWQsXG4gICAgICAgICAgICAgIHRpdGxlOiBkYXRhLmNoYWxsZW5nZS50aXRsZSxcbiAgICAgICAgICAgICAgc3VidGl0bGU6IGRhdGEuY2hhbGxlbmdlLnN1YnRpdGxlLFxuICAgICAgICAgICAgICBwYXJ0aWNpcGFudHM6IGRhdGEuY2hhbGxlbmdlLnBhcnRpY2lwYW50cyB8fCBbXSxcbiAgICAgICAgICAgICAgc3RhdHVzOiBkYXRhLmNoYWxsZW5nZS5zdGF0dXMgYXMgQ2hhbGxlbmdlU3RhdHVzLFxuICAgICAgICAgICAgICBzdGFydERhdGU6IGRhdGEuY2hhbGxlbmdlLnN0YXJ0RGF0ZSA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLnN0YXJ0RGF0ZSkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICBlbmREYXRlOiBkYXRhLmNoYWxsZW5nZS5lbmREYXRlID8gbmV3IERhdGUoZGF0YS5jaGFsbGVuZ2UuZW5kRGF0ZSkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGRhdGEuY2hhbGxlbmdlLmNyZWF0ZWRBdCA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLmNyZWF0ZWRBdCkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICB1cGRhdGVkQXQ6IGRhdGEuY2hhbGxlbmdlLnVwZGF0ZWRBdCA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLnVwZGF0ZWRBdCkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICBpbnRyb1ZpZGVvczogKGRhdGEuY2hhbGxlbmdlLmludHJvVmlkZW9zIHx8IFtdKS5tYXAoKHY6IGFueSkgPT4gXG4gICAgICAgICAgICAgICAgbmV3IEludHJvVmlkZW8oe1xuICAgICAgICAgICAgICAgICAgaWQ6IHYuaWQsXG4gICAgICAgICAgICAgICAgICB1c2VySWQ6IHYudXNlcklkLFxuICAgICAgICAgICAgICAgICAgdmlkZW9Vcmw6IHYudmlkZW9VcmxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICBjcmVhdGVkQXQ6IGNvbnZlcnRUaW1lc3RhbXAoZGF0YS5jcmVhdGVkQXQpLFxuICAgICAgICB1cGRhdGVkQXQ6IGNvbnZlcnRUaW1lc3RhbXAoZGF0YS51cGRhdGVkQXQpLFxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8vIGNvbnNvbGUubG9nKCdBbGwgdXNlciBjaGFsbGVuZ2VzIGFmdGVyIHByb2Nlc3Npbmc6JywgSlNPTi5zdHJpbmdpZnkodXNlckNoYWxsZW5nZXMsIG51bGwsIDIpKTtcblxuICAgIHJldHVybiB1c2VyQ2hhbGxlbmdlcztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyIGNoYWxsZW5nZXMgYnkgY2hhbGxlbmdlSWQ6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmFzeW5jIGdldENvbGxlY3Rpb25CeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPFN3ZWF0bGlzdENvbGxlY3Rpb24+IHtcbiAgY29uc29sZS5sb2coXCJGZXRjaGluZyBjb2xsZWN0aW9uIHdpdGggaWQ6XCIsIGlkKTtcbiAgdHJ5IHtcbiAgICBjb25zdCBkb2NSZWYgPSBkb2MoZGIsIFwic3dlYXRsaXN0LWNvbGxlY3Rpb25cIiwgaWQpO1xuICAgIGNvbnN0IGRvY1NuYXAgPSBhd2FpdCBnZXREb2MoZG9jUmVmKTtcbiAgICBpZiAoZG9jU25hcC5leGlzdHMoKSkge1xuICAgICAgcmV0dXJuIG5ldyBTd2VhdGxpc3RDb2xsZWN0aW9uKHtcbiAgICAgICAgaWQ6IGRvY1NuYXAuaWQsXG4gICAgICAgIC4uLmRvY1NuYXAuZGF0YSgpXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29sbGVjdGlvbiBub3QgZm91bmRcIik7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIGNvbGxlY3Rpb24gYnkgSUQ6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4gIFxuICAgIC8qKlxuICAgKiBGZXRjaCB1c2VyIGNoYWxsZW5nZXMgYnkgdXNlcklkIGFuZCBmaWx0ZXIgZm9yIGFjdGl2ZSBjaGFsbGVuZ2VzLlxuICAgKiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIHRvIGFuIGFycmF5IG9mIGFjdGl2ZSBjaGFsbGVuZ2VzLlxuICAgKiBAdGhyb3dzIElmIG5vIHVzZXIgaXMgc2lnbmVkIGluIG9yIGlmIHRoZSBGaXJlc3RvcmUgcXVlcnkgZmFpbHMuXG4gICAqL1xuICAgIGFzeW5jIGZldGNoQWN0aXZlQ2hhbGxlbmdlcygpOiBQcm9taXNlPFVzZXJDaGFsbGVuZ2VbXT4ge1xuICAgICAgY29uc3QgY3VycmVudFVzZXIgPSB1c2VyU2VydmljZS5jdXJyZW50VXNlcjtcbiAgICAgIGlmICghY3VycmVudFVzZXI/LmlkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBpcyBzaWduZWQgaW4nKTtcbiAgICAgIH1cbiAgICBcbiAgICAgIGNvbnN0IHVzZXJDaGFsbGVuZ2VzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXItY2hhbGxlbmdlJyk7XG4gICAgICBjb25zdCBxID0gcXVlcnkodXNlckNoYWxsZW5nZXNSZWYsIHdoZXJlKCd1c2VySWQnLCAnPT0nLCBjdXJyZW50VXNlci5pZCkpO1xuICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coYEZldGNoaW5nIGNoYWxsZW5nZXMgZm9yIHVzZXIgSUQ6ICR7Y3VycmVudFVzZXIuaWR9YCk7XG4gICAgXG4gICAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICBcbiAgICAgICAgLy8gY29uc29sZS5sb2coYFRvdGFsIGNoYWxsZW5nZXMgZmV0Y2hlZDogJHtzbmFwc2hvdC5kb2NzLmxlbmd0aH1gKTtcbiAgICBcbiAgICAgICAgY29uc3QgYWxsQ2hhbGxlbmdlcyA9IHNuYXBzaG90LmRvY3MubWFwKChkb2M6IERvY3VtZW50RGF0YSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBQcm9jZXNzaW5nIGNoYWxsZW5nZSB3aXRoIElEOiAke2RvYy5pZH1gLCBkYXRhKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBVc2UgdGhlIENoYWxsZW5nZSBjb25zdHJ1Y3RvciB0byBwYXJzZSB0aGUgY2hhbGxlbmdlIGRhdGFcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImRhdGUgYmVmb3JlIGZvcm1hdDogXCIgKyBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY2hhbGxlbmdlLnN0YXJ0RGF0ZSkpO1xuXG4gICAgICAgICAgY29uc3QgY2hhbGxlbmdlID0gZGF0YS5jaGFsbGVuZ2VcbiAgICAgICAgICAgID8gbmV3IENoYWxsZW5nZSh7XG4gICAgICAgICAgICAgICAgaWQ6IGRhdGEuY2hhbGxlbmdlLmlkLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBkYXRhLmNoYWxsZW5nZS50aXRsZSxcbiAgICAgICAgICAgICAgICBzdWJ0aXRsZTogZGF0YS5jaGFsbGVuZ2Uuc3VidGl0bGUsXG4gICAgICAgICAgICAgICAgcGFydGljaXBhbnRzOiBkYXRhLmNoYWxsZW5nZS5wYXJ0aWNpcGFudHMgfHwgW10sXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBkYXRhLmNoYWxsZW5nZS5zdGF0dXMgYXMgQ2hhbGxlbmdlU3RhdHVzLFxuICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZTogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUpLFxuICAgICAgICAgICAgICAgIGVuZERhdGU6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5jaGFsbGVuZ2UuZW5kRGF0ZSksXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY2hhbGxlbmdlLmNyZWF0ZWRBdCksXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY2hhbGxlbmdlLnVwZGF0ZWRBdCksXG4gICAgICAgICAgICAgICAgaW50cm9WaWRlb3M6IChkYXRhLmNoYWxsZW5nZS5pbnRyb1ZpZGVvcyB8fCBbXSkubWFwKCh2OiBhbnkpID0+IFxuICAgICAgICAgICAgICAgICAgbmV3IEludHJvVmlkZW8oe1xuICAgICAgICAgICAgICAgICAgICBpZDogdi5pZCxcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiB2LnVzZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgdmlkZW9Vcmw6IHYudmlkZW9VcmxcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgIC4uLmRhdGEsXG4gICAgICAgICAgICBjaGFsbGVuZ2UsXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5jcmVhdGVkQXQpLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEudXBkYXRlZEF0KSxcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ0FsbCBjaGFsbGVuZ2VzIGFmdGVyIHByb2Nlc3Npbmc6JywgSlNPTi5zdHJpbmdpZnkoYWxsQ2hhbGxlbmdlcywgbnVsbCwgMikpO1xuICAgIFxuICAgICAgICAvLyBGaWx0ZXIgZm9yIGFjdGl2ZSBjaGFsbGVuZ2VzIChlbmREYXRlID4gY3VycmVudCBkYXRlKVxuICAgICAgICBjb25zdCBhY3RpdmVDaGFsbGVuZ2VzID0gYWxsQ2hhbGxlbmdlcy5maWx0ZXIodXNlckNoYWxsZW5nZSA9PiB7XG4gICAgICAgICAgY29uc3QgZW5kRGF0ZSA9IHVzZXJDaGFsbGVuZ2UuY2hhbGxlbmdlPy5lbmREYXRlO1xuICAgIFxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFxuICAgICAgICAgIC8vICAgYEV2YWx1YXRpbmcgY2hhbGxlbmdlIElEOiAke3VzZXJDaGFsbGVuZ2UuaWR9LCBFbmQgRGF0ZTogJHtlbmREYXRlfSwgQ3VycmVudCBEYXRlOiAke25ldyBEYXRlKCl9YFxuICAgICAgICAgIC8vICk7XG4gICAgXG4gICAgICAgICAgcmV0dXJuIGVuZERhdGUgJiYgZW5kRGF0ZSA+IG5ldyBEYXRlKCk7XG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgVG90YWwgYWN0aXZlIGNoYWxsZW5nZXM6ICR7YWN0aXZlQ2hhbGxlbmdlcy5sZW5ndGh9YCwgYWN0aXZlQ2hhbGxlbmdlcyk7XG4gICAgXG4gICAgICAgIHJldHVybiBhY3RpdmVDaGFsbGVuZ2VzO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYWN0aXZlIGNoYWxsZW5nZXM6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gICAgXG5cbiAgLyoqXG4gICAqIEZldGNoIHVzZXIgY2hhbGxlbmdlcyBieSB1c2VySWQuXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSByZXNvbHZpbmcgdG8gYW4gYXJyYXkgb2YgY2hhbGxlbmdlcy5cbiAgICogQHRocm93cyBJZiBubyB1c2VyIGlzIHNpZ25lZCBpbiBvciBpZiB0aGUgRmlyZXN0b3JlIHF1ZXJ5IGZhaWxzLlxuICAgKi9cbiAgYXN5bmMgZmV0Y2hVc2VyQ2hhbGxlbmdlcygpOiBQcm9taXNlPFVzZXJDaGFsbGVuZ2VbXT4ge1xuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlclNlcnZpY2UuY3VycmVudFVzZXI7XG4gICAgaWYgKCFjdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBpcyBzaWduZWQgaW4nKTtcbiAgICB9XG5cbiAgICAvLyBSZWZlcmVuY2UgdG8gdGhlIHVzZXItY2hhbGxlbmdlIGNvbGxlY3Rpb25cbiAgICBjb25zdCB1c2VyQ2hhbGxlbmdlc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VyLWNoYWxsZW5nZScpO1xuXG4gICAgLy8gUXVlcnkgY2hhbGxlbmdlcyB3aGVyZSB1c2VySWQgbWF0Y2hlcyB0aGUgY3VycmVudCB1c2VyJ3MgSURcbiAgICBjb25zdCBxID0gcXVlcnkodXNlckNoYWxsZW5nZXNSZWYsIHdoZXJlKCd1c2VySWQnLCAnPT0nLCBjdXJyZW50VXNlci5pZCkpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcblxuICAgICAgLy8gTWFwIGRvY3VtZW50cyB0byBhbiBhcnJheSBvZiBDaGFsbGVuZ2Ugb2JqZWN0c1xuICAgICAgcmV0dXJuIHNuYXBzaG90LmRvY3MubWFwKChkb2M6IERvY3VtZW50RGF0YSkgPT4gKHtcbiAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgLi4uZG9jLmRhdGEoKSxcbiAgICAgIH0pKSBhcyBVc2VyQ2hhbGxlbmdlW107XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgY2hhbGxlbmdlczonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCB1c2VyIGNoYWxsZW5nZXMnKTtcbiAgICB9XG4gIH1cbiAgXG4gIC8vdXBkYXRlIHRoZSB3b3Jrb3V0IHN1bW1hcnksXG4gIGFzeW5jIHVwZGF0ZVdvcmtvdXRTdW1tYXJ5KHtcbiAgICB1c2VySWQsXG4gICAgd29ya291dElkLFxuICAgIHN1bW1hcnlcbiAgfToge1xuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIHdvcmtvdXRJZDogc3RyaW5nLFxuICAgIHN1bW1hcnk6IFdvcmtvdXRTdW1tYXJ5XG4gIH0pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIElEIHByb3ZpZGVkJyk7XG4gICAgfVxuICBcbiAgICB0cnkge1xuICAgICAgLy8gQ3JlYXRlIGEgcmVmZXJlbmNlIHRvIHRoZSBjb2xsZWN0aW9uXG4gICAgICBjb25zdCBzdW1tYXJ5UmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VySWQsICd3b3Jrb3V0U3VtbWFyeScsIHN1bW1hcnkuaWQpO1xuICBcbiAgICAgIC8vIENvbnZlcnQgc3VtbWFyeSB0byBhIHBsYWluIG9iamVjdCBmb3IgRmlyZXN0b3JlXG4gICAgICBjb25zdCBzdW1tYXJ5RGF0YSA9IHtcbiAgICAgICAgaWQ6IHN1bW1hcnkuaWQsXG4gICAgICAgIHdvcmtvdXRJZDogc3VtbWFyeS53b3Jrb3V0SWQsXG4gICAgICAgIGV4ZXJjaXNlczogc3VtbWFyeS5leGVyY2lzZXMsXG4gICAgICAgIGJvZHlQYXJ0czogc3VtbWFyeS5ib2R5UGFydHMsXG4gICAgICAgIHNlY29uZGFyeUJvZHlQYXJ0czogc3VtbWFyeS5zZWNvbmRhcnlCb2R5UGFydHMsXG4gICAgICAgIHdvcmtvdXRUaXRsZTogc3VtbWFyeS53b3Jrb3V0VGl0bGUsXG4gICAgICAgIGNhbG9yaWVzQnVybmVkOiBzdW1tYXJ5LmNhbG9yaWVzQnVybmVkLFxuICAgICAgICB3b3Jrb3V0UmF0aW5nOiBzdW1tYXJ5LndvcmtvdXRSYXRpbmcsXG4gICAgICAgIGV4ZXJjaXNlc0NvbXBsZXRlZDogc3VtbWFyeS5leGVyY2lzZXNDb21wbGV0ZWQsXG4gICAgICAgIGFpSW5zaWdodDogc3VtbWFyeS5haUluc2lnaHQsXG4gICAgICAgIHJlY29tbWVuZGF0aW9uczogc3VtbWFyeS5yZWNvbW1lbmRhdGlvbnMsXG4gICAgICAgIGdpZlVSTHM6IHN1bW1hcnkuZ2lmVVJMcyxcbiAgICAgICAgcmVjb21tZW5kZWRXb3JrOiBzdW1tYXJ5LnJlY29tbWVuZGVkV29yayxcbiAgICAgICAgaXNDb21wbGV0ZWQ6IHN1bW1hcnkuaXNDb21wbGV0ZWQsXG4gICAgICAgIGNyZWF0ZWRBdDogc3VtbWFyeS5jcmVhdGVkQXQsXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgY29tcGxldGVkQXQ6IHN1bW1hcnkuY29tcGxldGVkQXQsXG4gICAgICAgIGR1cmF0aW9uOiBzdW1tYXJ5LmR1cmF0aW9uXG4gICAgICB9O1xuICBcbiAgICAgIC8vIFNldCBkYXRhIHdpdGggbWVyZ2UgZW5hYmxlZCAoZXF1aXZhbGVudCB0byBTd2lmdCdzIHNldERhdGEgd2l0aCBtZXJnZTogdHJ1ZSlcbiAgICAgIGF3YWl0IHNldERvYyhzdW1tYXJ5UmVmLCBzdW1tYXJ5RGF0YSwgeyBtZXJnZTogdHJ1ZSB9KTtcbiAgXG4gICAgICBjb25zb2xlLmxvZygnV29ya291dCBzdW1tYXJ5IGRvY3VtZW50IHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHdvcmtvdXQgc3VtbWFyeTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVXb3Jrb3V0TG9ncyh7XG4gICAgdXNlcklkLFxuICAgIHdvcmtvdXRJZCwgXG4gICAgbG9nc1xuICB9OiB7XG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgd29ya291dElkOiBzdHJpbmcsIFxuICAgIGxvZ3M6IEV4ZXJjaXNlTG9nW11cbiAgfSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB3b3Jrb3V0UmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VySWQsICd3b3Jrb3V0U2Vzc2lvbnMnLCB3b3Jrb3V0SWQpO1xuICAgICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24od29ya291dFJlZiwgJ2xvZ3MnKTtcbiAgICAgIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XG4gICAgICBcbiAgICAgIGxvZ3MuZm9yRWFjaChsb2cgPT4ge1xuICAgICAgICBjb25zdCBsb2dEb2NSZWYgPSBkb2MobG9nc1JlZiwgbG9nLmlkKTtcbiAgICAgICAgYmF0Y2gudXBkYXRlKGxvZ0RvY1JlZiwge1xuICAgICAgICAgIC4uLmxvZy50b0RpY3Rpb25hcnkoKVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICBcbiAgICAgIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB3b3Jrb3V0IGxvZ3M6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gVGhlIGNhbmNlbFdvcmtvdXQgbWV0aG9kIOKAkyBpdCBkZWxldGVzIHRoZSB3b3Jrb3V0IHNlc3Npb24gYW5kIHN1bW1hcnkgKGlmIGFueSksXG4vLyBjbGVhbnMgdXAgdGhlIGxvY2FsIHN0YXRlLCBhbmQgbG9ncyB0aGUgY2FuY2VsbGF0aW9uLlxuYXN5bmMgY2FuY2VsV29ya291dCh3b3Jrb3V0OiBXb3Jrb3V0LCB3b3Jrb3V0U3VtbWFyeTogV29ya291dFN1bW1hcnkgfCBudWxsKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7ICAgIFxuICAgICAgYXdhaXQgdGhpcy5kZWxldGVXb3Jrb3V0U2Vzc2lvbih3b3Jrb3V0LmlkKTtcbiAgICAgIGlmICh3b3Jrb3V0U3VtbWFyeSkge1xuICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZVdvcmtvdXRTdW1tYXJ5KHdvcmtvdXRTdW1tYXJ5LmlkKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhpcy5jbGVhblVwV29ya291dEluUHJvZ3Jlc3MoKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiV29ya291dCBjYW5jZWxlZCBhbmQgY2xlYW5lZCB1cCBzdWNjZXNzZnVsbHkuXCIpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjYW5jZWxpbmcgd29ya291dDpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG4gIFxuLy8gRGVsZXRlcyBhIHdvcmtvdXQgc2Vzc2lvbiBkb2N1bWVudCBhbmQgYWxsIGl0cyBzdWJjb2xsZWN0aW9uIFwibG9nc1wiXG5hc3luYyBkZWxldGVXb3Jrb3V0U2Vzc2lvbih3b3Jrb3V0SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoIXVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyPy5pZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXIgbm90IGF1dGhlbnRpY2F0ZWQuXCIpO1xuICB9XG4gIGNvbnN0IHVzZXJJZCA9IHVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyLmlkO1xuICBjb25zdCB3b3Jrb3V0UmVmID0gZG9jKGRiLCBcInVzZXJzXCIsIHVzZXJJZCwgXCJ3b3Jrb3V0U2Vzc2lvbnNcIiwgd29ya291dElkKTtcbiAgXG4gIHRyeSB7XG4gICAgLy8gRGVsZXRlIGFsbCBsb2dzIGluIHRoZSBzdWJjb2xsZWN0aW9uXG4gICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24od29ya291dFJlZiwgXCJsb2dzXCIpO1xuICAgIGNvbnN0IGxvZ3NTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MobG9nc1JlZik7XG4gICAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcbiAgICBcbiAgICBsb2dzU25hcHNob3QuZG9jcy5mb3JFYWNoKChsb2dEb2MpID0+IHtcbiAgICAgIGJhdGNoLmRlbGV0ZShsb2dEb2MucmVmKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBEZWxldGUgdGhlIG1haW4gd29ya291dCBkb2N1bWVudFxuICAgIGJhdGNoLmRlbGV0ZSh3b3Jrb3V0UmVmKTtcbiAgICBcbiAgICBhd2FpdCBiYXRjaC5jb21taXQoKTtcbiAgICBjb25zb2xlLmxvZyhcIldvcmtvdXQgc2Vzc2lvbiBhbmQgbG9ncyBkZWxldGVkIHN1Y2Nlc3NmdWxseS5cIik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGRlbGV0aW5nIHdvcmtvdXQgc2Vzc2lvbjpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbiAgLy8gRGVsZXRlcyB0aGUgd29ya291dCBzdW1tYXJ5IGRvY3VtZW50LlxuICBhc3luYyBkZWxldGVXb3Jrb3V0U3VtbWFyeSh3b3Jrb3V0U3VtbWFyeUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXdvcmtvdXRTdW1tYXJ5SWQgfHwgIXVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyPy5pZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3VtbWFyeVJlZiA9IGRvYyhkYiwgXCJ1c2Vyc1wiLCB1c2VyU2VydmljZS5jdXJyZW50VXNlci5pZCwgXCJ3b3Jrb3V0U3VtbWFyeVwiLCB3b3Jrb3V0U3VtbWFyeUlkKTtcbiAgICAgIGF3YWl0IGRlbGV0ZURvYyhzdW1tYXJ5UmVmKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiV29ya291dCBzdW1tYXJ5IGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5LlwiKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGRlbGV0aW5nIHdvcmtvdXQgc3VtbWFyeTpcIiwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gQ2xlYW4gdXAgbG9jYWwgc3RvcmFnZSBhbmQgaW4tbWVtb3J5IHdvcmtvdXQgc3RhdGUuXG4gICAgY2xlYW5VcFdvcmtvdXRJblByb2dyZXNzKCk6IHZvaWQge1xuICAgICAgc3RvcmUuZGlzcGF0Y2gocmVzZXRXb3Jrb3V0U3RhdGUoKSk7XG4gICAgfVxuICAgICAgXG4gIFxuICAvKipcbiAgICogRmV0Y2ggdGhlIHdvcmtvdXQgc2Vzc2lvbiBmcm9tIEZpcmVzdG9yZSwgcmV0dXJuaW5nIHsgd29ya291dCwgbG9ncyB9LlxuICAgKiBDaGVja3MgZmlyc3QgZm9yIGEgUXVldWVkVXAgc2Vzc2lvbiwgdGhlbiBmb3IgSW5Qcm9ncmVzcy5cbiAgICovXG4gIGFzeW5jIGZldGNoQ3VycmVudFdvcmtvdXRTZXNzaW9uKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx7XG4gICAgd29ya291dDogV29ya291dCB8IG51bGw7XG4gICAgbG9nczogRXhlcmNpc2VMb2dbXSB8IG51bGw7XG4gICB9PiB7XG4gICAgaWYgKCF1c2VySWQpIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBJRCBwcm92aWRlZCcpO1xuICAgXG4gICAgY29uc3QgZXhlcmNpc2VTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlcycpKTtcbiAgICBjb25zdCB2aWRlb1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VWaWRlb3MnKSk7XG4gICBcbiAgICBjb25zdCBleGVyY2lzZVZpZGVvcyA9IHZpZGVvU25hcHNob3QuZG9jcy5tYXAoKGRvYykgPT4gXG4gICAgICBFeGVyY2lzZVZpZGVvLmZyb21GaXJlYmFzZSh7XG4gICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgIC4uLmRvYy5kYXRhKClcbiAgICAgIH0pXG4gICAgKTtcbiAgIFxuICAgIGNvbnN0IGV4ZXJjaXNlc1dpdGhWaWRlb3MgPSBleGVyY2lzZVNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiB7XG4gICAgICBjb25zdCBleGVyY2lzZSA9IEV4ZXJjaXNlLmZyb21GaXJlYmFzZSh7XG4gICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgIC4uLmRvYy5kYXRhKClcbiAgICAgIH0pO1xuICAgXG4gICAgICBjb25zdCBtYXRjaGluZ1ZpZGVvcyA9IGV4ZXJjaXNlVmlkZW9zLmZpbHRlcihcbiAgICAgICAgKHZpZGVvKSA9PiB2aWRlby5leGVyY2lzZS50b0xvd2VyQ2FzZSgpID09PSBleGVyY2lzZS5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICk7XG4gICBcbiAgICAgIHJldHVybiBuZXcgRXhlcmNpc2Uoe1xuICAgICAgICAuLi5leGVyY2lzZSxcbiAgICAgICAgdmlkZW9zOiBtYXRjaGluZ1ZpZGVvc1xuICAgICAgfSk7XG4gICAgfSk7XG4gICBcbiAgICBjb25zdCB3b3Jrb3V0U2Vzc2lvbnNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCB1c2VySWQsICd3b3Jrb3V0U2Vzc2lvbnMnKTtcbiAgIFxuICAgIGxldCBxID0gcXVlcnkod29ya291dFNlc3Npb25zUmVmLCB3aGVyZSgnc3RhdHVzJywgJz09JywgV29ya291dFN0YXR1cy5RdWV1ZWRVcCkpO1xuICAgIGxldCBzbmFwID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgIFxuICAgIGlmICghc25hcC5lbXB0eSkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc1dvcmtvdXRTZXNzaW9uRG9jdW1lbnQoc25hcC5kb2NzWzBdLCBleGVyY2lzZXNXaXRoVmlkZW9zKTtcbiAgICB9XG4gICBcbiAgICBxID0gcXVlcnkod29ya291dFNlc3Npb25zUmVmLCB3aGVyZSgnc3RhdHVzJywgJz09JywgV29ya291dFN0YXR1cy5JblByb2dyZXNzKSk7XG4gICAgc25hcCA9IGF3YWl0IGdldERvY3MocSk7XG4gICBcbiAgICBpZiAoIXNuYXAuZW1wdHkpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NXb3Jrb3V0U2Vzc2lvbkRvY3VtZW50KHNuYXAuZG9jc1swXSwgZXhlcmNpc2VzV2l0aFZpZGVvcyk7XG4gICAgfVxuICAgXG4gICAgcmV0dXJuIHsgd29ya291dDogbnVsbCwgbG9nczogbnVsbCB9O1xuICAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZmV0Y2hBbmRNYXBFeGVyY2lzZXNXaXRoVmlkZW9zKCk6IFByb21pc2U8RXhlcmNpc2VbXT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnU3RhcnRpbmcgZmV0Y2hBbmRNYXBFeGVyY2lzZXNXaXRoVmlkZW9zJyk7XG4gIFxuICAgICAgLy8gMS4gRmV0Y2ggYWxsIGV4ZXJjaXNlcyBcbiAgICAgIGNvbnN0IGV4ZXJjaXNlU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZXMnKSk7XG4gICAgICBjb25zdCBleGVyY2lzZXMgPSBleGVyY2lzZVNuYXBzaG90LmRvY3MubWFwKChkb2MpID0+IFxuICAgICAgICBFeGVyY2lzZS5mcm9tRmlyZWJhc2Uoe1xuICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgLi4uZG9jLmRhdGEoKVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGBGZXRjaGVkICR7ZXhlcmNpc2VzLmxlbmd0aH0gZXhlcmNpc2VzYCk7XG4gIFxuICAgICAgLy8gMi4gRmV0Y2ggYWxsIHZpZGVvc1xuICAgICAgY29uc3QgdmlkZW9TbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlVmlkZW9zJykpO1xuICAgICAgY29uc3QgZXhlcmNpc2VWaWRlb3MgPSB2aWRlb1NuYXBzaG90LmRvY3MubWFwKChkb2MpID0+IFxuICAgICAgICBFeGVyY2lzZVZpZGVvLmZyb21GaXJlYmFzZSh7XG4gICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAuLi5kb2MuZGF0YSgpXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgLy8gY29uc29sZS5sb2coYEZldGNoZWQgJHtleGVyY2lzZVZpZGVvcy5sZW5ndGh9IGV4ZXJjaXNlIHZpZGVvc2ApO1xuICBcbiAgICAgIC8vIDMuIE1hcCB2aWRlb3MgdG8gZXhlcmNpc2VzXG4gICAgICBjb25zdCBleGVyY2lzZXNXaXRoVmlkZW9zID0gZXhlcmNpc2VzLm1hcChleGVyY2lzZSA9PiB7XG4gICAgICAgIGNvbnN0IG1hdGNoaW5nVmlkZW9zID0gZXhlcmNpc2VWaWRlb3MuZmlsdGVyKFxuICAgICAgICAgICh2aWRlbykgPT4gdmlkZW8uZXhlcmNpc2UudG9Mb3dlckNhc2UoKSA9PT0gZXhlcmNpc2UubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICk7XG4gICAgICAgXG4gICAgICAgIHJldHVybiBuZXcgRXhlcmNpc2Uoe1xuICAgICAgICAgIC4uLmV4ZXJjaXNlLFxuICAgICAgICAgIHZpZGVvczogbWF0Y2hpbmdWaWRlb3NcbiAgICAgICAgfSk7XG4gICAgICAgfSk7XG4gIFxuICAgICAgLy8gY29uc29sZS5sb2coJ0ZpbmlzaGVkIG1hcHBpbmcgZXhlcmNpc2VzIHdpdGggdmlkZW9zJyk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhgVG90YWwgZXhlcmNpc2VzIHdpdGggdmlkZW9zOiAke2V4ZXJjaXNlc1dpdGhWaWRlb3MubGVuZ3RofWApO1xuICAgICAgICBcbiAgICAgIHJldHVybiBleGVyY2lzZXNXaXRoVmlkZW9zO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhbmQgbWFwcGluZyBleGVyY2lzZXMgd2l0aCB2aWRlb3M6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciB0byBidWlsZCB0aGUgV29ya291dCBvYmplY3QgKyBhbnkgbG9ncyBmcm9tIHRoZSBzbmFwc2hvdC5cbiAgICovXG4gIGFzeW5jIGZldGNoQWxsV29ya291dFNlc3Npb25zKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx7XG4gICAgd29ya291dDogV29ya291dCB8IG51bGw7XG4gICAgbG9nczogRXhlcmNpc2VMb2dbXSB8IG51bGw7XG4gICB9W10+IHtcbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIElEIHByb3ZpZGVkJyk7XG4gICAgfVxuICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGV4ZXJjaXNlU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZXMnKSk7XG4gICAgICBjb25zdCBleGVyY2lzZXMgPSBleGVyY2lzZVNuYXBzaG90LmRvY3MubWFwKChkb2MpID0+IFxuICAgICAgICBFeGVyY2lzZS5mcm9tRmlyZWJhc2Uoe1xuICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgLi4uZG9jLmRhdGEoKVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgIFxuICAgICAgY29uc3QgdmlkZW9TbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlVmlkZW9zJykpO1xuICAgICAgY29uc3QgZXhlcmNpc2VWaWRlb3MgPSB2aWRlb1NuYXBzaG90LmRvY3MubWFwKChkb2MpID0+IFxuICAgICAgICBFeGVyY2lzZVZpZGVvLmZyb21GaXJlYmFzZSh7XG4gICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAuLi5kb2MuZGF0YSgpXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgXG4gICAgICBjb25zdCBleGVyY2lzZXNXaXRoVmlkZW9zID0gZXhlcmNpc2VzLm1hcChleGVyY2lzZSA9PiB7XG4gICAgICAgIGNvbnN0IG1hdGNoaW5nVmlkZW9zID0gZXhlcmNpc2VWaWRlb3MuZmlsdGVyKFxuICAgICAgICAgICh2aWRlbykgPT4gdmlkZW8uZXhlcmNpc2UudG9Mb3dlckNhc2UoKSA9PT0gZXhlcmNpc2UubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICk7XG4gICBcbiAgICAgICAgcmV0dXJuIG5ldyBFeGVyY2lzZSh7XG4gICAgICAgICAgLi4uZXhlcmNpc2UsXG4gICAgICAgICAgdmlkZW9zOiBtYXRjaGluZ1ZpZGVvc1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgXG4gICAgICBjb25zdCB3b3Jrb3V0U2Vzc2lvbnNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCB1c2VySWQsICd3b3Jrb3V0U2Vzc2lvbnMnKTtcbiAgICAgIGNvbnN0IHNuYXAgPSBhd2FpdCBnZXREb2NzKHdvcmtvdXRTZXNzaW9uc1JlZik7XG4gICBcbiAgICAgIGlmIChzbmFwLmVtcHR5KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdObyB3b3Jrb3V0IHNlc3Npb25zIGZvdW5kIGZvciB1c2VyJyk7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgIFxuICAgICAgY29uc3Qgc2Vzc2lvbnMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgc25hcC5kb2NzLm1hcChhc3luYyAoZG9jKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc2Vzc2lvbkRhdGEgPSBhd2FpdCB0aGlzLnByb2Nlc3NXb3Jrb3V0U2Vzc2lvbkRvY3VtZW50KFxuICAgICAgICAgICAgZG9jLCBcbiAgICAgICAgICAgIGV4ZXJjaXNlc1dpdGhWaWRlb3NcbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChzZXNzaW9uRGF0YS5sb2dzKSB7XG4gICAgICAgICAgICBzZXNzaW9uRGF0YS5sb2dzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgY29uc3Qgb3JkZXJBID0gYS5vcmRlciA/PyAwO1xuICAgICAgICAgICAgICBjb25zdCBvcmRlckIgPSBiLm9yZGVyID8/IDA7XG4gICAgICAgICAgICAgIHJldHVybiBvcmRlckEgLSBvcmRlckI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICBcbiAgICAgICAgICByZXR1cm4gc2Vzc2lvbkRhdGE7XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgXG4gICAgICByZXR1cm4gc2Vzc2lvbnM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHdvcmtvdXQgc2Vzc2lvbnM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNvbGxlY3Rpb24oY29sbGVjdGlvbjogU3dlYXRsaXN0Q29sbGVjdGlvbik6IFByb21pc2U8U3dlYXRsaXN0Q29sbGVjdGlvbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb2xsUmVmID0gZnNDb2xsZWN0aW9uKGRiLCBcInN3ZWF0bGlzdC1jb2xsZWN0aW9uXCIpO1xuICBcbiAgICAgIC8vIElmIGNvbGxlY3Rpb24uaWQgaXMgZW1wdHksIGdlbmVyYXRlIGEgbmV3IGRvYyBJRCBhbmQgYXNzaWduIGl0LlxuICAgICAgaWYgKCFjb2xsZWN0aW9uLmlkIHx8IGNvbGxlY3Rpb24uaWQudHJpbSgpID09PSBcIlwiKSB7XG4gICAgICAgIGNvbnN0IG5ld0RvY1JlZiA9IGRvYyhjb2xsUmVmKTtcbiAgICAgICAgY29sbGVjdGlvbi5pZCA9IG5ld0RvY1JlZi5pZDtcbiAgICAgIH1cbiAgXG4gICAgICAvLyBFbnN1cmUgdGhlIGNoYWxsZW5nZSBpZCBtYXRjaGVzIHRoZSBjb2xsZWN0aW9uIGlkLlxuICAgICAgaWYgKGNvbGxlY3Rpb24uY2hhbGxlbmdlKSB7XG4gICAgICAgIGNvbGxlY3Rpb24uY2hhbGxlbmdlLmlkID0gY29sbGVjdGlvbi5pZDtcbiAgICAgIH1cbiAgXG4gICAgICAvLyBVcGRhdGUgdGhlIHVwZGF0ZWRBdCBmaWVsZC5cbiAgICAgIGNvbGxlY3Rpb24udXBkYXRlZEF0ID0gbmV3IERhdGUoKTtcbiAgXG4gICAgICAvLyBTYXZlIHRoZSBjb2xsZWN0aW9uIHRvIEZpcmVzdG9yZS5cbiAgICAgIGF3YWl0IHNldERvYyhkb2MoY29sbFJlZiwgY29sbGVjdGlvbi5pZCksIGNvbGxlY3Rpb24udG9EaWN0aW9uYXJ5KCkpO1xuICAgICAgY29uc29sZS5sb2coXCJDb2xsZWN0aW9uIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgcmV0dXJuIGNvbGxlY3Rpb247XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGRhdGluZyBjb2xsZWN0aW9uIGRvY3VtZW50OlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciB3aGlsZSB1cGRhdGluZyB0aGUgY29sbGVjdGlvblwiKTtcbiAgICB9XG4gIH1cbiAgXG4gIHByaXZhdGUgYXN5bmMgcHJvY2Vzc1dvcmtvdXRTZXNzaW9uRG9jdW1lbnQoXG4gICAgd29ya291dERvYzogUXVlcnlEb2N1bWVudFNuYXBzaG90PERvY3VtZW50RGF0YT4sXG4gICAgZXhlcmNpc2VzV2l0aFZpZGVvczogRXhlcmNpc2VbXVxuICApOiBQcm9taXNlPHsgd29ya291dDogV29ya291dDsgbG9nczogRXhlcmNpc2VMb2dbXSB9PiB7XG4gICAgY29uc3QgZGF0YSA9IHdvcmtvdXREb2MuZGF0YSgpO1xuICBcbiAgICAvLyBNYXAgZXhlcmNpc2VzIHdpdGggdGhlaXIgZnVsbCBkYXRhIGFuZCB2aWRlb3NcbiAgICBjb25zdCBtYXBwZWRFeGVyY2lzZXMgPSAoZGF0YS5leGVyY2lzZXMgfHwgW10pLm1hcCgoZXhlcmNpc2VSZWY6IGFueSkgPT4ge1xuICAgICAgLy8gRmluZCB0aGUgZnVsbCBleGVyY2lzZSB3aXRoIHZpZGVvc1xuICAgICAgY29uc3QgZXhlcmNpc2VOYW1lTG93ZXIgPSBleGVyY2lzZVJlZi5leGVyY2lzZT8ubmFtZT8udG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgICBjb25zdCBmdWxsRXhlcmNpc2UgPSBleGVyY2lzZXNXaXRoVmlkZW9zLmZpbmQoXG4gICAgICAgIGV4ID0+IGV4Lm5hbWUudG9Mb3dlckNhc2UoKS50cmltKCkgPT09IGV4ZXJjaXNlTmFtZUxvd2VyXG4gICAgICApO1xuICBcbiAgICAgIC8vIElmIGZ1bGwgZXhlcmNpc2UgZm91bmQsIHJldHVybiBpdCwgb3RoZXJ3aXNlIHVzZSB0aGUgb3JpZ2luYWxcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmV4ZXJjaXNlUmVmLFxuICAgICAgICBleGVyY2lzZTogZnVsbEV4ZXJjaXNlIHx8IGV4ZXJjaXNlUmVmLmV4ZXJjaXNlXG4gICAgICB9O1xuICAgIH0pO1xuICBcbiAgICAvLyBDcmVhdGUgdGhlIHdvcmtvdXQgd2l0aCBtYXBwZWQgZXhlcmNpc2VzXG4gICAgY29uc3Qgd29ya291dCA9IG5ldyBXb3Jrb3V0KHtcbiAgICAgIGlkOiB3b3Jrb3V0RG9jLmlkLFxuICAgICAgcm91bmRXb3Jrb3V0SWQ6IGRhdGEucm91bmRXb3Jrb3V0SWQgfHwgJycsXG4gICAgICBleGVyY2lzZXM6IG1hcHBlZEV4ZXJjaXNlcyxcbiAgICAgIHRpdGxlOiBkYXRhLnRpdGxlIHx8ICcnLFxuICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICBkdXJhdGlvbjogZGF0YS5kdXJhdGlvbiB8fCAwLFxuICAgICAgdXNlQXV0aG9yQ29udGVudDogZGF0YS51c2VBdXRob3JDb250ZW50IHx8IGZhbHNlLFxuICAgICAgaXNDb21wbGV0ZWQ6IGRhdGEuaXNDb21wbGV0ZWQgfHwgZmFsc2UsXG4gICAgICB3b3Jrb3V0U3RhdHVzOiBkYXRhLndvcmtvdXRTdGF0dXMgfHwgV29ya291dFN0YXR1cy5BcmNoaXZlZCxcbiAgICAgIGF1dGhvcjogZGF0YS5hdXRob3IgfHwgJycsXG4gICAgICBjcmVhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5jcmVhdGVkQXQpLFxuICAgICAgdXBkYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEudXBkYXRlZEF0KSxcbiAgICAgIHN0YXJ0VGltZTogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLnN0YXJ0VGltZSksXG4gICAgICBjb2xsZWN0aW9uSWQ6IGRhdGEuY29sbGVjdGlvbklkLFxuICAgICAgY2hhbGxlbmdlOiBkYXRhLmNoYWxsZW5nZSxcbiAgICAgIGxvZ3M6IChkYXRhLmxvZ3MgfHwgW10pLm1hcCgobG9nRGF0YTogYW55KSA9PiB7XG4gICAgICAgIC8vIE1hcCBsb2dzIHdpdGggZnVsbCBleGVyY2lzZXNcbiAgICAgICAgY29uc3QgZXhlcmNpc2VOYW1lTG93ZXIgPSBsb2dEYXRhLmV4ZXJjaXNlPy5uYW1lPy50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICAgICAgY29uc3QgZnVsbEV4ZXJjaXNlID0gZXhlcmNpc2VzV2l0aFZpZGVvcy5maW5kKFxuICAgICAgICAgIGV4ID0+IGV4Lm5hbWUudG9Mb3dlckNhc2UoKS50cmltKCkgPT09IGV4ZXJjaXNlTmFtZUxvd2VyXG4gICAgICAgICk7XG4gIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmxvZ0RhdGEsXG4gICAgICAgICAgZXhlcmNpc2U6IGZ1bGxFeGVyY2lzZSB8fCBsb2dEYXRhLmV4ZXJjaXNlXG4gICAgICAgIH07XG4gICAgICB9KSxcbiAgICAgIHdvcmtvdXRSYXRpbmc6IGRhdGEud29ya291dFJhdGluZyxcbiAgICAgIG9yZGVyOiBkYXRhLm9yZGVyLFxuICAgICAgem9uZTogZGF0YS56b25lIHx8IEJvZHlab25lLkZ1bGxCb2R5XG4gICAgfSk7XG4gIFxuICAgIGNvbnNvbGUubG9nKFwiVGhlIFdvcmtvdXQgSUQgaXM6IFwiICsgd29ya291dC5pZCk7XG4gICAgLy8gRmV0Y2ggbG9ncyBmcm9tIHN1YmNvbGxlY3Rpb25cbiAgICBjb25zdCBsb2dzUmVmID0gY29sbGVjdGlvbih3b3Jrb3V0RG9jLnJlZiwgJ2xvZ3MnKTtcbiAgICBjb25zdCBsb2dzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGxvZ3NSZWYpO1xuICAgIFxuICAgIGNvbnN0IGxvZ3M6IEV4ZXJjaXNlTG9nW10gPSBsb2dzU25hcHNob3QuZG9jcy5tYXAobG9nRG9jID0+IHtcbiAgICAgIGNvbnN0IGxvZ0RhdGEgPSBsb2dEb2MuZGF0YSgpO1xuICAgICAgXG4gICAgICAvLyBGaW5kIHRoZSBmdWxsIGV4ZXJjaXNlIHdpdGggdmlkZW9zXG4gICAgICBjb25zdCBleGVyY2lzZU5hbWVMb3dlciA9IGxvZ0RhdGEuZXhlcmNpc2U/Lm5hbWU/LnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgICAgY29uc3QgZnVsbEV4ZXJjaXNlID0gZXhlcmNpc2VzV2l0aFZpZGVvcy5maW5kKFxuICAgICAgICBleCA9PiBleC5uYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpID09PSBleGVyY2lzZU5hbWVMb3dlclxuICAgICAgKTtcbiAgXG4gICAgICAvLyBQcmVwYXJlIGxvZyBkYXRhIHdpdGggZnVsbCBleGVyY2lzZVxuICAgICAgY29uc3QgcHJlcGFyZWRMb2dEYXRhID0ge1xuICAgICAgICAuLi5sb2dEYXRhLFxuICAgICAgICBpZDogbG9nRG9jLmlkLFxuICAgICAgICB3b3Jrb3V0SWQ6IHdvcmtvdXQuaWQsXG4gICAgICAgIGV4ZXJjaXNlOiBmdWxsRXhlcmNpc2UgfHwgbG9nRGF0YS5leGVyY2lzZSxcbiAgICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGxvZ0RhdGEuY3JlYXRlZEF0KSxcbiAgICAgICAgdXBkYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGxvZ0RhdGEudXBkYXRlZEF0KVxuICAgICAgfTtcbiAgXG4gICAgICAvLyBVc2UgdGhlIEV4ZXJjaXNlTG9nIGNvbnN0cnVjdG9yIHRvIGVuc3VyZSBwcm9wZXIgbWFwcGluZ1xuICAgICAgcmV0dXJuIG5ldyBFeGVyY2lzZUxvZyhwcmVwYXJlZExvZ0RhdGEpO1xuICAgIH0pO1xuICBcbiAgICByZXR1cm4geyB3b3Jrb3V0LCBsb2dzIH07XG4gIH1cblxuICBhc3luYyBzYXZlV29ya291dFNlc3Npb24oe1xuICAgIHVzZXJJZCxcbiAgICB3b3Jrb3V0LFxuICAgIGxvZ3NcbiAgIH06IHtcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICB3b3Jrb3V0OiBXb3Jrb3V0LFxuICAgIGxvZ3M6IEV4ZXJjaXNlTG9nW11cbiAgIH0pOiBQcm9taXNlPFdvcmtvdXQgfCBudWxsPiB7XG4gICAgaWYgKCF1c2VySWQpIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBJRCBwcm92aWRlZCcpO1xuICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgIFxuICAgICAgY29uc3QgY2xlYW5Xb3Jrb3V0ID0gbmV3IFdvcmtvdXQoe1xuICAgICAgICAuLi53b3Jrb3V0LFxuICAgICAgICByb3VuZFdvcmtvdXRJZDogYCR7d29ya291dC5pZH0tJHtjdXJyZW50RGF0ZS5nZXRUaW1lKCl9YCxcbiAgICAgICAgd29ya291dFN0YXR1czogV29ya291dFN0YXR1cy5RdWV1ZWRVcCxcbiAgICAgICAgY3JlYXRlZEF0OiBjdXJyZW50RGF0ZSxcbiAgICAgICAgdXBkYXRlZEF0OiBjdXJyZW50RGF0ZSxcbiAgICAgICAgc3RhcnRUaW1lOiBjdXJyZW50RGF0ZSxcbiAgICAgICAgbG9nczogW11cbiAgICAgICB9KTtcbiAgIFxuICAgICAgY29uc3Qgd29ya291dFNlc3Npb25SZWYgPSBkb2MoY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgdXNlcklkLCAnd29ya291dFNlc3Npb25zJykpO1xuICAgICAgYXdhaXQgc2V0RG9jKHdvcmtvdXRTZXNzaW9uUmVmLCBjbGVhbldvcmtvdXQpO1xuICAgXG4gICAgICBjb25zdCBsb2dzUmVmID0gY29sbGVjdGlvbih3b3Jrb3V0U2Vzc2lvblJlZiwgJ2xvZ3MnKTtcbiAgICAgIGNvbnN0IGxvZ0JhdGNoID0gd3JpdGVCYXRjaChkYik7XG4gICBcbiAgICAgIGxvZ3MuZm9yRWFjaCgobG9nLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBsb2dEb2NSZWYgPSBkb2MobG9nc1JlZiwgYCR7bG9nLmlkfS0ke2N1cnJlbnREYXRlLmdldFRpbWUoKX1gKTtcbiAgICAgICAgbG9nQmF0Y2guc2V0KGxvZ0RvY1JlZiwge1xuICAgICAgICAgIGlkOiBsb2dEb2NSZWYuaWQsXG4gICAgICAgICAgd29ya291dElkOiB3b3Jrb3V0U2Vzc2lvblJlZi5pZCxcbiAgICAgICAgICBleGVyY2lzZToge1xuICAgICAgICAgICAgaWQ6IGxvZy5leGVyY2lzZS5pZCxcbiAgICAgICAgICAgIG5hbWU6IGxvZy5leGVyY2lzZS5uYW1lLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IGxvZy5leGVyY2lzZS5jYXRlZ29yeSxcbiAgICAgICAgICAgIHZpZGVvczogbG9nLmV4ZXJjaXNlLnZpZGVvcyB8fCBbXVxuICAgICAgICAgIH0sXG4gICAgICAgICAgb3JkZXI6IGluZGV4LFxuICAgICAgICAgIGNyZWF0ZWRBdDogY3VycmVudERhdGUsXG4gICAgICAgICAgdXBkYXRlZEF0OiBjdXJyZW50RGF0ZSxcbiAgICAgICAgICBsb2dTdWJtaXR0ZWQ6IGZhbHNlLFxuICAgICAgICAgIGlzQ29tcGxldGVkOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgXG4gICAgICBhd2FpdCBsb2dCYXRjaC5jb21taXQoKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIGNsZWFuV29ya291dDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHdvcmtvdXQgc2Vzc2lvbjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICB9XG5cbiAgLyoqXG4gICAqIEV4YW1wbGUgXCJqb2luIGNoYWxsZW5nZVwiIG1ldGhvZCB1c2luZyB0aGUgY2xpZW50IFNESyAobm8gYWRtaW4gcHJpdmlsZWdlcykuXG4gICAqIFRoaXMgY3JlYXRlcyBhIGRvYyBpbiBgdXNlci1jaGFsbGVuZ2VgIHdpdGggdGhlIHVzZXJJZCwgY2hhbGxlbmdlSWQsIGV0Yy5cbiAgICovXG4gIGFzeW5jIGpvaW5DaGFsbGVuZ2Uoe1xuICAgIHVzZXJuYW1lLFxuICAgIGNoYWxsZW5nZUlkXG4gIH06IHtcbiAgICB1c2VybmFtZTogc3RyaW5nO1xuICAgIGNoYWxsZW5nZUlkOiBzdHJpbmc7XG4gIH0pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyAxKSBNYWtlIHN1cmUgd2UgaGF2ZSBhIHNpZ25lZC1pbiB1c2VyXG4gICAgY29uc3QgY3VycmVudFVzZXIgPSB1c2VyU2VydmljZS5jdXJyZW50VXNlcjtcbiAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgfVxuXG4gICAgLy8gMikgRmluZCB0aGUgdXNlciBkb2MgYnkgdXNlcm5hbWVcbiAgICBjb25zdCB1c2Vyc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycpO1xuICAgIGNvbnN0IHVzZXJRdWVyeSA9IHF1ZXJ5KHVzZXJzUmVmLCB3aGVyZSgndXNlcm5hbWUnLCAnPT0nLCB1c2VybmFtZSkpO1xuICAgIGNvbnN0IHVzZXJTbmFwc2hvdCA9IGF3YWl0IGdldERvY3ModXNlclF1ZXJ5KTtcblxuICAgIGlmICh1c2VyU25hcHNob3QuZW1wdHkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBub3QgZm91bmQnKTtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyRG9jID0gdXNlclNuYXBzaG90LmRvY3NbMF07XG4gICAgY29uc3QgdXNlckRhdGEgPSB1c2VyRG9jLmRhdGEoKTtcbiAgICBjb25zdCB1c2VySWQgPSB1c2VyRG9jLmlkO1xuXG4gICAgLy8gMykgQ2hlY2sgaWYgdGhlIGNoYWxsZW5nZSBkb2MgZXhpc3RzXG4gICAgY29uc3QgY2hhbGxlbmdlUmVmID0gZG9jKGRiLCAnc3dlYXRsaXN0LWNvbGxlY3Rpb24nLCBjaGFsbGVuZ2VJZCk7XG4gICAgY29uc3QgY2hhbGxlbmdlU25hcCA9IGF3YWl0IGdldERvYyhjaGFsbGVuZ2VSZWYpO1xuXG4gICAgaWYgKCFjaGFsbGVuZ2VTbmFwLmV4aXN0cygpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NoYWxsZW5nZSBub3QgZm91bmQnKTtcbiAgICB9XG5cbiAgICBjb25zdCBjaGFsbGVuZ2UgPSBjaGFsbGVuZ2VTbmFwLmRhdGEoKTtcblxuICAgIC8vIDQpIEJ1aWxkIG5ldyB1c2VyLWNoYWxsZW5nZSBkb2N1bWVudFxuICAgIGNvbnN0IHVzZXJDaGFsbGVuZ2VJZCA9IGAke2NoYWxsZW5nZUlkfS0ke3VzZXJJZH0tJHtEYXRlLm5vdygpfWA7XG4gICAgY29uc3QgdXNlckNoYWxsZW5nZURhdGEgPSB7XG4gICAgICBpZDogdXNlckNoYWxsZW5nZUlkLFxuICAgICAgY2hhbGxlbmdlOiBjaGFsbGVuZ2UsXG4gICAgICBjaGFsbGVuZ2VJZCxcbiAgICAgIHVzZXJJZCxcbiAgICAgIGZjbVRva2VuOiB1c2VyRGF0YS5mY21Ub2tlbiB8fCAnJyxcbiAgICAgIHByb2ZpbGVJbWFnZTogdXNlckRhdGEucHJvZmlsZUltYWdlIHx8IHt9LFxuICAgICAgcHJvZ3Jlc3M6IDAsXG4gICAgICBjb21wbGV0ZWRXb3Jrb3V0czogW10sXG4gICAgICBpc0NvbXBsZXRlZDogZmFsc2UsXG4gICAgICB1aWQ6IHVzZXJJZCxcbiAgICAgIGxvY2F0aW9uOiB1c2VyRGF0YS5sb2NhdGlvbiB8fCBudWxsLFxuICAgICAgY2l0eTogJycsXG4gICAgICBjb3VudHJ5OiAnJyxcbiAgICAgIHRpbWV6b25lOiAnJyxcbiAgICAgIHVzZXJuYW1lLFxuICAgICAgam9pbkRhdGU6IG5ldyBEYXRlKCksXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBwdWxzZVBvaW50czoge1xuICAgICAgICBiYXNlQ29tcGxldGlvbjogMCxcbiAgICAgICAgZmlyc3RDb21wbGV0aW9uOiAwLFxuICAgICAgICBzdHJlYWtCb251czogMCxcbiAgICAgICAgY2hlY2tJbkJvbnVzOiAwLFxuICAgICAgICBlZmZvcnRSYXRpbmc6IDAsXG4gICAgICAgIGNoYXRQYXJ0aWNpcGF0aW9uOiAwLFxuICAgICAgICBsb2NhdGlvbkNoZWNraW46IDAsXG4gICAgICAgIGNvbnRlbnRFbmdhZ2VtZW50OiAwLFxuICAgICAgICBlbmNvdXJhZ2VtZW50U2VudDogMCxcbiAgICAgICAgZW5jb3VyYWdlbWVudFJlY2VpdmVkOiAwXG4gICAgICB9LFxuICAgICAgY3VycmVudFN0cmVhazogMCxcbiAgICAgIGVuY291cmFnZWRVc2VyczogW10sXG4gICAgICBlbmNvdXJhZ2VkQnlVc2VyczogW10sXG4gICAgICBjaGVja0luczogW11cbiAgICB9O1xuXG4gICAgLy8gNSkgU3RvcmUgdXNlci1jaGFsbGVuZ2UgZG9jXG4gICAgYXdhaXQgc2V0RG9jKGRvYyhkYiwgJ3VzZXItY2hhbGxlbmdlJywgdXNlckNoYWxsZW5nZUlkKSwgdXNlckNoYWxsZW5nZURhdGEpO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCB3b3Jrb3V0U2VydmljZSA9IG5ldyBXb3Jrb3V0U2VydmljZSgpOyJdLCJuYW1lcyI6WyJjb2xsZWN0aW9uIiwiZG9jIiwiZ2V0RG9jcyIsImdldERvYyIsInF1ZXJ5Iiwid2hlcmUiLCJvcmRlckJ5IiwiZnNDb2xsZWN0aW9uIiwic2V0RG9jIiwiZGVsZXRlRG9jIiwid3JpdGVCYXRjaCIsImRiIiwidXNlclNlcnZpY2UiLCJFeGVyY2lzZUxvZyIsIkV4ZXJjaXNlIiwiRXhlcmNpc2VWaWRlbyIsIldvcmtvdXQiLCJCb2R5Wm9uZSIsIkludHJvVmlkZW8iLCJXb3Jrb3V0U3RhdHVzIiwiU3dlYXRsaXN0Q29sbGVjdGlvbiIsImZvcm1hdCIsImNvbnZlcnRUaW1lc3RhbXAiLCJjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wIiwiQ2hhbGxlbmdlIiwiVXNlckNoYWxsZW5nZSIsInN0b3JlIiwic2V0Q3VycmVudFdvcmtvdXQiLCJzZXRDdXJyZW50RXhlcmNpc2VMb2dzIiwicmVzZXRXb3Jrb3V0U3RhdGUiLCJXb3Jrb3V0U2VydmljZSIsImZldGNoQ3VycmVudFdvcmtvdXQiLCJ1c2VySWQiLCJzZXNzaW9uIiwiZmV0Y2hDdXJyZW50V29ya291dFNlc3Npb24iLCJ3b3Jrb3V0IiwiZ2V0QWxsU3dlYXRsaXN0cyIsIndvcmtvdXRzUmVmIiwiZXhlcmNpc2VzV2l0aFZpZGVvcyIsIndvcmtvdXRzU25hcHNob3QiLCJ3b3Jrb3V0cyIsIndvcmtvdXREb2MiLCJ3b3Jrb3V0RGF0YSIsIndvcmtvdXRJZCIsIm1hcHBlZEV4ZXJjaXNlcyIsImxvZ3NSZWYiLCJsb2dzU25hcHNob3QiLCJlcnJvciIsImZpcmVzdG9yZUVycm9yIiwiRXJyb3IiLCJmZXRjaEFuZE1hcEV4ZXJjaXNlc1dpdGhWaWRlb3MiLCJkb2NzIiwiZGF0YSIsImlkIiwiZXhlcmNpc2VzIiwibWFwIiwiZXhlcmNpc2VSZWYiLCJmdWxsRXhlcmNpc2UiLCJmaW5kIiwiZXgiLCJuYW1lIiwiZXhlcmNpc2UiLCJjb25zb2xlIiwibG9nIiwicm91bmRXb3Jrb3V0SWQiLCJjb2xsZWN0aW9uSWQiLCJjaGFsbGVuZ2UiLCJsb2dzIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImR1cmF0aW9uIiwid29ya291dFJhdGluZyIsInVzZUF1dGhvckNvbnRlbnQiLCJpc0NvbXBsZXRlZCIsIndvcmtvdXRTdGF0dXMiLCJzdGFydFRpbWUiLCJEYXRlIiwidW5kZWZpbmVkIiwib3JkZXIiLCJhdXRob3IiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJ6b25lIiwibG9nRG9jIiwicHVzaCIsIm1lc3NhZ2UiLCJnZXRVc2VyQ2hhbGxlbmdlc0J5Q2hhbGxlbmdlSWQiLCJjaGFsbGVuZ2VJZCIsInVzZXJDaGFsbGVuZ2VzUmVmIiwicSIsInNuYXBzaG90IiwidXNlckNoYWxsZW5nZXMiLCJsZW5ndGgiLCJmZXRjaFdvcmtvdXRTdW1tYXJpZXMiLCJkYXRlIiwiY3VycmVudFVzZXIiLCJmb3JtYXR0ZWREYXRlIiwic3VtbWFyaWVzUmVmIiwiZmV0Y2hBbGxXb3Jrb3V0U3VtbWFyaWVzIiwiZmV0Y2hVc2VyQ2hhbGxlbmdlc0J5VXNlcklkIiwic3VidGl0bGUiLCJwYXJ0aWNpcGFudHMiLCJzdGF0dXMiLCJzdGFydERhdGUiLCJlbmREYXRlIiwiaW50cm9WaWRlb3MiLCJ2IiwidmlkZW9VcmwiLCJmZXRjaENvbGxlY3Rpb25XaXRoU3dlYXRMaXN0cyIsInN3ZWF0TGlzdHMiLCJzd2VhdGxpc3RJZGVudGlmaWVyIiwiZ2V0Q29sbGVjdGlvbkJ5SWQiLCJzd2VhdGxpc3RJZHMiLCJmZXRjaFNhdmVkV29ya291dCIsInN3ZWF0bGlzdEF1dGhvcklkIiwid29ya291dFJlZiIsIndvcmtvdXRTbmFwIiwiZXhpc3RzIiwiYXNzaWduZWREYXRlIiwibG9nRGF0YSIsImZlZWRiYWNrIiwibm90ZSIsInJlY29tbWVuZGVkV2VpZ2h0IiwiaXNTcGxpdCIsImlzQm9keVdlaWdodCIsImxvZ1N1Ym1pdHRlZCIsImxvZ0lzRWRpdGluZyIsImNvbXBsZXRlZEF0IiwiZmV0Y2hVc2VyQ2hhbGxlbmdlc0J5Q2hhbGxlbmdlSWQiLCJkb2NSZWYiLCJkb2NTbmFwIiwiZmV0Y2hBY3RpdmVDaGFsbGVuZ2VzIiwiYWxsQ2hhbGxlbmdlcyIsImFjdGl2ZUNoYWxsZW5nZXMiLCJmaWx0ZXIiLCJ1c2VyQ2hhbGxlbmdlIiwiZmV0Y2hVc2VyQ2hhbGxlbmdlcyIsInVwZGF0ZVdvcmtvdXRTdW1tYXJ5Iiwic3VtbWFyeSIsInN1bW1hcnlSZWYiLCJzdW1tYXJ5RGF0YSIsImJvZHlQYXJ0cyIsInNlY29uZGFyeUJvZHlQYXJ0cyIsIndvcmtvdXRUaXRsZSIsImNhbG9yaWVzQnVybmVkIiwiZXhlcmNpc2VzQ29tcGxldGVkIiwiYWlJbnNpZ2h0IiwicmVjb21tZW5kYXRpb25zIiwiZ2lmVVJMcyIsInJlY29tbWVuZGVkV29yayIsIm1lcmdlIiwidXBkYXRlV29ya291dExvZ3MiLCJiYXRjaCIsImZvckVhY2giLCJsb2dEb2NSZWYiLCJ1cGRhdGUiLCJ0b0RpY3Rpb25hcnkiLCJjb21taXQiLCJjYW5jZWxXb3Jrb3V0Iiwid29ya291dFN1bW1hcnkiLCJkZWxldGVXb3Jrb3V0U2Vzc2lvbiIsImRlbGV0ZVdvcmtvdXRTdW1tYXJ5IiwiY2xlYW5VcFdvcmtvdXRJblByb2dyZXNzIiwiZGVsZXRlIiwicmVmIiwid29ya291dFN1bW1hcnlJZCIsImRpc3BhdGNoIiwiZXhlcmNpc2VTbmFwc2hvdCIsInZpZGVvU25hcHNob3QiLCJleGVyY2lzZVZpZGVvcyIsIndvcmtvdXRTZXNzaW9uc1JlZiIsInNuYXAiLCJmcm9tRmlyZWJhc2UiLCJtYXRjaGluZ1ZpZGVvcyIsInZpZGVvIiwidG9Mb3dlckNhc2UiLCJ2aWRlb3MiLCJRdWV1ZWRVcCIsImVtcHR5IiwicHJvY2Vzc1dvcmtvdXRTZXNzaW9uRG9jdW1lbnQiLCJJblByb2dyZXNzIiwiZmV0Y2hBbGxXb3Jrb3V0U2Vzc2lvbnMiLCJzZXNzaW9ucyIsIlByb21pc2UiLCJhbGwiLCJzZXNzaW9uRGF0YSIsInNvcnQiLCJhIiwiYiIsIm9yZGVyQSIsIm9yZGVyQiIsInVwZGF0ZUNvbGxlY3Rpb24iLCJjb2xsUmVmIiwibmV3RG9jUmVmIiwidHJpbSIsImV4ZXJjaXNlTmFtZUxvd2VyIiwiQXJjaGl2ZWQiLCJGdWxsQm9keSIsInByZXBhcmVkTG9nRGF0YSIsInNhdmVXb3Jrb3V0U2Vzc2lvbiIsImN1cnJlbnREYXRlIiwiY2xlYW5Xb3Jrb3V0Iiwid29ya291dFNlc3Npb25SZWYiLCJsb2dCYXRjaCIsImdldFRpbWUiLCJpbmRleCIsInNldCIsImNhdGVnb3J5Iiwiam9pbkNoYWxsZW5nZSIsInVzZXJuYW1lIiwidXNlcnNSZWYiLCJ1c2VyUXVlcnkiLCJ1c2VyU25hcHNob3QiLCJ1c2VyRG9jIiwidXNlckRhdGEiLCJjaGFsbGVuZ2VSZWYiLCJjaGFsbGVuZ2VTbmFwIiwidXNlckNoYWxsZW5nZUlkIiwidXNlckNoYWxsZW5nZURhdGEiLCJub3ciLCJmY21Ub2tlbiIsInByb2ZpbGVJbWFnZSIsInByb2dyZXNzIiwiY29tcGxldGVkV29ya291dHMiLCJ1aWQiLCJsb2NhdGlvbiIsImNpdHkiLCJjb3VudHJ5IiwidGltZXpvbmUiLCJqb2luRGF0ZSIsInB1bHNlUG9pbnRzIiwiYmFzZUNvbXBsZXRpb24iLCJmaXJzdENvbXBsZXRpb24iLCJzdHJlYWtCb251cyIsImNoZWNrSW5Cb251cyIsImVmZm9ydFJhdGluZyIsImNoYXRQYXJ0aWNpcGF0aW9uIiwibG9jYXRpb25DaGVja2luIiwiY29udGVudEVuZ2FnZW1lbnQiLCJlbmNvdXJhZ2VtZW50U2VudCIsImVuY291cmFnZW1lbnRSZWNlaXZlZCIsImN1cnJlbnRTdHJlYWsiLCJlbmNvdXJhZ2VkVXNlcnMiLCJlbmNvdXJhZ2VkQnlVc2VycyIsImNoZWNrSW5zIiwiY3VycmVudFdvcmtvdXQiLCJnZXRTdGF0ZSIsImN1cnJlbnRXb3Jrb3V0TG9ncyIsImN1cnJlbnRFeGVyY2lzZUxvZ3MiLCJ3b3Jrb3V0U2VydmljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/api/firebase/workout/service.ts\n"));

/***/ })

});
"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/index",{

/***/ "./src/api/firebase/workout/service.ts":
/*!*********************************************!*\
  !*** ./src/api/firebase/workout/service.ts ***!
  \*********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   workoutService: function() { return /* binding */ workoutService; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @swc/helpers/_/_async_to_generator */ \"./node_modules/@swc/helpers/esm/_async_to_generator.js\");\n/* harmony import */ var _swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @swc/helpers/_/_class_call_check */ \"./node_modules/@swc/helpers/esm/_class_call_check.js\");\n/* harmony import */ var _swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @swc/helpers/_/_create_class */ \"./node_modules/@swc/helpers/esm/_create_class.js\");\n/* harmony import */ var _swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @swc/helpers/_/_object_spread */ \"./node_modules/@swc/helpers/esm/_object_spread.js\");\n/* harmony import */ var _swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @swc/helpers/_/_object_spread_props */ \"./node_modules/@swc/helpers/esm/_object_spread_props.js\");\n/* harmony import */ var _swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @swc/helpers/_/_sliced_to_array */ \"./node_modules/@swc/helpers/esm/_sliced_to_array.js\");\n/* harmony import */ var _swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @swc/helpers/_/_ts_generator */ \"./node_modules/@swc/helpers/esm/_ts_generator.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/api/firebase/config.ts\");\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../user */ \"./src/api/firebase/user/index.ts\");\n/* harmony import */ var _exercise_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../exercise/types */ \"./src/api/firebase/exercise/types.ts\");\n/* harmony import */ var _workout_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../api/firebase/workout/types */ \"./src/api/firebase/workout/types.ts\");\n/* harmony import */ var _barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! __barrel_optimize__?names=format!=!date-fns */ \"__barrel_optimize__?names=format!=!./node_modules/date-fns/index.js\");\n/* harmony import */ var _utils_timestamp__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/timestamp */ \"./src/utils/timestamp.ts\");\n/* harmony import */ var _utils_formatDate__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/formatDate */ \"./src/utils/formatDate.ts\");\n// src/api/firebase/workout/service.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // Adjust the import path\n\n\nvar WorkoutService = /*#__PURE__*/ function() {\n    \"use strict\";\n    function WorkoutService() {\n        (0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_7__._)(this, WorkoutService);\n        this._currentWorkout = null;\n        this._currentWorkoutLogs = [];\n    }\n    var _proto = WorkoutService.prototype;\n    /**\n   * Fetch the user's current workout (either QueuedUp or InProgress).\n   */ _proto.fetchCurrentWorkout = function fetchCurrentWorkout(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var session;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        return [\n                            4,\n                            _this.fetchCurrentWorkoutSession(userId)\n                        ];\n                    case 1:\n                        session = _state.sent();\n                        return [\n                            2,\n                            session.workout\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getAllSweatlists = function getAllSweatlists(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var workoutsRef, exercisesWithVideos, workoutsSnapshot, workouts, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, workoutDoc, workoutData, workoutId, mappedExercises, workout, logsRef, logsSnapshot, err, error, firestoreError;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"User ID is required\");\n                        }\n                        // Reference to the user's workout collection\n                        workoutsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\");\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            12,\n                            ,\n                            13\n                        ]);\n                        return [\n                            4,\n                            _this.fetchAndMapExercisesWithVideos()\n                        ];\n                    case 2:\n                        exercisesWithVideos = _state.sent();\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(workoutsRef)\n                        ];\n                    case 3:\n                        workoutsSnapshot = _state.sent();\n                        workouts = [];\n                        _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;\n                        _state.label = 4;\n                    case 4:\n                        _state.trys.push([\n                            4,\n                            9,\n                            10,\n                            11\n                        ]);\n                        _iterator = workoutsSnapshot.docs[Symbol.iterator]();\n                        _state.label = 5;\n                    case 5:\n                        if (!!(_iteratorNormalCompletion = (_step = _iterator.next()).done)) return [\n                            3,\n                            8\n                        ];\n                        workoutDoc = _step.value;\n                        workoutData = workoutDoc.data();\n                        workoutId = workoutDoc.id;\n                        // Map the exercises in the workout to the full exercise objects with videos\n                        mappedExercises = (workoutData.exercises || []).map(function(exerciseRef) {\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name === exerciseRef.exercise.name;\n                            });\n                            console.log(\"This is the mapped exercise: \" + fullExercise);\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({}, exerciseRef), {\n                                exercise: fullExercise || exerciseRef\n                            });\n                        });\n                        // Parse workout data into the desired structure\n                        workout = new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Workout({\n                            id: workoutData.id || \"\",\n                            roundWorkoutId: workoutData.roundWorkoutId || \"\",\n                            collectionId: workoutData.collectionId,\n                            exercises: mappedExercises,\n                            challenge: workoutData.challenge,\n                            logs: [],\n                            title: workoutData.title || \"\",\n                            description: workoutData.description || \"\",\n                            duration: workoutData.duration || 0,\n                            workoutRating: workoutData.workoutRating,\n                            useAuthorContent: workoutData.useAuthorContent || false,\n                            isCompleted: workoutData.isCompleted || false,\n                            workoutStatus: workoutData.workoutStatus || \"notStarted\",\n                            startTime: workoutData.startTime ? new Date(workoutData.startTime) : undefined,\n                            order: workoutData.order,\n                            author: workoutData.author || userId,\n                            createdAt: workoutData.createdAt ? new Date(workoutData.createdAt) : new Date(),\n                            updatedAt: workoutData.updatedAt ? new Date(workoutData.updatedAt) : new Date(),\n                            zone: workoutData.zone || \"FULL_BODY\"\n                        });\n                        // Fetch and process logs\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\", workoutId, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 6:\n                        logsSnapshot = _state.sent();\n                        workout.logs = logsSnapshot.docs.map(function(logDoc) {\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({}, logDoc.data()), {\n                                id: logDoc.id\n                            });\n                        });\n                        workouts.push(workout);\n                        _state.label = 7;\n                    case 7:\n                        _iteratorNormalCompletion = true;\n                        return [\n                            3,\n                            5\n                        ];\n                    case 8:\n                        return [\n                            3,\n                            11\n                        ];\n                    case 9:\n                        err = _state.sent();\n                        _didIteratorError = true;\n                        _iteratorError = err;\n                        return [\n                            3,\n                            11\n                        ];\n                    case 10:\n                        try {\n                            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                                _iterator[\"return\"]();\n                            }\n                        } finally{\n                            if (_didIteratorError) {\n                                throw _iteratorError;\n                            }\n                        }\n                        return [\n                            7\n                        ];\n                    case 11:\n                        return [\n                            2,\n                            workouts\n                        ];\n                    case 12:\n                        error = _state.sent();\n                        firestoreError = error;\n                        console.error(\"Error fetching sweatlists:\", firestoreError.message);\n                        throw new Error(\"Failed to fetch sweatlists\");\n                    case 13:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getUserChallengesByChallengeId = function getUserChallengesByChallengeId(challengeId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var userChallengesRef, q, snapshot, userChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"challengeId\", \"==\", challengeId));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        userChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            return new _workout_types__WEBPACK_IMPORTED_MODULE_4__.UserChallenge(doc.id, data);\n                        });\n                        if (userChallenges.length > 0) {\n                            return [\n                                2,\n                                {\n                                    userChallenges: userChallenges\n                                }\n                            ];\n                        } else {\n                            return [\n                                2,\n                                {\n                                    userChallenges: [],\n                                    error: \"No user challenges found for this challenge.\"\n                                }\n                            ];\n                        }\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges by challengeId:\", error);\n                        return [\n                            2,\n                            {\n                                userChallenges: [],\n                                error: error instanceof Error ? error.message : \"Unknown error\"\n                            }\n                        ];\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetches workout summaries for a specific date.\n   * @param date - The date for which workout summaries are being fetched.\n   * @returns A promise resolving to an array of workout summaries.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ _proto.fetchWorkoutSummaries = function fetchWorkoutSummaries(date) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var currentUser, formattedDate, summariesRef, q, snapshot, error, firestoreError;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Format the date to match the format in Firestore ('MM-dd-yyyy')\n                        formattedDate = (0,_barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_12__.format)(date, \"MM-dd-yyyy\");\n                        // Reference to the user's workoutSummaries subcollection\n                        summariesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", currentUser.id, \"workoutSummaries\");\n                        // Create a query to filter documents by the specified date\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(summariesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"date\", \"==\", formattedDate));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // Map the documents to an array of WorkoutSummary objects\n                        return [\n                            2,\n                            snapshot.docs.map(function(doc) {\n                                return (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                    id: doc.id\n                                }, doc.data());\n                            })\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        firestoreError = error;\n                        console.error(\"Error fetching workout summaries:\", firestoreError.message);\n                        throw new Error(firestoreError.message);\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchAllWorkoutSummaries = function fetchAllWorkoutSummaries() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var currentUser, summariesRef, q, snapshot, error, firestoreError;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Reference to the user's workoutSummaries subcollection\n                        summariesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", currentUser.id, \"workoutSummary\");\n                        // Query to retrieve all workout summaries, sorted by `createdAt` in ascending order\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(summariesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"asc\")); // Adjust field name based on your schema\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // Map the documents to an array of WorkoutSummary objects\n                        return [\n                            2,\n                            snapshot.docs.map(function(doc) {\n                                return (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                    id: doc.id\n                                }, doc.data());\n                            })\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        firestoreError = error;\n                        console.error(\"Error fetching all workout summaries:\", firestoreError.message);\n                        throw new Error(firestoreError.message);\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n * Fetch user challenges by userId.\n * @param userId The ID of the user to fetch challenges for.\n * @returns A promise resolving to an array of user challenges.\n * @throws If the Firestore query fails.\n */ _proto.fetchUserChallengesByUserId = function fetchUserChallengesByUserId(userId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var userChallengesRef, q, snapshot, userChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", userId));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // console.log(`Total challenges fetched: ${snapshot.docs.length}`);\n                        userChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            // console.log(`Processing challenge with ID: ${doc.id}`, data);\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: doc.id\n                            }, data), {\n                                challenge: data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Challenge({\n                                    id: data.challenge.id,\n                                    title: data.challenge.title,\n                                    subtitle: data.challenge.subtitle,\n                                    participants: data.challenge.participants || [],\n                                    status: data.challenge.status,\n                                    startDate: data.challenge.startDate ? new Date(data.challenge.startDate) : new Date(),\n                                    endDate: data.challenge.endDate ? new Date(data.challenge.endDate) : new Date(),\n                                    createdAt: data.challenge.createdAt ? new Date(data.challenge.createdAt) : new Date(),\n                                    updatedAt: data.challenge.updatedAt ? new Date(data.challenge.updatedAt) : new Date(),\n                                    introVideos: (data.challenge.introVideos || []).map(function(v) {\n                                        return new _workout_types__WEBPACK_IMPORTED_MODULE_4__.IntroVideo({\n                                            id: v.id,\n                                            userId: v.userId,\n                                            videoUrl: v.videoUrl\n                                        });\n                                    })\n                                }) : undefined,\n                                createdAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_5__.convertTimestamp)(data.createdAt),\n                                updatedAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_5__.convertTimestamp)(data.updatedAt)\n                            });\n                        });\n                        // console.log('All challenges after processing:', JSON.stringify(userChallenges, null, 2));\n                        return [\n                            2,\n                            userChallenges\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges by userId:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchCollectionWithSweatLists = function fetchCollectionWithSweatLists(collectionId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var collection, sweatLists, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, sweatlistIdentifier, _ref, workout, error, err, error1;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            12,\n                            ,\n                            13\n                        ]);\n                        return [\n                            4,\n                            _this.getCollectionById(collectionId)\n                        ];\n                    case 1:\n                        collection = _state.sent();\n                        // Fetch sweat lists (workouts)\n                        sweatLists = [];\n                        _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;\n                        _state.label = 2;\n                    case 2:\n                        _state.trys.push([\n                            2,\n                            9,\n                            10,\n                            11\n                        ]);\n                        _iterator = (collection.sweatlistIds || [])[Symbol.iterator]();\n                        _state.label = 3;\n                    case 3:\n                        if (!!(_iteratorNormalCompletion = (_step = _iterator.next()).done)) return [\n                            3,\n                            8\n                        ];\n                        sweatlistIdentifier = _step.value;\n                        _state.label = 4;\n                    case 4:\n                        _state.trys.push([\n                            4,\n                            6,\n                            ,\n                            7\n                        ]);\n                        return [\n                            4,\n                            _this.fetchSavedWorkout(sweatlistIdentifier.sweatlistAuthorId, sweatlistIdentifier.id)\n                        ];\n                    case 5:\n                        _ref = _swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_13__._.apply(void 0, [\n                            _state.sent(),\n                            1\n                        ]), workout = _ref[0];\n                        if (workout) {\n                            sweatLists.push(workout);\n                        }\n                        return [\n                            3,\n                            7\n                        ];\n                    case 6:\n                        error = _state.sent();\n                        console.error(\"Error fetching workout \".concat(sweatlistIdentifier.id, \":\"), error);\n                        return [\n                            3,\n                            7\n                        ];\n                    case 7:\n                        _iteratorNormalCompletion = true;\n                        return [\n                            3,\n                            3\n                        ];\n                    case 8:\n                        return [\n                            3,\n                            11\n                        ];\n                    case 9:\n                        err = _state.sent();\n                        _didIteratorError = true;\n                        _iteratorError = err;\n                        return [\n                            3,\n                            11\n                        ];\n                    case 10:\n                        try {\n                            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                                _iterator[\"return\"]();\n                            }\n                        } finally{\n                            if (_didIteratorError) {\n                                throw _iteratorError;\n                            }\n                        }\n                        return [\n                            7\n                        ];\n                    case 11:\n                        return [\n                            2,\n                            {\n                                collection: collection,\n                                sweatLists: sweatLists\n                            }\n                        ];\n                    case 12:\n                        error1 = _state.sent();\n                        console.error(\"Error fetching collection with sweat lists:\", error1);\n                        throw error1;\n                    case 13:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // Optional helper methods for parsing if needed\n    _proto.parseWorkoutData = function parseWorkoutData(data) {\n        var _data_createdAt, _data_updatedAt;\n        return new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Workout({\n            id: data.id || \"\",\n            roundWorkoutId: data.roundWorkoutId || \"\",\n            collectionId: data.collectionId || [],\n            exercises: data.exercises || [],\n            challenge: data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Challenge({\n                id: data.challenge.id,\n                title: data.challenge.title,\n                subtitle: data.challenge.subtitle,\n                participants: data.challenge.participants || [],\n                status: data.challenge.status,\n                startDate: data.challenge.startDate instanceof Date ? data.challenge.startDate : data.challenge.startDate ? new Date(data.challenge.startDate) : new Date(),\n                endDate: data.challenge.endDate instanceof Date ? data.challenge.endDate : data.challenge.endDate ? new Date(data.challenge.endDate) : new Date(),\n                createdAt: data.challenge.createdAt instanceof Date ? data.challenge.createdAt : data.challenge.createdAt ? new Date(data.challenge.createdAt) : new Date(),\n                updatedAt: data.challenge.updatedAt instanceof Date ? data.challenge.updatedAt : data.challenge.updatedAt ? new Date(data.challenge.updatedAt) : new Date(),\n                introVideos: (data.challenge.introVideos || []).map(function(v) {\n                    return new _workout_types__WEBPACK_IMPORTED_MODULE_4__.IntroVideo({\n                        id: v.id,\n                        userId: v.userId,\n                        videoUrl: v.videoUrl\n                    });\n                })\n            }) : undefined,\n            logs: data.logs || [],\n            title: data.title || \"\",\n            description: data.description || \"\",\n            duration: data.duration || 0,\n            workoutRating: data.workoutRating,\n            useAuthorContent: data.useAuthorContent || false,\n            isCompleted: data.isCompleted || false,\n            workoutStatus: data.workoutStatus || _workout_types__WEBPACK_IMPORTED_MODULE_4__.WorkoutStatus.QueuedUp,\n            startTime: data.startTime instanceof Date ? data.startTime : data.startTime ? new Date(data.startTime) : undefined,\n            order: data.order || 0,\n            author: data.author || \"\",\n            createdAt: data.createdAt instanceof Date ? data.createdAt : typeof ((_data_createdAt = data.createdAt) === null || _data_createdAt === void 0 ? void 0 : _data_createdAt.toDate) === \"function\" ? data.createdAt.toDate() : data.createdAt ? new Date(data.createdAt) : new Date(),\n            updatedAt: data.updatedAt instanceof Date ? data.updatedAt : typeof ((_data_updatedAt = data.updatedAt) === null || _data_updatedAt === void 0 ? void 0 : _data_updatedAt.toDate) === \"function\" ? data.updatedAt.toDate() : data.updatedAt ? new Date(data.updatedAt) : new Date(),\n            zone: data.zone || _workout_types__WEBPACK_IMPORTED_MODULE_4__.BodyZone.FullBody,\n            estimatedDuration: function() {\n                return data.duration || 0;\n            },\n            determineWorkoutZone: function() {\n                return data.zone || _workout_types__WEBPACK_IMPORTED_MODULE_4__.BodyZone.FullBody;\n            },\n            toDictionary: function() {\n                return {} // Placeholder, implement as needed\n                ;\n            }\n        });\n    };\n    _proto.createDefaultExercise = function createDefaultExercise() {\n        return {\n            id: \"\",\n            name: \"\",\n            category: {\n                type: \"weightTraining\",\n                details: {\n                    reps: \"\",\n                    sets: 0,\n                    weight: 0,\n                    screenTime: 0,\n                    selectedVideo: this.parseExerciseVideo({}) // Use existing method to create a default video\n                }\n            },\n            primaryBodyParts: [],\n            secondaryBodyParts: [],\n            tags: [],\n            description: \"\",\n            visibility: \"live\",\n            steps: [],\n            videos: [],\n            currentVideoPosition: 0,\n            reps: \"\",\n            sets: 0,\n            weight: 0,\n            author: {\n                userId: \"\",\n                username: \"\"\n            },\n            createdAt: new Date(),\n            updatedAt: new Date()\n        };\n    };\n    _proto.parseExerciseLogData = function parseExerciseLogData(data) {\n        var _data_completedAt, _data_createdAt, _data_updatedAt;\n        return {\n            id: data.id || \"\",\n            workoutId: data.workoutId || \"\",\n            userId: data.userId || \"\",\n            exercise: data.exercise ? this.parseExercise(data.exercise) : this.createDefaultExercise(),\n            logs: (data.log || []).map(function(logEntry) {\n                return {\n                    reps: parseInt(logEntry.reps || \"0\"),\n                    weight: parseFloat(logEntry.weight || \"0\"),\n                    leftReps: parseInt(logEntry.leftReps || \"0\"),\n                    leftWeight: parseFloat(logEntry.leftWeight || \"0\"),\n                    isSplit: logEntry.isSplit || false,\n                    isBodyWeight: logEntry.isBodyWeight || false,\n                    isCompleted: logEntry.isCompleted || false,\n                    duration: parseInt(logEntry.duration || \"0\"),\n                    calories: parseInt(logEntry.calories || \"0\"),\n                    bpm: parseInt(logEntry.bpm || \"0\")\n                };\n            }),\n            feedback: data.feedback || \"\",\n            note: data.note || \"\",\n            recommendedWeight: data.recommendedWeight,\n            isSplit: data.isSplit || false,\n            isBodyWeight: data.isBodyWeight || false,\n            logSubmitted: data.logSubmitted || false,\n            logIsEditing: data.logIsEditing || false,\n            isCompleted: data.isCompleted || false,\n            completedAt: data.completedAt instanceof Date ? data.completedAt : typeof ((_data_completedAt = data.completedAt) === null || _data_completedAt === void 0 ? void 0 : _data_completedAt.toDate) === \"function\" ? data.completedAt.toDate() : data.completedAt ? new Date(data.completedAt) : new Date(),\n            createdAt: data.createdAt instanceof Date ? data.createdAt : typeof ((_data_createdAt = data.createdAt) === null || _data_createdAt === void 0 ? void 0 : _data_createdAt.toDate) === \"function\" ? data.createdAt.toDate() : data.createdAt ? new Date(data.createdAt) : new Date(),\n            updatedAt: data.updatedAt instanceof Date ? data.updatedAt : typeof ((_data_updatedAt = data.updatedAt) === null || _data_updatedAt === void 0 ? void 0 : _data_updatedAt.toDate) === \"function\" ? data.updatedAt.toDate() : data.updatedAt ? new Date(data.updatedAt) : new Date()\n        };\n    };\n    // You'll also need to implement parseExercise similar to the original implementation\n    _proto.parseExercise = function parseExercise(fields) {\n        var _fields_id, _fields_name, _fields_category_mapValue, _fields_category, _fields_tags_arrayValue, _fields_tags, _fields_description, _fields_visibility_arrayValue, _fields_visibility, _fields_steps_arrayValue, _fields_steps, _fields_currentVideoPosition, _fields_reps, _fields_sets, _fields_weight, _fields_author_mapValue, _fields_author, _fields_createdAt, _fields_updatedAt;\n        return {\n            id: ((_fields_id = fields.id) === null || _fields_id === void 0 ? void 0 : _fields_id.stringValue) || fields.id || \"\",\n            name: ((_fields_name = fields.name) === null || _fields_name === void 0 ? void 0 : _fields_name.stringValue) || fields.name || \"\",\n            category: this.parseExerciseCategory(((_fields_category = fields.category) === null || _fields_category === void 0 ? void 0 : (_fields_category_mapValue = _fields_category.mapValue) === null || _fields_category_mapValue === void 0 ? void 0 : _fields_category_mapValue.fields) || fields.category || {}),\n            primaryBodyParts: this.parseBodyParts(fields.primaryBodyParts),\n            secondaryBodyParts: this.parseBodyParts(fields.secondaryBodyParts),\n            tags: (((_fields_tags = fields.tags) === null || _fields_tags === void 0 ? void 0 : (_fields_tags_arrayValue = _fields_tags.arrayValue) === null || _fields_tags_arrayValue === void 0 ? void 0 : _fields_tags_arrayValue.values) || fields.tags || []).map(function(tag) {\n                return tag.stringValue || tag;\n            }),\n            description: ((_fields_description = fields.description) === null || _fields_description === void 0 ? void 0 : _fields_description.stringValue) || fields.description || \"\",\n            visibility: (((_fields_visibility = fields.visibility) === null || _fields_visibility === void 0 ? void 0 : (_fields_visibility_arrayValue = _fields_visibility.arrayValue) === null || _fields_visibility_arrayValue === void 0 ? void 0 : _fields_visibility_arrayValue.values) || fields.visibility || []).map(function(v) {\n                return v.stringValue || v;\n            }),\n            steps: (((_fields_steps = fields.steps) === null || _fields_steps === void 0 ? void 0 : (_fields_steps_arrayValue = _fields_steps.arrayValue) === null || _fields_steps_arrayValue === void 0 ? void 0 : _fields_steps_arrayValue.values) || fields.steps || []).map(function(step) {\n                return step.stringValue || step;\n            }),\n            videos: this.parseVideos(fields.videos),\n            currentVideoPosition: parseInt(((_fields_currentVideoPosition = fields.currentVideoPosition) === null || _fields_currentVideoPosition === void 0 ? void 0 : _fields_currentVideoPosition.integerValue) || fields.currentVideoPosition || \"0\"),\n            reps: ((_fields_reps = fields.reps) === null || _fields_reps === void 0 ? void 0 : _fields_reps.stringValue) || fields.reps || \"\",\n            sets: parseInt(((_fields_sets = fields.sets) === null || _fields_sets === void 0 ? void 0 : _fields_sets.integerValue) || fields.sets || \"0\"),\n            weight: parseFloat(((_fields_weight = fields.weight) === null || _fields_weight === void 0 ? void 0 : _fields_weight.doubleValue) || fields.weight || \"0\"),\n            author: this.parseExerciseAuthor(((_fields_author = fields.author) === null || _fields_author === void 0 ? void 0 : (_fields_author_mapValue = _fields_author.mapValue) === null || _fields_author_mapValue === void 0 ? void 0 : _fields_author_mapValue.fields) || fields.author || {}),\n            createdAt: new Date(parseFloat(((_fields_createdAt = fields.createdAt) === null || _fields_createdAt === void 0 ? void 0 : _fields_createdAt.doubleValue) || fields.createdAt || \"0\") * 1000),\n            updatedAt: new Date(parseFloat(((_fields_updatedAt = fields.updatedAt) === null || _fields_updatedAt === void 0 ? void 0 : _fields_updatedAt.doubleValue) || fields.updatedAt || \"0\") * 1000)\n        };\n    };\n    // You'll need to implement these helper methods as well\n    _proto.parseExerciseCategory = function parseExerciseCategory(fields) {\n        var _fields_id;\n        // Implementation similar to the original service\n        var categoryId = ((_fields_id = fields.id) === null || _fields_id === void 0 ? void 0 : _fields_id.stringValue) || fields.id || \"\";\n        if (categoryId === \"cardio\") {\n            var _fields_duration, _fields_bpm, _fields_calories, _fields_screenTime, _fields_selectedVideo_mapValue, _fields_selectedVideo;\n            return {\n                type: \"cardio\",\n                details: {\n                    duration: parseInt(((_fields_duration = fields.duration) === null || _fields_duration === void 0 ? void 0 : _fields_duration.integerValue) || fields.duration || \"0\"),\n                    bpm: parseInt(((_fields_bpm = fields.bpm) === null || _fields_bpm === void 0 ? void 0 : _fields_bpm.integerValue) || fields.bpm || \"0\"),\n                    calories: parseInt(((_fields_calories = fields.calories) === null || _fields_calories === void 0 ? void 0 : _fields_calories.integerValue) || fields.calories || \"0\"),\n                    screenTime: parseInt(((_fields_screenTime = fields.screenTime) === null || _fields_screenTime === void 0 ? void 0 : _fields_screenTime.integerValue) || fields.screenTime || \"0\"),\n                    selectedVideo: this.parseExerciseVideo(((_fields_selectedVideo = fields.selectedVideo) === null || _fields_selectedVideo === void 0 ? void 0 : (_fields_selectedVideo_mapValue = _fields_selectedVideo.mapValue) === null || _fields_selectedVideo_mapValue === void 0 ? void 0 : _fields_selectedVideo_mapValue.fields) || fields.selectedVideo)\n                }\n            };\n        } else {\n            var _fields_reps, _fields_sets, _fields_weight, _fields_screenTime1, _fields_selectedVideo_mapValue1, _fields_selectedVideo1;\n            return {\n                type: \"weightTraining\",\n                details: {\n                    reps: ((_fields_reps = fields.reps) === null || _fields_reps === void 0 ? void 0 : _fields_reps.stringValue) || fields.reps || \"\",\n                    sets: parseInt(((_fields_sets = fields.sets) === null || _fields_sets === void 0 ? void 0 : _fields_sets.integerValue) || fields.sets || \"0\"),\n                    weight: parseFloat(((_fields_weight = fields.weight) === null || _fields_weight === void 0 ? void 0 : _fields_weight.doubleValue) || fields.weight || \"0\"),\n                    screenTime: parseInt(((_fields_screenTime1 = fields.screenTime) === null || _fields_screenTime1 === void 0 ? void 0 : _fields_screenTime1.integerValue) || fields.screenTime || \"0\"),\n                    selectedVideo: this.parseExerciseVideo(((_fields_selectedVideo1 = fields.selectedVideo) === null || _fields_selectedVideo1 === void 0 ? void 0 : (_fields_selectedVideo_mapValue1 = _fields_selectedVideo1.mapValue) === null || _fields_selectedVideo_mapValue1 === void 0 ? void 0 : _fields_selectedVideo_mapValue1.fields) || fields.selectedVideo)\n                }\n            };\n        }\n    };\n    _proto.parseBodyParts = function parseBodyParts(bodyPartsField) {\n        var _bodyPartsField_arrayValue;\n        var bodyPartsArray = (bodyPartsField === null || bodyPartsField === void 0 ? void 0 : (_bodyPartsField_arrayValue = bodyPartsField.arrayValue) === null || _bodyPartsField_arrayValue === void 0 ? void 0 : _bodyPartsField_arrayValue.values) || bodyPartsField || [];\n        return bodyPartsArray.map(function(part) {\n            return part.stringValue || part;\n        });\n    };\n    _proto.parseVideos = function parseVideos(videosField) {\n        var _this = this;\n        var _videosField_arrayValue;\n        var videosArray = (videosField === null || videosField === void 0 ? void 0 : (_videosField_arrayValue = videosField.arrayValue) === null || _videosField_arrayValue === void 0 ? void 0 : _videosField_arrayValue.values) || videosField || [];\n        return videosArray.map(function(videoData) {\n            var _videoData_mapValue;\n            return _this.parseExerciseVideo(((_videoData_mapValue = videoData.mapValue) === null || _videoData_mapValue === void 0 ? void 0 : _videoData_mapValue.fields) || videoData);\n        });\n    };\n    _proto.parseExerciseVideo = function parseExerciseVideo(fields) {\n        var _fields_id, _fields_exerciseId, _fields_username, _fields_userId, _fields_videoURL, _fields_fileName, _fields_exercise, _fields_profileImage_mapValue, _fields_profileImage, _fields_caption, _fields_gifURL, _fields_thumbnail, _fields_visibility, _fields_totalAccountsReached, _fields_totalAccountLikes, _fields_totalAccountBookmarked, _fields_totalAccountUsage, _fields_isApproved, _fields_liked, _fields_bookmarked, _fields_createdAt, _fields_updatedAt;\n        return {\n            id: ((_fields_id = fields.id) === null || _fields_id === void 0 ? void 0 : _fields_id.stringValue) || fields.id || \"\",\n            exerciseId: ((_fields_exerciseId = fields.exerciseId) === null || _fields_exerciseId === void 0 ? void 0 : _fields_exerciseId.stringValue) || fields.exerciseId || \"\",\n            username: ((_fields_username = fields.username) === null || _fields_username === void 0 ? void 0 : _fields_username.stringValue) || fields.username || \"\",\n            userId: ((_fields_userId = fields.userId) === null || _fields_userId === void 0 ? void 0 : _fields_userId.stringValue) || fields.userId || \"\",\n            videoURL: ((_fields_videoURL = fields.videoURL) === null || _fields_videoURL === void 0 ? void 0 : _fields_videoURL.stringValue) || fields.videoURL || \"\",\n            fileName: ((_fields_fileName = fields.fileName) === null || _fields_fileName === void 0 ? void 0 : _fields_fileName.stringValue) || fields.fileName || \"\",\n            exercise: ((_fields_exercise = fields.exercise) === null || _fields_exercise === void 0 ? void 0 : _fields_exercise.stringValue) || fields.exercise || \"\",\n            profileImage: this.parseProfileImage(((_fields_profileImage = fields.profileImage) === null || _fields_profileImage === void 0 ? void 0 : (_fields_profileImage_mapValue = _fields_profileImage.mapValue) === null || _fields_profileImage_mapValue === void 0 ? void 0 : _fields_profileImage_mapValue.fields) || fields.profileImage || {}),\n            caption: ((_fields_caption = fields.caption) === null || _fields_caption === void 0 ? void 0 : _fields_caption.stringValue) || fields.caption || \"\",\n            gifURL: ((_fields_gifURL = fields.gifURL) === null || _fields_gifURL === void 0 ? void 0 : _fields_gifURL.stringValue) || fields.gifURL || \"\",\n            thumbnail: ((_fields_thumbnail = fields.thumbnail) === null || _fields_thumbnail === void 0 ? void 0 : _fields_thumbnail.stringValue) || fields.thumbnail || \"\",\n            visibility: ((_fields_visibility = fields.visibility) === null || _fields_visibility === void 0 ? void 0 : _fields_visibility.stringValue) || fields.visibility || \"open\",\n            totalAccountsReached: parseInt(((_fields_totalAccountsReached = fields.totalAccountsReached) === null || _fields_totalAccountsReached === void 0 ? void 0 : _fields_totalAccountsReached.integerValue) || fields.totalAccountsReached || \"0\"),\n            totalAccountLikes: parseInt(((_fields_totalAccountLikes = fields.totalAccountLikes) === null || _fields_totalAccountLikes === void 0 ? void 0 : _fields_totalAccountLikes.integerValue) || fields.totalAccountLikes || \"0\"),\n            totalAccountBookmarked: parseInt(((_fields_totalAccountBookmarked = fields.totalAccountBookmarked) === null || _fields_totalAccountBookmarked === void 0 ? void 0 : _fields_totalAccountBookmarked.integerValue) || fields.totalAccountBookmarked || \"0\"),\n            totalAccountUsage: parseInt(((_fields_totalAccountUsage = fields.totalAccountUsage) === null || _fields_totalAccountUsage === void 0 ? void 0 : _fields_totalAccountUsage.integerValue) || fields.totalAccountUsage || \"0\"),\n            isApproved: ((_fields_isApproved = fields.isApproved) === null || _fields_isApproved === void 0 ? void 0 : _fields_isApproved.booleanValue) || fields.isApproved || false,\n            liked: ((_fields_liked = fields.liked) === null || _fields_liked === void 0 ? void 0 : _fields_liked.booleanValue) || fields.liked,\n            bookmarked: ((_fields_bookmarked = fields.bookmarked) === null || _fields_bookmarked === void 0 ? void 0 : _fields_bookmarked.booleanValue) || fields.bookmarked,\n            createdAt: new Date(parseFloat(((_fields_createdAt = fields.createdAt) === null || _fields_createdAt === void 0 ? void 0 : _fields_createdAt.doubleValue) || fields.createdAt || \"0\") * 1000),\n            updatedAt: new Date(parseFloat(((_fields_updatedAt = fields.updatedAt) === null || _fields_updatedAt === void 0 ? void 0 : _fields_updatedAt.doubleValue) || fields.updatedAt || \"0\") * 1000)\n        };\n    };\n    _proto.parseProfileImage = function parseProfileImage(fields) {\n        var _fields_profileImageURL, _fields_imageOffsetWidth, _fields_imageOffsetHeight;\n        return {\n            profileImageURL: ((_fields_profileImageURL = fields.profileImageURL) === null || _fields_profileImageURL === void 0 ? void 0 : _fields_profileImageURL.stringValue) || fields.profileImageURL || \"\",\n            imageOffsetWidth: parseFloat(((_fields_imageOffsetWidth = fields.imageOffsetWidth) === null || _fields_imageOffsetWidth === void 0 ? void 0 : _fields_imageOffsetWidth.doubleValue) || fields.imageOffsetWidth || \"0\"),\n            imageOffsetHeight: parseFloat(((_fields_imageOffsetHeight = fields.imageOffsetHeight) === null || _fields_imageOffsetHeight === void 0 ? void 0 : _fields_imageOffsetHeight.doubleValue) || fields.imageOffsetHeight || \"0\")\n        };\n    };\n    _proto.parseExerciseAuthor = function parseExerciseAuthor(fields) {\n        var _fields_userId, _fields_username;\n        return {\n            userId: ((_fields_userId = fields.userId) === null || _fields_userId === void 0 ? void 0 : _fields_userId.stringValue) || fields.userId || \"\",\n            username: ((_fields_username = fields.username) === null || _fields_username === void 0 ? void 0 : _fields_username.stringValue) || fields.username || \"\"\n        };\n    };\n    _proto.fetchSavedWorkout = function fetchSavedWorkout(userId, workoutId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var workoutRef, workoutSnap, exercisesWithVideos, workoutData, mappedExercises, workout, logsRef, logsSnapshot, logs, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            4,\n                            ,\n                            5\n                        ]);\n                        // Fetch the workout document\n                        workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\", workoutId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(workoutRef)\n                        ];\n                    case 1:\n                        workoutSnap = _state.sent();\n                        if (!workoutSnap.exists()) {\n                            return [\n                                2,\n                                [\n                                    null,\n                                    null\n                                ]\n                            ];\n                        }\n                        return [\n                            4,\n                            _this.fetchAndMapExercisesWithVideos()\n                        ];\n                    case 2:\n                        exercisesWithVideos = _state.sent();\n                        workoutData = workoutSnap.data();\n                        // Map the exercises in the workout to the full exercise objects with videos\n                        mappedExercises = (workoutData.exercises || []).map(function(exerciseRef) {\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name === exerciseRef.exercise.name;\n                            });\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({}, exerciseRef), {\n                                exercise: fullExercise || exerciseRef.exercise\n                            });\n                        });\n                        workoutData.exercises = mappedExercises;\n                        workout = _this.parseWorkoutData(workoutData);\n                        // Fetch logs\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 3:\n                        logsSnapshot = _state.sent();\n                        logs = logsSnapshot.docs.map(function(logDoc) {\n                            var logData = logDoc.data();\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name === logData.exercise.name;\n                            });\n                            return {\n                                id: logDoc.id,\n                                workoutId: workoutId,\n                                userId: userId,\n                                exercise: fullExercise || logData.exercise,\n                                logs: logData.log || [],\n                                feedback: logData.feedback || \"\",\n                                note: logData.note || \"\",\n                                recommendedWeight: logData.recommendedWeight,\n                                isSplit: logData.isSplit || false,\n                                isBodyWeight: logData.isBodyWeight || false,\n                                logSubmitted: logData.logSubmitted || false,\n                                logIsEditing: logData.logIsEditing || false,\n                                isCompleted: logData.isCompleted || false,\n                                completedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(logData.completedAt),\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(logData.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(logData.updatedAt)\n                            };\n                        });\n                        workout.logs = logs;\n                        return [\n                            2,\n                            [\n                                workout,\n                                logs\n                            ]\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error fetching saved workout:\", error);\n                        return [\n                            2,\n                            [\n                                null,\n                                null\n                            ]\n                        ];\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n * Fetch user challenges by challengeId.\n * @param challengeId The ID of the challenge to fetch associated user challenges for.\n * @returns A promise resolving to an array of user challenges.\n * @throws If the Firestore query fails.\n */ _proto.fetchUserChallengesByChallengeId = function fetchUserChallengesByChallengeId(challengeId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var userChallengesRef, q, snapshot, userChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"challengeId\", \"==\", challengeId));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // console.log(`Total user challenges fetched: ${snapshot.docs.length}`);\n                        userChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            // console.log(`Processing user challenge with ID: ${doc.id}`, data);\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: doc.id\n                            }, data), {\n                                challenge: data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Challenge({\n                                    id: data.challenge.id,\n                                    title: data.challenge.title,\n                                    subtitle: data.challenge.subtitle,\n                                    participants: data.challenge.participants || [],\n                                    status: data.challenge.status,\n                                    startDate: data.challenge.startDate ? new Date(data.challenge.startDate) : new Date(),\n                                    endDate: data.challenge.endDate ? new Date(data.challenge.endDate) : new Date(),\n                                    createdAt: data.challenge.createdAt ? new Date(data.challenge.createdAt) : new Date(),\n                                    updatedAt: data.challenge.updatedAt ? new Date(data.challenge.updatedAt) : new Date(),\n                                    introVideos: (data.challenge.introVideos || []).map(function(v) {\n                                        return new _workout_types__WEBPACK_IMPORTED_MODULE_4__.IntroVideo({\n                                            id: v.id,\n                                            userId: v.userId,\n                                            videoUrl: v.videoUrl\n                                        });\n                                    })\n                                }) : undefined,\n                                createdAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_5__.convertTimestamp)(data.createdAt),\n                                updatedAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_5__.convertTimestamp)(data.updatedAt)\n                            });\n                        });\n                        // console.log('All user challenges after processing:', JSON.stringify(userChallenges, null, 2));\n                        return [\n                            2,\n                            userChallenges\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges by challengeId:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getCollectionById = function getCollectionById(id) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var docRef, docSnap, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        console.log(\"Fetching collection with id:\", id);\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\", id);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef)\n                        ];\n                    case 2:\n                        docSnap = _state.sent();\n                        if (docSnap.exists()) {\n                            return [\n                                2,\n                                new _workout_types__WEBPACK_IMPORTED_MODULE_4__.SweatlistCollection((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                    id: docSnap.id\n                                }, docSnap.data()))\n                            ];\n                        } else {\n                            throw new Error(\"Collection not found\");\n                        }\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error getting collection by ID:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetch user challenges by userId and filter for active challenges.\n   * @returns A promise resolving to an array of active challenges.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ _proto.fetchActiveChallenges = function fetchActiveChallenges() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var currentUser, userChallengesRef, q, snapshot, allChallenges, activeChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", currentUser.id));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // console.log(`Total challenges fetched: ${snapshot.docs.length}`);\n                        allChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            // console.log(`Processing challenge with ID: ${doc.id}`, data);\n                            // Use the Challenge constructor to parse the challenge data\n                            // console.log(\"date before format: \" + convertFirestoreTimestamp(data.challenge.startDate));\n                            var challenge = data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Challenge({\n                                id: data.challenge.id,\n                                title: data.challenge.title,\n                                subtitle: data.challenge.subtitle,\n                                participants: data.challenge.participants || [],\n                                status: data.challenge.status,\n                                startDate: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.challenge.startDate),\n                                endDate: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.challenge.endDate),\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.challenge.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.challenge.updatedAt),\n                                introVideos: (data.challenge.introVideos || []).map(function(v) {\n                                    return new _workout_types__WEBPACK_IMPORTED_MODULE_4__.IntroVideo({\n                                        id: v.id,\n                                        userId: v.userId,\n                                        videoUrl: v.videoUrl\n                                    });\n                                })\n                            }) : undefined;\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: doc.id\n                            }, data), {\n                                challenge: challenge,\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.updatedAt)\n                            });\n                        });\n                        // console.log('All challenges after processing:', JSON.stringify(allChallenges, null, 2));\n                        // Filter for active challenges (endDate > current date)\n                        activeChallenges = allChallenges.filter(function(userChallenge) {\n                            var _userChallenge_challenge;\n                            var endDate = (_userChallenge_challenge = userChallenge.challenge) === null || _userChallenge_challenge === void 0 ? void 0 : _userChallenge_challenge.endDate;\n                            // console.log(\n                            //   `Evaluating challenge ID: ${userChallenge.id}, End Date: ${endDate}, Current Date: ${new Date()}`\n                            // );\n                            return endDate && endDate > new Date();\n                        });\n                        // console.log(`Total active challenges: ${activeChallenges.length}`, activeChallenges);\n                        return [\n                            2,\n                            activeChallenges\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching active challenges:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetch user challenges by userId.\n   * @returns A promise resolving to an array of challenges.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ _proto.fetchUserChallenges = function fetchUserChallenges() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var currentUser, userChallengesRef, q, snapshot, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Reference to the user-challenge collection\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        // Query challenges where userId matches the current user's ID\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", currentUser.id));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // Map documents to an array of Challenge objects\n                        return [\n                            2,\n                            snapshot.docs.map(function(doc) {\n                                return (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                    id: doc.id\n                                }, doc.data());\n                            })\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges:\", error);\n                        throw new Error(\"Failed to fetch user challenges\");\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    //update the workout summary,\n    _proto.updateWorkoutSummary = function updateWorkoutSummary(param) {\n        var userId = param.userId, workoutId = param.workoutId, summary = param.summary;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var summaryRef, summaryData, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"No user ID provided\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        // Create a reference to the collection\n                        summaryRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSummary\", summary.id);\n                        // Convert summary to a plain object for Firestore\n                        summaryData = {\n                            id: summary.id,\n                            workoutId: summary.workoutId,\n                            exercises: summary.exercises,\n                            bodyParts: summary.bodyParts,\n                            secondaryBodyParts: summary.secondaryBodyParts,\n                            workoutTitle: summary.workoutTitle,\n                            caloriesBurned: summary.caloriesBurned,\n                            workoutRating: summary.workoutRating,\n                            exercisesCompleted: summary.exercisesCompleted,\n                            aiInsight: summary.aiInsight,\n                            recommendations: summary.recommendations,\n                            gifURLs: summary.gifURLs,\n                            recommendedWork: summary.recommendedWork,\n                            isCompleted: summary.isCompleted,\n                            createdAt: summary.createdAt,\n                            updatedAt: new Date(),\n                            completedAt: summary.completedAt,\n                            duration: summary.duration\n                        };\n                        // Set data with merge enabled (equivalent to Swift's setData with merge: true)\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(summaryRef, summaryData, {\n                                merge: true\n                            })\n                        ];\n                    case 2:\n                        _state.sent();\n                        console.log(\"Workout summary document updated successfully\");\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error updating workout summary:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.updateWorkoutLogs = function updateWorkoutLogs(param) {\n        var userId = param.userId, workoutId = param.workoutId, logs = param.logs;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var workoutRef, logsRef, batch, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        // Update logs in Firestore\n                        workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", workoutId);\n                        // Update logs subcollection\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\");\n                        // Batch write to update logs\n                        batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n                        logs.forEach(function(log) {\n                            var logDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(logsRef, log.id);\n                            batch.update(logDocRef, {\n                                isCompleted: log.isCompleted,\n                                logs: log.logs,\n                                updatedAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_5__.serverTimestamp)()\n                            });\n                        });\n                        return [\n                            4,\n                            batch.commit()\n                        ];\n                    case 1:\n                        _state.sent();\n                        return [\n                            3,\n                            3\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error updating workout logs:\", error);\n                        throw error;\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetch the workout session from Firestore, returning { workout, logs }.\n   * Checks first for a QueuedUp session, then for InProgress.\n   */ _proto.fetchCurrentWorkoutSession = function fetchCurrentWorkoutSession(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var exerciseSnapshot, videoSnapshot, exerciseVideos, exercisesWithVideos, workoutSessionsRef, q, snap;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"No user ID provided\");\n                        }\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        // Map videos to exercises\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseVideo.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        exercisesWithVideos = exerciseSnapshot.docs.map(function(doc) {\n                            var exercise = _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: doc.id\n                            }, doc.data()));\n                            // Attach videos to exercise\n                            var matchingVideos = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            });\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({}, exercise), {\n                                videos: matchingVideos\n                            });\n                        });\n                        // Reference to user's workoutSessions\n                        workoutSessionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\");\n                        // 1) Check for QueuedUp\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(workoutSessionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", _workout_types__WEBPACK_IMPORTED_MODULE_4__.WorkoutStatus.QueuedUp));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 3:\n                        snap = _state.sent();\n                        if (!snap.empty) {\n                            return [\n                                2,\n                                _this.processWorkoutSessionDocument(snap.docs[0], exercisesWithVideos)\n                            ];\n                        }\n                        // 2) Check for InProgress\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(workoutSessionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", _workout_types__WEBPACK_IMPORTED_MODULE_4__.WorkoutStatus.InProgress));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 4:\n                        snap = _state.sent();\n                        if (!snap.empty) {\n                            return [\n                                2,\n                                _this.processWorkoutSessionDocument(snap.docs[0], exercisesWithVideos)\n                            ];\n                        }\n                        // None found\n                        return [\n                            2,\n                            {\n                                workout: null,\n                                logs: null\n                            }\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.cancelWorkoutSession = function cancelWorkoutSession(userId, workoutId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var logsRef, logsSnapshot, logBatch, workoutSessionRef, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            5,\n                            ,\n                            6\n                        ]);\n                        // 1. Delete all logs in the logs subcollection\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", workoutId, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 1:\n                        logsSnapshot = _state.sent();\n                        logBatch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n                        if (!!logsSnapshot.empty) return [\n                            3,\n                            3\n                        ];\n                        logsSnapshot.docs.forEach(function(logDoc) {\n                            logBatch[\"delete\"](logDoc.ref);\n                        });\n                        return [\n                            4,\n                            logBatch.commit()\n                        ];\n                    case 2:\n                        _state.sent();\n                        _state.label = 3;\n                    case 3:\n                        // 2. Delete the workout session document\n                        workoutSessionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", workoutId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.deleteDoc)(workoutSessionRef)\n                        ];\n                    case 4:\n                        _state.sent();\n                        return [\n                            3,\n                            6\n                        ];\n                    case 5:\n                        error = _state.sent();\n                        console.error(\"Error canceling workout session:\", error);\n                        throw error;\n                    case 6:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchAndMapExercisesWithVideos = function fetchAndMapExercisesWithVideos() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var exerciseSnapshot, exercises, videoSnapshot, exerciseVideos, exercisesWithVideos, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseVideo.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        // console.log(`Fetched ${exerciseVideos.length} exercise videos`);\n                        // 3. Map videos to exercises\n                        exercisesWithVideos = exercises.map(function(exercise) {\n                            var matchingVideos = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            });\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({}, exercise), {\n                                videos: matchingVideos\n                            });\n                        });\n                        // console.log('Finished mapping exercises with videos');\n                        // console.log(`Total exercises with videos: ${exercisesWithVideos.length}`);\n                        return [\n                            2,\n                            exercisesWithVideos\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching and mapping exercises with videos:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Helper to build the Workout object + any logs from the snapshot.\n   */ _proto.fetchAllWorkoutSessions = function fetchAllWorkoutSessions(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var exerciseSnapshot, exercises, videoSnapshot, exerciseVideos, exercisesWithVideos, workoutSessionsRef, snap, sessions, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"No user ID provided\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            6,\n                            ,\n                            7\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 2:\n                        exerciseSnapshot = _state.sent();\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 3:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseVideo.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        // 3. Map videos to exercises\n                        exercisesWithVideos = exercises.map(function(exercise) {\n                            var matchingVideos = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            });\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({}, exercise), {\n                                videos: matchingVideos\n                            });\n                        });\n                        // 4. Fetch workout sessions\n                        workoutSessionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(workoutSessionsRef)\n                        ];\n                    case 4:\n                        snap = _state.sent();\n                        if (snap.empty) {\n                            console.log(\"No workout sessions found for user\");\n                            return [\n                                2,\n                                []\n                            ];\n                        }\n                        return [\n                            4,\n                            Promise.all(snap.docs.map(function() {\n                                var _ref = (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function(doc) {\n                                    var sessionData;\n                                    return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                                        switch(_state.label){\n                                            case 0:\n                                                return [\n                                                    4,\n                                                    _this.processWorkoutSessionDocument(doc, exercisesWithVideos)\n                                                ];\n                                            case 1:\n                                                sessionData = _state.sent();\n                                                // Sort the logs by the 'order' property, if available\n                                                if (sessionData.logs) {\n                                                    sessionData.logs.sort(function(a, b) {\n                                                        var _a_order;\n                                                        var orderA = (_a_order = a.order) !== null && _a_order !== void 0 ? _a_order : 0;\n                                                        var _b_order;\n                                                        var orderB = (_b_order = b.order) !== null && _b_order !== void 0 ? _b_order : 0;\n                                                        return orderA - orderB;\n                                                    });\n                                                }\n                                                return [\n                                                    2,\n                                                    sessionData\n                                                ];\n                                        }\n                                    });\n                                });\n                                return function(doc) {\n                                    return _ref.apply(this, arguments);\n                                };\n                            }()))\n                        ];\n                    case 5:\n                        sessions = _state.sent();\n                        // console.log(`Found ${sessions.length} workout sessions`);\n                        return [\n                            2,\n                            sessions\n                        ];\n                    case 6:\n                        error = _state.sent();\n                        console.error(\"Error fetching workout sessions:\", error);\n                        throw error;\n                    case 7:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.updateCollection = function updateCollection(collection) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var collRef, newDocRef, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        collRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\");\n                        // If collection.id is empty, generate a new doc ID and assign it.\n                        if (!collection.id || collection.id.trim() === \"\") {\n                            newDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(collRef);\n                            collection.id = newDocRef.id;\n                        }\n                        // Ensure the challenge id matches the collection id.\n                        if (collection.challenge) {\n                            collection.challenge.id = collection.id;\n                        }\n                        // Update the updatedAt field.\n                        collection.updatedAt = new Date();\n                        // Save the collection to Firestore.\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(collRef, collection.id), collection.toDictionary())\n                        ];\n                    case 1:\n                        _state.sent();\n                        console.log(\"Collection updated successfully\");\n                        return [\n                            2,\n                            collection\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error updating collection document:\", error);\n                        throw new Error(\"Error while updating the collection\");\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.processWorkoutSessionDocument = function processWorkoutSessionDocument(workoutDoc, exercisesWithVideos) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var data, mappedExercises, workout, logsRef, logsSnapshot, logs;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        data = workoutDoc.data();\n                        // Map exercises with their full data and videos\n                        mappedExercises = (data.exercises || []).map(function(exerciseRef) {\n                            var _exerciseRef_exercise_name, _exerciseRef_exercise;\n                            // Find the full exercise with videos\n                            var exerciseNameLower = (_exerciseRef_exercise = exerciseRef.exercise) === null || _exerciseRef_exercise === void 0 ? void 0 : (_exerciseRef_exercise_name = _exerciseRef_exercise.name) === null || _exerciseRef_exercise_name === void 0 ? void 0 : _exerciseRef_exercise_name.toLowerCase().trim();\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name.toLowerCase().trim() === exerciseNameLower;\n                            });\n                            // If full exercise found, return it, otherwise use the original\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({}, exerciseRef), {\n                                exercise: fullExercise || exerciseRef.exercise\n                            });\n                        });\n                        // Create the workout with mapped exercises\n                        workout = new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Workout({\n                            id: workoutDoc.id,\n                            roundWorkoutId: data.roundWorkoutId || \"\",\n                            exercises: mappedExercises,\n                            title: data.title || \"\",\n                            description: data.description || \"\",\n                            duration: data.duration || 0,\n                            useAuthorContent: data.useAuthorContent || false,\n                            isCompleted: data.isCompleted || false,\n                            workoutStatus: data.workoutStatus || _workout_types__WEBPACK_IMPORTED_MODULE_4__.WorkoutStatus.Archived,\n                            author: data.author || \"\",\n                            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.createdAt),\n                            updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.updatedAt),\n                            startTime: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.startTime),\n                            collectionId: data.collectionId,\n                            challenge: data.challenge,\n                            logs: (data.logs || []).map(function(logData) {\n                                var _logData_exercise_name, _logData_exercise;\n                                // Map logs with full exercises\n                                var exerciseNameLower = (_logData_exercise = logData.exercise) === null || _logData_exercise === void 0 ? void 0 : (_logData_exercise_name = _logData_exercise.name) === null || _logData_exercise_name === void 0 ? void 0 : _logData_exercise_name.toLowerCase().trim();\n                                var fullExercise = exercisesWithVideos.find(function(ex) {\n                                    return ex.name.toLowerCase().trim() === exerciseNameLower;\n                                });\n                                return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({}, logData), {\n                                    exercise: fullExercise || logData.exercise\n                                });\n                            }),\n                            workoutRating: data.workoutRating,\n                            order: data.order,\n                            zone: data.zone || _workout_types__WEBPACK_IMPORTED_MODULE_4__.BodyZone.FullBody\n                        });\n                        console.log(\"The Workout ID is: \" + workout.id);\n                        // Fetch logs from subcollection\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutDoc.ref, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 1:\n                        logsSnapshot = _state.sent();\n                        logs = logsSnapshot.docs.map(function(logDoc) {\n                            var _logData_exercise_name, _logData_exercise;\n                            var logData = logDoc.data();\n                            // Find the full exercise with videos\n                            var exerciseNameLower = (_logData_exercise = logData.exercise) === null || _logData_exercise === void 0 ? void 0 : (_logData_exercise_name = _logData_exercise.name) === null || _logData_exercise_name === void 0 ? void 0 : _logData_exercise_name.toLowerCase().trim();\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name.toLowerCase().trim() === exerciseNameLower;\n                            });\n                            // Prepare log data with full exercise\n                            var preparedLogData = (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({}, logData), {\n                                id: logDoc.id,\n                                workoutId: workout.id,\n                                exercise: fullExercise || logData.exercise,\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(logData.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(logData.updatedAt)\n                            });\n                            // Use the ExerciseLog constructor to ensure proper mapping\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseLog(preparedLogData);\n                        });\n                        return [\n                            2,\n                            {\n                                workout: workout,\n                                logs: logs\n                            }\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.saveWorkoutSession = function saveWorkoutSession(param) {\n        var userId = param.userId, workout = param.workout, logs = param.logs;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var currentDate, cleanWorkout, workoutSessionRef, logsRef, logBatch, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) throw new Error(\"No user ID provided\");\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            4,\n                            ,\n                            5\n                        ]);\n                        currentDate = new Date();\n                        cleanWorkout = new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Workout((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({}, workout), {\n                            roundWorkoutId: \"\".concat(workout.id, \"-\").concat(currentDate.getTime()),\n                            workoutStatus: _workout_types__WEBPACK_IMPORTED_MODULE_4__.WorkoutStatus.QueuedUp,\n                            createdAt: currentDate,\n                            updatedAt: currentDate,\n                            startTime: currentDate,\n                            logs: []\n                        }));\n                        workoutSessionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\"));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(workoutSessionRef, cleanWorkout)\n                        ];\n                    case 2:\n                        _state.sent();\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutSessionRef, \"logs\");\n                        logBatch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n                        logs.forEach(function(log, index) {\n                            var logDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(logsRef, \"\".concat(log.id, \"-\").concat(currentDate.getTime()));\n                            logBatch.set(logDocRef, {\n                                id: logDocRef.id,\n                                workoutId: workoutSessionRef.id,\n                                exercise: {\n                                    id: log.exercise.id,\n                                    name: log.exercise.name,\n                                    category: log.exercise.category,\n                                    videos: log.exercise.videos || []\n                                },\n                                order: index,\n                                createdAt: currentDate,\n                                updatedAt: currentDate,\n                                logSubmitted: false,\n                                isCompleted: false\n                            });\n                        });\n                        return [\n                            4,\n                            logBatch.commit()\n                        ];\n                    case 3:\n                        _state.sent();\n                        return [\n                            2,\n                            cleanWorkout\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error saving workout session:\", error);\n                        throw error;\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Example \"join challenge\" method using the client SDK (no admin privileges).\n   * This creates a doc in `user-challenge` with the userId, challengeId, etc.\n   */ _proto.joinChallenge = function joinChallenge(param) {\n        var username = param.username, challengeId = param.challengeId;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var currentUser, usersRef, userQuery, userSnapshot, userDoc, userData, userId, challengeRef, challengeSnap, challenge, userChallengeId, userChallengeData;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        // 1) Make sure we have a signed-in user\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!currentUser) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // 2) Find the user doc by username\n                        usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\");\n                        userQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"username\", \"==\", username));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(userQuery)\n                        ];\n                    case 1:\n                        userSnapshot = _state.sent();\n                        if (userSnapshot.empty) {\n                            throw new Error(\"User not found\");\n                        }\n                        userDoc = userSnapshot.docs[0];\n                        userData = userDoc.data();\n                        userId = userDoc.id;\n                        // 3) Check if the challenge doc exists\n                        challengeRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\", challengeId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(challengeRef)\n                        ];\n                    case 2:\n                        challengeSnap = _state.sent();\n                        if (!challengeSnap.exists()) {\n                            throw new Error(\"Challenge not found\");\n                        }\n                        challenge = challengeSnap.data();\n                        // 4) Build new user-challenge document\n                        userChallengeId = \"\".concat(challengeId, \"-\").concat(userId, \"-\").concat(Date.now());\n                        userChallengeData = {\n                            id: userChallengeId,\n                            challenge: challenge,\n                            challengeId: challengeId,\n                            userId: userId,\n                            fcmToken: userData.fcmToken || \"\",\n                            profileImage: userData.profileImage || {},\n                            progress: 0,\n                            completedWorkouts: [],\n                            isCompleted: false,\n                            uid: userId,\n                            location: userData.location || null,\n                            city: \"\",\n                            country: \"\",\n                            timezone: \"\",\n                            username: username,\n                            joinDate: new Date(),\n                            createdAt: new Date(),\n                            updatedAt: new Date(),\n                            pulsePoints: {\n                                baseCompletion: 0,\n                                firstCompletion: 0,\n                                streakBonus: 0,\n                                checkInBonus: 0,\n                                effortRating: 0,\n                                chatParticipation: 0,\n                                locationCheckin: 0,\n                                contentEngagement: 0,\n                                encouragementSent: 0,\n                                encouragementReceived: 0\n                            },\n                            currentStreak: 0,\n                            encouragedUsers: [],\n                            encouragedByUsers: [],\n                            checkIns: []\n                        };\n                        // 5) Store user-challenge doc\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\", userChallengeId), userChallengeData)\n                        ];\n                    case 3:\n                        _state.sent();\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    (0,_swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_14__._)(WorkoutService, [\n        {\n            key: \"currentWorkout\",\n            get: // Getter for current workout\n            function get() {\n                return this._currentWorkout;\n            },\n            set: // Setter for current workout\n            function set(workout) {\n                this._currentWorkout = workout;\n            }\n        },\n        {\n            key: \"currentWorkoutLogs\",\n            get: // Getter for current workout logs\n            function get() {\n                return this._currentWorkoutLogs;\n            },\n            set: // Setter for current workout logs\n            function set(logs) {\n                this._currentWorkoutLogs = logs;\n            }\n        }\n    ]);\n    return WorkoutService;\n}();\nvar workoutService = new WorkoutService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL2ZpcmViYXNlL3dvcmtvdXQvc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsc0NBQXNDOzs7Ozs7OztBQWdCVjtBQUVHO0FBQ087QUFDd0c7QUFFN0Q7QUFDcEI7QUFDM0I7QUFDMkMsQ0FBQyx5QkFBeUI7QUFDakM7QUFDMEI7QUFVaEcsbUNBQUs7O2FBQUMyQjsrRUFBQUE7YUFDSUMsa0JBQWtDO2FBQ2xDQyxzQkFBcUMsRUFBRTs7aUJBRjNDRjtJQXdCSjs7R0FFQyxHQUNELE9BQU1HLG1CQUdMLEdBSEQsU0FBTUEsb0JBQW9CQyxNQUFjOztlQUF4QztnQkFDUUM7Ozs7d0JBQVU7OzRCQUFNLE1BQUtDLDBCQUEwQixDQUFDRjs7O3dCQUFoREMsVUFBVTt3QkFDaEI7OzRCQUFPQSxRQUFRRSxPQUFPOzs7O1FBQ3hCOztJQUVBLE9BQU1DLGdCQXlFTCxHQXpFRCxTQUFNQSxpQkFBaUJKLE1BQWM7O2VBQXJDO2dCQU1RSyxhQUlFQyxxQkFHQUMsa0JBQ0FDLFVBR0QsZ0ZBQU1DLFlBQ0hDLGFBQ0FDLFdBR0FDLGlCQVlBVCxTQXVCQVUsU0FDQUMsbUJBVURDLE9BQ0RDOzs7O3dCQXBFUixJQUFJLENBQUNoQixRQUFROzRCQUNYLE1BQU0sSUFBSWlCLE1BQU07d0JBQ2xCO3dCQUVBLDZDQUE2Qzt3QkFDdkNaLGNBQWNwQyw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUUsU0FBU29CLFFBQVE7Ozs7Ozs7Ozt3QkFJdEI7OzRCQUFNLE1BQUtrQiw4QkFBOEI7Ozt3QkFBL0RaLHNCQUFzQjt3QkFHSDs7NEJBQU1uQywyREFBT0EsQ0FBQ2tDOzs7d0JBQWpDRSxtQkFBbUI7d0JBQ25CQzt3QkFHRDs7Ozs7Ozs7O3dCQUFBLFlBQW9CRCxpQkFBaUJZLElBQUk7OzsrQkFBekM7Ozs7d0JBQU1WLGFBQU47d0JBQ0dDLGNBQWNELFdBQVdXLElBQUk7d0JBQzdCVCxZQUFZRixXQUFXWSxFQUFFO3dCQUUvQiw0RUFBNEU7d0JB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LHVDQUFFQSxFQUFFLGtCQUFrQndRLGtCQUFrQkM7Ozt3QkFBekQ7Ozs7OztRQUNGOztrRUF2ekNJelA7O1lBS0FtUixLQUFBQTtpQkFBSiw2QkFENkI7WUFDN0I7Z0JBQ0UsT0FBTyxJQUFJLENBQUNsUixlQUFlO1lBQzdCO2lCQUdBLDZCQUQ2QjtZQUM3QixhQUFtQk0sT0FBdUI7Z0JBQ3hDLElBQUksQ0FBQ04sZUFBZSxHQUFHTTtZQUN6Qjs7O1lBR0k2USxLQUFBQTtpQkFBSixrQ0FEa0M7WUFDbEM7Z0JBQ0UsT0FBTyxJQUFJLENBQUNsUixtQkFBbUI7WUFDakM7aUJBR0Esa0NBRGtDO1lBQ2xDLGFBQXVCcUMsSUFBbUI7Z0JBQ3hDLElBQUksQ0FBQ3JDLG1CQUFtQixHQUFHcUM7WUFDN0I7OztXQXRCSXZDOztBQTB6Q0MsSUFBTXFSLGlCQUFpQixJQUFJclIsaUJBQWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9hcGkvZmlyZWJhc2Uvd29ya291dC9zZXJ2aWNlLnRzP2M1ZTIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2FwaS9maXJlYmFzZS93b3Jrb3V0L3NlcnZpY2UudHNcbmltcG9ydCB7XG4gIGNvbGxlY3Rpb24sXG4gIGRvYyxcbiAgZ2V0RG9jcyxcbiAgZ2V0RG9jLFxuICB1cGRhdGVEb2MsXG4gIHF1ZXJ5LFxuICB3aGVyZSxcbiAgb3JkZXJCeSwgXG4gIERvY3VtZW50RGF0YSxcbiAgUXVlcnlEb2N1bWVudFNuYXBzaG90LFxuICBjb2xsZWN0aW9uIGFzIGZzQ29sbGVjdGlvbixcbiAgc2V0RG9jLFxuICBkZWxldGVEb2MsXG4gIHdyaXRlQmF0Y2hcbn0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcblxuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi9jb25maWcnO1xuaW1wb3J0IHsgdXNlclNlcnZpY2UgfSBmcm9tICcuLi91c2VyJztcbmltcG9ydCB7IEV4ZXJjaXNlTG9nLCBFeGVyY2lzZUNhdGVnb3J5LCBFeGVyY2lzZSwgQm9keVBhcnQsIEV4ZXJjaXNlVmlkZW8sIEV4ZXJjaXNlQXV0aG9yLCBFeGVyY2lzZVZpZGVvVmlzaWJpbGl0eSB9IGZyb20gJy4uL2V4ZXJjaXNlL3R5cGVzJztcbmltcG9ydCB7UHJvZmlsZUltYWdlfSBmcm9tICcuLi91c2VyL3R5cGVzJ1xuaW1wb3J0IHsgV29ya291dCwgV29ya291dFN1bW1hcnksIEJvZHlab25lLCBJbnRyb1ZpZGVvIH0gZnJvbSAnLi4vd29ya291dC90eXBlcyc7XG5pbXBvcnQgeyBXb3Jrb3V0U3RhdHVzLCBTd2VhdGxpc3RDb2xsZWN0aW9uIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBmb3JtYXQgfSBmcm9tICdkYXRlLWZucyc7IFxuaW1wb3J0IHsgY29udmVydFRpbWVzdGFtcCwgc2VydmVyVGltZXN0YW1wIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdGltZXN0YW1wJzsgLy8gQWRqdXN0IHRoZSBpbXBvcnQgcGF0aFxuaW1wb3J0IHsgY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL2Zvcm1hdERhdGUnO1xuaW1wb3J0IHsgQ2hhbGxlbmdlLCBDaGFsbGVuZ2VTdGF0dXMsIFVzZXJDaGFsbGVuZ2UgfSBmcm9tICcuLi8uLi8uLi9hcGkvZmlyZWJhc2Uvd29ya291dC90eXBlcyc7XG5cblxuaW50ZXJmYWNlIEZpcmVzdG9yZUVycm9yIHtcbiAgY29kZTogc3RyaW5nO1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgc3RhY2s/OiBzdHJpbmc7XG59XG5cbmNsYXNzIFdvcmtvdXRTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBfY3VycmVudFdvcmtvdXQ6IFdvcmtvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBfY3VycmVudFdvcmtvdXRMb2dzOiBFeGVyY2lzZUxvZ1tdID0gW107XG5cbiAgLy8gR2V0dGVyIGZvciBjdXJyZW50IHdvcmtvdXRcbiAgZ2V0IGN1cnJlbnRXb3Jrb3V0KCk6IFdvcmtvdXQgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudFdvcmtvdXQ7XG4gIH1cblxuICAvLyBTZXR0ZXIgZm9yIGN1cnJlbnQgd29ya291dFxuICBzZXQgY3VycmVudFdvcmtvdXQod29ya291dDogV29ya291dCB8IG51bGwpIHtcbiAgICB0aGlzLl9jdXJyZW50V29ya291dCA9IHdvcmtvdXQ7XG4gIH1cblxuICAvLyBHZXR0ZXIgZm9yIGN1cnJlbnQgd29ya291dCBsb2dzXG4gIGdldCBjdXJyZW50V29ya291dExvZ3MoKTogRXhlcmNpc2VMb2dbXSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRXb3Jrb3V0TG9ncztcbiAgfVxuXG4gIC8vIFNldHRlciBmb3IgY3VycmVudCB3b3Jrb3V0IGxvZ3NcbiAgc2V0IGN1cnJlbnRXb3Jrb3V0TG9ncyhsb2dzOiBFeGVyY2lzZUxvZ1tdKSB7XG4gICAgdGhpcy5fY3VycmVudFdvcmtvdXRMb2dzID0gbG9ncztcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCB0aGUgdXNlcidzIGN1cnJlbnQgd29ya291dCAoZWl0aGVyIFF1ZXVlZFVwIG9yIEluUHJvZ3Jlc3MpLlxuICAgKi9cbiAgYXN5bmMgZmV0Y2hDdXJyZW50V29ya291dCh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8V29ya291dCB8IG51bGw+IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgdGhpcy5mZXRjaEN1cnJlbnRXb3Jrb3V0U2Vzc2lvbih1c2VySWQpO1xuICAgIHJldHVybiBzZXNzaW9uLndvcmtvdXQ7XG4gIH1cblxuICBhc3luYyBnZXRBbGxTd2VhdGxpc3RzKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxXb3Jrb3V0W10+IHtcbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIElEIGlzIHJlcXVpcmVkJyk7XG4gICAgfVxuICBcbiAgICAvLyBSZWZlcmVuY2UgdG8gdGhlIHVzZXIncyB3b3Jrb3V0IGNvbGxlY3Rpb25cbiAgICBjb25zdCB3b3Jrb3V0c1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycsIHVzZXJJZCwgJ015Q3JlYXRlZFdvcmtvdXRzJyk7XG4gIFxuICAgIHRyeSB7XG4gICAgICAvLyBGZXRjaCBleGVyY2lzZXMgd2l0aCB2aWRlb3NcbiAgICAgIGNvbnN0IGV4ZXJjaXNlc1dpdGhWaWRlb3MgPSBhd2FpdCB0aGlzLmZldGNoQW5kTWFwRXhlcmNpc2VzV2l0aFZpZGVvcygpO1xuICBcbiAgICAgIC8vIFF1ZXJ5IHRvIGZldGNoIGFsbCB3b3Jrb3V0c1xuICAgICAgY29uc3Qgd29ya291dHNTbmFwc2hvdCA9IGF3YWl0IGdldERvY3Mod29ya291dHNSZWYpO1xuICAgICAgY29uc3Qgd29ya291dHM6IFdvcmtvdXRbXSA9IFtdO1xuICBcbiAgICAgIC8vIFByb2Nlc3MgZWFjaCB3b3Jrb3V0IGRvY3VtZW50XG4gICAgICBmb3IgKGNvbnN0IHdvcmtvdXREb2Mgb2Ygd29ya291dHNTbmFwc2hvdC5kb2NzKSB7XG4gICAgICAgIGNvbnN0IHdvcmtvdXREYXRhID0gd29ya291dERvYy5kYXRhKCk7XG4gICAgICAgIGNvbnN0IHdvcmtvdXRJZCA9IHdvcmtvdXREb2MuaWQ7XG4gIFxuICAgICAgICAvLyBNYXAgdGhlIGV4ZXJjaXNlcyBpbiB0aGUgd29ya291dCB0byB0aGUgZnVsbCBleGVyY2lzZSBvYmplY3RzIHdpdGggdmlkZW9zXG4gICAgICAgIGNvbnN0IG1hcHBlZEV4ZXJjaXNlcyA9ICh3b3Jrb3V0RGF0YS5leGVyY2lzZXMgfHwgW10pLm1hcCgoZXhlcmNpc2VSZWY6IGFueSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGZ1bGxFeGVyY2lzZSA9IGV4ZXJjaXNlc1dpdGhWaWRlb3MuZmluZChleCA9PiBleC5uYW1lID09PSBleGVyY2lzZVJlZi5leGVyY2lzZS5uYW1lKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlRoaXMgaXMgdGhlIG1hcHBlZCBleGVyY2lzZTogXCIgKyBmdWxsRXhlcmNpc2UpO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmV4ZXJjaXNlUmVmLFxuICAgICAgICAgICAgZXhlcmNpc2U6IGZ1bGxFeGVyY2lzZSB8fCBleGVyY2lzZVJlZlxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gIFxuICAgICAgICAvLyBQYXJzZSB3b3Jrb3V0IGRhdGEgaW50byB0aGUgZGVzaXJlZCBzdHJ1Y3R1cmVcbiAgICAgICAgY29uc3Qgd29ya291dCA9IG5ldyBXb3Jrb3V0KHtcbiAgICAgICAgICBpZDogd29ya291dERhdGEuaWQgfHwgJycsXG4gICAgICAgICAgcm91bmRXb3Jrb3V0SWQ6IHdvcmtvdXREYXRhLnJvdW5kV29ya291dElkIHx8ICcnLFxuICAgICAgICAgIGNvbGxlY3Rpb25JZDogd29ya291dERhdGEuY29sbGVjdGlvbklkLFxuICAgICAgICAgIGV4ZXJjaXNlczogbWFwcGVkRXhlcmNpc2VzLFxuICAgICAgICAgIGNoYWxsZW5nZTogd29ya291dERhdGEuY2hhbGxlbmdlLFxuICAgICAgICAgIGxvZ3M6IFtdLFxuICAgICAgICAgIHRpdGxlOiB3b3Jrb3V0RGF0YS50aXRsZSB8fCAnJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogd29ya291dERhdGEuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgICAgZHVyYXRpb246IHdvcmtvdXREYXRhLmR1cmF0aW9uIHx8IDAsXG4gICAgICAgICAgd29ya291dFJhdGluZzogd29ya291dERhdGEud29ya291dFJhdGluZyxcbiAgICAgICAgICB1c2VBdXRob3JDb250ZW50OiB3b3Jrb3V0RGF0YS51c2VBdXRob3JDb250ZW50IHx8IGZhbHNlLFxuICAgICAgICAgIGlzQ29tcGxldGVkOiB3b3Jrb3V0RGF0YS5pc0NvbXBsZXRlZCB8fCBmYWxzZSxcbiAgICAgICAgICB3b3Jrb3V0U3RhdHVzOiB3b3Jrb3V0RGF0YS53b3Jrb3V0U3RhdHVzIHx8ICdub3RTdGFydGVkJyxcbiAgICAgICAgICBzdGFydFRpbWU6IHdvcmtvdXREYXRhLnN0YXJ0VGltZSA/IG5ldyBEYXRlKHdvcmtvdXREYXRhLnN0YXJ0VGltZSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgb3JkZXI6IHdvcmtvdXREYXRhLm9yZGVyLFxuICAgICAgICAgIGF1dGhvcjogd29ya291dERhdGEuYXV0aG9yIHx8IHVzZXJJZCxcbiAgICAgICAgICBjcmVhdGVkQXQ6IHdvcmtvdXREYXRhLmNyZWF0ZWRBdCA/IG5ldyBEYXRlKHdvcmtvdXREYXRhLmNyZWF0ZWRBdCkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogd29ya291dERhdGEudXBkYXRlZEF0ID8gbmV3IERhdGUod29ya291dERhdGEudXBkYXRlZEF0KSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgem9uZTogd29ya291dERhdGEuem9uZSB8fCAnRlVMTF9CT0RZJyxcbiAgICAgICAgfSk7ICAgICAgICBcbiAgXG4gICAgICAgIC8vIEZldGNoIGFuZCBwcm9jZXNzIGxvZ3NcbiAgICAgICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycsIHVzZXJJZCwgJ015Q3JlYXRlZFdvcmtvdXRzJywgd29ya291dElkLCAnbG9ncycpO1xuICAgICAgICBjb25zdCBsb2dzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGxvZ3NSZWYpO1xuICAgICAgICB3b3Jrb3V0LmxvZ3MgPSBsb2dzU25hcHNob3QuZG9jcy5tYXAoKGxvZ0RvYykgPT4gKHtcbiAgICAgICAgICAuLi5sb2dEb2MuZGF0YSgpLFxuICAgICAgICAgIGlkOiBsb2dEb2MuaWQsXG4gICAgICAgIH0pKSBhcyBFeGVyY2lzZUxvZ1tdO1xuICBcbiAgICAgICAgd29ya291dHMucHVzaCh3b3Jrb3V0KTtcbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gd29ya291dHM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGZpcmVzdG9yZUVycm9yID0gZXJyb3IgYXMgRmlyZXN0b3JlRXJyb3I7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzd2VhdGxpc3RzOicsIGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggc3dlYXRsaXN0cycpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJDaGFsbGVuZ2VzQnlDaGFsbGVuZ2VJZChjaGFsbGVuZ2VJZDogc3RyaW5nKTogUHJvbWlzZTx7IHVzZXJDaGFsbGVuZ2VzOiBVc2VyQ2hhbGxlbmdlW107IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgICBjb25zdCB1c2VyQ2hhbGxlbmdlc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VyLWNoYWxsZW5nZScpO1xuICAgIGNvbnN0IHEgPSBxdWVyeSh1c2VyQ2hhbGxlbmdlc1JlZiwgd2hlcmUoJ2NoYWxsZW5nZUlkJywgJz09JywgY2hhbGxlbmdlSWQpKTtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgICAgY29uc3QgdXNlckNoYWxsZW5nZXM6IFVzZXJDaGFsbGVuZ2VbXSA9IHNuYXBzaG90LmRvY3MubWFwKChkb2M6IERvY3VtZW50RGF0YSkgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyQ2hhbGxlbmdlKGRvYy5pZCwgZGF0YSk7XG4gICAgICB9KTtcbiAgICAgIGlmICh1c2VyQ2hhbGxlbmdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiB7IHVzZXJDaGFsbGVuZ2VzIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4geyB1c2VyQ2hhbGxlbmdlczogW10sIGVycm9yOiAnTm8gdXNlciBjaGFsbGVuZ2VzIGZvdW5kIGZvciB0aGlzIGNoYWxsZW5nZS4nIH07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgY2hhbGxlbmdlcyBieSBjaGFsbGVuZ2VJZDonLCBlcnJvcik7XG4gICAgICByZXR1cm4geyB1c2VyQ2hhbGxlbmdlczogW10sIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyB9O1xuICAgIH1cbiAgfVxuICBcbiAgLyoqXG4gICAqIEZldGNoZXMgd29ya291dCBzdW1tYXJpZXMgZm9yIGEgc3BlY2lmaWMgZGF0ZS5cbiAgICogQHBhcmFtIGRhdGUgLSBUaGUgZGF0ZSBmb3Igd2hpY2ggd29ya291dCBzdW1tYXJpZXMgYXJlIGJlaW5nIGZldGNoZWQuXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSByZXNvbHZpbmcgdG8gYW4gYXJyYXkgb2Ygd29ya291dCBzdW1tYXJpZXMuXG4gICAqIEB0aHJvd3MgSWYgbm8gdXNlciBpcyBzaWduZWQgaW4gb3IgaWYgdGhlIEZpcmVzdG9yZSBxdWVyeSBmYWlscy5cbiAgICovXG4gIGFzeW5jIGZldGNoV29ya291dFN1bW1hcmllcyhkYXRlOiBEYXRlKTogUHJvbWlzZTxXb3Jrb3V0U3VtbWFyeVtdPiB7XG4gICAgY29uc3QgY3VycmVudFVzZXIgPSB1c2VyU2VydmljZS5jdXJyZW50VXNlcjtcbiAgICBpZiAoIWN1cnJlbnRVc2VyPy5pZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGlzIHNpZ25lZCBpbicpO1xuICAgIH1cblxuICAgIC8vIEZvcm1hdCB0aGUgZGF0ZSB0byBtYXRjaCB0aGUgZm9ybWF0IGluIEZpcmVzdG9yZSAoJ01NLWRkLXl5eXknKVxuICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSBmb3JtYXQoZGF0ZSwgJ01NLWRkLXl5eXknKTtcblxuICAgIC8vIFJlZmVyZW5jZSB0byB0aGUgdXNlcidzIHdvcmtvdXRTdW1tYXJpZXMgc3ViY29sbGVjdGlvblxuICAgIGNvbnN0IHN1bW1hcmllc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycsIGN1cnJlbnRVc2VyLmlkLCAnd29ya291dFN1bW1hcmllcycpO1xuXG4gICAgLy8gQ3JlYXRlIGEgcXVlcnkgdG8gZmlsdGVyIGRvY3VtZW50cyBieSB0aGUgc3BlY2lmaWVkIGRhdGVcbiAgICBjb25zdCBxID0gcXVlcnkoc3VtbWFyaWVzUmVmLCB3aGVyZSgnZGF0ZScsICc9PScsIGZvcm1hdHRlZERhdGUpKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG5cbiAgICAgIC8vIE1hcCB0aGUgZG9jdW1lbnRzIHRvIGFuIGFycmF5IG9mIFdvcmtvdXRTdW1tYXJ5IG9iamVjdHNcbiAgICAgIHJldHVybiBzbmFwc2hvdC5kb2NzLm1hcCgoZG9jOiBEb2N1bWVudERhdGEpID0+ICh7XG4gICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgIC4uLmRvYy5kYXRhKCksXG4gICAgICB9KSkgYXMgV29ya291dFN1bW1hcnlbXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZmlyZXN0b3JlRXJyb3IgPSBlcnJvciBhcyBGaXJlc3RvcmVFcnJvcjtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHdvcmtvdXQgc3VtbWFyaWVzOicsIGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZldGNoQWxsV29ya291dFN1bW1hcmllcygpOiBQcm9taXNlPFdvcmtvdXRTdW1tYXJ5W10+IHtcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IHVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyO1xuICAgIGlmICghY3VycmVudFVzZXI/LmlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgfVxuICBcbiAgICAvLyBSZWZlcmVuY2UgdG8gdGhlIHVzZXIncyB3b3Jrb3V0U3VtbWFyaWVzIHN1YmNvbGxlY3Rpb25cbiAgICBjb25zdCBzdW1tYXJpZXNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCBjdXJyZW50VXNlci5pZCwgJ3dvcmtvdXRTdW1tYXJ5Jyk7XG4gIFxuICAgIC8vIFF1ZXJ5IHRvIHJldHJpZXZlIGFsbCB3b3Jrb3V0IHN1bW1hcmllcywgc29ydGVkIGJ5IGBjcmVhdGVkQXRgIGluIGFzY2VuZGluZyBvcmRlclxuICAgIGNvbnN0IHEgPSBxdWVyeShzdW1tYXJpZXNSZWYsIG9yZGVyQnkoJ2NyZWF0ZWRBdCcsICdhc2MnKSk7IC8vIEFkanVzdCBmaWVsZCBuYW1lIGJhc2VkIG9uIHlvdXIgc2NoZW1hXG4gIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gIFxuICAgICAgLy8gTWFwIHRoZSBkb2N1bWVudHMgdG8gYW4gYXJyYXkgb2YgV29ya291dFN1bW1hcnkgb2JqZWN0c1xuICAgICAgcmV0dXJuIHNuYXBzaG90LmRvY3MubWFwKChkb2M6IERvY3VtZW50RGF0YSkgPT4gKHtcbiAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgLi4uZG9jLmRhdGEoKSxcbiAgICAgIH0pKSBhcyBXb3Jrb3V0U3VtbWFyeVtdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBmaXJlc3RvcmVFcnJvciA9IGVycm9yIGFzIEZpcmVzdG9yZUVycm9yO1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYWxsIHdvcmtvdXQgc3VtbWFyaWVzOicsIGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gKiBGZXRjaCB1c2VyIGNoYWxsZW5nZXMgYnkgdXNlcklkLlxuICogQHBhcmFtIHVzZXJJZCBUaGUgSUQgb2YgdGhlIHVzZXIgdG8gZmV0Y2ggY2hhbGxlbmdlcyBmb3IuXG4gKiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIHRvIGFuIGFycmF5IG9mIHVzZXIgY2hhbGxlbmdlcy5cbiAqIEB0aHJvd3MgSWYgdGhlIEZpcmVzdG9yZSBxdWVyeSBmYWlscy5cbiAqL1xuYXN5bmMgZmV0Y2hVc2VyQ2hhbGxlbmdlc0J5VXNlcklkKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyQ2hhbGxlbmdlW10+IHtcbiAgY29uc3QgdXNlckNoYWxsZW5nZXNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlci1jaGFsbGVuZ2UnKTtcbiAgY29uc3QgcSA9IHF1ZXJ5KHVzZXJDaGFsbGVuZ2VzUmVmLCB3aGVyZSgndXNlcklkJywgJz09JywgdXNlcklkKSk7XG5cbiAgdHJ5IHtcbiAgICAvLyBjb25zb2xlLmxvZyhgRmV0Y2hpbmcgY2hhbGxlbmdlcyBmb3IgdXNlciBJRDogJHt1c2VySWR9YCk7XG5cbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG5cbiAgICAvLyBjb25zb2xlLmxvZyhgVG90YWwgY2hhbGxlbmdlcyBmZXRjaGVkOiAke3NuYXBzaG90LmRvY3MubGVuZ3RofWApO1xuXG4gICAgY29uc3QgdXNlckNoYWxsZW5nZXMgPSBzbmFwc2hvdC5kb2NzLm1hcCgoZG9jOiBEb2N1bWVudERhdGEpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgLy8gY29uc29sZS5sb2coYFByb2Nlc3NpbmcgY2hhbGxlbmdlIHdpdGggSUQ6ICR7ZG9jLmlkfWAsIGRhdGEpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kYXRhLFxuICAgICAgICBjaGFsbGVuZ2U6IGRhdGEuY2hhbGxlbmdlXG4gICAgICAgICAgPyBuZXcgQ2hhbGxlbmdlKHtcbiAgICAgICAgICAgICAgaWQ6IGRhdGEuY2hhbGxlbmdlLmlkLFxuICAgICAgICAgICAgICB0aXRsZTogZGF0YS5jaGFsbGVuZ2UudGl0bGUsXG4gICAgICAgICAgICAgIHN1YnRpdGxlOiBkYXRhLmNoYWxsZW5nZS5zdWJ0aXRsZSxcbiAgICAgICAgICAgICAgcGFydGljaXBhbnRzOiBkYXRhLmNoYWxsZW5nZS5wYXJ0aWNpcGFudHMgfHwgW10sXG4gICAgICAgICAgICAgIHN0YXR1czogZGF0YS5jaGFsbGVuZ2Uuc3RhdHVzIGFzIENoYWxsZW5nZVN0YXR1cyxcbiAgICAgICAgICAgICAgc3RhcnREYXRlOiBkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgZW5kRGF0ZTogZGF0YS5jaGFsbGVuZ2UuZW5kRGF0ZSA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLmVuZERhdGUpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgY3JlYXRlZEF0OiBkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgdXBkYXRlZEF0OiBkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgaW50cm9WaWRlb3M6IChkYXRhLmNoYWxsZW5nZS5pbnRyb1ZpZGVvcyB8fCBbXSkubWFwKCh2OiBhbnkpID0+IFxuICAgICAgICAgICAgICAgIG5ldyBJbnRyb1ZpZGVvKHtcbiAgICAgICAgICAgICAgICAgIGlkOiB2LmlkLFxuICAgICAgICAgICAgICAgICAgdXNlcklkOiB2LnVzZXJJZCxcbiAgICAgICAgICAgICAgICAgIHZpZGVvVXJsOiB2LnZpZGVvVXJsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0VGltZXN0YW1wKGRhdGEuY3JlYXRlZEF0KSxcbiAgICAgICAgdXBkYXRlZEF0OiBjb252ZXJ0VGltZXN0YW1wKGRhdGEudXBkYXRlZEF0KSxcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvLyBjb25zb2xlLmxvZygnQWxsIGNoYWxsZW5nZXMgYWZ0ZXIgcHJvY2Vzc2luZzonLCBKU09OLnN0cmluZ2lmeSh1c2VyQ2hhbGxlbmdlcywgbnVsbCwgMikpO1xuXG4gICAgcmV0dXJuIHVzZXJDaGFsbGVuZ2VzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgY2hhbGxlbmdlcyBieSB1c2VySWQ6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmFzeW5jIGZldGNoQ29sbGVjdGlvbldpdGhTd2VhdExpc3RzKGNvbGxlY3Rpb25JZDogc3RyaW5nKTogUHJvbWlzZTx7IGNvbGxlY3Rpb246IGFueSwgc3dlYXRMaXN0czogV29ya291dFtdIH0+IHtcbiAgdHJ5IHtcbiAgICAvLyBGZXRjaCB0aGUgY29sbGVjdGlvblxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBhd2FpdCB0aGlzLmdldENvbGxlY3Rpb25CeUlkKGNvbGxlY3Rpb25JZCk7XG5cbiAgICAvLyBGZXRjaCBzd2VhdCBsaXN0cyAod29ya291dHMpXG4gICAgY29uc3Qgc3dlYXRMaXN0czogV29ya291dFtdID0gW107XG4gICAgXG4gICAgLy8gQXNzdW1pbmcgY29sbGVjdGlvbiBoYXMgc3dlYXRsaXN0SWRzIHdpdGggYXV0aG9yIGFuZCB3b3Jrb3V0IElEc1xuICAgIGZvciAoY29uc3Qgc3dlYXRsaXN0SWRlbnRpZmllciBvZiBjb2xsZWN0aW9uLnN3ZWF0bGlzdElkcyB8fCBbXSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgW3dvcmtvdXRdID0gYXdhaXQgdGhpcy5mZXRjaFNhdmVkV29ya291dChcbiAgICAgICAgICBzd2VhdGxpc3RJZGVudGlmaWVyLnN3ZWF0bGlzdEF1dGhvcklkLCBcbiAgICAgICAgICBzd2VhdGxpc3RJZGVudGlmaWVyLmlkXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAod29ya291dCkge1xuICAgICAgICAgIHN3ZWF0TGlzdHMucHVzaCh3b3Jrb3V0KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmV0Y2hpbmcgd29ya291dCAke3N3ZWF0bGlzdElkZW50aWZpZXIuaWR9OmAsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBjb2xsZWN0aW9uLCBzd2VhdExpc3RzIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY29sbGVjdGlvbiB3aXRoIHN3ZWF0IGxpc3RzOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vLyBPcHRpb25hbCBoZWxwZXIgbWV0aG9kcyBmb3IgcGFyc2luZyBpZiBuZWVkZWRcbnByaXZhdGUgcGFyc2VXb3Jrb3V0RGF0YShkYXRhOiBEb2N1bWVudERhdGEpOiBXb3Jrb3V0IHtcbiAgcmV0dXJuIG5ldyBXb3Jrb3V0KHtcbiAgICBpZDogZGF0YS5pZCB8fCAnJyxcbiAgICByb3VuZFdvcmtvdXRJZDogZGF0YS5yb3VuZFdvcmtvdXRJZCB8fCAnJyxcbiAgICBjb2xsZWN0aW9uSWQ6IGRhdGEuY29sbGVjdGlvbklkIHx8IFtdLFxuICAgIGV4ZXJjaXNlczogZGF0YS5leGVyY2lzZXMgfHwgW10sXG4gICAgY2hhbGxlbmdlOiBkYXRhLmNoYWxsZW5nZSBcbiAgICAgID8gbmV3IENoYWxsZW5nZSh7XG4gICAgICAgICAgaWQ6IGRhdGEuY2hhbGxlbmdlLmlkLFxuICAgICAgICAgIHRpdGxlOiBkYXRhLmNoYWxsZW5nZS50aXRsZSxcbiAgICAgICAgICBzdWJ0aXRsZTogZGF0YS5jaGFsbGVuZ2Uuc3VidGl0bGUsXG4gICAgICAgICAgcGFydGljaXBhbnRzOiBkYXRhLmNoYWxsZW5nZS5wYXJ0aWNpcGFudHMgfHwgW10sXG4gICAgICAgICAgc3RhdHVzOiBkYXRhLmNoYWxsZW5nZS5zdGF0dXMgYXMgQ2hhbGxlbmdlU3RhdHVzLFxuICAgICAgICAgIHN0YXJ0RGF0ZTogZGF0YS5jaGFsbGVuZ2Uuc3RhcnREYXRlIGluc3RhbmNlb2YgRGF0ZSBcbiAgICAgICAgICAgID8gZGF0YS5jaGFsbGVuZ2Uuc3RhcnREYXRlIFxuICAgICAgICAgICAgOiAoZGF0YS5jaGFsbGVuZ2Uuc3RhcnREYXRlID8gbmV3IERhdGUoZGF0YS5jaGFsbGVuZ2Uuc3RhcnREYXRlKSA6IG5ldyBEYXRlKCkpLFxuICAgICAgICAgIGVuZERhdGU6IGRhdGEuY2hhbGxlbmdlLmVuZERhdGUgaW5zdGFuY2VvZiBEYXRlIFxuICAgICAgICAgICAgPyBkYXRhLmNoYWxsZW5nZS5lbmREYXRlIFxuICAgICAgICAgICAgOiAoZGF0YS5jaGFsbGVuZ2UuZW5kRGF0ZSA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLmVuZERhdGUpIDogbmV3IERhdGUoKSksXG4gICAgICAgICAgY3JlYXRlZEF0OiBkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQgaW5zdGFuY2VvZiBEYXRlIFxuICAgICAgICAgICAgPyBkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQgXG4gICAgICAgICAgICA6IChkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQpIDogbmV3IERhdGUoKSksXG4gICAgICAgICAgdXBkYXRlZEF0OiBkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQgaW5zdGFuY2VvZiBEYXRlIFxuICAgICAgICAgICAgPyBkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQgXG4gICAgICAgICAgICA6IChkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQpIDogbmV3IERhdGUoKSksXG4gICAgICAgICAgICBpbnRyb1ZpZGVvczogKGRhdGEuY2hhbGxlbmdlLmludHJvVmlkZW9zIHx8IFtdKS5tYXAoKHY6IGFueSkgPT4gXG4gICAgICAgICAgICAgIG5ldyBJbnRyb1ZpZGVvKHtcbiAgICAgICAgICAgICAgICBpZDogdi5pZCxcbiAgICAgICAgICAgICAgICB1c2VySWQ6IHYudXNlcklkLFxuICAgICAgICAgICAgICAgIHZpZGVvVXJsOiB2LnZpZGVvVXJsXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgIH0pXG4gICAgICA6IHVuZGVmaW5lZCxcbiAgICBsb2dzOiBkYXRhLmxvZ3MgfHwgW10sXG4gICAgdGl0bGU6IGRhdGEudGl0bGUgfHwgJycsXG4gICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgZHVyYXRpb246IGRhdGEuZHVyYXRpb24gfHwgMCxcbiAgICB3b3Jrb3V0UmF0aW5nOiBkYXRhLndvcmtvdXRSYXRpbmcsXG4gICAgdXNlQXV0aG9yQ29udGVudDogZGF0YS51c2VBdXRob3JDb250ZW50IHx8IGZhbHNlLFxuICAgIGlzQ29tcGxldGVkOiBkYXRhLmlzQ29tcGxldGVkIHx8IGZhbHNlLFxuICAgIHdvcmtvdXRTdGF0dXM6IGRhdGEud29ya291dFN0YXR1cyB8fCBXb3Jrb3V0U3RhdHVzLlF1ZXVlZFVwLFxuICAgIHN0YXJ0VGltZTogZGF0YS5zdGFydFRpbWUgaW5zdGFuY2VvZiBEYXRlIFxuICAgICAgPyBkYXRhLnN0YXJ0VGltZSBcbiAgICAgIDogKGRhdGEuc3RhcnRUaW1lID8gbmV3IERhdGUoZGF0YS5zdGFydFRpbWUpIDogdW5kZWZpbmVkKSxcbiAgICBvcmRlcjogZGF0YS5vcmRlciB8fCAwLFxuICAgIGF1dGhvcjogZGF0YS5hdXRob3IgfHwgJycsXG4gICAgY3JlYXRlZEF0OiBkYXRhLmNyZWF0ZWRBdCBpbnN0YW5jZW9mIERhdGUgXG4gICAgICA/IGRhdGEuY3JlYXRlZEF0IFxuICAgICAgOiAodHlwZW9mIGRhdGEuY3JlYXRlZEF0Py50b0RhdGUgPT09ICdmdW5jdGlvbicgXG4gICAgICAgID8gZGF0YS5jcmVhdGVkQXQudG9EYXRlKCkgXG4gICAgICAgIDogKGRhdGEuY3JlYXRlZEF0ID8gbmV3IERhdGUoZGF0YS5jcmVhdGVkQXQpIDogbmV3IERhdGUoKSkpLFxuICAgIHVwZGF0ZWRBdDogZGF0YS51cGRhdGVkQXQgaW5zdGFuY2VvZiBEYXRlIFxuICAgICAgPyBkYXRhLnVwZGF0ZWRBdCBcbiAgICAgIDogKHR5cGVvZiBkYXRhLnVwZGF0ZWRBdD8udG9EYXRlID09PSAnZnVuY3Rpb24nIFxuICAgICAgICA/IGRhdGEudXBkYXRlZEF0LnRvRGF0ZSgpIFxuICAgICAgICA6IChkYXRhLnVwZGF0ZWRBdCA/IG5ldyBEYXRlKGRhdGEudXBkYXRlZEF0KSA6IG5ldyBEYXRlKCkpKSxcbiAgICB6b25lOiBkYXRhLnpvbmUgfHwgQm9keVpvbmUuRnVsbEJvZHksXG4gICAgZXN0aW1hdGVkRHVyYXRpb246ICgpID0+IGRhdGEuZHVyYXRpb24gfHwgMCxcbiAgICBkZXRlcm1pbmVXb3Jrb3V0Wm9uZTogKCkgPT4gZGF0YS56b25lIHx8IEJvZHlab25lLkZ1bGxCb2R5LFxuICAgIHRvRGljdGlvbmFyeTogKCkgPT4gKHt9KSAvLyBQbGFjZWhvbGRlciwgaW1wbGVtZW50IGFzIG5lZWRlZFxuICB9IGFzIFdvcmtvdXQpO1xufVxuXG5wcml2YXRlIGNyZWF0ZURlZmF1bHRFeGVyY2lzZSgpOiBFeGVyY2lzZSB7XG4gIHJldHVybiB7XG4gICAgaWQ6ICcnLFxuICAgIG5hbWU6ICcnLFxuICAgIGNhdGVnb3J5OiB7XG4gICAgICB0eXBlOiAnd2VpZ2h0VHJhaW5pbmcnLFxuICAgICAgZGV0YWlsczoge1xuICAgICAgICByZXBzOiAnJyxcbiAgICAgICAgc2V0czogMCxcbiAgICAgICAgd2VpZ2h0OiAwLFxuICAgICAgICBzY3JlZW5UaW1lOiAwLFxuICAgICAgICBzZWxlY3RlZFZpZGVvOiB0aGlzLnBhcnNlRXhlcmNpc2VWaWRlbyh7fSkgLy8gVXNlIGV4aXN0aW5nIG1ldGhvZCB0byBjcmVhdGUgYSBkZWZhdWx0IHZpZGVvXG4gICAgICB9XG4gICAgfSxcbiAgICBwcmltYXJ5Qm9keVBhcnRzOiBbXSxcbiAgICBzZWNvbmRhcnlCb2R5UGFydHM6IFtdLFxuICAgIHRhZ3M6IFtdLFxuICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICB2aXNpYmlsaXR5OiAnbGl2ZScsIC8vIERlZmF1bHQgdG8gJ2xpbWl0ZWQnXG4gICAgc3RlcHM6IFtdLFxuICAgIHZpZGVvczogW10sXG4gICAgY3VycmVudFZpZGVvUG9zaXRpb246IDAsXG4gICAgcmVwczogJycsXG4gICAgc2V0czogMCxcbiAgICB3ZWlnaHQ6IDAsXG4gICAgYXV0aG9yOiB7XG4gICAgICB1c2VySWQ6ICcnLFxuICAgICAgdXNlcm5hbWU6ICcnXG4gICAgfSxcbiAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gIH07XG59XG5cbnByaXZhdGUgcGFyc2VFeGVyY2lzZUxvZ0RhdGEoZGF0YTogRG9jdW1lbnREYXRhKTogRXhlcmNpc2VMb2cge1xuICByZXR1cm4ge1xuICAgIGlkOiBkYXRhLmlkIHx8ICcnLFxuICAgIHdvcmtvdXRJZDogZGF0YS53b3Jrb3V0SWQgfHwgJycsXG4gICAgdXNlcklkOiBkYXRhLnVzZXJJZCB8fCAnJyxcbiAgICBleGVyY2lzZTogZGF0YS5leGVyY2lzZSBcbiAgICAgID8gdGhpcy5wYXJzZUV4ZXJjaXNlKGRhdGEuZXhlcmNpc2UpIFxuICAgICAgOiB0aGlzLmNyZWF0ZURlZmF1bHRFeGVyY2lzZSgpLFxuICAgIGxvZ3M6IChkYXRhLmxvZyB8fCBbXSkubWFwKChsb2dFbnRyeTogYW55KSA9PiAoe1xuICAgICAgcmVwczogcGFyc2VJbnQobG9nRW50cnkucmVwcyB8fCAnMCcpLFxuICAgICAgd2VpZ2h0OiBwYXJzZUZsb2F0KGxvZ0VudHJ5LndlaWdodCB8fCAnMCcpLFxuICAgICAgbGVmdFJlcHM6IHBhcnNlSW50KGxvZ0VudHJ5LmxlZnRSZXBzIHx8ICcwJyksXG4gICAgICBsZWZ0V2VpZ2h0OiBwYXJzZUZsb2F0KGxvZ0VudHJ5LmxlZnRXZWlnaHQgfHwgJzAnKSxcbiAgICAgIGlzU3BsaXQ6IGxvZ0VudHJ5LmlzU3BsaXQgfHwgZmFsc2UsXG4gICAgICBpc0JvZHlXZWlnaHQ6IGxvZ0VudHJ5LmlzQm9keVdlaWdodCB8fCBmYWxzZSxcbiAgICAgIGlzQ29tcGxldGVkOiBsb2dFbnRyeS5pc0NvbXBsZXRlZCB8fCBmYWxzZSxcbiAgICAgIGR1cmF0aW9uOiBwYXJzZUludChsb2dFbnRyeS5kdXJhdGlvbiB8fCAnMCcpLFxuICAgICAgY2Fsb3JpZXM6IHBhcnNlSW50KGxvZ0VudHJ5LmNhbG9yaWVzIHx8ICcwJyksXG4gICAgICBicG06IHBhcnNlSW50KGxvZ0VudHJ5LmJwbSB8fCAnMCcpXG4gICAgfSkpLFxuICAgIGZlZWRiYWNrOiBkYXRhLmZlZWRiYWNrIHx8ICcnLFxuICAgIG5vdGU6IGRhdGEubm90ZSB8fCAnJyxcbiAgICByZWNvbW1lbmRlZFdlaWdodDogZGF0YS5yZWNvbW1lbmRlZFdlaWdodCxcbiAgICBpc1NwbGl0OiBkYXRhLmlzU3BsaXQgfHwgZmFsc2UsXG4gICAgaXNCb2R5V2VpZ2h0OiBkYXRhLmlzQm9keVdlaWdodCB8fCBmYWxzZSxcbiAgICBsb2dTdWJtaXR0ZWQ6IGRhdGEubG9nU3VibWl0dGVkIHx8IGZhbHNlLFxuICAgIGxvZ0lzRWRpdGluZzogZGF0YS5sb2dJc0VkaXRpbmcgfHwgZmFsc2UsXG4gICAgaXNDb21wbGV0ZWQ6IGRhdGEuaXNDb21wbGV0ZWQgfHwgZmFsc2UsXG4gICAgY29tcGxldGVkQXQ6IGRhdGEuY29tcGxldGVkQXQgaW5zdGFuY2VvZiBEYXRlIFxuICAgICAgPyBkYXRhLmNvbXBsZXRlZEF0IFxuICAgICAgOiAodHlwZW9mIGRhdGEuY29tcGxldGVkQXQ/LnRvRGF0ZSA9PT0gJ2Z1bmN0aW9uJyBcbiAgICAgICAgPyBkYXRhLmNvbXBsZXRlZEF0LnRvRGF0ZSgpIFxuICAgICAgICA6IChkYXRhLmNvbXBsZXRlZEF0ID8gbmV3IERhdGUoZGF0YS5jb21wbGV0ZWRBdCkgOiBuZXcgRGF0ZSgpKSksXG4gICAgY3JlYXRlZEF0OiBkYXRhLmNyZWF0ZWRBdCBpbnN0YW5jZW9mIERhdGUgXG4gICAgICA/IGRhdGEuY3JlYXRlZEF0IFxuICAgICAgOiAodHlwZW9mIGRhdGEuY3JlYXRlZEF0Py50b0RhdGUgPT09ICdmdW5jdGlvbicgXG4gICAgICAgID8gZGF0YS5jcmVhdGVkQXQudG9EYXRlKCkgXG4gICAgICAgIDogKGRhdGEuY3JlYXRlZEF0ID8gbmV3IERhdGUoZGF0YS5jcmVhdGVkQXQpIDogbmV3IERhdGUoKSkpLFxuICAgIHVwZGF0ZWRBdDogZGF0YS51cGRhdGVkQXQgaW5zdGFuY2VvZiBEYXRlIFxuICAgICAgPyBkYXRhLnVwZGF0ZWRBdCBcbiAgICAgIDogKHR5cGVvZiBkYXRhLnVwZGF0ZWRBdD8udG9EYXRlID09PSAnZnVuY3Rpb24nIFxuICAgICAgICA/IGRhdGEudXBkYXRlZEF0LnRvRGF0ZSgpIFxuICAgICAgICA6IChkYXRhLnVwZGF0ZWRBdCA/IG5ldyBEYXRlKGRhdGEudXBkYXRlZEF0KSA6IG5ldyBEYXRlKCkpKVxuICB9O1xufVxuXG4vLyBZb3UnbGwgYWxzbyBuZWVkIHRvIGltcGxlbWVudCBwYXJzZUV4ZXJjaXNlIHNpbWlsYXIgdG8gdGhlIG9yaWdpbmFsIGltcGxlbWVudGF0aW9uXG5wcml2YXRlIHBhcnNlRXhlcmNpc2UoZmllbGRzOiBhbnkpOiBFeGVyY2lzZSB7XG4gIHJldHVybiB7XG4gICAgaWQ6IGZpZWxkcy5pZD8uc3RyaW5nVmFsdWUgfHwgZmllbGRzLmlkIHx8ICcnLFxuICAgIG5hbWU6IGZpZWxkcy5uYW1lPy5zdHJpbmdWYWx1ZSB8fCBmaWVsZHMubmFtZSB8fCAnJyxcbiAgICBjYXRlZ29yeTogdGhpcy5wYXJzZUV4ZXJjaXNlQ2F0ZWdvcnkoZmllbGRzLmNhdGVnb3J5Py5tYXBWYWx1ZT8uZmllbGRzIHx8IGZpZWxkcy5jYXRlZ29yeSB8fCB7fSksXG4gICAgcHJpbWFyeUJvZHlQYXJ0czogdGhpcy5wYXJzZUJvZHlQYXJ0cyhmaWVsZHMucHJpbWFyeUJvZHlQYXJ0cyksXG4gICAgc2Vjb25kYXJ5Qm9keVBhcnRzOiB0aGlzLnBhcnNlQm9keVBhcnRzKGZpZWxkcy5zZWNvbmRhcnlCb2R5UGFydHMpLFxuICAgIHRhZ3M6IChmaWVsZHMudGFncz8uYXJyYXlWYWx1ZT8udmFsdWVzIHx8IGZpZWxkcy50YWdzIHx8IFtdKS5tYXAoKHRhZzogYW55KSA9PiB0YWcuc3RyaW5nVmFsdWUgfHwgdGFnKSxcbiAgICBkZXNjcmlwdGlvbjogZmllbGRzLmRlc2NyaXB0aW9uPy5zdHJpbmdWYWx1ZSB8fCBmaWVsZHMuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgdmlzaWJpbGl0eTogKGZpZWxkcy52aXNpYmlsaXR5Py5hcnJheVZhbHVlPy52YWx1ZXMgfHwgZmllbGRzLnZpc2liaWxpdHkgfHwgW10pLm1hcCgodjogYW55KSA9PiB2LnN0cmluZ1ZhbHVlIHx8IHYpLFxuICAgIHN0ZXBzOiAoZmllbGRzLnN0ZXBzPy5hcnJheVZhbHVlPy52YWx1ZXMgfHwgZmllbGRzLnN0ZXBzIHx8IFtdKS5tYXAoKHN0ZXA6IGFueSkgPT4gc3RlcC5zdHJpbmdWYWx1ZSB8fCBzdGVwKSxcbiAgICB2aWRlb3M6IHRoaXMucGFyc2VWaWRlb3MoZmllbGRzLnZpZGVvcyksXG4gICAgY3VycmVudFZpZGVvUG9zaXRpb246IHBhcnNlSW50KGZpZWxkcy5jdXJyZW50VmlkZW9Qb3NpdGlvbj8uaW50ZWdlclZhbHVlIHx8IGZpZWxkcy5jdXJyZW50VmlkZW9Qb3NpdGlvbiB8fCAnMCcpLFxuICAgIHJlcHM6IGZpZWxkcy5yZXBzPy5zdHJpbmdWYWx1ZSB8fCBmaWVsZHMucmVwcyB8fCAnJyxcbiAgICBzZXRzOiBwYXJzZUludChmaWVsZHMuc2V0cz8uaW50ZWdlclZhbHVlIHx8IGZpZWxkcy5zZXRzIHx8ICcwJyksXG4gICAgd2VpZ2h0OiBwYXJzZUZsb2F0KGZpZWxkcy53ZWlnaHQ/LmRvdWJsZVZhbHVlIHx8IGZpZWxkcy53ZWlnaHQgfHwgJzAnKSxcbiAgICBcbiAgICBhdXRob3I6IHRoaXMucGFyc2VFeGVyY2lzZUF1dGhvcihmaWVsZHMuYXV0aG9yPy5tYXBWYWx1ZT8uZmllbGRzIHx8IGZpZWxkcy5hdXRob3IgfHwge30pLFxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUocGFyc2VGbG9hdChmaWVsZHMuY3JlYXRlZEF0Py5kb3VibGVWYWx1ZSB8fCBmaWVsZHMuY3JlYXRlZEF0IHx8ICcwJykgKiAxMDAwKSxcbiAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKHBhcnNlRmxvYXQoZmllbGRzLnVwZGF0ZWRBdD8uZG91YmxlVmFsdWUgfHwgZmllbGRzLnVwZGF0ZWRBdCB8fCAnMCcpICogMTAwMClcbiAgfTtcbn1cblxuLy8gWW91J2xsIG5lZWQgdG8gaW1wbGVtZW50IHRoZXNlIGhlbHBlciBtZXRob2RzIGFzIHdlbGxcbnByaXZhdGUgcGFyc2VFeGVyY2lzZUNhdGVnb3J5KGZpZWxkczogYW55KTogRXhlcmNpc2VDYXRlZ29yeSB7XG4gIC8vIEltcGxlbWVudGF0aW9uIHNpbWlsYXIgdG8gdGhlIG9yaWdpbmFsIHNlcnZpY2VcbiAgY29uc3QgY2F0ZWdvcnlJZCA9IGZpZWxkcy5pZD8uc3RyaW5nVmFsdWUgfHwgZmllbGRzLmlkIHx8ICcnO1xuICBpZiAoY2F0ZWdvcnlJZCA9PT0gJ2NhcmRpbycpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ2NhcmRpbycsXG4gICAgICBkZXRhaWxzOiB7XG4gICAgICAgIGR1cmF0aW9uOiBwYXJzZUludChmaWVsZHMuZHVyYXRpb24/LmludGVnZXJWYWx1ZSB8fCBmaWVsZHMuZHVyYXRpb24gfHwgJzAnKSxcbiAgICAgICAgYnBtOiBwYXJzZUludChmaWVsZHMuYnBtPy5pbnRlZ2VyVmFsdWUgfHwgZmllbGRzLmJwbSB8fCAnMCcpLFxuICAgICAgICBjYWxvcmllczogcGFyc2VJbnQoZmllbGRzLmNhbG9yaWVzPy5pbnRlZ2VyVmFsdWUgfHwgZmllbGRzLmNhbG9yaWVzIHx8ICcwJyksXG4gICAgICAgIHNjcmVlblRpbWU6IHBhcnNlSW50KGZpZWxkcy5zY3JlZW5UaW1lPy5pbnRlZ2VyVmFsdWUgfHwgZmllbGRzLnNjcmVlblRpbWUgfHwgJzAnKSxcbiAgICAgICAgc2VsZWN0ZWRWaWRlbzogdGhpcy5wYXJzZUV4ZXJjaXNlVmlkZW8oZmllbGRzLnNlbGVjdGVkVmlkZW8/Lm1hcFZhbHVlPy5maWVsZHMgfHwgZmllbGRzLnNlbGVjdGVkVmlkZW8pICBcbiAgICAgIH1cbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnd2VpZ2h0VHJhaW5pbmcnLFxuICAgICAgZGV0YWlsczoge1xuICAgICAgICByZXBzOiBmaWVsZHMucmVwcz8uc3RyaW5nVmFsdWUgfHwgZmllbGRzLnJlcHMgfHwgJycsXG4gICAgICAgIHNldHM6IHBhcnNlSW50KGZpZWxkcy5zZXRzPy5pbnRlZ2VyVmFsdWUgfHwgZmllbGRzLnNldHMgfHwgJzAnKSxcbiAgICAgICAgd2VpZ2h0OiBwYXJzZUZsb2F0KGZpZWxkcy53ZWlnaHQ/LmRvdWJsZVZhbHVlIHx8IGZpZWxkcy53ZWlnaHQgfHwgJzAnKSxcbiAgICAgICAgc2NyZWVuVGltZTogcGFyc2VJbnQoZmllbGRzLnNjcmVlblRpbWU/LmludGVnZXJWYWx1ZSB8fCBmaWVsZHMuc2NyZWVuVGltZSB8fCAnMCcpLFxuICAgICAgICBzZWxlY3RlZFZpZGVvOiB0aGlzLnBhcnNlRXhlcmNpc2VWaWRlbyhmaWVsZHMuc2VsZWN0ZWRWaWRlbz8ubWFwVmFsdWU/LmZpZWxkcyB8fCBmaWVsZHMuc2VsZWN0ZWRWaWRlbylcbiAgICAgIH1cbiAgICB9O1xuICB9XG59XG5cbnByaXZhdGUgcGFyc2VCb2R5UGFydHMoYm9keVBhcnRzRmllbGQ6IGFueSk6IEJvZHlQYXJ0W10ge1xuICBjb25zdCBib2R5UGFydHNBcnJheSA9IGJvZHlQYXJ0c0ZpZWxkPy5hcnJheVZhbHVlPy52YWx1ZXMgfHwgYm9keVBhcnRzRmllbGQgfHwgW107XG4gIHJldHVybiBib2R5UGFydHNBcnJheS5tYXAoKHBhcnQ6IGFueSkgPT4gcGFydC5zdHJpbmdWYWx1ZSB8fCBwYXJ0KTtcbn1cblxucHJpdmF0ZSBwYXJzZVZpZGVvcyh2aWRlb3NGaWVsZDogYW55KTogRXhlcmNpc2VWaWRlb1tdIHtcbiAgY29uc3QgdmlkZW9zQXJyYXkgPSB2aWRlb3NGaWVsZD8uYXJyYXlWYWx1ZT8udmFsdWVzIHx8IHZpZGVvc0ZpZWxkIHx8IFtdO1xuICByZXR1cm4gdmlkZW9zQXJyYXkubWFwKCh2aWRlb0RhdGE6IGFueSkgPT4gXG4gICAgdGhpcy5wYXJzZUV4ZXJjaXNlVmlkZW8odmlkZW9EYXRhLm1hcFZhbHVlPy5maWVsZHMgfHwgdmlkZW9EYXRhKVxuICApO1xufVxuXG5wcml2YXRlIHBhcnNlRXhlcmNpc2VWaWRlbyhmaWVsZHM6IGFueSk6IEV4ZXJjaXNlVmlkZW8ge1xuICByZXR1cm4ge1xuICAgIGlkOiBmaWVsZHMuaWQ/LnN0cmluZ1ZhbHVlIHx8IGZpZWxkcy5pZCB8fCAnJyxcbiAgICBleGVyY2lzZUlkOiBmaWVsZHMuZXhlcmNpc2VJZD8uc3RyaW5nVmFsdWUgfHwgZmllbGRzLmV4ZXJjaXNlSWQgfHwgJycsXG4gICAgdXNlcm5hbWU6IGZpZWxkcy51c2VybmFtZT8uc3RyaW5nVmFsdWUgfHwgZmllbGRzLnVzZXJuYW1lIHx8ICcnLFxuICAgIHVzZXJJZDogZmllbGRzLnVzZXJJZD8uc3RyaW5nVmFsdWUgfHwgZmllbGRzLnVzZXJJZCB8fCAnJyxcbiAgICB2aWRlb1VSTDogZmllbGRzLnZpZGVvVVJMPy5zdHJpbmdWYWx1ZSB8fCBmaWVsZHMudmlkZW9VUkwgfHwgJycsXG4gICAgZmlsZU5hbWU6IGZpZWxkcy5maWxlTmFtZT8uc3RyaW5nVmFsdWUgfHwgZmllbGRzLmZpbGVOYW1lIHx8ICcnLFxuICAgIGV4ZXJjaXNlOiBmaWVsZHMuZXhlcmNpc2U/LnN0cmluZ1ZhbHVlIHx8IGZpZWxkcy5leGVyY2lzZSB8fCAnJyxcbiAgICBwcm9maWxlSW1hZ2U6IHRoaXMucGFyc2VQcm9maWxlSW1hZ2UoZmllbGRzLnByb2ZpbGVJbWFnZT8ubWFwVmFsdWU/LmZpZWxkcyB8fCBmaWVsZHMucHJvZmlsZUltYWdlIHx8IHt9KSxcbiAgICBjYXB0aW9uOiBmaWVsZHMuY2FwdGlvbj8uc3RyaW5nVmFsdWUgfHwgZmllbGRzLmNhcHRpb24gfHwgJycsXG4gICAgZ2lmVVJMOiBmaWVsZHMuZ2lmVVJMPy5zdHJpbmdWYWx1ZSB8fCBmaWVsZHMuZ2lmVVJMIHx8ICcnLFxuICAgIHRodW1ibmFpbDogZmllbGRzLnRodW1ibmFpbD8uc3RyaW5nVmFsdWUgfHwgZmllbGRzLnRodW1ibmFpbCB8fCAnJyxcbiAgICB2aXNpYmlsaXR5OiBmaWVsZHMudmlzaWJpbGl0eT8uc3RyaW5nVmFsdWUgfHwgZmllbGRzLnZpc2liaWxpdHkgfHwgJ29wZW4nLFxuICAgIHRvdGFsQWNjb3VudHNSZWFjaGVkOiBwYXJzZUludChmaWVsZHMudG90YWxBY2NvdW50c1JlYWNoZWQ/LmludGVnZXJWYWx1ZSB8fCBmaWVsZHMudG90YWxBY2NvdW50c1JlYWNoZWQgfHwgJzAnKSxcbiAgICB0b3RhbEFjY291bnRMaWtlczogcGFyc2VJbnQoZmllbGRzLnRvdGFsQWNjb3VudExpa2VzPy5pbnRlZ2VyVmFsdWUgfHwgZmllbGRzLnRvdGFsQWNjb3VudExpa2VzIHx8ICcwJyksXG4gICAgdG90YWxBY2NvdW50Qm9va21hcmtlZDogcGFyc2VJbnQoZmllbGRzLnRvdGFsQWNjb3VudEJvb2ttYXJrZWQ/LmludGVnZXJWYWx1ZSB8fCBmaWVsZHMudG90YWxBY2NvdW50Qm9va21hcmtlZCB8fCAnMCcpLFxuICAgIHRvdGFsQWNjb3VudFVzYWdlOiBwYXJzZUludChmaWVsZHMudG90YWxBY2NvdW50VXNhZ2U/LmludGVnZXJWYWx1ZSB8fCBmaWVsZHMudG90YWxBY2NvdW50VXNhZ2UgfHwgJzAnKSxcbiAgICBpc0FwcHJvdmVkOiBmaWVsZHMuaXNBcHByb3ZlZD8uYm9vbGVhblZhbHVlIHx8IGZpZWxkcy5pc0FwcHJvdmVkIHx8IGZhbHNlLFxuICAgIGxpa2VkOiBmaWVsZHMubGlrZWQ/LmJvb2xlYW5WYWx1ZSB8fCBmaWVsZHMubGlrZWQsXG4gICAgYm9va21hcmtlZDogZmllbGRzLmJvb2ttYXJrZWQ/LmJvb2xlYW5WYWx1ZSB8fCBmaWVsZHMuYm9va21hcmtlZCxcbiAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKHBhcnNlRmxvYXQoZmllbGRzLmNyZWF0ZWRBdD8uZG91YmxlVmFsdWUgfHwgZmllbGRzLmNyZWF0ZWRBdCB8fCAnMCcpICogMTAwMCksXG4gICAgdXBkYXRlZEF0OiBuZXcgRGF0ZShwYXJzZUZsb2F0KGZpZWxkcy51cGRhdGVkQXQ/LmRvdWJsZVZhbHVlIHx8IGZpZWxkcy51cGRhdGVkQXQgfHwgJzAnKSAqIDEwMDApXG4gIH07XG59XG5cbnByaXZhdGUgcGFyc2VQcm9maWxlSW1hZ2UoZmllbGRzOiBhbnkpOiBQcm9maWxlSW1hZ2Uge1xuICByZXR1cm4ge1xuICAgIHByb2ZpbGVJbWFnZVVSTDogZmllbGRzLnByb2ZpbGVJbWFnZVVSTD8uc3RyaW5nVmFsdWUgfHwgZmllbGRzLnByb2ZpbGVJbWFnZVVSTCB8fCAnJyxcbiAgICBpbWFnZU9mZnNldFdpZHRoOiBwYXJzZUZsb2F0KGZpZWxkcy5pbWFnZU9mZnNldFdpZHRoPy5kb3VibGVWYWx1ZSB8fCBmaWVsZHMuaW1hZ2VPZmZzZXRXaWR0aCB8fCAnMCcpLFxuICAgIGltYWdlT2Zmc2V0SGVpZ2h0OiBwYXJzZUZsb2F0KGZpZWxkcy5pbWFnZU9mZnNldEhlaWdodD8uZG91YmxlVmFsdWUgfHwgZmllbGRzLmltYWdlT2Zmc2V0SGVpZ2h0IHx8ICcwJylcbiAgfTtcbn1cblxucHJpdmF0ZSBwYXJzZUV4ZXJjaXNlQXV0aG9yKGZpZWxkczogYW55KTogRXhlcmNpc2VBdXRob3Ige1xuICByZXR1cm4ge1xuICAgIHVzZXJJZDogZmllbGRzLnVzZXJJZD8uc3RyaW5nVmFsdWUgfHwgZmllbGRzLnVzZXJJZCB8fCAnJyxcbiAgICB1c2VybmFtZTogZmllbGRzLnVzZXJuYW1lPy5zdHJpbmdWYWx1ZSB8fCBmaWVsZHMudXNlcm5hbWUgfHwgJydcbiAgfTtcbn1cblxuYXN5bmMgZmV0Y2hTYXZlZFdvcmtvdXQodXNlcklkOiBzdHJpbmcsIHdvcmtvdXRJZDogc3RyaW5nKTogUHJvbWlzZTxbV29ya291dCB8IG51bGwsIEV4ZXJjaXNlTG9nW10gfCBudWxsXT4ge1xuICB0cnkge1xuICAgIC8vIEZldGNoIHRoZSB3b3Jrb3V0IGRvY3VtZW50XG4gICAgY29uc3Qgd29ya291dFJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdXNlcklkLCAnTXlDcmVhdGVkV29ya291dHMnLCB3b3Jrb3V0SWQpO1xuICAgIGNvbnN0IHdvcmtvdXRTbmFwID0gYXdhaXQgZ2V0RG9jKHdvcmtvdXRSZWYpO1xuXG4gICAgaWYgKCF3b3Jrb3V0U25hcC5leGlzdHMoKSkge1xuICAgICAgcmV0dXJuIFtudWxsLCBudWxsXTtcbiAgICB9XG5cbiAgICAvLyBHZXQgZXhlcmNpc2VzIHdpdGggdmlkZW9zIG1hcHBlZFxuICAgIGNvbnN0IGV4ZXJjaXNlc1dpdGhWaWRlb3MgPSBhd2FpdCB0aGlzLmZldGNoQW5kTWFwRXhlcmNpc2VzV2l0aFZpZGVvcygpO1xuICAgIGNvbnN0IHdvcmtvdXREYXRhID0gd29ya291dFNuYXAuZGF0YSgpO1xuXG4gICAgLy8gTWFwIHRoZSBleGVyY2lzZXMgaW4gdGhlIHdvcmtvdXQgdG8gdGhlIGZ1bGwgZXhlcmNpc2Ugb2JqZWN0cyB3aXRoIHZpZGVvc1xuICAgIGNvbnN0IG1hcHBlZEV4ZXJjaXNlcyA9ICh3b3Jrb3V0RGF0YS5leGVyY2lzZXMgfHwgW10pLm1hcCgoZXhlcmNpc2VSZWY6IGFueSkgPT4ge1xuICAgICAgY29uc3QgZnVsbEV4ZXJjaXNlID0gZXhlcmNpc2VzV2l0aFZpZGVvcy5maW5kKGV4ID0+IGV4Lm5hbWUgPT09IGV4ZXJjaXNlUmVmLmV4ZXJjaXNlLm5hbWUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZXhlcmNpc2VSZWYsXG4gICAgICAgIGV4ZXJjaXNlOiBmdWxsRXhlcmNpc2UgfHwgZXhlcmNpc2VSZWYuZXhlcmNpc2VcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICB3b3Jrb3V0RGF0YS5leGVyY2lzZXMgPSBtYXBwZWRFeGVyY2lzZXM7XG4gICAgY29uc3Qgd29ya291dCA9IHRoaXMucGFyc2VXb3Jrb3V0RGF0YSh3b3Jrb3V0RGF0YSk7XG5cbiAgICAvLyBGZXRjaCBsb2dzXG4gICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24od29ya291dFJlZiwgJ2xvZ3MnKTtcbiAgICBjb25zdCBsb2dzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGxvZ3NSZWYpO1xuXG4gICAgY29uc3QgbG9nczogRXhlcmNpc2VMb2dbXSA9IGxvZ3NTbmFwc2hvdC5kb2NzLm1hcChsb2dEb2MgPT4ge1xuICAgICAgY29uc3QgbG9nRGF0YSA9IGxvZ0RvYy5kYXRhKCk7XG4gICAgICBjb25zdCBmdWxsRXhlcmNpc2UgPSBleGVyY2lzZXNXaXRoVmlkZW9zLmZpbmQoZXggPT4gZXgubmFtZSA9PT0gbG9nRGF0YS5leGVyY2lzZS5uYW1lKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IGxvZ0RvYy5pZCxcbiAgICAgICAgd29ya291dElkOiB3b3Jrb3V0SWQsXG4gICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICBleGVyY2lzZTogZnVsbEV4ZXJjaXNlIHx8IGxvZ0RhdGEuZXhlcmNpc2UsXG4gICAgICAgIGxvZ3M6IGxvZ0RhdGEubG9nIHx8IFtdLFxuICAgICAgICBmZWVkYmFjazogbG9nRGF0YS5mZWVkYmFjayB8fCAnJyxcbiAgICAgICAgbm90ZTogbG9nRGF0YS5ub3RlIHx8ICcnLFxuICAgICAgICByZWNvbW1lbmRlZFdlaWdodDogbG9nRGF0YS5yZWNvbW1lbmRlZFdlaWdodCxcbiAgICAgICAgaXNTcGxpdDogbG9nRGF0YS5pc1NwbGl0IHx8IGZhbHNlLFxuICAgICAgICBpc0JvZHlXZWlnaHQ6IGxvZ0RhdGEuaXNCb2R5V2VpZ2h0IHx8IGZhbHNlLFxuICAgICAgICBsb2dTdWJtaXR0ZWQ6IGxvZ0RhdGEubG9nU3VibWl0dGVkIHx8IGZhbHNlLFxuICAgICAgICBsb2dJc0VkaXRpbmc6IGxvZ0RhdGEubG9nSXNFZGl0aW5nIHx8IGZhbHNlLFxuICAgICAgICBpc0NvbXBsZXRlZDogbG9nRGF0YS5pc0NvbXBsZXRlZCB8fCBmYWxzZSxcbiAgICAgICAgY29tcGxldGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAobG9nRGF0YS5jb21wbGV0ZWRBdCksXG4gICAgICAgIGNyZWF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChsb2dEYXRhLmNyZWF0ZWRBdCksXG4gICAgICAgIHVwZGF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChsb2dEYXRhLnVwZGF0ZWRBdClcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICB3b3Jrb3V0LmxvZ3MgPSBsb2dzO1xuICAgIHJldHVybiBbd29ya291dCwgbG9nc107XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgc2F2ZWQgd29ya291dDonLCBlcnJvcik7XG4gICAgcmV0dXJuIFtudWxsLCBudWxsXTtcbiAgfVxufVxuXG4vKipcbiAqIEZldGNoIHVzZXIgY2hhbGxlbmdlcyBieSBjaGFsbGVuZ2VJZC5cbiAqIEBwYXJhbSBjaGFsbGVuZ2VJZCBUaGUgSUQgb2YgdGhlIGNoYWxsZW5nZSB0byBmZXRjaCBhc3NvY2lhdGVkIHVzZXIgY2hhbGxlbmdlcyBmb3IuXG4gKiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIHRvIGFuIGFycmF5IG9mIHVzZXIgY2hhbGxlbmdlcy5cbiAqIEB0aHJvd3MgSWYgdGhlIEZpcmVzdG9yZSBxdWVyeSBmYWlscy5cbiAqL1xuYXN5bmMgZmV0Y2hVc2VyQ2hhbGxlbmdlc0J5Q2hhbGxlbmdlSWQoY2hhbGxlbmdlSWQ6IHN0cmluZyk6IFByb21pc2U8VXNlckNoYWxsZW5nZVtdPiB7XG4gIGNvbnN0IHVzZXJDaGFsbGVuZ2VzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXItY2hhbGxlbmdlJyk7XG4gIGNvbnN0IHEgPSBxdWVyeSh1c2VyQ2hhbGxlbmdlc1JlZiwgd2hlcmUoJ2NoYWxsZW5nZUlkJywgJz09JywgY2hhbGxlbmdlSWQpKTtcblxuICB0cnkge1xuICAgIC8vIGNvbnNvbGUubG9nKGBGZXRjaGluZyB1c2VyIGNoYWxsZW5nZXMgZm9yIGNoYWxsZW5nZSBJRDogJHtjaGFsbGVuZ2VJZH1gKTtcblxuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcblxuICAgIC8vIGNvbnNvbGUubG9nKGBUb3RhbCB1c2VyIGNoYWxsZW5nZXMgZmV0Y2hlZDogJHtzbmFwc2hvdC5kb2NzLmxlbmd0aH1gKTtcblxuICAgIGNvbnN0IHVzZXJDaGFsbGVuZ2VzID0gc25hcHNob3QuZG9jcy5tYXAoKGRvYzogRG9jdW1lbnREYXRhKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGBQcm9jZXNzaW5nIHVzZXIgY2hhbGxlbmdlIHdpdGggSUQ6ICR7ZG9jLmlkfWAsIGRhdGEpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kYXRhLFxuICAgICAgICBjaGFsbGVuZ2U6IGRhdGEuY2hhbGxlbmdlXG4gICAgICAgICAgPyBuZXcgQ2hhbGxlbmdlKHtcbiAgICAgICAgICAgICAgaWQ6IGRhdGEuY2hhbGxlbmdlLmlkLFxuICAgICAgICAgICAgICB0aXRsZTogZGF0YS5jaGFsbGVuZ2UudGl0bGUsXG4gICAgICAgICAgICAgIHN1YnRpdGxlOiBkYXRhLmNoYWxsZW5nZS5zdWJ0aXRsZSxcbiAgICAgICAgICAgICAgcGFydGljaXBhbnRzOiBkYXRhLmNoYWxsZW5nZS5wYXJ0aWNpcGFudHMgfHwgW10sXG4gICAgICAgICAgICAgIHN0YXR1czogZGF0YS5jaGFsbGVuZ2Uuc3RhdHVzIGFzIENoYWxsZW5nZVN0YXR1cyxcbiAgICAgICAgICAgICAgc3RhcnREYXRlOiBkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgZW5kRGF0ZTogZGF0YS5jaGFsbGVuZ2UuZW5kRGF0ZSA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLmVuZERhdGUpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgY3JlYXRlZEF0OiBkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgdXBkYXRlZEF0OiBkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgaW50cm9WaWRlb3M6IChkYXRhLmNoYWxsZW5nZS5pbnRyb1ZpZGVvcyB8fCBbXSkubWFwKCh2OiBhbnkpID0+IFxuICAgICAgICAgICAgICAgIG5ldyBJbnRyb1ZpZGVvKHtcbiAgICAgICAgICAgICAgICAgIGlkOiB2LmlkLFxuICAgICAgICAgICAgICAgICAgdXNlcklkOiB2LnVzZXJJZCxcbiAgICAgICAgICAgICAgICAgIHZpZGVvVXJsOiB2LnZpZGVvVXJsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0VGltZXN0YW1wKGRhdGEuY3JlYXRlZEF0KSxcbiAgICAgICAgdXBkYXRlZEF0OiBjb252ZXJ0VGltZXN0YW1wKGRhdGEudXBkYXRlZEF0KSxcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvLyBjb25zb2xlLmxvZygnQWxsIHVzZXIgY2hhbGxlbmdlcyBhZnRlciBwcm9jZXNzaW5nOicsIEpTT04uc3RyaW5naWZ5KHVzZXJDaGFsbGVuZ2VzLCBudWxsLCAyKSk7XG5cbiAgICByZXR1cm4gdXNlckNoYWxsZW5nZXM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBjaGFsbGVuZ2VzIGJ5IGNoYWxsZW5nZUlkOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5hc3luYyBnZXRDb2xsZWN0aW9uQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxTd2VhdGxpc3RDb2xsZWN0aW9uPiB7XG4gIGNvbnNvbGUubG9nKFwiRmV0Y2hpbmcgY29sbGVjdGlvbiB3aXRoIGlkOlwiLCBpZCk7XG4gIHRyeSB7XG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGRiLCBcInN3ZWF0bGlzdC1jb2xsZWN0aW9uXCIsIGlkKTtcbiAgICBjb25zdCBkb2NTbmFwID0gYXdhaXQgZ2V0RG9jKGRvY1JlZik7XG4gICAgaWYgKGRvY1NuYXAuZXhpc3RzKCkpIHtcbiAgICAgIHJldHVybiBuZXcgU3dlYXRsaXN0Q29sbGVjdGlvbih7XG4gICAgICAgIGlkOiBkb2NTbmFwLmlkLFxuICAgICAgICAuLi5kb2NTbmFwLmRhdGEoKVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbGxlY3Rpb24gbm90IGZvdW5kXCIpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBjb2xsZWN0aW9uIGJ5IElEOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuICBcbiAgICAvKipcbiAgICogRmV0Y2ggdXNlciBjaGFsbGVuZ2VzIGJ5IHVzZXJJZCBhbmQgZmlsdGVyIGZvciBhY3RpdmUgY2hhbGxlbmdlcy5cbiAgICogQHJldHVybnMgQSBwcm9taXNlIHJlc29sdmluZyB0byBhbiBhcnJheSBvZiBhY3RpdmUgY2hhbGxlbmdlcy5cbiAgICogQHRocm93cyBJZiBubyB1c2VyIGlzIHNpZ25lZCBpbiBvciBpZiB0aGUgRmlyZXN0b3JlIHF1ZXJ5IGZhaWxzLlxuICAgKi9cbiAgICBhc3luYyBmZXRjaEFjdGl2ZUNoYWxsZW5nZXMoKTogUHJvbWlzZTxVc2VyQ2hhbGxlbmdlW10+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlclNlcnZpY2UuY3VycmVudFVzZXI7XG4gICAgICBpZiAoIWN1cnJlbnRVc2VyPy5pZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgICB9XG4gICAgXG4gICAgICBjb25zdCB1c2VyQ2hhbGxlbmdlc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VyLWNoYWxsZW5nZScpO1xuICAgICAgY29uc3QgcSA9IHF1ZXJ5KHVzZXJDaGFsbGVuZ2VzUmVmLCB3aGVyZSgndXNlcklkJywgJz09JywgY3VycmVudFVzZXIuaWQpKTtcbiAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBGZXRjaGluZyBjaGFsbGVuZ2VzIGZvciB1c2VyIElEOiAke2N1cnJlbnRVc2VyLmlkfWApO1xuICAgIFxuICAgICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBUb3RhbCBjaGFsbGVuZ2VzIGZldGNoZWQ6ICR7c25hcHNob3QuZG9jcy5sZW5ndGh9YCk7XG4gICAgXG4gICAgICAgIGNvbnN0IGFsbENoYWxsZW5nZXMgPSBzbmFwc2hvdC5kb2NzLm1hcCgoZG9jOiBEb2N1bWVudERhdGEpID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgUHJvY2Vzc2luZyBjaGFsbGVuZ2Ugd2l0aCBJRDogJHtkb2MuaWR9YCwgZGF0YSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVXNlIHRoZSBDaGFsbGVuZ2UgY29uc3RydWN0b3IgdG8gcGFyc2UgdGhlIGNoYWxsZW5nZSBkYXRhXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCJkYXRlIGJlZm9yZSBmb3JtYXQ6IFwiICsgY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUpKTtcblxuICAgICAgICAgIGNvbnN0IGNoYWxsZW5nZSA9IGRhdGEuY2hhbGxlbmdlXG4gICAgICAgICAgICA/IG5ldyBDaGFsbGVuZ2Uoe1xuICAgICAgICAgICAgICAgIGlkOiBkYXRhLmNoYWxsZW5nZS5pZCxcbiAgICAgICAgICAgICAgICB0aXRsZTogZGF0YS5jaGFsbGVuZ2UudGl0bGUsXG4gICAgICAgICAgICAgICAgc3VidGl0bGU6IGRhdGEuY2hhbGxlbmdlLnN1YnRpdGxlLFxuICAgICAgICAgICAgICAgIHBhcnRpY2lwYW50czogZGF0YS5jaGFsbGVuZ2UucGFydGljaXBhbnRzIHx8IFtdLFxuICAgICAgICAgICAgICAgIHN0YXR1czogZGF0YS5jaGFsbGVuZ2Uuc3RhdHVzIGFzIENoYWxsZW5nZVN0YXR1cyxcbiAgICAgICAgICAgICAgICBzdGFydERhdGU6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5jaGFsbGVuZ2Uuc3RhcnREYXRlKSxcbiAgICAgICAgICAgICAgICBlbmREYXRlOiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY2hhbGxlbmdlLmVuZERhdGUpLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQpLFxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQpLFxuICAgICAgICAgICAgICAgIGludHJvVmlkZW9zOiAoZGF0YS5jaGFsbGVuZ2UuaW50cm9WaWRlb3MgfHwgW10pLm1hcCgodjogYW55KSA9PiBcbiAgICAgICAgICAgICAgICAgIG5ldyBJbnRyb1ZpZGVvKHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHYuaWQsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogdi51c2VySWQsXG4gICAgICAgICAgICAgICAgICAgIHZpZGVvVXJsOiB2LnZpZGVvVXJsXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICAuLi5kYXRhLFxuICAgICAgICAgICAgY2hhbGxlbmdlLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY3JlYXRlZEF0KSxcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLnVwZGF0ZWRBdCksXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdBbGwgY2hhbGxlbmdlcyBhZnRlciBwcm9jZXNzaW5nOicsIEpTT04uc3RyaW5naWZ5KGFsbENoYWxsZW5nZXMsIG51bGwsIDIpKTtcbiAgICBcbiAgICAgICAgLy8gRmlsdGVyIGZvciBhY3RpdmUgY2hhbGxlbmdlcyAoZW5kRGF0ZSA+IGN1cnJlbnQgZGF0ZSlcbiAgICAgICAgY29uc3QgYWN0aXZlQ2hhbGxlbmdlcyA9IGFsbENoYWxsZW5nZXMuZmlsdGVyKHVzZXJDaGFsbGVuZ2UgPT4ge1xuICAgICAgICAgIGNvbnN0IGVuZERhdGUgPSB1c2VyQ2hhbGxlbmdlLmNoYWxsZW5nZT8uZW5kRGF0ZTtcbiAgICBcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcbiAgICAgICAgICAvLyAgIGBFdmFsdWF0aW5nIGNoYWxsZW5nZSBJRDogJHt1c2VyQ2hhbGxlbmdlLmlkfSwgRW5kIERhdGU6ICR7ZW5kRGF0ZX0sIEN1cnJlbnQgRGF0ZTogJHtuZXcgRGF0ZSgpfWBcbiAgICAgICAgICAvLyApO1xuICAgIFxuICAgICAgICAgIHJldHVybiBlbmREYXRlICYmIGVuZERhdGUgPiBuZXcgRGF0ZSgpO1xuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgLy8gY29uc29sZS5sb2coYFRvdGFsIGFjdGl2ZSBjaGFsbGVuZ2VzOiAke2FjdGl2ZUNoYWxsZW5nZXMubGVuZ3RofWAsIGFjdGl2ZUNoYWxsZW5nZXMpO1xuICAgIFxuICAgICAgICByZXR1cm4gYWN0aXZlQ2hhbGxlbmdlcztcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFjdGl2ZSBjaGFsbGVuZ2VzOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICAgIFxuXG4gIC8qKlxuICAgKiBGZXRjaCB1c2VyIGNoYWxsZW5nZXMgYnkgdXNlcklkLlxuICAgKiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIHRvIGFuIGFycmF5IG9mIGNoYWxsZW5nZXMuXG4gICAqIEB0aHJvd3MgSWYgbm8gdXNlciBpcyBzaWduZWQgaW4gb3IgaWYgdGhlIEZpcmVzdG9yZSBxdWVyeSBmYWlscy5cbiAgICovXG4gIGFzeW5jIGZldGNoVXNlckNoYWxsZW5nZXMoKTogUHJvbWlzZTxVc2VyQ2hhbGxlbmdlW10+IHtcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IHVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyO1xuICAgIGlmICghY3VycmVudFVzZXI/LmlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgfVxuXG4gICAgLy8gUmVmZXJlbmNlIHRvIHRoZSB1c2VyLWNoYWxsZW5nZSBjb2xsZWN0aW9uXG4gICAgY29uc3QgdXNlckNoYWxsZW5nZXNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlci1jaGFsbGVuZ2UnKTtcblxuICAgIC8vIFF1ZXJ5IGNoYWxsZW5nZXMgd2hlcmUgdXNlcklkIG1hdGNoZXMgdGhlIGN1cnJlbnQgdXNlcidzIElEXG4gICAgY29uc3QgcSA9IHF1ZXJ5KHVzZXJDaGFsbGVuZ2VzUmVmLCB3aGVyZSgndXNlcklkJywgJz09JywgY3VycmVudFVzZXIuaWQpKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG5cbiAgICAgIC8vIE1hcCBkb2N1bWVudHMgdG8gYW4gYXJyYXkgb2YgQ2hhbGxlbmdlIG9iamVjdHNcbiAgICAgIHJldHVybiBzbmFwc2hvdC5kb2NzLm1hcCgoZG9jOiBEb2N1bWVudERhdGEpID0+ICh7XG4gICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgIC4uLmRvYy5kYXRhKCksXG4gICAgICB9KSkgYXMgVXNlckNoYWxsZW5nZVtdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyIGNoYWxsZW5nZXM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggdXNlciBjaGFsbGVuZ2VzJyk7XG4gICAgfVxuICB9XG4gIFxuICAvL3VwZGF0ZSB0aGUgd29ya291dCBzdW1tYXJ5LFxuICBhc3luYyB1cGRhdGVXb3Jrb3V0U3VtbWFyeSh7XG4gICAgdXNlcklkLFxuICAgIHdvcmtvdXRJZCxcbiAgICBzdW1tYXJ5XG4gIH06IHtcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICB3b3Jrb3V0SWQ6IHN0cmluZyxcbiAgICBzdW1tYXJ5OiBXb3Jrb3V0U3VtbWFyeVxuICB9KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBJRCBwcm92aWRlZCcpO1xuICAgIH1cbiAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIENyZWF0ZSBhIHJlZmVyZW5jZSB0byB0aGUgY29sbGVjdGlvblxuICAgICAgY29uc3Qgc3VtbWFyeVJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdXNlcklkLCAnd29ya291dFN1bW1hcnknLCBzdW1tYXJ5LmlkKTtcbiAgXG4gICAgICAvLyBDb252ZXJ0IHN1bW1hcnkgdG8gYSBwbGFpbiBvYmplY3QgZm9yIEZpcmVzdG9yZVxuICAgICAgY29uc3Qgc3VtbWFyeURhdGEgPSB7XG4gICAgICAgIGlkOiBzdW1tYXJ5LmlkLFxuICAgICAgICB3b3Jrb3V0SWQ6IHN1bW1hcnkud29ya291dElkLFxuICAgICAgICBleGVyY2lzZXM6IHN1bW1hcnkuZXhlcmNpc2VzLFxuICAgICAgICBib2R5UGFydHM6IHN1bW1hcnkuYm9keVBhcnRzLFxuICAgICAgICBzZWNvbmRhcnlCb2R5UGFydHM6IHN1bW1hcnkuc2Vjb25kYXJ5Qm9keVBhcnRzLFxuICAgICAgICB3b3Jrb3V0VGl0bGU6IHN1bW1hcnkud29ya291dFRpdGxlLFxuICAgICAgICBjYWxvcmllc0J1cm5lZDogc3VtbWFyeS5jYWxvcmllc0J1cm5lZCxcbiAgICAgICAgd29ya291dFJhdGluZzogc3VtbWFyeS53b3Jrb3V0UmF0aW5nLFxuICAgICAgICBleGVyY2lzZXNDb21wbGV0ZWQ6IHN1bW1hcnkuZXhlcmNpc2VzQ29tcGxldGVkLFxuICAgICAgICBhaUluc2lnaHQ6IHN1bW1hcnkuYWlJbnNpZ2h0LFxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IHN1bW1hcnkucmVjb21tZW5kYXRpb25zLFxuICAgICAgICBnaWZVUkxzOiBzdW1tYXJ5LmdpZlVSTHMsXG4gICAgICAgIHJlY29tbWVuZGVkV29yazogc3VtbWFyeS5yZWNvbW1lbmRlZFdvcmssXG4gICAgICAgIGlzQ29tcGxldGVkOiBzdW1tYXJ5LmlzQ29tcGxldGVkLFxuICAgICAgICBjcmVhdGVkQXQ6IHN1bW1hcnkuY3JlYXRlZEF0LFxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIGNvbXBsZXRlZEF0OiBzdW1tYXJ5LmNvbXBsZXRlZEF0LFxuICAgICAgICBkdXJhdGlvbjogc3VtbWFyeS5kdXJhdGlvblxuICAgICAgfTtcbiAgXG4gICAgICAvLyBTZXQgZGF0YSB3aXRoIG1lcmdlIGVuYWJsZWQgKGVxdWl2YWxlbnQgdG8gU3dpZnQncyBzZXREYXRhIHdpdGggbWVyZ2U6IHRydWUpXG4gICAgICBhd2FpdCBzZXREb2Moc3VtbWFyeVJlZiwgc3VtbWFyeURhdGEsIHsgbWVyZ2U6IHRydWUgfSk7XG4gIFxuICAgICAgY29uc29sZS5sb2coJ1dvcmtvdXQgc3VtbWFyeSBkb2N1bWVudCB1cGRhdGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB3b3Jrb3V0IHN1bW1hcnk6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlV29ya291dExvZ3Moe1xuICAgIHVzZXJJZCxcbiAgICB3b3Jrb3V0SWQsIFxuICAgIGxvZ3NcbiAgfToge1xuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIHdvcmtvdXRJZDogc3RyaW5nLCBcbiAgICBsb2dzOiBFeGVyY2lzZUxvZ1tdXG4gIH0pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVXBkYXRlIGxvZ3MgaW4gRmlyZXN0b3JlXG4gICAgICBjb25zdCB3b3Jrb3V0UmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VySWQsICd3b3Jrb3V0U2Vzc2lvbnMnLCB3b3Jrb3V0SWQpO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgbG9ncyBzdWJjb2xsZWN0aW9uXG4gICAgICBjb25zdCBsb2dzUmVmID0gY29sbGVjdGlvbih3b3Jrb3V0UmVmLCAnbG9ncycpO1xuICAgICAgXG4gICAgICAvLyBCYXRjaCB3cml0ZSB0byB1cGRhdGUgbG9nc1xuICAgICAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcbiAgICAgIFxuICAgICAgbG9ncy5mb3JFYWNoKGxvZyA9PiB7XG4gICAgICAgIGNvbnN0IGxvZ0RvY1JlZiA9IGRvYyhsb2dzUmVmLCBsb2cuaWQpO1xuICAgICAgICBiYXRjaC51cGRhdGUobG9nRG9jUmVmLCB7XG4gICAgICAgICAgaXNDb21wbGV0ZWQ6IGxvZy5pc0NvbXBsZXRlZCxcbiAgICAgICAgICBsb2dzOiBsb2cubG9ncyxcbiAgICAgICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gIFxuICAgICAgYXdhaXQgYmF0Y2guY29tbWl0KCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHdvcmtvdXQgbG9nczonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbiAgXG4gIFxuICAvKipcbiAgICogRmV0Y2ggdGhlIHdvcmtvdXQgc2Vzc2lvbiBmcm9tIEZpcmVzdG9yZSwgcmV0dXJuaW5nIHsgd29ya291dCwgbG9ncyB9LlxuICAgKiBDaGVja3MgZmlyc3QgZm9yIGEgUXVldWVkVXAgc2Vzc2lvbiwgdGhlbiBmb3IgSW5Qcm9ncmVzcy5cbiAgICovXG4gIGFzeW5jIGZldGNoQ3VycmVudFdvcmtvdXRTZXNzaW9uKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx7XG4gICAgd29ya291dDogV29ya291dCB8IG51bGw7XG4gICAgbG9nczogRXhlcmNpc2VMb2dbXSB8IG51bGw7XG4gIH0+IHtcbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIElEIHByb3ZpZGVkJyk7XG4gICAgfVxuICBcbiAgICAvLyAxLiBGZXRjaCBhbGwgZXhlcmNpc2VzIHdpdGggdGhlaXIgdmlkZW9zXG4gICAgY29uc3QgZXhlcmNpc2VTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlcycpKTtcbiAgICBjb25zdCB2aWRlb1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VWaWRlb3MnKSk7XG4gIFxuICAgIC8vIE1hcCB2aWRlb3MgdG8gZXhlcmNpc2VzXG4gICAgY29uc3QgZXhlcmNpc2VWaWRlb3M6IEV4ZXJjaXNlVmlkZW9bXSA9IHZpZGVvU25hcHNob3QuZG9jcy5tYXAoKGRvYykgPT4gXG4gICAgICBFeGVyY2lzZVZpZGVvLmZyb21GaXJlYmFzZSh7XG4gICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgIC4uLmRvYy5kYXRhKClcbiAgICAgIH0pXG4gICAgKTtcbiAgXG4gICAgY29uc3QgZXhlcmNpc2VzV2l0aFZpZGVvcyA9IGV4ZXJjaXNlU25hcHNob3QuZG9jcy5tYXAoZG9jID0+IHtcbiAgICAgIGNvbnN0IGV4ZXJjaXNlID0gRXhlcmNpc2UuZnJvbUZpcmViYXNlKHtcbiAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgLi4uZG9jLmRhdGEoKVxuICAgICAgfSk7XG4gIFxuICAgICAgLy8gQXR0YWNoIHZpZGVvcyB0byBleGVyY2lzZVxuICAgICAgY29uc3QgbWF0Y2hpbmdWaWRlb3MgPSBleGVyY2lzZVZpZGVvcy5maWx0ZXIoXG4gICAgICAgICh2aWRlbykgPT4gdmlkZW8uZXhlcmNpc2UudG9Mb3dlckNhc2UoKSA9PT0gZXhlcmNpc2UubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICApO1xuICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmV4ZXJjaXNlLFxuICAgICAgICB2aWRlb3M6IG1hdGNoaW5nVmlkZW9zXG4gICAgICB9O1xuICAgIH0pO1xuICBcbiAgICAvLyBSZWZlcmVuY2UgdG8gdXNlcidzIHdvcmtvdXRTZXNzaW9uc1xuICAgIGNvbnN0IHdvcmtvdXRTZXNzaW9uc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycsIHVzZXJJZCwgJ3dvcmtvdXRTZXNzaW9ucycpO1xuICBcbiAgICAvLyAxKSBDaGVjayBmb3IgUXVldWVkVXBcbiAgICBsZXQgcSA9IHF1ZXJ5KHdvcmtvdXRTZXNzaW9uc1JlZiwgd2hlcmUoJ3N0YXR1cycsICc9PScsIFdvcmtvdXRTdGF0dXMuUXVldWVkVXApKTtcbiAgICBsZXQgc25hcCA9IGF3YWl0IGdldERvY3MocSk7XG4gIFxuICAgIGlmICghc25hcC5lbXB0eSkge1xuICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc1dvcmtvdXRTZXNzaW9uRG9jdW1lbnQoc25hcC5kb2NzWzBdLCBleGVyY2lzZXNXaXRoVmlkZW9zKTtcbiAgICB9XG4gIFxuICAgIC8vIDIpIENoZWNrIGZvciBJblByb2dyZXNzXG4gICAgcSA9IHF1ZXJ5KHdvcmtvdXRTZXNzaW9uc1JlZiwgd2hlcmUoJ3N0YXR1cycsICc9PScsIFdvcmtvdXRTdGF0dXMuSW5Qcm9ncmVzcykpO1xuICAgIHNuYXAgPSBhd2FpdCBnZXREb2NzKHEpO1xuICBcbiAgICBpZiAoIXNuYXAuZW1wdHkpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NXb3Jrb3V0U2Vzc2lvbkRvY3VtZW50KHNuYXAuZG9jc1swXSwgZXhlcmNpc2VzV2l0aFZpZGVvcyk7XG4gICAgfVxuICBcbiAgICAvLyBOb25lIGZvdW5kXG4gICAgcmV0dXJuIHsgd29ya291dDogbnVsbCwgbG9nczogbnVsbCB9O1xuICB9XG5cbiAgYXN5bmMgY2FuY2VsV29ya291dFNlc3Npb24odXNlcklkOiBzdHJpbmcsIHdvcmtvdXRJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIDEuIERlbGV0ZSBhbGwgbG9ncyBpbiB0aGUgbG9ncyBzdWJjb2xsZWN0aW9uXG4gICAgICBjb25zdCBsb2dzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgdXNlcklkLCAnd29ya291dFNlc3Npb25zJywgd29ya291dElkLCAnbG9ncycpO1xuICAgICAgY29uc3QgbG9nc1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhsb2dzUmVmKTtcbiAgICAgIGNvbnN0IGxvZ0JhdGNoID0gd3JpdGVCYXRjaChkYik7XG4gIFxuICAgICAgaWYgKCFsb2dzU25hcHNob3QuZW1wdHkpIHtcbiAgICAgICAgbG9nc1NuYXBzaG90LmRvY3MuZm9yRWFjaCgobG9nRG9jKSA9PiB7XG4gICAgICAgICAgbG9nQmF0Y2guZGVsZXRlKGxvZ0RvYy5yZWYpO1xuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgbG9nQmF0Y2guY29tbWl0KCk7XG4gICAgICB9XG4gIFxuICAgICAgLy8gMi4gRGVsZXRlIHRoZSB3b3Jrb3V0IHNlc3Npb24gZG9jdW1lbnRcbiAgICAgIGNvbnN0IHdvcmtvdXRTZXNzaW9uUmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VySWQsICd3b3Jrb3V0U2Vzc2lvbnMnLCB3b3Jrb3V0SWQpO1xuICAgICAgYXdhaXQgZGVsZXRlRG9jKHdvcmtvdXRTZXNzaW9uUmVmKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2FuY2VsaW5nIHdvcmtvdXQgc2Vzc2lvbjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGZldGNoQW5kTWFwRXhlcmNpc2VzV2l0aFZpZGVvcygpOiBQcm9taXNlPEV4ZXJjaXNlW10+IHtcbiAgICB0cnkge1xuICAgICAgLy8gY29uc29sZS5sb2coJ1N0YXJ0aW5nIGZldGNoQW5kTWFwRXhlcmNpc2VzV2l0aFZpZGVvcycpO1xuICBcbiAgICAgIC8vIDEuIEZldGNoIGFsbCBleGVyY2lzZXMgXG4gICAgICBjb25zdCBleGVyY2lzZVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VzJykpO1xuICAgICAgY29uc3QgZXhlcmNpc2VzID0gZXhlcmNpc2VTbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PiBcbiAgICAgICAgRXhlcmNpc2UuZnJvbUZpcmViYXNlKHtcbiAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgIC4uLmRvYy5kYXRhKClcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhgRmV0Y2hlZCAke2V4ZXJjaXNlcy5sZW5ndGh9IGV4ZXJjaXNlc2ApO1xuICBcbiAgICAgIC8vIDIuIEZldGNoIGFsbCB2aWRlb3NcbiAgICAgIGNvbnN0IHZpZGVvU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZVZpZGVvcycpKTtcbiAgICAgIGNvbnN0IGV4ZXJjaXNlVmlkZW9zID0gdmlkZW9TbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PiBcbiAgICAgICAgRXhlcmNpc2VWaWRlby5mcm9tRmlyZWJhc2Uoe1xuICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgLi4uZG9jLmRhdGEoKVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGBGZXRjaGVkICR7ZXhlcmNpc2VWaWRlb3MubGVuZ3RofSBleGVyY2lzZSB2aWRlb3NgKTtcbiAgXG4gICAgICAvLyAzLiBNYXAgdmlkZW9zIHRvIGV4ZXJjaXNlc1xuICAgICAgY29uc3QgZXhlcmNpc2VzV2l0aFZpZGVvcyA9IGV4ZXJjaXNlcy5tYXAoZXhlcmNpc2UgPT4ge1xuICAgICAgICBjb25zdCBtYXRjaGluZ1ZpZGVvcyA9IGV4ZXJjaXNlVmlkZW9zLmZpbHRlcihcbiAgICAgICAgICAodmlkZW8pID0+IHZpZGVvLmV4ZXJjaXNlLnRvTG93ZXJDYXNlKCkgPT09IGV4ZXJjaXNlLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICApO1xuICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmV4ZXJjaXNlLFxuICAgICAgICAgIHZpZGVvczogbWF0Y2hpbmdWaWRlb3NcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICBcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdGaW5pc2hlZCBtYXBwaW5nIGV4ZXJjaXNlcyB3aXRoIHZpZGVvcycpO1xuICAgICAgLy8gY29uc29sZS5sb2coYFRvdGFsIGV4ZXJjaXNlcyB3aXRoIHZpZGVvczogJHtleGVyY2lzZXNXaXRoVmlkZW9zLmxlbmd0aH1gKTtcbiAgICAgICAgXG4gICAgICByZXR1cm4gZXhlcmNpc2VzV2l0aFZpZGVvcztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYW5kIG1hcHBpbmcgZXhlcmNpc2VzIHdpdGggdmlkZW9zOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgdG8gYnVpbGQgdGhlIFdvcmtvdXQgb2JqZWN0ICsgYW55IGxvZ3MgZnJvbSB0aGUgc25hcHNob3QuXG4gICAqL1xuICBhc3luYyBmZXRjaEFsbFdvcmtvdXRTZXNzaW9ucyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8e1xuICAgIHdvcmtvdXQ6IFdvcmtvdXQgfCBudWxsO1xuICAgIGxvZ3M6IEV4ZXJjaXNlTG9nW10gfCBudWxsO1xuICB9W10+IHtcbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIElEIHByb3ZpZGVkJyk7XG4gICAgfVxuICBcbiAgICB0cnkge1xuICAgICAgLy8gMS4gRmV0Y2ggYWxsIGV4ZXJjaXNlcyBcbiAgICAgIGNvbnN0IGV4ZXJjaXNlU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZXMnKSk7XG4gICAgICBjb25zdCBleGVyY2lzZXMgPSBleGVyY2lzZVNuYXBzaG90LmRvY3MubWFwKChkb2MpID0+IFxuICAgICAgICBFeGVyY2lzZS5mcm9tRmlyZWJhc2Uoe1xuICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgLi4uZG9jLmRhdGEoKVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgXG4gICAgICAvLyAyLiBGZXRjaCBhbGwgdmlkZW9zXG4gICAgICBjb25zdCB2aWRlb1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VWaWRlb3MnKSk7XG4gICAgICBjb25zdCBleGVyY2lzZVZpZGVvcyA9IHZpZGVvU25hcHNob3QuZG9jcy5tYXAoKGRvYykgPT4gXG4gICAgICAgIEV4ZXJjaXNlVmlkZW8uZnJvbUZpcmViYXNlKHtcbiAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgIC4uLmRvYy5kYXRhKClcbiAgICAgICAgfSlcbiAgICAgICk7XG4gIFxuICAgICAgLy8gMy4gTWFwIHZpZGVvcyB0byBleGVyY2lzZXNcbiAgICAgIGNvbnN0IGV4ZXJjaXNlc1dpdGhWaWRlb3MgPSBleGVyY2lzZXMubWFwKGV4ZXJjaXNlID0+IHtcbiAgICAgICAgY29uc3QgbWF0Y2hpbmdWaWRlb3MgPSBleGVyY2lzZVZpZGVvcy5maWx0ZXIoXG4gICAgICAgICAgKHZpZGVvKSA9PiB2aWRlby5leGVyY2lzZS50b0xvd2VyQ2FzZSgpID09PSBleGVyY2lzZS5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgKTtcbiAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uZXhlcmNpc2UsXG4gICAgICAgICAgdmlkZW9zOiBtYXRjaGluZ1ZpZGVvc1xuICAgICAgICB9O1xuICAgICAgfSk7XG4gIFxuICAgICAgLy8gNC4gRmV0Y2ggd29ya291dCBzZXNzaW9uc1xuICAgICAgY29uc3Qgd29ya291dFNlc3Npb25zUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgdXNlcklkLCAnd29ya291dFNlc3Npb25zJyk7XG4gICAgICBjb25zdCBzbmFwID0gYXdhaXQgZ2V0RG9jcyh3b3Jrb3V0U2Vzc2lvbnNSZWYpO1xuICBcbiAgICAgIGlmIChzbmFwLmVtcHR5KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdObyB3b3Jrb3V0IHNlc3Npb25zIGZvdW5kIGZvciB1c2VyJyk7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgXG4gICAgICAvLyA1LiBQcm9jZXNzIGVhY2ggd29ya291dCBzZXNzaW9uXG4gICAgICBjb25zdCBzZXNzaW9ucyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICBzbmFwLmRvY3MubWFwKGFzeW5jIChkb2MpID0+IHtcbiAgICAgICAgICBjb25zdCBzZXNzaW9uRGF0YSA9IGF3YWl0IHRoaXMucHJvY2Vzc1dvcmtvdXRTZXNzaW9uRG9jdW1lbnQoXG4gICAgICAgICAgICBkb2MsIFxuICAgICAgICAgICAgZXhlcmNpc2VzV2l0aFZpZGVvc1xuICAgICAgICAgICk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU29ydCB0aGUgbG9ncyBieSB0aGUgJ29yZGVyJyBwcm9wZXJ0eSwgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgaWYgKHNlc3Npb25EYXRhLmxvZ3MpIHtcbiAgICAgICAgICAgIHNlc3Npb25EYXRhLmxvZ3Muc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBvcmRlckEgPSBhLm9yZGVyID8/IDA7XG4gICAgICAgICAgICAgIGNvbnN0IG9yZGVyQiA9IGIub3JkZXIgPz8gMDtcbiAgICAgICAgICAgICAgcmV0dXJuIG9yZGVyQSAtIG9yZGVyQjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgXG4gICAgICAgICAgcmV0dXJuIHNlc3Npb25EYXRhO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgXG4gICAgICAvLyBjb25zb2xlLmxvZyhgRm91bmQgJHtzZXNzaW9ucy5sZW5ndGh9IHdvcmtvdXQgc2Vzc2lvbnNgKTtcbiAgICAgIHJldHVybiBzZXNzaW9ucztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgd29ya291dCBzZXNzaW9uczonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVDb2xsZWN0aW9uKGNvbGxlY3Rpb246IFN3ZWF0bGlzdENvbGxlY3Rpb24pOiBQcm9taXNlPFN3ZWF0bGlzdENvbGxlY3Rpb24+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29sbFJlZiA9IGZzQ29sbGVjdGlvbihkYiwgXCJzd2VhdGxpc3QtY29sbGVjdGlvblwiKTtcbiAgXG4gICAgICAvLyBJZiBjb2xsZWN0aW9uLmlkIGlzIGVtcHR5LCBnZW5lcmF0ZSBhIG5ldyBkb2MgSUQgYW5kIGFzc2lnbiBpdC5cbiAgICAgIGlmICghY29sbGVjdGlvbi5pZCB8fCBjb2xsZWN0aW9uLmlkLnRyaW0oKSA9PT0gXCJcIikge1xuICAgICAgICBjb25zdCBuZXdEb2NSZWYgPSBkb2MoY29sbFJlZik7XG4gICAgICAgIGNvbGxlY3Rpb24uaWQgPSBuZXdEb2NSZWYuaWQ7XG4gICAgICB9XG4gIFxuICAgICAgLy8gRW5zdXJlIHRoZSBjaGFsbGVuZ2UgaWQgbWF0Y2hlcyB0aGUgY29sbGVjdGlvbiBpZC5cbiAgICAgIGlmIChjb2xsZWN0aW9uLmNoYWxsZW5nZSkge1xuICAgICAgICBjb2xsZWN0aW9uLmNoYWxsZW5nZS5pZCA9IGNvbGxlY3Rpb24uaWQ7XG4gICAgICB9XG4gIFxuICAgICAgLy8gVXBkYXRlIHRoZSB1cGRhdGVkQXQgZmllbGQuXG4gICAgICBjb2xsZWN0aW9uLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCk7XG4gIFxuICAgICAgLy8gU2F2ZSB0aGUgY29sbGVjdGlvbiB0byBGaXJlc3RvcmUuXG4gICAgICBhd2FpdCBzZXREb2MoZG9jKGNvbGxSZWYsIGNvbGxlY3Rpb24uaWQpLCBjb2xsZWN0aW9uLnRvRGljdGlvbmFyeSgpKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiQ29sbGVjdGlvbiB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgIHJldHVybiBjb2xsZWN0aW9uO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgY29sbGVjdGlvbiBkb2N1bWVudDpcIiwgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3Igd2hpbGUgdXBkYXRpbmcgdGhlIGNvbGxlY3Rpb25cIik7XG4gICAgfVxuICB9XG4gIFxuICBwcml2YXRlIGFzeW5jIHByb2Nlc3NXb3Jrb3V0U2Vzc2lvbkRvY3VtZW50KFxuICAgIHdvcmtvdXREb2M6IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdDxEb2N1bWVudERhdGE+LFxuICAgIGV4ZXJjaXNlc1dpdGhWaWRlb3M6IEV4ZXJjaXNlW11cbiAgKTogUHJvbWlzZTx7IHdvcmtvdXQ6IFdvcmtvdXQ7IGxvZ3M6IEV4ZXJjaXNlTG9nW10gfT4ge1xuICAgIGNvbnN0IGRhdGEgPSB3b3Jrb3V0RG9jLmRhdGEoKTtcbiAgXG4gICAgLy8gTWFwIGV4ZXJjaXNlcyB3aXRoIHRoZWlyIGZ1bGwgZGF0YSBhbmQgdmlkZW9zXG4gICAgY29uc3QgbWFwcGVkRXhlcmNpc2VzID0gKGRhdGEuZXhlcmNpc2VzIHx8IFtdKS5tYXAoKGV4ZXJjaXNlUmVmOiBhbnkpID0+IHtcbiAgICAgIC8vIEZpbmQgdGhlIGZ1bGwgZXhlcmNpc2Ugd2l0aCB2aWRlb3NcbiAgICAgIGNvbnN0IGV4ZXJjaXNlTmFtZUxvd2VyID0gZXhlcmNpc2VSZWYuZXhlcmNpc2U/Lm5hbWU/LnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgICAgY29uc3QgZnVsbEV4ZXJjaXNlID0gZXhlcmNpc2VzV2l0aFZpZGVvcy5maW5kKFxuICAgICAgICBleCA9PiBleC5uYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpID09PSBleGVyY2lzZU5hbWVMb3dlclxuICAgICAgKTtcbiAgXG4gICAgICAvLyBJZiBmdWxsIGV4ZXJjaXNlIGZvdW5kLCByZXR1cm4gaXQsIG90aGVyd2lzZSB1c2UgdGhlIG9yaWdpbmFsXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5leGVyY2lzZVJlZixcbiAgICAgICAgZXhlcmNpc2U6IGZ1bGxFeGVyY2lzZSB8fCBleGVyY2lzZVJlZi5leGVyY2lzZVxuICAgICAgfTtcbiAgICB9KTtcbiAgXG4gICAgLy8gQ3JlYXRlIHRoZSB3b3Jrb3V0IHdpdGggbWFwcGVkIGV4ZXJjaXNlc1xuICAgIGNvbnN0IHdvcmtvdXQgPSBuZXcgV29ya291dCh7XG4gICAgICBpZDogd29ya291dERvYy5pZCxcbiAgICAgIHJvdW5kV29ya291dElkOiBkYXRhLnJvdW5kV29ya291dElkIHx8ICcnLFxuICAgICAgZXhlcmNpc2VzOiBtYXBwZWRFeGVyY2lzZXMsXG4gICAgICB0aXRsZTogZGF0YS50aXRsZSB8fCAnJyxcbiAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgZHVyYXRpb246IGRhdGEuZHVyYXRpb24gfHwgMCxcbiAgICAgIHVzZUF1dGhvckNvbnRlbnQ6IGRhdGEudXNlQXV0aG9yQ29udGVudCB8fCBmYWxzZSxcbiAgICAgIGlzQ29tcGxldGVkOiBkYXRhLmlzQ29tcGxldGVkIHx8IGZhbHNlLFxuICAgICAgd29ya291dFN0YXR1czogZGF0YS53b3Jrb3V0U3RhdHVzIHx8IFdvcmtvdXRTdGF0dXMuQXJjaGl2ZWQsXG4gICAgICBhdXRob3I6IGRhdGEuYXV0aG9yIHx8ICcnLFxuICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY3JlYXRlZEF0KSxcbiAgICAgIHVwZGF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLnVwZGF0ZWRBdCksXG4gICAgICBzdGFydFRpbWU6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5zdGFydFRpbWUpLFxuICAgICAgY29sbGVjdGlvbklkOiBkYXRhLmNvbGxlY3Rpb25JZCxcbiAgICAgIGNoYWxsZW5nZTogZGF0YS5jaGFsbGVuZ2UsXG4gICAgICBsb2dzOiAoZGF0YS5sb2dzIHx8IFtdKS5tYXAoKGxvZ0RhdGE6IGFueSkgPT4ge1xuICAgICAgICAvLyBNYXAgbG9ncyB3aXRoIGZ1bGwgZXhlcmNpc2VzXG4gICAgICAgIGNvbnN0IGV4ZXJjaXNlTmFtZUxvd2VyID0gbG9nRGF0YS5leGVyY2lzZT8ubmFtZT8udG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgICAgIGNvbnN0IGZ1bGxFeGVyY2lzZSA9IGV4ZXJjaXNlc1dpdGhWaWRlb3MuZmluZChcbiAgICAgICAgICBleCA9PiBleC5uYW1lLnRvTG93ZXJDYXNlKCkudHJpbSgpID09PSBleGVyY2lzZU5hbWVMb3dlclxuICAgICAgICApO1xuICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5sb2dEYXRhLFxuICAgICAgICAgIGV4ZXJjaXNlOiBmdWxsRXhlcmNpc2UgfHwgbG9nRGF0YS5leGVyY2lzZVxuICAgICAgICB9O1xuICAgICAgfSksXG4gICAgICB3b3Jrb3V0UmF0aW5nOiBkYXRhLndvcmtvdXRSYXRpbmcsXG4gICAgICBvcmRlcjogZGF0YS5vcmRlcixcbiAgICAgIHpvbmU6IGRhdGEuem9uZSB8fCBCb2R5Wm9uZS5GdWxsQm9keVxuICAgIH0pO1xuICBcbiAgICBjb25zb2xlLmxvZyhcIlRoZSBXb3Jrb3V0IElEIGlzOiBcIiArIHdvcmtvdXQuaWQpO1xuICAgIC8vIEZldGNoIGxvZ3MgZnJvbSBzdWJjb2xsZWN0aW9uXG4gICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24od29ya291dERvYy5yZWYsICdsb2dzJyk7XG4gICAgY29uc3QgbG9nc1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhsb2dzUmVmKTtcbiAgICBcbiAgICBjb25zdCBsb2dzOiBFeGVyY2lzZUxvZ1tdID0gbG9nc1NuYXBzaG90LmRvY3MubWFwKGxvZ0RvYyA9PiB7XG4gICAgICBjb25zdCBsb2dEYXRhID0gbG9nRG9jLmRhdGEoKTtcbiAgICAgIFxuICAgICAgLy8gRmluZCB0aGUgZnVsbCBleGVyY2lzZSB3aXRoIHZpZGVvc1xuICAgICAgY29uc3QgZXhlcmNpc2VOYW1lTG93ZXIgPSBsb2dEYXRhLmV4ZXJjaXNlPy5uYW1lPy50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICAgIGNvbnN0IGZ1bGxFeGVyY2lzZSA9IGV4ZXJjaXNlc1dpdGhWaWRlb3MuZmluZChcbiAgICAgICAgZXggPT4gZXgubmFtZS50b0xvd2VyQ2FzZSgpLnRyaW0oKSA9PT0gZXhlcmNpc2VOYW1lTG93ZXJcbiAgICAgICk7XG4gIFxuICAgICAgLy8gUHJlcGFyZSBsb2cgZGF0YSB3aXRoIGZ1bGwgZXhlcmNpc2VcbiAgICAgIGNvbnN0IHByZXBhcmVkTG9nRGF0YSA9IHtcbiAgICAgICAgLi4ubG9nRGF0YSxcbiAgICAgICAgaWQ6IGxvZ0RvYy5pZCxcbiAgICAgICAgd29ya291dElkOiB3b3Jrb3V0LmlkLFxuICAgICAgICBleGVyY2lzZTogZnVsbEV4ZXJjaXNlIHx8IGxvZ0RhdGEuZXhlcmNpc2UsXG4gICAgICAgIGNyZWF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChsb2dEYXRhLmNyZWF0ZWRBdCksXG4gICAgICAgIHVwZGF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChsb2dEYXRhLnVwZGF0ZWRBdClcbiAgICAgIH07XG4gIFxuICAgICAgLy8gVXNlIHRoZSBFeGVyY2lzZUxvZyBjb25zdHJ1Y3RvciB0byBlbnN1cmUgcHJvcGVyIG1hcHBpbmdcbiAgICAgIHJldHVybiBuZXcgRXhlcmNpc2VMb2cocHJlcGFyZWRMb2dEYXRhKTtcbiAgICB9KTtcbiAgXG4gICAgcmV0dXJuIHsgd29ya291dCwgbG9ncyB9O1xuICB9XG5cbiAgYXN5bmMgc2F2ZVdvcmtvdXRTZXNzaW9uKHtcbiAgICB1c2VySWQsXG4gICAgd29ya291dCxcbiAgICBsb2dzXG4gICB9OiB7XG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgd29ya291dDogV29ya291dCxcbiAgICBsb2dzOiBFeGVyY2lzZUxvZ1tdXG4gICB9KTogUHJvbWlzZTxXb3Jrb3V0IHwgbnVsbD4ge1xuICAgIGlmICghdXNlcklkKSB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgSUQgcHJvdmlkZWQnKTtcbiAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNsZWFuV29ya291dCA9IG5ldyBXb3Jrb3V0KHtcbiAgICAgICAgLi4ud29ya291dCxcbiAgICAgICAgcm91bmRXb3Jrb3V0SWQ6IGAke3dvcmtvdXQuaWR9LSR7Y3VycmVudERhdGUuZ2V0VGltZSgpfWAsXG4gICAgICAgIHdvcmtvdXRTdGF0dXM6IFdvcmtvdXRTdGF0dXMuUXVldWVkVXAsXG4gICAgICAgIGNyZWF0ZWRBdDogY3VycmVudERhdGUsXG4gICAgICAgIHVwZGF0ZWRBdDogY3VycmVudERhdGUsXG4gICAgICAgIHN0YXJ0VGltZTogY3VycmVudERhdGUsXG4gICAgICAgIGxvZ3M6IFtdXG4gICAgICAgfSk7XG4gICBcbiAgICAgIGNvbnN0IHdvcmtvdXRTZXNzaW9uUmVmID0gZG9jKGNvbGxlY3Rpb24oZGIsICd1c2VycycsIHVzZXJJZCwgJ3dvcmtvdXRTZXNzaW9ucycpKTtcbiAgICAgIGF3YWl0IHNldERvYyh3b3Jrb3V0U2Vzc2lvblJlZiwgY2xlYW5Xb3Jrb3V0KTtcbiAgIFxuICAgICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24od29ya291dFNlc3Npb25SZWYsICdsb2dzJyk7XG4gICAgICBjb25zdCBsb2dCYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xuICAgXG4gICAgICBsb2dzLmZvckVhY2goKGxvZywgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgbG9nRG9jUmVmID0gZG9jKGxvZ3NSZWYsIGAke2xvZy5pZH0tJHtjdXJyZW50RGF0ZS5nZXRUaW1lKCl9YCk7XG4gICAgICAgIGxvZ0JhdGNoLnNldChsb2dEb2NSZWYsIHtcbiAgICAgICAgICBpZDogbG9nRG9jUmVmLmlkLFxuICAgICAgICAgIHdvcmtvdXRJZDogd29ya291dFNlc3Npb25SZWYuaWQsXG4gICAgICAgICAgZXhlcmNpc2U6IHtcbiAgICAgICAgICAgIGlkOiBsb2cuZXhlcmNpc2UuaWQsXG4gICAgICAgICAgICBuYW1lOiBsb2cuZXhlcmNpc2UubmFtZSxcbiAgICAgICAgICAgIGNhdGVnb3J5OiBsb2cuZXhlcmNpc2UuY2F0ZWdvcnksXG4gICAgICAgICAgICB2aWRlb3M6IGxvZy5leGVyY2lzZS52aWRlb3MgfHwgW11cbiAgICAgICAgICB9LFxuICAgICAgICAgIG9yZGVyOiBpbmRleCxcbiAgICAgICAgICBjcmVhdGVkQXQ6IGN1cnJlbnREYXRlLFxuICAgICAgICAgIHVwZGF0ZWRBdDogY3VycmVudERhdGUsXG4gICAgICAgICAgbG9nU3VibWl0dGVkOiBmYWxzZSxcbiAgICAgICAgICBpc0NvbXBsZXRlZDogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgIFxuICAgICAgYXdhaXQgbG9nQmF0Y2guY29tbWl0KCk7XG4gICAgICBcbiAgICAgIHJldHVybiBjbGVhbldvcmtvdXQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyB3b3Jrb3V0IHNlc3Npb246JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgfVxuXG4gIC8qKlxuICAgKiBFeGFtcGxlIFwiam9pbiBjaGFsbGVuZ2VcIiBtZXRob2QgdXNpbmcgdGhlIGNsaWVudCBTREsgKG5vIGFkbWluIHByaXZpbGVnZXMpLlxuICAgKiBUaGlzIGNyZWF0ZXMgYSBkb2MgaW4gYHVzZXItY2hhbGxlbmdlYCB3aXRoIHRoZSB1c2VySWQsIGNoYWxsZW5nZUlkLCBldGMuXG4gICAqL1xuICBhc3luYyBqb2luQ2hhbGxlbmdlKHtcbiAgICB1c2VybmFtZSxcbiAgICBjaGFsbGVuZ2VJZFxuICB9OiB7XG4gICAgdXNlcm5hbWU6IHN0cmluZztcbiAgICBjaGFsbGVuZ2VJZDogc3RyaW5nO1xuICB9KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gMSkgTWFrZSBzdXJlIHdlIGhhdmUgYSBzaWduZWQtaW4gdXNlclxuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlclNlcnZpY2UuY3VycmVudFVzZXI7XG4gICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGlzIHNpZ25lZCBpbicpO1xuICAgIH1cblxuICAgIC8vIDIpIEZpbmQgdGhlIHVzZXIgZG9jIGJ5IHVzZXJuYW1lXG4gICAgY29uc3QgdXNlcnNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnKTtcbiAgICBjb25zdCB1c2VyUXVlcnkgPSBxdWVyeSh1c2Vyc1JlZiwgd2hlcmUoJ3VzZXJuYW1lJywgJz09JywgdXNlcm5hbWUpKTtcbiAgICBjb25zdCB1c2VyU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHVzZXJRdWVyeSk7XG5cbiAgICBpZiAodXNlclNuYXBzaG90LmVtcHR5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlckRvYyA9IHVzZXJTbmFwc2hvdC5kb2NzWzBdO1xuICAgIGNvbnN0IHVzZXJEYXRhID0gdXNlckRvYy5kYXRhKCk7XG4gICAgY29uc3QgdXNlcklkID0gdXNlckRvYy5pZDtcblxuICAgIC8vIDMpIENoZWNrIGlmIHRoZSBjaGFsbGVuZ2UgZG9jIGV4aXN0c1xuICAgIGNvbnN0IGNoYWxsZW5nZVJlZiA9IGRvYyhkYiwgJ3N3ZWF0bGlzdC1jb2xsZWN0aW9uJywgY2hhbGxlbmdlSWQpO1xuICAgIGNvbnN0IGNoYWxsZW5nZVNuYXAgPSBhd2FpdCBnZXREb2MoY2hhbGxlbmdlUmVmKTtcblxuICAgIGlmICghY2hhbGxlbmdlU25hcC5leGlzdHMoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDaGFsbGVuZ2Ugbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgY29uc3QgY2hhbGxlbmdlID0gY2hhbGxlbmdlU25hcC5kYXRhKCk7XG5cbiAgICAvLyA0KSBCdWlsZCBuZXcgdXNlci1jaGFsbGVuZ2UgZG9jdW1lbnRcbiAgICBjb25zdCB1c2VyQ2hhbGxlbmdlSWQgPSBgJHtjaGFsbGVuZ2VJZH0tJHt1c2VySWR9LSR7RGF0ZS5ub3coKX1gO1xuICAgIGNvbnN0IHVzZXJDaGFsbGVuZ2VEYXRhID0ge1xuICAgICAgaWQ6IHVzZXJDaGFsbGVuZ2VJZCxcbiAgICAgIGNoYWxsZW5nZTogY2hhbGxlbmdlLFxuICAgICAgY2hhbGxlbmdlSWQsXG4gICAgICB1c2VySWQsXG4gICAgICBmY21Ub2tlbjogdXNlckRhdGEuZmNtVG9rZW4gfHwgJycsXG4gICAgICBwcm9maWxlSW1hZ2U6IHVzZXJEYXRhLnByb2ZpbGVJbWFnZSB8fCB7fSxcbiAgICAgIHByb2dyZXNzOiAwLFxuICAgICAgY29tcGxldGVkV29ya291dHM6IFtdLFxuICAgICAgaXNDb21wbGV0ZWQ6IGZhbHNlLFxuICAgICAgdWlkOiB1c2VySWQsXG4gICAgICBsb2NhdGlvbjogdXNlckRhdGEubG9jYXRpb24gfHwgbnVsbCxcbiAgICAgIGNpdHk6ICcnLFxuICAgICAgY291bnRyeTogJycsXG4gICAgICB0aW1lem9uZTogJycsXG4gICAgICB1c2VybmFtZSxcbiAgICAgIGpvaW5EYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgcHVsc2VQb2ludHM6IHtcbiAgICAgICAgYmFzZUNvbXBsZXRpb246IDAsXG4gICAgICAgIGZpcnN0Q29tcGxldGlvbjogMCxcbiAgICAgICAgc3RyZWFrQm9udXM6IDAsXG4gICAgICAgIGNoZWNrSW5Cb251czogMCxcbiAgICAgICAgZWZmb3J0UmF0aW5nOiAwLFxuICAgICAgICBjaGF0UGFydGljaXBhdGlvbjogMCxcbiAgICAgICAgbG9jYXRpb25DaGVja2luOiAwLFxuICAgICAgICBjb250ZW50RW5nYWdlbWVudDogMCxcbiAgICAgICAgZW5jb3VyYWdlbWVudFNlbnQ6IDAsXG4gICAgICAgIGVuY291cmFnZW1lbnRSZWNlaXZlZDogMFxuICAgICAgfSxcbiAgICAgIGN1cnJlbnRTdHJlYWs6IDAsXG4gICAgICBlbmNvdXJhZ2VkVXNlcnM6IFtdLFxuICAgICAgZW5jb3VyYWdlZEJ5VXNlcnM6IFtdLFxuICAgICAgY2hlY2tJbnM6IFtdXG4gICAgfTtcblxuICAgIC8vIDUpIFN0b3JlIHVzZXItY2hhbGxlbmdlIGRvY1xuICAgIGF3YWl0IHNldERvYyhkb2MoZGIsICd1c2VyLWNoYWxsZW5nZScsIHVzZXJDaGFsbGVuZ2VJZCksIHVzZXJDaGFsbGVuZ2VEYXRhKTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3Qgd29ya291dFNlcnZpY2UgPSBuZXcgV29ya291dFNlcnZpY2UoKTsiXSwibmFtZXMiOlsiY29sbGVjdGlvbiIsImRvYyIsImdldERvY3MiLCJnZXREb2MiLCJxdWVyeSIsIndoZXJlIiwib3JkZXJCeSIsImZzQ29sbGVjdGlvbiIsInNldERvYyIsImRlbGV0ZURvYyIsIndyaXRlQmF0Y2giLCJkYiIsInVzZXJTZXJ2aWNlIiwiRXhlcmNpc2VMb2ciLCJFeGVyY2lzZSIsIkV4ZXJjaXNlVmlkZW8iLCJXb3Jrb3V0IiwiQm9keVpvbmUiLCJJbnRyb1ZpZGVvIiwiV29ya291dFN0YXR1cyIsIlN3ZWF0bGlzdENvbGxlY3Rpb24iLCJmb3JtYXQiLCJjb252ZXJ0VGltZXN0YW1wIiwic2VydmVyVGltZXN0YW1wIiwiY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcCIsIkNoYWxsZW5nZSIsIlVzZXJDaGFsbGVuZ2UiLCJXb3Jrb3V0U2VydmljZSIsIl9jdXJyZW50V29ya291dCIsIl9jdXJyZW50V29ya291dExvZ3MiLCJmZXRjaEN1cnJlbnRXb3Jrb3V0IiwidXNlcklkIiwic2Vzc2lvbiIsImZldGNoQ3VycmVudFdvcmtvdXRTZXNzaW9uIiwid29ya291dCIsImdldEFsbFN3ZWF0bGlzdHMiLCJ3b3Jrb3V0c1JlZiIsImV4ZXJjaXNlc1dpdGhWaWRlb3MiLCJ3b3Jrb3V0c1NuYXBzaG90Iiwid29ya291dHMiLCJ3b3Jrb3V0RG9jIiwid29ya291dERhdGEiLCJ3b3Jrb3V0SWQiLCJtYXBwZWRFeGVyY2lzZXMiLCJsb2dzUmVmIiwibG9nc1NuYXBzaG90IiwiZXJyb3IiLCJmaXJlc3RvcmVFcnJvciIsIkVycm9yIiwiZmV0Y2hBbmRNYXBFeGVyY2lzZXNXaXRoVmlkZW9zIiwiZG9jcyIsImRhdGEiLCJpZCIsImV4ZXJjaXNlcyIsIm1hcCIsImV4ZXJjaXNlUmVmIiwiZnVsbEV4ZXJjaXNlIiwiZmluZCIsImV4IiwibmFtZSIsImV4ZXJjaXNlIiwiY29uc29sZSIsImxvZyIsInJvdW5kV29ya291dElkIiwiY29sbGVjdGlvbklkIiwiY2hhbGxlbmdlIiwibG9ncyIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkdXJhdGlvbiIsIndvcmtvdXRSYXRpbmciLCJ1c2VBdXRob3JDb250ZW50IiwiaXNDb21wbGV0ZWQiLCJ3b3Jrb3V0U3RhdHVzIiwic3RhcnRUaW1lIiwiRGF0ZSIsInVuZGVmaW5lZCIsIm9yZGVyIiwiYXV0aG9yIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0Iiwiem9uZSIsImxvZ0RvYyIsInB1c2giLCJtZXNzYWdlIiwiZ2V0VXNlckNoYWxsZW5nZXNCeUNoYWxsZW5nZUlkIiwiY2hhbGxlbmdlSWQiLCJ1c2VyQ2hhbGxlbmdlc1JlZiIsInEiLCJzbmFwc2hvdCIsInVzZXJDaGFsbGVuZ2VzIiwibGVuZ3RoIiwiZmV0Y2hXb3Jrb3V0U3VtbWFyaWVzIiwiZGF0ZSIsImN1cnJlbnRVc2VyIiwiZm9ybWF0dGVkRGF0ZSIsInN1bW1hcmllc1JlZiIsImZldGNoQWxsV29ya291dFN1bW1hcmllcyIsImZldGNoVXNlckNoYWxsZW5nZXNCeVVzZXJJZCIsInN1YnRpdGxlIiwicGFydGljaXBhbnRzIiwic3RhdHVzIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsImludHJvVmlkZW9zIiwidiIsInZpZGVvVXJsIiwiZmV0Y2hDb2xsZWN0aW9uV2l0aFN3ZWF0TGlzdHMiLCJzd2VhdExpc3RzIiwic3dlYXRsaXN0SWRlbnRpZmllciIsImdldENvbGxlY3Rpb25CeUlkIiwic3dlYXRsaXN0SWRzIiwiZmV0Y2hTYXZlZFdvcmtvdXQiLCJzd2VhdGxpc3RBdXRob3JJZCIsInBhcnNlV29ya291dERhdGEiLCJRdWV1ZWRVcCIsInRvRGF0ZSIsIkZ1bGxCb2R5IiwiZXN0aW1hdGVkRHVyYXRpb24iLCJkZXRlcm1pbmVXb3Jrb3V0Wm9uZSIsInRvRGljdGlvbmFyeSIsImNyZWF0ZURlZmF1bHRFeGVyY2lzZSIsImNhdGVnb3J5IiwidHlwZSIsImRldGFpbHMiLCJyZXBzIiwic2V0cyIsIndlaWdodCIsInNjcmVlblRpbWUiLCJzZWxlY3RlZFZpZGVvIiwicGFyc2VFeGVyY2lzZVZpZGVvIiwicHJpbWFyeUJvZHlQYXJ0cyIsInNlY29uZGFyeUJvZHlQYXJ0cyIsInRhZ3MiLCJ2aXNpYmlsaXR5Iiwic3RlcHMiLCJ2aWRlb3MiLCJjdXJyZW50VmlkZW9Qb3NpdGlvbiIsInVzZXJuYW1lIiwicGFyc2VFeGVyY2lzZUxvZ0RhdGEiLCJwYXJzZUV4ZXJjaXNlIiwibG9nRW50cnkiLCJwYXJzZUludCIsInBhcnNlRmxvYXQiLCJsZWZ0UmVwcyIsImxlZnRXZWlnaHQiLCJpc1NwbGl0IiwiaXNCb2R5V2VpZ2h0IiwiY2Fsb3JpZXMiLCJicG0iLCJmZWVkYmFjayIsIm5vdGUiLCJyZWNvbW1lbmRlZFdlaWdodCIsImxvZ1N1Ym1pdHRlZCIsImxvZ0lzRWRpdGluZyIsImNvbXBsZXRlZEF0IiwiZmllbGRzIiwic3RyaW5nVmFsdWUiLCJwYXJzZUV4ZXJjaXNlQ2F0ZWdvcnkiLCJtYXBWYWx1ZSIsInBhcnNlQm9keVBhcnRzIiwiYXJyYXlWYWx1ZSIsInZhbHVlcyIsInRhZyIsInN0ZXAiLCJwYXJzZVZpZGVvcyIsImludGVnZXJWYWx1ZSIsImRvdWJsZVZhbHVlIiwicGFyc2VFeGVyY2lzZUF1dGhvciIsImNhdGVnb3J5SWQiLCJib2R5UGFydHNGaWVsZCIsImJvZHlQYXJ0c0FycmF5IiwicGFydCIsInZpZGVvc0ZpZWxkIiwidmlkZW9zQXJyYXkiLCJ2aWRlb0RhdGEiLCJleGVyY2lzZUlkIiwidmlkZW9VUkwiLCJmaWxlTmFtZSIsInByb2ZpbGVJbWFnZSIsInBhcnNlUHJvZmlsZUltYWdlIiwiY2FwdGlvbiIsImdpZlVSTCIsInRodW1ibmFpbCIsInRvdGFsQWNjb3VudHNSZWFjaGVkIiwidG90YWxBY2NvdW50TGlrZXMiLCJ0b3RhbEFjY291bnRCb29rbWFya2VkIiwidG90YWxBY2NvdW50VXNhZ2UiLCJpc0FwcHJvdmVkIiwiYm9vbGVhblZhbHVlIiwibGlrZWQiLCJib29rbWFya2VkIiwicHJvZmlsZUltYWdlVVJMIiwiaW1hZ2VPZmZzZXRXaWR0aCIsImltYWdlT2Zmc2V0SGVpZ2h0Iiwid29ya291dFJlZiIsIndvcmtvdXRTbmFwIiwiZXhpc3RzIiwibG9nRGF0YSIsImZldGNoVXNlckNoYWxsZW5nZXNCeUNoYWxsZW5nZUlkIiwiZG9jUmVmIiwiZG9jU25hcCIsImZldGNoQWN0aXZlQ2hhbGxlbmdlcyIsImFsbENoYWxsZW5nZXMiLCJhY3RpdmVDaGFsbGVuZ2VzIiwiZmlsdGVyIiwidXNlckNoYWxsZW5nZSIsImZldGNoVXNlckNoYWxsZW5nZXMiLCJ1cGRhdGVXb3Jrb3V0U3VtbWFyeSIsInN1bW1hcnkiLCJzdW1tYXJ5UmVmIiwic3VtbWFyeURhdGEiLCJib2R5UGFydHMiLCJ3b3Jrb3V0VGl0bGUiLCJjYWxvcmllc0J1cm5lZCIsImV4ZXJjaXNlc0NvbXBsZXRlZCIsImFpSW5zaWdodCIsInJlY29tbWVuZGF0aW9ucyIsImdpZlVSTHMiLCJyZWNvbW1lbmRlZFdvcmsiLCJtZXJnZSIsInVwZGF0ZVdvcmtvdXRMb2dzIiwiYmF0Y2giLCJmb3JFYWNoIiwibG9nRG9jUmVmIiwidXBkYXRlIiwiY29tbWl0IiwiZXhlcmNpc2VTbmFwc2hvdCIsInZpZGVvU25hcHNob3QiLCJleGVyY2lzZVZpZGVvcyIsIndvcmtvdXRTZXNzaW9uc1JlZiIsInNuYXAiLCJmcm9tRmlyZWJhc2UiLCJtYXRjaGluZ1ZpZGVvcyIsInZpZGVvIiwidG9Mb3dlckNhc2UiLCJlbXB0eSIsInByb2Nlc3NXb3Jrb3V0U2Vzc2lvbkRvY3VtZW50IiwiSW5Qcm9ncmVzcyIsImNhbmNlbFdvcmtvdXRTZXNzaW9uIiwibG9nQmF0Y2giLCJ3b3Jrb3V0U2Vzc2lvblJlZiIsImRlbGV0ZSIsInJlZiIsImZldGNoQWxsV29ya291dFNlc3Npb25zIiwic2Vzc2lvbnMiLCJQcm9taXNlIiwiYWxsIiwic2Vzc2lvbkRhdGEiLCJzb3J0IiwiYSIsImIiLCJvcmRlckEiLCJvcmRlckIiLCJ1cGRhdGVDb2xsZWN0aW9uIiwiY29sbFJlZiIsIm5ld0RvY1JlZiIsInRyaW0iLCJleGVyY2lzZU5hbWVMb3dlciIsIkFyY2hpdmVkIiwicHJlcGFyZWRMb2dEYXRhIiwic2F2ZVdvcmtvdXRTZXNzaW9uIiwiY3VycmVudERhdGUiLCJjbGVhbldvcmtvdXQiLCJnZXRUaW1lIiwiaW5kZXgiLCJzZXQiLCJqb2luQ2hhbGxlbmdlIiwidXNlcnNSZWYiLCJ1c2VyUXVlcnkiLCJ1c2VyU25hcHNob3QiLCJ1c2VyRG9jIiwidXNlckRhdGEiLCJjaGFsbGVuZ2VSZWYiLCJjaGFsbGVuZ2VTbmFwIiwidXNlckNoYWxsZW5nZUlkIiwidXNlckNoYWxsZW5nZURhdGEiLCJub3ciLCJmY21Ub2tlbiIsInByb2dyZXNzIiwiY29tcGxldGVkV29ya291dHMiLCJ1aWQiLCJsb2NhdGlvbiIsImNpdHkiLCJjb3VudHJ5IiwidGltZXpvbmUiLCJqb2luRGF0ZSIsInB1bHNlUG9pbnRzIiwiYmFzZUNvbXBsZXRpb24iLCJmaXJzdENvbXBsZXRpb24iLCJzdHJlYWtCb251cyIsImNoZWNrSW5Cb251cyIsImVmZm9ydFJhdGluZyIsImNoYXRQYXJ0aWNpcGF0aW9uIiwibG9jYXRpb25DaGVja2luIiwiY29udGVudEVuZ2FnZW1lbnQiLCJlbmNvdXJhZ2VtZW50U2VudCIsImVuY291cmFnZW1lbnRSZWNlaXZlZCIsImN1cnJlbnRTdHJlYWsiLCJlbmNvdXJhZ2VkVXNlcnMiLCJlbmNvdXJhZ2VkQnlVc2VycyIsImNoZWNrSW5zIiwiY3VycmVudFdvcmtvdXQiLCJjdXJyZW50V29ya291dExvZ3MiLCJ3b3Jrb3V0U2VydmljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/api/firebase/workout/service.ts\n"));

/***/ })

});
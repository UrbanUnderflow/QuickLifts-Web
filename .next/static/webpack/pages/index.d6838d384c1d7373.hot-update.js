"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/index",{

/***/ "./src/api/firebase/workoutSession/service.ts":
/*!****************************************************!*\
  !*** ./src/api/firebase/workoutSession/service.ts ***!
  \****************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WorkoutSessionService: function() { return /* binding */ WorkoutSessionService; },\n/* harmony export */   workoutSessionService: function() { return /* binding */ workoutSessionService; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @swc/helpers/_/_async_to_generator */ \"./node_modules/@swc/helpers/esm/_async_to_generator.js\");\n/* harmony import */ var _swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @swc/helpers/_/_class_call_check */ \"./node_modules/@swc/helpers/esm/_class_call_check.js\");\n/* harmony import */ var _swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @swc/helpers/_/_object_spread */ \"./node_modules/@swc/helpers/esm/_object_spread.js\");\n/* harmony import */ var _swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @swc/helpers/_/_object_spread_props */ \"./node_modules/@swc/helpers/esm/_object_spread_props.js\");\n/* harmony import */ var _swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @swc/helpers/_/_to_consumable_array */ \"./node_modules/@swc/helpers/esm/_to_consumable_array.js\");\n/* harmony import */ var _swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @swc/helpers/_/_ts_generator */ \"./node_modules/@swc/helpers/esm/_ts_generator.js\");\n/* harmony import */ var _firebase_workout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../firebase/workout */ \"./src/api/firebase/workout/index.ts\");\n/* harmony import */ var _firebase_workout_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../firebase/workout/service */ \"./src/api/firebase/workout/service.ts\");\n/* harmony import */ var _firebase_user_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../firebase/user/service */ \"./src/api/firebase/user/service.ts\");\n// workoutSessionService.ts\n\n\n\n\n\n\n\n\n\nvar WorkoutSessionService = /*#__PURE__*/ function() {\n    \"use strict\";\n    function WorkoutSessionService() {\n        (0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_3__._)(this, WorkoutSessionService);\n        // State management\n        this.isInProgress = false;\n        this.completedExercises = [];\n    }\n    var _proto = WorkoutSessionService.prototype;\n    // Helper functions\n    _proto.estimateCaloriesBurnedLocally = function estimateCaloriesBurnedLocally(numberOfExercises, duration) {\n        var baseCaloriesPerMinute = 5;\n        var exerciseMultiplier = 1.1;\n        var durationInMinutes = Math.min(duration / 60, 60);\n        return Math.floor(baseCaloriesPerMinute * durationInMinutes * Math.pow(exerciseMultiplier, numberOfExercises));\n    };\n    _proto.cleanUpWorkoutInProgress = function cleanUpWorkoutInProgress() {\n        this.isInProgress = false;\n        this.startTime = undefined;\n        // Clear local storage\n        localStorage.removeItem(\"exerciseLogs\");\n        localStorage.removeItem(\"isWorkoutInProgress\");\n        localStorage.removeItem(\"currentWorkout\");\n        localStorage.removeItem(\"currentWorkoutSummary\");\n        // Reset current workout\n        this.currentWorkout = undefined;\n        this.currentWorkoutSummary = undefined;\n    };\n    _proto.updateWorkoutServices = function updateWorkoutServices(workoutSummary) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_4__._)(function() {\n            var _userService_currentUser, userId, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_5__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        userId = (_userService_currentUser = _firebase_user_service__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser === void 0 ? void 0 : _userService_currentUser.id;\n                        if (!userId) throw new Error(\"No authenticated user\");\n                        // Save to Firestore using workoutService\n                        return [\n                            4,\n                            _firebase_workout_service__WEBPACK_IMPORTED_MODULE_1__.workoutService.updateWorkoutSummary({\n                                userId: userId,\n                                workoutId: workoutSummary.workoutId,\n                                summary: workoutSummary\n                            })\n                        ];\n                    case 1:\n                        _state.sent();\n                        return [\n                            3,\n                            3\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error saving workout summary:\", error);\n                        throw error;\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.validateWorkoutState = function validateWorkoutState() {\n        var allEmpty = this.completedExercises.every(function(log) {\n            return log.logs.every(function(entry) {\n                return entry.reps === 0 && entry.weight === 0;\n            });\n        });\n        return allEmpty ? \"allEmpty\" : \"valid\";\n    };\n    // Main functions\n    _proto.endWorkout = function endWorkout(user, workout, userChallenge, startTime, endTime) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_4__._)(function() {\n            var workoutState, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_5__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _this.currentWorkout = workout;\n                        workoutState = _this.validateWorkoutState();\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            8,\n                            ,\n                            9\n                        ]);\n                        switch(workoutState){\n                            case \"allEmpty\":\n                                return [\n                                    3,\n                                    2\n                                ];\n                            case \"valid\":\n                                return [\n                                    3,\n                                    5\n                                ];\n                        }\n                        return [\n                            3,\n                            7\n                        ];\n                    case 2:\n                        if (!_this.completedExercises.some(function(log) {\n                            return log.logSubmitted;\n                        })) return [\n                            3,\n                            4\n                        ];\n                        return [\n                            4,\n                            _this.processWorkoutCompletion(user, userChallenge, startTime, endTime)\n                        ];\n                    case 3:\n                        return [\n                            2,\n                            _state.sent()\n                        ];\n                    case 4:\n                        throw new Error(\"No logs submitted\");\n                    case 5:\n                        return [\n                            4,\n                            _this.processWorkoutCompletion(user, userChallenge, startTime, endTime)\n                        ];\n                    case 6:\n                        return [\n                            2,\n                            _state.sent()\n                        ];\n                    case 7:\n                        return [\n                            3,\n                            9\n                        ];\n                    case 8:\n                        error = _state.sent();\n                        throw error;\n                    case 9:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // Then also update processWorkoutCompletion to handle null userChallenge\n    _proto.processWorkoutCompletion = function processWorkoutCompletion(user, userChallenge, startTime, endTime) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_4__._)(function() {\n            var _this_currentWorkoutSummary, _this_currentWorkoutSummary_recommendedWork, suggestedWorkScore, workoutSummary, duration, caloriesBurned, finalSummary;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_5__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!_this.currentWorkout) {\n                            throw new Error(\"No current workout\");\n                        }\n                        suggestedWorkScore = (_this_currentWorkoutSummary_recommendedWork = (_this_currentWorkoutSummary = _this.currentWorkoutSummary) === null || _this_currentWorkoutSummary === void 0 ? void 0 : _this_currentWorkoutSummary.recommendedWork) !== null && _this_currentWorkoutSummary_recommendedWork !== void 0 ? _this_currentWorkoutSummary_recommendedWork : 0;\n                        workoutSummary = _this.createWorkoutSummary(user, _this.currentWorkout, suggestedWorkScore, startTime, endTime);\n                        duration = endTime.getTime() - startTime.getTime();\n                        caloriesBurned = _this.estimateCaloriesBurnedLocally(workoutSummary.exercisesCompleted.length, duration / 1000);\n                        return [\n                            4,\n                            _this.finalizeWorkoutSummary(workoutSummary, userChallenge, _this.currentWorkout.roundWorkoutId, caloriesBurned, startTime, endTime)\n                        ];\n                    case 1:\n                        finalSummary = _state.sent();\n                        return [\n                            2,\n                            {\n                                status: _firebase_workout__WEBPACK_IMPORTED_MODULE_0__.WorkoutStatus.Complete,\n                                workoutSummary: finalSummary\n                            }\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.createWorkoutSummary = function createWorkoutSummary(user, workout, suggestedWorkScore, startTime, endTime) {\n        var _this = this;\n        var logs = this.completedExercises.filter(function(log) {\n            return log.logSubmitted && _this.isLogComplete(log);\n        });\n        // Create the data object that matches our constructor\n        var summaryData = {\n            id: workout.id,\n            workoutId: workout.id,\n            exercises: this.completedExercises,\n            bodyParts: workout.fetchPrimaryBodyParts(),\n            secondaryBodyParts: workout.fetchSecondaryBodyParts(),\n            workoutTitle: workout.title,\n            caloriesBurned: 0,\n            workoutRating: undefined,\n            exercisesCompleted: logs,\n            aiInsight: \"\",\n            recommendations: [],\n            gifURLs: undefined,\n            recommendedWork: suggestedWorkScore,\n            isCompleted: true,\n            createdAt: startTime,\n            updatedAt: new Date(),\n            completedAt: endTime,\n            duration: this.calculateDuration(startTime, endTime)\n        };\n        // Use the constructor to create the WorkoutSummary instance\n        return new _firebase_workout__WEBPACK_IMPORTED_MODULE_0__.WorkoutSummary(summaryData);\n    };\n    _proto.calculateDuration = function calculateDuration(startTime, endTime) {\n        var durationInMillis = endTime.getTime() - startTime.getTime();\n        var minutes = Math.floor(durationInMillis / (1000 * 60));\n        return \"\".concat(minutes, \" min\");\n    };\n    _proto.isWorkoutAssignedForToday = function isWorkoutAssignedForToday() {\n        var _this_currentWorkout;\n        if (!((_this_currentWorkout = this.currentWorkout) === null || _this_currentWorkout === void 0 ? void 0 : _this_currentWorkout.assignedDate)) {\n            return false;\n        }\n        var today = new Date();\n        var assignedDate = new Date(this.currentWorkout.assignedDate);\n        return assignedDate.getFullYear() === today.getFullYear() && assignedDate.getMonth() === today.getMonth() && assignedDate.getDate() === today.getDate();\n    };\n    _proto.updateChallengeIfNeeded = function updateChallengeIfNeeded(currentWorkoutSummary, userChallenge, challengeWorkoutId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_4__._)(function() {\n            var _userService_currentUser, _currentWorkoutSummary_pulsePoints, _currentWorkoutSummary_pulsePoints1, _currentWorkoutSummary_pulsePoints2, _currentWorkoutSummary_pulsePoints3, _currentWorkoutSummary_pulsePoints4, _currentWorkoutSummary_pulsePoints5, _currentWorkoutSummary_pulsePoints6, challengeData, updatedChallenge, _currentWorkoutSummary_pulsePoints_checkInBonus, _currentWorkoutSummary_pulsePoints_effortRating, _currentWorkoutSummary_pulsePoints_chatParticipation, _currentWorkoutSummary_pulsePoints_locationCheckin, _currentWorkoutSummary_pulsePoints_contentEngagement, _currentWorkoutSummary_pulsePoints_encouragementSent, _currentWorkoutSummary_pulsePoints_encouragementReceived, sessionPulsePoints, updatedSummaryData, updatedSummary;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_5__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userChallenge || !challengeWorkoutId || !currentWorkoutSummary) {\n                            return [\n                                2,\n                                currentWorkoutSummary\n                            ];\n                        }\n                        if (!((_userService_currentUser = _firebase_user_service__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser) === null || _userService_currentUser === void 0 ? void 0 : _userService_currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Create a new challenge object with all the updated data\n                        challengeData = (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_6__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({}, userChallenge), {\n                            completedWorkouts: (0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_8__._)(userChallenge.completedWorkouts).concat([\n                                {\n                                    id: \"\".concat(challengeWorkoutId, \"-\").concat(new Date().getTime()),\n                                    workoutId: challengeWorkoutId,\n                                    completedAt: new Date()\n                                }\n                            ]),\n                            pulsePoints: (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_6__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({}, userChallenge.pulsePoints), {\n                                baseCompletion: userChallenge.pulsePoints.baseCompletion + 100,\n                                firstCompletion: userChallenge.completedWorkouts.length === 0 ? userChallenge.pulsePoints.firstCompletion + 50 : userChallenge.pulsePoints.firstCompletion,\n                                streakBonus: 0,\n                                cumulativeStreakBonus: _this.isWorkoutAssignedForToday() ? userChallenge.currentStreak * 25 : userChallenge.pulsePoints.cumulativeStreakBonus\n                            }),\n                            currentStreak: _this.calculateStreak(userChallenge, new Date()),\n                            isCurrentlyActive: false,\n                            updatedAt: new Date()\n                        });\n                        // Create a new UserChallenge instance with the updated data\n                        updatedChallenge = new _firebase_workout__WEBPACK_IMPORTED_MODULE_0__.UserChallenge(challengeData);\n                        // Update WorkoutSummary with PulsePoints\n                        sessionPulsePoints = new _firebase_workout__WEBPACK_IMPORTED_MODULE_0__.PulsePoints({\n                            baseCompletion: 100,\n                            firstCompletion: updatedChallenge.completedWorkouts.length === 1 ? 50 : 0,\n                            streakBonus: 0,\n                            cumulativeStreakBonus: _this.isWorkoutAssignedForToday() ? updatedChallenge.pulsePoints.cumulativeStreakBonus : 0,\n                            checkInBonus: (_currentWorkoutSummary_pulsePoints_checkInBonus = (_currentWorkoutSummary_pulsePoints = currentWorkoutSummary.pulsePoints) === null || _currentWorkoutSummary_pulsePoints === void 0 ? void 0 : _currentWorkoutSummary_pulsePoints.checkInBonus) !== null && _currentWorkoutSummary_pulsePoints_checkInBonus !== void 0 ? _currentWorkoutSummary_pulsePoints_checkInBonus : 0,\n                            effortRating: (_currentWorkoutSummary_pulsePoints_effortRating = (_currentWorkoutSummary_pulsePoints1 = currentWorkoutSummary.pulsePoints) === null || _currentWorkoutSummary_pulsePoints1 === void 0 ? void 0 : _currentWorkoutSummary_pulsePoints1.effortRating) !== null && _currentWorkoutSummary_pulsePoints_effortRating !== void 0 ? _currentWorkoutSummary_pulsePoints_effortRating : 0,\n                            chatParticipation: (_currentWorkoutSummary_pulsePoints_chatParticipation = (_currentWorkoutSummary_pulsePoints2 = currentWorkoutSummary.pulsePoints) === null || _currentWorkoutSummary_pulsePoints2 === void 0 ? void 0 : _currentWorkoutSummary_pulsePoints2.chatParticipation) !== null && _currentWorkoutSummary_pulsePoints_chatParticipation !== void 0 ? _currentWorkoutSummary_pulsePoints_chatParticipation : 0,\n                            locationCheckin: (_currentWorkoutSummary_pulsePoints_locationCheckin = (_currentWorkoutSummary_pulsePoints3 = currentWorkoutSummary.pulsePoints) === null || _currentWorkoutSummary_pulsePoints3 === void 0 ? void 0 : _currentWorkoutSummary_pulsePoints3.locationCheckin) !== null && _currentWorkoutSummary_pulsePoints_locationCheckin !== void 0 ? _currentWorkoutSummary_pulsePoints_locationCheckin : 0,\n                            contentEngagement: (_currentWorkoutSummary_pulsePoints_contentEngagement = (_currentWorkoutSummary_pulsePoints4 = currentWorkoutSummary.pulsePoints) === null || _currentWorkoutSummary_pulsePoints4 === void 0 ? void 0 : _currentWorkoutSummary_pulsePoints4.contentEngagement) !== null && _currentWorkoutSummary_pulsePoints_contentEngagement !== void 0 ? _currentWorkoutSummary_pulsePoints_contentEngagement : 0,\n                            encouragementSent: (_currentWorkoutSummary_pulsePoints_encouragementSent = (_currentWorkoutSummary_pulsePoints5 = currentWorkoutSummary.pulsePoints) === null || _currentWorkoutSummary_pulsePoints5 === void 0 ? void 0 : _currentWorkoutSummary_pulsePoints5.encouragementSent) !== null && _currentWorkoutSummary_pulsePoints_encouragementSent !== void 0 ? _currentWorkoutSummary_pulsePoints_encouragementSent : 0,\n                            encouragementReceived: (_currentWorkoutSummary_pulsePoints_encouragementReceived = (_currentWorkoutSummary_pulsePoints6 = currentWorkoutSummary.pulsePoints) === null || _currentWorkoutSummary_pulsePoints6 === void 0 ? void 0 : _currentWorkoutSummary_pulsePoints6.encouragementReceived) !== null && _currentWorkoutSummary_pulsePoints_encouragementReceived !== void 0 ? _currentWorkoutSummary_pulsePoints_encouragementReceived : 0\n                        });\n                        // Create updated summary with new PulsePoints\n                        updatedSummaryData = (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_6__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({}, currentWorkoutSummary), {\n                            pulsePoints: sessionPulsePoints\n                        });\n                        updatedSummary = new _firebase_workout__WEBPACK_IMPORTED_MODULE_0__.WorkoutSummary(updatedSummaryData);\n                        // Save updated summary and challenge using workoutService\n                        return [\n                            4,\n                            _firebase_workout_service__WEBPACK_IMPORTED_MODULE_1__.workoutService.updateWorkoutSummary({\n                                userId: _firebase_user_service__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser.id,\n                                workoutId: challengeWorkoutId,\n                                summary: updatedSummary\n                            })\n                        ];\n                    case 1:\n                        _state.sent();\n                        return [\n                            4,\n                            _firebase_workout_service__WEBPACK_IMPORTED_MODULE_1__.workoutService.updateUserChallenge(updatedChallenge)\n                        ];\n                    case 2:\n                        _state.sent();\n                        return [\n                            2,\n                            updatedSummary\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.calculateStreak = function calculateStreak(challenge, newCompletionDate) {\n        var sortedWorkouts = (0,_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_8__._)(challenge.completedWorkouts).sort(function(a, b) {\n            return a.completedAt.getTime() - b.completedAt.getTime();\n        });\n        var streak = 1;\n        for(var i = 1; i < sortedWorkouts.length; i++){\n            var previousDate = new Date(sortedWorkouts[i - 1].completedAt);\n            var currentDate = new Date(sortedWorkouts[i].completedAt);\n            if (this.isNextDay(previousDate, currentDate)) {\n                streak++;\n            } else if (!this.isSameDay(previousDate, currentDate)) {\n                streak = 1;\n            }\n        }\n        return streak;\n    };\n    _proto.isNextDay = function isNextDay(date1, date2) {\n        var nextDay = new Date(date1);\n        nextDay.setDate(nextDay.getDate() + 1);\n        return this.isSameDay(nextDay, date2);\n    };\n    _proto.isSameDay = function isSameDay(date1, date2) {\n        return date1.getFullYear() === date2.getFullYear() && date1.getMonth() === date2.getMonth() && date1.getDate() === date2.getDate();\n    };\n    // Update finalizeWorkoutSummary to include PulsePoints\n    _proto.finalizeWorkoutSummary = function finalizeWorkoutSummary(workoutSummary, userChallenge, challengeWorkoutId, calories, startTime, endTime) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_4__._)(function() {\n            var updatedSummary;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_5__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        updatedSummary = new _firebase_workout__WEBPACK_IMPORTED_MODULE_0__.WorkoutSummary((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_6__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__._)({}, workoutSummary), {\n                            caloriesBurned: calories,\n                            isCompleted: true,\n                            startTime: startTime,\n                            completedAt: endTime,\n                            exercisesCompleted: _this.completedExercises.filter(function(log) {\n                                return log.logSubmitted;\n                            }),\n                            // Only initialize PulsePoints if there's a challenge\n                            pulsePoints: userChallenge ? new _firebase_workout__WEBPACK_IMPORTED_MODULE_0__.PulsePoints({}) : undefined\n                        }));\n                        if (!userChallenge) return [\n                            3,\n                            2\n                        ];\n                        return [\n                            4,\n                            _this.updateChallengeIfNeeded(updatedSummary, userChallenge, challengeWorkoutId)\n                        ];\n                    case 1:\n                        // This path includes saving to database within updateChallengeIfNeeded\n                        updatedSummary = _state.sent();\n                        return [\n                            3,\n                            4\n                        ];\n                    case 2:\n                        // Only save to database if there's no challenge (to avoid double-saving)\n                        return [\n                            4,\n                            _this.updateWorkoutServices(updatedSummary)\n                        ];\n                    case 3:\n                        _state.sent();\n                        _state.label = 4;\n                    case 4:\n                        // Always update localStorage\n                        localStorage.setItem(\"currentWorkoutSummary\", JSON.stringify(updatedSummary));\n                        return [\n                            2,\n                            updatedSummary\n                        ];\n                }\n            });\n        })();\n    };\n    // Additional helper methods as needed\n    _proto.isLogComplete = function isLogComplete(log) {\n        return log.logs.some(function(entry) {\n            return entry.reps > 0 || entry.weight > 0;\n        });\n    };\n    // Singleton pattern\n    WorkoutSessionService.getInstance = function getInstance() {\n        if (!WorkoutSessionService.instance) {\n            WorkoutSessionService.instance = new WorkoutSessionService();\n        }\n        return WorkoutSessionService.instance;\n    };\n    return WorkoutSessionService;\n}();\nvar workoutSessionService = WorkoutSessionService.getInstance();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL2ZpcmViYXNlL3dvcmtvdXRTZXNzaW9uL3NlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQSwyQkFBMkI7Ozs7Ozs7QUFDaUY7QUFHNUM7QUFDTjtBQUVuRCwwQ0FBSzs7YUFBQ007K0VBQUFBO1FBR1gsbUJBQW1CO2FBQ1hDLGVBQXdCO2FBS2hDQyxxQkFBb0MsRUFBRTs7aUJBVDNCRjtJQW1CWCxtQkFBbUI7SUFDbkIsT0FBUUcsNkJBT1AsR0FQRCxTQUFRQSw4QkFBOEJDLGlCQUF5QixFQUFFQyxRQUFnQjtRQUMvRSxJQUFNQyx3QkFBd0I7UUFDOUIsSUFBTUMscUJBQXFCO1FBRTNCLElBQU1DLG9CQUFvQkMsS0FBS0MsR0FBRyxDQUFDTCxXQUFXLElBQUk7UUFFbEQsT0FBT0ksS0FBS0UsS0FBSyxDQUFDTCx3QkFBd0JFLG9CQUFvQkMsS0FBS0csR0FBRyxDQUFDTCxvQkFBb0JIO0lBQzdGO0lBRUEsT0FBUVMsd0JBV1AsR0FYRCxTQUFRQTtRQUNOLElBQUksQ0FBQ1osWUFBWSxHQUFHO1FBQ3BCLElBQUksQ0FBQ2EsU0FBUyxHQUFHQztRQUNqQixzQkFBc0I7UUFDdEJDLGFBQWFDLFVBQVUsQ0FBQztRQUN4QkQsYUFBYUMsVUFBVSxDQUFDO1FBQ3hCRCxhQUFhQyxVQUFVLENBQUM7UUFDeEJELGFBQWFDLFVBQVUsQ0FBQztRQUN4Qix3QkFBd0I7UUFDeEIsSUFBSSxDQUFDQyxjQUFjLEdBQUdIO1FBQ3RCLElBQUksQ0FBQ0kscUJBQXFCLEdBQUdKO0lBQy9CO0lBRUEsT0FBY0sscUJBZWIsR0FmRCxTQUFjQSxzQkFBc0JDLGNBQThCO2VBQWxFO2dCQUVtQnRCLDBCQUFUdUIsUUFTQ0M7Ozs7Ozs7Ozs7d0JBVERELFVBQVN2QiwyQkFBQUEsK0RBQVdBLENBQUN5QixXQUFXLGNBQXZCekIsK0NBQUFBLHlCQUF5QjBCLEVBQUU7d0JBQzFDLElBQUksQ0FBQ0gsUUFBUSxNQUFNLElBQUlJLE1BQU07d0JBRTdCLHlDQUF5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QkFEbkYsdUVBQXVFO3dCQUN2RUssaUJBQWlCOzs7Ozs7d0JBRWpCLHlFQUF5RTt3QkFDekU7OzRCQUFNLE1BQUsxRSxxQkFBcUIsQ0FBQzBFOzs7d0JBQWpDOzs7d0JBR0YsNkJBQTZCO3dCQUM3QjlFLGFBQWFpSCxPQUFPLENBQUMseUJBQXlCQyxLQUFLQyxTQUFTLENBQUNyQzt3QkFFN0Q7OzRCQUFPQTs7OztRQUNUOztJQUVFLHNDQUFzQztJQUN4QyxPQUFRakMsYUFFUCxHQUZELFNBQVFBLGNBQWMzQixHQUFnQjtRQUNwQyxPQUFPQSxJQUFJQyxJQUFJLENBQUNVLElBQUksQ0FBQ1QsU0FBQUE7bUJBQVNBLE1BQU1DLElBQUksR0FBRyxLQUFLRCxNQUFNRSxNQUFNLEdBQUc7O0lBQ2pFO0lBelVBLG9CQUFvQjtJQVhUdEMsc0JBWUpvSSxXQUtOLEdBTEQsU0FBT0E7UUFDTCxJQUFJLENBQUNwSSxzQkFBc0JxSSxRQUFRLEVBQUU7WUFiNUJySSxzQkFjZXFJLFFBQVEsR0FBRyxJQWQxQnJJO1FBZVQ7UUFDQSxPQUFPQSxzQkFBc0JxSSxRQUFRO0lBQ3ZDO1dBakJXckk7SUFzVlo7QUFFTSxJQUFNc0ksd0JBQXdCdEksc0JBQXNCb0ksV0FBVyxHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9hcGkvZmlyZWJhc2Uvd29ya291dFNlc3Npb24vc2VydmljZS50cz9mYWM2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHdvcmtvdXRTZXNzaW9uU2VydmljZS50c1xuaW1wb3J0IHsgV29ya291dFN1bW1hcnksIFdvcmtvdXQsIFdvcmtvdXRTdGF0dXMsIFVzZXJDaGFsbGVuZ2UsIFB1bHNlUG9pbnRzIH0gZnJvbSAnLi4vLi4vZmlyZWJhc2Uvd29ya291dCc7XG5pbXBvcnQgeyBFeGVyY2lzZUxvZyB9IGZyb20gJy4uLy4uL2ZpcmViYXNlL2V4ZXJjaXNlJztcbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuLi8uLi9maXJlYmFzZS91c2VyJztcbmltcG9ydCB7IHdvcmtvdXRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vZmlyZWJhc2Uvd29ya291dC9zZXJ2aWNlJztcbmltcG9ydCB7IHVzZXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vZmlyZWJhc2UvdXNlci9zZXJ2aWNlJztcblxuZXhwb3J0IGNsYXNzIFdvcmtvdXRTZXNzaW9uU2VydmljZSB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBXb3Jrb3V0U2Vzc2lvblNlcnZpY2U7XG4gIFxuICAvLyBTdGF0ZSBtYW5hZ2VtZW50XG4gIHByaXZhdGUgaXNJblByb2dyZXNzOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgc3RhcnRUaW1lPzogRGF0ZTtcbiAgcHJpdmF0ZSBjdXJyZW50V29ya291dD86IFdvcmtvdXQ7XG4gIHByaXZhdGUgY3VycmVudFdvcmtvdXRTdW1tYXJ5PzogV29ya291dFN1bW1hcnk7XG4gIHByaXZhdGUgc3VnZ2VzdGVkV29ya1Njb3JlPzogbnVtYmVyO1xuICBjb21wbGV0ZWRFeGVyY2lzZXM6IEV4ZXJjaXNlTG9nW10gPSBbXTtcblxuICAvLyBTaW5nbGV0b24gcGF0dGVyblxuICBzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XG4gICAgaWYgKCFXb3Jrb3V0U2Vzc2lvblNlcnZpY2UuaW5zdGFuY2UpIHtcbiAgICAgIFdvcmtvdXRTZXNzaW9uU2VydmljZS5pbnN0YW5jZSA9IG5ldyBXb3Jrb3V0U2Vzc2lvblNlcnZpY2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIFdvcmtvdXRTZXNzaW9uU2VydmljZS5pbnN0YW5jZTtcbiAgfVxuXG4gIC8vIEhlbHBlciBmdW5jdGlvbnNcbiAgcHJpdmF0ZSBlc3RpbWF0ZUNhbG9yaWVzQnVybmVkTG9jYWxseShudW1iZXJPZkV4ZXJjaXNlczogbnVtYmVyLCBkdXJhdGlvbjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCBiYXNlQ2Fsb3JpZXNQZXJNaW51dGUgPSA1O1xuICAgIGNvbnN0IGV4ZXJjaXNlTXVsdGlwbGllciA9IDEuMTtcbiAgICBcbiAgICBjb25zdCBkdXJhdGlvbkluTWludXRlcyA9IE1hdGgubWluKGR1cmF0aW9uIC8gNjAsIDYwKTtcbiAgICBcbiAgICByZXR1cm4gTWF0aC5mbG9vcihiYXNlQ2Fsb3JpZXNQZXJNaW51dGUgKiBkdXJhdGlvbkluTWludXRlcyAqIE1hdGgucG93KGV4ZXJjaXNlTXVsdGlwbGllciwgbnVtYmVyT2ZFeGVyY2lzZXMpKTtcbiAgfVxuXG4gIHByaXZhdGUgY2xlYW5VcFdvcmtvdXRJblByb2dyZXNzKCkge1xuICAgIHRoaXMuaXNJblByb2dyZXNzID0gZmFsc2U7XG4gICAgdGhpcy5zdGFydFRpbWUgPSB1bmRlZmluZWQ7XG4gICAgLy8gQ2xlYXIgbG9jYWwgc3RvcmFnZVxuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdleGVyY2lzZUxvZ3MnKTtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnaXNXb3Jrb3V0SW5Qcm9ncmVzcycpO1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdjdXJyZW50V29ya291dCcpO1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdjdXJyZW50V29ya291dFN1bW1hcnknKTtcbiAgICAvLyBSZXNldCBjdXJyZW50IHdvcmtvdXRcbiAgICB0aGlzLmN1cnJlbnRXb3Jrb3V0ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuY3VycmVudFdvcmtvdXRTdW1tYXJ5ID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB1cGRhdGVXb3Jrb3V0U2VydmljZXMod29ya291dFN1bW1hcnk6IFdvcmtvdXRTdW1tYXJ5KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJJZCA9IHVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyPy5pZDtcbiAgICAgIGlmICghdXNlcklkKSB0aHJvdyBuZXcgRXJyb3IoJ05vIGF1dGhlbnRpY2F0ZWQgdXNlcicpO1xuICBcbiAgICAgIC8vIFNhdmUgdG8gRmlyZXN0b3JlIHVzaW5nIHdvcmtvdXRTZXJ2aWNlXG4gICAgICBhd2FpdCB3b3Jrb3V0U2VydmljZS51cGRhdGVXb3Jrb3V0U3VtbWFyeSh7XG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgd29ya291dElkOiB3b3Jrb3V0U3VtbWFyeS53b3Jrb3V0SWQsXG4gICAgICAgIHN1bW1hcnk6IHdvcmtvdXRTdW1tYXJ5XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHdvcmtvdXQgc3VtbWFyeTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHZhbGlkYXRlV29ya291dFN0YXRlKCk6ICdhbGxFbXB0eScgfCAndmFsaWQnIHtcbiAgICBjb25zdCBhbGxFbXB0eSA9IHRoaXMuY29tcGxldGVkRXhlcmNpc2VzLmV2ZXJ5KGxvZyA9PiBcbiAgICAgIGxvZy5sb2dzLmV2ZXJ5KGVudHJ5ID0+IGVudHJ5LnJlcHMgPT09IDAgJiYgZW50cnkud2VpZ2h0ID09PSAwKVxuICAgICk7XG4gICAgcmV0dXJuIGFsbEVtcHR5ID8gJ2FsbEVtcHR5JyA6ICd2YWxpZCc7XG4gIH1cblxuICAvLyBNYWluIGZ1bmN0aW9uc1xuICBhc3luYyBlbmRXb3Jrb3V0KFxuICAgIHVzZXI6IFVzZXIsIFxuICAgIHdvcmtvdXQ6IFdvcmtvdXQsIFxuICAgIHVzZXJDaGFsbGVuZ2U6IFVzZXJDaGFsbGVuZ2UgfCBudWxsLFxuICAgIHN0YXJ0VGltZTogRGF0ZSwgXG4gICAgZW5kVGltZTogRGF0ZVxuICApOiBQcm9taXNlPHsgc3RhdHVzOiBXb3Jrb3V0U3RhdHVzOyB3b3Jrb3V0U3VtbWFyeT86IFdvcmtvdXRTdW1tYXJ5IH0+IHtcbiAgICB0aGlzLmN1cnJlbnRXb3Jrb3V0ID0gd29ya291dDtcbiAgICBjb25zdCB3b3Jrb3V0U3RhdGUgPSB0aGlzLnZhbGlkYXRlV29ya291dFN0YXRlKCk7XG4gIFxuICAgIHRyeSB7XG4gICAgICBzd2l0Y2ggKHdvcmtvdXRTdGF0ZSkge1xuICAgICAgICBjYXNlICdhbGxFbXB0eSc6XG4gICAgICAgICAgaWYgKHRoaXMuY29tcGxldGVkRXhlcmNpc2VzLnNvbWUobG9nID0+IGxvZy5sb2dTdWJtaXR0ZWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9jZXNzV29ya291dENvbXBsZXRpb24odXNlciwgdXNlckNoYWxsZW5nZSwgc3RhcnRUaW1lLCBlbmRUaW1lKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gbG9ncyBzdWJtaXR0ZWRcIik7XG4gICAgICAgICAgfVxuICAgICAgICBjYXNlICd2YWxpZCc6XG4gICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvY2Vzc1dvcmtvdXRDb21wbGV0aW9uKHVzZXIsIHVzZXJDaGFsbGVuZ2UsIHN0YXJ0VGltZSwgZW5kVGltZSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuICBcbiAgICAvLyBUaGVuIGFsc28gdXBkYXRlIHByb2Nlc3NXb3Jrb3V0Q29tcGxldGlvbiB0byBoYW5kbGUgbnVsbCB1c2VyQ2hhbGxlbmdlXG4gICAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzV29ya291dENvbXBsZXRpb24oXG4gICAgICAgIHVzZXI6IFVzZXIsXG4gICAgICAgIHVzZXJDaGFsbGVuZ2U6IFVzZXJDaGFsbGVuZ2UgfCBudWxsLFxuICAgICAgICBzdGFydFRpbWU6IERhdGUsXG4gICAgICAgIGVuZFRpbWU6IERhdGVcbiAgICAgICk6IFByb21pc2U8eyBzdGF0dXM6IFdvcmtvdXRTdGF0dXM7IHdvcmtvdXRTdW1tYXJ5PzogV29ya291dFN1bW1hcnkgfT4ge1xuICAgICAgICBpZiAoIXRoaXMuY3VycmVudFdvcmtvdXQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjdXJyZW50IHdvcmtvdXRcIik7XG4gICAgICAgIH1cbiAgICAgIFxuICAgICAgICBjb25zdCBzdWdnZXN0ZWRXb3JrU2NvcmUgPSB0aGlzLmN1cnJlbnRXb3Jrb3V0U3VtbWFyeT8ucmVjb21tZW5kZWRXb3JrID8/IDA7XG4gICAgICAgIGNvbnN0IHdvcmtvdXRTdW1tYXJ5ID0gdGhpcy5jcmVhdGVXb3Jrb3V0U3VtbWFyeShcbiAgICAgICAgICB1c2VyLFxuICAgICAgICAgIHRoaXMuY3VycmVudFdvcmtvdXQsXG4gICAgICAgICAgc3VnZ2VzdGVkV29ya1Njb3JlLFxuICAgICAgICAgIHN0YXJ0VGltZSxcbiAgICAgICAgICBlbmRUaW1lXG4gICAgICAgICk7XG4gICAgICBcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBlbmRUaW1lLmdldFRpbWUoKSAtIHN0YXJ0VGltZS5nZXRUaW1lKCk7XG4gICAgICAgIGNvbnN0IGNhbG9yaWVzQnVybmVkID0gdGhpcy5lc3RpbWF0ZUNhbG9yaWVzQnVybmVkTG9jYWxseShcbiAgICAgICAgICB3b3Jrb3V0U3VtbWFyeS5leGVyY2lzZXNDb21wbGV0ZWQubGVuZ3RoLFxuICAgICAgICAgIGR1cmF0aW9uIC8gMTAwMFxuICAgICAgICApO1xuICAgICAgXG4gICAgICAgIGNvbnN0IGZpbmFsU3VtbWFyeSA9IGF3YWl0IHRoaXMuZmluYWxpemVXb3Jrb3V0U3VtbWFyeShcbiAgICAgICAgICB3b3Jrb3V0U3VtbWFyeSxcbiAgICAgICAgICB1c2VyQ2hhbGxlbmdlLFxuICAgICAgICAgIHRoaXMuY3VycmVudFdvcmtvdXQucm91bmRXb3Jrb3V0SWQsXG4gICAgICAgICAgY2Fsb3JpZXNCdXJuZWQsXG4gICAgICAgICAgc3RhcnRUaW1lLFxuICAgICAgICAgIGVuZFRpbWVcbiAgICAgICAgKTtcbiAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN0YXR1czogV29ya291dFN0YXR1cy5Db21wbGV0ZSxcbiAgICAgICAgICB3b3Jrb3V0U3VtbWFyeTogZmluYWxTdW1tYXJ5XG4gICAgICAgIH07XG4gICAgICB9XG4gIFxuICBwcml2YXRlIGNyZWF0ZVdvcmtvdXRTdW1tYXJ5KFxuICAgIHVzZXI6IFVzZXIsXG4gICAgd29ya291dDogV29ya291dCxcbiAgICBzdWdnZXN0ZWRXb3JrU2NvcmU6IG51bWJlcixcbiAgICBzdGFydFRpbWU6IERhdGUsXG4gICAgZW5kVGltZTogRGF0ZVxuICApOiBXb3Jrb3V0U3VtbWFyeSB7XG4gICAgY29uc3QgbG9ncyA9IHRoaXMuY29tcGxldGVkRXhlcmNpc2VzLmZpbHRlcihcbiAgICAgIGxvZyA9PiBsb2cubG9nU3VibWl0dGVkICYmIHRoaXMuaXNMb2dDb21wbGV0ZShsb2cpXG4gICAgKTtcbiAgXG4gICAgLy8gQ3JlYXRlIHRoZSBkYXRhIG9iamVjdCB0aGF0IG1hdGNoZXMgb3VyIGNvbnN0cnVjdG9yXG4gICAgY29uc3Qgc3VtbWFyeURhdGEgPSB7XG4gICAgICBpZDogd29ya291dC5pZCxcbiAgICAgIHdvcmtvdXRJZDogd29ya291dC5pZCxcbiAgICAgIGV4ZXJjaXNlczogdGhpcy5jb21wbGV0ZWRFeGVyY2lzZXMsXG4gICAgICBib2R5UGFydHM6IHdvcmtvdXQuZmV0Y2hQcmltYXJ5Qm9keVBhcnRzKCksXG4gICAgICBzZWNvbmRhcnlCb2R5UGFydHM6IHdvcmtvdXQuZmV0Y2hTZWNvbmRhcnlCb2R5UGFydHMoKSxcbiAgICAgIHdvcmtvdXRUaXRsZTogd29ya291dC50aXRsZSxcbiAgICAgIGNhbG9yaWVzQnVybmVkOiAwLFxuICAgICAgd29ya291dFJhdGluZzogdW5kZWZpbmVkLFxuICAgICAgZXhlcmNpc2VzQ29tcGxldGVkOiBsb2dzLFxuICAgICAgYWlJbnNpZ2h0OiAnJywgLy8gSW5pdGlhbGl6ZSB3aXRoIGVtcHR5IHN0cmluZ1xuICAgICAgcmVjb21tZW5kYXRpb25zOiBbXSwgLy8gSW5pdGlhbGl6ZSB3aXRoIGVtcHR5IGFycmF5XG4gICAgICBnaWZVUkxzOiB1bmRlZmluZWQsXG4gICAgICByZWNvbW1lbmRlZFdvcms6IHN1Z2dlc3RlZFdvcmtTY29yZSxcbiAgICAgIGlzQ29tcGxldGVkOiB0cnVlLFxuICAgICAgY3JlYXRlZEF0OiBzdGFydFRpbWUsXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBjb21wbGV0ZWRBdDogZW5kVGltZSxcbiAgICAgIGR1cmF0aW9uOiB0aGlzLmNhbGN1bGF0ZUR1cmF0aW9uKHN0YXJ0VGltZSwgZW5kVGltZSlcbiAgICB9O1xuICBcbiAgICAvLyBVc2UgdGhlIGNvbnN0cnVjdG9yIHRvIGNyZWF0ZSB0aGUgV29ya291dFN1bW1hcnkgaW5zdGFuY2VcbiAgICByZXR1cm4gbmV3IFdvcmtvdXRTdW1tYXJ5KHN1bW1hcnlEYXRhKTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBjYWxjdWxhdGVEdXJhdGlvbihzdGFydFRpbWU6IERhdGUsIGVuZFRpbWU6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IGR1cmF0aW9uSW5NaWxsaXMgPSBlbmRUaW1lLmdldFRpbWUoKSAtIHN0YXJ0VGltZS5nZXRUaW1lKCk7XG4gICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoZHVyYXRpb25Jbk1pbGxpcyAvICgxMDAwICogNjApKTtcbiAgICByZXR1cm4gYCR7bWludXRlc30gbWluYDtcbiAgfVxuICBcbiAgcHJpdmF0ZSBpc1dvcmtvdXRBc3NpZ25lZEZvclRvZGF5KCk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5jdXJyZW50V29ya291dD8uYXNzaWduZWREYXRlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICBcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgYXNzaWduZWREYXRlID0gbmV3IERhdGUodGhpcy5jdXJyZW50V29ya291dC5hc3NpZ25lZERhdGUpO1xuICBcbiAgICByZXR1cm4gKFxuICAgICAgYXNzaWduZWREYXRlLmdldEZ1bGxZZWFyKCkgPT09IHRvZGF5LmdldEZ1bGxZZWFyKCkgJiZcbiAgICAgIGFzc2lnbmVkRGF0ZS5nZXRNb250aCgpID09PSB0b2RheS5nZXRNb250aCgpICYmXG4gICAgICBhc3NpZ25lZERhdGUuZ2V0RGF0ZSgpID09PSB0b2RheS5nZXREYXRlKClcbiAgICApO1xuICB9XG4gIFxuICBwcml2YXRlIGFzeW5jIHVwZGF0ZUNoYWxsZW5nZUlmTmVlZGVkKGN1cnJlbnRXb3Jrb3V0U3VtbWFyeTogV29ya291dFN1bW1hcnksIHVzZXJDaGFsbGVuZ2U6IFVzZXJDaGFsbGVuZ2UsIGNoYWxsZW5nZVdvcmtvdXRJZDogc3RyaW5nKTogUHJvbWlzZTxXb3Jrb3V0U3VtbWFyeT4ge1xuICAgIGlmICghdXNlckNoYWxsZW5nZSB8fCAhY2hhbGxlbmdlV29ya291dElkIHx8ICFjdXJyZW50V29ya291dFN1bW1hcnkpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRXb3Jrb3V0U3VtbWFyeTtcbiAgICB9XG5cbiAgICBpZiAoIXVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyPy5pZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IGNoYWxsZW5nZSBvYmplY3Qgd2l0aCBhbGwgdGhlIHVwZGF0ZWQgZGF0YVxuICAgIGNvbnN0IGNoYWxsZW5nZURhdGEgPSB7XG4gICAgICAgIC4uLnVzZXJDaGFsbGVuZ2UsXG4gICAgICAgIGNvbXBsZXRlZFdvcmtvdXRzOiBbXG4gICAgICAgICAgICAuLi51c2VyQ2hhbGxlbmdlLmNvbXBsZXRlZFdvcmtvdXRzLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiBgJHtjaGFsbGVuZ2VXb3Jrb3V0SWR9LSR7bmV3IERhdGUoKS5nZXRUaW1lKCl9YCxcbiAgICAgICAgICAgICAgICB3b3Jrb3V0SWQ6IGNoYWxsZW5nZVdvcmtvdXRJZCxcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWRBdDogbmV3IERhdGUoKVxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBwdWxzZVBvaW50czoge1xuICAgICAgICAgICAgLi4udXNlckNoYWxsZW5nZS5wdWxzZVBvaW50cyxcbiAgICAgICAgICAgIGJhc2VDb21wbGV0aW9uOiB1c2VyQ2hhbGxlbmdlLnB1bHNlUG9pbnRzLmJhc2VDb21wbGV0aW9uICsgMTAwLFxuICAgICAgICAgICAgZmlyc3RDb21wbGV0aW9uOiB1c2VyQ2hhbGxlbmdlLmNvbXBsZXRlZFdvcmtvdXRzLmxlbmd0aCA9PT0gMCA/IFxuICAgICAgICAgICAgICAgIHVzZXJDaGFsbGVuZ2UucHVsc2VQb2ludHMuZmlyc3RDb21wbGV0aW9uICsgNTAgOiBcbiAgICAgICAgICAgICAgICB1c2VyQ2hhbGxlbmdlLnB1bHNlUG9pbnRzLmZpcnN0Q29tcGxldGlvbixcbiAgICAgICAgICAgIHN0cmVha0JvbnVzOiAwLFxuICAgICAgICAgICAgY3VtdWxhdGl2ZVN0cmVha0JvbnVzOiB0aGlzLmlzV29ya291dEFzc2lnbmVkRm9yVG9kYXkoKSA/IFxuICAgICAgICAgICAgICAgIHVzZXJDaGFsbGVuZ2UuY3VycmVudFN0cmVhayAqIDI1IDogXG4gICAgICAgICAgICAgICAgdXNlckNoYWxsZW5nZS5wdWxzZVBvaW50cy5jdW11bGF0aXZlU3RyZWFrQm9udXNcbiAgICAgICAgfSxcbiAgICAgICAgY3VycmVudFN0cmVhazogdGhpcy5jYWxjdWxhdGVTdHJlYWsodXNlckNoYWxsZW5nZSwgbmV3IERhdGUoKSksXG4gICAgICAgIGlzQ3VycmVudGx5QWN0aXZlOiBmYWxzZSxcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgfTtcblxuICAgIC8vIENyZWF0ZSBhIG5ldyBVc2VyQ2hhbGxlbmdlIGluc3RhbmNlIHdpdGggdGhlIHVwZGF0ZWQgZGF0YVxuICAgIGNvbnN0IHVwZGF0ZWRDaGFsbGVuZ2UgPSBuZXcgVXNlckNoYWxsZW5nZShjaGFsbGVuZ2VEYXRhKTtcblxuICAgIC8vIFVwZGF0ZSBXb3Jrb3V0U3VtbWFyeSB3aXRoIFB1bHNlUG9pbnRzXG4gICAgY29uc3Qgc2Vzc2lvblB1bHNlUG9pbnRzID0gbmV3IFB1bHNlUG9pbnRzKHtcbiAgICAgICAgYmFzZUNvbXBsZXRpb246IDEwMCxcbiAgICAgICAgZmlyc3RDb21wbGV0aW9uOiB1cGRhdGVkQ2hhbGxlbmdlLmNvbXBsZXRlZFdvcmtvdXRzLmxlbmd0aCA9PT0gMSA/IDUwIDogMCxcbiAgICAgICAgc3RyZWFrQm9udXM6IDAsXG4gICAgICAgIGN1bXVsYXRpdmVTdHJlYWtCb251czogdGhpcy5pc1dvcmtvdXRBc3NpZ25lZEZvclRvZGF5KCkgPyBcbiAgICAgICAgICAgIHVwZGF0ZWRDaGFsbGVuZ2UucHVsc2VQb2ludHMuY3VtdWxhdGl2ZVN0cmVha0JvbnVzIDogMCxcbiAgICAgICAgY2hlY2tJbkJvbnVzOiBjdXJyZW50V29ya291dFN1bW1hcnkucHVsc2VQb2ludHM/LmNoZWNrSW5Cb251cyA/PyAwLFxuICAgICAgICBlZmZvcnRSYXRpbmc6IGN1cnJlbnRXb3Jrb3V0U3VtbWFyeS5wdWxzZVBvaW50cz8uZWZmb3J0UmF0aW5nID8/IDAsXG4gICAgICAgIGNoYXRQYXJ0aWNpcGF0aW9uOiBjdXJyZW50V29ya291dFN1bW1hcnkucHVsc2VQb2ludHM/LmNoYXRQYXJ0aWNpcGF0aW9uID8/IDAsXG4gICAgICAgIGxvY2F0aW9uQ2hlY2tpbjogY3VycmVudFdvcmtvdXRTdW1tYXJ5LnB1bHNlUG9pbnRzPy5sb2NhdGlvbkNoZWNraW4gPz8gMCxcbiAgICAgICAgY29udGVudEVuZ2FnZW1lbnQ6IGN1cnJlbnRXb3Jrb3V0U3VtbWFyeS5wdWxzZVBvaW50cz8uY29udGVudEVuZ2FnZW1lbnQgPz8gMCxcbiAgICAgICAgZW5jb3VyYWdlbWVudFNlbnQ6IGN1cnJlbnRXb3Jrb3V0U3VtbWFyeS5wdWxzZVBvaW50cz8uZW5jb3VyYWdlbWVudFNlbnQgPz8gMCxcbiAgICAgICAgZW5jb3VyYWdlbWVudFJlY2VpdmVkOiBjdXJyZW50V29ya291dFN1bW1hcnkucHVsc2VQb2ludHM/LmVuY291cmFnZW1lbnRSZWNlaXZlZCA/PyAwXG4gICAgfSk7XG5cbiAgICAvLyBDcmVhdGUgdXBkYXRlZCBzdW1tYXJ5IHdpdGggbmV3IFB1bHNlUG9pbnRzXG4gICAgY29uc3QgdXBkYXRlZFN1bW1hcnlEYXRhID0ge1xuICAgICAgICAuLi5jdXJyZW50V29ya291dFN1bW1hcnksXG4gICAgICAgIHB1bHNlUG9pbnRzOiBzZXNzaW9uUHVsc2VQb2ludHNcbiAgICB9O1xuXG4gICAgY29uc3QgdXBkYXRlZFN1bW1hcnkgPSBuZXcgV29ya291dFN1bW1hcnkodXBkYXRlZFN1bW1hcnlEYXRhKTtcblxuICAgIC8vIFNhdmUgdXBkYXRlZCBzdW1tYXJ5IGFuZCBjaGFsbGVuZ2UgdXNpbmcgd29ya291dFNlcnZpY2VcbiAgICBhd2FpdCB3b3Jrb3V0U2VydmljZS51cGRhdGVXb3Jrb3V0U3VtbWFyeSh7XG4gICAgICAgIHVzZXJJZDogdXNlclNlcnZpY2UuY3VycmVudFVzZXIuaWQsXG4gICAgICAgIHdvcmtvdXRJZDogY2hhbGxlbmdlV29ya291dElkLFxuICAgICAgICBzdW1tYXJ5OiB1cGRhdGVkU3VtbWFyeVxuICAgIH0pO1xuXG4gICAgYXdhaXQgd29ya291dFNlcnZpY2UudXBkYXRlVXNlckNoYWxsZW5nZSh1cGRhdGVkQ2hhbGxlbmdlKTtcblxuICAgIHJldHVybiB1cGRhdGVkU3VtbWFyeTtcbn1cblxuICBcbiAgcHJpdmF0ZSBjYWxjdWxhdGVTdHJlYWsoY2hhbGxlbmdlOiBhbnksIG5ld0NvbXBsZXRpb25EYXRlOiBEYXRlKTogbnVtYmVyIHtcbiAgICBjb25zdCBzb3J0ZWRXb3Jrb3V0cyA9IFsuLi5jaGFsbGVuZ2UuY29tcGxldGVkV29ya291dHNdLnNvcnQoXG4gICAgICAoYSwgYikgPT4gYS5jb21wbGV0ZWRBdC5nZXRUaW1lKCkgLSBiLmNvbXBsZXRlZEF0LmdldFRpbWUoKVxuICAgICk7XG4gIFxuICAgIGxldCBzdHJlYWsgPSAxO1xuICBcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNvcnRlZFdvcmtvdXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBwcmV2aW91c0RhdGUgPSBuZXcgRGF0ZShzb3J0ZWRXb3Jrb3V0c1tpIC0gMV0uY29tcGxldGVkQXQpO1xuICAgICAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZShzb3J0ZWRXb3Jrb3V0c1tpXS5jb21wbGV0ZWRBdCk7XG4gIFxuICAgICAgaWYgKHRoaXMuaXNOZXh0RGF5KHByZXZpb3VzRGF0ZSwgY3VycmVudERhdGUpKSB7XG4gICAgICAgIHN0cmVhaysrO1xuICAgICAgfSBlbHNlIGlmICghdGhpcy5pc1NhbWVEYXkocHJldmlvdXNEYXRlLCBjdXJyZW50RGF0ZSkpIHtcbiAgICAgICAgc3RyZWFrID0gMTtcbiAgICAgIH1cbiAgICB9XG4gIFxuICAgIHJldHVybiBzdHJlYWs7XG4gIH1cbiAgXG4gIHByaXZhdGUgaXNOZXh0RGF5KGRhdGUxOiBEYXRlLCBkYXRlMjogRGF0ZSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG5leHREYXkgPSBuZXcgRGF0ZShkYXRlMSk7XG4gICAgbmV4dERheS5zZXREYXRlKG5leHREYXkuZ2V0RGF0ZSgpICsgMSk7XG4gICAgcmV0dXJuIHRoaXMuaXNTYW1lRGF5KG5leHREYXksIGRhdGUyKTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBpc1NhbWVEYXkoZGF0ZTE6IERhdGUsIGRhdGUyOiBEYXRlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIGRhdGUxLmdldEZ1bGxZZWFyKCkgPT09IGRhdGUyLmdldEZ1bGxZZWFyKCkgJiZcbiAgICAgIGRhdGUxLmdldE1vbnRoKCkgPT09IGRhdGUyLmdldE1vbnRoKCkgJiZcbiAgICAgIGRhdGUxLmdldERhdGUoKSA9PT0gZGF0ZTIuZ2V0RGF0ZSgpXG4gICAgKTtcbiAgfVxuICBcbiAgLy8gVXBkYXRlIGZpbmFsaXplV29ya291dFN1bW1hcnkgdG8gaW5jbHVkZSBQdWxzZVBvaW50c1xuICBwcml2YXRlIGFzeW5jIGZpbmFsaXplV29ya291dFN1bW1hcnkoXG4gICAgd29ya291dFN1bW1hcnk6IFdvcmtvdXRTdW1tYXJ5LFxuICAgIHVzZXJDaGFsbGVuZ2U6IFVzZXJDaGFsbGVuZ2UgfCBudWxsLFxuICAgIGNoYWxsZW5nZVdvcmtvdXRJZDogc3RyaW5nLFxuICAgIGNhbG9yaWVzOiBudW1iZXIsXG4gICAgc3RhcnRUaW1lOiBEYXRlLFxuICAgIGVuZFRpbWU6IERhdGVcbiAgKTogUHJvbWlzZTxXb3Jrb3V0U3VtbWFyeT4ge1xuICAgIGxldCB1cGRhdGVkU3VtbWFyeSA9IG5ldyBXb3Jrb3V0U3VtbWFyeSh7XG4gICAgICAuLi53b3Jrb3V0U3VtbWFyeSxcbiAgICAgIGNhbG9yaWVzQnVybmVkOiBjYWxvcmllcyxcbiAgICAgIGlzQ29tcGxldGVkOiB0cnVlLFxuICAgICAgc3RhcnRUaW1lLFxuICAgICAgY29tcGxldGVkQXQ6IGVuZFRpbWUsXG4gICAgICBleGVyY2lzZXNDb21wbGV0ZWQ6IHRoaXMuY29tcGxldGVkRXhlcmNpc2VzLmZpbHRlcihsb2cgPT4gbG9nLmxvZ1N1Ym1pdHRlZCksXG4gICAgICAvLyBPbmx5IGluaXRpYWxpemUgUHVsc2VQb2ludHMgaWYgdGhlcmUncyBhIGNoYWxsZW5nZVxuICAgICAgcHVsc2VQb2ludHM6IHVzZXJDaGFsbGVuZ2UgPyBuZXcgUHVsc2VQb2ludHMoe30pIDogdW5kZWZpbmVkXG4gICAgfSk7XG4gIFxuICAgIGlmICh1c2VyQ2hhbGxlbmdlKSB7XG4gICAgICAvLyBUaGlzIHBhdGggaW5jbHVkZXMgc2F2aW5nIHRvIGRhdGFiYXNlIHdpdGhpbiB1cGRhdGVDaGFsbGVuZ2VJZk5lZWRlZFxuICAgICAgdXBkYXRlZFN1bW1hcnkgPSBhd2FpdCB0aGlzLnVwZGF0ZUNoYWxsZW5nZUlmTmVlZGVkKHVwZGF0ZWRTdW1tYXJ5LCB1c2VyQ2hhbGxlbmdlLCBjaGFsbGVuZ2VXb3Jrb3V0SWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBPbmx5IHNhdmUgdG8gZGF0YWJhc2UgaWYgdGhlcmUncyBubyBjaGFsbGVuZ2UgKHRvIGF2b2lkIGRvdWJsZS1zYXZpbmcpXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZVdvcmtvdXRTZXJ2aWNlcyh1cGRhdGVkU3VtbWFyeSk7XG4gICAgfVxuICBcbiAgICAvLyBBbHdheXMgdXBkYXRlIGxvY2FsU3RvcmFnZVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50V29ya291dFN1bW1hcnknLCBKU09OLnN0cmluZ2lmeSh1cGRhdGVkU3VtbWFyeSkpO1xuICBcbiAgICByZXR1cm4gdXBkYXRlZFN1bW1hcnk7XG4gIH1cblxuICAgIC8vIEFkZGl0aW9uYWwgaGVscGVyIG1ldGhvZHMgYXMgbmVlZGVkXG4gIHByaXZhdGUgaXNMb2dDb21wbGV0ZShsb2c6IEV4ZXJjaXNlTG9nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGxvZy5sb2dzLnNvbWUoZW50cnkgPT4gZW50cnkucmVwcyA+IDAgfHwgZW50cnkud2VpZ2h0ID4gMCk7XG4gIH1cbiAgXG59XG5cbmV4cG9ydCBjb25zdCB3b3Jrb3V0U2Vzc2lvblNlcnZpY2UgPSBXb3Jrb3V0U2Vzc2lvblNlcnZpY2UuZ2V0SW5zdGFuY2UoKTsiXSwibmFtZXMiOlsiV29ya291dFN1bW1hcnkiLCJXb3Jrb3V0U3RhdHVzIiwiVXNlckNoYWxsZW5nZSIsIlB1bHNlUG9pbnRzIiwid29ya291dFNlcnZpY2UiLCJ1c2VyU2VydmljZSIsIldvcmtvdXRTZXNzaW9uU2VydmljZSIsImlzSW5Qcm9ncmVzcyIsImNvbXBsZXRlZEV4ZXJjaXNlcyIsImVzdGltYXRlQ2Fsb3JpZXNCdXJuZWRMb2NhbGx5IiwibnVtYmVyT2ZFeGVyY2lzZXMiLCJkdXJhdGlvbiIsImJhc2VDYWxvcmllc1Blck1pbnV0ZSIsImV4ZXJjaXNlTXVsdGlwbGllciIsImR1cmF0aW9uSW5NaW51dGVzIiwiTWF0aCIsIm1pbiIsImZsb29yIiwicG93IiwiY2xlYW5VcFdvcmtvdXRJblByb2dyZXNzIiwic3RhcnRUaW1lIiwidW5kZWZpbmVkIiwibG9jYWxTdG9yYWdlIiwicmVtb3ZlSXRlbSIsImN1cnJlbnRXb3Jrb3V0IiwiY3VycmVudFdvcmtvdXRTdW1tYXJ5IiwidXBkYXRlV29ya291dFNlcnZpY2VzIiwid29ya291dFN1bW1hcnkiLCJ1c2VySWQiLCJlcnJvciIsImN1cnJlbnRVc2VyIiwiaWQiLCJFcnJvciIsInVwZGF0ZVdvcmtvdXRTdW1tYXJ5Iiwid29ya291dElkIiwic3VtbWFyeSIsImNvbnNvbGUiLCJ2YWxpZGF0ZVdvcmtvdXRTdGF0ZSIsImFsbEVtcHR5IiwiZXZlcnkiLCJsb2ciLCJsb2dzIiwiZW50cnkiLCJyZXBzIiwid2VpZ2h0IiwiZW5kV29ya291dCIsInVzZXIiLCJ3b3Jrb3V0IiwidXNlckNoYWxsZW5nZSIsImVuZFRpbWUiLCJ3b3Jrb3V0U3RhdGUiLCJzb21lIiwibG9nU3VibWl0dGVkIiwicHJvY2Vzc1dvcmtvdXRDb21wbGV0aW9uIiwic3VnZ2VzdGVkV29ya1Njb3JlIiwiY2Fsb3JpZXNCdXJuZWQiLCJmaW5hbFN1bW1hcnkiLCJyZWNvbW1lbmRlZFdvcmsiLCJjcmVhdGVXb3Jrb3V0U3VtbWFyeSIsImdldFRpbWUiLCJleGVyY2lzZXNDb21wbGV0ZWQiLCJsZW5ndGgiLCJmaW5hbGl6ZVdvcmtvdXRTdW1tYXJ5Iiwicm91bmRXb3Jrb3V0SWQiLCJzdGF0dXMiLCJDb21wbGV0ZSIsImZpbHRlciIsImlzTG9nQ29tcGxldGUiLCJzdW1tYXJ5RGF0YSIsImV4ZXJjaXNlcyIsImJvZHlQYXJ0cyIsImZldGNoUHJpbWFyeUJvZHlQYXJ0cyIsInNlY29uZGFyeUJvZHlQYXJ0cyIsImZldGNoU2Vjb25kYXJ5Qm9keVBhcnRzIiwid29ya291dFRpdGxlIiwidGl0bGUiLCJ3b3Jrb3V0UmF0aW5nIiwiYWlJbnNpZ2h0IiwicmVjb21tZW5kYXRpb25zIiwiZ2lmVVJMcyIsImlzQ29tcGxldGVkIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwiRGF0ZSIsImNvbXBsZXRlZEF0IiwiY2FsY3VsYXRlRHVyYXRpb24iLCJkdXJhdGlvbkluTWlsbGlzIiwibWludXRlcyIsImlzV29ya291dEFzc2lnbmVkRm9yVG9kYXkiLCJhc3NpZ25lZERhdGUiLCJ0b2RheSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwidXBkYXRlQ2hhbGxlbmdlSWZOZWVkZWQiLCJjaGFsbGVuZ2VXb3Jrb3V0SWQiLCJjaGFsbGVuZ2VEYXRhIiwidXBkYXRlZENoYWxsZW5nZSIsInNlc3Npb25QdWxzZVBvaW50cyIsInVwZGF0ZWRTdW1tYXJ5RGF0YSIsInVwZGF0ZWRTdW1tYXJ5IiwiY29tcGxldGVkV29ya291dHMiLCJwdWxzZVBvaW50cyIsImJhc2VDb21wbGV0aW9uIiwiZmlyc3RDb21wbGV0aW9uIiwic3RyZWFrQm9udXMiLCJjdW11bGF0aXZlU3RyZWFrQm9udXMiLCJjdXJyZW50U3RyZWFrIiwiY2FsY3VsYXRlU3RyZWFrIiwiaXNDdXJyZW50bHlBY3RpdmUiLCJjaGVja0luQm9udXMiLCJlZmZvcnRSYXRpbmciLCJjaGF0UGFydGljaXBhdGlvbiIsImxvY2F0aW9uQ2hlY2tpbiIsImNvbnRlbnRFbmdhZ2VtZW50IiwiZW5jb3VyYWdlbWVudFNlbnQiLCJlbmNvdXJhZ2VtZW50UmVjZWl2ZWQiLCJ1cGRhdGVVc2VyQ2hhbGxlbmdlIiwiY2hhbGxlbmdlIiwibmV3Q29tcGxldGlvbkRhdGUiLCJzb3J0ZWRXb3Jrb3V0cyIsInNvcnQiLCJhIiwiYiIsInN0cmVhayIsImkiLCJwcmV2aW91c0RhdGUiLCJjdXJyZW50RGF0ZSIsImlzTmV4dERheSIsImlzU2FtZURheSIsImRhdGUxIiwiZGF0ZTIiLCJuZXh0RGF5Iiwic2V0RGF0ZSIsImNhbG9yaWVzIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlIiwid29ya291dFNlc3Npb25TZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/api/firebase/workoutSession/service.ts\n"));

/***/ })

});
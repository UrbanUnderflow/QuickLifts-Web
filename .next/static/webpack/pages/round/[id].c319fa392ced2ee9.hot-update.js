"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/round/[id]",{

/***/ "./src/api/firebase/workout/service.ts":
/*!*********************************************!*\
  !*** ./src/api/firebase/workout/service.ts ***!
  \*********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   workoutService: function() { return /* binding */ workoutService; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @swc/helpers/_/_async_to_generator */ \"./node_modules/@swc/helpers/esm/_async_to_generator.js\");\n/* harmony import */ var _swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @swc/helpers/_/_class_call_check */ \"./node_modules/@swc/helpers/esm/_class_call_check.js\");\n/* harmony import */ var _swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @swc/helpers/_/_create_class */ \"./node_modules/@swc/helpers/esm/_create_class.js\");\n/* harmony import */ var _swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @swc/helpers/_/_object_spread */ \"./node_modules/@swc/helpers/esm/_object_spread.js\");\n/* harmony import */ var _swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @swc/helpers/_/_object_spread_props */ \"./node_modules/@swc/helpers/esm/_object_spread_props.js\");\n/* harmony import */ var _swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @swc/helpers/_/_sliced_to_array */ \"./node_modules/@swc/helpers/esm/_sliced_to_array.js\");\n/* harmony import */ var _swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @swc/helpers/_/_ts_generator */ \"./node_modules/@swc/helpers/esm/_ts_generator.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/api/firebase/config.ts\");\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../user */ \"./src/api/firebase/user/index.ts\");\n/* harmony import */ var _exercise_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../exercise/types */ \"./src/api/firebase/exercise/types.ts\");\n/* harmony import */ var _workout_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../api/firebase/workout/types */ \"./src/api/firebase/workout/types.ts\");\n/* harmony import */ var _barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! __barrel_optimize__?names=format!=!date-fns */ \"__barrel_optimize__?names=format!=!./node_modules/date-fns/index.js\");\n/* harmony import */ var _utils_timestamp__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/timestamp */ \"./src/utils/timestamp.ts\");\n/* harmony import */ var _utils_formatDate__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/formatDate */ \"./src/utils/formatDate.ts\");\n// src/api/firebase/workout/service.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // Adjust the import path\n\n\nvar WorkoutService = /*#__PURE__*/ function() {\n    \"use strict\";\n    function WorkoutService() {\n        (0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_7__._)(this, WorkoutService);\n        this._currentWorkout = null;\n        this._currentWorkoutLogs = [];\n    }\n    var _proto = WorkoutService.prototype;\n    /**\n   * Fetch the user's current workout (either QueuedUp or InProgress).\n   */ _proto.fetchCurrentWorkout = function fetchCurrentWorkout(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var session;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        return [\n                            4,\n                            _this.fetchCurrentWorkoutSession(userId)\n                        ];\n                    case 1:\n                        session = _state.sent();\n                        return [\n                            2,\n                            session.workout\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getAllSweatlists = function getAllSweatlists(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var workoutsRef, exercisesWithVideos, workoutsSnapshot, workouts, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, workoutDoc, workoutData, workoutId, mappedExercises, workout, logsRef, logsSnapshot, err, error, firestoreError;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"User ID is required\");\n                        }\n                        // Reference to the user's workout collection\n                        workoutsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\");\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            12,\n                            ,\n                            13\n                        ]);\n                        return [\n                            4,\n                            _this.fetchAndMapExercisesWithVideos()\n                        ];\n                    case 2:\n                        exercisesWithVideos = _state.sent();\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(workoutsRef)\n                        ];\n                    case 3:\n                        workoutsSnapshot = _state.sent();\n                        workouts = [];\n                        _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;\n                        _state.label = 4;\n                    case 4:\n                        _state.trys.push([\n                            4,\n                            9,\n                            10,\n                            11\n                        ]);\n                        _iterator = workoutsSnapshot.docs[Symbol.iterator]();\n                        _state.label = 5;\n                    case 5:\n                        if (!!(_iteratorNormalCompletion = (_step = _iterator.next()).done)) return [\n                            3,\n                            8\n                        ];\n                        workoutDoc = _step.value;\n                        workoutData = workoutDoc.data();\n                        workoutId = workoutDoc.id;\n                        // Map the exercises in the workout to the full exercise objects with videos\n                        mappedExercises = (workoutData.exercises || []).map(function(exerciseRef) {\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name === exerciseRef.exercise.name;\n                            });\n                            console.log(\"This is the mapped exercise: \" + fullExercise);\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({}, exerciseRef), {\n                                exercise: fullExercise || exerciseRef\n                            });\n                        });\n                        // Parse workout data into the desired structure\n                        workout = new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Workout({\n                            id: workoutData.id || \"\",\n                            roundWorkoutId: workoutData.roundWorkoutId || \"\",\n                            collectionId: workoutData.collectionId,\n                            exercises: mappedExercises,\n                            challenge: workoutData.challenge,\n                            logs: [],\n                            title: workoutData.title || \"\",\n                            description: workoutData.description || \"\",\n                            duration: workoutData.duration || 0,\n                            workoutRating: workoutData.workoutRating,\n                            useAuthorContent: workoutData.useAuthorContent || false,\n                            isCompleted: workoutData.isCompleted || false,\n                            workoutStatus: workoutData.workoutStatus || \"notStarted\",\n                            startTime: workoutData.startTime ? new Date(workoutData.startTime) : undefined,\n                            order: workoutData.order,\n                            author: workoutData.author || userId,\n                            createdAt: workoutData.createdAt ? new Date(workoutData.createdAt) : new Date(),\n                            updatedAt: workoutData.updatedAt ? new Date(workoutData.updatedAt) : new Date(),\n                            zone: workoutData.zone || \"FULL_BODY\"\n                        });\n                        // Fetch and process logs\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\", workoutId, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 6:\n                        logsSnapshot = _state.sent();\n                        workout.logs = logsSnapshot.docs.map(function(logDoc) {\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({}, logDoc.data()), {\n                                id: logDoc.id\n                            });\n                        });\n                        workouts.push(workout);\n                        _state.label = 7;\n                    case 7:\n                        _iteratorNormalCompletion = true;\n                        return [\n                            3,\n                            5\n                        ];\n                    case 8:\n                        return [\n                            3,\n                            11\n                        ];\n                    case 9:\n                        err = _state.sent();\n                        _didIteratorError = true;\n                        _iteratorError = err;\n                        return [\n                            3,\n                            11\n                        ];\n                    case 10:\n                        try {\n                            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                                _iterator[\"return\"]();\n                            }\n                        } finally{\n                            if (_didIteratorError) {\n                                throw _iteratorError;\n                            }\n                        }\n                        return [\n                            7\n                        ];\n                    case 11:\n                        return [\n                            2,\n                            workouts\n                        ];\n                    case 12:\n                        error = _state.sent();\n                        firestoreError = error;\n                        console.error(\"Error fetching sweatlists:\", firestoreError.message);\n                        throw new Error(\"Failed to fetch sweatlists\");\n                    case 13:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getUserChallengesByChallengeId = function getUserChallengesByChallengeId(challengeId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var userChallengesRef, q, snapshot, userChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"challengeId\", \"==\", challengeId));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        userChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            return new _workout_types__WEBPACK_IMPORTED_MODULE_4__.UserChallenge(doc.id, data);\n                        });\n                        if (userChallenges.length > 0) {\n                            return [\n                                2,\n                                {\n                                    userChallenges: userChallenges\n                                }\n                            ];\n                        } else {\n                            return [\n                                2,\n                                {\n                                    userChallenges: [],\n                                    error: \"No user challenges found for this challenge.\"\n                                }\n                            ];\n                        }\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges by challengeId:\", error);\n                        return [\n                            2,\n                            {\n                                userChallenges: [],\n                                error: error instanceof Error ? error.message : \"Unknown error\"\n                            }\n                        ];\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetches workout summaries for a specific date.\n   * @param date - The date for which workout summaries are being fetched.\n   * @returns A promise resolving to an array of workout summaries.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ _proto.fetchWorkoutSummaries = function fetchWorkoutSummaries(date) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var currentUser, formattedDate, summariesRef, q, snapshot, error, firestoreError;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Format the date to match the format in Firestore ('MM-dd-yyyy')\n                        formattedDate = (0,_barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_12__.format)(date, \"MM-dd-yyyy\");\n                        // Reference to the user's workoutSummaries subcollection\n                        summariesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", currentUser.id, \"workoutSummaries\");\n                        // Create a query to filter documents by the specified date\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(summariesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"date\", \"==\", formattedDate));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // Map the documents to an array of WorkoutSummary objects\n                        return [\n                            2,\n                            snapshot.docs.map(function(doc) {\n                                return (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                    id: doc.id\n                                }, doc.data());\n                            })\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        firestoreError = error;\n                        console.error(\"Error fetching workout summaries:\", firestoreError.message);\n                        throw new Error(firestoreError.message);\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchAllWorkoutSummaries = function fetchAllWorkoutSummaries() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var currentUser, summariesRef, q, snapshot, error, firestoreError;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Reference to the user's workoutSummaries subcollection\n                        summariesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", currentUser.id, \"workoutSummary\");\n                        // Query to retrieve all workout summaries, sorted by `createdAt` in ascending order\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(summariesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"asc\")); // Adjust field name based on your schema\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // Map the documents to an array of WorkoutSummary objects\n                        return [\n                            2,\n                            snapshot.docs.map(function(doc) {\n                                return (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                    id: doc.id\n                                }, doc.data());\n                            })\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        firestoreError = error;\n                        console.error(\"Error fetching all workout summaries:\", firestoreError.message);\n                        throw new Error(firestoreError.message);\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n * Fetch user challenges by userId.\n * @param userId The ID of the user to fetch challenges for.\n * @returns A promise resolving to an array of user challenges.\n * @throws If the Firestore query fails.\n */ _proto.fetchUserChallengesByUserId = function fetchUserChallengesByUserId(userId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var userChallengesRef, q, snapshot, userChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", userId));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // console.log(`Total challenges fetched: ${snapshot.docs.length}`);\n                        userChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            // console.log(`Processing challenge with ID: ${doc.id}`, data);\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: doc.id\n                            }, data), {\n                                challenge: data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Challenge({\n                                    id: data.challenge.id,\n                                    title: data.challenge.title,\n                                    subtitle: data.challenge.subtitle,\n                                    participants: data.challenge.participants || [],\n                                    status: data.challenge.status,\n                                    startDate: data.challenge.startDate ? new Date(data.challenge.startDate) : new Date(),\n                                    endDate: data.challenge.endDate ? new Date(data.challenge.endDate) : new Date(),\n                                    createdAt: data.challenge.createdAt ? new Date(data.challenge.createdAt) : new Date(),\n                                    updatedAt: data.challenge.updatedAt ? new Date(data.challenge.updatedAt) : new Date(),\n                                    introVideos: (data.challenge.introVideos || []).map(function(v) {\n                                        return new _workout_types__WEBPACK_IMPORTED_MODULE_4__.IntroVideo({\n                                            id: v.id,\n                                            userId: v.userId,\n                                            videoUrl: v.videoUrl\n                                        });\n                                    })\n                                }) : undefined,\n                                createdAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_5__.convertTimestamp)(data.createdAt),\n                                updatedAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_5__.convertTimestamp)(data.updatedAt)\n                            });\n                        });\n                        // console.log('All challenges after processing:', JSON.stringify(userChallenges, null, 2));\n                        return [\n                            2,\n                            userChallenges\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges by userId:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchCollectionWithSweatLists = function fetchCollectionWithSweatLists(collectionId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var collection, sweatLists, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, sweatlistIdentifier, _ref, workout, error, err, error1;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            12,\n                            ,\n                            13\n                        ]);\n                        return [\n                            4,\n                            _this.getCollectionById(collectionId)\n                        ];\n                    case 1:\n                        collection = _state.sent();\n                        // Fetch sweat lists (workouts)\n                        sweatLists = [];\n                        _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;\n                        _state.label = 2;\n                    case 2:\n                        _state.trys.push([\n                            2,\n                            9,\n                            10,\n                            11\n                        ]);\n                        _iterator = (collection.sweatlistIds || [])[Symbol.iterator]();\n                        _state.label = 3;\n                    case 3:\n                        if (!!(_iteratorNormalCompletion = (_step = _iterator.next()).done)) return [\n                            3,\n                            8\n                        ];\n                        sweatlistIdentifier = _step.value;\n                        _state.label = 4;\n                    case 4:\n                        _state.trys.push([\n                            4,\n                            6,\n                            ,\n                            7\n                        ]);\n                        return [\n                            4,\n                            _this.fetchSavedWorkout(sweatlistIdentifier.sweatlistAuthorId, sweatlistIdentifier.id)\n                        ];\n                    case 5:\n                        _ref = _swc_helpers_sliced_to_array__WEBPACK_IMPORTED_MODULE_13__._.apply(void 0, [\n                            _state.sent(),\n                            1\n                        ]), workout = _ref[0];\n                        if (workout) {\n                            sweatLists.push(workout);\n                        }\n                        return [\n                            3,\n                            7\n                        ];\n                    case 6:\n                        error = _state.sent();\n                        console.error(\"Error fetching workout \".concat(sweatlistIdentifier.id, \":\"), error);\n                        return [\n                            3,\n                            7\n                        ];\n                    case 7:\n                        _iteratorNormalCompletion = true;\n                        return [\n                            3,\n                            3\n                        ];\n                    case 8:\n                        return [\n                            3,\n                            11\n                        ];\n                    case 9:\n                        err = _state.sent();\n                        _didIteratorError = true;\n                        _iteratorError = err;\n                        return [\n                            3,\n                            11\n                        ];\n                    case 10:\n                        try {\n                            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                                _iterator[\"return\"]();\n                            }\n                        } finally{\n                            if (_didIteratorError) {\n                                throw _iteratorError;\n                            }\n                        }\n                        return [\n                            7\n                        ];\n                    case 11:\n                        return [\n                            2,\n                            {\n                                collection: collection,\n                                sweatLists: sweatLists\n                            }\n                        ];\n                    case 12:\n                        error1 = _state.sent();\n                        console.error(\"Error fetching collection with sweat lists:\", error1);\n                        throw error1;\n                    case 13:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    // Optional helper methods for parsing if needed\n    _proto.parseWorkoutData = function parseWorkoutData(data) {\n        var _data_createdAt, _data_updatedAt;\n        return new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Workout({\n            id: data.id || \"\",\n            roundWorkoutId: data.roundWorkoutId || \"\",\n            collectionId: data.collectionId || [],\n            exercises: data.exercises || [],\n            challenge: data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Challenge({\n                id: data.challenge.id,\n                title: data.challenge.title,\n                subtitle: data.challenge.subtitle,\n                participants: data.challenge.participants || [],\n                status: data.challenge.status,\n                startDate: data.challenge.startDate instanceof Date ? data.challenge.startDate : data.challenge.startDate ? new Date(data.challenge.startDate) : new Date(),\n                endDate: data.challenge.endDate instanceof Date ? data.challenge.endDate : data.challenge.endDate ? new Date(data.challenge.endDate) : new Date(),\n                createdAt: data.challenge.createdAt instanceof Date ? data.challenge.createdAt : data.challenge.createdAt ? new Date(data.challenge.createdAt) : new Date(),\n                updatedAt: data.challenge.updatedAt instanceof Date ? data.challenge.updatedAt : data.challenge.updatedAt ? new Date(data.challenge.updatedAt) : new Date(),\n                introVideos: (data.challenge.introVideos || []).map(function(v) {\n                    return new _workout_types__WEBPACK_IMPORTED_MODULE_4__.IntroVideo({\n                        id: v.id,\n                        userId: v.userId,\n                        videoUrl: v.videoUrl\n                    });\n                })\n            }) : undefined,\n            logs: data.logs || [],\n            title: data.title || \"\",\n            description: data.description || \"\",\n            duration: data.duration || 0,\n            workoutRating: data.workoutRating,\n            useAuthorContent: data.useAuthorContent || false,\n            isCompleted: data.isCompleted || false,\n            workoutStatus: data.workoutStatus || _workout_types__WEBPACK_IMPORTED_MODULE_4__.WorkoutStatus.QueuedUp,\n            startTime: data.startTime instanceof Date ? data.startTime : data.startTime ? new Date(data.startTime) : undefined,\n            order: data.order || 0,\n            author: data.author || \"\",\n            createdAt: data.createdAt instanceof Date ? data.createdAt : typeof ((_data_createdAt = data.createdAt) === null || _data_createdAt === void 0 ? void 0 : _data_createdAt.toDate) === \"function\" ? data.createdAt.toDate() : data.createdAt ? new Date(data.createdAt) : new Date(),\n            updatedAt: data.updatedAt instanceof Date ? data.updatedAt : typeof ((_data_updatedAt = data.updatedAt) === null || _data_updatedAt === void 0 ? void 0 : _data_updatedAt.toDate) === \"function\" ? data.updatedAt.toDate() : data.updatedAt ? new Date(data.updatedAt) : new Date(),\n            zone: data.zone || _workout_types__WEBPACK_IMPORTED_MODULE_4__.BodyZone.FullBody,\n            estimatedDuration: function() {\n                return data.duration || 0;\n            },\n            determineWorkoutZone: function() {\n                return data.zone || _workout_types__WEBPACK_IMPORTED_MODULE_4__.BodyZone.FullBody;\n            },\n            toDictionary: function() {\n                return {} // Placeholder, implement as needed\n                ;\n            }\n        });\n    };\n    _proto.createDefaultExercise = function createDefaultExercise() {\n        return {\n            id: \"\",\n            name: \"\",\n            category: {\n                type: \"weightTraining\",\n                details: {\n                    reps: \"\",\n                    sets: 0,\n                    weight: 0,\n                    screenTime: 0,\n                    selectedVideo: this.parseExerciseVideo({}) // Use existing method to create a default video\n                }\n            },\n            primaryBodyParts: [],\n            secondaryBodyParts: [],\n            tags: [],\n            description: \"\",\n            visibility: \"live\",\n            steps: [],\n            videos: [],\n            currentVideoPosition: 0,\n            reps: \"\",\n            sets: 0,\n            weight: 0,\n            author: {\n                userId: \"\",\n                username: \"\"\n            },\n            createdAt: new Date(),\n            updatedAt: new Date()\n        };\n    };\n    _proto.parseExerciseLogData = function parseExerciseLogData(data) {\n        var _data_createdAt, _data_updatedAt;\n        return {\n            id: data.id || \"\",\n            workoutId: data.workoutId || \"\",\n            userId: data.userId || \"\",\n            exercise: data.exercise ? this.parseExercise(data.exercise) : this.createDefaultExercise(),\n            logs: (data.log || []).map(function(logEntry) {\n                return {\n                    reps: parseInt(logEntry.reps || \"0\"),\n                    weight: parseFloat(logEntry.weight || \"0\"),\n                    leftReps: parseInt(logEntry.leftReps || \"0\"),\n                    leftWeight: parseFloat(logEntry.leftWeight || \"0\"),\n                    isSplit: logEntry.isSplit || false,\n                    isBodyWeight: logEntry.isBodyWeight || false,\n                    isCompleted: logEntry.isCompleted || false,\n                    duration: parseInt(logEntry.duration || \"0\"),\n                    calories: parseInt(logEntry.calories || \"0\"),\n                    bpm: parseInt(logEntry.bpm || \"0\")\n                };\n            }),\n            feedback: data.feedback || \"\",\n            note: data.note || \"\",\n            recommendedWeight: data.recommendedWeight,\n            isSplit: data.isSplit || false,\n            isBodyWeight: data.isBodyWeight || false,\n            logSubmitted: data.logSubmitted || false,\n            logIsEditing: data.logIsEditing || false,\n            isCompleted: data.isCompleted || false,\n            createdAt: data.createdAt instanceof Date ? data.createdAt : typeof ((_data_createdAt = data.createdAt) === null || _data_createdAt === void 0 ? void 0 : _data_createdAt.toDate) === \"function\" ? data.createdAt.toDate() : data.createdAt ? new Date(data.createdAt) : new Date(),\n            updatedAt: data.updatedAt instanceof Date ? data.updatedAt : typeof ((_data_updatedAt = data.updatedAt) === null || _data_updatedAt === void 0 ? void 0 : _data_updatedAt.toDate) === \"function\" ? data.updatedAt.toDate() : data.updatedAt ? new Date(data.updatedAt) : new Date()\n        };\n    };\n    // You'll also need to implement parseExercise similar to the original implementation\n    _proto.parseExercise = function parseExercise(fields) {\n        var _fields_id, _fields_name, _fields_category_mapValue, _fields_category, _fields_tags_arrayValue, _fields_tags, _fields_description, _fields_visibility_arrayValue, _fields_visibility, _fields_steps_arrayValue, _fields_steps, _fields_currentVideoPosition, _fields_reps, _fields_sets, _fields_weight, _fields_author_mapValue, _fields_author, _fields_createdAt, _fields_updatedAt;\n        return {\n            id: ((_fields_id = fields.id) === null || _fields_id === void 0 ? void 0 : _fields_id.stringValue) || fields.id || \"\",\n            name: ((_fields_name = fields.name) === null || _fields_name === void 0 ? void 0 : _fields_name.stringValue) || fields.name || \"\",\n            category: this.parseExerciseCategory(((_fields_category = fields.category) === null || _fields_category === void 0 ? void 0 : (_fields_category_mapValue = _fields_category.mapValue) === null || _fields_category_mapValue === void 0 ? void 0 : _fields_category_mapValue.fields) || fields.category || {}),\n            primaryBodyParts: this.parseBodyParts(fields.primaryBodyParts),\n            secondaryBodyParts: this.parseBodyParts(fields.secondaryBodyParts),\n            tags: (((_fields_tags = fields.tags) === null || _fields_tags === void 0 ? void 0 : (_fields_tags_arrayValue = _fields_tags.arrayValue) === null || _fields_tags_arrayValue === void 0 ? void 0 : _fields_tags_arrayValue.values) || fields.tags || []).map(function(tag) {\n                return tag.stringValue || tag;\n            }),\n            description: ((_fields_description = fields.description) === null || _fields_description === void 0 ? void 0 : _fields_description.stringValue) || fields.description || \"\",\n            visibility: (((_fields_visibility = fields.visibility) === null || _fields_visibility === void 0 ? void 0 : (_fields_visibility_arrayValue = _fields_visibility.arrayValue) === null || _fields_visibility_arrayValue === void 0 ? void 0 : _fields_visibility_arrayValue.values) || fields.visibility || []).map(function(v) {\n                return v.stringValue || v;\n            }),\n            steps: (((_fields_steps = fields.steps) === null || _fields_steps === void 0 ? void 0 : (_fields_steps_arrayValue = _fields_steps.arrayValue) === null || _fields_steps_arrayValue === void 0 ? void 0 : _fields_steps_arrayValue.values) || fields.steps || []).map(function(step) {\n                return step.stringValue || step;\n            }),\n            videos: this.parseVideos(fields.videos),\n            currentVideoPosition: parseInt(((_fields_currentVideoPosition = fields.currentVideoPosition) === null || _fields_currentVideoPosition === void 0 ? void 0 : _fields_currentVideoPosition.integerValue) || fields.currentVideoPosition || \"0\"),\n            reps: ((_fields_reps = fields.reps) === null || _fields_reps === void 0 ? void 0 : _fields_reps.stringValue) || fields.reps || \"\",\n            sets: parseInt(((_fields_sets = fields.sets) === null || _fields_sets === void 0 ? void 0 : _fields_sets.integerValue) || fields.sets || \"0\"),\n            weight: parseFloat(((_fields_weight = fields.weight) === null || _fields_weight === void 0 ? void 0 : _fields_weight.doubleValue) || fields.weight || \"0\"),\n            author: this.parseExerciseAuthor(((_fields_author = fields.author) === null || _fields_author === void 0 ? void 0 : (_fields_author_mapValue = _fields_author.mapValue) === null || _fields_author_mapValue === void 0 ? void 0 : _fields_author_mapValue.fields) || fields.author || {}),\n            createdAt: new Date(parseFloat(((_fields_createdAt = fields.createdAt) === null || _fields_createdAt === void 0 ? void 0 : _fields_createdAt.doubleValue) || fields.createdAt || \"0\") * 1000),\n            updatedAt: new Date(parseFloat(((_fields_updatedAt = fields.updatedAt) === null || _fields_updatedAt === void 0 ? void 0 : _fields_updatedAt.doubleValue) || fields.updatedAt || \"0\") * 1000)\n        };\n    };\n    // You'll need to implement these helper methods as well\n    _proto.parseExerciseCategory = function parseExerciseCategory(fields) {\n        var _fields_id;\n        // Implementation similar to the original service\n        var categoryId = ((_fields_id = fields.id) === null || _fields_id === void 0 ? void 0 : _fields_id.stringValue) || fields.id || \"\";\n        if (categoryId === \"cardio\") {\n            var _fields_duration, _fields_bpm, _fields_calories, _fields_screenTime, _fields_selectedVideo_mapValue, _fields_selectedVideo;\n            return {\n                type: \"cardio\",\n                details: {\n                    duration: parseInt(((_fields_duration = fields.duration) === null || _fields_duration === void 0 ? void 0 : _fields_duration.integerValue) || fields.duration || \"0\"),\n                    bpm: parseInt(((_fields_bpm = fields.bpm) === null || _fields_bpm === void 0 ? void 0 : _fields_bpm.integerValue) || fields.bpm || \"0\"),\n                    calories: parseInt(((_fields_calories = fields.calories) === null || _fields_calories === void 0 ? void 0 : _fields_calories.integerValue) || fields.calories || \"0\"),\n                    screenTime: parseInt(((_fields_screenTime = fields.screenTime) === null || _fields_screenTime === void 0 ? void 0 : _fields_screenTime.integerValue) || fields.screenTime || \"0\"),\n                    selectedVideo: this.parseExerciseVideo(((_fields_selectedVideo = fields.selectedVideo) === null || _fields_selectedVideo === void 0 ? void 0 : (_fields_selectedVideo_mapValue = _fields_selectedVideo.mapValue) === null || _fields_selectedVideo_mapValue === void 0 ? void 0 : _fields_selectedVideo_mapValue.fields) || fields.selectedVideo)\n                }\n            };\n        } else {\n            var _fields_reps, _fields_sets, _fields_weight, _fields_screenTime1, _fields_selectedVideo_mapValue1, _fields_selectedVideo1;\n            return {\n                type: \"weightTraining\",\n                details: {\n                    reps: ((_fields_reps = fields.reps) === null || _fields_reps === void 0 ? void 0 : _fields_reps.stringValue) || fields.reps || \"\",\n                    sets: parseInt(((_fields_sets = fields.sets) === null || _fields_sets === void 0 ? void 0 : _fields_sets.integerValue) || fields.sets || \"0\"),\n                    weight: parseFloat(((_fields_weight = fields.weight) === null || _fields_weight === void 0 ? void 0 : _fields_weight.doubleValue) || fields.weight || \"0\"),\n                    screenTime: parseInt(((_fields_screenTime1 = fields.screenTime) === null || _fields_screenTime1 === void 0 ? void 0 : _fields_screenTime1.integerValue) || fields.screenTime || \"0\"),\n                    selectedVideo: this.parseExerciseVideo(((_fields_selectedVideo1 = fields.selectedVideo) === null || _fields_selectedVideo1 === void 0 ? void 0 : (_fields_selectedVideo_mapValue1 = _fields_selectedVideo1.mapValue) === null || _fields_selectedVideo_mapValue1 === void 0 ? void 0 : _fields_selectedVideo_mapValue1.fields) || fields.selectedVideo)\n                }\n            };\n        }\n    };\n    _proto.parseBodyParts = function parseBodyParts(bodyPartsField) {\n        var _bodyPartsField_arrayValue;\n        var bodyPartsArray = (bodyPartsField === null || bodyPartsField === void 0 ? void 0 : (_bodyPartsField_arrayValue = bodyPartsField.arrayValue) === null || _bodyPartsField_arrayValue === void 0 ? void 0 : _bodyPartsField_arrayValue.values) || bodyPartsField || [];\n        return bodyPartsArray.map(function(part) {\n            return part.stringValue || part;\n        });\n    };\n    _proto.parseVideos = function parseVideos(videosField) {\n        var _this = this;\n        var _videosField_arrayValue;\n        var videosArray = (videosField === null || videosField === void 0 ? void 0 : (_videosField_arrayValue = videosField.arrayValue) === null || _videosField_arrayValue === void 0 ? void 0 : _videosField_arrayValue.values) || videosField || [];\n        return videosArray.map(function(videoData) {\n            var _videoData_mapValue;\n            return _this.parseExerciseVideo(((_videoData_mapValue = videoData.mapValue) === null || _videoData_mapValue === void 0 ? void 0 : _videoData_mapValue.fields) || videoData);\n        });\n    };\n    _proto.parseExerciseVideo = function parseExerciseVideo(fields) {\n        var _fields_id, _fields_exerciseId, _fields_username, _fields_userId, _fields_videoURL, _fields_fileName, _fields_exercise, _fields_profileImage_mapValue, _fields_profileImage, _fields_caption, _fields_gifURL, _fields_thumbnail, _fields_visibility, _fields_totalAccountsReached, _fields_totalAccountLikes, _fields_totalAccountBookmarked, _fields_totalAccountUsage, _fields_isApproved, _fields_liked, _fields_bookmarked, _fields_createdAt, _fields_updatedAt;\n        return {\n            id: ((_fields_id = fields.id) === null || _fields_id === void 0 ? void 0 : _fields_id.stringValue) || fields.id || \"\",\n            exerciseId: ((_fields_exerciseId = fields.exerciseId) === null || _fields_exerciseId === void 0 ? void 0 : _fields_exerciseId.stringValue) || fields.exerciseId || \"\",\n            username: ((_fields_username = fields.username) === null || _fields_username === void 0 ? void 0 : _fields_username.stringValue) || fields.username || \"\",\n            userId: ((_fields_userId = fields.userId) === null || _fields_userId === void 0 ? void 0 : _fields_userId.stringValue) || fields.userId || \"\",\n            videoURL: ((_fields_videoURL = fields.videoURL) === null || _fields_videoURL === void 0 ? void 0 : _fields_videoURL.stringValue) || fields.videoURL || \"\",\n            fileName: ((_fields_fileName = fields.fileName) === null || _fields_fileName === void 0 ? void 0 : _fields_fileName.stringValue) || fields.fileName || \"\",\n            exercise: ((_fields_exercise = fields.exercise) === null || _fields_exercise === void 0 ? void 0 : _fields_exercise.stringValue) || fields.exercise || \"\",\n            profileImage: this.parseProfileImage(((_fields_profileImage = fields.profileImage) === null || _fields_profileImage === void 0 ? void 0 : (_fields_profileImage_mapValue = _fields_profileImage.mapValue) === null || _fields_profileImage_mapValue === void 0 ? void 0 : _fields_profileImage_mapValue.fields) || fields.profileImage || {}),\n            caption: ((_fields_caption = fields.caption) === null || _fields_caption === void 0 ? void 0 : _fields_caption.stringValue) || fields.caption || \"\",\n            gifURL: ((_fields_gifURL = fields.gifURL) === null || _fields_gifURL === void 0 ? void 0 : _fields_gifURL.stringValue) || fields.gifURL || \"\",\n            thumbnail: ((_fields_thumbnail = fields.thumbnail) === null || _fields_thumbnail === void 0 ? void 0 : _fields_thumbnail.stringValue) || fields.thumbnail || \"\",\n            visibility: ((_fields_visibility = fields.visibility) === null || _fields_visibility === void 0 ? void 0 : _fields_visibility.stringValue) || fields.visibility || \"open\",\n            totalAccountsReached: parseInt(((_fields_totalAccountsReached = fields.totalAccountsReached) === null || _fields_totalAccountsReached === void 0 ? void 0 : _fields_totalAccountsReached.integerValue) || fields.totalAccountsReached || \"0\"),\n            totalAccountLikes: parseInt(((_fields_totalAccountLikes = fields.totalAccountLikes) === null || _fields_totalAccountLikes === void 0 ? void 0 : _fields_totalAccountLikes.integerValue) || fields.totalAccountLikes || \"0\"),\n            totalAccountBookmarked: parseInt(((_fields_totalAccountBookmarked = fields.totalAccountBookmarked) === null || _fields_totalAccountBookmarked === void 0 ? void 0 : _fields_totalAccountBookmarked.integerValue) || fields.totalAccountBookmarked || \"0\"),\n            totalAccountUsage: parseInt(((_fields_totalAccountUsage = fields.totalAccountUsage) === null || _fields_totalAccountUsage === void 0 ? void 0 : _fields_totalAccountUsage.integerValue) || fields.totalAccountUsage || \"0\"),\n            isApproved: ((_fields_isApproved = fields.isApproved) === null || _fields_isApproved === void 0 ? void 0 : _fields_isApproved.booleanValue) || fields.isApproved || false,\n            liked: ((_fields_liked = fields.liked) === null || _fields_liked === void 0 ? void 0 : _fields_liked.booleanValue) || fields.liked,\n            bookmarked: ((_fields_bookmarked = fields.bookmarked) === null || _fields_bookmarked === void 0 ? void 0 : _fields_bookmarked.booleanValue) || fields.bookmarked,\n            createdAt: new Date(parseFloat(((_fields_createdAt = fields.createdAt) === null || _fields_createdAt === void 0 ? void 0 : _fields_createdAt.doubleValue) || fields.createdAt || \"0\") * 1000),\n            updatedAt: new Date(parseFloat(((_fields_updatedAt = fields.updatedAt) === null || _fields_updatedAt === void 0 ? void 0 : _fields_updatedAt.doubleValue) || fields.updatedAt || \"0\") * 1000)\n        };\n    };\n    _proto.parseProfileImage = function parseProfileImage(fields) {\n        var _fields_profileImageURL, _fields_imageOffsetWidth, _fields_imageOffsetHeight;\n        return {\n            profileImageURL: ((_fields_profileImageURL = fields.profileImageURL) === null || _fields_profileImageURL === void 0 ? void 0 : _fields_profileImageURL.stringValue) || fields.profileImageURL || \"\",\n            imageOffsetWidth: parseFloat(((_fields_imageOffsetWidth = fields.imageOffsetWidth) === null || _fields_imageOffsetWidth === void 0 ? void 0 : _fields_imageOffsetWidth.doubleValue) || fields.imageOffsetWidth || \"0\"),\n            imageOffsetHeight: parseFloat(((_fields_imageOffsetHeight = fields.imageOffsetHeight) === null || _fields_imageOffsetHeight === void 0 ? void 0 : _fields_imageOffsetHeight.doubleValue) || fields.imageOffsetHeight || \"0\")\n        };\n    };\n    _proto.parseExerciseAuthor = function parseExerciseAuthor(fields) {\n        var _fields_userId, _fields_username;\n        return {\n            userId: ((_fields_userId = fields.userId) === null || _fields_userId === void 0 ? void 0 : _fields_userId.stringValue) || fields.userId || \"\",\n            username: ((_fields_username = fields.username) === null || _fields_username === void 0 ? void 0 : _fields_username.stringValue) || fields.username || \"\"\n        };\n    };\n    _proto.fetchSavedWorkout = function fetchSavedWorkout(userId, workoutId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var workoutRef, workoutSnap, exercisesWithVideos, workoutData, mappedExercises, workout, logsRef, logsSnapshot, logs, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            4,\n                            ,\n                            5\n                        ]);\n                        // Fetch the workout document\n                        workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\", workoutId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(workoutRef)\n                        ];\n                    case 1:\n                        workoutSnap = _state.sent();\n                        if (!workoutSnap.exists()) {\n                            return [\n                                2,\n                                [\n                                    null,\n                                    null\n                                ]\n                            ];\n                        }\n                        return [\n                            4,\n                            _this.fetchAndMapExercisesWithVideos()\n                        ];\n                    case 2:\n                        exercisesWithVideos = _state.sent();\n                        workoutData = workoutSnap.data();\n                        // Map the exercises in the workout to the full exercise objects with videos\n                        mappedExercises = (workoutData.exercises || []).map(function(exerciseRef) {\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name === exerciseRef.exercise.name;\n                            });\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({}, exerciseRef), {\n                                exercise: fullExercise || exerciseRef.exercise\n                            });\n                        });\n                        workoutData.exercises = mappedExercises;\n                        workout = _this.parseWorkoutData(workoutData);\n                        // Fetch logs\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 3:\n                        logsSnapshot = _state.sent();\n                        logs = logsSnapshot.docs.map(function(logDoc) {\n                            var logData = logDoc.data();\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name === logData.exercise.name;\n                            });\n                            return {\n                                id: logDoc.id,\n                                workoutId: workoutId,\n                                userId: userId,\n                                exercise: fullExercise || logData.exercise,\n                                logs: logData.log || [],\n                                feedback: logData.feedback || \"\",\n                                note: logData.note || \"\",\n                                recommendedWeight: logData.recommendedWeight,\n                                isSplit: logData.isSplit || false,\n                                isBodyWeight: logData.isBodyWeight || false,\n                                logSubmitted: logData.logSubmitted || false,\n                                logIsEditing: logData.logIsEditing || false,\n                                isCompleted: logData.isCompleted || false,\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(logData.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(logData.updatedAt)\n                            };\n                        });\n                        workout.logs = logs;\n                        return [\n                            2,\n                            [\n                                workout,\n                                logs\n                            ]\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error fetching saved workout:\", error);\n                        return [\n                            2,\n                            [\n                                null,\n                                null\n                            ]\n                        ];\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n * Fetch user challenges by challengeId.\n * @param challengeId The ID of the challenge to fetch associated user challenges for.\n * @returns A promise resolving to an array of user challenges.\n * @throws If the Firestore query fails.\n */ _proto.fetchUserChallengesByChallengeId = function fetchUserChallengesByChallengeId(challengeId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var userChallengesRef, q, snapshot, userChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"challengeId\", \"==\", challengeId));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // console.log(`Total user challenges fetched: ${snapshot.docs.length}`);\n                        userChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            // console.log(`Processing user challenge with ID: ${doc.id}`, data);\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: doc.id\n                            }, data), {\n                                challenge: data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Challenge({\n                                    id: data.challenge.id,\n                                    title: data.challenge.title,\n                                    subtitle: data.challenge.subtitle,\n                                    participants: data.challenge.participants || [],\n                                    status: data.challenge.status,\n                                    startDate: data.challenge.startDate ? new Date(data.challenge.startDate) : new Date(),\n                                    endDate: data.challenge.endDate ? new Date(data.challenge.endDate) : new Date(),\n                                    createdAt: data.challenge.createdAt ? new Date(data.challenge.createdAt) : new Date(),\n                                    updatedAt: data.challenge.updatedAt ? new Date(data.challenge.updatedAt) : new Date(),\n                                    introVideos: (data.challenge.introVideos || []).map(function(v) {\n                                        return new _workout_types__WEBPACK_IMPORTED_MODULE_4__.IntroVideo({\n                                            id: v.id,\n                                            userId: v.userId,\n                                            videoUrl: v.videoUrl\n                                        });\n                                    })\n                                }) : undefined,\n                                createdAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_5__.convertTimestamp)(data.createdAt),\n                                updatedAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_5__.convertTimestamp)(data.updatedAt)\n                            });\n                        });\n                        // console.log('All user challenges after processing:', JSON.stringify(userChallenges, null, 2));\n                        return [\n                            2,\n                            userChallenges\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges by challengeId:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getCollectionById = function getCollectionById(id) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var docRef, docSnap, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        console.log(\"Fetching collection with id:\", id);\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\", id);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef)\n                        ];\n                    case 2:\n                        docSnap = _state.sent();\n                        if (docSnap.exists()) {\n                            return [\n                                2,\n                                new _workout_types__WEBPACK_IMPORTED_MODULE_4__.SweatlistCollection((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                    id: docSnap.id\n                                }, docSnap.data()))\n                            ];\n                        } else {\n                            throw new Error(\"Collection not found\");\n                        }\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error getting collection by ID:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetch user challenges by userId and filter for active challenges.\n   * @returns A promise resolving to an array of active challenges.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ _proto.fetchActiveChallenges = function fetchActiveChallenges() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var currentUser, userChallengesRef, q, snapshot, allChallenges, activeChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", currentUser.id));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // console.log(`Total challenges fetched: ${snapshot.docs.length}`);\n                        allChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            // console.log(`Processing challenge with ID: ${doc.id}`, data);\n                            // Use the Challenge constructor to parse the challenge data\n                            // console.log(\"date before format: \" + convertFirestoreTimestamp(data.challenge.startDate));\n                            var challenge = data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Challenge({\n                                id: data.challenge.id,\n                                title: data.challenge.title,\n                                subtitle: data.challenge.subtitle,\n                                participants: data.challenge.participants || [],\n                                status: data.challenge.status,\n                                startDate: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.challenge.startDate),\n                                endDate: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.challenge.endDate),\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.challenge.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.challenge.updatedAt),\n                                introVideos: (data.challenge.introVideos || []).map(function(v) {\n                                    return new _workout_types__WEBPACK_IMPORTED_MODULE_4__.IntroVideo({\n                                        id: v.id,\n                                        userId: v.userId,\n                                        videoUrl: v.videoUrl\n                                    });\n                                })\n                            }) : undefined;\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: doc.id\n                            }, data), {\n                                challenge: challenge,\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.updatedAt)\n                            });\n                        });\n                        // console.log('All challenges after processing:', JSON.stringify(allChallenges, null, 2));\n                        // Filter for active challenges (endDate > current date)\n                        activeChallenges = allChallenges.filter(function(userChallenge) {\n                            var _userChallenge_challenge;\n                            var endDate = (_userChallenge_challenge = userChallenge.challenge) === null || _userChallenge_challenge === void 0 ? void 0 : _userChallenge_challenge.endDate;\n                            // console.log(\n                            //   `Evaluating challenge ID: ${userChallenge.id}, End Date: ${endDate}, Current Date: ${new Date()}`\n                            // );\n                            return endDate && endDate > new Date();\n                        });\n                        // console.log(`Total active challenges: ${activeChallenges.length}`, activeChallenges);\n                        return [\n                            2,\n                            activeChallenges\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching active challenges:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetch user challenges by userId.\n   * @returns A promise resolving to an array of challenges.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ _proto.fetchUserChallenges = function fetchUserChallenges() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var currentUser, userChallengesRef, q, snapshot, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Reference to the user-challenge collection\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        // Query challenges where userId matches the current user's ID\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", currentUser.id));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // Map documents to an array of Challenge objects\n                        return [\n                            2,\n                            snapshot.docs.map(function(doc) {\n                                return (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                    id: doc.id\n                                }, doc.data());\n                            })\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges:\", error);\n                        throw new Error(\"Failed to fetch user challenges\");\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    //update the workout summary,\n    _proto.updateWorkoutSummary = function updateWorkoutSummary(param) {\n        var userId = param.userId, workoutId = param.workoutId, summary = param.summary;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var summaryRef, summaryData, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"No user ID provided\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        // Create a reference to the collection\n                        summaryRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSummary\", summary.id);\n                        // Convert summary to a plain object for Firestore\n                        summaryData = {\n                            id: summary.id,\n                            workoutId: summary.workoutId,\n                            exercises: summary.exercises,\n                            bodyParts: summary.bodyParts,\n                            secondaryBodyParts: summary.secondaryBodyParts,\n                            workoutTitle: summary.workoutTitle,\n                            caloriesBurned: summary.caloriesBurned,\n                            workoutRating: summary.workoutRating,\n                            exercisesCompleted: summary.exercisesCompleted,\n                            aiInsight: summary.aiInsight,\n                            recommendations: summary.recommendations,\n                            gifURLs: summary.gifURLs,\n                            recommendedWork: summary.recommendedWork,\n                            isCompleted: summary.isCompleted,\n                            createdAt: summary.createdAt,\n                            updatedAt: new Date(),\n                            completedAt: summary.completedAt,\n                            duration: summary.duration\n                        };\n                        // Set data with merge enabled (equivalent to Swift's setData with merge: true)\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(summaryRef, summaryData, {\n                                merge: true\n                            })\n                        ];\n                    case 2:\n                        _state.sent();\n                        console.log(\"Workout summary document updated successfully\");\n                        return [\n                            3,\n                            4\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error updating workout summary:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.updateWorkoutLogs = function updateWorkoutLogs(param) {\n        var userId = param.userId, workoutId = param.workoutId, logs = param.logs;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var workoutRef, logsRef, batch, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        // Update logs in Firestore\n                        workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", workoutId);\n                        // Update logs subcollection\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\");\n                        // Batch write to update logs\n                        batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n                        logs.forEach(function(log) {\n                            var logDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(logsRef, log.id);\n                            batch.update(logDocRef, {\n                                isCompleted: log.isCompleted,\n                                logs: log.logs,\n                                updatedAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_5__.serverTimestamp)()\n                            });\n                        });\n                        return [\n                            4,\n                            batch.commit()\n                        ];\n                    case 1:\n                        _state.sent();\n                        return [\n                            3,\n                            3\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error updating workout logs:\", error);\n                        throw error;\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetch the workout session from Firestore, returning { workout, logs }.\n   * Checks first for a QueuedUp session, then for InProgress.\n   */ _proto.fetchCurrentWorkoutSession = function fetchCurrentWorkoutSession(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var exerciseSnapshot, videoSnapshot, exerciseVideos, exercisesWithVideos, workoutSessionsRef, q, snap;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"No user ID provided\");\n                        }\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        // Map videos to exercises\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseVideo.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        exercisesWithVideos = exerciseSnapshot.docs.map(function(doc) {\n                            var exercise = _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: doc.id\n                            }, doc.data()));\n                            // Attach videos to exercise\n                            var matchingVideos = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            });\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({}, exercise), {\n                                videos: matchingVideos\n                            });\n                        });\n                        // Reference to user's workoutSessions\n                        workoutSessionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\");\n                        // 1) Check for QueuedUp\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(workoutSessionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", _workout_types__WEBPACK_IMPORTED_MODULE_4__.WorkoutStatus.QueuedUp));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 3:\n                        snap = _state.sent();\n                        if (!snap.empty) {\n                            return [\n                                2,\n                                _this.processWorkoutSessionDocument(snap.docs[0], exercisesWithVideos)\n                            ];\n                        }\n                        // 2) Check for InProgress\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(workoutSessionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", _workout_types__WEBPACK_IMPORTED_MODULE_4__.WorkoutStatus.InProgress));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 4:\n                        snap = _state.sent();\n                        if (!snap.empty) {\n                            return [\n                                2,\n                                _this.processWorkoutSessionDocument(snap.docs[0], exercisesWithVideos)\n                            ];\n                        }\n                        // None found\n                        return [\n                            2,\n                            {\n                                workout: null,\n                                logs: null\n                            }\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.cancelWorkoutSession = function cancelWorkoutSession(userId, workoutId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var logsRef, logsSnapshot, logBatch, workoutSessionRef, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            5,\n                            ,\n                            6\n                        ]);\n                        // 1. Delete all logs in the logs subcollection\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", workoutId, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 1:\n                        logsSnapshot = _state.sent();\n                        logBatch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n                        if (!!logsSnapshot.empty) return [\n                            3,\n                            3\n                        ];\n                        logsSnapshot.docs.forEach(function(logDoc) {\n                            logBatch[\"delete\"](logDoc.ref);\n                        });\n                        return [\n                            4,\n                            logBatch.commit()\n                        ];\n                    case 2:\n                        _state.sent();\n                        _state.label = 3;\n                    case 3:\n                        // 2. Delete the workout session document\n                        workoutSessionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", workoutId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.deleteDoc)(workoutSessionRef)\n                        ];\n                    case 4:\n                        _state.sent();\n                        return [\n                            3,\n                            6\n                        ];\n                    case 5:\n                        error = _state.sent();\n                        console.error(\"Error canceling workout session:\", error);\n                        throw error;\n                    case 6:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchAndMapExercisesWithVideos = function fetchAndMapExercisesWithVideos() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var exerciseSnapshot, exercises, videoSnapshot, exerciseVideos, exercisesWithVideos, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 1:\n                        exerciseSnapshot = _state.sent();\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 2:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseVideo.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        // console.log(`Fetched ${exerciseVideos.length} exercise videos`);\n                        // 3. Map videos to exercises\n                        exercisesWithVideos = exercises.map(function(exercise) {\n                            var matchingVideos = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            });\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({}, exercise), {\n                                videos: matchingVideos\n                            });\n                        });\n                        // console.log('Finished mapping exercises with videos');\n                        // console.log(`Total exercises with videos: ${exercisesWithVideos.length}`);\n                        return [\n                            2,\n                            exercisesWithVideos\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching and mapping exercises with videos:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Helper to build the Workout object + any logs from the snapshot.\n   */ _proto.fetchAllWorkoutSessions = function fetchAllWorkoutSessions(userId) {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var exerciseSnapshot, exercises, videoSnapshot, exerciseVideos, exercisesWithVideos, workoutSessionsRef, snap, sessions, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"No user ID provided\");\n                        }\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            6,\n                            ,\n                            7\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"))\n                        ];\n                    case 2:\n                        exerciseSnapshot = _state.sent();\n                        exercises = exerciseSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"))\n                        ];\n                    case 3:\n                        videoSnapshot = _state.sent();\n                        exerciseVideos = videoSnapshot.docs.map(function(doc) {\n                            return _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseVideo.fromFirebase((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({\n                                id: doc.id\n                            }, doc.data()));\n                        });\n                        // 3. Map videos to exercises\n                        exercisesWithVideos = exercises.map(function(exercise) {\n                            var matchingVideos = exerciseVideos.filter(function(video) {\n                                return video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                            });\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({}, exercise), {\n                                videos: matchingVideos\n                            });\n                        });\n                        // 4. Fetch workout sessions\n                        workoutSessionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(workoutSessionsRef)\n                        ];\n                    case 4:\n                        snap = _state.sent();\n                        if (snap.empty) {\n                            console.log(\"No workout sessions found for user\");\n                            return [\n                                2,\n                                []\n                            ];\n                        }\n                        return [\n                            4,\n                            Promise.all(snap.docs.map(function() {\n                                var _ref = (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function(doc) {\n                                    var sessionData;\n                                    return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                                        switch(_state.label){\n                                            case 0:\n                                                return [\n                                                    4,\n                                                    _this.processWorkoutSessionDocument(doc, exercisesWithVideos)\n                                                ];\n                                            case 1:\n                                                sessionData = _state.sent();\n                                                // Sort the logs by the 'order' property, if available\n                                                if (sessionData.logs) {\n                                                    sessionData.logs.sort(function(a, b) {\n                                                        var _a_order;\n                                                        var orderA = (_a_order = a.order) !== null && _a_order !== void 0 ? _a_order : 0;\n                                                        var _b_order;\n                                                        var orderB = (_b_order = b.order) !== null && _b_order !== void 0 ? _b_order : 0;\n                                                        return orderA - orderB;\n                                                    });\n                                                }\n                                                return [\n                                                    2,\n                                                    sessionData\n                                                ];\n                                        }\n                                    });\n                                });\n                                return function(doc) {\n                                    return _ref.apply(this, arguments);\n                                };\n                            }()))\n                        ];\n                    case 5:\n                        sessions = _state.sent();\n                        // console.log(`Found ${sessions.length} workout sessions`);\n                        return [\n                            2,\n                            sessions\n                        ];\n                    case 6:\n                        error = _state.sent();\n                        console.error(\"Error fetching workout sessions:\", error);\n                        throw error;\n                    case 7:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.updateCollection = function updateCollection(collection) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var collRef, newDocRef, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        collRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\");\n                        // If collection.id is empty, generate a new doc ID and assign it.\n                        if (!collection.id || collection.id.trim() === \"\") {\n                            newDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(collRef);\n                            collection.id = newDocRef.id;\n                        }\n                        // Ensure the challenge id matches the collection id.\n                        if (collection.challenge) {\n                            collection.challenge.id = collection.id;\n                        }\n                        // Update the updatedAt field.\n                        collection.updatedAt = new Date();\n                        // Save the collection to Firestore.\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(collRef, collection.id), collection.toDictionary())\n                        ];\n                    case 1:\n                        _state.sent();\n                        console.log(\"Collection updated successfully\");\n                        return [\n                            2,\n                            collection\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error updating collection document:\", error);\n                        throw new Error(\"Error while updating the collection\");\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.processWorkoutSessionDocument = function processWorkoutSessionDocument(workoutDoc, exercisesWithVideos) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var data, mappedExercises, workout, logsRef, logsSnapshot, logs;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        data = workoutDoc.data();\n                        // Map exercises with their full data and videos\n                        mappedExercises = (data.exercises || []).map(function(exerciseRef) {\n                            var _exerciseRef_exercise_name, _exerciseRef_exercise;\n                            // Find the full exercise with videos\n                            var exerciseNameLower = (_exerciseRef_exercise = exerciseRef.exercise) === null || _exerciseRef_exercise === void 0 ? void 0 : (_exerciseRef_exercise_name = _exerciseRef_exercise.name) === null || _exerciseRef_exercise_name === void 0 ? void 0 : _exerciseRef_exercise_name.toLowerCase().trim();\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name.toLowerCase().trim() === exerciseNameLower;\n                            });\n                            // If full exercise found, return it, otherwise use the original\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({}, exerciseRef), {\n                                exercise: fullExercise || exerciseRef.exercise\n                            });\n                        });\n                        // Create the workout with mapped exercises\n                        workout = new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Workout({\n                            id: workoutDoc.id,\n                            roundWorkoutId: data.roundWorkoutId || \"\",\n                            exercises: mappedExercises,\n                            title: data.title || \"\",\n                            description: data.description || \"\",\n                            duration: data.duration || 0,\n                            useAuthorContent: data.useAuthorContent || false,\n                            isCompleted: data.isCompleted || false,\n                            workoutStatus: data.workoutStatus || _workout_types__WEBPACK_IMPORTED_MODULE_4__.WorkoutStatus.Archived,\n                            author: data.author || \"\",\n                            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.createdAt),\n                            updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.updatedAt),\n                            startTime: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(data.startTime),\n                            collectionId: data.collectionId,\n                            challenge: data.challenge,\n                            logs: (data.logs || []).map(function(logData) {\n                                var _logData_exercise_name, _logData_exercise;\n                                // Map logs with full exercises\n                                var exerciseNameLower = (_logData_exercise = logData.exercise) === null || _logData_exercise === void 0 ? void 0 : (_logData_exercise_name = _logData_exercise.name) === null || _logData_exercise_name === void 0 ? void 0 : _logData_exercise_name.toLowerCase().trim();\n                                var fullExercise = exercisesWithVideos.find(function(ex) {\n                                    return ex.name.toLowerCase().trim() === exerciseNameLower;\n                                });\n                                return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({}, logData), {\n                                    exercise: fullExercise || logData.exercise\n                                });\n                            }),\n                            workoutRating: data.workoutRating,\n                            order: data.order,\n                            zone: data.zone || _workout_types__WEBPACK_IMPORTED_MODULE_4__.BodyZone.FullBody\n                        });\n                        console.log(\"The Workout ID is: \" + workout.id);\n                        // Fetch logs from subcollection\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutDoc.ref, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 1:\n                        logsSnapshot = _state.sent();\n                        logs = logsSnapshot.docs.map(function(logDoc) {\n                            var _logData_exercise_name, _logData_exercise;\n                            var logData = logDoc.data();\n                            // Find the full exercise with videos\n                            var exerciseNameLower = (_logData_exercise = logData.exercise) === null || _logData_exercise === void 0 ? void 0 : (_logData_exercise_name = _logData_exercise.name) === null || _logData_exercise_name === void 0 ? void 0 : _logData_exercise_name.toLowerCase().trim();\n                            var fullExercise = exercisesWithVideos.find(function(ex) {\n                                return ex.name.toLowerCase().trim() === exerciseNameLower;\n                            });\n                            // Prepare log data with full exercise\n                            var preparedLogData = (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({}, logData), {\n                                id: logDoc.id,\n                                workoutId: workout.id,\n                                exercise: fullExercise || logData.exercise,\n                                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(logData.createdAt),\n                                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_6__.convertFirestoreTimestamp)(logData.updatedAt)\n                            });\n                            // Use the ExerciseLog constructor to ensure proper mapping\n                            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseLog(preparedLogData);\n                        });\n                        return [\n                            2,\n                            {\n                                workout: workout,\n                                logs: logs\n                            }\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.saveWorkoutSession = function saveWorkoutSession(param) {\n        var userId = param.userId, workout = param.workout, logs = param.logs;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var currentDate, cleanWorkout, workoutSessionRef, logsRef, logBatch, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) throw new Error(\"No user ID provided\");\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            4,\n                            ,\n                            5\n                        ]);\n                        currentDate = new Date();\n                        cleanWorkout = new _workout_types__WEBPACK_IMPORTED_MODULE_4__.Workout((0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_10__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_11__._)({}, workout), {\n                            roundWorkoutId: \"\".concat(workout.id, \"-\").concat(currentDate.getTime()),\n                            workoutStatus: _workout_types__WEBPACK_IMPORTED_MODULE_4__.WorkoutStatus.QueuedUp,\n                            createdAt: currentDate,\n                            updatedAt: currentDate,\n                            startTime: currentDate,\n                            logs: []\n                        }));\n                        workoutSessionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\"));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(workoutSessionRef, cleanWorkout)\n                        ];\n                    case 2:\n                        _state.sent();\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutSessionRef, \"logs\");\n                        logBatch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n                        logs.forEach(function(log, index) {\n                            var logDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(logsRef, \"\".concat(log.id, \"-\").concat(currentDate.getTime()));\n                            logBatch.set(logDocRef, {\n                                id: logDocRef.id,\n                                workoutId: workoutSessionRef.id,\n                                exercise: {\n                                    id: log.exercise.id,\n                                    name: log.exercise.name,\n                                    category: log.exercise.category,\n                                    videos: log.exercise.videos || []\n                                },\n                                order: index,\n                                createdAt: currentDate,\n                                updatedAt: currentDate,\n                                logSubmitted: false,\n                                isCompleted: false\n                            });\n                        });\n                        return [\n                            4,\n                            logBatch.commit()\n                        ];\n                    case 3:\n                        _state.sent();\n                        return [\n                            2,\n                            cleanWorkout\n                        ];\n                    case 4:\n                        error = _state.sent();\n                        console.error(\"Error saving workout session:\", error);\n                        throw error;\n                    case 5:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Example \"join challenge\" method using the client SDK (no admin privileges).\n   * This creates a doc in `user-challenge` with the userId, challengeId, etc.\n   */ _proto.joinChallenge = function joinChallenge(param) {\n        var username = param.username, challengeId = param.challengeId;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_8__._)(function() {\n            var currentUser, usersRef, userQuery, userSnapshot, userDoc, userData, userId, challengeRef, challengeSnap, challenge, userChallengeId, userChallengeData;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_9__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        // 1) Make sure we have a signed-in user\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!currentUser) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // 2) Find the user doc by username\n                        usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\");\n                        userQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"username\", \"==\", username));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(userQuery)\n                        ];\n                    case 1:\n                        userSnapshot = _state.sent();\n                        if (userSnapshot.empty) {\n                            throw new Error(\"User not found\");\n                        }\n                        userDoc = userSnapshot.docs[0];\n                        userData = userDoc.data();\n                        userId = userDoc.id;\n                        // 3) Check if the challenge doc exists\n                        challengeRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\", challengeId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(challengeRef)\n                        ];\n                    case 2:\n                        challengeSnap = _state.sent();\n                        if (!challengeSnap.exists()) {\n                            throw new Error(\"Challenge not found\");\n                        }\n                        challenge = challengeSnap.data();\n                        // 4) Build new user-challenge document\n                        userChallengeId = \"\".concat(challengeId, \"-\").concat(userId, \"-\").concat(Date.now());\n                        userChallengeData = {\n                            id: userChallengeId,\n                            challenge: challenge,\n                            challengeId: challengeId,\n                            userId: userId,\n                            fcmToken: userData.fcmToken || \"\",\n                            profileImage: userData.profileImage || {},\n                            progress: 0,\n                            completedWorkouts: [],\n                            isCompleted: false,\n                            uid: userId,\n                            location: userData.location || null,\n                            city: \"\",\n                            country: \"\",\n                            timezone: \"\",\n                            username: username,\n                            joinDate: new Date(),\n                            createdAt: new Date(),\n                            updatedAt: new Date(),\n                            pulsePoints: {\n                                baseCompletion: 0,\n                                firstCompletion: 0,\n                                streakBonus: 0,\n                                checkInBonus: 0,\n                                effortRating: 0,\n                                chatParticipation: 0,\n                                locationCheckin: 0,\n                                contentEngagement: 0,\n                                encouragementSent: 0,\n                                encouragementReceived: 0\n                            },\n                            currentStreak: 0,\n                            encouragedUsers: [],\n                            encouragedByUsers: [],\n                            checkIns: []\n                        };\n                        // 5) Store user-challenge doc\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\", userChallengeId), userChallengeData)\n                        ];\n                    case 3:\n                        _state.sent();\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    (0,_swc_helpers_create_class__WEBPACK_IMPORTED_MODULE_14__._)(WorkoutService, [\n        {\n            key: \"currentWorkout\",\n            get: // Getter for current workout\n            function get() {\n                return this._currentWorkout;\n            },\n            set: // Setter for current workout\n            function set(workout) {\n                this._currentWorkout = workout;\n            }\n        },\n        {\n            key: \"currentWorkoutLogs\",\n            get: // Getter for current workout logs\n            function get() {\n                return this._currentWorkoutLogs;\n            },\n            set: // Setter for current workout logs\n            function set(logs) {\n                this._currentWorkoutLogs = logs;\n            }\n        }\n    ]);\n    return WorkoutService;\n}();\nvar workoutService = new WorkoutService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL2ZpcmViYXNlL3dvcmtvdXQvc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsc0NBQXNDOzs7Ozs7OztBQWdCVjtBQUVHO0FBQ087QUFDd0c7QUFFN0Q7QUFDcEI7QUFDM0I7QUFDMkMsQ0FBQyx5QkFBeUI7QUFDakM7QUFDMEI7QUFVaEcsbUNBQUs7O2FBQUMyQjsrRUFBQUE7YUFDSUMsa0JBQWtDO2FBQ2xDQyxzQkFBcUMsRUFBRTs7aUJBRjNDRjtJQXdCSjs7R0FFQyxHQUNELE9BQU1HLG1CQUdMLEdBSEQsU0FBTUEsb0JBQW9CQyxNQUFjOztlQUF4QztnQkFDUUM7Ozs7d0JBQVU7OzRCQUFNLE1BQUtDLDBCQUEwQixDQUFDRjs7O3dCQUFoREMsVUFBVTt3QkFDaEI7OzRCQUFPQSxRQUFRRSxPQUFPOzs7O1FBQ3hCOztJQUVBLE9BQU1DLGdCQXlFTCxHQXpFRCxTQUFNQSxpQkFBaUJKLE1BQWM7O2VBQXJDO2dCQU1RSyxhQUlFQyxxQkFHQUMsa0JBQ0FDLFVBR0QsZ0ZBQU1DLFlBQ0hDLGFBQ0FDLFdBR0FDLGlCQVlBVCxTQXVCQVUsU0FDQUMsbUJBVURDLE9BQ0RDOzs7O3dCQXBFUixJQUFJLENBQUNoQixRQUFROzRCQUNYLE1BQU0sSUFBSWlCLE1BQU07d0JBQ2xCO3dCQUVBLDZDQUE2Qzt3QkFDdkNaLGNBQWNwQyw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUUsU0FBU29CLFFBQVE7Ozs7Ozs7Ozt3QkFJdEI7OzRCQUFNLE1BQUtrQiw4QkFBOEI7Ozt3QkFBL0RaLHNCQUFzQjt3QkFHSDs7NEJBQU1uQywyREFBT0EsQ0FBQ2tDOzs7d0JBQWpDRSxtQkFBbUI7d0JBQ25CQzt3QkFHRDs7Ozs7Ozs7O3dCQUFBLFlBQW9CRCxpQkFBaUJZLElBQUk7OzsrQkFBekM7Ozs7d0JBQU1WLGFBQU47d0JBQ0dDLGNBQWNELFdBQVdXLElBQUk7d0JBQzdCVCxZQUFZRixXQUFXWSxFQUFFO3dCQUUvQiw0RUFBNEU7d0JBQ3RFVCxrQkFBa0IsQ0FBQ0YsWUFBWVksU0FBUyxNQUFLLEVBQUdDLEdBQUcsQ0FBQyxTQUFDQzs0QkFDekQsSUFBTUMsZUFBZW5CLG9CQUFvQm9CLElBQUksQ0FBQ0MsU0FBQUE7dUNBQU1BLEdBQUdDLElBQUksS0FBS0osWUFBWUssUUFBUSxDQUFDRCxJQUFJOzs0QkFDekZFLFFBQVFDLEdBQUcsQ0FBQyxrQ0FBa0NOOzRCQUU5QyxPQUFPLHdJQUNGRDtnQ0FDSEssVUFBVUosZ0JBQWdCRDs7d0JBRTlCO3dCQUdBLGdEQUFnRDt3QkFDMUNyQixVQUFVLElBQUlsQixtREFBT0EsQ0FBQzs0QkFDMUJvQyxJQUFJWCxZQUFZVyxFQUFFLElBQUk7NEJBQ3RCVyxnQkFBZ0J0QixZQUFZc0IsY0FBYyxJQUFJOzRCQUM5Q0MsY0FBY3ZCLFlBQVl1QixZQUFZOzRCQUN0Q1gsV0FBV1Y7NEJBQ1hzQixXQUFXeEIsWUFBWXdCLFNBQVM7NEJBQ2hDQyxJQUFJOzRCQUNKQyxPQUFPMUIsWUFBWTBCLEtBQUssSUFBSTs0QkFDNUJDLGFBQWEzQixZQUFZMkIsV0FBVyxJQUFJOzRCQUN4Q0MsVUFBVTVCLFlBQVk0QixRQUFRLElBQUk7NEJBQ2xDQyxlQUFlN0IsWUFBWTZCLGFBQWE7NEJBQ3hDQyxrQkFBa0I5QixZQUFZOEIsZ0JBQWdCLElBQUk7NEJBQ2xEQyxhQUFhL0IsWUFBWStCLFdBQVcsSUFBSTs0QkFDeENDLGVBQWVoQyxZQUFZZ0MsYUFBYSxJQUFJOzRCQUM1Q0MsV0FBV2pDLFlBQVlpQyxTQUFTLEdBQUcsSUFBSUMsS0FBS2xDLFlBQVlpQyxTQUFTLElBQUlFOzRCQUNyRUMsT0FBT3BDLFlBQVlvQyxLQUFLOzRCQUN4QkMsUUFBUXJDLFlBQVlxQyxNQUFNLElBQUkvQzs0QkFDOUJnRCxXQUFXdEMsWUFBWXNDLFNBQVMsR0FBRyxJQUFJSixLQUFLbEMsWUFBWXNDLFNBQVMsSUFBSSxJQUFJSjs0QkFDekVLLFdBQVd2QyxZQUFZdUMsU0FBUyxHQUFHLElBQUlMLEtBQUtsQyxZQUFZdUMsU0FBUyxJQUFJLElBQUlMOzRCQUN6RU0sTUFBTXhDLFlBQVl3QyxJQUFJLElBQUk7d0JBQzVCO3dCQUVBLHlCQUF5Qjt3QkFDbkJyQyxVQUFVNUMsOERBQVVBLENBQUNXLHVDQUFFQSxFQUFFLFNBQVNvQixRQUFRLHFCQUFxQlcsV0FBVzt3QkFDM0Q7OzRCQUFNeEMsMkRBQU9BLENBQUMwQzs7O3dCQUE3QkMsZUFBZTt3QkFDckJYLFFBQVFnQyxJQUFJLEdBQUdyQixhQUFhSyxJQUFJLENBQUNJLEdBQUcsQ0FBQyxTQUFDNEI7bUNBQVksd0lBQzdDQSxPQUFPL0IsSUFBSTtnQ0FDZEMsSUFBSThCLE9BQU85QixFQUFFOzs7d0JBR2ZiLFNBQVM0QyxJQUFJLENBQUNqRDs7O3dCQS9DWDs7Ozs7Ozs7Ozs7O3dCQUFBO3dCQUFBOzs7Ozs7O2lDQUFBO2dDQUFBOzs7Z0NBQUE7c0NBQUE7Ozs7Ozs7d0JBa0RMOzs0QkFBT0s7Ozt3QkFDQU87d0JBQ0RDLGlCQUFpQkQ7d0JBQ3ZCZSxRQUFRZixLQUFLLENBQUMsOEJBQThCQyxlQUFlcUMsT0FBTzt3QkFDbEUsTUFBTSxJQUFJcEMsTUFBTTs7Ozs7OztRQUVwQjs7SUFFQSxPQUFNcUMsOEJBa0JMLEdBbEJELFNBQU1BLCtCQUErQkMsV0FBbUI7ZUFBeEQ7Z0JBQ1FDLG1CQUNBQyxHQUVFQyxVQUNBQyxnQkFTQzVDOzs7O3dCQWJIeUMsb0JBQW9CdkYsOERBQVVBLENBQUNXLHVDQUFFQSxFQUFFO3dCQUNuQzZFLElBQUlwRix5REFBS0EsQ0FBQ21GLG1CQUFtQmxGLHlEQUFLQSxDQUFDLGVBQWUsTUFBTWlGOzs7Ozs7Ozs7d0JBRTNDOzs0QkFBTXBGLDJEQUFPQSxDQUFDc0Y7Ozt3QkFBekJDLFdBQVc7d0JBQ1hDLGlCQUFrQ0QsU0FBU3ZDLElBQUksQ0FBQ0ksR0FBRyxDQUFDLFNBQUNyRDs0QkFDekQsSUFBTWtELE9BQU9sRCxJQUFJa0QsSUFBSTs0QkFDckIsT0FBTyxJQUFJekIseURBQWFBLENBQUN6QixJQUFJbUQsRUFBRSxFQUFFRDt3QkFDbkM7d0JBQ0EsSUFBSXVDLGVBQWVDLE1BQU0sR0FBRyxHQUFHOzRCQUM3Qjs7Z0NBQU87b0NBQUVELGdCQUFBQTtnQ0FBZTs7d0JBQzFCLE9BQU87NEJBQ0w7O2dDQUFPO29DQUFFQSxjQUFjO29DQUFNNUMsT0FBTztnQ0FBK0M7O3dCQUNyRjs7Ozs7O3dCQUNPQTt3QkFDUGUsUUFBUWYsS0FBSyxDQUFDLGtEQUFrREE7d0JBQ2hFOzs0QkFBTztnQ0FBRTRDLGNBQWM7Z0NBQU01QyxPQUFPQSxpQkFBaUJFLFFBQVFGLE1BQU1zQyxPQUFPLEdBQUc7NEJBQWdCOzs7Ozs7OztRQUVqRzs7SUFFQTs7Ozs7R0FLQyxHQUNELE9BQU1RLHFCQTRCTCxHQTVCRCxTQUFNQSxzQkFBc0JDLElBQVU7ZUFBdEM7Z0JBQ1FDLGFBTUFDLGVBR0FDLGNBR0FSLEdBR0VDLFVBT0MzQyxPQUNEQzs7Ozt3QkF2QkYrQyxjQUFjbEYsOENBQVdBLENBQUNrRixXQUFXO3dCQUMzQyxJQUFJLEVBQUNBLHdCQUFBQSxrQ0FBQUEsWUFBYTFDLEVBQUUsR0FBRTs0QkFDcEIsTUFBTSxJQUFJSixNQUFNO3dCQUNsQjt3QkFFQSxrRUFBa0U7d0JBQzVEK0MsZ0JBQWdCMUUsK0VBQU1BLENBQUN3RSxNQUFNO3dCQUVuQyx5REFBeUQ7d0JBQ25ERyxlQUFlaEcsOERBQVVBLENBQUNXLHVDQUFFQSxFQUFFLFNBQVNtRixZQUFZMUMsRUFBRSxFQUFFO3dCQUU3RCwyREFBMkQ7d0JBQ3JEb0MsSUFBSXBGLHlEQUFLQSxDQUFDNEYsY0FBYzNGLHlEQUFLQSxDQUFDLFFBQVEsTUFBTTBGOzs7Ozs7Ozs7d0JBRy9COzs0QkFBTTdGLDJEQUFPQSxDQUFDc0Y7Ozt3QkFBekJDLFdBQVc7d0JBRWpCLDBEQUEwRDt3QkFDMUQ7OzRCQUFPQSxTQUFTdkMsSUFBSSxDQUFDSSxHQUFHLENBQUMsU0FBQ3JEO3VDQUF1QjtvQ0FDL0NtRCxJQUFJbkQsSUFBSW1ELEVBQUU7bUNBQ1BuRCxJQUFJa0QsSUFBSTs7Ozt3QkFFTkw7d0JBQ0RDLGlCQUFpQkQ7d0JBQ3ZCZSxRQUFRZixLQUFLLENBQUMscUNBQXFDQyxlQUFlcUMsT0FBTzt3QkFDekUsTUFBTSxJQUFJcEMsTUFBTUQsZUFBZXFDLE9BQU87Ozs7Ozs7UUFFMUM7O0lBRUEsT0FBTWEsd0JBeUJMLEdBekJELFNBQU1BO2VBQU47Z0JBQ1FILGFBTUFFLGNBR0FSLEdBR0VDLFVBT0MzQyxPQUNEQzs7Ozt3QkFwQkYrQyxjQUFjbEYsOENBQVdBLENBQUNrRixXQUFXO3dCQUMzQyxJQUFJLEVBQUNBLHdCQUFBQSxrQ0FBQUEsWUFBYTFDLEVBQUUsR0FBRTs0QkFDcEIsTUFBTSxJQUFJSixNQUFNO3dCQUNsQjt3QkFFQSx5REFBeUQ7d0JBQ25EZ0QsZUFBZWhHLDhEQUFVQSxDQUFDVyx1Q0FBRUEsRUFBRSxTQUFTbUYsWUFBWTFDLEVBQUUsRUFBRTt3QkFFN0Qsb0ZBQW9GO3dCQUM5RW9DLElBQUlwRix5REFBS0EsQ0FBQzRGLGNBQWMxRiwyREFBT0EsQ0FBQyxhQUFhLFNBQVMseUNBQXlDOzs7Ozs7Ozs7d0JBR2xGOzs0QkFBTUosMkRBQU9BLENBQUNzRjs7O3dCQUF6QkMsV0FBVzt3QkFFakIsMERBQTBEO3dCQUMxRDs7NEJBQU9BLFNBQVN2QyxJQUFJLENBQUNJLEdBQUcsQ0FBQyxTQUFDckQ7dUNBQXVCO29DQUMvQ21ELElBQUluRCxJQUFJbUQsRUFBRTttQ0FDUG5ELElBQUlrRCxJQUFJOzs7O3dCQUVOTDt3QkFDREMsaUJBQWlCRDt3QkFDdkJlLFFBQVFmLEtBQUssQ0FBQyx5Q0FBeUNDLGVBQWVxQyxPQUFPO3dCQUM3RSxNQUFNLElBQUlwQyxNQUFNRCxlQUFlcUMsT0FBTzs7Ozs7OztRQUUxQzs7SUFHQTs7Ozs7Q0FLRCxHQUNELE9BQU1jLDJCQWtETCxHQWxERCxTQUFNQSw0QkFBNEJuRSxNQUFjO2VBQWhEO2dCQUNRd0QsbUJBQ0FDLEdBS0VDLFVBSUFDLGdCQW1DQzVDOzs7O3dCQTdDSHlDLG9CQUFvQnZGLDhEQUFVQSxDQUFDVyx1Q0FBRUEsRUFBRTt3QkFDbkM2RSxJQUFJcEYseURBQUtBLENBQUNtRixtQkFBbUJsRix5REFBS0EsQ0FBQyxVQUFVLE1BQU0wQjs7Ozs7Ozs7O3dCQUt0Qzs7NEJBQU03QiwyREFBT0EsQ0FBQ3NGOzs7d0JBQXpCQyxXQUFXO3dCQUVqQixvRUFBb0U7d0JBRTlEQyxpQkFBaUJELFNBQVN2QyxJQUFJLENBQUNJLEdBQUcsQ0FBQyxTQUFDckQ7NEJBQ3hDLElBQU1rRCxPQUFPbEQsSUFBSWtELElBQUk7NEJBQ3JCLGdFQUFnRTs0QkFFaEUsT0FBTztnQ0FDTEMsSUFBSW5ELElBQUltRCxFQUFFOytCQUNQRDtnQ0FDSGMsV0FBV2QsS0FBS2MsU0FBUyxHQUNyQixJQUFJeEMscURBQVNBLENBQUM7b0NBQ1oyQixJQUFJRCxLQUFLYyxTQUFTLENBQUNiLEVBQUU7b0NBQ3JCZSxPQUFPaEIsS0FBS2MsU0FBUyxDQUFDRSxLQUFLO29DQUMzQmdDLFVBQVVoRCxLQUFLYyxTQUFTLENBQUNrQyxRQUFRO29DQUNqQ0MsY0FBY2pELEtBQUtjLFNBQVMsQ0FBQ21DLFlBQVksSUFBSSxFQUFFO29DQUMvQ0MsUUFBUWxELEtBQUtjLFNBQVMsQ0FBQ29DLE1BQU07b0NBQzdCQyxXQUFXbkQsS0FBS2MsU0FBUyxDQUFDcUMsU0FBUyxHQUFHLElBQUkzQixLQUFLeEIsS0FBS2MsU0FBUyxDQUFDcUMsU0FBUyxJQUFJLElBQUkzQjtvQ0FDL0U0QixTQUFTcEQsS0FBS2MsU0FBUyxDQUFDc0MsT0FBTyxHQUFHLElBQUk1QixLQUFLeEIsS0FBS2MsU0FBUyxDQUFDc0MsT0FBTyxJQUFJLElBQUk1QjtvQ0FDekVJLFdBQVc1QixLQUFLYyxTQUFTLENBQUNjLFNBQVMsR0FBRyxJQUFJSixLQUFLeEIsS0FBS2MsU0FBUyxDQUFDYyxTQUFTLElBQUksSUFBSUo7b0NBQy9FSyxXQUFXN0IsS0FBS2MsU0FBUyxDQUFDZSxTQUFTLEdBQUcsSUFBSUwsS0FBS3hCLEtBQUtjLFNBQVMsQ0FBQ2UsU0FBUyxJQUFJLElBQUlMO29DQUMvRTZCLGFBQWEsQ0FBQ3JELEtBQUtjLFNBQVMsQ0FBQ3VDLFdBQVcsSUFBSSxFQUFFLEVBQUVsRCxHQUFHLENBQUMsU0FBQ21EOytDQUNuRCxJQUFJdkYsc0RBQVVBLENBQUM7NENBQ2JrQyxJQUFJcUQsRUFBRXJELEVBQUU7NENBQ1JyQixRQUFRMEUsRUFBRTFFLE1BQU07NENBQ2hCMkUsVUFBVUQsRUFBRUMsUUFBUTt3Q0FDdEI7O2dDQUVKLEtBQ0E5QjtnQ0FDSkcsV0FBV3pELGtFQUFnQkEsQ0FBQzZCLEtBQUs0QixTQUFTO2dDQUMxQ0MsV0FBVzFELGtFQUFnQkEsQ0FBQzZCLEtBQUs2QixTQUFTOzt3QkFFOUM7d0JBRUEsNEZBQTRGO3dCQUU1Rjs7NEJBQU9VOzs7d0JBQ0E1Qzt3QkFDUGUsUUFBUWYsS0FBSyxDQUFDLDZDQUE2Q0E7d0JBQzNELE1BQU1BOzs7Ozs7O1FBRVY7O0lBRUEsT0FBTTZELDZCQTZCTCxHQTdCRCxTQUFNQSw4QkFBOEIzQyxZQUFvQjs7ZUFBeEQ7Z0JBR1VoRSxZQUdBNEcsWUFHRCxnRkFBTUMscUJBRVcsTUFBWDNFLFNBUUFZLFlBTUpBOzs7Ozs7Ozs7O3dCQXRCWTs7NEJBQU0sTUFBS2dFLGlCQUFpQixDQUFDOUM7Ozt3QkFBMUNoRSxhQUFhO3dCQUVuQiwrQkFBK0I7d0JBQ3pCNEc7d0JBR0Q7Ozs7Ozs7Ozt3QkFBQSxZQUE2QjVHLENBQUFBLFdBQVcrRyxZQUFZLE1BQUs7OzsrQkFBekQ7Ozs7d0JBQU1GLHNCQUFOOzs7Ozs7Ozs7d0JBRWlCOzs0QkFBTSxNQUFLRyxpQkFBaUIsQ0FDNUNILG9CQUFvQkksaUJBQWlCLEVBQ3JDSixvQkFBb0J6RCxFQUFFOzs7d0JBRk47NEJBQUE7OzRCQUFYbEIsVUFBVzt3QkFLbEIsSUFBSUEsU0FBUzs0QkFDWDBFLFdBQVd6QixJQUFJLENBQUNqRDt3QkFDbEI7Ozs7Ozt3QkFDT1k7d0JBQ1BlLFFBQVFmLEtBQUssQ0FBQywwQkFBaUQsT0FBdkIrRCxvQkFBb0J6RCxFQUFFLEVBQUMsTUFBSU47Ozs7Ozt3QkFYbEU7Ozs7Ozs7Ozs7Ozt3QkFBQTt3QkFBQTs7Ozs7OztpQ0FBQTtnQ0FBQTs7O2dDQUFBO3NDQUFBOzs7Ozs7O3dCQWVMOzs0QkFBTztnQ0FBRTlDLFlBQUFBO2dDQUFZNEcsWUFBQUE7NEJBQVc7Ozt3QkFDekI5RDt3QkFDUGUsUUFBUWYsS0FBSyxDQUFDLCtDQUErQ0E7d0JBQzdELE1BQU1BOzs7Ozs7O1FBRVY7O0lBRUEsZ0RBQWdEO0lBQ2hELE9BQVFvRSxnQkE4RFAsR0E5REQsU0FBUUEsaUJBQWlCL0QsSUFBa0I7WUFpRDNCQSxpQkFLQUE7UUFyRGQsT0FBTyxJQUFJbkMsbURBQU9BLENBQUM7WUFDakJvQyxJQUFJRCxLQUFLQyxFQUFFLElBQUk7WUFDZlcsZ0JBQWdCWixLQUFLWSxjQUFjLElBQUk7WUFDdkNDLGNBQWNiLEtBQUthLFlBQVksSUFBSSxFQUFFO1lBQ3JDWCxXQUFXRixLQUFLRSxTQUFTLElBQUksRUFBRTtZQUMvQlksV0FBV2QsS0FBS2MsU0FBUyxHQUNyQixJQUFJeEMscURBQVNBLENBQUM7Z0JBQ1oyQixJQUFJRCxLQUFLYyxTQUFTLENBQUNiLEVBQUU7Z0JBQ3JCZSxPQUFPaEIsS0FBS2MsU0FBUyxDQUFDRSxLQUFLO2dCQUMzQmdDLFVBQVVoRCxLQUFLYyxTQUFTLENBQUNrQyxRQUFRO2dCQUNqQ0MsY0FBY2pELEtBQUtjLFNBQVMsQ0FBQ21DLFlBQVksSUFBSSxFQUFFO2dCQUMvQ0MsUUFBUWxELEtBQUtjLFNBQVMsQ0FBQ29DLE1BQU07Z0JBQzdCQyxXQUFXbkQsS0FBS2MsU0FBUyxDQUFDcUMsU0FBUyxZQUFZM0IsT0FDM0N4QixLQUFLYyxTQUFTLENBQUNxQyxTQUFTLEdBQ3ZCbkQsS0FBS2MsU0FBUyxDQUFDcUMsU0FBUyxHQUFHLElBQUkzQixLQUFLeEIsS0FBS2MsU0FBUyxDQUFDcUMsU0FBUyxJQUFJLElBQUkzQjtnQkFDekU0QixTQUFTcEQsS0FBS2MsU0FBUyxDQUFDc0MsT0FBTyxZQUFZNUIsT0FDdkN4QixLQUFLYyxTQUFTLENBQUNzQyxPQUFPLEdBQ3JCcEQsS0FBS2MsU0FBUyxDQUFDc0MsT0FBTyxHQUFHLElBQUk1QixLQUFLeEIsS0FBS2MsU0FBUyxDQUFDc0MsT0FBTyxJQUFJLElBQUk1QjtnQkFDckVJLFdBQVc1QixLQUFLYyxTQUFTLENBQUNjLFNBQVMsWUFBWUosT0FDM0N4QixLQUFLYyxTQUFTLENBQUNjLFNBQVMsR0FDdkI1QixLQUFLYyxTQUFTLENBQUNjLFNBQVMsR0FBRyxJQUFJSixLQUFLeEIsS0FBS2MsU0FBUyxDQUFDYyxTQUFTLElBQUksSUFBSUo7Z0JBQ3pFSyxXQUFXN0IsS0FBS2MsU0FBUyxDQUFDZSxTQUFTLFlBQVlMLE9BQzNDeEIsS0FBS2MsU0FBUyxDQUFDZSxTQUFTLEdBQ3ZCN0IsS0FBS2MsU0FBUyxDQUFDZSxTQUFTLEdBQUcsSUFBSUwsS0FBS3hCLEtBQUtjLFNBQVMsQ0FBQ2UsU0FBUyxJQUFJLElBQUlMO2dCQUN2RTZCLGFBQWEsQ0FBQ3JELEtBQUtjLFNBQVMsQ0FBQ3VDLFdBQVcsSUFBSSxFQUFFLEVBQUVsRCxHQUFHLENBQUMsU0FBQ21EOzJCQUNuRCxJQUFJdkYsc0RBQVVBLENBQUM7d0JBQ2JrQyxJQUFJcUQsRUFBRXJELEVBQUU7d0JBQ1JyQixRQUFRMEUsRUFBRTFFLE1BQU07d0JBQ2hCMkUsVUFBVUQsRUFBRUMsUUFBUTtvQkFDdEI7O1lBRU4sS0FDQTlCO1lBQ0pWLE1BQU1mLEtBQUtlLElBQUksSUFBSSxFQUFFO1lBQ3JCQyxPQUFPaEIsS0FBS2dCLEtBQUssSUFBSTtZQUNyQkMsYUFBYWpCLEtBQUtpQixXQUFXLElBQUk7WUFDakNDLFVBQVVsQixLQUFLa0IsUUFBUSxJQUFJO1lBQzNCQyxlQUFlbkIsS0FBS21CLGFBQWE7WUFDakNDLGtCQUFrQnBCLEtBQUtvQixnQkFBZ0IsSUFBSTtZQUMzQ0MsYUFBYXJCLEtBQUtxQixXQUFXLElBQUk7WUFDakNDLGVBQWV0QixLQUFLc0IsYUFBYSxJQUFJdEQseURBQWFBLENBQUNnRyxRQUFRO1lBQzNEekMsV0FBV3ZCLEtBQUt1QixTQUFTLFlBQVlDLE9BQ2pDeEIsS0FBS3VCLFNBQVMsR0FDYnZCLEtBQUt1QixTQUFTLEdBQUcsSUFBSUMsS0FBS3hCLEtBQUt1QixTQUFTLElBQUlFO1lBQ2pEQyxPQUFPMUIsS0FBSzBCLEtBQUssSUFBSTtZQUNyQkMsUUFBUTNCLEtBQUsyQixNQUFNLElBQUk7WUFDdkJDLFdBQVc1QixLQUFLNEIsU0FBUyxZQUFZSixPQUNqQ3hCLEtBQUs0QixTQUFTLEdBQ2IsU0FBTzVCLGtCQUFBQSxLQUFLNEIsU0FBUyxjQUFkNUIsc0NBQUFBLGdCQUFnQmlFLE1BQU0sTUFBSyxhQUNqQ2pFLEtBQUs0QixTQUFTLENBQUNxQyxNQUFNLEtBQ3BCakUsS0FBSzRCLFNBQVMsR0FBRyxJQUFJSixLQUFLeEIsS0FBSzRCLFNBQVMsSUFBSSxJQUFJSjtZQUN2REssV0FBVzdCLEtBQUs2QixTQUFTLFlBQVlMLE9BQ2pDeEIsS0FBSzZCLFNBQVMsR0FDYixTQUFPN0Isa0JBQUFBLEtBQUs2QixTQUFTLGNBQWQ3QixzQ0FBQUEsZ0JBQWdCaUUsTUFBTSxNQUFLLGFBQ2pDakUsS0FBSzZCLFNBQVMsQ0FBQ29DLE1BQU0sS0FDcEJqRSxLQUFLNkIsU0FBUyxHQUFHLElBQUlMLEtBQUt4QixLQUFLNkIsU0FBUyxJQUFJLElBQUlMO1lBQ3ZETSxNQUFNOUIsS0FBSzhCLElBQUksSUFBSWhFLG9EQUFRQSxDQUFDb0csUUFBUTtZQUNwQ0MsbUJBQW1CO3VCQUFNbkUsS0FBS2tCLFFBQVEsSUFBSTs7WUFDMUNrRCxzQkFBc0I7dUJBQU1wRSxLQUFLOEIsSUFBSSxJQUFJaEUsb0RBQVFBLENBQUNvRyxRQUFROztZQUMxREcsY0FBYzt1QkFBTyxDQUFDLEVBQUcsbUNBQW1DOzs7UUFDOUQ7SUFDRjtJQUVBLE9BQVFDLHFCQWdDUCxHQWhDRCxTQUFRQTtRQUNOLE9BQU87WUFDTHJFLElBQUk7WUFDSk8sTUFBTTtZQUNOK0QsVUFBVTtnQkFDUkMsTUFBTTtnQkFDTkMsU0FBUztvQkFDUEMsTUFBTTtvQkFDTkMsTUFBTTtvQkFDTkMsUUFBUTtvQkFDUkMsWUFBWTtvQkFDWkMsZUFBZSxJQUFJLENBQUNDLGtCQUFrQixDQUFDLENBQUMsR0FBRyxnREFBZ0Q7Z0JBQzdGO1lBQ0Y7WUFDQUMsa0JBQWtCLEVBQUU7WUFDcEJDLG9CQUFvQixFQUFFO1lBQ3RCQyxNQUFNLEVBQUU7WUFDUmpFLGFBQWE7WUFDYmtFLFlBQVk7WUFDWkMsT0FBTyxFQUFFO1lBQ1RDLFFBQVEsRUFBRTtZQUNWQyxzQkFBc0I7WUFDdEJaLE1BQU07WUFDTkMsTUFBTTtZQUNOQyxRQUFRO1lBQ1JqRCxRQUFRO2dCQUNOL0MsUUFBUTtnQkFDUjJHLFVBQVU7WUFDWjtZQUNBM0QsV0FBVyxJQUFJSjtZQUNmSyxXQUFXLElBQUlMO1FBQ2pCO0lBQ0Y7SUFFQSxPQUFRZ0Usb0JBdUNQLEdBdkNELFNBQVFBLHFCQUFxQnhGLElBQWtCO1lBOEIvQkEsaUJBS0FBO1FBbENkLE9BQU87WUFDTEMsSUFBSUQsS0FBS0MsRUFBRSxJQUFJO1lBQ2ZWLFdBQVdTLEtBQUtULFNBQVMsSUFBSTtZQUM3QlgsUUFBUW9CLEtBQUtwQixNQUFNLElBQUk7WUFDdkI2QixVQUFVVCxLQUFLUyxRQUFRLEdBQ25CLElBQUksQ0FBQ2dGLGFBQWEsQ0FBQ3pGLEtBQUtTLFFBQVEsSUFDaEMsSUFBSSxDQUFDNkQscUJBQXFCO1lBQzlCdkQsTUFBTSxDQUFDZixLQUFLVyxHQUFHLElBQUksRUFBRSxFQUFFUixHQUFHLENBQUMsU0FBQ3VGO3VCQUFtQjtvQkFDN0NoQixNQUFNaUIsU0FBU0QsU0FBU2hCLElBQUksSUFBSTtvQkFDaENFLFFBQVFnQixXQUFXRixTQUFTZCxNQUFNLElBQUk7b0JBQ3RDaUIsVUFBVUYsU0FBU0QsU0FBU0csUUFBUSxJQUFJO29CQUN4Q0MsWUFBWUYsV0FBV0YsU0FBU0ksVUFBVSxJQUFJO29CQUM5Q0MsU0FBU0wsU0FBU0ssT0FBTyxJQUFJO29CQUM3QkMsY0FBY04sU0FBU00sWUFBWSxJQUFJO29CQUN2QzNFLGFBQWFxRSxTQUFTckUsV0FBVyxJQUFJO29CQUNyQ0gsVUFBVXlFLFNBQVNELFNBQVN4RSxRQUFRLElBQUk7b0JBQ3hDK0UsVUFBVU4sU0FBU0QsU0FBU08sUUFBUSxJQUFJO29CQUN4Q0MsS0FBS1AsU0FBU0QsU0FBU1EsR0FBRyxJQUFJO2dCQUNoQzs7WUFDQUMsVUFBVW5HLEtBQUttRyxRQUFRLElBQUk7WUFDM0JDLE1BQU1wRyxLQUFLb0csSUFBSSxJQUFJO1lBQ25CQyxtQkFBbUJyRyxLQUFLcUcsaUJBQWlCO1lBQ3pDTixTQUFTL0YsS0FBSytGLE9BQU8sSUFBSTtZQUN6QkMsY0FBY2hHLEtBQUtnRyxZQUFZLElBQUk7WUFDbkNNLGNBQWN0RyxLQUFLc0csWUFBWSxJQUFJO1lBQ25DQyxjQUFjdkcsS0FBS3VHLFlBQVksSUFBSTtZQUNuQ2xGLGFBQWFyQixLQUFLcUIsV0FBVyxJQUFJO1lBQ2pDTyxXQUFXNUIsS0FBSzRCLFNBQVMsWUFBWUosT0FDakN4QixLQUFLNEIsU0FBUyxHQUNiLFNBQU81QixrQkFBQUEsS0FBSzRCLFNBQVMsY0FBZDVCLHNDQUFBQSxnQkFBZ0JpRSxNQUFNLE1BQUssYUFDakNqRSxLQUFLNEIsU0FBUyxDQUFDcUMsTUFBTSxLQUNwQmpFLEtBQUs0QixTQUFTLEdBQUcsSUFBSUosS0FBS3hCLEtBQUs0QixTQUFTLElBQUksSUFBSUo7WUFDdkRLLFdBQVc3QixLQUFLNkIsU0FBUyxZQUFZTCxPQUNqQ3hCLEtBQUs2QixTQUFTLEdBQ2IsU0FBTzdCLGtCQUFBQSxLQUFLNkIsU0FBUyxjQUFkN0Isc0NBQUFBLGdCQUFnQmlFLE1BQU0sTUFBSyxhQUNqQ2pFLEtBQUs2QixTQUFTLENBQUNvQyxNQUFNLEtBQ3BCakUsS0FBSzZCLFNBQVMsR0FBRyxJQUFJTCxLQUFLeEIsS0FBSzZCLFNBQVMsSUFBSSxJQUFJTDtRQUN6RDtJQUNGO0lBRUEscUZBQXFGO0lBQ3JGLE9BQVFpRSxhQXFCUCxHQXJCRCxTQUFRQSxjQUFjZSxNQUFXO1lBRXpCQSxZQUNFQSxjQUMrQkEsMkJBQUFBLGtCQUc5QkEseUJBQUFBLGNBQ01BLHFCQUNBQSwrQkFBQUEsb0JBQ0xBLDBCQUFBQSxlQUV1QkEsOEJBQ3pCQSxjQUNTQSxjQUNJQSxnQkFFY0EseUJBQUFBLGdCQUNGQSxtQkFDQUE7UUFsQmpDLE9BQU87WUFDTHZHLElBQUl1RyxFQUFBQSxhQUFBQSxPQUFPdkcsRUFBRSxjQUFUdUcsaUNBQUFBLFdBQVdDLFdBQVcsS0FBSUQsT0FBT3ZHLEVBQUUsSUFBSTtZQUMzQ08sTUFBTWdHLEVBQUFBLGVBQUFBLE9BQU9oRyxJQUFJLGNBQVhnRyxtQ0FBQUEsYUFBYUMsV0FBVyxLQUFJRCxPQUFPaEcsSUFBSSxJQUFJO1lBQ2pEK0QsVUFBVSxJQUFJLENBQUNtQyxxQkFBcUIsQ0FBQ0YsRUFBQUEsbUJBQUFBLE9BQU9qQyxRQUFRLGNBQWZpQyx3Q0FBQUEsNEJBQUFBLGlCQUFpQkcsUUFBUSxjQUF6QkgsZ0RBQUFBLDBCQUEyQkEsTUFBTSxLQUFJQSxPQUFPakMsUUFBUSxJQUFJLENBQUM7WUFDOUZTLGtCQUFrQixJQUFJLENBQUM0QixjQUFjLENBQUNKLE9BQU94QixnQkFBZ0I7WUFDN0RDLG9CQUFvQixJQUFJLENBQUMyQixjQUFjLENBQUNKLE9BQU92QixrQkFBa0I7WUFDakVDLE1BQU0sQ0FBQ3NCLEVBQUFBLGVBQUFBLE9BQU90QixJQUFJLGNBQVhzQixvQ0FBQUEsMEJBQUFBLGFBQWFLLFVBQVUsY0FBdkJMLDhDQUFBQSx3QkFBeUJNLE1BQU0sS0FBSU4sT0FBT3RCLElBQUksSUFBSSxFQUFFLEVBQUUvRSxHQUFHLENBQUMsU0FBQzRHO3VCQUFhQSxJQUFJTixXQUFXLElBQUlNOztZQUNsRzlGLGFBQWF1RixFQUFBQSxzQkFBQUEsT0FBT3ZGLFdBQVcsY0FBbEJ1RiwwQ0FBQUEsb0JBQW9CQyxXQUFXLEtBQUlELE9BQU92RixXQUFXLElBQUk7WUFDdEVrRSxZQUFZLENBQUNxQixFQUFBQSxxQkFBQUEsT0FBT3JCLFVBQVUsY0FBakJxQiwwQ0FBQUEsZ0NBQUFBLG1CQUFtQkssVUFBVSxjQUE3Qkwsb0RBQUFBLDhCQUErQk0sTUFBTSxLQUFJTixPQUFPckIsVUFBVSxJQUFJLEVBQUUsRUFBRWhGLEdBQUcsQ0FBQyxTQUFDbUQ7dUJBQVdBLEVBQUVtRCxXQUFXLElBQUluRDs7WUFDaEg4QixPQUFPLENBQUNvQixFQUFBQSxnQkFBQUEsT0FBT3BCLEtBQUssY0FBWm9CLHFDQUFBQSwyQkFBQUEsY0FBY0ssVUFBVSxjQUF4QkwsK0NBQUFBLHlCQUEwQk0sTUFBTSxLQUFJTixPQUFPcEIsS0FBSyxJQUFJLEVBQUUsRUFBRWpGLEdBQUcsQ0FBQyxTQUFDNkc7dUJBQWNBLEtBQUtQLFdBQVcsSUFBSU87O1lBQ3ZHM0IsUUFBUSxJQUFJLENBQUM0QixXQUFXLENBQUNULE9BQU9uQixNQUFNO1lBQ3RDQyxzQkFBc0JLLFNBQVNhLEVBQUFBLCtCQUFBQSxPQUFPbEIsb0JBQW9CLGNBQTNCa0IsbURBQUFBLDZCQUE2QlUsWUFBWSxLQUFJVixPQUFPbEIsb0JBQW9CLElBQUk7WUFDM0daLE1BQU04QixFQUFBQSxlQUFBQSxPQUFPOUIsSUFBSSxjQUFYOEIsbUNBQUFBLGFBQWFDLFdBQVcsS0FBSUQsT0FBTzlCLElBQUksSUFBSTtZQUNqREMsTUFBTWdCLFNBQVNhLEVBQUFBLGVBQUFBLE9BQU83QixJQUFJLGNBQVg2QixtQ0FBQUEsYUFBYVUsWUFBWSxLQUFJVixPQUFPN0IsSUFBSSxJQUFJO1lBQzNEQyxRQUFRZ0IsV0FBV1ksRUFBQUEsaUJBQUFBLE9BQU81QixNQUFNLGNBQWI0QixxQ0FBQUEsZUFBZVcsV0FBVyxLQUFJWCxPQUFPNUIsTUFBTSxJQUFJO1lBRWxFakQsUUFBUSxJQUFJLENBQUN5RixtQkFBbUIsQ0FBQ1osRUFBQUEsaUJBQUFBLE9BQU83RSxNQUFNLGNBQWI2RSxzQ0FBQUEsMEJBQUFBLGVBQWVHLFFBQVEsY0FBdkJILDhDQUFBQSx3QkFBeUJBLE1BQU0sS0FBSUEsT0FBTzdFLE1BQU0sSUFBSSxDQUFDO1lBQ3RGQyxXQUFXLElBQUlKLEtBQUtvRSxXQUFXWSxFQUFBQSxvQkFBQUEsT0FBTzVFLFNBQVMsY0FBaEI0RSx3Q0FBQUEsa0JBQWtCVyxXQUFXLEtBQUlYLE9BQU81RSxTQUFTLElBQUksT0FBTztZQUMzRkMsV0FBVyxJQUFJTCxLQUFLb0UsV0FBV1ksRUFBQUEsb0JBQUFBLE9BQU8zRSxTQUFTLGNBQWhCMkUsd0NBQUFBLGtCQUFrQlcsV0FBVyxLQUFJWCxPQUFPM0UsU0FBUyxJQUFJLE9BQU87UUFDN0Y7SUFDRjtJQUVBLHdEQUF3RDtJQUN4RCxPQUFRNkUscUJBMEJQLEdBMUJELFNBQVFBLHNCQUFzQkYsTUFBVztZQUVwQkE7UUFEbkIsaURBQWlEO1FBQ2pELElBQU1hLGFBQWFiLEVBQUFBLGFBQUFBLE9BQU92RyxFQUFFLGNBQVR1RyxpQ0FBQUEsV0FBV0MsV0FBVyxLQUFJRCxPQUFPdkcsRUFBRSxJQUFJO1FBQzFELElBQUlvSCxlQUFlLFVBQVU7Z0JBSUpiLGtCQUNMQSxhQUNLQSxrQkFDRUEsb0JBQ2tCQSxnQ0FBQUE7WUFQM0MsT0FBTztnQkFDTGhDLE1BQU07Z0JBQ05DLFNBQVM7b0JBQ1B2RCxVQUFVeUUsU0FBU2EsRUFBQUEsbUJBQUFBLE9BQU90RixRQUFRLGNBQWZzRix1Q0FBQUEsaUJBQWlCVSxZQUFZLEtBQUlWLE9BQU90RixRQUFRLElBQUk7b0JBQ3ZFZ0YsS0FBS1AsU0FBU2EsRUFBQUEsY0FBQUEsT0FBT04sR0FBRyxjQUFWTSxrQ0FBQUEsWUFBWVUsWUFBWSxLQUFJVixPQUFPTixHQUFHLElBQUk7b0JBQ3hERCxVQUFVTixTQUFTYSxFQUFBQSxtQkFBQUEsT0FBT1AsUUFBUSxjQUFmTyx1Q0FBQUEsaUJBQWlCVSxZQUFZLEtBQUlWLE9BQU9QLFFBQVEsSUFBSTtvQkFDdkVwQixZQUFZYyxTQUFTYSxFQUFBQSxxQkFBQUEsT0FBTzNCLFVBQVUsY0FBakIyQix5Q0FBQUEsbUJBQW1CVSxZQUFZLEtBQUlWLE9BQU8zQixVQUFVLElBQUk7b0JBQzdFQyxlQUFlLElBQUksQ0FBQ0Msa0JBQWtCLENBQUN5QixFQUFBQSx3QkFBQUEsT0FBTzFCLGFBQWEsY0FBcEIwQiw2Q0FBQUEsaUNBQUFBLHNCQUFzQkcsUUFBUSxjQUE5QkgscURBQUFBLCtCQUFnQ0EsTUFBTSxLQUFJQSxPQUFPMUIsYUFBYTtnQkFDdkc7WUFDRjtRQUNGLE9BQU87Z0JBSUswQixjQUNTQSxjQUNJQSxnQkFDRUEscUJBQ2tCQSxpQ0FBQUE7WUFQM0MsT0FBTztnQkFDTGhDLE1BQU07Z0JBQ05DLFNBQVM7b0JBQ1BDLE1BQU04QixFQUFBQSxlQUFBQSxPQUFPOUIsSUFBSSxjQUFYOEIsbUNBQUFBLGFBQWFDLFdBQVcsS0FBSUQsT0FBTzlCLElBQUksSUFBSTtvQkFDakRDLE1BQU1nQixTQUFTYSxFQUFBQSxlQUFBQSxPQUFPN0IsSUFBSSxjQUFYNkIsbUNBQUFBLGFBQWFVLFlBQVksS0FBSVYsT0FBTzdCLElBQUksSUFBSTtvQkFDM0RDLFFBQVFnQixXQUFXWSxFQUFBQSxpQkFBQUEsT0FBTzVCLE1BQU0sY0FBYjRCLHFDQUFBQSxlQUFlVyxXQUFXLEtBQUlYLE9BQU81QixNQUFNLElBQUk7b0JBQ2xFQyxZQUFZYyxTQUFTYSxFQUFBQSxzQkFBQUEsT0FBTzNCLFVBQVUsY0FBakIyQiwwQ0FBQUEsb0JBQW1CVSxZQUFZLEtBQUlWLE9BQU8zQixVQUFVLElBQUk7b0JBQzdFQyxlQUFlLElBQUksQ0FBQ0Msa0JBQWtCLENBQUN5QixFQUFBQSx5QkFBQUEsT0FBTzFCLGFBQWEsY0FBcEIwQiw4Q0FBQUEsa0NBQUFBLHVCQUFzQkcsUUFBUSxjQUE5Qkgsc0RBQUFBLGdDQUFnQ0EsTUFBTSxLQUFJQSxPQUFPMUIsYUFBYTtnQkFDdkc7WUFDRjtRQUNGO0lBQ0Y7SUFFQSxPQUFROEIsY0FHUCxHQUhELFNBQVFBLGVBQWVVLGNBQW1CO1lBQ2pCQTtRQUF2QixJQUFNQyxpQkFBaUJELENBQUFBLDJCQUFBQSxzQ0FBQUEsNkJBQUFBLGVBQWdCVCxVQUFVLGNBQTFCUyxpREFBQUEsMkJBQTRCUixNQUFNLEtBQUlRLGtCQUFrQixFQUFFO1FBQ2pGLE9BQU9DLGVBQWVwSCxHQUFHLENBQUMsU0FBQ3FIO21CQUFjQSxLQUFLZixXQUFXLElBQUllOztJQUMvRDtJQUVBLE9BQVFQLFdBS1AsR0FMRCxTQUFRQSxZQUFZUSxXQUFnQjs7WUFDZEE7UUFBcEIsSUFBTUMsY0FBY0QsQ0FBQUEsd0JBQUFBLG1DQUFBQSwwQkFBQUEsWUFBYVosVUFBVSxjQUF2QlksOENBQUFBLHdCQUF5QlgsTUFBTSxLQUFJVyxlQUFlLEVBQUU7UUFDeEUsT0FBT0MsWUFBWXZILEdBQUcsQ0FBQyxTQUFDd0g7Z0JBQ0VBO21CQUF4QixNQUFLNUMsa0JBQWtCLENBQUM0QyxFQUFBQSxzQkFBQUEsVUFBVWhCLFFBQVEsY0FBbEJnQiwwQ0FBQUEsb0JBQW9CbkIsTUFBTSxLQUFJbUI7O0lBRTFEO0lBRUEsT0FBUTVDLGtCQXdCUCxHQXhCRCxTQUFRQSxtQkFBbUJ5QixNQUFXO1lBRTlCQSxZQUNRQSxvQkFDRkEsa0JBQ0ZBLGdCQUNFQSxrQkFDQUEsa0JBQ0FBLGtCQUMyQkEsK0JBQUFBLHNCQUM1QkEsaUJBQ0RBLGdCQUNHQSxtQkFDQ0Esb0JBQ21CQSw4QkFDSEEsMkJBQ0tBLGdDQUNMQSwyQkFDaEJBLG9CQUNMQSxlQUNLQSxvQkFDbUJBLG1CQUNBQTtRQXJCakMsT0FBTztZQUNMdkcsSUFBSXVHLEVBQUFBLGFBQUFBLE9BQU92RyxFQUFFLGNBQVR1RyxpQ0FBQUEsV0FBV0MsV0FBVyxLQUFJRCxPQUFPdkcsRUFBRSxJQUFJO1lBQzNDMkgsWUFBWXBCLEVBQUFBLHFCQUFBQSxPQUFPb0IsVUFBVSxjQUFqQnBCLHlDQUFBQSxtQkFBbUJDLFdBQVcsS0FBSUQsT0FBT29CLFVBQVUsSUFBSTtZQUNuRXJDLFVBQVVpQixFQUFBQSxtQkFBQUEsT0FBT2pCLFFBQVEsY0FBZmlCLHVDQUFBQSxpQkFBaUJDLFdBQVcsS0FBSUQsT0FBT2pCLFFBQVEsSUFBSTtZQUM3RDNHLFFBQVE0SCxFQUFBQSxpQkFBQUEsT0FBTzVILE1BQU0sY0FBYjRILHFDQUFBQSxlQUFlQyxXQUFXLEtBQUlELE9BQU81SCxNQUFNLElBQUk7WUFDdkRpSixVQUFVckIsRUFBQUEsbUJBQUFBLE9BQU9xQixRQUFRLGNBQWZyQix1Q0FBQUEsaUJBQWlCQyxXQUFXLEtBQUlELE9BQU9xQixRQUFRLElBQUk7WUFDN0RDLFVBQVV0QixFQUFBQSxtQkFBQUEsT0FBT3NCLFFBQVEsY0FBZnRCLHVDQUFBQSxpQkFBaUJDLFdBQVcsS0FBSUQsT0FBT3NCLFFBQVEsSUFBSTtZQUM3RHJILFVBQVUrRixFQUFBQSxtQkFBQUEsT0FBTy9GLFFBQVEsY0FBZitGLHVDQUFBQSxpQkFBaUJDLFdBQVcsS0FBSUQsT0FBTy9GLFFBQVEsSUFBSTtZQUM3RHNILGNBQWMsSUFBSSxDQUFDQyxpQkFBaUIsQ0FBQ3hCLEVBQUFBLHVCQUFBQSxPQUFPdUIsWUFBWSxjQUFuQnZCLDRDQUFBQSxnQ0FBQUEscUJBQXFCRyxRQUFRLGNBQTdCSCxvREFBQUEsOEJBQStCQSxNQUFNLEtBQUlBLE9BQU91QixZQUFZLElBQUksQ0FBQztZQUN0R0UsU0FBU3pCLEVBQUFBLGtCQUFBQSxPQUFPeUIsT0FBTyxjQUFkekIsc0NBQUFBLGdCQUFnQkMsV0FBVyxLQUFJRCxPQUFPeUIsT0FBTyxJQUFJO1lBQzFEQyxRQUFRMUIsRUFBQUEsaUJBQUFBLE9BQU8wQixNQUFNLGNBQWIxQixxQ0FBQUEsZUFBZUMsV0FBVyxLQUFJRCxPQUFPMEIsTUFBTSxJQUFJO1lBQ3ZEQyxXQUFXM0IsRUFBQUEsb0JBQUFBLE9BQU8yQixTQUFTLGNBQWhCM0Isd0NBQUFBLGtCQUFrQkMsV0FBVyxLQUFJRCxPQUFPMkIsU0FBUyxJQUFJO1lBQ2hFaEQsWUFBWXFCLEVBQUFBLHFCQUFBQSxPQUFPckIsVUFBVSxjQUFqQnFCLHlDQUFBQSxtQkFBbUJDLFdBQVcsS0FBSUQsT0FBT3JCLFVBQVUsSUFBSTtZQUNuRWlELHNCQUFzQnpDLFNBQVNhLEVBQUFBLCtCQUFBQSxPQUFPNEIsb0JBQW9CLGNBQTNCNUIsbURBQUFBLDZCQUE2QlUsWUFBWSxLQUFJVixPQUFPNEIsb0JBQW9CLElBQUk7WUFDM0dDLG1CQUFtQjFDLFNBQVNhLEVBQUFBLDRCQUFBQSxPQUFPNkIsaUJBQWlCLGNBQXhCN0IsZ0RBQUFBLDBCQUEwQlUsWUFBWSxLQUFJVixPQUFPNkIsaUJBQWlCLElBQUk7WUFDbEdDLHdCQUF3QjNDLFNBQVNhLEVBQUFBLGlDQUFBQSxPQUFPOEIsc0JBQXNCLGNBQTdCOUIscURBQUFBLCtCQUErQlUsWUFBWSxLQUFJVixPQUFPOEIsc0JBQXNCLElBQUk7WUFDakhDLG1CQUFtQjVDLFNBQVNhLEVBQUFBLDRCQUFBQSxPQUFPK0IsaUJBQWlCLGNBQXhCL0IsZ0RBQUFBLDBCQUEwQlUsWUFBWSxLQUFJVixPQUFPK0IsaUJBQWlCLElBQUk7WUFDbEdDLFlBQVloQyxFQUFBQSxxQkFBQUEsT0FBT2dDLFVBQVUsY0FBakJoQyx5Q0FBQUEsbUJBQW1CaUMsWUFBWSxLQUFJakMsT0FBT2dDLFVBQVUsSUFBSTtZQUNwRUUsT0FBT2xDLEVBQUFBLGdCQUFBQSxPQUFPa0MsS0FBSyxjQUFabEMsb0NBQUFBLGNBQWNpQyxZQUFZLEtBQUlqQyxPQUFPa0MsS0FBSztZQUNqREMsWUFBWW5DLEVBQUFBLHFCQUFBQSxPQUFPbUMsVUFBVSxjQUFqQm5DLHlDQUFBQSxtQkFBbUJpQyxZQUFZLEtBQUlqQyxPQUFPbUMsVUFBVTtZQUNoRS9HLFdBQVcsSUFBSUosS0FBS29FLFdBQVdZLEVBQUFBLG9CQUFBQSxPQUFPNUUsU0FBUyxjQUFoQjRFLHdDQUFBQSxrQkFBa0JXLFdBQVcsS0FBSVgsT0FBTzVFLFNBQVMsSUFBSSxPQUFPO1lBQzNGQyxXQUFXLElBQUlMLEtBQUtvRSxXQUFXWSxFQUFBQSxvQkFBQUEsT0FBTzNFLFNBQVMsY0FBaEIyRSx3Q0FBQUEsa0JBQWtCVyxXQUFXLEtBQUlYLE9BQU8zRSxTQUFTLElBQUksT0FBTztRQUM3RjtJQUNGO0lBRUEsT0FBUW1HLGlCQU1QLEdBTkQsU0FBUUEsa0JBQWtCeEIsTUFBVztZQUVoQkEseUJBQ1lBLDBCQUNDQTtRQUhoQyxPQUFPO1lBQ0xvQyxpQkFBaUJwQyxFQUFBQSwwQkFBQUEsT0FBT29DLGVBQWUsY0FBdEJwQyw4Q0FBQUEsd0JBQXdCQyxXQUFXLEtBQUlELE9BQU9vQyxlQUFlLElBQUk7WUFDbEZDLGtCQUFrQmpELFdBQVdZLEVBQUFBLDJCQUFBQSxPQUFPcUMsZ0JBQWdCLGNBQXZCckMsK0NBQUFBLHlCQUF5QlcsV0FBVyxLQUFJWCxPQUFPcUMsZ0JBQWdCLElBQUk7WUFDaEdDLG1CQUFtQmxELFdBQVdZLEVBQUFBLDRCQUFBQSxPQUFPc0MsaUJBQWlCLGNBQXhCdEMsZ0RBQUFBLDBCQUEwQlcsV0FBVyxLQUFJWCxPQUFPc0MsaUJBQWlCLElBQUk7UUFDckc7SUFDRjtJQUVBLE9BQVExQixtQkFLUCxHQUxELFNBQVFBLG9CQUFvQlosTUFBVztZQUUzQkEsZ0JBQ0VBO1FBRlosT0FBTztZQUNMNUgsUUFBUTRILEVBQUFBLGlCQUFBQSxPQUFPNUgsTUFBTSxjQUFiNEgscUNBQUFBLGVBQWVDLFdBQVcsS0FBSUQsT0FBTzVILE1BQU0sSUFBSTtZQUN2RDJHLFVBQVVpQixFQUFBQSxtQkFBQUEsT0FBT2pCLFFBQVEsY0FBZmlCLHVDQUFBQSxpQkFBaUJDLFdBQVcsS0FBSUQsT0FBT2pCLFFBQVEsSUFBSTtRQUMvRDtJQUNGO0lBRUEsT0FBTTFCLGlCQTJETCxHQTNERCxTQUFNQSxrQkFBa0JqRixNQUFjLEVBQUVXLFNBQWlCOztlQUF6RDtnQkFHVXdKLFlBQ0FDLGFBT0E5SixxQkFDQUksYUFHQUUsaUJBU0FULFNBR0FVLFNBQ0FDLGNBRUFxQixNQXlCQ3BCOzs7Ozs7Ozs7O3dCQXJEUCw2QkFBNkI7d0JBQ3ZCb0osYUFBYWpNLHVEQUFHQSxDQUFDVSx1Q0FBRUEsRUFBRSxTQUFTb0IsUUFBUSxxQkFBcUJXO3dCQUM3Qzs7NEJBQU12QywwREFBTUEsQ0FBQytMOzs7d0JBQTNCQyxjQUFjO3dCQUVwQixJQUFJLENBQUNBLFlBQVlDLE1BQU0sSUFBSTs0QkFDekI7OztvQ0FBUTtvQ0FBTTs7O3dCQUNoQjt3QkFHNEI7OzRCQUFNLE1BQUtuSiw4QkFBOEI7Ozt3QkFBL0RaLHNCQUFzQjt3QkFDdEJJLGNBQWMwSixZQUFZaEosSUFBSTt3QkFFcEMsNEVBQTRFO3dCQUN0RVIsa0JBQWtCLENBQUNGLFlBQVlZLFNBQVMsTUFBSyxFQUFHQyxHQUFHLENBQUMsU0FBQ0M7NEJBQ3pELElBQU1DLGVBQWVuQixvQkFBb0JvQixJQUFJLENBQUNDLFNBQUFBO3VDQUFNQSxHQUFHQyxJQUFJLEtBQUtKLFlBQVlLLFFBQVEsQ0FBQ0QsSUFBSTs7NEJBQ3pGLE9BQU8sd0lBQ0ZKO2dDQUNISyxVQUFVSixnQkFBZ0JELFlBQVlLLFFBQVE7O3dCQUVsRDt3QkFFQW5CLFlBQVlZLFNBQVMsR0FBR1Y7d0JBQ2xCVCxVQUFVLE1BQUtnRixnQkFBZ0IsQ0FBQ3pFO3dCQUV0QyxhQUFhO3dCQUNQRyxVQUFVNUMsOERBQVVBLENBQUNrTSxZQUFZO3dCQUNsQjs7NEJBQU1oTSwyREFBT0EsQ0FBQzBDOzs7d0JBQTdCQyxlQUFlO3dCQUVmcUIsT0FBc0JyQixhQUFhSyxJQUFJLENBQUNJLEdBQUcsQ0FBQzRCLFNBQUFBOzRCQUNoRCxJQUFNbUgsVUFBVW5ILE9BQU8vQixJQUFJOzRCQUMzQixJQUFNSyxlQUFlbkIsb0JBQW9Cb0IsSUFBSSxDQUFDQyxTQUFBQTt1Q0FBTUEsR0FBR0MsSUFBSSxLQUFLMEksUUFBUXpJLFFBQVEsQ0FBQ0QsSUFBSTs7NEJBRXJGLE9BQU87Z0NBQ0xQLElBQUk4QixPQUFPOUIsRUFBRTtnQ0FDYlYsV0FBV0E7Z0NBQ1hYLFFBQVFBO2dDQUNSNkIsVUFBVUosZ0JBQWdCNkksUUFBUXpJLFFBQVE7Z0NBQzFDTSxNQUFNbUksUUFBUXZJLEdBQUcsSUFBSSxFQUFFO2dDQUN2QndGLFVBQVUrQyxRQUFRL0MsUUFBUSxJQUFJO2dDQUM5QkMsTUFBTThDLFFBQVE5QyxJQUFJLElBQUk7Z0NBQ3RCQyxtQkFBbUI2QyxRQUFRN0MsaUJBQWlCO2dDQUM1Q04sU0FBU21ELFFBQVFuRCxPQUFPLElBQUk7Z0NBQzVCQyxjQUFja0QsUUFBUWxELFlBQVksSUFBSTtnQ0FDdENNLGNBQWM0QyxRQUFRNUMsWUFBWSxJQUFJO2dDQUN0Q0MsY0FBYzJDLFFBQVEzQyxZQUFZLElBQUk7Z0NBQ3RDbEYsYUFBYTZILFFBQVE3SCxXQUFXLElBQUk7Z0NBQ3BDTyxXQUFXdkQsNEVBQXlCQSxDQUFDNkssUUFBUXRILFNBQVM7Z0NBQ3REQyxXQUFXeEQsNEVBQXlCQSxDQUFDNkssUUFBUXJILFNBQVM7NEJBQ3hEO3dCQUNGO3dCQUVBOUMsUUFBUWdDLElBQUksR0FBR0E7d0JBQ2Y7OztnQ0FBUWhDO2dDQUFTZ0M7Ozs7d0JBQ1ZwQjt3QkFDUGUsUUFBUWYsS0FBSyxDQUFDLGlDQUFpQ0E7d0JBQy9DOzs7Z0NBQVE7Z0NBQU07Ozs7Ozs7OztRQUVsQjs7SUFFQTs7Ozs7Q0FLQyxHQUNELE9BQU13SixnQ0FrREwsR0FsREQsU0FBTUEsaUNBQWlDaEgsV0FBbUI7ZUFBMUQ7Z0JBQ1FDLG1CQUNBQyxHQUtFQyxVQUlBQyxnQkFtQ0M1Qzs7Ozt3QkE3Q0h5QyxvQkFBb0J2Riw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUU7d0JBQ25DNkUsSUFBSXBGLHlEQUFLQSxDQUFDbUYsbUJBQW1CbEYseURBQUtBLENBQUMsZUFBZSxNQUFNaUY7Ozs7Ozs7Ozt3QkFLM0M7OzRCQUFNcEYsMkRBQU9BLENBQUNzRjs7O3dCQUF6QkMsV0FBVzt3QkFFakIseUVBQXlFO3dCQUVuRUMsaUJBQWlCRCxTQUFTdkMsSUFBSSxDQUFDSSxHQUFHLENBQUMsU0FBQ3JEOzRCQUN4QyxJQUFNa0QsT0FBT2xELElBQUlrRCxJQUFJOzRCQUNyQixxRUFBcUU7NEJBRXJFLE9BQU87Z0NBQ0xDLElBQUluRCxJQUFJbUQsRUFBRTsrQkFDUEQ7Z0NBQ0hjLFdBQVdkLEtBQUtjLFNBQVMsR0FDckIsSUFBSXhDLHFEQUFTQSxDQUFDO29DQUNaMkIsSUFBSUQsS0FBS2MsU0FBUyxDQUFDYixFQUFFO29DQUNyQmUsT0FBT2hCLEtBQUtjLFNBQVMsQ0FBQ0UsS0FBSztvQ0FDM0JnQyxVQUFVaEQsS0FBS2MsU0FBUyxDQUFDa0MsUUFBUTtvQ0FDakNDLGNBQWNqRCxLQUFLYyxTQUFTLENBQUNtQyxZQUFZLElBQUksRUFBRTtvQ0FDL0NDLFFBQVFsRCxLQUFLYyxTQUFTLENBQUNvQyxNQUFNO29DQUM3QkMsV0FBV25ELEtBQUtjLFNBQVMsQ0FBQ3FDLFNBQVMsR0FBRyxJQUFJM0IsS0FBS3hCLEtBQUtjLFNBQVMsQ0FBQ3FDLFNBQVMsSUFBSSxJQUFJM0I7b0NBQy9FNEIsU0FBU3BELEtBQUtjLFNBQVMsQ0FBQ3NDLE9BQU8sR0FBRyxJQUFJNUIsS0FBS3hCLEtBQUtjLFNBQVMsQ0FBQ3NDLE9BQU8sSUFBSSxJQUFJNUI7b0NBQ3pFSSxXQUFXNUIsS0FBS2MsU0FBUyxDQUFDYyxTQUFTLEdBQUcsSUFBSUosS0FBS3hCLEtBQUtjLFNBQVMsQ0FBQ2MsU0FBUyxJQUFJLElBQUlKO29DQUMvRUssV0FBVzdCLEtBQUtjLFNBQVMsQ0FBQ2UsU0FBUyxHQUFHLElBQUlMLEtBQUt4QixLQUFLYyxTQUFTLENBQUNlLFNBQVMsSUFBSSxJQUFJTDtvQ0FDL0U2QixhQUFhLENBQUNyRCxLQUFLYyxTQUFTLENBQUN1QyxXQUFXLElBQUksRUFBRSxFQUFFbEQsR0FBRyxDQUFDLFNBQUNtRDsrQ0FDbkQsSUFBSXZGLHNEQUFVQSxDQUFDOzRDQUNia0MsSUFBSXFELEVBQUVyRCxFQUFFOzRDQUNSckIsUUFBUTBFLEVBQUUxRSxNQUFNOzRDQUNoQjJFLFVBQVVELEVBQUVDLFFBQVE7d0NBQ3RCOztnQ0FFSixLQUNBOUI7Z0NBQ0pHLFdBQVd6RCxrRUFBZ0JBLENBQUM2QixLQUFLNEIsU0FBUztnQ0FDMUNDLFdBQVcxRCxrRUFBZ0JBLENBQUM2QixLQUFLNkIsU0FBUzs7d0JBRTlDO3dCQUVBLGlHQUFpRzt3QkFFakc7OzRCQUFPVTs7O3dCQUNBNUM7d0JBQ1BlLFFBQVFmLEtBQUssQ0FBQyxrREFBa0RBO3dCQUNoRSxNQUFNQTs7Ozs7OztRQUVWOztJQUVBLE9BQU1nRSxpQkFpQkwsR0FqQkQsU0FBTUEsa0JBQWtCMUQsRUFBVTtlQUFsQztnQkFHVW1KLFFBQ0FDLFNBU0MxSjs7Ozt3QkFaVGUsUUFBUUMsR0FBRyxDQUFDLGdDQUFnQ1Y7Ozs7Ozs7Ozt3QkFFcENtSixTQUFTdE0sdURBQUdBLENBQUNVLHVDQUFFQSxFQUFFLHdCQUF3QnlDO3dCQUMvQjs7NEJBQU1qRCwwREFBTUEsQ0FBQ29NOzs7d0JBQXZCQyxVQUFVO3dCQUNoQixJQUFJQSxRQUFRSixNQUFNLElBQUk7NEJBQ3BCOztnQ0FBTyxJQUFJaEwsK0RBQW1CQSxDQUFDO29DQUM3QmdDLElBQUlvSixRQUFRcEosRUFBRTttQ0FDWG9KLFFBQVFySixJQUFJOzt3QkFFbkIsT0FBTzs0QkFDTCxNQUFNLElBQUlILE1BQU07d0JBQ2xCOzs7Ozs7d0JBQ09GO3dCQUNQZSxRQUFRZixLQUFLLENBQUMsbUNBQW1DQTt3QkFDakQsTUFBTUE7Ozs7Ozs7UUFFVjs7SUFHSTs7OztHQUlELEdBQ0MsT0FBTTJKLHFCQXlFTCxHQXpFRCxTQUFNQTtlQUFOO2dCQUNRM0csYUFLQVAsbUJBQ0FDLEdBS0VDLFVBSUFpSCxlQXdDQUMsa0JBYUM3Sjs7Ozt3QkFwRUhnRCxjQUFjbEYsOENBQVdBLENBQUNrRixXQUFXO3dCQUMzQyxJQUFJLEVBQUNBLHdCQUFBQSxrQ0FBQUEsWUFBYTFDLEVBQUUsR0FBRTs0QkFDcEIsTUFBTSxJQUFJSixNQUFNO3dCQUNsQjt3QkFFTXVDLG9CQUFvQnZGLDhEQUFVQSxDQUFDVyx1Q0FBRUEsRUFBRTt3QkFDbkM2RSxJQUFJcEYseURBQUtBLENBQUNtRixtQkFBbUJsRix5REFBS0EsQ0FBQyxVQUFVLE1BQU15RixZQUFZMUMsRUFBRTs7Ozs7Ozs7O3dCQUtwRDs7NEJBQU1sRCwyREFBT0EsQ0FBQ3NGOzs7d0JBQXpCQyxXQUFXO3dCQUVqQixvRUFBb0U7d0JBRTlEaUgsZ0JBQWdCakgsU0FBU3ZDLElBQUksQ0FBQ0ksR0FBRyxDQUFDLFNBQUNyRDs0QkFDdkMsSUFBTWtELE9BQU9sRCxJQUFJa0QsSUFBSTs0QkFDckIsZ0VBQWdFOzRCQUVoRSw0REFBNEQ7NEJBQzVELDZGQUE2Rjs0QkFFN0YsSUFBTWMsWUFBWWQsS0FBS2MsU0FBUyxHQUM1QixJQUFJeEMscURBQVNBLENBQUM7Z0NBQ1oyQixJQUFJRCxLQUFLYyxTQUFTLENBQUNiLEVBQUU7Z0NBQ3JCZSxPQUFPaEIsS0FBS2MsU0FBUyxDQUFDRSxLQUFLO2dDQUMzQmdDLFVBQVVoRCxLQUFLYyxTQUFTLENBQUNrQyxRQUFRO2dDQUNqQ0MsY0FBY2pELEtBQUtjLFNBQVMsQ0FBQ21DLFlBQVksSUFBSSxFQUFFO2dDQUMvQ0MsUUFBUWxELEtBQUtjLFNBQVMsQ0FBQ29DLE1BQU07Z0NBQzdCQyxXQUFXOUUsNEVBQXlCQSxDQUFDMkIsS0FBS2MsU0FBUyxDQUFDcUMsU0FBUztnQ0FDN0RDLFNBQVMvRSw0RUFBeUJBLENBQUMyQixLQUFLYyxTQUFTLENBQUNzQyxPQUFPO2dDQUN6RHhCLFdBQVd2RCw0RUFBeUJBLENBQUMyQixLQUFLYyxTQUFTLENBQUNjLFNBQVM7Z0NBQzdEQyxXQUFXeEQsNEVBQXlCQSxDQUFDMkIsS0FBS2MsU0FBUyxDQUFDZSxTQUFTO2dDQUM3RHdCLGFBQWEsQ0FBQ3JELEtBQUtjLFNBQVMsQ0FBQ3VDLFdBQVcsSUFBSSxFQUFFLEVBQUVsRCxHQUFHLENBQUMsU0FBQ21EOzJDQUNuRCxJQUFJdkYsc0RBQVVBLENBQUM7d0NBQ2JrQyxJQUFJcUQsRUFBRXJELEVBQUU7d0NBQ1JyQixRQUFRMEUsRUFBRTFFLE1BQU07d0NBQ2hCMkUsVUFBVUQsRUFBRUMsUUFBUTtvQ0FDdEI7OzRCQUVKLEtBQ0E5Qjs0QkFFSixPQUFPO2dDQUNMeEIsSUFBSW5ELElBQUltRCxFQUFFOytCQUNQRDtnQ0FDSGMsV0FBQUE7Z0NBQ0FjLFdBQVd2RCw0RUFBeUJBLENBQUMyQixLQUFLNEIsU0FBUztnQ0FDbkRDLFdBQVd4RCw0RUFBeUJBLENBQUMyQixLQUFLNkIsU0FBUzs7d0JBRXZEO3dCQUVBLDJGQUEyRjt3QkFFM0Ysd0RBQXdEO3dCQUNsRDJILG1CQUFtQkQsY0FBY0UsTUFBTSxDQUFDQyxTQUFBQTtnQ0FDNUJBOzRCQUFoQixJQUFNdEcsV0FBVXNHLDJCQUFBQSxjQUFjNUksU0FBUyxjQUF2QjRJLCtDQUFBQSx5QkFBeUJ0RyxPQUFPOzRCQUVoRCxlQUFlOzRCQUNmLHNHQUFzRzs0QkFDdEcsS0FBSzs0QkFFTCxPQUFPQSxXQUFXQSxVQUFVLElBQUk1Qjt3QkFDbEM7d0JBRUEsd0ZBQXdGO3dCQUV4Rjs7NEJBQU9nSTs7O3dCQUNBN0o7d0JBQ1BlLFFBQVFmLEtBQUssQ0FBQyxxQ0FBcUNBO3dCQUNuRCxNQUFNQTs7Ozs7OztRQUVWOztJQUdGOzs7O0dBSUMsR0FDRCxPQUFNZ0ssbUJBd0JMLEdBeEJELFNBQU1BO2VBQU47Z0JBQ1FoSCxhQU1BUCxtQkFHQUMsR0FHRUMsVUFPQzNDOzs7O3dCQW5CSGdELGNBQWNsRiw4Q0FBV0EsQ0FBQ2tGLFdBQVc7d0JBQzNDLElBQUksRUFBQ0Esd0JBQUFBLGtDQUFBQSxZQUFhMUMsRUFBRSxHQUFFOzRCQUNwQixNQUFNLElBQUlKLE1BQU07d0JBQ2xCO3dCQUVBLDZDQUE2Qzt3QkFDdkN1QyxvQkFBb0J2Riw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUU7d0JBRXpDLDhEQUE4RDt3QkFDeEQ2RSxJQUFJcEYseURBQUtBLENBQUNtRixtQkFBbUJsRix5REFBS0EsQ0FBQyxVQUFVLE1BQU15RixZQUFZMUMsRUFBRTs7Ozs7Ozs7O3dCQUdwRDs7NEJBQU1sRCwyREFBT0EsQ0FBQ3NGOzs7d0JBQXpCQyxXQUFXO3dCQUVqQixpREFBaUQ7d0JBQ2pEOzs0QkFBT0EsU0FBU3ZDLElBQUksQ0FBQ0ksR0FBRyxDQUFDLFNBQUNyRDt1Q0FBdUI7b0NBQy9DbUQsSUFBSW5ELElBQUltRCxFQUFFO21DQUNQbkQsSUFBSWtELElBQUk7Ozs7d0JBRU5MO3dCQUNQZSxRQUFRZixLQUFLLENBQUMsbUNBQW1DQTt3QkFDakQsTUFBTSxJQUFJRSxNQUFNOzs7Ozs7O1FBRXBCOztJQUVBLDZCQUE2QjtJQUM3QixPQUFNK0osb0JBK0NMLEdBL0NELFNBQU1BLHFCQUFxQixLQVExQjtZQVBDaEwsU0FEeUIsTUFDekJBLFFBQ0FXLFlBRnlCLE1BRXpCQSxXQUNBc0ssVUFIeUIsTUFHekJBO2VBSEY7Z0JBZVVDLFlBR0FDLGFBeUJDcEs7Ozs7d0JBbENULElBQUksQ0FBQ2YsUUFBUTs0QkFDWCxNQUFNLElBQUlpQixNQUFNO3dCQUNsQjs7Ozs7Ozs7O3dCQUdFLHVDQUF1Qzt3QkFDakNpSyxhQUFhaE4sdURBQUdBLENBQUNVLHVDQUFFQSxFQUFFLFNBQVNvQixRQUFRLGtCQUFrQmlMLFFBQVE1SixFQUFFO3dCQUV4RSxrREFBa0Q7d0JBQzVDOEosY0FBYzs0QkFDbEI5SixJQUFJNEosUUFBUTVKLEVBQUU7NEJBQ2RWLFdBQVdzSyxRQUFRdEssU0FBUzs0QkFDNUJXLFdBQVcySixRQUFRM0osU0FBUzs0QkFDNUI4SixXQUFXSCxRQUFRRyxTQUFTOzRCQUM1Qi9FLG9CQUFvQjRFLFFBQVE1RSxrQkFBa0I7NEJBQzlDZ0YsY0FBY0osUUFBUUksWUFBWTs0QkFDbENDLGdCQUFnQkwsUUFBUUssY0FBYzs0QkFDdEMvSSxlQUFlMEksUUFBUTFJLGFBQWE7NEJBQ3BDZ0osb0JBQW9CTixRQUFRTSxrQkFBa0I7NEJBQzlDQyxXQUFXUCxRQUFRTyxTQUFTOzRCQUM1QkMsaUJBQWlCUixRQUFRUSxlQUFlOzRCQUN4Q0MsU0FBU1QsUUFBUVMsT0FBTzs0QkFDeEJDLGlCQUFpQlYsUUFBUVUsZUFBZTs0QkFDeENsSixhQUFhd0ksUUFBUXhJLFdBQVc7NEJBQ2hDTyxXQUFXaUksUUFBUWpJLFNBQVM7NEJBQzVCQyxXQUFXLElBQUlMOzRCQUNmZ0osYUFBYVgsUUFBUVcsV0FBVzs0QkFDaEN0SixVQUFVMkksUUFBUTNJLFFBQVE7d0JBQzVCO3dCQUVBLCtFQUErRTt3QkFDL0U7OzRCQUFNN0QsMERBQU1BLENBQUN5TSxZQUFZQyxhQUFhO2dDQUFFVSxPQUFPOzRCQUFLOzs7d0JBQXBEO3dCQUVBL0osUUFBUUMsR0FBRyxDQUFDOzs7Ozs7d0JBQ0xoQjt3QkFDUGUsUUFBUWYsS0FBSyxDQUFDLG1DQUFtQ0E7d0JBQ2pELE1BQU1BOzs7Ozs7O1FBRVY7O0lBRUEsT0FBTStLLGlCQWlDTCxHQWpDRCxTQUFNQSxrQkFBa0IsS0FRdkI7WUFQQzlMLFNBRHNCLE1BQ3RCQSxRQUNBVyxZQUZzQixNQUV0QkEsV0FDQXdCLE9BSHNCLE1BR3RCQTtlQUhGO2dCQVdVZ0ksWUFHQXRKLFNBR0FrTCxPQVlDaEw7Ozs7Ozs7Ozs7d0JBbkJQLDJCQUEyQjt3QkFDckJvSixhQUFhak0sdURBQUdBLENBQUNVLHVDQUFFQSxFQUFFLFNBQVNvQixRQUFRLG1CQUFtQlc7d0JBRS9ELDRCQUE0Qjt3QkFDdEJFLFVBQVU1Qyw4REFBVUEsQ0FBQ2tNLFlBQVk7d0JBRXZDLDZCQUE2Qjt3QkFDdkI0QixRQUFRcE4sOERBQVVBLENBQUNDLHVDQUFFQTt3QkFFM0J1RCxLQUFLNkosT0FBTyxDQUFDakssU0FBQUE7NEJBQ1gsSUFBTWtLLFlBQVkvTix1REFBR0EsQ0FBQzJDLFNBQVNrQixJQUFJVixFQUFFOzRCQUNyQzBLLE1BQU1HLE1BQU0sQ0FBQ0QsV0FBVztnQ0FDdEJ4SixhQUFhVixJQUFJVSxXQUFXO2dDQUM1Qk4sTUFBTUosSUFBSUksSUFBSTtnQ0FDZGMsV0FBV3pELGlFQUFlQTs0QkFDNUI7d0JBQ0Y7d0JBRUE7OzRCQUFNdU0sTUFBTUksTUFBTTs7O3dCQUFsQjs7Ozs7O3dCQUNPcEw7d0JBQ1BlLFFBQVFmLEtBQUssQ0FBQyxnQ0FBZ0NBO3dCQUM5QyxNQUFNQTs7Ozs7OztRQUVWOztJQUdBOzs7R0FHQyxHQUNELE9BQU1iLDBCQTBETCxHQTFERCxTQUFNQSwyQkFBMkJGLE1BQWM7O2VBQS9DO2dCQVNRb00sa0JBQ0FDLGVBR0FDLGdCQU9BaE0scUJBa0JBaU0sb0JBR0Y5SSxHQUNBK0k7Ozs7d0JBdENKLElBQUksQ0FBQ3hNLFFBQVE7NEJBQ1gsTUFBTSxJQUFJaUIsTUFBTTt3QkFDbEI7d0JBR3lCOzs0QkFBTTlDLDJEQUFPQSxDQUFDRiw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUU7Ozt3QkFBaER3TixtQkFBbUI7d0JBQ0g7OzRCQUFNak8sMkRBQU9BLENBQUNGLDhEQUFVQSxDQUFDVyx1Q0FBRUEsRUFBRTs7O3dCQUE3Q3lOLGdCQUFnQjt3QkFFdEIsMEJBQTBCO3dCQUNwQkMsaUJBQWtDRCxjQUFjbEwsSUFBSSxDQUFDSSxHQUFHLENBQUMsU0FBQ3JEO21DQUM5RGMsMERBQWFBLENBQUN5TixZQUFZLENBQUM7Z0NBQ3pCcEwsSUFBSW5ELElBQUltRCxFQUFFOytCQUNQbkQsSUFBSWtELElBQUk7O3dCQUlUZCxzQkFBc0I4TCxpQkFBaUJqTCxJQUFJLENBQUNJLEdBQUcsQ0FBQ3JELFNBQUFBOzRCQUNwRCxJQUFNMkQsV0FBVzlDLHFEQUFRQSxDQUFDME4sWUFBWSxDQUFDO2dDQUNyQ3BMLElBQUluRCxJQUFJbUQsRUFBRTsrQkFDUG5ELElBQUlrRCxJQUFJOzRCQUdiLDRCQUE0Qjs0QkFDNUIsSUFBTXNMLGlCQUFpQkosZUFBZXpCLE1BQU0sQ0FDMUMsU0FBQzhCO3VDQUFVQSxNQUFNOUssUUFBUSxDQUFDK0ssV0FBVyxPQUFPL0ssU0FBU0QsSUFBSSxDQUFDZ0wsV0FBVzs7NEJBR3ZFLE9BQU8sd0lBQ0YvSztnQ0FDSDRFLFFBQVFpRzs7d0JBRVo7d0JBRUEsc0NBQXNDO3dCQUNoQ0gscUJBQXFCdE8sOERBQVVBLENBQUNXLHVDQUFFQSxFQUFFLFNBQVNvQixRQUFRO3dCQUUzRCx3QkFBd0I7d0JBQ3BCeUQsSUFBSXBGLHlEQUFLQSxDQUFDa08sb0JBQW9Cak8seURBQUtBLENBQUMsVUFBVSxNQUFNYyx5REFBYUEsQ0FBQ2dHLFFBQVE7d0JBQ25FOzs0QkFBTWpILDJEQUFPQSxDQUFDc0Y7Ozt3QkFBckIrSSxPQUFPO3dCQUVYLElBQUksQ0FBQ0EsS0FBS0ssS0FBSyxFQUFFOzRCQUNmOztnQ0FBTyxNQUFLQyw2QkFBNkIsQ0FBQ04sS0FBS3JMLElBQUksQ0FBQyxFQUFFLEVBQUViOzt3QkFDMUQ7d0JBRUEsMEJBQTBCO3dCQUMxQm1ELElBQUlwRix5REFBS0EsQ0FBQ2tPLG9CQUFvQmpPLHlEQUFLQSxDQUFDLFVBQVUsTUFBTWMseURBQWFBLENBQUMyTixVQUFVO3dCQUNyRTs7NEJBQU01TywyREFBT0EsQ0FBQ3NGOzs7d0JBQXJCK0ksT0FBTzt3QkFFUCxJQUFJLENBQUNBLEtBQUtLLEtBQUssRUFBRTs0QkFDZjs7Z0NBQU8sTUFBS0MsNkJBQTZCLENBQUNOLEtBQUtyTCxJQUFJLENBQUMsRUFBRSxFQUFFYjs7d0JBQzFEO3dCQUVBLGFBQWE7d0JBQ2I7OzRCQUFPO2dDQUFFSCxTQUFTO2dDQUFNZ0MsTUFBTTs0QkFBSzs7OztRQUNyQzs7SUFFQSxPQUFNNkssb0JBcUJMLEdBckJELFNBQU1BLHFCQUFxQmhOLE1BQWMsRUFBRVcsU0FBaUI7ZUFBNUQ7Z0JBR1VFLFNBQ0FDLGNBQ0FtTSxVQVVBQyxtQkFFQ25NOzs7Ozs7Ozs7O3dCQWZQLCtDQUErQzt3QkFDekNGLFVBQVU1Qyw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUUsU0FBU29CLFFBQVEsbUJBQW1CVyxXQUFXO3dCQUN6RDs7NEJBQU14QywyREFBT0EsQ0FBQzBDOzs7d0JBQTdCQyxlQUFlO3dCQUNmbU0sV0FBV3RPLDhEQUFVQSxDQUFDQyx1Q0FBRUE7NkJBRTFCLENBQUNrQyxhQUFhK0wsS0FBSyxFQUFuQjs7Ozt3QkFDRi9MLGFBQWFLLElBQUksQ0FBQzZLLE9BQU8sQ0FBQyxTQUFDN0k7NEJBQ3pCOEosUUFBU0UsQ0FBQUEsU0FBTSxDQUFDaEssT0FBT2lLLEdBQUc7d0JBQzVCO3dCQUNBOzs0QkFBTUgsU0FBU2QsTUFBTTs7O3dCQUFyQjs7O3dCQUdGLHlDQUF5Qzt3QkFDbkNlLG9CQUFvQmhQLHVEQUFHQSxDQUFDVSx1Q0FBRUEsRUFBRSxTQUFTb0IsUUFBUSxtQkFBbUJXO3dCQUN0RTs7NEJBQU1qQyw2REFBU0EsQ0FBQ3dPOzs7d0JBQWhCOzs7Ozs7d0JBQ09uTTt3QkFDUGUsUUFBUWYsS0FBSyxDQUFDLG9DQUFvQ0E7d0JBQ2xELE1BQU1BOzs7Ozs7O1FBRVY7O0lBRUEsT0FBY0csOEJBNENiLEdBNUNELFNBQWNBO2VBQWQ7Z0JBS1VrTCxrQkFDQTlLLFdBU0ErSyxlQUNBQyxnQkFTQWhNLHFCQWVDUzs7Ozs7Ozs7Ozt3QkFuQ2tCOzs0QkFBTTVDLDJEQUFPQSxDQUFDRiw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUU7Ozt3QkFBaER3TixtQkFBbUI7d0JBQ25COUssWUFBWThLLGlCQUFpQmpMLElBQUksQ0FBQ0ksR0FBRyxDQUFDLFNBQUNyRDttQ0FDM0NhLHFEQUFRQSxDQUFDME4sWUFBWSxDQUFDO2dDQUNwQnBMLElBQUluRCxJQUFJbUQsRUFBRTsrQkFDUG5ELElBQUlrRCxJQUFJOzt3QkFNTzs7NEJBQU1qRCwyREFBT0EsQ0FBQ0YsOERBQVVBLENBQUNXLHVDQUFFQSxFQUFFOzs7d0JBQTdDeU4sZ0JBQWdCO3dCQUNoQkMsaUJBQWlCRCxjQUFjbEwsSUFBSSxDQUFDSSxHQUFHLENBQUMsU0FBQ3JEO21DQUM3Q2MsMERBQWFBLENBQUN5TixZQUFZLENBQUM7Z0NBQ3pCcEwsSUFBSW5ELElBQUltRCxFQUFFOytCQUNQbkQsSUFBSWtELElBQUk7O3dCQUdmLG1FQUFtRTt3QkFFbkUsNkJBQTZCO3dCQUN2QmQsc0JBQXNCZ0IsVUFBVUMsR0FBRyxDQUFDTSxTQUFBQTs0QkFDeEMsSUFBTTZLLGlCQUFpQkosZUFBZXpCLE1BQU0sQ0FDMUMsU0FBQzhCO3VDQUFVQSxNQUFNOUssUUFBUSxDQUFDK0ssV0FBVyxPQUFPL0ssU0FBU0QsSUFBSSxDQUFDZ0wsV0FBVzs7NEJBR3ZFLE9BQU8sd0lBQ0YvSztnQ0FDSDRFLFFBQVFpRzs7d0JBRVo7d0JBRUEseURBQXlEO3dCQUN6RCw2RUFBNkU7d0JBRTdFOzs0QkFBT3BNOzs7d0JBQ0FTO3dCQUNQZSxRQUFRZixLQUFLLENBQUMscURBQXFEQTt3QkFDbkUsTUFBTUE7Ozs7Ozs7UUFFVjs7SUFFQTs7R0FFQyxHQUNELE9BQU1zTSx1QkEyRUwsR0EzRUQsU0FBTUEsd0JBQXdCck4sTUFBYzs7ZUFBNUM7Z0JBVVVvTSxrQkFDQTlLLFdBUUErSyxlQUNBQyxnQkFRQWhNLHFCQVlBaU0sb0JBQ0FDLE1BUUFjLFVBc0JDdk07Ozs7d0JBbkVULElBQUksQ0FBQ2YsUUFBUTs0QkFDWCxNQUFNLElBQUlpQixNQUFNO3dCQUNsQjs7Ozs7Ozs7O3dCQUkyQjs7NEJBQU05QywyREFBT0EsQ0FBQ0YsOERBQVVBLENBQUNXLHVDQUFFQSxFQUFFOzs7d0JBQWhEd04sbUJBQW1CO3dCQUNuQjlLLFlBQVk4SyxpQkFBaUJqTCxJQUFJLENBQUNJLEdBQUcsQ0FBQyxTQUFDckQ7bUNBQzNDYSxxREFBUUEsQ0FBQzBOLFlBQVksQ0FBQztnQ0FDcEJwTCxJQUFJbkQsSUFBSW1ELEVBQUU7K0JBQ1BuRCxJQUFJa0QsSUFBSTs7d0JBS087OzRCQUFNakQsMkRBQU9BLENBQUNGLDhEQUFVQSxDQUFDVyx1Q0FBRUEsRUFBRTs7O3dCQUE3Q3lOLGdCQUFnQjt3QkFDaEJDLGlCQUFpQkQsY0FBY2xMLElBQUksQ0FBQ0ksR0FBRyxDQUFDLFNBQUNyRDttQ0FDN0NjLDBEQUFhQSxDQUFDeU4sWUFBWSxDQUFDO2dDQUN6QnBMLElBQUluRCxJQUFJbUQsRUFBRTsrQkFDUG5ELElBQUlrRCxJQUFJOzt3QkFJZiw2QkFBNkI7d0JBQ3ZCZCxzQkFBc0JnQixVQUFVQyxHQUFHLENBQUNNLFNBQUFBOzRCQUN4QyxJQUFNNkssaUJBQWlCSixlQUFlekIsTUFBTSxDQUMxQyxTQUFDOEI7dUNBQVVBLE1BQU05SyxRQUFRLENBQUMrSyxXQUFXLE9BQU8vSyxTQUFTRCxJQUFJLENBQUNnTCxXQUFXOzs0QkFHdkUsT0FBTyx3SUFDRi9LO2dDQUNINEUsUUFBUWlHOzt3QkFFWjt3QkFFQSw0QkFBNEI7d0JBQ3RCSCxxQkFBcUJ0Tyw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUUsU0FBU29CLFFBQVE7d0JBQzlDOzs0QkFBTTdCLDJEQUFPQSxDQUFDb087Ozt3QkFBckJDLE9BQU87d0JBRWIsSUFBSUEsS0FBS0ssS0FBSyxFQUFFOzRCQUNkL0ssUUFBUUMsR0FBRyxDQUFDOzRCQUNaOzs7O3dCQUNGO3dCQUdpQjs7NEJBQU13TCxRQUFRQyxHQUFHLENBQ2hDaEIsS0FBS3JMLElBQUksQ0FBQ0ksR0FBRzsyQ0FBQyw0RUFBT3JEO3dDQUNidVA7Ozs7Z0RBQWM7O29EQUFNLE1BQUtYLDZCQUE2QixDQUMxRDVPLEtBQ0FvQzs7O2dEQUZJbU4sY0FBYztnREFLcEIsc0RBQXNEO2dEQUN0RCxJQUFJQSxZQUFZdEwsSUFBSSxFQUFFO29EQUNwQnNMLFlBQVl0TCxJQUFJLENBQUN1TCxJQUFJLENBQUMsU0FBQ0MsR0FBR0M7NERBQ1REO3dEQUFmLElBQU1FLFNBQVNGLENBQUFBLFdBQUFBLEVBQUU3SyxLQUFLLGNBQVA2SyxzQkFBQUEsV0FBVzs0REFDWEM7d0RBQWYsSUFBTUUsU0FBU0YsQ0FBQUEsV0FBQUEsRUFBRTlLLEtBQUssY0FBUDhLLHNCQUFBQSxXQUFXO3dEQUMxQixPQUFPQyxTQUFTQztvREFDbEI7Z0RBQ0Y7Z0RBRUE7O29EQUFPTDs7OztnQ0FDVDtnREFoQnFCdlA7Ozs7Ozt3QkFEakJvUCxXQUFXO3dCQW9CakIsNERBQTREO3dCQUM1RDs7NEJBQU9BOzs7d0JBQ0F2TTt3QkFDUGUsUUFBUWYsS0FBSyxDQUFDLG9DQUFvQ0E7d0JBQ2xELE1BQU1BOzs7Ozs7O1FBRVY7O0lBRUEsT0FBTWdOLGdCQTBCTCxHQTFCRCxTQUFNQSxpQkFBaUI5UCxVQUErQjtlQUF0RDtnQkFFVStQLFNBSUVDLFdBZ0JEbE47Ozs7Ozs7Ozs7d0JBcEJEaU4sVUFBVXhQLDhEQUFZQSxDQUFDSSx1Q0FBRUEsRUFBRTt3QkFFakMsa0VBQWtFO3dCQUNsRSxJQUFJLENBQUNYLFdBQVdvRCxFQUFFLElBQUlwRCxXQUFXb0QsRUFBRSxDQUFDNk0sSUFBSSxPQUFPLElBQUk7NEJBQzNDRCxZQUFZL1AsdURBQUdBLENBQUM4UDs0QkFDdEIvUCxXQUFXb0QsRUFBRSxHQUFHNE0sVUFBVTVNLEVBQUU7d0JBQzlCO3dCQUVBLHFEQUFxRDt3QkFDckQsSUFBSXBELFdBQVdpRSxTQUFTLEVBQUU7NEJBQ3hCakUsV0FBV2lFLFNBQVMsQ0FBQ2IsRUFBRSxHQUFHcEQsV0FBV29ELEVBQUU7d0JBQ3pDO3dCQUVBLDhCQUE4Qjt3QkFDOUJwRCxXQUFXZ0YsU0FBUyxHQUFHLElBQUlMO3dCQUUzQixvQ0FBb0M7d0JBQ3BDOzs0QkFBTW5FLDBEQUFNQSxDQUFDUCx1REFBR0EsQ0FBQzhQLFNBQVMvUCxXQUFXb0QsRUFBRSxHQUFHcEQsV0FBV3dILFlBQVk7Ozt3QkFBakU7d0JBQ0EzRCxRQUFRQyxHQUFHLENBQUM7d0JBQ1o7OzRCQUFPOUQ7Ozt3QkFDQThDO3dCQUNQZSxRQUFRZixLQUFLLENBQUMsdUNBQXVDQTt3QkFDckQsTUFBTSxJQUFJRSxNQUFNOzs7Ozs7O1FBRXBCOztJQUVBLE9BQWM2TCw2QkFvRmIsR0FwRkQsU0FBY0EsOEJBQ1pyTSxVQUErQyxFQUMvQ0gsbUJBQStCO2VBRmpDO2dCQUlRYyxNQUdBUixpQkFlQVQsU0FtQ0FVLFNBQ0FDLGNBRUFxQjs7Ozt3QkF4REFmLE9BQU9YLFdBQVdXLElBQUk7d0JBRTVCLGdEQUFnRDt3QkFDMUNSLGtCQUFrQixDQUFDUSxLQUFLRSxTQUFTLE1BQUssRUFBR0MsR0FBRyxDQUFDLFNBQUNDO2dDQUV4QkEsNEJBQUFBOzRCQUQxQixxQ0FBcUM7NEJBQ3JDLElBQU0yTSxxQkFBb0IzTSx3QkFBQUEsWUFBWUssUUFBUSxjQUFwQkwsNkNBQUFBLDZCQUFBQSxzQkFBc0JJLElBQUksY0FBMUJKLGlEQUFBQSwyQkFBNEJvTCxXQUFXLEdBQUdzQixJQUFJOzRCQUN4RSxJQUFNek0sZUFBZW5CLG9CQUFvQm9CLElBQUksQ0FDM0NDLFNBQUFBO3VDQUFNQSxHQUFHQyxJQUFJLENBQUNnTCxXQUFXLEdBQUdzQixJQUFJLE9BQU9DOzs0QkFHekMsZ0VBQWdFOzRCQUNoRSxPQUFPLHdJQUNGM007Z0NBQ0hLLFVBQVVKLGdCQUFnQkQsWUFBWUssUUFBUTs7d0JBRWxEO3dCQUVBLDJDQUEyQzt3QkFDckMxQixVQUFVLElBQUlsQixtREFBT0EsQ0FBQzs0QkFDMUJvQyxJQUFJWixXQUFXWSxFQUFFOzRCQUNqQlcsZ0JBQWdCWixLQUFLWSxjQUFjLElBQUk7NEJBQ3ZDVixXQUFXVjs0QkFDWHdCLE9BQU9oQixLQUFLZ0IsS0FBSyxJQUFJOzRCQUNyQkMsYUFBYWpCLEtBQUtpQixXQUFXLElBQUk7NEJBQ2pDQyxVQUFVbEIsS0FBS2tCLFFBQVEsSUFBSTs0QkFDM0JFLGtCQUFrQnBCLEtBQUtvQixnQkFBZ0IsSUFBSTs0QkFDM0NDLGFBQWFyQixLQUFLcUIsV0FBVyxJQUFJOzRCQUNqQ0MsZUFBZXRCLEtBQUtzQixhQUFhLElBQUl0RCx5REFBYUEsQ0FBQ2dQLFFBQVE7NEJBQzNEckwsUUFBUTNCLEtBQUsyQixNQUFNLElBQUk7NEJBQ3ZCQyxXQUFXdkQsNEVBQXlCQSxDQUFDMkIsS0FBSzRCLFNBQVM7NEJBQ25EQyxXQUFXeEQsNEVBQXlCQSxDQUFDMkIsS0FBSzZCLFNBQVM7NEJBQ25ETixXQUFXbEQsNEVBQXlCQSxDQUFDMkIsS0FBS3VCLFNBQVM7NEJBQ25EVixjQUFjYixLQUFLYSxZQUFZOzRCQUMvQkMsV0FBV2QsS0FBS2MsU0FBUzs0QkFDekJDLE1BQU0sQ0FBQ2YsS0FBS2UsSUFBSSxNQUFLLEVBQUdaLEdBQUcsQ0FBQyxTQUFDK0k7b0NBRURBLHdCQUFBQTtnQ0FEMUIsK0JBQStCO2dDQUMvQixJQUFNNkQscUJBQW9CN0Qsb0JBQUFBLFFBQVF6SSxRQUFRLGNBQWhCeUkseUNBQUFBLHlCQUFBQSxrQkFBa0IxSSxJQUFJLGNBQXRCMEksNkNBQUFBLHVCQUF3QnNDLFdBQVcsR0FBR3NCLElBQUk7Z0NBQ3BFLElBQU16TSxlQUFlbkIsb0JBQW9Cb0IsSUFBSSxDQUMzQ0MsU0FBQUE7MkNBQU1BLEdBQUdDLElBQUksQ0FBQ2dMLFdBQVcsR0FBR3NCLElBQUksT0FBT0M7O2dDQUd6QyxPQUFPLHdJQUNGN0Q7b0NBQ0h6SSxVQUFVSixnQkFBZ0I2SSxRQUFRekksUUFBUTs7NEJBRTlDOzRCQUNBVSxlQUFlbkIsS0FBS21CLGFBQWE7NEJBQ2pDTyxPQUFPMUIsS0FBSzBCLEtBQUs7NEJBQ2pCSSxNQUFNOUIsS0FBSzhCLElBQUksSUFBSWhFLG9EQUFRQSxDQUFDb0csUUFBUTt3QkFDdEM7d0JBRUF4RCxRQUFRQyxHQUFHLENBQUMsd0JBQXdCNUIsUUFBUWtCLEVBQUU7d0JBQzlDLGdDQUFnQzt3QkFDMUJSLFVBQVU1Qyw4REFBVUEsQ0FBQ3dDLFdBQVcyTSxHQUFHLEVBQUU7d0JBQ3RCOzs0QkFBTWpQLDJEQUFPQSxDQUFDMEM7Ozt3QkFBN0JDLGVBQWU7d0JBRWZxQixPQUFzQnJCLGFBQWFLLElBQUksQ0FBQ0ksR0FBRyxDQUFDNEIsU0FBQUE7Z0NBSXRCbUgsd0JBQUFBOzRCQUgxQixJQUFNQSxVQUFVbkgsT0FBTy9CLElBQUk7NEJBRTNCLHFDQUFxQzs0QkFDckMsSUFBTStNLHFCQUFvQjdELG9CQUFBQSxRQUFRekksUUFBUSxjQUFoQnlJLHlDQUFBQSx5QkFBQUEsa0JBQWtCMUksSUFBSSxjQUF0QjBJLDZDQUFBQSx1QkFBd0JzQyxXQUFXLEdBQUdzQixJQUFJOzRCQUNwRSxJQUFNek0sZUFBZW5CLG9CQUFvQm9CLElBQUksQ0FDM0NDLFNBQUFBO3VDQUFNQSxHQUFHQyxJQUFJLENBQUNnTCxXQUFXLEdBQUdzQixJQUFJLE9BQU9DOzs0QkFHekMsc0NBQXNDOzRCQUN0QyxJQUFNRSxrQkFBa0Isd0lBQ25CL0Q7Z0NBQ0hqSixJQUFJOEIsT0FBTzlCLEVBQUU7Z0NBQ2JWLFdBQVdSLFFBQVFrQixFQUFFO2dDQUNyQlEsVUFBVUosZ0JBQWdCNkksUUFBUXpJLFFBQVE7Z0NBQzFDbUIsV0FBV3ZELDRFQUF5QkEsQ0FBQzZLLFFBQVF0SCxTQUFTO2dDQUN0REMsV0FBV3hELDRFQUF5QkEsQ0FBQzZLLFFBQVFySCxTQUFTOzs0QkFHeEQsMkRBQTJEOzRCQUMzRCxPQUFPLElBQUluRSx3REFBV0EsQ0FBQ3VQO3dCQUN6Qjt3QkFFQTs7NEJBQU87Z0NBQUVsTyxTQUFBQTtnQ0FBU2dDLE1BQUFBOzRCQUFLOzs7O1FBQ3pCOztJQUVBLE9BQU1tTSxrQkF3REosR0F4REYsU0FBTUEsbUJBQW1CLEtBUXZCO1lBUEF0TyxTQUR1QixNQUN2QkEsUUFDQUcsVUFGdUIsTUFFdkJBLFNBQ0FnQyxPQUh1QixNQUd2QkE7ZUFIRjtnQkFZVW9NLGFBRUFDLGNBVUF0QixtQkFHQXJNLFNBQ0FvTSxVQXdCQ2xNOzs7O3dCQTNDVCxJQUFJLENBQUNmLFFBQVEsTUFBTSxJQUFJaUIsTUFBTTs7Ozs7Ozs7O3dCQUdyQnNOLGNBQWMsSUFBSTNMO3dCQUVsQjRMLGVBQWUsSUFBSXZQLG1EQUFPQSxDQUFDLHdJQUM1QmtCOzRCQUNINkIsZ0JBQWdCLEdBQWlCdU0sT0FBZHBPLFFBQVFrQixFQUFFLEVBQUMsS0FBeUIsT0FBdEJrTixZQUFZRSxPQUFPOzRCQUNwRC9MLGVBQWV0RCx5REFBYUEsQ0FBQ2dHLFFBQVE7NEJBQ3JDcEMsV0FBV3VMOzRCQUNYdEwsV0FBV3NMOzRCQUNYNUwsV0FBVzRMOzRCQUNYcE0sSUFBSTs7d0JBR0ErSyxvQkFBb0JoUCx1REFBR0EsQ0FBQ0QsOERBQVVBLENBQUNXLHVDQUFFQSxFQUFFLFNBQVNvQixRQUFRO3dCQUM5RDs7NEJBQU12QiwwREFBTUEsQ0FBQ3lPLG1CQUFtQnNCOzs7d0JBQWhDO3dCQUVNM04sVUFBVTVDLDhEQUFVQSxDQUFDaVAsbUJBQW1CO3dCQUN4Q0QsV0FBV3RPLDhEQUFVQSxDQUFDQyx1Q0FBRUE7d0JBRTlCdUQsS0FBSzZKLE9BQU8sQ0FBQyxTQUFDakssS0FBSzJNOzRCQUNqQixJQUFNekMsWUFBWS9OLHVEQUFHQSxDQUFDMkMsU0FBUyxHQUFhME4sT0FBVnhNLElBQUlWLEVBQUUsRUFBQyxLQUF5QixPQUF0QmtOLFlBQVlFLE9BQU87NEJBQy9EeEIsU0FBUzBCLEdBQUcsQ0FBQzFDLFdBQVc7Z0NBQ3RCNUssSUFBSTRLLFVBQVU1SyxFQUFFO2dDQUNoQlYsV0FBV3VNLGtCQUFrQjdMLEVBQUU7Z0NBQy9CUSxVQUFVO29DQUNSUixJQUFJVSxJQUFJRixRQUFRLENBQUNSLEVBQUU7b0NBQ25CTyxNQUFNRyxJQUFJRixRQUFRLENBQUNELElBQUk7b0NBQ3ZCK0QsVUFBVTVELElBQUlGLFFBQVEsQ0FBQzhELFFBQVE7b0NBQy9CYyxRQUFRMUUsSUFBSUYsUUFBUSxDQUFDNEUsTUFBTSxJQUFJLEVBQUU7Z0NBQ25DO2dDQUNBM0QsT0FBTzRMO2dDQUNQMUwsV0FBV3VMO2dDQUNYdEwsV0FBV3NMO2dDQUNYN0csY0FBYztnQ0FDZGpGLGFBQWE7NEJBQ2Y7d0JBQ0Y7d0JBRUE7OzRCQUFNd0ssU0FBU2QsTUFBTTs7O3dCQUFyQjt3QkFFQTs7NEJBQU9xQzs7O3dCQUNBek47d0JBQ1BlLFFBQVFmLEtBQUssQ0FBQyxpQ0FBaUNBO3dCQUMvQyxNQUFNQTs7Ozs7OztRQUVUOztJQUVEOzs7R0FHQyxHQUNELE9BQU02TixhQTZFTCxHQTdFRCxTQUFNQSxjQUFjLEtBTW5CO1lBTENqSSxXQURrQixNQUNsQkEsVUFDQXBELGNBRmtCLE1BRWxCQTtlQUZGO2dCQVFRUSxhQU1BOEssVUFDQUMsV0FDQUMsY0FNQUMsU0FDQUMsVUFDQWpQLFFBR0FrUCxjQUNBQyxlQU1Bak4sV0FHQWtOLGlCQUNBQzs7Ozt3QkEvQk4sd0NBQXdDO3dCQUNsQ3RMLGNBQWNsRiw4Q0FBV0EsQ0FBQ2tGLFdBQVc7d0JBQzNDLElBQUksQ0FBQ0EsYUFBYTs0QkFDaEIsTUFBTSxJQUFJOUMsTUFBTTt3QkFDbEI7d0JBRUEsbUNBQW1DO3dCQUM3QjROLFdBQVc1USw4REFBVUEsQ0FBQ1csdUNBQUVBLEVBQUU7d0JBQzFCa1EsWUFBWXpRLHlEQUFLQSxDQUFDd1EsVUFBVXZRLHlEQUFLQSxDQUFDLFlBQVksTUFBTXFJO3dCQUNyQzs7NEJBQU14SSwyREFBT0EsQ0FBQzJROzs7d0JBQTdCQyxlQUFlO3dCQUVyQixJQUFJQSxhQUFhbEMsS0FBSyxFQUFFOzRCQUN0QixNQUFNLElBQUk1TCxNQUFNO3dCQUNsQjt3QkFFTStOLFVBQVVELGFBQWE1TixJQUFJLENBQUMsRUFBRTt3QkFDOUI4TixXQUFXRCxRQUFRNU4sSUFBSTt3QkFDdkJwQixTQUFTZ1AsUUFBUTNOLEVBQUU7d0JBRXpCLHVDQUF1Qzt3QkFDakM2TixlQUFlaFIsdURBQUdBLENBQUNVLHVDQUFFQSxFQUFFLHdCQUF3QjJFO3dCQUMvQjs7NEJBQU1uRiwwREFBTUEsQ0FBQzhROzs7d0JBQTdCQyxnQkFBZ0I7d0JBRXRCLElBQUksQ0FBQ0EsY0FBYzlFLE1BQU0sSUFBSTs0QkFDM0IsTUFBTSxJQUFJcEosTUFBTTt3QkFDbEI7d0JBRU1pQixZQUFZaU4sY0FBYy9OLElBQUk7d0JBRXBDLHVDQUF1Qzt3QkFDakNnTyxrQkFBa0IsR0FBa0JwUCxPQUFmdUQsYUFBWSxLQUFhWCxPQUFWNUMsUUFBTyxLQUFjLE9BQVg0QyxLQUFLME0sR0FBRzt3QkFDdERELG9CQUFvQjs0QkFDeEJoTyxJQUFJK047NEJBQ0psTixXQUFXQTs0QkFDWHFCLGFBQUFBOzRCQUNBdkQsUUFBQUE7NEJBQ0F1UCxVQUFVTixTQUFTTSxRQUFRLElBQUk7NEJBQy9CcEcsY0FBYzhGLFNBQVM5RixZQUFZLElBQUksQ0FBQzs0QkFDeENxRyxVQUFVOzRCQUNWQyxpQkFBaUI7NEJBQ2pCaE4sYUFBYTs0QkFDYmlOLEtBQUsxUDs0QkFDTDJQLFVBQVVWLFNBQVNVLFFBQVEsSUFBSTs0QkFDL0JDLE1BQU07NEJBQ05DLFNBQVM7NEJBQ1RDLFVBQVU7NEJBQ1ZuSixVQUFBQTs0QkFDQW9KLFVBQVUsSUFBSW5OOzRCQUNkSSxXQUFXLElBQUlKOzRCQUNmSyxXQUFXLElBQUlMOzRCQUNmb04sYUFBYTtnQ0FDWEMsZ0JBQWdCO2dDQUNoQkMsaUJBQWlCO2dDQUNqQkMsYUFBYTtnQ0FDYkMsY0FBYztnQ0FDZEMsY0FBYztnQ0FDZEMsbUJBQW1CO2dDQUNuQkMsaUJBQWlCO2dDQUNqQkMsbUJBQW1CO2dDQUNuQkMsbUJBQW1CO2dDQUNuQkMsdUJBQXVCOzRCQUN6Qjs0QkFDQUMsZUFBZTs0QkFDZkMsZUFBZTs0QkFDZkMsaUJBQWlCOzRCQUNqQkMsUUFBUTt3QkFDVjt3QkFFQSw4QkFBOEI7d0JBQzlCOzs0QkFBTXJTLDBEQUFNQSxDQUFDUCx1REFBR0EsQ0FBQ1UsdUNBQUVBLEVBQUUsa0JBQWtCd1Esa0JBQWtCQzs7O3dCQUF6RDs7Ozs7O1FBQ0Y7O2tFQWp6Q0l6UDs7WUFLQW1SLEtBQUFBO2lCQUFKLDZCQUQ2QjtZQUM3QjtnQkFDRSxPQUFPLElBQUksQ0FBQ2xSLGVBQWU7WUFDN0I7aUJBR0EsNkJBRDZCO1lBQzdCLGFBQW1CTSxPQUF1QjtnQkFDeEMsSUFBSSxDQUFDTixlQUFlLEdBQUdNO1lBQ3pCOzs7WUFHSTZRLEtBQUFBO2lCQUFKLGtDQURrQztZQUNsQztnQkFDRSxPQUFPLElBQUksQ0FBQ2xSLG1CQUFtQjtZQUNqQztpQkFHQSxrQ0FEa0M7WUFDbEMsYUFBdUJxQyxJQUFtQjtnQkFDeEMsSUFBSSxDQUFDckMsbUJBQW1CLEdBQUdxQztZQUM3Qjs7O1dBdEJJdkM7O0FBb3pDQyxJQUFNcVIsaUJBQWlCLElBQUlyUixpQkFBaUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2FwaS9maXJlYmFzZS93b3Jrb3V0L3NlcnZpY2UudHM/YzVlMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvYXBpL2ZpcmViYXNlL3dvcmtvdXQvc2VydmljZS50c1xuaW1wb3J0IHtcbiAgY29sbGVjdGlvbixcbiAgZG9jLFxuICBnZXREb2NzLFxuICBnZXREb2MsXG4gIHVwZGF0ZURvYyxcbiAgcXVlcnksXG4gIHdoZXJlLFxuICBvcmRlckJ5LCBcbiAgRG9jdW1lbnREYXRhLFxuICBRdWVyeURvY3VtZW50U25hcHNob3QsXG4gIGNvbGxlY3Rpb24gYXMgZnNDb2xsZWN0aW9uLFxuICBzZXREb2MsXG4gIGRlbGV0ZURvYyxcbiAgd3JpdGVCYXRjaFxufSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xuXG5pbXBvcnQgeyBkYiB9IGZyb20gJy4uL2NvbmZpZyc7XG5pbXBvcnQgeyB1c2VyU2VydmljZSB9IGZyb20gJy4uL3VzZXInO1xuaW1wb3J0IHsgRXhlcmNpc2VMb2csIEV4ZXJjaXNlQ2F0ZWdvcnksIEV4ZXJjaXNlLCBCb2R5UGFydCwgRXhlcmNpc2VWaWRlbywgRXhlcmNpc2VBdXRob3IsIEV4ZXJjaXNlVmlkZW9WaXNpYmlsaXR5IH0gZnJvbSAnLi4vZXhlcmNpc2UvdHlwZXMnO1xuaW1wb3J0IHtQcm9maWxlSW1hZ2V9IGZyb20gJy4uL3VzZXIvdHlwZXMnXG5pbXBvcnQgeyBXb3Jrb3V0LCBXb3Jrb3V0U3VtbWFyeSwgQm9keVpvbmUsIEludHJvVmlkZW8gfSBmcm9tICcuLi93b3Jrb3V0L3R5cGVzJztcbmltcG9ydCB7IFdvcmtvdXRTdGF0dXMsIFN3ZWF0bGlzdENvbGxlY3Rpb24gfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGZvcm1hdCB9IGZyb20gJ2RhdGUtZm5zJzsgXG5pbXBvcnQgeyBjb252ZXJ0VGltZXN0YW1wLCBzZXJ2ZXJUaW1lc3RhbXAgfSBmcm9tICcuLi8uLi8uLi91dGlscy90aW1lc3RhbXAnOyAvLyBBZGp1c3QgdGhlIGltcG9ydCBwYXRoXG5pbXBvcnQgeyBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvZm9ybWF0RGF0ZSc7XG5pbXBvcnQgeyBDaGFsbGVuZ2UsIENoYWxsZW5nZVN0YXR1cywgVXNlckNoYWxsZW5nZSB9IGZyb20gJy4uLy4uLy4uL2FwaS9maXJlYmFzZS93b3Jrb3V0L3R5cGVzJztcblxuXG5pbnRlcmZhY2UgRmlyZXN0b3JlRXJyb3Ige1xuICBjb2RlOiBzdHJpbmc7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBzdGFjaz86IHN0cmluZztcbn1cblxuY2xhc3MgV29ya291dFNlcnZpY2Uge1xuICBwcml2YXRlIF9jdXJyZW50V29ya291dDogV29ya291dCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIF9jdXJyZW50V29ya291dExvZ3M6IEV4ZXJjaXNlTG9nW10gPSBbXTtcblxuICAvLyBHZXR0ZXIgZm9yIGN1cnJlbnQgd29ya291dFxuICBnZXQgY3VycmVudFdvcmtvdXQoKTogV29ya291dCB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50V29ya291dDtcbiAgfVxuXG4gIC8vIFNldHRlciBmb3IgY3VycmVudCB3b3Jrb3V0XG4gIHNldCBjdXJyZW50V29ya291dCh3b3Jrb3V0OiBXb3Jrb3V0IHwgbnVsbCkge1xuICAgIHRoaXMuX2N1cnJlbnRXb3Jrb3V0ID0gd29ya291dDtcbiAgfVxuXG4gIC8vIEdldHRlciBmb3IgY3VycmVudCB3b3Jrb3V0IGxvZ3NcbiAgZ2V0IGN1cnJlbnRXb3Jrb3V0TG9ncygpOiBFeGVyY2lzZUxvZ1tdIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudFdvcmtvdXRMb2dzO1xuICB9XG5cbiAgLy8gU2V0dGVyIGZvciBjdXJyZW50IHdvcmtvdXQgbG9nc1xuICBzZXQgY3VycmVudFdvcmtvdXRMb2dzKGxvZ3M6IEV4ZXJjaXNlTG9nW10pIHtcbiAgICB0aGlzLl9jdXJyZW50V29ya291dExvZ3MgPSBsb2dzO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIHRoZSB1c2VyJ3MgY3VycmVudCB3b3Jrb3V0IChlaXRoZXIgUXVldWVkVXAgb3IgSW5Qcm9ncmVzcykuXG4gICAqL1xuICBhc3luYyBmZXRjaEN1cnJlbnRXb3Jrb3V0KHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxXb3Jrb3V0IHwgbnVsbD4ge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCB0aGlzLmZldGNoQ3VycmVudFdvcmtvdXRTZXNzaW9uKHVzZXJJZCk7XG4gICAgcmV0dXJuIHNlc3Npb24ud29ya291dDtcbiAgfVxuXG4gIGFzeW5jIGdldEFsbFN3ZWF0bGlzdHModXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFdvcmtvdXRbXT4ge1xuICAgIGlmICghdXNlcklkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgSUQgaXMgcmVxdWlyZWQnKTtcbiAgICB9XG4gIFxuICAgIC8vIFJlZmVyZW5jZSB0byB0aGUgdXNlcidzIHdvcmtvdXQgY29sbGVjdGlvblxuICAgIGNvbnN0IHdvcmtvdXRzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgdXNlcklkLCAnTXlDcmVhdGVkV29ya291dHMnKTtcbiAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIEZldGNoIGV4ZXJjaXNlcyB3aXRoIHZpZGVvc1xuICAgICAgY29uc3QgZXhlcmNpc2VzV2l0aFZpZGVvcyA9IGF3YWl0IHRoaXMuZmV0Y2hBbmRNYXBFeGVyY2lzZXNXaXRoVmlkZW9zKCk7XG4gIFxuICAgICAgLy8gUXVlcnkgdG8gZmV0Y2ggYWxsIHdvcmtvdXRzXG4gICAgICBjb25zdCB3b3Jrb3V0c1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyh3b3Jrb3V0c1JlZik7XG4gICAgICBjb25zdCB3b3Jrb3V0czogV29ya291dFtdID0gW107XG4gIFxuICAgICAgLy8gUHJvY2VzcyBlYWNoIHdvcmtvdXQgZG9jdW1lbnRcbiAgICAgIGZvciAoY29uc3Qgd29ya291dERvYyBvZiB3b3Jrb3V0c1NuYXBzaG90LmRvY3MpIHtcbiAgICAgICAgY29uc3Qgd29ya291dERhdGEgPSB3b3Jrb3V0RG9jLmRhdGEoKTtcbiAgICAgICAgY29uc3Qgd29ya291dElkID0gd29ya291dERvYy5pZDtcbiAgXG4gICAgICAgIC8vIE1hcCB0aGUgZXhlcmNpc2VzIGluIHRoZSB3b3Jrb3V0IHRvIHRoZSBmdWxsIGV4ZXJjaXNlIG9iamVjdHMgd2l0aCB2aWRlb3NcbiAgICAgICAgY29uc3QgbWFwcGVkRXhlcmNpc2VzID0gKHdvcmtvdXREYXRhLmV4ZXJjaXNlcyB8fCBbXSkubWFwKChleGVyY2lzZVJlZjogYW55KSA9PiB7XG4gICAgICAgICAgY29uc3QgZnVsbEV4ZXJjaXNlID0gZXhlcmNpc2VzV2l0aFZpZGVvcy5maW5kKGV4ID0+IGV4Lm5hbWUgPT09IGV4ZXJjaXNlUmVmLmV4ZXJjaXNlLm5hbWUpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGhpcyBpcyB0aGUgbWFwcGVkIGV4ZXJjaXNlOiBcIiArIGZ1bGxFeGVyY2lzZSk7XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZXhlcmNpc2VSZWYsXG4gICAgICAgICAgICBleGVyY2lzZTogZnVsbEV4ZXJjaXNlIHx8IGV4ZXJjaXNlUmVmXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgXG4gICAgICAgIC8vIFBhcnNlIHdvcmtvdXQgZGF0YSBpbnRvIHRoZSBkZXNpcmVkIHN0cnVjdHVyZVxuICAgICAgICBjb25zdCB3b3Jrb3V0ID0gbmV3IFdvcmtvdXQoe1xuICAgICAgICAgIGlkOiB3b3Jrb3V0RGF0YS5pZCB8fCAnJyxcbiAgICAgICAgICByb3VuZFdvcmtvdXRJZDogd29ya291dERhdGEucm91bmRXb3Jrb3V0SWQgfHwgJycsXG4gICAgICAgICAgY29sbGVjdGlvbklkOiB3b3Jrb3V0RGF0YS5jb2xsZWN0aW9uSWQsXG4gICAgICAgICAgZXhlcmNpc2VzOiBtYXBwZWRFeGVyY2lzZXMsXG4gICAgICAgICAgY2hhbGxlbmdlOiB3b3Jrb3V0RGF0YS5jaGFsbGVuZ2UsXG4gICAgICAgICAgbG9nczogW10sXG4gICAgICAgICAgdGl0bGU6IHdvcmtvdXREYXRhLnRpdGxlIHx8ICcnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiB3b3Jrb3V0RGF0YS5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgICBkdXJhdGlvbjogd29ya291dERhdGEuZHVyYXRpb24gfHwgMCxcbiAgICAgICAgICB3b3Jrb3V0UmF0aW5nOiB3b3Jrb3V0RGF0YS53b3Jrb3V0UmF0aW5nLFxuICAgICAgICAgIHVzZUF1dGhvckNvbnRlbnQ6IHdvcmtvdXREYXRhLnVzZUF1dGhvckNvbnRlbnQgfHwgZmFsc2UsXG4gICAgICAgICAgaXNDb21wbGV0ZWQ6IHdvcmtvdXREYXRhLmlzQ29tcGxldGVkIHx8IGZhbHNlLFxuICAgICAgICAgIHdvcmtvdXRTdGF0dXM6IHdvcmtvdXREYXRhLndvcmtvdXRTdGF0dXMgfHwgJ25vdFN0YXJ0ZWQnLFxuICAgICAgICAgIHN0YXJ0VGltZTogd29ya291dERhdGEuc3RhcnRUaW1lID8gbmV3IERhdGUod29ya291dERhdGEuc3RhcnRUaW1lKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBvcmRlcjogd29ya291dERhdGEub3JkZXIsXG4gICAgICAgICAgYXV0aG9yOiB3b3Jrb3V0RGF0YS5hdXRob3IgfHwgdXNlcklkLFxuICAgICAgICAgIGNyZWF0ZWRBdDogd29ya291dERhdGEuY3JlYXRlZEF0ID8gbmV3IERhdGUod29ya291dERhdGEuY3JlYXRlZEF0KSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgdXBkYXRlZEF0OiB3b3Jrb3V0RGF0YS51cGRhdGVkQXQgPyBuZXcgRGF0ZSh3b3Jrb3V0RGF0YS51cGRhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICB6b25lOiB3b3Jrb3V0RGF0YS56b25lIHx8ICdGVUxMX0JPRFknLFxuICAgICAgICB9KTsgICAgICAgIFxuICBcbiAgICAgICAgLy8gRmV0Y2ggYW5kIHByb2Nlc3MgbG9nc1xuICAgICAgICBjb25zdCBsb2dzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgdXNlcklkLCAnTXlDcmVhdGVkV29ya291dHMnLCB3b3Jrb3V0SWQsICdsb2dzJyk7XG4gICAgICAgIGNvbnN0IGxvZ3NTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MobG9nc1JlZik7XG4gICAgICAgIHdvcmtvdXQubG9ncyA9IGxvZ3NTbmFwc2hvdC5kb2NzLm1hcCgobG9nRG9jKSA9PiAoe1xuICAgICAgICAgIC4uLmxvZ0RvYy5kYXRhKCksXG4gICAgICAgICAgaWQ6IGxvZ0RvYy5pZCxcbiAgICAgICAgfSkpIGFzIEV4ZXJjaXNlTG9nW107XG4gIFxuICAgICAgICB3b3Jrb3V0cy5wdXNoKHdvcmtvdXQpO1xuICAgICAgfVxuICBcbiAgICAgIHJldHVybiB3b3Jrb3V0cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZmlyZXN0b3JlRXJyb3IgPSBlcnJvciBhcyBGaXJlc3RvcmVFcnJvcjtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHN3ZWF0bGlzdHM6JywgZmlyZXN0b3JlRXJyb3IubWVzc2FnZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBzd2VhdGxpc3RzJyk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0VXNlckNoYWxsZW5nZXNCeUNoYWxsZW5nZUlkKGNoYWxsZW5nZUlkOiBzdHJpbmcpOiBQcm9taXNlPHsgdXNlckNoYWxsZW5nZXM6IFVzZXJDaGFsbGVuZ2VbXTsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICAgIGNvbnN0IHVzZXJDaGFsbGVuZ2VzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXItY2hhbGxlbmdlJyk7XG4gICAgY29uc3QgcSA9IHF1ZXJ5KHVzZXJDaGFsbGVuZ2VzUmVmLCB3aGVyZSgnY2hhbGxlbmdlSWQnLCAnPT0nLCBjaGFsbGVuZ2VJZCkpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgICBjb25zdCB1c2VyQ2hhbGxlbmdlczogVXNlckNoYWxsZW5nZVtdID0gc25hcHNob3QuZG9jcy5tYXAoKGRvYzogRG9jdW1lbnREYXRhKSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgICByZXR1cm4gbmV3IFVzZXJDaGFsbGVuZ2UoZG9jLmlkLCBkYXRhKTtcbiAgICAgIH0pO1xuICAgICAgaWYgKHVzZXJDaGFsbGVuZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHsgdXNlckNoYWxsZW5nZXMgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB7IHVzZXJDaGFsbGVuZ2VzOiBbXSwgZXJyb3I6ICdObyB1c2VyIGNoYWxsZW5nZXMgZm91bmQgZm9yIHRoaXMgY2hhbGxlbmdlLicgfTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBjaGFsbGVuZ2VzIGJ5IGNoYWxsZW5nZUlkOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7IHVzZXJDaGFsbGVuZ2VzOiBbXSwgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InIH07XG4gICAgfVxuICB9XG4gIFxuICAvKipcbiAgICogRmV0Y2hlcyB3b3Jrb3V0IHN1bW1hcmllcyBmb3IgYSBzcGVjaWZpYyBkYXRlLlxuICAgKiBAcGFyYW0gZGF0ZSAtIFRoZSBkYXRlIGZvciB3aGljaCB3b3Jrb3V0IHN1bW1hcmllcyBhcmUgYmVpbmcgZmV0Y2hlZC5cbiAgICogQHJldHVybnMgQSBwcm9taXNlIHJlc29sdmluZyB0byBhbiBhcnJheSBvZiB3b3Jrb3V0IHN1bW1hcmllcy5cbiAgICogQHRocm93cyBJZiBubyB1c2VyIGlzIHNpZ25lZCBpbiBvciBpZiB0aGUgRmlyZXN0b3JlIHF1ZXJ5IGZhaWxzLlxuICAgKi9cbiAgYXN5bmMgZmV0Y2hXb3Jrb3V0U3VtbWFyaWVzKGRhdGU6IERhdGUpOiBQcm9taXNlPFdvcmtvdXRTdW1tYXJ5W10+IHtcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IHVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyO1xuICAgIGlmICghY3VycmVudFVzZXI/LmlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgfVxuXG4gICAgLy8gRm9ybWF0IHRoZSBkYXRlIHRvIG1hdGNoIHRoZSBmb3JtYXQgaW4gRmlyZXN0b3JlICgnTU0tZGQteXl5eScpXG4gICAgY29uc3QgZm9ybWF0dGVkRGF0ZSA9IGZvcm1hdChkYXRlLCAnTU0tZGQteXl5eScpO1xuXG4gICAgLy8gUmVmZXJlbmNlIHRvIHRoZSB1c2VyJ3Mgd29ya291dFN1bW1hcmllcyBzdWJjb2xsZWN0aW9uXG4gICAgY29uc3Qgc3VtbWFyaWVzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgY3VycmVudFVzZXIuaWQsICd3b3Jrb3V0U3VtbWFyaWVzJyk7XG5cbiAgICAvLyBDcmVhdGUgYSBxdWVyeSB0byBmaWx0ZXIgZG9jdW1lbnRzIGJ5IHRoZSBzcGVjaWZpZWQgZGF0ZVxuICAgIGNvbnN0IHEgPSBxdWVyeShzdW1tYXJpZXNSZWYsIHdoZXJlKCdkYXRlJywgJz09JywgZm9ybWF0dGVkRGF0ZSkpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcblxuICAgICAgLy8gTWFwIHRoZSBkb2N1bWVudHMgdG8gYW4gYXJyYXkgb2YgV29ya291dFN1bW1hcnkgb2JqZWN0c1xuICAgICAgcmV0dXJuIHNuYXBzaG90LmRvY3MubWFwKChkb2M6IERvY3VtZW50RGF0YSkgPT4gKHtcbiAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgLi4uZG9jLmRhdGEoKSxcbiAgICAgIH0pKSBhcyBXb3Jrb3V0U3VtbWFyeVtdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBmaXJlc3RvcmVFcnJvciA9IGVycm9yIGFzIEZpcmVzdG9yZUVycm9yO1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgd29ya291dCBzdW1tYXJpZXM6JywgZmlyZXN0b3JlRXJyb3IubWVzc2FnZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZmlyZXN0b3JlRXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZmV0Y2hBbGxXb3Jrb3V0U3VtbWFyaWVzKCk6IFByb21pc2U8V29ya291dFN1bW1hcnlbXT4ge1xuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlclNlcnZpY2UuY3VycmVudFVzZXI7XG4gICAgaWYgKCFjdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBpcyBzaWduZWQgaW4nKTtcbiAgICB9XG4gIFxuICAgIC8vIFJlZmVyZW5jZSB0byB0aGUgdXNlcidzIHdvcmtvdXRTdW1tYXJpZXMgc3ViY29sbGVjdGlvblxuICAgIGNvbnN0IHN1bW1hcmllc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycsIGN1cnJlbnRVc2VyLmlkLCAnd29ya291dFN1bW1hcnknKTtcbiAgXG4gICAgLy8gUXVlcnkgdG8gcmV0cmlldmUgYWxsIHdvcmtvdXQgc3VtbWFyaWVzLCBzb3J0ZWQgYnkgYGNyZWF0ZWRBdGAgaW4gYXNjZW5kaW5nIG9yZGVyXG4gICAgY29uc3QgcSA9IHF1ZXJ5KHN1bW1hcmllc1JlZiwgb3JkZXJCeSgnY3JlYXRlZEF0JywgJ2FzYycpKTsgLy8gQWRqdXN0IGZpZWxkIG5hbWUgYmFzZWQgb24geW91ciBzY2hlbWFcbiAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgXG4gICAgICAvLyBNYXAgdGhlIGRvY3VtZW50cyB0byBhbiBhcnJheSBvZiBXb3Jrb3V0U3VtbWFyeSBvYmplY3RzXG4gICAgICByZXR1cm4gc25hcHNob3QuZG9jcy5tYXAoKGRvYzogRG9jdW1lbnREYXRhKSA9PiAoe1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kb2MuZGF0YSgpLFxuICAgICAgfSkpIGFzIFdvcmtvdXRTdW1tYXJ5W107XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGZpcmVzdG9yZUVycm9yID0gZXJyb3IgYXMgRmlyZXN0b3JlRXJyb3I7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhbGwgd29ya291dCBzdW1tYXJpZXM6JywgZmlyZXN0b3JlRXJyb3IubWVzc2FnZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZmlyZXN0b3JlRXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAqIEZldGNoIHVzZXIgY2hhbGxlbmdlcyBieSB1c2VySWQuXG4gKiBAcGFyYW0gdXNlcklkIFRoZSBJRCBvZiB0aGUgdXNlciB0byBmZXRjaCBjaGFsbGVuZ2VzIGZvci5cbiAqIEByZXR1cm5zIEEgcHJvbWlzZSByZXNvbHZpbmcgdG8gYW4gYXJyYXkgb2YgdXNlciBjaGFsbGVuZ2VzLlxuICogQHRocm93cyBJZiB0aGUgRmlyZXN0b3JlIHF1ZXJ5IGZhaWxzLlxuICovXG5hc3luYyBmZXRjaFVzZXJDaGFsbGVuZ2VzQnlVc2VySWQodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXJDaGFsbGVuZ2VbXT4ge1xuICBjb25zdCB1c2VyQ2hhbGxlbmdlc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VyLWNoYWxsZW5nZScpO1xuICBjb25zdCBxID0gcXVlcnkodXNlckNoYWxsZW5nZXNSZWYsIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpKTtcblxuICB0cnkge1xuICAgIC8vIGNvbnNvbGUubG9nKGBGZXRjaGluZyBjaGFsbGVuZ2VzIGZvciB1c2VyIElEOiAke3VzZXJJZH1gKTtcblxuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcblxuICAgIC8vIGNvbnNvbGUubG9nKGBUb3RhbCBjaGFsbGVuZ2VzIGZldGNoZWQ6ICR7c25hcHNob3QuZG9jcy5sZW5ndGh9YCk7XG5cbiAgICBjb25zdCB1c2VyQ2hhbGxlbmdlcyA9IHNuYXBzaG90LmRvY3MubWFwKChkb2M6IERvY3VtZW50RGF0YSkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhgUHJvY2Vzc2luZyBjaGFsbGVuZ2Ugd2l0aCBJRDogJHtkb2MuaWR9YCwgZGF0YSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgIC4uLmRhdGEsXG4gICAgICAgIGNoYWxsZW5nZTogZGF0YS5jaGFsbGVuZ2VcbiAgICAgICAgICA/IG5ldyBDaGFsbGVuZ2Uoe1xuICAgICAgICAgICAgICBpZDogZGF0YS5jaGFsbGVuZ2UuaWQsXG4gICAgICAgICAgICAgIHRpdGxlOiBkYXRhLmNoYWxsZW5nZS50aXRsZSxcbiAgICAgICAgICAgICAgc3VidGl0bGU6IGRhdGEuY2hhbGxlbmdlLnN1YnRpdGxlLFxuICAgICAgICAgICAgICBwYXJ0aWNpcGFudHM6IGRhdGEuY2hhbGxlbmdlLnBhcnRpY2lwYW50cyB8fCBbXSxcbiAgICAgICAgICAgICAgc3RhdHVzOiBkYXRhLmNoYWxsZW5nZS5zdGF0dXMgYXMgQ2hhbGxlbmdlU3RhdHVzLFxuICAgICAgICAgICAgICBzdGFydERhdGU6IGRhdGEuY2hhbGxlbmdlLnN0YXJ0RGF0ZSA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLnN0YXJ0RGF0ZSkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICBlbmREYXRlOiBkYXRhLmNoYWxsZW5nZS5lbmREYXRlID8gbmV3IERhdGUoZGF0YS5jaGFsbGVuZ2UuZW5kRGF0ZSkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGRhdGEuY2hhbGxlbmdlLmNyZWF0ZWRBdCA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLmNyZWF0ZWRBdCkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICB1cGRhdGVkQXQ6IGRhdGEuY2hhbGxlbmdlLnVwZGF0ZWRBdCA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLnVwZGF0ZWRBdCkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICBpbnRyb1ZpZGVvczogKGRhdGEuY2hhbGxlbmdlLmludHJvVmlkZW9zIHx8IFtdKS5tYXAoKHY6IGFueSkgPT4gXG4gICAgICAgICAgICAgICAgbmV3IEludHJvVmlkZW8oe1xuICAgICAgICAgICAgICAgICAgaWQ6IHYuaWQsXG4gICAgICAgICAgICAgICAgICB1c2VySWQ6IHYudXNlcklkLFxuICAgICAgICAgICAgICAgICAgdmlkZW9Vcmw6IHYudmlkZW9VcmxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICBjcmVhdGVkQXQ6IGNvbnZlcnRUaW1lc3RhbXAoZGF0YS5jcmVhdGVkQXQpLFxuICAgICAgICB1cGRhdGVkQXQ6IGNvbnZlcnRUaW1lc3RhbXAoZGF0YS51cGRhdGVkQXQpLFxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8vIGNvbnNvbGUubG9nKCdBbGwgY2hhbGxlbmdlcyBhZnRlciBwcm9jZXNzaW5nOicsIEpTT04uc3RyaW5naWZ5KHVzZXJDaGFsbGVuZ2VzLCBudWxsLCAyKSk7XG5cbiAgICByZXR1cm4gdXNlckNoYWxsZW5nZXM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBjaGFsbGVuZ2VzIGJ5IHVzZXJJZDonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuYXN5bmMgZmV0Y2hDb2xsZWN0aW9uV2l0aFN3ZWF0TGlzdHMoY29sbGVjdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPHsgY29sbGVjdGlvbjogYW55LCBzd2VhdExpc3RzOiBXb3Jrb3V0W10gfT4ge1xuICB0cnkge1xuICAgIC8vIEZldGNoIHRoZSBjb2xsZWN0aW9uXG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IHRoaXMuZ2V0Q29sbGVjdGlvbkJ5SWQoY29sbGVjdGlvbklkKTtcblxuICAgIC8vIEZldGNoIHN3ZWF0IGxpc3RzICh3b3Jrb3V0cylcbiAgICBjb25zdCBzd2VhdExpc3RzOiBXb3Jrb3V0W10gPSBbXTtcbiAgICBcbiAgICAvLyBBc3N1bWluZyBjb2xsZWN0aW9uIGhhcyBzd2VhdGxpc3RJZHMgd2l0aCBhdXRob3IgYW5kIHdvcmtvdXQgSURzXG4gICAgZm9yIChjb25zdCBzd2VhdGxpc3RJZGVudGlmaWVyIG9mIGNvbGxlY3Rpb24uc3dlYXRsaXN0SWRzIHx8IFtdKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBbd29ya291dF0gPSBhd2FpdCB0aGlzLmZldGNoU2F2ZWRXb3Jrb3V0KFxuICAgICAgICAgIHN3ZWF0bGlzdElkZW50aWZpZXIuc3dlYXRsaXN0QXV0aG9ySWQsIFxuICAgICAgICAgIHN3ZWF0bGlzdElkZW50aWZpZXIuaWRcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh3b3Jrb3V0KSB7XG4gICAgICAgICAgc3dlYXRMaXN0cy5wdXNoKHdvcmtvdXQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmZXRjaGluZyB3b3Jrb3V0ICR7c3dlYXRsaXN0SWRlbnRpZmllci5pZH06YCwgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IGNvbGxlY3Rpb24sIHN3ZWF0TGlzdHMgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjb2xsZWN0aW9uIHdpdGggc3dlYXQgbGlzdHM6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8vIE9wdGlvbmFsIGhlbHBlciBtZXRob2RzIGZvciBwYXJzaW5nIGlmIG5lZWRlZFxucHJpdmF0ZSBwYXJzZVdvcmtvdXREYXRhKGRhdGE6IERvY3VtZW50RGF0YSk6IFdvcmtvdXQge1xuICByZXR1cm4gbmV3IFdvcmtvdXQoe1xuICAgIGlkOiBkYXRhLmlkIHx8ICcnLFxuICAgIHJvdW5kV29ya291dElkOiBkYXRhLnJvdW5kV29ya291dElkIHx8ICcnLFxuICAgIGNvbGxlY3Rpb25JZDogZGF0YS5jb2xsZWN0aW9uSWQgfHwgW10sXG4gICAgZXhlcmNpc2VzOiBkYXRhLmV4ZXJjaXNlcyB8fCBbXSxcbiAgICBjaGFsbGVuZ2U6IGRhdGEuY2hhbGxlbmdlIFxuICAgICAgPyBuZXcgQ2hhbGxlbmdlKHtcbiAgICAgICAgICBpZDogZGF0YS5jaGFsbGVuZ2UuaWQsXG4gICAgICAgICAgdGl0bGU6IGRhdGEuY2hhbGxlbmdlLnRpdGxlLFxuICAgICAgICAgIHN1YnRpdGxlOiBkYXRhLmNoYWxsZW5nZS5zdWJ0aXRsZSxcbiAgICAgICAgICBwYXJ0aWNpcGFudHM6IGRhdGEuY2hhbGxlbmdlLnBhcnRpY2lwYW50cyB8fCBbXSxcbiAgICAgICAgICBzdGF0dXM6IGRhdGEuY2hhbGxlbmdlLnN0YXR1cyBhcyBDaGFsbGVuZ2VTdGF0dXMsXG4gICAgICAgICAgc3RhcnREYXRlOiBkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUgaW5zdGFuY2VvZiBEYXRlIFxuICAgICAgICAgICAgPyBkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUgXG4gICAgICAgICAgICA6IChkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUpIDogbmV3IERhdGUoKSksXG4gICAgICAgICAgZW5kRGF0ZTogZGF0YS5jaGFsbGVuZ2UuZW5kRGF0ZSBpbnN0YW5jZW9mIERhdGUgXG4gICAgICAgICAgICA/IGRhdGEuY2hhbGxlbmdlLmVuZERhdGUgXG4gICAgICAgICAgICA6IChkYXRhLmNoYWxsZW5nZS5lbmREYXRlID8gbmV3IERhdGUoZGF0YS5jaGFsbGVuZ2UuZW5kRGF0ZSkgOiBuZXcgRGF0ZSgpKSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IGRhdGEuY2hhbGxlbmdlLmNyZWF0ZWRBdCBpbnN0YW5jZW9mIERhdGUgXG4gICAgICAgICAgICA/IGRhdGEuY2hhbGxlbmdlLmNyZWF0ZWRBdCBcbiAgICAgICAgICAgIDogKGRhdGEuY2hhbGxlbmdlLmNyZWF0ZWRBdCA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLmNyZWF0ZWRBdCkgOiBuZXcgRGF0ZSgpKSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IGRhdGEuY2hhbGxlbmdlLnVwZGF0ZWRBdCBpbnN0YW5jZW9mIERhdGUgXG4gICAgICAgICAgICA/IGRhdGEuY2hhbGxlbmdlLnVwZGF0ZWRBdCBcbiAgICAgICAgICAgIDogKGRhdGEuY2hhbGxlbmdlLnVwZGF0ZWRBdCA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLnVwZGF0ZWRBdCkgOiBuZXcgRGF0ZSgpKSxcbiAgICAgICAgICAgIGludHJvVmlkZW9zOiAoZGF0YS5jaGFsbGVuZ2UuaW50cm9WaWRlb3MgfHwgW10pLm1hcCgodjogYW55KSA9PiBcbiAgICAgICAgICAgICAgbmV3IEludHJvVmlkZW8oe1xuICAgICAgICAgICAgICAgIGlkOiB2LmlkLFxuICAgICAgICAgICAgICAgIHVzZXJJZDogdi51c2VySWQsXG4gICAgICAgICAgICAgICAgdmlkZW9Vcmw6IHYudmlkZW9VcmxcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgfSlcbiAgICAgIDogdW5kZWZpbmVkLFxuICAgIGxvZ3M6IGRhdGEubG9ncyB8fCBbXSxcbiAgICB0aXRsZTogZGF0YS50aXRsZSB8fCAnJyxcbiAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICBkdXJhdGlvbjogZGF0YS5kdXJhdGlvbiB8fCAwLFxuICAgIHdvcmtvdXRSYXRpbmc6IGRhdGEud29ya291dFJhdGluZyxcbiAgICB1c2VBdXRob3JDb250ZW50OiBkYXRhLnVzZUF1dGhvckNvbnRlbnQgfHwgZmFsc2UsXG4gICAgaXNDb21wbGV0ZWQ6IGRhdGEuaXNDb21wbGV0ZWQgfHwgZmFsc2UsXG4gICAgd29ya291dFN0YXR1czogZGF0YS53b3Jrb3V0U3RhdHVzIHx8IFdvcmtvdXRTdGF0dXMuUXVldWVkVXAsXG4gICAgc3RhcnRUaW1lOiBkYXRhLnN0YXJ0VGltZSBpbnN0YW5jZW9mIERhdGUgXG4gICAgICA/IGRhdGEuc3RhcnRUaW1lIFxuICAgICAgOiAoZGF0YS5zdGFydFRpbWUgPyBuZXcgRGF0ZShkYXRhLnN0YXJ0VGltZSkgOiB1bmRlZmluZWQpLFxuICAgIG9yZGVyOiBkYXRhLm9yZGVyIHx8IDAsXG4gICAgYXV0aG9yOiBkYXRhLmF1dGhvciB8fCAnJyxcbiAgICBjcmVhdGVkQXQ6IGRhdGEuY3JlYXRlZEF0IGluc3RhbmNlb2YgRGF0ZSBcbiAgICAgID8gZGF0YS5jcmVhdGVkQXQgXG4gICAgICA6ICh0eXBlb2YgZGF0YS5jcmVhdGVkQXQ/LnRvRGF0ZSA9PT0gJ2Z1bmN0aW9uJyBcbiAgICAgICAgPyBkYXRhLmNyZWF0ZWRBdC50b0RhdGUoKSBcbiAgICAgICAgOiAoZGF0YS5jcmVhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNyZWF0ZWRBdCkgOiBuZXcgRGF0ZSgpKSksXG4gICAgdXBkYXRlZEF0OiBkYXRhLnVwZGF0ZWRBdCBpbnN0YW5jZW9mIERhdGUgXG4gICAgICA/IGRhdGEudXBkYXRlZEF0IFxuICAgICAgOiAodHlwZW9mIGRhdGEudXBkYXRlZEF0Py50b0RhdGUgPT09ICdmdW5jdGlvbicgXG4gICAgICAgID8gZGF0YS51cGRhdGVkQXQudG9EYXRlKCkgXG4gICAgICAgIDogKGRhdGEudXBkYXRlZEF0ID8gbmV3IERhdGUoZGF0YS51cGRhdGVkQXQpIDogbmV3IERhdGUoKSkpLFxuICAgIHpvbmU6IGRhdGEuem9uZSB8fCBCb2R5Wm9uZS5GdWxsQm9keSxcbiAgICBlc3RpbWF0ZWREdXJhdGlvbjogKCkgPT4gZGF0YS5kdXJhdGlvbiB8fCAwLFxuICAgIGRldGVybWluZVdvcmtvdXRab25lOiAoKSA9PiBkYXRhLnpvbmUgfHwgQm9keVpvbmUuRnVsbEJvZHksXG4gICAgdG9EaWN0aW9uYXJ5OiAoKSA9PiAoe30pIC8vIFBsYWNlaG9sZGVyLCBpbXBsZW1lbnQgYXMgbmVlZGVkXG4gIH0gYXMgV29ya291dCk7XG59XG5cbnByaXZhdGUgY3JlYXRlRGVmYXVsdEV4ZXJjaXNlKCk6IEV4ZXJjaXNlIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogJycsXG4gICAgbmFtZTogJycsXG4gICAgY2F0ZWdvcnk6IHtcbiAgICAgIHR5cGU6ICd3ZWlnaHRUcmFpbmluZycsXG4gICAgICBkZXRhaWxzOiB7XG4gICAgICAgIHJlcHM6ICcnLFxuICAgICAgICBzZXRzOiAwLFxuICAgICAgICB3ZWlnaHQ6IDAsXG4gICAgICAgIHNjcmVlblRpbWU6IDAsXG4gICAgICAgIHNlbGVjdGVkVmlkZW86IHRoaXMucGFyc2VFeGVyY2lzZVZpZGVvKHt9KSAvLyBVc2UgZXhpc3RpbmcgbWV0aG9kIHRvIGNyZWF0ZSBhIGRlZmF1bHQgdmlkZW9cbiAgICAgIH1cbiAgICB9LFxuICAgIHByaW1hcnlCb2R5UGFydHM6IFtdLFxuICAgIHNlY29uZGFyeUJvZHlQYXJ0czogW10sXG4gICAgdGFnczogW10sXG4gICAgZGVzY3JpcHRpb246ICcnLFxuICAgIHZpc2liaWxpdHk6ICdsaXZlJywgLy8gRGVmYXVsdCB0byAnbGltaXRlZCdcbiAgICBzdGVwczogW10sXG4gICAgdmlkZW9zOiBbXSxcbiAgICBjdXJyZW50VmlkZW9Qb3NpdGlvbjogMCxcbiAgICByZXBzOiAnJyxcbiAgICBzZXRzOiAwLFxuICAgIHdlaWdodDogMCxcbiAgICBhdXRob3I6IHtcbiAgICAgIHVzZXJJZDogJycsXG4gICAgICB1c2VybmFtZTogJydcbiAgICB9LFxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcbiAgfTtcbn1cblxucHJpdmF0ZSBwYXJzZUV4ZXJjaXNlTG9nRGF0YShkYXRhOiBEb2N1bWVudERhdGEpOiBFeGVyY2lzZUxvZyB7XG4gIHJldHVybiB7XG4gICAgaWQ6IGRhdGEuaWQgfHwgJycsXG4gICAgd29ya291dElkOiBkYXRhLndvcmtvdXRJZCB8fCAnJyxcbiAgICB1c2VySWQ6IGRhdGEudXNlcklkIHx8ICcnLFxuICAgIGV4ZXJjaXNlOiBkYXRhLmV4ZXJjaXNlIFxuICAgICAgPyB0aGlzLnBhcnNlRXhlcmNpc2UoZGF0YS5leGVyY2lzZSkgXG4gICAgICA6IHRoaXMuY3JlYXRlRGVmYXVsdEV4ZXJjaXNlKCksXG4gICAgbG9nczogKGRhdGEubG9nIHx8IFtdKS5tYXAoKGxvZ0VudHJ5OiBhbnkpID0+ICh7XG4gICAgICByZXBzOiBwYXJzZUludChsb2dFbnRyeS5yZXBzIHx8ICcwJyksXG4gICAgICB3ZWlnaHQ6IHBhcnNlRmxvYXQobG9nRW50cnkud2VpZ2h0IHx8ICcwJyksXG4gICAgICBsZWZ0UmVwczogcGFyc2VJbnQobG9nRW50cnkubGVmdFJlcHMgfHwgJzAnKSxcbiAgICAgIGxlZnRXZWlnaHQ6IHBhcnNlRmxvYXQobG9nRW50cnkubGVmdFdlaWdodCB8fCAnMCcpLFxuICAgICAgaXNTcGxpdDogbG9nRW50cnkuaXNTcGxpdCB8fCBmYWxzZSxcbiAgICAgIGlzQm9keVdlaWdodDogbG9nRW50cnkuaXNCb2R5V2VpZ2h0IHx8IGZhbHNlLFxuICAgICAgaXNDb21wbGV0ZWQ6IGxvZ0VudHJ5LmlzQ29tcGxldGVkIHx8IGZhbHNlLFxuICAgICAgZHVyYXRpb246IHBhcnNlSW50KGxvZ0VudHJ5LmR1cmF0aW9uIHx8ICcwJyksXG4gICAgICBjYWxvcmllczogcGFyc2VJbnQobG9nRW50cnkuY2Fsb3JpZXMgfHwgJzAnKSxcbiAgICAgIGJwbTogcGFyc2VJbnQobG9nRW50cnkuYnBtIHx8ICcwJylcbiAgICB9KSksXG4gICAgZmVlZGJhY2s6IGRhdGEuZmVlZGJhY2sgfHwgJycsXG4gICAgbm90ZTogZGF0YS5ub3RlIHx8ICcnLFxuICAgIHJlY29tbWVuZGVkV2VpZ2h0OiBkYXRhLnJlY29tbWVuZGVkV2VpZ2h0LFxuICAgIGlzU3BsaXQ6IGRhdGEuaXNTcGxpdCB8fCBmYWxzZSxcbiAgICBpc0JvZHlXZWlnaHQ6IGRhdGEuaXNCb2R5V2VpZ2h0IHx8IGZhbHNlLFxuICAgIGxvZ1N1Ym1pdHRlZDogZGF0YS5sb2dTdWJtaXR0ZWQgfHwgZmFsc2UsXG4gICAgbG9nSXNFZGl0aW5nOiBkYXRhLmxvZ0lzRWRpdGluZyB8fCBmYWxzZSxcbiAgICBpc0NvbXBsZXRlZDogZGF0YS5pc0NvbXBsZXRlZCB8fCBmYWxzZSxcbiAgICBjcmVhdGVkQXQ6IGRhdGEuY3JlYXRlZEF0IGluc3RhbmNlb2YgRGF0ZSBcbiAgICAgID8gZGF0YS5jcmVhdGVkQXQgXG4gICAgICA6ICh0eXBlb2YgZGF0YS5jcmVhdGVkQXQ/LnRvRGF0ZSA9PT0gJ2Z1bmN0aW9uJyBcbiAgICAgICAgPyBkYXRhLmNyZWF0ZWRBdC50b0RhdGUoKSBcbiAgICAgICAgOiAoZGF0YS5jcmVhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNyZWF0ZWRBdCkgOiBuZXcgRGF0ZSgpKSksXG4gICAgdXBkYXRlZEF0OiBkYXRhLnVwZGF0ZWRBdCBpbnN0YW5jZW9mIERhdGUgXG4gICAgICA/IGRhdGEudXBkYXRlZEF0IFxuICAgICAgOiAodHlwZW9mIGRhdGEudXBkYXRlZEF0Py50b0RhdGUgPT09ICdmdW5jdGlvbicgXG4gICAgICAgID8gZGF0YS51cGRhdGVkQXQudG9EYXRlKCkgXG4gICAgICAgIDogKGRhdGEudXBkYXRlZEF0ID8gbmV3IERhdGUoZGF0YS51cGRhdGVkQXQpIDogbmV3IERhdGUoKSkpXG4gIH07XG59XG5cbi8vIFlvdSdsbCBhbHNvIG5lZWQgdG8gaW1wbGVtZW50IHBhcnNlRXhlcmNpc2Ugc2ltaWxhciB0byB0aGUgb3JpZ2luYWwgaW1wbGVtZW50YXRpb25cbnByaXZhdGUgcGFyc2VFeGVyY2lzZShmaWVsZHM6IGFueSk6IEV4ZXJjaXNlIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogZmllbGRzLmlkPy5zdHJpbmdWYWx1ZSB8fCBmaWVsZHMuaWQgfHwgJycsXG4gICAgbmFtZTogZmllbGRzLm5hbWU/LnN0cmluZ1ZhbHVlIHx8IGZpZWxkcy5uYW1lIHx8ICcnLFxuICAgIGNhdGVnb3J5OiB0aGlzLnBhcnNlRXhlcmNpc2VDYXRlZ29yeShmaWVsZHMuY2F0ZWdvcnk/Lm1hcFZhbHVlPy5maWVsZHMgfHwgZmllbGRzLmNhdGVnb3J5IHx8IHt9KSxcbiAgICBwcmltYXJ5Qm9keVBhcnRzOiB0aGlzLnBhcnNlQm9keVBhcnRzKGZpZWxkcy5wcmltYXJ5Qm9keVBhcnRzKSxcbiAgICBzZWNvbmRhcnlCb2R5UGFydHM6IHRoaXMucGFyc2VCb2R5UGFydHMoZmllbGRzLnNlY29uZGFyeUJvZHlQYXJ0cyksXG4gICAgdGFnczogKGZpZWxkcy50YWdzPy5hcnJheVZhbHVlPy52YWx1ZXMgfHwgZmllbGRzLnRhZ3MgfHwgW10pLm1hcCgodGFnOiBhbnkpID0+IHRhZy5zdHJpbmdWYWx1ZSB8fCB0YWcpLFxuICAgIGRlc2NyaXB0aW9uOiBmaWVsZHMuZGVzY3JpcHRpb24/LnN0cmluZ1ZhbHVlIHx8IGZpZWxkcy5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICB2aXNpYmlsaXR5OiAoZmllbGRzLnZpc2liaWxpdHk/LmFycmF5VmFsdWU/LnZhbHVlcyB8fCBmaWVsZHMudmlzaWJpbGl0eSB8fCBbXSkubWFwKCh2OiBhbnkpID0+IHYuc3RyaW5nVmFsdWUgfHwgdiksXG4gICAgc3RlcHM6IChmaWVsZHMuc3RlcHM/LmFycmF5VmFsdWU/LnZhbHVlcyB8fCBmaWVsZHMuc3RlcHMgfHwgW10pLm1hcCgoc3RlcDogYW55KSA9PiBzdGVwLnN0cmluZ1ZhbHVlIHx8IHN0ZXApLFxuICAgIHZpZGVvczogdGhpcy5wYXJzZVZpZGVvcyhmaWVsZHMudmlkZW9zKSxcbiAgICBjdXJyZW50VmlkZW9Qb3NpdGlvbjogcGFyc2VJbnQoZmllbGRzLmN1cnJlbnRWaWRlb1Bvc2l0aW9uPy5pbnRlZ2VyVmFsdWUgfHwgZmllbGRzLmN1cnJlbnRWaWRlb1Bvc2l0aW9uIHx8ICcwJyksXG4gICAgcmVwczogZmllbGRzLnJlcHM/LnN0cmluZ1ZhbHVlIHx8IGZpZWxkcy5yZXBzIHx8ICcnLFxuICAgIHNldHM6IHBhcnNlSW50KGZpZWxkcy5zZXRzPy5pbnRlZ2VyVmFsdWUgfHwgZmllbGRzLnNldHMgfHwgJzAnKSxcbiAgICB3ZWlnaHQ6IHBhcnNlRmxvYXQoZmllbGRzLndlaWdodD8uZG91YmxlVmFsdWUgfHwgZmllbGRzLndlaWdodCB8fCAnMCcpLFxuICAgIFxuICAgIGF1dGhvcjogdGhpcy5wYXJzZUV4ZXJjaXNlQXV0aG9yKGZpZWxkcy5hdXRob3I/Lm1hcFZhbHVlPy5maWVsZHMgfHwgZmllbGRzLmF1dGhvciB8fCB7fSksXG4gICAgY3JlYXRlZEF0OiBuZXcgRGF0ZShwYXJzZUZsb2F0KGZpZWxkcy5jcmVhdGVkQXQ/LmRvdWJsZVZhbHVlIHx8IGZpZWxkcy5jcmVhdGVkQXQgfHwgJzAnKSAqIDEwMDApLFxuICAgIHVwZGF0ZWRBdDogbmV3IERhdGUocGFyc2VGbG9hdChmaWVsZHMudXBkYXRlZEF0Py5kb3VibGVWYWx1ZSB8fCBmaWVsZHMudXBkYXRlZEF0IHx8ICcwJykgKiAxMDAwKVxuICB9O1xufVxuXG4vLyBZb3UnbGwgbmVlZCB0byBpbXBsZW1lbnQgdGhlc2UgaGVscGVyIG1ldGhvZHMgYXMgd2VsbFxucHJpdmF0ZSBwYXJzZUV4ZXJjaXNlQ2F0ZWdvcnkoZmllbGRzOiBhbnkpOiBFeGVyY2lzZUNhdGVnb3J5IHtcbiAgLy8gSW1wbGVtZW50YXRpb24gc2ltaWxhciB0byB0aGUgb3JpZ2luYWwgc2VydmljZVxuICBjb25zdCBjYXRlZ29yeUlkID0gZmllbGRzLmlkPy5zdHJpbmdWYWx1ZSB8fCBmaWVsZHMuaWQgfHwgJyc7XG4gIGlmIChjYXRlZ29yeUlkID09PSAnY2FyZGlvJykge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnY2FyZGlvJyxcbiAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgZHVyYXRpb246IHBhcnNlSW50KGZpZWxkcy5kdXJhdGlvbj8uaW50ZWdlclZhbHVlIHx8IGZpZWxkcy5kdXJhdGlvbiB8fCAnMCcpLFxuICAgICAgICBicG06IHBhcnNlSW50KGZpZWxkcy5icG0/LmludGVnZXJWYWx1ZSB8fCBmaWVsZHMuYnBtIHx8ICcwJyksXG4gICAgICAgIGNhbG9yaWVzOiBwYXJzZUludChmaWVsZHMuY2Fsb3JpZXM/LmludGVnZXJWYWx1ZSB8fCBmaWVsZHMuY2Fsb3JpZXMgfHwgJzAnKSxcbiAgICAgICAgc2NyZWVuVGltZTogcGFyc2VJbnQoZmllbGRzLnNjcmVlblRpbWU/LmludGVnZXJWYWx1ZSB8fCBmaWVsZHMuc2NyZWVuVGltZSB8fCAnMCcpLFxuICAgICAgICBzZWxlY3RlZFZpZGVvOiB0aGlzLnBhcnNlRXhlcmNpc2VWaWRlbyhmaWVsZHMuc2VsZWN0ZWRWaWRlbz8ubWFwVmFsdWU/LmZpZWxkcyB8fCBmaWVsZHMuc2VsZWN0ZWRWaWRlbykgIFxuICAgICAgfVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICd3ZWlnaHRUcmFpbmluZycsXG4gICAgICBkZXRhaWxzOiB7XG4gICAgICAgIHJlcHM6IGZpZWxkcy5yZXBzPy5zdHJpbmdWYWx1ZSB8fCBmaWVsZHMucmVwcyB8fCAnJyxcbiAgICAgICAgc2V0czogcGFyc2VJbnQoZmllbGRzLnNldHM/LmludGVnZXJWYWx1ZSB8fCBmaWVsZHMuc2V0cyB8fCAnMCcpLFxuICAgICAgICB3ZWlnaHQ6IHBhcnNlRmxvYXQoZmllbGRzLndlaWdodD8uZG91YmxlVmFsdWUgfHwgZmllbGRzLndlaWdodCB8fCAnMCcpLFxuICAgICAgICBzY3JlZW5UaW1lOiBwYXJzZUludChmaWVsZHMuc2NyZWVuVGltZT8uaW50ZWdlclZhbHVlIHx8IGZpZWxkcy5zY3JlZW5UaW1lIHx8ICcwJyksXG4gICAgICAgIHNlbGVjdGVkVmlkZW86IHRoaXMucGFyc2VFeGVyY2lzZVZpZGVvKGZpZWxkcy5zZWxlY3RlZFZpZGVvPy5tYXBWYWx1ZT8uZmllbGRzIHx8IGZpZWxkcy5zZWxlY3RlZFZpZGVvKVxuICAgICAgfVxuICAgIH07XG4gIH1cbn1cblxucHJpdmF0ZSBwYXJzZUJvZHlQYXJ0cyhib2R5UGFydHNGaWVsZDogYW55KTogQm9keVBhcnRbXSB7XG4gIGNvbnN0IGJvZHlQYXJ0c0FycmF5ID0gYm9keVBhcnRzRmllbGQ/LmFycmF5VmFsdWU/LnZhbHVlcyB8fCBib2R5UGFydHNGaWVsZCB8fCBbXTtcbiAgcmV0dXJuIGJvZHlQYXJ0c0FycmF5Lm1hcCgocGFydDogYW55KSA9PiBwYXJ0LnN0cmluZ1ZhbHVlIHx8IHBhcnQpO1xufVxuXG5wcml2YXRlIHBhcnNlVmlkZW9zKHZpZGVvc0ZpZWxkOiBhbnkpOiBFeGVyY2lzZVZpZGVvW10ge1xuICBjb25zdCB2aWRlb3NBcnJheSA9IHZpZGVvc0ZpZWxkPy5hcnJheVZhbHVlPy52YWx1ZXMgfHwgdmlkZW9zRmllbGQgfHwgW107XG4gIHJldHVybiB2aWRlb3NBcnJheS5tYXAoKHZpZGVvRGF0YTogYW55KSA9PiBcbiAgICB0aGlzLnBhcnNlRXhlcmNpc2VWaWRlbyh2aWRlb0RhdGEubWFwVmFsdWU/LmZpZWxkcyB8fCB2aWRlb0RhdGEpXG4gICk7XG59XG5cbnByaXZhdGUgcGFyc2VFeGVyY2lzZVZpZGVvKGZpZWxkczogYW55KTogRXhlcmNpc2VWaWRlbyB7XG4gIHJldHVybiB7XG4gICAgaWQ6IGZpZWxkcy5pZD8uc3RyaW5nVmFsdWUgfHwgZmllbGRzLmlkIHx8ICcnLFxuICAgIGV4ZXJjaXNlSWQ6IGZpZWxkcy5leGVyY2lzZUlkPy5zdHJpbmdWYWx1ZSB8fCBmaWVsZHMuZXhlcmNpc2VJZCB8fCAnJyxcbiAgICB1c2VybmFtZTogZmllbGRzLnVzZXJuYW1lPy5zdHJpbmdWYWx1ZSB8fCBmaWVsZHMudXNlcm5hbWUgfHwgJycsXG4gICAgdXNlcklkOiBmaWVsZHMudXNlcklkPy5zdHJpbmdWYWx1ZSB8fCBmaWVsZHMudXNlcklkIHx8ICcnLFxuICAgIHZpZGVvVVJMOiBmaWVsZHMudmlkZW9VUkw/LnN0cmluZ1ZhbHVlIHx8IGZpZWxkcy52aWRlb1VSTCB8fCAnJyxcbiAgICBmaWxlTmFtZTogZmllbGRzLmZpbGVOYW1lPy5zdHJpbmdWYWx1ZSB8fCBmaWVsZHMuZmlsZU5hbWUgfHwgJycsXG4gICAgZXhlcmNpc2U6IGZpZWxkcy5leGVyY2lzZT8uc3RyaW5nVmFsdWUgfHwgZmllbGRzLmV4ZXJjaXNlIHx8ICcnLFxuICAgIHByb2ZpbGVJbWFnZTogdGhpcy5wYXJzZVByb2ZpbGVJbWFnZShmaWVsZHMucHJvZmlsZUltYWdlPy5tYXBWYWx1ZT8uZmllbGRzIHx8IGZpZWxkcy5wcm9maWxlSW1hZ2UgfHwge30pLFxuICAgIGNhcHRpb246IGZpZWxkcy5jYXB0aW9uPy5zdHJpbmdWYWx1ZSB8fCBmaWVsZHMuY2FwdGlvbiB8fCAnJyxcbiAgICBnaWZVUkw6IGZpZWxkcy5naWZVUkw/LnN0cmluZ1ZhbHVlIHx8IGZpZWxkcy5naWZVUkwgfHwgJycsXG4gICAgdGh1bWJuYWlsOiBmaWVsZHMudGh1bWJuYWlsPy5zdHJpbmdWYWx1ZSB8fCBmaWVsZHMudGh1bWJuYWlsIHx8ICcnLFxuICAgIHZpc2liaWxpdHk6IGZpZWxkcy52aXNpYmlsaXR5Py5zdHJpbmdWYWx1ZSB8fCBmaWVsZHMudmlzaWJpbGl0eSB8fCAnb3BlbicsXG4gICAgdG90YWxBY2NvdW50c1JlYWNoZWQ6IHBhcnNlSW50KGZpZWxkcy50b3RhbEFjY291bnRzUmVhY2hlZD8uaW50ZWdlclZhbHVlIHx8IGZpZWxkcy50b3RhbEFjY291bnRzUmVhY2hlZCB8fCAnMCcpLFxuICAgIHRvdGFsQWNjb3VudExpa2VzOiBwYXJzZUludChmaWVsZHMudG90YWxBY2NvdW50TGlrZXM/LmludGVnZXJWYWx1ZSB8fCBmaWVsZHMudG90YWxBY2NvdW50TGlrZXMgfHwgJzAnKSxcbiAgICB0b3RhbEFjY291bnRCb29rbWFya2VkOiBwYXJzZUludChmaWVsZHMudG90YWxBY2NvdW50Qm9va21hcmtlZD8uaW50ZWdlclZhbHVlIHx8IGZpZWxkcy50b3RhbEFjY291bnRCb29rbWFya2VkIHx8ICcwJyksXG4gICAgdG90YWxBY2NvdW50VXNhZ2U6IHBhcnNlSW50KGZpZWxkcy50b3RhbEFjY291bnRVc2FnZT8uaW50ZWdlclZhbHVlIHx8IGZpZWxkcy50b3RhbEFjY291bnRVc2FnZSB8fCAnMCcpLFxuICAgIGlzQXBwcm92ZWQ6IGZpZWxkcy5pc0FwcHJvdmVkPy5ib29sZWFuVmFsdWUgfHwgZmllbGRzLmlzQXBwcm92ZWQgfHwgZmFsc2UsXG4gICAgbGlrZWQ6IGZpZWxkcy5saWtlZD8uYm9vbGVhblZhbHVlIHx8IGZpZWxkcy5saWtlZCxcbiAgICBib29rbWFya2VkOiBmaWVsZHMuYm9va21hcmtlZD8uYm9vbGVhblZhbHVlIHx8IGZpZWxkcy5ib29rbWFya2VkLFxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUocGFyc2VGbG9hdChmaWVsZHMuY3JlYXRlZEF0Py5kb3VibGVWYWx1ZSB8fCBmaWVsZHMuY3JlYXRlZEF0IHx8ICcwJykgKiAxMDAwKSxcbiAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKHBhcnNlRmxvYXQoZmllbGRzLnVwZGF0ZWRBdD8uZG91YmxlVmFsdWUgfHwgZmllbGRzLnVwZGF0ZWRBdCB8fCAnMCcpICogMTAwMClcbiAgfTtcbn1cblxucHJpdmF0ZSBwYXJzZVByb2ZpbGVJbWFnZShmaWVsZHM6IGFueSk6IFByb2ZpbGVJbWFnZSB7XG4gIHJldHVybiB7XG4gICAgcHJvZmlsZUltYWdlVVJMOiBmaWVsZHMucHJvZmlsZUltYWdlVVJMPy5zdHJpbmdWYWx1ZSB8fCBmaWVsZHMucHJvZmlsZUltYWdlVVJMIHx8ICcnLFxuICAgIGltYWdlT2Zmc2V0V2lkdGg6IHBhcnNlRmxvYXQoZmllbGRzLmltYWdlT2Zmc2V0V2lkdGg/LmRvdWJsZVZhbHVlIHx8IGZpZWxkcy5pbWFnZU9mZnNldFdpZHRoIHx8ICcwJyksXG4gICAgaW1hZ2VPZmZzZXRIZWlnaHQ6IHBhcnNlRmxvYXQoZmllbGRzLmltYWdlT2Zmc2V0SGVpZ2h0Py5kb3VibGVWYWx1ZSB8fCBmaWVsZHMuaW1hZ2VPZmZzZXRIZWlnaHQgfHwgJzAnKVxuICB9O1xufVxuXG5wcml2YXRlIHBhcnNlRXhlcmNpc2VBdXRob3IoZmllbGRzOiBhbnkpOiBFeGVyY2lzZUF1dGhvciB7XG4gIHJldHVybiB7XG4gICAgdXNlcklkOiBmaWVsZHMudXNlcklkPy5zdHJpbmdWYWx1ZSB8fCBmaWVsZHMudXNlcklkIHx8ICcnLFxuICAgIHVzZXJuYW1lOiBmaWVsZHMudXNlcm5hbWU/LnN0cmluZ1ZhbHVlIHx8IGZpZWxkcy51c2VybmFtZSB8fCAnJ1xuICB9O1xufVxuXG5hc3luYyBmZXRjaFNhdmVkV29ya291dCh1c2VySWQ6IHN0cmluZywgd29ya291dElkOiBzdHJpbmcpOiBQcm9taXNlPFtXb3Jrb3V0IHwgbnVsbCwgRXhlcmNpc2VMb2dbXSB8IG51bGxdPiB7XG4gIHRyeSB7XG4gICAgLy8gRmV0Y2ggdGhlIHdvcmtvdXQgZG9jdW1lbnRcbiAgICBjb25zdCB3b3Jrb3V0UmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VySWQsICdNeUNyZWF0ZWRXb3Jrb3V0cycsIHdvcmtvdXRJZCk7XG4gICAgY29uc3Qgd29ya291dFNuYXAgPSBhd2FpdCBnZXREb2Mod29ya291dFJlZik7XG5cbiAgICBpZiAoIXdvcmtvdXRTbmFwLmV4aXN0cygpKSB7XG4gICAgICByZXR1cm4gW251bGwsIG51bGxdO1xuICAgIH1cblxuICAgIC8vIEdldCBleGVyY2lzZXMgd2l0aCB2aWRlb3MgbWFwcGVkXG4gICAgY29uc3QgZXhlcmNpc2VzV2l0aFZpZGVvcyA9IGF3YWl0IHRoaXMuZmV0Y2hBbmRNYXBFeGVyY2lzZXNXaXRoVmlkZW9zKCk7XG4gICAgY29uc3Qgd29ya291dERhdGEgPSB3b3Jrb3V0U25hcC5kYXRhKCk7XG5cbiAgICAvLyBNYXAgdGhlIGV4ZXJjaXNlcyBpbiB0aGUgd29ya291dCB0byB0aGUgZnVsbCBleGVyY2lzZSBvYmplY3RzIHdpdGggdmlkZW9zXG4gICAgY29uc3QgbWFwcGVkRXhlcmNpc2VzID0gKHdvcmtvdXREYXRhLmV4ZXJjaXNlcyB8fCBbXSkubWFwKChleGVyY2lzZVJlZjogYW55KSA9PiB7XG4gICAgICBjb25zdCBmdWxsRXhlcmNpc2UgPSBleGVyY2lzZXNXaXRoVmlkZW9zLmZpbmQoZXggPT4gZXgubmFtZSA9PT0gZXhlcmNpc2VSZWYuZXhlcmNpc2UubmFtZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5leGVyY2lzZVJlZixcbiAgICAgICAgZXhlcmNpc2U6IGZ1bGxFeGVyY2lzZSB8fCBleGVyY2lzZVJlZi5leGVyY2lzZVxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIHdvcmtvdXREYXRhLmV4ZXJjaXNlcyA9IG1hcHBlZEV4ZXJjaXNlcztcbiAgICBjb25zdCB3b3Jrb3V0ID0gdGhpcy5wYXJzZVdvcmtvdXREYXRhKHdvcmtvdXREYXRhKTtcblxuICAgIC8vIEZldGNoIGxvZ3NcbiAgICBjb25zdCBsb2dzUmVmID0gY29sbGVjdGlvbih3b3Jrb3V0UmVmLCAnbG9ncycpO1xuICAgIGNvbnN0IGxvZ3NTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MobG9nc1JlZik7XG5cbiAgICBjb25zdCBsb2dzOiBFeGVyY2lzZUxvZ1tdID0gbG9nc1NuYXBzaG90LmRvY3MubWFwKGxvZ0RvYyA9PiB7XG4gICAgICBjb25zdCBsb2dEYXRhID0gbG9nRG9jLmRhdGEoKTtcbiAgICAgIGNvbnN0IGZ1bGxFeGVyY2lzZSA9IGV4ZXJjaXNlc1dpdGhWaWRlb3MuZmluZChleCA9PiBleC5uYW1lID09PSBsb2dEYXRhLmV4ZXJjaXNlLm5hbWUpO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogbG9nRG9jLmlkLFxuICAgICAgICB3b3Jrb3V0SWQ6IHdvcmtvdXRJZCxcbiAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgIGV4ZXJjaXNlOiBmdWxsRXhlcmNpc2UgfHwgbG9nRGF0YS5leGVyY2lzZSxcbiAgICAgICAgbG9nczogbG9nRGF0YS5sb2cgfHwgW10sXG4gICAgICAgIGZlZWRiYWNrOiBsb2dEYXRhLmZlZWRiYWNrIHx8ICcnLFxuICAgICAgICBub3RlOiBsb2dEYXRhLm5vdGUgfHwgJycsXG4gICAgICAgIHJlY29tbWVuZGVkV2VpZ2h0OiBsb2dEYXRhLnJlY29tbWVuZGVkV2VpZ2h0LFxuICAgICAgICBpc1NwbGl0OiBsb2dEYXRhLmlzU3BsaXQgfHwgZmFsc2UsXG4gICAgICAgIGlzQm9keVdlaWdodDogbG9nRGF0YS5pc0JvZHlXZWlnaHQgfHwgZmFsc2UsXG4gICAgICAgIGxvZ1N1Ym1pdHRlZDogbG9nRGF0YS5sb2dTdWJtaXR0ZWQgfHwgZmFsc2UsXG4gICAgICAgIGxvZ0lzRWRpdGluZzogbG9nRGF0YS5sb2dJc0VkaXRpbmcgfHwgZmFsc2UsXG4gICAgICAgIGlzQ29tcGxldGVkOiBsb2dEYXRhLmlzQ29tcGxldGVkIHx8IGZhbHNlLFxuICAgICAgICBjcmVhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAobG9nRGF0YS5jcmVhdGVkQXQpLFxuICAgICAgICB1cGRhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAobG9nRGF0YS51cGRhdGVkQXQpXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgd29ya291dC5sb2dzID0gbG9ncztcbiAgICByZXR1cm4gW3dvcmtvdXQsIGxvZ3NdO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHNhdmVkIHdvcmtvdXQ6JywgZXJyb3IpO1xuICAgIHJldHVybiBbbnVsbCwgbnVsbF07XG4gIH1cbn1cblxuLyoqXG4gKiBGZXRjaCB1c2VyIGNoYWxsZW5nZXMgYnkgY2hhbGxlbmdlSWQuXG4gKiBAcGFyYW0gY2hhbGxlbmdlSWQgVGhlIElEIG9mIHRoZSBjaGFsbGVuZ2UgdG8gZmV0Y2ggYXNzb2NpYXRlZCB1c2VyIGNoYWxsZW5nZXMgZm9yLlxuICogQHJldHVybnMgQSBwcm9taXNlIHJlc29sdmluZyB0byBhbiBhcnJheSBvZiB1c2VyIGNoYWxsZW5nZXMuXG4gKiBAdGhyb3dzIElmIHRoZSBGaXJlc3RvcmUgcXVlcnkgZmFpbHMuXG4gKi9cbmFzeW5jIGZldGNoVXNlckNoYWxsZW5nZXNCeUNoYWxsZW5nZUlkKGNoYWxsZW5nZUlkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXJDaGFsbGVuZ2VbXT4ge1xuICBjb25zdCB1c2VyQ2hhbGxlbmdlc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VyLWNoYWxsZW5nZScpO1xuICBjb25zdCBxID0gcXVlcnkodXNlckNoYWxsZW5nZXNSZWYsIHdoZXJlKCdjaGFsbGVuZ2VJZCcsICc9PScsIGNoYWxsZW5nZUlkKSk7XG5cbiAgdHJ5IHtcbiAgICAvLyBjb25zb2xlLmxvZyhgRmV0Y2hpbmcgdXNlciBjaGFsbGVuZ2VzIGZvciBjaGFsbGVuZ2UgSUQ6ICR7Y2hhbGxlbmdlSWR9YCk7XG5cbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG5cbiAgICAvLyBjb25zb2xlLmxvZyhgVG90YWwgdXNlciBjaGFsbGVuZ2VzIGZldGNoZWQ6ICR7c25hcHNob3QuZG9jcy5sZW5ndGh9YCk7XG5cbiAgICBjb25zdCB1c2VyQ2hhbGxlbmdlcyA9IHNuYXBzaG90LmRvY3MubWFwKChkb2M6IERvY3VtZW50RGF0YSkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhgUHJvY2Vzc2luZyB1c2VyIGNoYWxsZW5nZSB3aXRoIElEOiAke2RvYy5pZH1gLCBkYXRhKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgY2hhbGxlbmdlOiBkYXRhLmNoYWxsZW5nZVxuICAgICAgICAgID8gbmV3IENoYWxsZW5nZSh7XG4gICAgICAgICAgICAgIGlkOiBkYXRhLmNoYWxsZW5nZS5pZCxcbiAgICAgICAgICAgICAgdGl0bGU6IGRhdGEuY2hhbGxlbmdlLnRpdGxlLFxuICAgICAgICAgICAgICBzdWJ0aXRsZTogZGF0YS5jaGFsbGVuZ2Uuc3VidGl0bGUsXG4gICAgICAgICAgICAgIHBhcnRpY2lwYW50czogZGF0YS5jaGFsbGVuZ2UucGFydGljaXBhbnRzIHx8IFtdLFxuICAgICAgICAgICAgICBzdGF0dXM6IGRhdGEuY2hhbGxlbmdlLnN0YXR1cyBhcyBDaGFsbGVuZ2VTdGF0dXMsXG4gICAgICAgICAgICAgIHN0YXJ0RGF0ZTogZGF0YS5jaGFsbGVuZ2Uuc3RhcnREYXRlID8gbmV3IERhdGUoZGF0YS5jaGFsbGVuZ2Uuc3RhcnREYXRlKSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgIGVuZERhdGU6IGRhdGEuY2hhbGxlbmdlLmVuZERhdGUgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS5lbmREYXRlKSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgIGNyZWF0ZWRBdDogZGF0YS5jaGFsbGVuZ2UuY3JlYXRlZEF0ID8gbmV3IERhdGUoZGF0YS5jaGFsbGVuZ2UuY3JlYXRlZEF0KSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgIHVwZGF0ZWRBdDogZGF0YS5jaGFsbGVuZ2UudXBkYXRlZEF0ID8gbmV3IERhdGUoZGF0YS5jaGFsbGVuZ2UudXBkYXRlZEF0KSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgIGludHJvVmlkZW9zOiAoZGF0YS5jaGFsbGVuZ2UuaW50cm9WaWRlb3MgfHwgW10pLm1hcCgodjogYW55KSA9PiBcbiAgICAgICAgICAgICAgICBuZXcgSW50cm9WaWRlbyh7XG4gICAgICAgICAgICAgICAgICBpZDogdi5pZCxcbiAgICAgICAgICAgICAgICAgIHVzZXJJZDogdi51c2VySWQsXG4gICAgICAgICAgICAgICAgICB2aWRlb1VybDogdi52aWRlb1VybFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgIGNyZWF0ZWRBdDogY29udmVydFRpbWVzdGFtcChkYXRhLmNyZWF0ZWRBdCksXG4gICAgICAgIHVwZGF0ZWRBdDogY29udmVydFRpbWVzdGFtcChkYXRhLnVwZGF0ZWRBdCksXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gY29uc29sZS5sb2coJ0FsbCB1c2VyIGNoYWxsZW5nZXMgYWZ0ZXIgcHJvY2Vzc2luZzonLCBKU09OLnN0cmluZ2lmeSh1c2VyQ2hhbGxlbmdlcywgbnVsbCwgMikpO1xuXG4gICAgcmV0dXJuIHVzZXJDaGFsbGVuZ2VzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgY2hhbGxlbmdlcyBieSBjaGFsbGVuZ2VJZDonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuYXN5bmMgZ2V0Q29sbGVjdGlvbkJ5SWQoaWQ6IHN0cmluZyk6IFByb21pc2U8U3dlYXRsaXN0Q29sbGVjdGlvbj4ge1xuICBjb25zb2xlLmxvZyhcIkZldGNoaW5nIGNvbGxlY3Rpb24gd2l0aCBpZDpcIiwgaWQpO1xuICB0cnkge1xuICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhkYiwgXCJzd2VhdGxpc3QtY29sbGVjdGlvblwiLCBpZCk7XG4gICAgY29uc3QgZG9jU25hcCA9IGF3YWl0IGdldERvYyhkb2NSZWYpO1xuICAgIGlmIChkb2NTbmFwLmV4aXN0cygpKSB7XG4gICAgICByZXR1cm4gbmV3IFN3ZWF0bGlzdENvbGxlY3Rpb24oe1xuICAgICAgICBpZDogZG9jU25hcC5pZCxcbiAgICAgICAgLi4uZG9jU25hcC5kYXRhKClcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb2xsZWN0aW9uIG5vdCBmb3VuZFwiKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdldHRpbmcgY29sbGVjdGlvbiBieSBJRDpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbiAgXG4gICAgLyoqXG4gICAqIEZldGNoIHVzZXIgY2hhbGxlbmdlcyBieSB1c2VySWQgYW5kIGZpbHRlciBmb3IgYWN0aXZlIGNoYWxsZW5nZXMuXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSByZXNvbHZpbmcgdG8gYW4gYXJyYXkgb2YgYWN0aXZlIGNoYWxsZW5nZXMuXG4gICAqIEB0aHJvd3MgSWYgbm8gdXNlciBpcyBzaWduZWQgaW4gb3IgaWYgdGhlIEZpcmVzdG9yZSBxdWVyeSBmYWlscy5cbiAgICovXG4gICAgYXN5bmMgZmV0Y2hBY3RpdmVDaGFsbGVuZ2VzKCk6IFByb21pc2U8VXNlckNoYWxsZW5nZVtdPiB7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGlzIHNpZ25lZCBpbicpO1xuICAgICAgfVxuICAgIFxuICAgICAgY29uc3QgdXNlckNoYWxsZW5nZXNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlci1jaGFsbGVuZ2UnKTtcbiAgICAgIGNvbnN0IHEgPSBxdWVyeSh1c2VyQ2hhbGxlbmdlc1JlZiwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIGN1cnJlbnRVc2VyLmlkKSk7XG4gICAgXG4gICAgICB0cnkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhgRmV0Y2hpbmcgY2hhbGxlbmdlcyBmb3IgdXNlciBJRDogJHtjdXJyZW50VXNlci5pZH1gKTtcbiAgICBcbiAgICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgVG90YWwgY2hhbGxlbmdlcyBmZXRjaGVkOiAke3NuYXBzaG90LmRvY3MubGVuZ3RofWApO1xuICAgIFxuICAgICAgICBjb25zdCBhbGxDaGFsbGVuZ2VzID0gc25hcHNob3QuZG9jcy5tYXAoKGRvYzogRG9jdW1lbnREYXRhKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coYFByb2Nlc3NpbmcgY2hhbGxlbmdlIHdpdGggSUQ6ICR7ZG9jLmlkfWAsIGRhdGEpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFVzZSB0aGUgQ2hhbGxlbmdlIGNvbnN0cnVjdG9yIHRvIHBhcnNlIHRoZSBjaGFsbGVuZ2UgZGF0YVxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiZGF0ZSBiZWZvcmUgZm9ybWF0OiBcIiArIGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5jaGFsbGVuZ2Uuc3RhcnREYXRlKSk7XG5cbiAgICAgICAgICBjb25zdCBjaGFsbGVuZ2UgPSBkYXRhLmNoYWxsZW5nZVxuICAgICAgICAgICAgPyBuZXcgQ2hhbGxlbmdlKHtcbiAgICAgICAgICAgICAgICBpZDogZGF0YS5jaGFsbGVuZ2UuaWQsXG4gICAgICAgICAgICAgICAgdGl0bGU6IGRhdGEuY2hhbGxlbmdlLnRpdGxlLFxuICAgICAgICAgICAgICAgIHN1YnRpdGxlOiBkYXRhLmNoYWxsZW5nZS5zdWJ0aXRsZSxcbiAgICAgICAgICAgICAgICBwYXJ0aWNpcGFudHM6IGRhdGEuY2hhbGxlbmdlLnBhcnRpY2lwYW50cyB8fCBbXSxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IGRhdGEuY2hhbGxlbmdlLnN0YXR1cyBhcyBDaGFsbGVuZ2VTdGF0dXMsXG4gICAgICAgICAgICAgICAgc3RhcnREYXRlOiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY2hhbGxlbmdlLnN0YXJ0RGF0ZSksXG4gICAgICAgICAgICAgICAgZW5kRGF0ZTogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNoYWxsZW5nZS5lbmREYXRlKSxcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5jaGFsbGVuZ2UuY3JlYXRlZEF0KSxcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5jaGFsbGVuZ2UudXBkYXRlZEF0KSxcbiAgICAgICAgICAgICAgICBpbnRyb1ZpZGVvczogKGRhdGEuY2hhbGxlbmdlLmludHJvVmlkZW9zIHx8IFtdKS5tYXAoKHY6IGFueSkgPT4gXG4gICAgICAgICAgICAgICAgICBuZXcgSW50cm9WaWRlbyh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiB2LmlkLFxuICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHYudXNlcklkLFxuICAgICAgICAgICAgICAgICAgICB2aWRlb1VybDogdi52aWRlb1VybFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICAgIGNoYWxsZW5nZSxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNyZWF0ZWRBdCksXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS51cGRhdGVkQXQpLFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZygnQWxsIGNoYWxsZW5nZXMgYWZ0ZXIgcHJvY2Vzc2luZzonLCBKU09OLnN0cmluZ2lmeShhbGxDaGFsbGVuZ2VzLCBudWxsLCAyKSk7XG4gICAgXG4gICAgICAgIC8vIEZpbHRlciBmb3IgYWN0aXZlIGNoYWxsZW5nZXMgKGVuZERhdGUgPiBjdXJyZW50IGRhdGUpXG4gICAgICAgIGNvbnN0IGFjdGl2ZUNoYWxsZW5nZXMgPSBhbGxDaGFsbGVuZ2VzLmZpbHRlcih1c2VyQ2hhbGxlbmdlID0+IHtcbiAgICAgICAgICBjb25zdCBlbmREYXRlID0gdXNlckNoYWxsZW5nZS5jaGFsbGVuZ2U/LmVuZERhdGU7XG4gICAgXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXG4gICAgICAgICAgLy8gICBgRXZhbHVhdGluZyBjaGFsbGVuZ2UgSUQ6ICR7dXNlckNoYWxsZW5nZS5pZH0sIEVuZCBEYXRlOiAke2VuZERhdGV9LCBDdXJyZW50IERhdGU6ICR7bmV3IERhdGUoKX1gXG4gICAgICAgICAgLy8gKTtcbiAgICBcbiAgICAgICAgICByZXR1cm4gZW5kRGF0ZSAmJiBlbmREYXRlID4gbmV3IERhdGUoKTtcbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBUb3RhbCBhY3RpdmUgY2hhbGxlbmdlczogJHthY3RpdmVDaGFsbGVuZ2VzLmxlbmd0aH1gLCBhY3RpdmVDaGFsbGVuZ2VzKTtcbiAgICBcbiAgICAgICAgcmV0dXJuIGFjdGl2ZUNoYWxsZW5nZXM7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhY3RpdmUgY2hhbGxlbmdlczonLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH1cbiAgICBcblxuICAvKipcbiAgICogRmV0Y2ggdXNlciBjaGFsbGVuZ2VzIGJ5IHVzZXJJZC5cbiAgICogQHJldHVybnMgQSBwcm9taXNlIHJlc29sdmluZyB0byBhbiBhcnJheSBvZiBjaGFsbGVuZ2VzLlxuICAgKiBAdGhyb3dzIElmIG5vIHVzZXIgaXMgc2lnbmVkIGluIG9yIGlmIHRoZSBGaXJlc3RvcmUgcXVlcnkgZmFpbHMuXG4gICAqL1xuICBhc3luYyBmZXRjaFVzZXJDaGFsbGVuZ2VzKCk6IFByb21pc2U8VXNlckNoYWxsZW5nZVtdPiB7XG4gICAgY29uc3QgY3VycmVudFVzZXIgPSB1c2VyU2VydmljZS5jdXJyZW50VXNlcjtcbiAgICBpZiAoIWN1cnJlbnRVc2VyPy5pZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGlzIHNpZ25lZCBpbicpO1xuICAgIH1cblxuICAgIC8vIFJlZmVyZW5jZSB0byB0aGUgdXNlci1jaGFsbGVuZ2UgY29sbGVjdGlvblxuICAgIGNvbnN0IHVzZXJDaGFsbGVuZ2VzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXItY2hhbGxlbmdlJyk7XG5cbiAgICAvLyBRdWVyeSBjaGFsbGVuZ2VzIHdoZXJlIHVzZXJJZCBtYXRjaGVzIHRoZSBjdXJyZW50IHVzZXIncyBJRFxuICAgIGNvbnN0IHEgPSBxdWVyeSh1c2VyQ2hhbGxlbmdlc1JlZiwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIGN1cnJlbnRVc2VyLmlkKSk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuXG4gICAgICAvLyBNYXAgZG9jdW1lbnRzIHRvIGFuIGFycmF5IG9mIENoYWxsZW5nZSBvYmplY3RzXG4gICAgICByZXR1cm4gc25hcHNob3QuZG9jcy5tYXAoKGRvYzogRG9jdW1lbnREYXRhKSA9PiAoe1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kb2MuZGF0YSgpLFxuICAgICAgfSkpIGFzIFVzZXJDaGFsbGVuZ2VbXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBjaGFsbGVuZ2VzOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIHVzZXIgY2hhbGxlbmdlcycpO1xuICAgIH1cbiAgfVxuICBcbiAgLy91cGRhdGUgdGhlIHdvcmtvdXQgc3VtbWFyeSxcbiAgYXN5bmMgdXBkYXRlV29ya291dFN1bW1hcnkoe1xuICAgIHVzZXJJZCxcbiAgICB3b3Jrb3V0SWQsXG4gICAgc3VtbWFyeVxuICB9OiB7XG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgd29ya291dElkOiBzdHJpbmcsXG4gICAgc3VtbWFyeTogV29ya291dFN1bW1hcnlcbiAgfSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdXNlcklkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgSUQgcHJvdmlkZWQnKTtcbiAgICB9XG4gIFxuICAgIHRyeSB7XG4gICAgICAvLyBDcmVhdGUgYSByZWZlcmVuY2UgdG8gdGhlIGNvbGxlY3Rpb25cbiAgICAgIGNvbnN0IHN1bW1hcnlSZWYgPSBkb2MoZGIsICd1c2VycycsIHVzZXJJZCwgJ3dvcmtvdXRTdW1tYXJ5Jywgc3VtbWFyeS5pZCk7XG4gIFxuICAgICAgLy8gQ29udmVydCBzdW1tYXJ5IHRvIGEgcGxhaW4gb2JqZWN0IGZvciBGaXJlc3RvcmVcbiAgICAgIGNvbnN0IHN1bW1hcnlEYXRhID0ge1xuICAgICAgICBpZDogc3VtbWFyeS5pZCxcbiAgICAgICAgd29ya291dElkOiBzdW1tYXJ5LndvcmtvdXRJZCxcbiAgICAgICAgZXhlcmNpc2VzOiBzdW1tYXJ5LmV4ZXJjaXNlcyxcbiAgICAgICAgYm9keVBhcnRzOiBzdW1tYXJ5LmJvZHlQYXJ0cyxcbiAgICAgICAgc2Vjb25kYXJ5Qm9keVBhcnRzOiBzdW1tYXJ5LnNlY29uZGFyeUJvZHlQYXJ0cyxcbiAgICAgICAgd29ya291dFRpdGxlOiBzdW1tYXJ5LndvcmtvdXRUaXRsZSxcbiAgICAgICAgY2Fsb3JpZXNCdXJuZWQ6IHN1bW1hcnkuY2Fsb3JpZXNCdXJuZWQsXG4gICAgICAgIHdvcmtvdXRSYXRpbmc6IHN1bW1hcnkud29ya291dFJhdGluZyxcbiAgICAgICAgZXhlcmNpc2VzQ29tcGxldGVkOiBzdW1tYXJ5LmV4ZXJjaXNlc0NvbXBsZXRlZCxcbiAgICAgICAgYWlJbnNpZ2h0OiBzdW1tYXJ5LmFpSW5zaWdodCxcbiAgICAgICAgcmVjb21tZW5kYXRpb25zOiBzdW1tYXJ5LnJlY29tbWVuZGF0aW9ucyxcbiAgICAgICAgZ2lmVVJMczogc3VtbWFyeS5naWZVUkxzLFxuICAgICAgICByZWNvbW1lbmRlZFdvcms6IHN1bW1hcnkucmVjb21tZW5kZWRXb3JrLFxuICAgICAgICBpc0NvbXBsZXRlZDogc3VtbWFyeS5pc0NvbXBsZXRlZCxcbiAgICAgICAgY3JlYXRlZEF0OiBzdW1tYXJ5LmNyZWF0ZWRBdCxcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICBjb21wbGV0ZWRBdDogc3VtbWFyeS5jb21wbGV0ZWRBdCxcbiAgICAgICAgZHVyYXRpb246IHN1bW1hcnkuZHVyYXRpb25cbiAgICAgIH07XG4gIFxuICAgICAgLy8gU2V0IGRhdGEgd2l0aCBtZXJnZSBlbmFibGVkIChlcXVpdmFsZW50IHRvIFN3aWZ0J3Mgc2V0RGF0YSB3aXRoIG1lcmdlOiB0cnVlKVxuICAgICAgYXdhaXQgc2V0RG9jKHN1bW1hcnlSZWYsIHN1bW1hcnlEYXRhLCB7IG1lcmdlOiB0cnVlIH0pO1xuICBcbiAgICAgIGNvbnNvbGUubG9nKCdXb3Jrb3V0IHN1bW1hcnkgZG9jdW1lbnQgdXBkYXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgd29ya291dCBzdW1tYXJ5OicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVdvcmtvdXRMb2dzKHtcbiAgICB1c2VySWQsXG4gICAgd29ya291dElkLCBcbiAgICBsb2dzXG4gIH06IHtcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICB3b3Jrb3V0SWQ6IHN0cmluZywgXG4gICAgbG9nczogRXhlcmNpc2VMb2dbXVxuICB9KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFVwZGF0ZSBsb2dzIGluIEZpcmVzdG9yZVxuICAgICAgY29uc3Qgd29ya291dFJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdXNlcklkLCAnd29ya291dFNlc3Npb25zJywgd29ya291dElkKTtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGxvZ3Mgc3ViY29sbGVjdGlvblxuICAgICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24od29ya291dFJlZiwgJ2xvZ3MnKTtcbiAgICAgIFxuICAgICAgLy8gQmF0Y2ggd3JpdGUgdG8gdXBkYXRlIGxvZ3NcbiAgICAgIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XG4gICAgICBcbiAgICAgIGxvZ3MuZm9yRWFjaChsb2cgPT4ge1xuICAgICAgICBjb25zdCBsb2dEb2NSZWYgPSBkb2MobG9nc1JlZiwgbG9nLmlkKTtcbiAgICAgICAgYmF0Y2gudXBkYXRlKGxvZ0RvY1JlZiwge1xuICAgICAgICAgIGlzQ29tcGxldGVkOiBsb2cuaXNDb21wbGV0ZWQsXG4gICAgICAgICAgbG9nczogbG9nLmxvZ3MsXG4gICAgICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICBcbiAgICAgIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB3b3Jrb3V0IGxvZ3M6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG4gIFxuICBcbiAgLyoqXG4gICAqIEZldGNoIHRoZSB3b3Jrb3V0IHNlc3Npb24gZnJvbSBGaXJlc3RvcmUsIHJldHVybmluZyB7IHdvcmtvdXQsIGxvZ3MgfS5cbiAgICogQ2hlY2tzIGZpcnN0IGZvciBhIFF1ZXVlZFVwIHNlc3Npb24sIHRoZW4gZm9yIEluUHJvZ3Jlc3MuXG4gICAqL1xuICBhc3luYyBmZXRjaEN1cnJlbnRXb3Jrb3V0U2Vzc2lvbih1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8e1xuICAgIHdvcmtvdXQ6IFdvcmtvdXQgfCBudWxsO1xuICAgIGxvZ3M6IEV4ZXJjaXNlTG9nW10gfCBudWxsO1xuICB9PiB7XG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBJRCBwcm92aWRlZCcpO1xuICAgIH1cbiAgXG4gICAgLy8gMS4gRmV0Y2ggYWxsIGV4ZXJjaXNlcyB3aXRoIHRoZWlyIHZpZGVvc1xuICAgIGNvbnN0IGV4ZXJjaXNlU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZXMnKSk7XG4gICAgY29uc3QgdmlkZW9TbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlVmlkZW9zJykpO1xuICBcbiAgICAvLyBNYXAgdmlkZW9zIHRvIGV4ZXJjaXNlc1xuICAgIGNvbnN0IGV4ZXJjaXNlVmlkZW9zOiBFeGVyY2lzZVZpZGVvW10gPSB2aWRlb1NuYXBzaG90LmRvY3MubWFwKChkb2MpID0+IFxuICAgICAgRXhlcmNpc2VWaWRlby5mcm9tRmlyZWJhc2Uoe1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kb2MuZGF0YSgpXG4gICAgICB9KVxuICAgICk7XG4gIFxuICAgIGNvbnN0IGV4ZXJjaXNlc1dpdGhWaWRlb3MgPSBleGVyY2lzZVNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiB7XG4gICAgICBjb25zdCBleGVyY2lzZSA9IEV4ZXJjaXNlLmZyb21GaXJlYmFzZSh7XG4gICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgIC4uLmRvYy5kYXRhKClcbiAgICAgIH0pO1xuICBcbiAgICAgIC8vIEF0dGFjaCB2aWRlb3MgdG8gZXhlcmNpc2VcbiAgICAgIGNvbnN0IG1hdGNoaW5nVmlkZW9zID0gZXhlcmNpc2VWaWRlb3MuZmlsdGVyKFxuICAgICAgICAodmlkZW8pID0+IHZpZGVvLmV4ZXJjaXNlLnRvTG93ZXJDYXNlKCkgPT09IGV4ZXJjaXNlLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgKTtcbiAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5leGVyY2lzZSxcbiAgICAgICAgdmlkZW9zOiBtYXRjaGluZ1ZpZGVvc1xuICAgICAgfTtcbiAgICB9KTtcbiAgXG4gICAgLy8gUmVmZXJlbmNlIHRvIHVzZXIncyB3b3Jrb3V0U2Vzc2lvbnNcbiAgICBjb25zdCB3b3Jrb3V0U2Vzc2lvbnNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCB1c2VySWQsICd3b3Jrb3V0U2Vzc2lvbnMnKTtcbiAgXG4gICAgLy8gMSkgQ2hlY2sgZm9yIFF1ZXVlZFVwXG4gICAgbGV0IHEgPSBxdWVyeSh3b3Jrb3V0U2Vzc2lvbnNSZWYsIHdoZXJlKCdzdGF0dXMnLCAnPT0nLCBXb3Jrb3V0U3RhdHVzLlF1ZXVlZFVwKSk7XG4gICAgbGV0IHNuYXAgPSBhd2FpdCBnZXREb2NzKHEpO1xuICBcbiAgICBpZiAoIXNuYXAuZW1wdHkpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NXb3Jrb3V0U2Vzc2lvbkRvY3VtZW50KHNuYXAuZG9jc1swXSwgZXhlcmNpc2VzV2l0aFZpZGVvcyk7XG4gICAgfVxuICBcbiAgICAvLyAyKSBDaGVjayBmb3IgSW5Qcm9ncmVzc1xuICAgIHEgPSBxdWVyeSh3b3Jrb3V0U2Vzc2lvbnNSZWYsIHdoZXJlKCdzdGF0dXMnLCAnPT0nLCBXb3Jrb3V0U3RhdHVzLkluUHJvZ3Jlc3MpKTtcbiAgICBzbmFwID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgXG4gICAgaWYgKCFzbmFwLmVtcHR5KSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9jZXNzV29ya291dFNlc3Npb25Eb2N1bWVudChzbmFwLmRvY3NbMF0sIGV4ZXJjaXNlc1dpdGhWaWRlb3MpO1xuICAgIH1cbiAgXG4gICAgLy8gTm9uZSBmb3VuZFxuICAgIHJldHVybiB7IHdvcmtvdXQ6IG51bGwsIGxvZ3M6IG51bGwgfTtcbiAgfVxuXG4gIGFzeW5jIGNhbmNlbFdvcmtvdXRTZXNzaW9uKHVzZXJJZDogc3RyaW5nLCB3b3Jrb3V0SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyAxLiBEZWxldGUgYWxsIGxvZ3MgaW4gdGhlIGxvZ3Mgc3ViY29sbGVjdGlvblxuICAgICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycsIHVzZXJJZCwgJ3dvcmtvdXRTZXNzaW9ucycsIHdvcmtvdXRJZCwgJ2xvZ3MnKTtcbiAgICAgIGNvbnN0IGxvZ3NTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MobG9nc1JlZik7XG4gICAgICBjb25zdCBsb2dCYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xuICBcbiAgICAgIGlmICghbG9nc1NuYXBzaG90LmVtcHR5KSB7XG4gICAgICAgIGxvZ3NTbmFwc2hvdC5kb2NzLmZvckVhY2goKGxvZ0RvYykgPT4ge1xuICAgICAgICAgIGxvZ0JhdGNoLmRlbGV0ZShsb2dEb2MucmVmKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IGxvZ0JhdGNoLmNvbW1pdCgpO1xuICAgICAgfVxuICBcbiAgICAgIC8vIDIuIERlbGV0ZSB0aGUgd29ya291dCBzZXNzaW9uIGRvY3VtZW50XG4gICAgICBjb25zdCB3b3Jrb3V0U2Vzc2lvblJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdXNlcklkLCAnd29ya291dFNlc3Npb25zJywgd29ya291dElkKTtcbiAgICAgIGF3YWl0IGRlbGV0ZURvYyh3b3Jrb3V0U2Vzc2lvblJlZik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNhbmNlbGluZyB3b3Jrb3V0IHNlc3Npb246JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBmZXRjaEFuZE1hcEV4ZXJjaXNlc1dpdGhWaWRlb3MoKTogUHJvbWlzZTxFeGVyY2lzZVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdTdGFydGluZyBmZXRjaEFuZE1hcEV4ZXJjaXNlc1dpdGhWaWRlb3MnKTtcbiAgXG4gICAgICAvLyAxLiBGZXRjaCBhbGwgZXhlcmNpc2VzIFxuICAgICAgY29uc3QgZXhlcmNpc2VTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlcycpKTtcbiAgICAgIGNvbnN0IGV4ZXJjaXNlcyA9IGV4ZXJjaXNlU25hcHNob3QuZG9jcy5tYXAoKGRvYykgPT4gXG4gICAgICAgIEV4ZXJjaXNlLmZyb21GaXJlYmFzZSh7XG4gICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAuLi5kb2MuZGF0YSgpXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgLy8gY29uc29sZS5sb2coYEZldGNoZWQgJHtleGVyY2lzZXMubGVuZ3RofSBleGVyY2lzZXNgKTtcbiAgXG4gICAgICAvLyAyLiBGZXRjaCBhbGwgdmlkZW9zXG4gICAgICBjb25zdCB2aWRlb1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VWaWRlb3MnKSk7XG4gICAgICBjb25zdCBleGVyY2lzZVZpZGVvcyA9IHZpZGVvU25hcHNob3QuZG9jcy5tYXAoKGRvYykgPT4gXG4gICAgICAgIEV4ZXJjaXNlVmlkZW8uZnJvbUZpcmViYXNlKHtcbiAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgIC4uLmRvYy5kYXRhKClcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhgRmV0Y2hlZCAke2V4ZXJjaXNlVmlkZW9zLmxlbmd0aH0gZXhlcmNpc2UgdmlkZW9zYCk7XG4gIFxuICAgICAgLy8gMy4gTWFwIHZpZGVvcyB0byBleGVyY2lzZXNcbiAgICAgIGNvbnN0IGV4ZXJjaXNlc1dpdGhWaWRlb3MgPSBleGVyY2lzZXMubWFwKGV4ZXJjaXNlID0+IHtcbiAgICAgICAgY29uc3QgbWF0Y2hpbmdWaWRlb3MgPSBleGVyY2lzZVZpZGVvcy5maWx0ZXIoXG4gICAgICAgICAgKHZpZGVvKSA9PiB2aWRlby5leGVyY2lzZS50b0xvd2VyQ2FzZSgpID09PSBleGVyY2lzZS5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgKTtcbiAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5leGVyY2lzZSxcbiAgICAgICAgICB2aWRlb3M6IG1hdGNoaW5nVmlkZW9zXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgXG4gICAgICAvLyBjb25zb2xlLmxvZygnRmluaXNoZWQgbWFwcGluZyBleGVyY2lzZXMgd2l0aCB2aWRlb3MnKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGBUb3RhbCBleGVyY2lzZXMgd2l0aCB2aWRlb3M6ICR7ZXhlcmNpc2VzV2l0aFZpZGVvcy5sZW5ndGh9YCk7XG4gICAgICAgIFxuICAgICAgcmV0dXJuIGV4ZXJjaXNlc1dpdGhWaWRlb3M7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFuZCBtYXBwaW5nIGV4ZXJjaXNlcyB3aXRoIHZpZGVvczonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIHRvIGJ1aWxkIHRoZSBXb3Jrb3V0IG9iamVjdCArIGFueSBsb2dzIGZyb20gdGhlIHNuYXBzaG90LlxuICAgKi9cbiAgYXN5bmMgZmV0Y2hBbGxXb3Jrb3V0U2Vzc2lvbnModXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgICB3b3Jrb3V0OiBXb3Jrb3V0IHwgbnVsbDtcbiAgICBsb2dzOiBFeGVyY2lzZUxvZ1tdIHwgbnVsbDtcbiAgfVtdPiB7XG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBJRCBwcm92aWRlZCcpO1xuICAgIH1cbiAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIDEuIEZldGNoIGFsbCBleGVyY2lzZXMgXG4gICAgICBjb25zdCBleGVyY2lzZVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VzJykpO1xuICAgICAgY29uc3QgZXhlcmNpc2VzID0gZXhlcmNpc2VTbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PiBcbiAgICAgICAgRXhlcmNpc2UuZnJvbUZpcmViYXNlKHtcbiAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgIC4uLmRvYy5kYXRhKClcbiAgICAgICAgfSlcbiAgICAgICk7XG4gIFxuICAgICAgLy8gMi4gRmV0Y2ggYWxsIHZpZGVvc1xuICAgICAgY29uc3QgdmlkZW9TbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlVmlkZW9zJykpO1xuICAgICAgY29uc3QgZXhlcmNpc2VWaWRlb3MgPSB2aWRlb1NuYXBzaG90LmRvY3MubWFwKChkb2MpID0+IFxuICAgICAgICBFeGVyY2lzZVZpZGVvLmZyb21GaXJlYmFzZSh7XG4gICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAuLi5kb2MuZGF0YSgpXG4gICAgICAgIH0pXG4gICAgICApO1xuICBcbiAgICAgIC8vIDMuIE1hcCB2aWRlb3MgdG8gZXhlcmNpc2VzXG4gICAgICBjb25zdCBleGVyY2lzZXNXaXRoVmlkZW9zID0gZXhlcmNpc2VzLm1hcChleGVyY2lzZSA9PiB7XG4gICAgICAgIGNvbnN0IG1hdGNoaW5nVmlkZW9zID0gZXhlcmNpc2VWaWRlb3MuZmlsdGVyKFxuICAgICAgICAgICh2aWRlbykgPT4gdmlkZW8uZXhlcmNpc2UudG9Mb3dlckNhc2UoKSA9PT0gZXhlcmNpc2UubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICk7XG4gIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLmV4ZXJjaXNlLFxuICAgICAgICAgIHZpZGVvczogbWF0Y2hpbmdWaWRlb3NcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICBcbiAgICAgIC8vIDQuIEZldGNoIHdvcmtvdXQgc2Vzc2lvbnNcbiAgICAgIGNvbnN0IHdvcmtvdXRTZXNzaW9uc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycsIHVzZXJJZCwgJ3dvcmtvdXRTZXNzaW9ucycpO1xuICAgICAgY29uc3Qgc25hcCA9IGF3YWl0IGdldERvY3Mod29ya291dFNlc3Npb25zUmVmKTtcbiAgXG4gICAgICBpZiAoc25hcC5lbXB0eSkge1xuICAgICAgICBjb25zb2xlLmxvZygnTm8gd29ya291dCBzZXNzaW9ucyBmb3VuZCBmb3IgdXNlcicpO1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gIFxuICAgICAgLy8gNS4gUHJvY2VzcyBlYWNoIHdvcmtvdXQgc2Vzc2lvblxuICAgICAgY29uc3Qgc2Vzc2lvbnMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgc25hcC5kb2NzLm1hcChhc3luYyAoZG9jKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc2Vzc2lvbkRhdGEgPSBhd2FpdCB0aGlzLnByb2Nlc3NXb3Jrb3V0U2Vzc2lvbkRvY3VtZW50KFxuICAgICAgICAgICAgZG9jLCBcbiAgICAgICAgICAgIGV4ZXJjaXNlc1dpdGhWaWRlb3NcbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNvcnQgdGhlIGxvZ3MgYnkgdGhlICdvcmRlcicgcHJvcGVydHksIGlmIGF2YWlsYWJsZVxuICAgICAgICAgIGlmIChzZXNzaW9uRGF0YS5sb2dzKSB7XG4gICAgICAgICAgICBzZXNzaW9uRGF0YS5sb2dzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgY29uc3Qgb3JkZXJBID0gYS5vcmRlciA/PyAwO1xuICAgICAgICAgICAgICBjb25zdCBvcmRlckIgPSBiLm9yZGVyID8/IDA7XG4gICAgICAgICAgICAgIHJldHVybiBvcmRlckEgLSBvcmRlckI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gIFxuICAgICAgICAgIHJldHVybiBzZXNzaW9uRGF0YTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gIFxuICAgICAgLy8gY29uc29sZS5sb2coYEZvdW5kICR7c2Vzc2lvbnMubGVuZ3RofSB3b3Jrb3V0IHNlc3Npb25zYCk7XG4gICAgICByZXR1cm4gc2Vzc2lvbnM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHdvcmtvdXQgc2Vzc2lvbnM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ29sbGVjdGlvbihjb2xsZWN0aW9uOiBTd2VhdGxpc3RDb2xsZWN0aW9uKTogUHJvbWlzZTxTd2VhdGxpc3RDb2xsZWN0aW9uPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbGxSZWYgPSBmc0NvbGxlY3Rpb24oZGIsIFwic3dlYXRsaXN0LWNvbGxlY3Rpb25cIik7XG4gIFxuICAgICAgLy8gSWYgY29sbGVjdGlvbi5pZCBpcyBlbXB0eSwgZ2VuZXJhdGUgYSBuZXcgZG9jIElEIGFuZCBhc3NpZ24gaXQuXG4gICAgICBpZiAoIWNvbGxlY3Rpb24uaWQgfHwgY29sbGVjdGlvbi5pZC50cmltKCkgPT09IFwiXCIpIHtcbiAgICAgICAgY29uc3QgbmV3RG9jUmVmID0gZG9jKGNvbGxSZWYpO1xuICAgICAgICBjb2xsZWN0aW9uLmlkID0gbmV3RG9jUmVmLmlkO1xuICAgICAgfVxuICBcbiAgICAgIC8vIEVuc3VyZSB0aGUgY2hhbGxlbmdlIGlkIG1hdGNoZXMgdGhlIGNvbGxlY3Rpb24gaWQuXG4gICAgICBpZiAoY29sbGVjdGlvbi5jaGFsbGVuZ2UpIHtcbiAgICAgICAgY29sbGVjdGlvbi5jaGFsbGVuZ2UuaWQgPSBjb2xsZWN0aW9uLmlkO1xuICAgICAgfVxuICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgdXBkYXRlZEF0IGZpZWxkLlxuICAgICAgY29sbGVjdGlvbi51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpO1xuICBcbiAgICAgIC8vIFNhdmUgdGhlIGNvbGxlY3Rpb24gdG8gRmlyZXN0b3JlLlxuICAgICAgYXdhaXQgc2V0RG9jKGRvYyhjb2xsUmVmLCBjb2xsZWN0aW9uLmlkKSwgY29sbGVjdGlvbi50b0RpY3Rpb25hcnkoKSk7XG4gICAgICBjb25zb2xlLmxvZyhcIkNvbGxlY3Rpb24gdXBkYXRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICByZXR1cm4gY29sbGVjdGlvbjtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIGNvbGxlY3Rpb24gZG9jdW1lbnQ6XCIsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIHdoaWxlIHVwZGF0aW5nIHRoZSBjb2xsZWN0aW9uXCIpO1xuICAgIH1cbiAgfVxuICBcbiAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzV29ya291dFNlc3Npb25Eb2N1bWVudChcbiAgICB3b3Jrb3V0RG9jOiBRdWVyeURvY3VtZW50U25hcHNob3Q8RG9jdW1lbnREYXRhPixcbiAgICBleGVyY2lzZXNXaXRoVmlkZW9zOiBFeGVyY2lzZVtdXG4gICk6IFByb21pc2U8eyB3b3Jrb3V0OiBXb3Jrb3V0OyBsb2dzOiBFeGVyY2lzZUxvZ1tdIH0+IHtcbiAgICBjb25zdCBkYXRhID0gd29ya291dERvYy5kYXRhKCk7XG4gIFxuICAgIC8vIE1hcCBleGVyY2lzZXMgd2l0aCB0aGVpciBmdWxsIGRhdGEgYW5kIHZpZGVvc1xuICAgIGNvbnN0IG1hcHBlZEV4ZXJjaXNlcyA9IChkYXRhLmV4ZXJjaXNlcyB8fCBbXSkubWFwKChleGVyY2lzZVJlZjogYW55KSA9PiB7XG4gICAgICAvLyBGaW5kIHRoZSBmdWxsIGV4ZXJjaXNlIHdpdGggdmlkZW9zXG4gICAgICBjb25zdCBleGVyY2lzZU5hbWVMb3dlciA9IGV4ZXJjaXNlUmVmLmV4ZXJjaXNlPy5uYW1lPy50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICAgIGNvbnN0IGZ1bGxFeGVyY2lzZSA9IGV4ZXJjaXNlc1dpdGhWaWRlb3MuZmluZChcbiAgICAgICAgZXggPT4gZXgubmFtZS50b0xvd2VyQ2FzZSgpLnRyaW0oKSA9PT0gZXhlcmNpc2VOYW1lTG93ZXJcbiAgICAgICk7XG4gIFxuICAgICAgLy8gSWYgZnVsbCBleGVyY2lzZSBmb3VuZCwgcmV0dXJuIGl0LCBvdGhlcndpc2UgdXNlIHRoZSBvcmlnaW5hbFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZXhlcmNpc2VSZWYsXG4gICAgICAgIGV4ZXJjaXNlOiBmdWxsRXhlcmNpc2UgfHwgZXhlcmNpc2VSZWYuZXhlcmNpc2VcbiAgICAgIH07XG4gICAgfSk7XG4gIFxuICAgIC8vIENyZWF0ZSB0aGUgd29ya291dCB3aXRoIG1hcHBlZCBleGVyY2lzZXNcbiAgICBjb25zdCB3b3Jrb3V0ID0gbmV3IFdvcmtvdXQoe1xuICAgICAgaWQ6IHdvcmtvdXREb2MuaWQsXG4gICAgICByb3VuZFdvcmtvdXRJZDogZGF0YS5yb3VuZFdvcmtvdXRJZCB8fCAnJyxcbiAgICAgIGV4ZXJjaXNlczogbWFwcGVkRXhlcmNpc2VzLFxuICAgICAgdGl0bGU6IGRhdGEudGl0bGUgfHwgJycsXG4gICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgIGR1cmF0aW9uOiBkYXRhLmR1cmF0aW9uIHx8IDAsXG4gICAgICB1c2VBdXRob3JDb250ZW50OiBkYXRhLnVzZUF1dGhvckNvbnRlbnQgfHwgZmFsc2UsXG4gICAgICBpc0NvbXBsZXRlZDogZGF0YS5pc0NvbXBsZXRlZCB8fCBmYWxzZSxcbiAgICAgIHdvcmtvdXRTdGF0dXM6IGRhdGEud29ya291dFN0YXR1cyB8fCBXb3Jrb3V0U3RhdHVzLkFyY2hpdmVkLFxuICAgICAgYXV0aG9yOiBkYXRhLmF1dGhvciB8fCAnJyxcbiAgICAgIGNyZWF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNyZWF0ZWRBdCksXG4gICAgICB1cGRhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS51cGRhdGVkQXQpLFxuICAgICAgc3RhcnRUaW1lOiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuc3RhcnRUaW1lKSxcbiAgICAgIGNvbGxlY3Rpb25JZDogZGF0YS5jb2xsZWN0aW9uSWQsXG4gICAgICBjaGFsbGVuZ2U6IGRhdGEuY2hhbGxlbmdlLFxuICAgICAgbG9nczogKGRhdGEubG9ncyB8fCBbXSkubWFwKChsb2dEYXRhOiBhbnkpID0+IHtcbiAgICAgICAgLy8gTWFwIGxvZ3Mgd2l0aCBmdWxsIGV4ZXJjaXNlc1xuICAgICAgICBjb25zdCBleGVyY2lzZU5hbWVMb3dlciA9IGxvZ0RhdGEuZXhlcmNpc2U/Lm5hbWU/LnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgICAgICBjb25zdCBmdWxsRXhlcmNpc2UgPSBleGVyY2lzZXNXaXRoVmlkZW9zLmZpbmQoXG4gICAgICAgICAgZXggPT4gZXgubmFtZS50b0xvd2VyQ2FzZSgpLnRyaW0oKSA9PT0gZXhlcmNpc2VOYW1lTG93ZXJcbiAgICAgICAgKTtcbiAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ubG9nRGF0YSxcbiAgICAgICAgICBleGVyY2lzZTogZnVsbEV4ZXJjaXNlIHx8IGxvZ0RhdGEuZXhlcmNpc2VcbiAgICAgICAgfTtcbiAgICAgIH0pLFxuICAgICAgd29ya291dFJhdGluZzogZGF0YS53b3Jrb3V0UmF0aW5nLFxuICAgICAgb3JkZXI6IGRhdGEub3JkZXIsXG4gICAgICB6b25lOiBkYXRhLnpvbmUgfHwgQm9keVpvbmUuRnVsbEJvZHlcbiAgICB9KTtcbiAgXG4gICAgY29uc29sZS5sb2coXCJUaGUgV29ya291dCBJRCBpczogXCIgKyB3b3Jrb3V0LmlkKTtcbiAgICAvLyBGZXRjaCBsb2dzIGZyb20gc3ViY29sbGVjdGlvblxuICAgIGNvbnN0IGxvZ3NSZWYgPSBjb2xsZWN0aW9uKHdvcmtvdXREb2MucmVmLCAnbG9ncycpO1xuICAgIGNvbnN0IGxvZ3NTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MobG9nc1JlZik7XG4gICAgXG4gICAgY29uc3QgbG9nczogRXhlcmNpc2VMb2dbXSA9IGxvZ3NTbmFwc2hvdC5kb2NzLm1hcChsb2dEb2MgPT4ge1xuICAgICAgY29uc3QgbG9nRGF0YSA9IGxvZ0RvYy5kYXRhKCk7XG4gICAgICBcbiAgICAgIC8vIEZpbmQgdGhlIGZ1bGwgZXhlcmNpc2Ugd2l0aCB2aWRlb3NcbiAgICAgIGNvbnN0IGV4ZXJjaXNlTmFtZUxvd2VyID0gbG9nRGF0YS5leGVyY2lzZT8ubmFtZT8udG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgICBjb25zdCBmdWxsRXhlcmNpc2UgPSBleGVyY2lzZXNXaXRoVmlkZW9zLmZpbmQoXG4gICAgICAgIGV4ID0+IGV4Lm5hbWUudG9Mb3dlckNhc2UoKS50cmltKCkgPT09IGV4ZXJjaXNlTmFtZUxvd2VyXG4gICAgICApO1xuICBcbiAgICAgIC8vIFByZXBhcmUgbG9nIGRhdGEgd2l0aCBmdWxsIGV4ZXJjaXNlXG4gICAgICBjb25zdCBwcmVwYXJlZExvZ0RhdGEgPSB7XG4gICAgICAgIC4uLmxvZ0RhdGEsXG4gICAgICAgIGlkOiBsb2dEb2MuaWQsXG4gICAgICAgIHdvcmtvdXRJZDogd29ya291dC5pZCxcbiAgICAgICAgZXhlcmNpc2U6IGZ1bGxFeGVyY2lzZSB8fCBsb2dEYXRhLmV4ZXJjaXNlLFxuICAgICAgICBjcmVhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAobG9nRGF0YS5jcmVhdGVkQXQpLFxuICAgICAgICB1cGRhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAobG9nRGF0YS51cGRhdGVkQXQpXG4gICAgICB9O1xuICBcbiAgICAgIC8vIFVzZSB0aGUgRXhlcmNpc2VMb2cgY29uc3RydWN0b3IgdG8gZW5zdXJlIHByb3BlciBtYXBwaW5nXG4gICAgICByZXR1cm4gbmV3IEV4ZXJjaXNlTG9nKHByZXBhcmVkTG9nRGF0YSk7XG4gICAgfSk7XG4gIFxuICAgIHJldHVybiB7IHdvcmtvdXQsIGxvZ3MgfTtcbiAgfVxuXG4gIGFzeW5jIHNhdmVXb3Jrb3V0U2Vzc2lvbih7XG4gICAgdXNlcklkLFxuICAgIHdvcmtvdXQsXG4gICAgbG9nc1xuICAgfToge1xuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIHdvcmtvdXQ6IFdvcmtvdXQsXG4gICAgbG9nczogRXhlcmNpc2VMb2dbXVxuICAgfSk6IFByb21pc2U8V29ya291dCB8IG51bGw+IHtcbiAgICBpZiAoIXVzZXJJZCkgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIElEIHByb3ZpZGVkJyk7XG4gICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgXG4gICAgICBjb25zdCBjbGVhbldvcmtvdXQgPSBuZXcgV29ya291dCh7XG4gICAgICAgIC4uLndvcmtvdXQsXG4gICAgICAgIHJvdW5kV29ya291dElkOiBgJHt3b3Jrb3V0LmlkfS0ke2N1cnJlbnREYXRlLmdldFRpbWUoKX1gLFxuICAgICAgICB3b3Jrb3V0U3RhdHVzOiBXb3Jrb3V0U3RhdHVzLlF1ZXVlZFVwLFxuICAgICAgICBjcmVhdGVkQXQ6IGN1cnJlbnREYXRlLFxuICAgICAgICB1cGRhdGVkQXQ6IGN1cnJlbnREYXRlLFxuICAgICAgICBzdGFydFRpbWU6IGN1cnJlbnREYXRlLFxuICAgICAgICBsb2dzOiBbXVxuICAgICAgIH0pO1xuICAgXG4gICAgICBjb25zdCB3b3Jrb3V0U2Vzc2lvblJlZiA9IGRvYyhjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCB1c2VySWQsICd3b3Jrb3V0U2Vzc2lvbnMnKSk7XG4gICAgICBhd2FpdCBzZXREb2Mod29ya291dFNlc3Npb25SZWYsIGNsZWFuV29ya291dCk7XG4gICBcbiAgICAgIGNvbnN0IGxvZ3NSZWYgPSBjb2xsZWN0aW9uKHdvcmtvdXRTZXNzaW9uUmVmLCAnbG9ncycpO1xuICAgICAgY29uc3QgbG9nQmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcbiAgIFxuICAgICAgbG9ncy5mb3JFYWNoKChsb2csIGluZGV4KSA9PiB7XG4gICAgICAgIGNvbnN0IGxvZ0RvY1JlZiA9IGRvYyhsb2dzUmVmLCBgJHtsb2cuaWR9LSR7Y3VycmVudERhdGUuZ2V0VGltZSgpfWApO1xuICAgICAgICBsb2dCYXRjaC5zZXQobG9nRG9jUmVmLCB7XG4gICAgICAgICAgaWQ6IGxvZ0RvY1JlZi5pZCxcbiAgICAgICAgICB3b3Jrb3V0SWQ6IHdvcmtvdXRTZXNzaW9uUmVmLmlkLFxuICAgICAgICAgIGV4ZXJjaXNlOiB7XG4gICAgICAgICAgICBpZDogbG9nLmV4ZXJjaXNlLmlkLFxuICAgICAgICAgICAgbmFtZTogbG9nLmV4ZXJjaXNlLm5hbWUsXG4gICAgICAgICAgICBjYXRlZ29yeTogbG9nLmV4ZXJjaXNlLmNhdGVnb3J5LFxuICAgICAgICAgICAgdmlkZW9zOiBsb2cuZXhlcmNpc2UudmlkZW9zIHx8IFtdXG4gICAgICAgICAgfSxcbiAgICAgICAgICBvcmRlcjogaW5kZXgsXG4gICAgICAgICAgY3JlYXRlZEF0OiBjdXJyZW50RGF0ZSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IGN1cnJlbnREYXRlLFxuICAgICAgICAgIGxvZ1N1Ym1pdHRlZDogZmFsc2UsXG4gICAgICAgICAgaXNDb21wbGV0ZWQ6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICBcbiAgICAgIGF3YWl0IGxvZ0JhdGNoLmNvbW1pdCgpO1xuICAgICAgXG4gICAgICByZXR1cm4gY2xlYW5Xb3Jrb3V0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgd29ya291dCBzZXNzaW9uOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgIH1cblxuICAvKipcbiAgICogRXhhbXBsZSBcImpvaW4gY2hhbGxlbmdlXCIgbWV0aG9kIHVzaW5nIHRoZSBjbGllbnQgU0RLIChubyBhZG1pbiBwcml2aWxlZ2VzKS5cbiAgICogVGhpcyBjcmVhdGVzIGEgZG9jIGluIGB1c2VyLWNoYWxsZW5nZWAgd2l0aCB0aGUgdXNlcklkLCBjaGFsbGVuZ2VJZCwgZXRjLlxuICAgKi9cbiAgYXN5bmMgam9pbkNoYWxsZW5nZSh7XG4gICAgdXNlcm5hbWUsXG4gICAgY2hhbGxlbmdlSWRcbiAgfToge1xuICAgIHVzZXJuYW1lOiBzdHJpbmc7XG4gICAgY2hhbGxlbmdlSWQ6IHN0cmluZztcbiAgfSk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIDEpIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgc2lnbmVkLWluIHVzZXJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IHVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyO1xuICAgIGlmICghY3VycmVudFVzZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBpcyBzaWduZWQgaW4nKTtcbiAgICB9XG5cbiAgICAvLyAyKSBGaW5kIHRoZSB1c2VyIGRvYyBieSB1c2VybmFtZVxuICAgIGNvbnN0IHVzZXJzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJyk7XG4gICAgY29uc3QgdXNlclF1ZXJ5ID0gcXVlcnkodXNlcnNSZWYsIHdoZXJlKCd1c2VybmFtZScsICc9PScsIHVzZXJuYW1lKSk7XG4gICAgY29uc3QgdXNlclNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyh1c2VyUXVlcnkpO1xuXG4gICAgaWYgKHVzZXJTbmFwc2hvdC5lbXB0eSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIG5vdCBmb3VuZCcpO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZXJEb2MgPSB1c2VyU25hcHNob3QuZG9jc1swXTtcbiAgICBjb25zdCB1c2VyRGF0YSA9IHVzZXJEb2MuZGF0YSgpO1xuICAgIGNvbnN0IHVzZXJJZCA9IHVzZXJEb2MuaWQ7XG5cbiAgICAvLyAzKSBDaGVjayBpZiB0aGUgY2hhbGxlbmdlIGRvYyBleGlzdHNcbiAgICBjb25zdCBjaGFsbGVuZ2VSZWYgPSBkb2MoZGIsICdzd2VhdGxpc3QtY29sbGVjdGlvbicsIGNoYWxsZW5nZUlkKTtcbiAgICBjb25zdCBjaGFsbGVuZ2VTbmFwID0gYXdhaXQgZ2V0RG9jKGNoYWxsZW5nZVJlZik7XG5cbiAgICBpZiAoIWNoYWxsZW5nZVNuYXAuZXhpc3RzKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2hhbGxlbmdlIG5vdCBmb3VuZCcpO1xuICAgIH1cblxuICAgIGNvbnN0IGNoYWxsZW5nZSA9IGNoYWxsZW5nZVNuYXAuZGF0YSgpO1xuXG4gICAgLy8gNCkgQnVpbGQgbmV3IHVzZXItY2hhbGxlbmdlIGRvY3VtZW50XG4gICAgY29uc3QgdXNlckNoYWxsZW5nZUlkID0gYCR7Y2hhbGxlbmdlSWR9LSR7dXNlcklkfS0ke0RhdGUubm93KCl9YDtcbiAgICBjb25zdCB1c2VyQ2hhbGxlbmdlRGF0YSA9IHtcbiAgICAgIGlkOiB1c2VyQ2hhbGxlbmdlSWQsXG4gICAgICBjaGFsbGVuZ2U6IGNoYWxsZW5nZSxcbiAgICAgIGNoYWxsZW5nZUlkLFxuICAgICAgdXNlcklkLFxuICAgICAgZmNtVG9rZW46IHVzZXJEYXRhLmZjbVRva2VuIHx8ICcnLFxuICAgICAgcHJvZmlsZUltYWdlOiB1c2VyRGF0YS5wcm9maWxlSW1hZ2UgfHwge30sXG4gICAgICBwcm9ncmVzczogMCxcbiAgICAgIGNvbXBsZXRlZFdvcmtvdXRzOiBbXSxcbiAgICAgIGlzQ29tcGxldGVkOiBmYWxzZSxcbiAgICAgIHVpZDogdXNlcklkLFxuICAgICAgbG9jYXRpb246IHVzZXJEYXRhLmxvY2F0aW9uIHx8IG51bGwsXG4gICAgICBjaXR5OiAnJyxcbiAgICAgIGNvdW50cnk6ICcnLFxuICAgICAgdGltZXpvbmU6ICcnLFxuICAgICAgdXNlcm5hbWUsXG4gICAgICBqb2luRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHB1bHNlUG9pbnRzOiB7XG4gICAgICAgIGJhc2VDb21wbGV0aW9uOiAwLFxuICAgICAgICBmaXJzdENvbXBsZXRpb246IDAsXG4gICAgICAgIHN0cmVha0JvbnVzOiAwLFxuICAgICAgICBjaGVja0luQm9udXM6IDAsXG4gICAgICAgIGVmZm9ydFJhdGluZzogMCxcbiAgICAgICAgY2hhdFBhcnRpY2lwYXRpb246IDAsXG4gICAgICAgIGxvY2F0aW9uQ2hlY2tpbjogMCxcbiAgICAgICAgY29udGVudEVuZ2FnZW1lbnQ6IDAsXG4gICAgICAgIGVuY291cmFnZW1lbnRTZW50OiAwLFxuICAgICAgICBlbmNvdXJhZ2VtZW50UmVjZWl2ZWQ6IDBcbiAgICAgIH0sXG4gICAgICBjdXJyZW50U3RyZWFrOiAwLFxuICAgICAgZW5jb3VyYWdlZFVzZXJzOiBbXSxcbiAgICAgIGVuY291cmFnZWRCeVVzZXJzOiBbXSxcbiAgICAgIGNoZWNrSW5zOiBbXVxuICAgIH07XG5cbiAgICAvLyA1KSBTdG9yZSB1c2VyLWNoYWxsZW5nZSBkb2NcbiAgICBhd2FpdCBzZXREb2MoZG9jKGRiLCAndXNlci1jaGFsbGVuZ2UnLCB1c2VyQ2hhbGxlbmdlSWQpLCB1c2VyQ2hhbGxlbmdlRGF0YSk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHdvcmtvdXRTZXJ2aWNlID0gbmV3IFdvcmtvdXRTZXJ2aWNlKCk7Il0sIm5hbWVzIjpbImNvbGxlY3Rpb24iLCJkb2MiLCJnZXREb2NzIiwiZ2V0RG9jIiwicXVlcnkiLCJ3aGVyZSIsIm9yZGVyQnkiLCJmc0NvbGxlY3Rpb24iLCJzZXREb2MiLCJkZWxldGVEb2MiLCJ3cml0ZUJhdGNoIiwiZGIiLCJ1c2VyU2VydmljZSIsIkV4ZXJjaXNlTG9nIiwiRXhlcmNpc2UiLCJFeGVyY2lzZVZpZGVvIiwiV29ya291dCIsIkJvZHlab25lIiwiSW50cm9WaWRlbyIsIldvcmtvdXRTdGF0dXMiLCJTd2VhdGxpc3RDb2xsZWN0aW9uIiwiZm9ybWF0IiwiY29udmVydFRpbWVzdGFtcCIsInNlcnZlclRpbWVzdGFtcCIsImNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAiLCJDaGFsbGVuZ2UiLCJVc2VyQ2hhbGxlbmdlIiwiV29ya291dFNlcnZpY2UiLCJfY3VycmVudFdvcmtvdXQiLCJfY3VycmVudFdvcmtvdXRMb2dzIiwiZmV0Y2hDdXJyZW50V29ya291dCIsInVzZXJJZCIsInNlc3Npb24iLCJmZXRjaEN1cnJlbnRXb3Jrb3V0U2Vzc2lvbiIsIndvcmtvdXQiLCJnZXRBbGxTd2VhdGxpc3RzIiwid29ya291dHNSZWYiLCJleGVyY2lzZXNXaXRoVmlkZW9zIiwid29ya291dHNTbmFwc2hvdCIsIndvcmtvdXRzIiwid29ya291dERvYyIsIndvcmtvdXREYXRhIiwid29ya291dElkIiwibWFwcGVkRXhlcmNpc2VzIiwibG9nc1JlZiIsImxvZ3NTbmFwc2hvdCIsImVycm9yIiwiZmlyZXN0b3JlRXJyb3IiLCJFcnJvciIsImZldGNoQW5kTWFwRXhlcmNpc2VzV2l0aFZpZGVvcyIsImRvY3MiLCJkYXRhIiwiaWQiLCJleGVyY2lzZXMiLCJtYXAiLCJleGVyY2lzZVJlZiIsImZ1bGxFeGVyY2lzZSIsImZpbmQiLCJleCIsIm5hbWUiLCJleGVyY2lzZSIsImNvbnNvbGUiLCJsb2ciLCJyb3VuZFdvcmtvdXRJZCIsImNvbGxlY3Rpb25JZCIsImNoYWxsZW5nZSIsImxvZ3MiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiZHVyYXRpb24iLCJ3b3Jrb3V0UmF0aW5nIiwidXNlQXV0aG9yQ29udGVudCIsImlzQ29tcGxldGVkIiwid29ya291dFN0YXR1cyIsInN0YXJ0VGltZSIsIkRhdGUiLCJ1bmRlZmluZWQiLCJvcmRlciIsImF1dGhvciIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInpvbmUiLCJsb2dEb2MiLCJwdXNoIiwibWVzc2FnZSIsImdldFVzZXJDaGFsbGVuZ2VzQnlDaGFsbGVuZ2VJZCIsImNoYWxsZW5nZUlkIiwidXNlckNoYWxsZW5nZXNSZWYiLCJxIiwic25hcHNob3QiLCJ1c2VyQ2hhbGxlbmdlcyIsImxlbmd0aCIsImZldGNoV29ya291dFN1bW1hcmllcyIsImRhdGUiLCJjdXJyZW50VXNlciIsImZvcm1hdHRlZERhdGUiLCJzdW1tYXJpZXNSZWYiLCJmZXRjaEFsbFdvcmtvdXRTdW1tYXJpZXMiLCJmZXRjaFVzZXJDaGFsbGVuZ2VzQnlVc2VySWQiLCJzdWJ0aXRsZSIsInBhcnRpY2lwYW50cyIsInN0YXR1cyIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJpbnRyb1ZpZGVvcyIsInYiLCJ2aWRlb1VybCIsImZldGNoQ29sbGVjdGlvbldpdGhTd2VhdExpc3RzIiwic3dlYXRMaXN0cyIsInN3ZWF0bGlzdElkZW50aWZpZXIiLCJnZXRDb2xsZWN0aW9uQnlJZCIsInN3ZWF0bGlzdElkcyIsImZldGNoU2F2ZWRXb3Jrb3V0Iiwic3dlYXRsaXN0QXV0aG9ySWQiLCJwYXJzZVdvcmtvdXREYXRhIiwiUXVldWVkVXAiLCJ0b0RhdGUiLCJGdWxsQm9keSIsImVzdGltYXRlZER1cmF0aW9uIiwiZGV0ZXJtaW5lV29ya291dFpvbmUiLCJ0b0RpY3Rpb25hcnkiLCJjcmVhdGVEZWZhdWx0RXhlcmNpc2UiLCJjYXRlZ29yeSIsInR5cGUiLCJkZXRhaWxzIiwicmVwcyIsInNldHMiLCJ3ZWlnaHQiLCJzY3JlZW5UaW1lIiwic2VsZWN0ZWRWaWRlbyIsInBhcnNlRXhlcmNpc2VWaWRlbyIsInByaW1hcnlCb2R5UGFydHMiLCJzZWNvbmRhcnlCb2R5UGFydHMiLCJ0YWdzIiwidmlzaWJpbGl0eSIsInN0ZXBzIiwidmlkZW9zIiwiY3VycmVudFZpZGVvUG9zaXRpb24iLCJ1c2VybmFtZSIsInBhcnNlRXhlcmNpc2VMb2dEYXRhIiwicGFyc2VFeGVyY2lzZSIsImxvZ0VudHJ5IiwicGFyc2VJbnQiLCJwYXJzZUZsb2F0IiwibGVmdFJlcHMiLCJsZWZ0V2VpZ2h0IiwiaXNTcGxpdCIsImlzQm9keVdlaWdodCIsImNhbG9yaWVzIiwiYnBtIiwiZmVlZGJhY2siLCJub3RlIiwicmVjb21tZW5kZWRXZWlnaHQiLCJsb2dTdWJtaXR0ZWQiLCJsb2dJc0VkaXRpbmciLCJmaWVsZHMiLCJzdHJpbmdWYWx1ZSIsInBhcnNlRXhlcmNpc2VDYXRlZ29yeSIsIm1hcFZhbHVlIiwicGFyc2VCb2R5UGFydHMiLCJhcnJheVZhbHVlIiwidmFsdWVzIiwidGFnIiwic3RlcCIsInBhcnNlVmlkZW9zIiwiaW50ZWdlclZhbHVlIiwiZG91YmxlVmFsdWUiLCJwYXJzZUV4ZXJjaXNlQXV0aG9yIiwiY2F0ZWdvcnlJZCIsImJvZHlQYXJ0c0ZpZWxkIiwiYm9keVBhcnRzQXJyYXkiLCJwYXJ0IiwidmlkZW9zRmllbGQiLCJ2aWRlb3NBcnJheSIsInZpZGVvRGF0YSIsImV4ZXJjaXNlSWQiLCJ2aWRlb1VSTCIsImZpbGVOYW1lIiwicHJvZmlsZUltYWdlIiwicGFyc2VQcm9maWxlSW1hZ2UiLCJjYXB0aW9uIiwiZ2lmVVJMIiwidGh1bWJuYWlsIiwidG90YWxBY2NvdW50c1JlYWNoZWQiLCJ0b3RhbEFjY291bnRMaWtlcyIsInRvdGFsQWNjb3VudEJvb2ttYXJrZWQiLCJ0b3RhbEFjY291bnRVc2FnZSIsImlzQXBwcm92ZWQiLCJib29sZWFuVmFsdWUiLCJsaWtlZCIsImJvb2ttYXJrZWQiLCJwcm9maWxlSW1hZ2VVUkwiLCJpbWFnZU9mZnNldFdpZHRoIiwiaW1hZ2VPZmZzZXRIZWlnaHQiLCJ3b3Jrb3V0UmVmIiwid29ya291dFNuYXAiLCJleGlzdHMiLCJsb2dEYXRhIiwiZmV0Y2hVc2VyQ2hhbGxlbmdlc0J5Q2hhbGxlbmdlSWQiLCJkb2NSZWYiLCJkb2NTbmFwIiwiZmV0Y2hBY3RpdmVDaGFsbGVuZ2VzIiwiYWxsQ2hhbGxlbmdlcyIsImFjdGl2ZUNoYWxsZW5nZXMiLCJmaWx0ZXIiLCJ1c2VyQ2hhbGxlbmdlIiwiZmV0Y2hVc2VyQ2hhbGxlbmdlcyIsInVwZGF0ZVdvcmtvdXRTdW1tYXJ5Iiwic3VtbWFyeSIsInN1bW1hcnlSZWYiLCJzdW1tYXJ5RGF0YSIsImJvZHlQYXJ0cyIsIndvcmtvdXRUaXRsZSIsImNhbG9yaWVzQnVybmVkIiwiZXhlcmNpc2VzQ29tcGxldGVkIiwiYWlJbnNpZ2h0IiwicmVjb21tZW5kYXRpb25zIiwiZ2lmVVJMcyIsInJlY29tbWVuZGVkV29yayIsImNvbXBsZXRlZEF0IiwibWVyZ2UiLCJ1cGRhdGVXb3Jrb3V0TG9ncyIsImJhdGNoIiwiZm9yRWFjaCIsImxvZ0RvY1JlZiIsInVwZGF0ZSIsImNvbW1pdCIsImV4ZXJjaXNlU25hcHNob3QiLCJ2aWRlb1NuYXBzaG90IiwiZXhlcmNpc2VWaWRlb3MiLCJ3b3Jrb3V0U2Vzc2lvbnNSZWYiLCJzbmFwIiwiZnJvbUZpcmViYXNlIiwibWF0Y2hpbmdWaWRlb3MiLCJ2aWRlbyIsInRvTG93ZXJDYXNlIiwiZW1wdHkiLCJwcm9jZXNzV29ya291dFNlc3Npb25Eb2N1bWVudCIsIkluUHJvZ3Jlc3MiLCJjYW5jZWxXb3Jrb3V0U2Vzc2lvbiIsImxvZ0JhdGNoIiwid29ya291dFNlc3Npb25SZWYiLCJkZWxldGUiLCJyZWYiLCJmZXRjaEFsbFdvcmtvdXRTZXNzaW9ucyIsInNlc3Npb25zIiwiUHJvbWlzZSIsImFsbCIsInNlc3Npb25EYXRhIiwic29ydCIsImEiLCJiIiwib3JkZXJBIiwib3JkZXJCIiwidXBkYXRlQ29sbGVjdGlvbiIsImNvbGxSZWYiLCJuZXdEb2NSZWYiLCJ0cmltIiwiZXhlcmNpc2VOYW1lTG93ZXIiLCJBcmNoaXZlZCIsInByZXBhcmVkTG9nRGF0YSIsInNhdmVXb3Jrb3V0U2Vzc2lvbiIsImN1cnJlbnREYXRlIiwiY2xlYW5Xb3Jrb3V0IiwiZ2V0VGltZSIsImluZGV4Iiwic2V0Iiwiam9pbkNoYWxsZW5nZSIsInVzZXJzUmVmIiwidXNlclF1ZXJ5IiwidXNlclNuYXBzaG90IiwidXNlckRvYyIsInVzZXJEYXRhIiwiY2hhbGxlbmdlUmVmIiwiY2hhbGxlbmdlU25hcCIsInVzZXJDaGFsbGVuZ2VJZCIsInVzZXJDaGFsbGVuZ2VEYXRhIiwibm93IiwiZmNtVG9rZW4iLCJwcm9ncmVzcyIsImNvbXBsZXRlZFdvcmtvdXRzIiwidWlkIiwibG9jYXRpb24iLCJjaXR5IiwiY291bnRyeSIsInRpbWV6b25lIiwiam9pbkRhdGUiLCJwdWxzZVBvaW50cyIsImJhc2VDb21wbGV0aW9uIiwiZmlyc3RDb21wbGV0aW9uIiwic3RyZWFrQm9udXMiLCJjaGVja0luQm9udXMiLCJlZmZvcnRSYXRpbmciLCJjaGF0UGFydGljaXBhdGlvbiIsImxvY2F0aW9uQ2hlY2tpbiIsImNvbnRlbnRFbmdhZ2VtZW50IiwiZW5jb3VyYWdlbWVudFNlbnQiLCJlbmNvdXJhZ2VtZW50UmVjZWl2ZWQiLCJjdXJyZW50U3RyZWFrIiwiZW5jb3VyYWdlZFVzZXJzIiwiZW5jb3VyYWdlZEJ5VXNlcnMiLCJjaGVja0lucyIsImN1cnJlbnRXb3Jrb3V0IiwiY3VycmVudFdvcmtvdXRMb2dzIiwid29ya291dFNlcnZpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/api/firebase/workout/service.ts\n"));

/***/ })

});
"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/round/[id]",{

/***/ "./src/api/firebase/workout/service.ts":
/*!*********************************************!*\
  !*** ./src/api/firebase/workout/service.ts ***!
  \*********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   workoutService: function() { return /* binding */ workoutService; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @swc/helpers/_/_async_to_generator */ \"./node_modules/@swc/helpers/esm/_async_to_generator.js\");\n/* harmony import */ var _swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @swc/helpers/_/_class_call_check */ \"./node_modules/@swc/helpers/esm/_class_call_check.js\");\n/* harmony import */ var _swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @swc/helpers/_/_object_spread */ \"./node_modules/@swc/helpers/esm/_object_spread.js\");\n/* harmony import */ var _swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @swc/helpers/_/_object_spread_props */ \"./node_modules/@swc/helpers/esm/_object_spread_props.js\");\n/* harmony import */ var _swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @swc/helpers/_/_ts_generator */ \"./node_modules/@swc/helpers/esm/_ts_generator.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/api/firebase/config.ts\");\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../user */ \"./src/api/firebase/user/index.ts\");\n/* harmony import */ var _workout_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./types */ \"./src/api/firebase/workout/types.ts\");\n/* harmony import */ var _barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! __barrel_optimize__?names=format!=!date-fns */ \"__barrel_optimize__?names=format!=!./node_modules/date-fns/index.js\");\n/* harmony import */ var _utils_timestamp__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/timestamp */ \"./src/utils/timestamp.ts\");\n/* harmony import */ var _types_ChallengeTypes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../types/ChallengeTypes */ \"./src/types/ChallengeTypes.ts\");\n// src/api/firebase/workout/service.ts\n\n\n\n\n\n\n\n\n\n\n\n // Adjust the import path\n\nvar WorkoutService = /*#__PURE__*/ function() {\n    \"use strict\";\n    function WorkoutService() {\n        (0,_swc_helpers_class_call_check__WEBPACK_IMPORTED_MODULE_6__._)(this, WorkoutService);\n        this.currentWorkout = null;\n    }\n    var _proto = WorkoutService.prototype;\n    /**\n   * Fetch the user's current workout (either QueuedUp or InProgress).\n   */ _proto.fetchCurrentWorkout = function fetchCurrentWorkout() {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_7__._)(function() {\n            var session;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_8__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        return [\n                            4,\n                            _this.fetchCurrentWorkoutSession()\n                        ];\n                    case 1:\n                        session = _state.sent();\n                        return [\n                            2,\n                            session.workout\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getAllSweatlists = function getAllSweatlists(userId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_7__._)(function() {\n            var workoutsRef, workoutsSnapshot, workouts, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, workoutDoc, workoutData, workoutId, workout, logsRef, logsSnapshot, err, error, firestoreError;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_8__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        if (!userId) {\n                            throw new Error(\"User ID is required\");\n                        }\n                        // Reference to the user's workout collection\n                        workoutsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\");\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            11,\n                            ,\n                            12\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(workoutsRef)\n                        ];\n                    case 2:\n                        workoutsSnapshot = _state.sent();\n                        workouts = [];\n                        _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;\n                        _state.label = 3;\n                    case 3:\n                        _state.trys.push([\n                            3,\n                            8,\n                            9,\n                            10\n                        ]);\n                        _iterator = workoutsSnapshot.docs[Symbol.iterator]();\n                        _state.label = 4;\n                    case 4:\n                        if (!!(_iteratorNormalCompletion = (_step = _iterator.next()).done)) return [\n                            3,\n                            7\n                        ];\n                        workoutDoc = _step.value;\n                        workoutData = workoutDoc.data();\n                        workoutId = workoutDoc.id;\n                        // Parse workout data into the desired structure\n                        workout = new _workout_types__WEBPACK_IMPORTED_MODULE_3__.Workout({\n                            id: workoutData.id || \"\",\n                            roundWorkoutId: workoutData.roundWorkoutId || \"\",\n                            collectionId: workoutData.collectionId,\n                            exercises: workoutData.exercises || [],\n                            challenge: workoutData.challenge,\n                            logs: [],\n                            title: workoutData.title || \"\",\n                            description: workoutData.description || \"\",\n                            duration: workoutData.duration || 0,\n                            workoutRating: workoutData.workoutRating,\n                            useAuthorContent: workoutData.useAuthorContent || false,\n                            isCompleted: workoutData.isCompleted || false,\n                            workoutStatus: workoutData.workoutStatus || \"notStarted\",\n                            startTime: workoutData.startTime ? new Date(workoutData.startTime) : undefined,\n                            order: workoutData.order,\n                            author: workoutData.author || userId,\n                            createdAt: workoutData.createdAt ? new Date(workoutData.createdAt) : new Date(),\n                            updatedAt: workoutData.updatedAt ? new Date(workoutData.updatedAt) : new Date(),\n                            zone: workoutData.zone || \"FULL_BODY\"\n                        });\n                        // Fetch and process logs\n                        logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\", workoutId, \"logs\");\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef)\n                        ];\n                    case 5:\n                        logsSnapshot = _state.sent();\n                        workout.logs = logsSnapshot.docs.map(function(logDoc) {\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_9__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_10__._)({}, logDoc.data()), {\n                                id: logDoc.id\n                            });\n                        });\n                        workouts.push(workout);\n                        _state.label = 6;\n                    case 6:\n                        _iteratorNormalCompletion = true;\n                        return [\n                            3,\n                            4\n                        ];\n                    case 7:\n                        return [\n                            3,\n                            10\n                        ];\n                    case 8:\n                        err = _state.sent();\n                        _didIteratorError = true;\n                        _iteratorError = err;\n                        return [\n                            3,\n                            10\n                        ];\n                    case 9:\n                        try {\n                            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n                                _iterator[\"return\"]();\n                            }\n                        } finally{\n                            if (_didIteratorError) {\n                                throw _iteratorError;\n                            }\n                        }\n                        return [\n                            7\n                        ];\n                    case 10:\n                        return [\n                            2,\n                            workouts\n                        ];\n                    case 11:\n                        error = _state.sent();\n                        firestoreError = error;\n                        console.error(\"Error fetching sweatlists:\", firestoreError.message);\n                        throw new Error(\"Failed to fetch sweatlists\");\n                    case 12:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetches workout summaries for a specific date.\n   * @param date - The date for which workout summaries are being fetched.\n   * @returns A promise resolving to an array of workout summaries.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ _proto.fetchWorkoutSummaries = function fetchWorkoutSummaries(date) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_7__._)(function() {\n            var currentUser, formattedDate, summariesRef, q, snapshot, error, firestoreError;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_8__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Format the date to match the format in Firestore ('MM-dd-yyyy')\n                        formattedDate = (0,_barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_11__.format)(date, \"MM-dd-yyyy\");\n                        // Reference to the user's workoutSummaries subcollection\n                        summariesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", currentUser.id, \"workoutSummaries\");\n                        // Create a query to filter documents by the specified date\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(summariesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"date\", \"==\", formattedDate));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // Map the documents to an array of WorkoutSummary objects\n                        return [\n                            2,\n                            snapshot.docs.map(function(doc) {\n                                return (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_10__._)({\n                                    id: doc.id\n                                }, doc.data());\n                            })\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        firestoreError = error;\n                        console.error(\"Error fetching workout summaries:\", firestoreError.message);\n                        throw new Error(firestoreError.message);\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.fetchAllWorkoutSummaries = function fetchAllWorkoutSummaries() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_7__._)(function() {\n            var currentUser, summariesRef, q, snapshot, error, firestoreError;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_8__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Reference to the user's workoutSummaries subcollection\n                        summariesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", currentUser.id, \"workoutSummary\");\n                        // Query to retrieve all workout summaries, sorted by `createdAt` in ascending order\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(summariesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"asc\")); // Adjust field name based on your schema\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // Map the documents to an array of WorkoutSummary objects\n                        return [\n                            2,\n                            snapshot.docs.map(function(doc) {\n                                return (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_10__._)({\n                                    id: doc.id\n                                }, doc.data());\n                            })\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        firestoreError = error;\n                        console.error(\"Error fetching all workout summaries:\", firestoreError.message);\n                        throw new Error(firestoreError.message);\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n * Fetch user challenges by userId.\n * @param userId The ID of the user to fetch challenges for.\n * @returns A promise resolving to an array of user challenges.\n * @throws If the Firestore query fails.\n */ _proto.fetchUserChallengesByUserId = function fetchUserChallengesByUserId(userId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_7__._)(function() {\n            var userChallengesRef, q, snapshot, userChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_8__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", userId));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        console.log(\"Fetching challenges for user ID: \".concat(userId));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        console.log(\"Total challenges fetched: \".concat(snapshot.docs.length));\n                        userChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            console.log(\"Processing challenge with ID: \".concat(doc.id), data);\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_9__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_10__._)({\n                                id: doc.id\n                            }, data), {\n                                challenge: data.challenge ? new _types_ChallengeTypes__WEBPACK_IMPORTED_MODULE_5__.Challenge({\n                                    id: data.challenge.id,\n                                    title: data.challenge.title,\n                                    subtitle: data.challenge.subtitle,\n                                    participants: data.challenge.participants || [],\n                                    status: data.challenge.status,\n                                    startDate: data.challenge.startDate ? new Date(data.challenge.startDate) : new Date(),\n                                    endDate: data.challenge.endDate ? new Date(data.challenge.endDate) : new Date(),\n                                    createdAt: data.challenge.createdAt ? new Date(data.challenge.createdAt) : new Date(),\n                                    updatedAt: data.challenge.updatedAt ? new Date(data.challenge.updatedAt) : new Date(),\n                                    introVideoURL: data.challenge.introVideoURL || \"\"\n                                }) : undefined,\n                                createdAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_4__.convertTimestamp)(data.createdAt),\n                                updatedAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_4__.convertTimestamp)(data.updatedAt)\n                            });\n                        });\n                        console.log(\"All challenges after processing:\", JSON.stringify(userChallenges, null, 2));\n                        return [\n                            2,\n                            userChallenges\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges by userId:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n * Fetch user challenges by challengeId.\n * @param challengeId The ID of the challenge to fetch associated user challenges for.\n * @returns A promise resolving to an array of user challenges.\n * @throws If the Firestore query fails.\n */ _proto.fetchUserChallengesByChallengeId = function fetchUserChallengesByChallengeId(challengeId) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_7__._)(function() {\n            var userChallengesRef, q, snapshot, userChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_8__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"challengeId\", \"==\", challengeId));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        console.log(\"Fetching user challenges for challenge ID: \".concat(challengeId));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        console.log(\"Total user challenges fetched: \".concat(snapshot.docs.length));\n                        userChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            console.log(\"Processing user challenge with ID: \".concat(doc.id), data);\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_9__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_10__._)({\n                                id: doc.id\n                            }, data), {\n                                challenge: data.challenge ? new _types_ChallengeTypes__WEBPACK_IMPORTED_MODULE_5__.Challenge({\n                                    id: data.challenge.id,\n                                    title: data.challenge.title,\n                                    subtitle: data.challenge.subtitle,\n                                    participants: data.challenge.participants || [],\n                                    status: data.challenge.status,\n                                    startDate: data.challenge.startDate ? new Date(data.challenge.startDate) : new Date(),\n                                    endDate: data.challenge.endDate ? new Date(data.challenge.endDate) : new Date(),\n                                    createdAt: data.challenge.createdAt ? new Date(data.challenge.createdAt) : new Date(),\n                                    updatedAt: data.challenge.updatedAt ? new Date(data.challenge.updatedAt) : new Date(),\n                                    introVideoURL: data.challenge.introVideoURL || \"\"\n                                }) : undefined,\n                                createdAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_4__.convertTimestamp)(data.createdAt),\n                                updatedAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_4__.convertTimestamp)(data.updatedAt)\n                            });\n                        });\n                        console.log(\"All user challenges after processing:\", JSON.stringify(userChallenges, null, 2));\n                        return [\n                            2,\n                            userChallenges\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges by challengeId:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    _proto.getCollectionById = function getCollectionById(id) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_7__._)(function() {\n            var docRef, docSnap, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_8__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        _state.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\", id);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef)\n                        ];\n                    case 1:\n                        docSnap = _state.sent();\n                        if (docSnap.exists()) {\n                            return [\n                                2,\n                                (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_10__._)({\n                                    id: docSnap.id\n                                }, docSnap.data())\n                            ];\n                        } else {\n                            throw new Error(\"Collection not found\");\n                        }\n                        return [\n                            3,\n                            3\n                        ];\n                    case 2:\n                        error = _state.sent();\n                        console.error(\"Error getting collection by ID:\", error);\n                        throw error;\n                    case 3:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetch user challenges by userId and filter for active challenges.\n   * @returns A promise resolving to an array of active challenges.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ _proto.fetchActiveChallenges = function fetchActiveChallenges() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_7__._)(function() {\n            var currentUser, userChallengesRef, q, snapshot, allChallenges, activeChallenges, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_8__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", currentUser.id));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        console.log(\"Fetching challenges for user ID: \".concat(currentUser.id));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        console.log(\"Total challenges fetched: \".concat(snapshot.docs.length));\n                        allChallenges = snapshot.docs.map(function(doc) {\n                            var data = doc.data();\n                            console.log(\"Processing challenge with ID: \".concat(doc.id), data);\n                            // Use the Challenge constructor to parse the challenge data\n                            var challenge = data.challenge ? new _types_ChallengeTypes__WEBPACK_IMPORTED_MODULE_5__.Challenge({\n                                id: data.challenge.id,\n                                title: data.challenge.title,\n                                subtitle: data.challenge.subtitle,\n                                participants: data.challenge.participants || [],\n                                status: data.challenge.status,\n                                startDate: data.challenge.startDate ? data.challenge.startDate.toDate() : null,\n                                endDate: data.challenge.endDate ? data.challenge.endDate.toDate() : null,\n                                createdAt: data.challenge.createdAt ? data.challenge.createdAt.toDate() // Assuming it's a Firebase Timestamp\n                                 : null,\n                                updatedAt: data.challenge.updatedAt ? data.challenge.updatedAt.toDate() // Assuming it's a Firebase Timestamp\n                                 : null,\n                                introVideoURL: data.challenge.introVideoURL || \"\"\n                            }) : undefined;\n                            return (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_9__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_10__._)({\n                                id: doc.id\n                            }, data), {\n                                challenge: challenge,\n                                createdAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_4__.convertTimestamp)(data.createdAt),\n                                updatedAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_4__.convertTimestamp)(data.updatedAt)\n                            });\n                        });\n                        console.log(\"All challenges after processing:\", JSON.stringify(allChallenges, null, 2));\n                        // Filter for active challenges (endDate > current date)\n                        activeChallenges = allChallenges.filter(function(userChallenge) {\n                            var _userChallenge_challenge;\n                            var endDate = (_userChallenge_challenge = userChallenge.challenge) === null || _userChallenge_challenge === void 0 ? void 0 : _userChallenge_challenge.endDate;\n                            console.log(\"Evaluating challenge ID: \".concat(userChallenge.id, \", End Date: \").concat(endDate, \", Current Date: \").concat(new Date()));\n                            return endDate && endDate > new Date();\n                        });\n                        console.log(\"Total active challenges: \".concat(activeChallenges.length), activeChallenges);\n                        return [\n                            2,\n                            activeChallenges\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching active challenges:\", error);\n                        throw error;\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetch user challenges by userId.\n   * @returns A promise resolving to an array of challenges.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ _proto.fetchUserChallenges = function fetchUserChallenges() {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_7__._)(function() {\n            var currentUser, userChallengesRef, q, snapshot, error;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_8__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Reference to the user-challenge collection\n                        userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n                        // Query challenges where userId matches the current user's ID\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", currentUser.id));\n                        _state.label = 1;\n                    case 1:\n                        _state.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snapshot = _state.sent();\n                        // Map documents to an array of Challenge objects\n                        return [\n                            2,\n                            snapshot.docs.map(function(doc) {\n                                return (0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_10__._)({\n                                    id: doc.id\n                                }, doc.data());\n                            })\n                        ];\n                    case 3:\n                        error = _state.sent();\n                        console.error(\"Error fetching user challenges:\", error);\n                        throw new Error(\"Failed to fetch user challenges\");\n                    case 4:\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Fetch the workout session from Firestore, returning { workout, logs }.\n   * Checks first for a QueuedUp session, then for InProgress.\n   */ _proto.fetchCurrentWorkoutSession = function fetchCurrentWorkoutSession() {\n        var _this = this;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_7__._)(function() {\n            var currentUser, workoutSessionsRef, q, snap;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_8__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!(currentUser === null || currentUser === void 0 ? void 0 : currentUser.id)) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // Reference to user's workoutSessions\n                        workoutSessionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", currentUser.id, \"workoutSessions\");\n                        // 1) Check for QueuedUp\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(workoutSessionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", _workout_types__WEBPACK_IMPORTED_MODULE_3__.WorkoutStatus.QueuedUp));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 1:\n                        snap = _state.sent();\n                        if (!snap.empty) {\n                            return [\n                                2,\n                                _this.processWorkoutSessionDocument(snap.docs[0])\n                            ];\n                        }\n                        // 2) Check for InProgress\n                        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(workoutSessionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", _workout_types__WEBPACK_IMPORTED_MODULE_3__.WorkoutStatus.InProgress));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q)\n                        ];\n                    case 2:\n                        snap = _state.sent();\n                        if (!snap.empty) {\n                            return [\n                                2,\n                                _this.processWorkoutSessionDocument(snap.docs[0])\n                            ];\n                        }\n                        // None found\n                        return [\n                            2,\n                            {\n                                workout: null,\n                                logs: null\n                            }\n                        ];\n                }\n            });\n        })();\n    };\n    /**\n   * Helper to build the Workout object + any logs from the snapshot.\n   */ _proto.processWorkoutSessionDocument = function processWorkoutSessionDocument(workoutDoc) {\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_7__._)(function() {\n            var _data_createdAt, _data_updatedAt, data, _data_createdAt_toDate, _data_updatedAt_toDate, workout, logs;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_8__._)(this, function(_state) {\n                data = workoutDoc.data();\n                workout = (0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_9__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_10__._)({\n                    id: workoutDoc.id\n                }, data), {\n                    // Make sure to handle .toDate() if these fields are Firebase Timestamps\n                    createdAt: (_data_createdAt_toDate = (_data_createdAt = data.createdAt) === null || _data_createdAt === void 0 ? void 0 : _data_createdAt.toDate()) !== null && _data_createdAt_toDate !== void 0 ? _data_createdAt_toDate : new Date(),\n                    updatedAt: (_data_updatedAt_toDate = (_data_updatedAt = data.updatedAt) === null || _data_updatedAt === void 0 ? void 0 : _data_updatedAt.toDate()) !== null && _data_updatedAt_toDate !== void 0 ? _data_updatedAt_toDate : new Date()\n                });\n                // If you have logs embedded in the same doc or in a subcollection,\n                // fetch them here. For now, we return an empty array.\n                logs = [];\n                return [\n                    2,\n                    {\n                        workout: workout,\n                        logs: logs\n                    }\n                ];\n            });\n        })();\n    };\n    /**\n   * Example \"join challenge\" method using the client SDK (no admin privileges).\n   * This creates a doc in `user-challenge` with the userId, challengeId, etc.\n   */ _proto.joinChallenge = function joinChallenge(param) {\n        var username = param.username, challengeId = param.challengeId;\n        return (0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_7__._)(function() {\n            var currentUser, usersRef, userQuery, userSnapshot, userDoc, userData, userId, challengeRef, challengeSnap, challenge, userChallengeId, userChallengeData;\n            return (0,_swc_helpers_ts_generator__WEBPACK_IMPORTED_MODULE_8__._)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        // 1) Make sure we have a signed-in user\n                        currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.currentUser;\n                        if (!currentUser) {\n                            throw new Error(\"No user is signed in\");\n                        }\n                        // 2) Find the user doc by username\n                        usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\");\n                        userQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"username\", \"==\", username));\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(userQuery)\n                        ];\n                    case 1:\n                        userSnapshot = _state.sent();\n                        if (userSnapshot.empty) {\n                            throw new Error(\"User not found\");\n                        }\n                        userDoc = userSnapshot.docs[0];\n                        userData = userDoc.data();\n                        userId = userDoc.id;\n                        // 3) Check if the challenge doc exists\n                        challengeRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\", challengeId);\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(challengeRef)\n                        ];\n                    case 2:\n                        challengeSnap = _state.sent();\n                        if (!challengeSnap.exists()) {\n                            throw new Error(\"Challenge not found\");\n                        }\n                        challenge = challengeSnap.data();\n                        // 4) Build new user-challenge document\n                        userChallengeId = \"\".concat(challengeId, \"-\").concat(userId, \"-\").concat(Date.now());\n                        userChallengeData = {\n                            id: userChallengeId,\n                            challenge: challenge,\n                            challengeId: challengeId,\n                            userId: userId,\n                            fcmToken: userData.fcmToken || \"\",\n                            profileImage: userData.profileImage || {},\n                            progress: 0,\n                            completedWorkouts: [],\n                            isCompleted: false,\n                            uid: userId,\n                            location: userData.location || null,\n                            city: \"\",\n                            country: \"\",\n                            timezone: \"\",\n                            username: username,\n                            joinDate: new Date(),\n                            createdAt: new Date(),\n                            updatedAt: new Date(),\n                            pulsePoints: {\n                                baseCompletion: 0,\n                                firstCompletion: 0,\n                                streakBonus: 0,\n                                checkInBonus: 0,\n                                effortRating: 0,\n                                chatParticipation: 0,\n                                locationCheckin: 0,\n                                contentEngagement: 0,\n                                encouragementSent: 0,\n                                encouragementReceived: 0\n                            },\n                            currentStreak: 0,\n                            encouragedUsers: [],\n                            encouragedByUsers: [],\n                            checkIns: []\n                        };\n                        // 5) Store user-challenge doc\n                        return [\n                            4,\n                            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\", userChallengeId), userChallengeData)\n                        ];\n                    case 3:\n                        _state.sent();\n                        return [\n                            2\n                        ];\n                }\n            });\n        })();\n    };\n    return WorkoutService;\n}();\nvar workoutService = new WorkoutService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YztnQ0FDZEMsbUJBQW1CO2dDQUNuQkMsaUJBQWlCO2dDQUNqQkMsbUJBQW1CO2dDQUNuQkMsbUJBQW1CO2dDQUNuQkMsdUJBQXVCOzRCQUN6Qjs0QkFDQUMsZUFBZTs0QkFDZkMsZUFBZTs0QkFDZkMsaUJBQWlCOzRCQUNqQkMsUUFBUTt3QkFDVjt3QkFFQSw4QkFBOEI7d0JBQzlCOzs0QkFBTW5JLDBEQUFNQSxDQUFDTix1REFBR0EsQ0FBQ08sdUNBQUVBLEVBQUUsa0JBQWtCdUcsa0JBQWtCQzs7O3dCQUF6RDs7Ozs7O1FBQ0Y7O1dBMWZJakc7O0FBNmZDLElBQU00SCxpQkFBaUIsSUFBSTVILGlCQUFpQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvYXBpL2ZpcmViYXNlL3dvcmtvdXQvc2VydmljZS50cz9jNWUyIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9hcGkvZmlyZWJhc2Uvd29ya291dC9zZXJ2aWNlLnRzXG5pbXBvcnQge1xuICBjb2xsZWN0aW9uLFxuICBkb2MsXG4gIGdldERvY3MsXG4gIGdldERvYyxcbiAgcXVlcnksXG4gIHdoZXJlLFxuICBvcmRlckJ5LCBcbiAgRG9jdW1lbnREYXRhLFxuICBRdWVyeURvY3VtZW50U25hcHNob3QsXG4gIHNldERvY1xufSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xuXG5pbXBvcnQgeyAgXG4gIFVzZXJDaGFsbGVuZ2VcbiB9IGZyb20gJy4uLy4uLy4uL3R5cGVzL0NoYWxsZW5nZVR5cGVzJztcblxuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi9jb25maWcnO1xuaW1wb3J0IHsgdXNlclNlcnZpY2UgfSBmcm9tICcuLi91c2VyJztcbmltcG9ydCB7IEV4ZXJjaXNlTG9nIH0gZnJvbSAnLi4vZXhlcmNpc2UvdHlwZXMnO1xuaW1wb3J0IHsgV29ya291dCwgV29ya291dFN1bW1hcnkgfSBmcm9tICcuLi93b3Jrb3V0L3R5cGVzJztcbmltcG9ydCB7IFdvcmtvdXRTdGF0dXMgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGZvcm1hdCB9IGZyb20gJ2RhdGUtZm5zJzsgXG5pbXBvcnQgeyBjb252ZXJ0VGltZXN0YW1wIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdGltZXN0YW1wJzsgLy8gQWRqdXN0IHRoZSBpbXBvcnQgcGF0aFxuaW1wb3J0IHsgQ2hhbGxlbmdlLCBDaGFsbGVuZ2VTdGF0dXMgfSBmcm9tICcuLi8uLi8uLi90eXBlcy9DaGFsbGVuZ2VUeXBlcyc7XG5cblxuaW50ZXJmYWNlIEZpcmVzdG9yZUVycm9yIHtcbiAgY29kZTogc3RyaW5nO1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgc3RhY2s/OiBzdHJpbmc7XG59XG5cbmNsYXNzIFdvcmtvdXRTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBjdXJyZW50V29ya291dDogV29ya291dCB8IG51bGwgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBGZXRjaCB0aGUgdXNlcidzIGN1cnJlbnQgd29ya291dCAoZWl0aGVyIFF1ZXVlZFVwIG9yIEluUHJvZ3Jlc3MpLlxuICAgKi9cbiAgYXN5bmMgZmV0Y2hDdXJyZW50V29ya291dCgpOiBQcm9taXNlPFdvcmtvdXQgfCBudWxsPiB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHRoaXMuZmV0Y2hDdXJyZW50V29ya291dFNlc3Npb24oKTtcbiAgICByZXR1cm4gc2Vzc2lvbi53b3Jrb3V0O1xuICB9XG5cbiAgYXN5bmMgZ2V0QWxsU3dlYXRsaXN0cyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8V29ya291dFtdPiB7XG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBJRCBpcyByZXF1aXJlZCcpO1xuICAgIH1cbiAgXG4gICAgLy8gUmVmZXJlbmNlIHRvIHRoZSB1c2VyJ3Mgd29ya291dCBjb2xsZWN0aW9uXG4gICAgY29uc3Qgd29ya291dHNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCB1c2VySWQsICdNeUNyZWF0ZWRXb3Jrb3V0cycpO1xuICBcbiAgICB0cnkge1xuICAgICAgLy8gUXVlcnkgdG8gZmV0Y2ggYWxsIHdvcmtvdXRzXG4gICAgICBjb25zdCB3b3Jrb3V0c1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyh3b3Jrb3V0c1JlZik7XG4gICAgICBjb25zdCB3b3Jrb3V0czogV29ya291dFtdID0gW107XG4gIFxuICAgICAgLy8gUHJvY2VzcyBlYWNoIHdvcmtvdXQgZG9jdW1lbnRcbiAgICAgIGZvciAoY29uc3Qgd29ya291dERvYyBvZiB3b3Jrb3V0c1NuYXBzaG90LmRvY3MpIHtcbiAgICAgICAgY29uc3Qgd29ya291dERhdGEgPSB3b3Jrb3V0RG9jLmRhdGEoKTtcbiAgICAgICAgY29uc3Qgd29ya291dElkID0gd29ya291dERvYy5pZDtcbiAgXG4gICAgICAgIC8vIFBhcnNlIHdvcmtvdXQgZGF0YSBpbnRvIHRoZSBkZXNpcmVkIHN0cnVjdHVyZVxuICAgICAgICBjb25zdCB3b3Jrb3V0ID0gbmV3IFdvcmtvdXQoe1xuICAgICAgICAgIGlkOiB3b3Jrb3V0RGF0YS5pZCB8fCAnJyxcbiAgICAgICAgICByb3VuZFdvcmtvdXRJZDogd29ya291dERhdGEucm91bmRXb3Jrb3V0SWQgfHwgJycsXG4gICAgICAgICAgY29sbGVjdGlvbklkOiB3b3Jrb3V0RGF0YS5jb2xsZWN0aW9uSWQsXG4gICAgICAgICAgZXhlcmNpc2VzOiB3b3Jrb3V0RGF0YS5leGVyY2lzZXMgfHwgW10sXG4gICAgICAgICAgY2hhbGxlbmdlOiB3b3Jrb3V0RGF0YS5jaGFsbGVuZ2UsXG4gICAgICAgICAgbG9nczogW10sXG4gICAgICAgICAgdGl0bGU6IHdvcmtvdXREYXRhLnRpdGxlIHx8ICcnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiB3b3Jrb3V0RGF0YS5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgICBkdXJhdGlvbjogd29ya291dERhdGEuZHVyYXRpb24gfHwgMCxcbiAgICAgICAgICB3b3Jrb3V0UmF0aW5nOiB3b3Jrb3V0RGF0YS53b3Jrb3V0UmF0aW5nLFxuICAgICAgICAgIHVzZUF1dGhvckNvbnRlbnQ6IHdvcmtvdXREYXRhLnVzZUF1dGhvckNvbnRlbnQgfHwgZmFsc2UsXG4gICAgICAgICAgaXNDb21wbGV0ZWQ6IHdvcmtvdXREYXRhLmlzQ29tcGxldGVkIHx8IGZhbHNlLFxuICAgICAgICAgIHdvcmtvdXRTdGF0dXM6IHdvcmtvdXREYXRhLndvcmtvdXRTdGF0dXMgfHwgJ25vdFN0YXJ0ZWQnLFxuICAgICAgICAgIHN0YXJ0VGltZTogd29ya291dERhdGEuc3RhcnRUaW1lID8gbmV3IERhdGUod29ya291dERhdGEuc3RhcnRUaW1lKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBvcmRlcjogd29ya291dERhdGEub3JkZXIsXG4gICAgICAgICAgYXV0aG9yOiB3b3Jrb3V0RGF0YS5hdXRob3IgfHwgdXNlcklkLFxuICAgICAgICAgIGNyZWF0ZWRBdDogd29ya291dERhdGEuY3JlYXRlZEF0ID8gbmV3IERhdGUod29ya291dERhdGEuY3JlYXRlZEF0KSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgdXBkYXRlZEF0OiB3b3Jrb3V0RGF0YS51cGRhdGVkQXQgPyBuZXcgRGF0ZSh3b3Jrb3V0RGF0YS51cGRhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICB6b25lOiB3b3Jrb3V0RGF0YS56b25lIHx8ICdGVUxMX0JPRFknLFxuICAgICAgICB9KTsgICAgICAgIFxuICBcbiAgICAgICAgLy8gRmV0Y2ggYW5kIHByb2Nlc3MgbG9nc1xuICAgICAgICBjb25zdCBsb2dzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgdXNlcklkLCAnTXlDcmVhdGVkV29ya291dHMnLCB3b3Jrb3V0SWQsICdsb2dzJyk7XG4gICAgICAgIGNvbnN0IGxvZ3NTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MobG9nc1JlZik7XG4gICAgICAgIHdvcmtvdXQubG9ncyA9IGxvZ3NTbmFwc2hvdC5kb2NzLm1hcCgobG9nRG9jKSA9PiAoe1xuICAgICAgICAgIC4uLmxvZ0RvYy5kYXRhKCksXG4gICAgICAgICAgaWQ6IGxvZ0RvYy5pZCxcbiAgICAgICAgfSkpIGFzIEV4ZXJjaXNlTG9nW107XG4gIFxuICAgICAgICB3b3Jrb3V0cy5wdXNoKHdvcmtvdXQpO1xuICAgICAgfVxuICBcbiAgICAgIHJldHVybiB3b3Jrb3V0cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZmlyZXN0b3JlRXJyb3IgPSBlcnJvciBhcyBGaXJlc3RvcmVFcnJvcjtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHN3ZWF0bGlzdHM6JywgZmlyZXN0b3JlRXJyb3IubWVzc2FnZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBzd2VhdGxpc3RzJyk7XG4gICAgfVxuICB9XG4gIFxuICAvKipcbiAgICogRmV0Y2hlcyB3b3Jrb3V0IHN1bW1hcmllcyBmb3IgYSBzcGVjaWZpYyBkYXRlLlxuICAgKiBAcGFyYW0gZGF0ZSAtIFRoZSBkYXRlIGZvciB3aGljaCB3b3Jrb3V0IHN1bW1hcmllcyBhcmUgYmVpbmcgZmV0Y2hlZC5cbiAgICogQHJldHVybnMgQSBwcm9taXNlIHJlc29sdmluZyB0byBhbiBhcnJheSBvZiB3b3Jrb3V0IHN1bW1hcmllcy5cbiAgICogQHRocm93cyBJZiBubyB1c2VyIGlzIHNpZ25lZCBpbiBvciBpZiB0aGUgRmlyZXN0b3JlIHF1ZXJ5IGZhaWxzLlxuICAgKi9cbiAgYXN5bmMgZmV0Y2hXb3Jrb3V0U3VtbWFyaWVzKGRhdGU6IERhdGUpOiBQcm9taXNlPFdvcmtvdXRTdW1tYXJ5W10+IHtcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IHVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyO1xuICAgIGlmICghY3VycmVudFVzZXI/LmlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgfVxuXG4gICAgLy8gRm9ybWF0IHRoZSBkYXRlIHRvIG1hdGNoIHRoZSBmb3JtYXQgaW4gRmlyZXN0b3JlICgnTU0tZGQteXl5eScpXG4gICAgY29uc3QgZm9ybWF0dGVkRGF0ZSA9IGZvcm1hdChkYXRlLCAnTU0tZGQteXl5eScpO1xuXG4gICAgLy8gUmVmZXJlbmNlIHRvIHRoZSB1c2VyJ3Mgd29ya291dFN1bW1hcmllcyBzdWJjb2xsZWN0aW9uXG4gICAgY29uc3Qgc3VtbWFyaWVzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgY3VycmVudFVzZXIuaWQsICd3b3Jrb3V0U3VtbWFyaWVzJyk7XG5cbiAgICAvLyBDcmVhdGUgYSBxdWVyeSB0byBmaWx0ZXIgZG9jdW1lbnRzIGJ5IHRoZSBzcGVjaWZpZWQgZGF0ZVxuICAgIGNvbnN0IHEgPSBxdWVyeShzdW1tYXJpZXNSZWYsIHdoZXJlKCdkYXRlJywgJz09JywgZm9ybWF0dGVkRGF0ZSkpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcblxuICAgICAgLy8gTWFwIHRoZSBkb2N1bWVudHMgdG8gYW4gYXJyYXkgb2YgV29ya291dFN1bW1hcnkgb2JqZWN0c1xuICAgICAgcmV0dXJuIHNuYXBzaG90LmRvY3MubWFwKChkb2M6IERvY3VtZW50RGF0YSkgPT4gKHtcbiAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgLi4uZG9jLmRhdGEoKSxcbiAgICAgIH0pKSBhcyBXb3Jrb3V0U3VtbWFyeVtdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBmaXJlc3RvcmVFcnJvciA9IGVycm9yIGFzIEZpcmVzdG9yZUVycm9yO1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgd29ya291dCBzdW1tYXJpZXM6JywgZmlyZXN0b3JlRXJyb3IubWVzc2FnZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZmlyZXN0b3JlRXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZmV0Y2hBbGxXb3Jrb3V0U3VtbWFyaWVzKCk6IFByb21pc2U8V29ya291dFN1bW1hcnlbXT4ge1xuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlclNlcnZpY2UuY3VycmVudFVzZXI7XG4gICAgaWYgKCFjdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBpcyBzaWduZWQgaW4nKTtcbiAgICB9XG4gIFxuICAgIC8vIFJlZmVyZW5jZSB0byB0aGUgdXNlcidzIHdvcmtvdXRTdW1tYXJpZXMgc3ViY29sbGVjdGlvblxuICAgIGNvbnN0IHN1bW1hcmllc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycsIGN1cnJlbnRVc2VyLmlkLCAnd29ya291dFN1bW1hcnknKTtcbiAgXG4gICAgLy8gUXVlcnkgdG8gcmV0cmlldmUgYWxsIHdvcmtvdXQgc3VtbWFyaWVzLCBzb3J0ZWQgYnkgYGNyZWF0ZWRBdGAgaW4gYXNjZW5kaW5nIG9yZGVyXG4gICAgY29uc3QgcSA9IHF1ZXJ5KHN1bW1hcmllc1JlZiwgb3JkZXJCeSgnY3JlYXRlZEF0JywgJ2FzYycpKTsgLy8gQWRqdXN0IGZpZWxkIG5hbWUgYmFzZWQgb24geW91ciBzY2hlbWFcbiAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgXG4gICAgICAvLyBNYXAgdGhlIGRvY3VtZW50cyB0byBhbiBhcnJheSBvZiBXb3Jrb3V0U3VtbWFyeSBvYmplY3RzXG4gICAgICByZXR1cm4gc25hcHNob3QuZG9jcy5tYXAoKGRvYzogRG9jdW1lbnREYXRhKSA9PiAoe1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kb2MuZGF0YSgpLFxuICAgICAgfSkpIGFzIFdvcmtvdXRTdW1tYXJ5W107XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IGZpcmVzdG9yZUVycm9yID0gZXJyb3IgYXMgRmlyZXN0b3JlRXJyb3I7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhbGwgd29ya291dCBzdW1tYXJpZXM6JywgZmlyZXN0b3JlRXJyb3IubWVzc2FnZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZmlyZXN0b3JlRXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAqIEZldGNoIHVzZXIgY2hhbGxlbmdlcyBieSB1c2VySWQuXG4gKiBAcGFyYW0gdXNlcklkIFRoZSBJRCBvZiB0aGUgdXNlciB0byBmZXRjaCBjaGFsbGVuZ2VzIGZvci5cbiAqIEByZXR1cm5zIEEgcHJvbWlzZSByZXNvbHZpbmcgdG8gYW4gYXJyYXkgb2YgdXNlciBjaGFsbGVuZ2VzLlxuICogQHRocm93cyBJZiB0aGUgRmlyZXN0b3JlIHF1ZXJ5IGZhaWxzLlxuICovXG5hc3luYyBmZXRjaFVzZXJDaGFsbGVuZ2VzQnlVc2VySWQodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXJDaGFsbGVuZ2VbXT4ge1xuICBjb25zdCB1c2VyQ2hhbGxlbmdlc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VyLWNoYWxsZW5nZScpO1xuICBjb25zdCBxID0gcXVlcnkodXNlckNoYWxsZW5nZXNSZWYsIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpKTtcblxuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKGBGZXRjaGluZyBjaGFsbGVuZ2VzIGZvciB1c2VyIElEOiAke3VzZXJJZH1gKTtcblxuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcblxuICAgIGNvbnNvbGUubG9nKGBUb3RhbCBjaGFsbGVuZ2VzIGZldGNoZWQ6ICR7c25hcHNob3QuZG9jcy5sZW5ndGh9YCk7XG5cbiAgICBjb25zdCB1c2VyQ2hhbGxlbmdlcyA9IHNuYXBzaG90LmRvY3MubWFwKChkb2M6IERvY3VtZW50RGF0YSkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICBjb25zb2xlLmxvZyhgUHJvY2Vzc2luZyBjaGFsbGVuZ2Ugd2l0aCBJRDogJHtkb2MuaWR9YCwgZGF0YSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgIC4uLmRhdGEsXG4gICAgICAgIGNoYWxsZW5nZTogZGF0YS5jaGFsbGVuZ2VcbiAgICAgICAgICA/IG5ldyBDaGFsbGVuZ2Uoe1xuICAgICAgICAgICAgICBpZDogZGF0YS5jaGFsbGVuZ2UuaWQsXG4gICAgICAgICAgICAgIHRpdGxlOiBkYXRhLmNoYWxsZW5nZS50aXRsZSxcbiAgICAgICAgICAgICAgc3VidGl0bGU6IGRhdGEuY2hhbGxlbmdlLnN1YnRpdGxlLFxuICAgICAgICAgICAgICBwYXJ0aWNpcGFudHM6IGRhdGEuY2hhbGxlbmdlLnBhcnRpY2lwYW50cyB8fCBbXSxcbiAgICAgICAgICAgICAgc3RhdHVzOiBkYXRhLmNoYWxsZW5nZS5zdGF0dXMgYXMgQ2hhbGxlbmdlU3RhdHVzLFxuICAgICAgICAgICAgICBzdGFydERhdGU6IGRhdGEuY2hhbGxlbmdlLnN0YXJ0RGF0ZSA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLnN0YXJ0RGF0ZSkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICBlbmREYXRlOiBkYXRhLmNoYWxsZW5nZS5lbmREYXRlID8gbmV3IERhdGUoZGF0YS5jaGFsbGVuZ2UuZW5kRGF0ZSkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGRhdGEuY2hhbGxlbmdlLmNyZWF0ZWRBdCA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLmNyZWF0ZWRBdCkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICB1cGRhdGVkQXQ6IGRhdGEuY2hhbGxlbmdlLnVwZGF0ZWRBdCA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLnVwZGF0ZWRBdCkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICBpbnRyb1ZpZGVvVVJMOiBkYXRhLmNoYWxsZW5nZS5pbnRyb1ZpZGVvVVJMIHx8ICcnLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0VGltZXN0YW1wKGRhdGEuY3JlYXRlZEF0KSxcbiAgICAgICAgdXBkYXRlZEF0OiBjb252ZXJ0VGltZXN0YW1wKGRhdGEudXBkYXRlZEF0KSxcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZygnQWxsIGNoYWxsZW5nZXMgYWZ0ZXIgcHJvY2Vzc2luZzonLCBKU09OLnN0cmluZ2lmeSh1c2VyQ2hhbGxlbmdlcywgbnVsbCwgMikpO1xuXG4gICAgcmV0dXJuIHVzZXJDaGFsbGVuZ2VzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgY2hhbGxlbmdlcyBieSB1c2VySWQ6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogRmV0Y2ggdXNlciBjaGFsbGVuZ2VzIGJ5IGNoYWxsZW5nZUlkLlxuICogQHBhcmFtIGNoYWxsZW5nZUlkIFRoZSBJRCBvZiB0aGUgY2hhbGxlbmdlIHRvIGZldGNoIGFzc29jaWF0ZWQgdXNlciBjaGFsbGVuZ2VzIGZvci5cbiAqIEByZXR1cm5zIEEgcHJvbWlzZSByZXNvbHZpbmcgdG8gYW4gYXJyYXkgb2YgdXNlciBjaGFsbGVuZ2VzLlxuICogQHRocm93cyBJZiB0aGUgRmlyZXN0b3JlIHF1ZXJ5IGZhaWxzLlxuICovXG5hc3luYyBmZXRjaFVzZXJDaGFsbGVuZ2VzQnlDaGFsbGVuZ2VJZChjaGFsbGVuZ2VJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyQ2hhbGxlbmdlW10+IHtcbiAgY29uc3QgdXNlckNoYWxsZW5nZXNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlci1jaGFsbGVuZ2UnKTtcbiAgY29uc3QgcSA9IHF1ZXJ5KHVzZXJDaGFsbGVuZ2VzUmVmLCB3aGVyZSgnY2hhbGxlbmdlSWQnLCAnPT0nLCBjaGFsbGVuZ2VJZCkpO1xuXG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coYEZldGNoaW5nIHVzZXIgY2hhbGxlbmdlcyBmb3IgY2hhbGxlbmdlIElEOiAke2NoYWxsZW5nZUlkfWApO1xuXG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuXG4gICAgY29uc29sZS5sb2coYFRvdGFsIHVzZXIgY2hhbGxlbmdlcyBmZXRjaGVkOiAke3NuYXBzaG90LmRvY3MubGVuZ3RofWApO1xuXG4gICAgY29uc3QgdXNlckNoYWxsZW5nZXMgPSBzbmFwc2hvdC5kb2NzLm1hcCgoZG9jOiBEb2N1bWVudERhdGEpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgY29uc29sZS5sb2coYFByb2Nlc3NpbmcgdXNlciBjaGFsbGVuZ2Ugd2l0aCBJRDogJHtkb2MuaWR9YCwgZGF0YSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgIC4uLmRhdGEsXG4gICAgICAgIGNoYWxsZW5nZTogZGF0YS5jaGFsbGVuZ2VcbiAgICAgICAgICA/IG5ldyBDaGFsbGVuZ2Uoe1xuICAgICAgICAgICAgICBpZDogZGF0YS5jaGFsbGVuZ2UuaWQsXG4gICAgICAgICAgICAgIHRpdGxlOiBkYXRhLmNoYWxsZW5nZS50aXRsZSxcbiAgICAgICAgICAgICAgc3VidGl0bGU6IGRhdGEuY2hhbGxlbmdlLnN1YnRpdGxlLFxuICAgICAgICAgICAgICBwYXJ0aWNpcGFudHM6IGRhdGEuY2hhbGxlbmdlLnBhcnRpY2lwYW50cyB8fCBbXSxcbiAgICAgICAgICAgICAgc3RhdHVzOiBkYXRhLmNoYWxsZW5nZS5zdGF0dXMgYXMgQ2hhbGxlbmdlU3RhdHVzLFxuICAgICAgICAgICAgICBzdGFydERhdGU6IGRhdGEuY2hhbGxlbmdlLnN0YXJ0RGF0ZSA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLnN0YXJ0RGF0ZSkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICBlbmREYXRlOiBkYXRhLmNoYWxsZW5nZS5lbmREYXRlID8gbmV3IERhdGUoZGF0YS5jaGFsbGVuZ2UuZW5kRGF0ZSkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICBjcmVhdGVkQXQ6IGRhdGEuY2hhbGxlbmdlLmNyZWF0ZWRBdCA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLmNyZWF0ZWRBdCkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICB1cGRhdGVkQXQ6IGRhdGEuY2hhbGxlbmdlLnVwZGF0ZWRBdCA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLnVwZGF0ZWRBdCkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICBpbnRyb1ZpZGVvVVJMOiBkYXRhLmNoYWxsZW5nZS5pbnRyb1ZpZGVvVVJMIHx8ICcnLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0VGltZXN0YW1wKGRhdGEuY3JlYXRlZEF0KSxcbiAgICAgICAgdXBkYXRlZEF0OiBjb252ZXJ0VGltZXN0YW1wKGRhdGEudXBkYXRlZEF0KSxcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZygnQWxsIHVzZXIgY2hhbGxlbmdlcyBhZnRlciBwcm9jZXNzaW5nOicsIEpTT04uc3RyaW5naWZ5KHVzZXJDaGFsbGVuZ2VzLCBudWxsLCAyKSk7XG5cbiAgICByZXR1cm4gdXNlckNoYWxsZW5nZXM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBjaGFsbGVuZ2VzIGJ5IGNoYWxsZW5nZUlkOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4gIGFzeW5jIGdldENvbGxlY3Rpb25CeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkb2NSZWYgPSBkb2MoZGIsIFwic3dlYXRsaXN0LWNvbGxlY3Rpb25cIiwgaWQpO1xuICAgICAgY29uc3QgZG9jU25hcCA9IGF3YWl0IGdldERvYyhkb2NSZWYpO1xuICBcbiAgICAgIGlmIChkb2NTbmFwLmV4aXN0cygpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaWQ6IGRvY1NuYXAuaWQsXG4gICAgICAgICAgLi4uZG9jU25hcC5kYXRhKClcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbGxlY3Rpb24gbm90IGZvdW5kXCIpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBjb2xsZWN0aW9uIGJ5IElEOlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbiAgXG4gICAgLyoqXG4gICAqIEZldGNoIHVzZXIgY2hhbGxlbmdlcyBieSB1c2VySWQgYW5kIGZpbHRlciBmb3IgYWN0aXZlIGNoYWxsZW5nZXMuXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSByZXNvbHZpbmcgdG8gYW4gYXJyYXkgb2YgYWN0aXZlIGNoYWxsZW5nZXMuXG4gICAqIEB0aHJvd3MgSWYgbm8gdXNlciBpcyBzaWduZWQgaW4gb3IgaWYgdGhlIEZpcmVzdG9yZSBxdWVyeSBmYWlscy5cbiAgICovXG4gICAgYXN5bmMgZmV0Y2hBY3RpdmVDaGFsbGVuZ2VzKCk6IFByb21pc2U8VXNlckNoYWxsZW5nZVtdPiB7XG4gICAgICBjb25zdCBjdXJyZW50VXNlciA9IHVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyO1xuICAgICAgaWYgKCFjdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGlzIHNpZ25lZCBpbicpO1xuICAgICAgfVxuICAgIFxuICAgICAgY29uc3QgdXNlckNoYWxsZW5nZXNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlci1jaGFsbGVuZ2UnKTtcbiAgICAgIGNvbnN0IHEgPSBxdWVyeSh1c2VyQ2hhbGxlbmdlc1JlZiwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIGN1cnJlbnRVc2VyLmlkKSk7XG4gICAgXG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZyhgRmV0Y2hpbmcgY2hhbGxlbmdlcyBmb3IgdXNlciBJRDogJHtjdXJyZW50VXNlci5pZH1gKTtcbiAgICBcbiAgICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhgVG90YWwgY2hhbGxlbmdlcyBmZXRjaGVkOiAke3NuYXBzaG90LmRvY3MubGVuZ3RofWApO1xuICAgIFxuICAgICAgICBjb25zdCBhbGxDaGFsbGVuZ2VzID0gc25hcHNob3QuZG9jcy5tYXAoKGRvYzogRG9jdW1lbnREYXRhKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICAgICAgY29uc29sZS5sb2coYFByb2Nlc3NpbmcgY2hhbGxlbmdlIHdpdGggSUQ6ICR7ZG9jLmlkfWAsIGRhdGEpO1xuICAgIFxuICAgICAgICAgIC8vIFVzZSB0aGUgQ2hhbGxlbmdlIGNvbnN0cnVjdG9yIHRvIHBhcnNlIHRoZSBjaGFsbGVuZ2UgZGF0YVxuICAgICAgICAgIGNvbnN0IGNoYWxsZW5nZSA9IGRhdGEuY2hhbGxlbmdlXG4gICAgICAgICAgICA/IG5ldyBDaGFsbGVuZ2Uoe1xuICAgICAgICAgICAgICAgIGlkOiBkYXRhLmNoYWxsZW5nZS5pZCxcbiAgICAgICAgICAgICAgICB0aXRsZTogZGF0YS5jaGFsbGVuZ2UudGl0bGUsXG4gICAgICAgICAgICAgICAgc3VidGl0bGU6IGRhdGEuY2hhbGxlbmdlLnN1YnRpdGxlLFxuICAgICAgICAgICAgICAgIHBhcnRpY2lwYW50czogZGF0YS5jaGFsbGVuZ2UucGFydGljaXBhbnRzIHx8IFtdLFxuICAgICAgICAgICAgICAgIHN0YXR1czogZGF0YS5jaGFsbGVuZ2Uuc3RhdHVzIGFzIENoYWxsZW5nZVN0YXR1cyxcbiAgICAgICAgICAgICAgICBzdGFydERhdGU6IGRhdGEuY2hhbGxlbmdlLnN0YXJ0RGF0ZSA/IGRhdGEuY2hhbGxlbmdlLnN0YXJ0RGF0ZS50b0RhdGUoKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgZW5kRGF0ZTogZGF0YS5jaGFsbGVuZ2UuZW5kRGF0ZSA/IGRhdGEuY2hhbGxlbmdlLmVuZERhdGUudG9EYXRlKCkgOiBudWxsLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogZGF0YS5jaGFsbGVuZ2UuY3JlYXRlZEF0XG4gICAgICAgICAgICAgICAgPyBkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQudG9EYXRlKCkgLy8gQXNzdW1pbmcgaXQncyBhIEZpcmViYXNlIFRpbWVzdGFtcFxuICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IGRhdGEuY2hhbGxlbmdlLnVwZGF0ZWRBdFxuICAgICAgICAgICAgICAgID8gZGF0YS5jaGFsbGVuZ2UudXBkYXRlZEF0LnRvRGF0ZSgpIC8vIEFzc3VtaW5nIGl0J3MgYSBGaXJlYmFzZSBUaW1lc3RhbXBcbiAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICAgICAgaW50cm9WaWRlb1VSTDogZGF0YS5jaGFsbGVuZ2UuaW50cm9WaWRlb1VSTCB8fCAnJyxcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIFxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICAgIGNoYWxsZW5nZSxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogY29udmVydFRpbWVzdGFtcChkYXRhLmNyZWF0ZWRBdCksXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IGNvbnZlcnRUaW1lc3RhbXAoZGF0YS51cGRhdGVkQXQpLFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICBjb25zb2xlLmxvZygnQWxsIGNoYWxsZW5nZXMgYWZ0ZXIgcHJvY2Vzc2luZzonLCBKU09OLnN0cmluZ2lmeShhbGxDaGFsbGVuZ2VzLCBudWxsLCAyKSk7XG4gICAgXG4gICAgICAgIC8vIEZpbHRlciBmb3IgYWN0aXZlIGNoYWxsZW5nZXMgKGVuZERhdGUgPiBjdXJyZW50IGRhdGUpXG4gICAgICAgIGNvbnN0IGFjdGl2ZUNoYWxsZW5nZXMgPSBhbGxDaGFsbGVuZ2VzLmZpbHRlcih1c2VyQ2hhbGxlbmdlID0+IHtcbiAgICAgICAgICBjb25zdCBlbmREYXRlID0gdXNlckNoYWxsZW5nZS5jaGFsbGVuZ2U/LmVuZERhdGU7XG4gICAgXG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBgRXZhbHVhdGluZyBjaGFsbGVuZ2UgSUQ6ICR7dXNlckNoYWxsZW5nZS5pZH0sIEVuZCBEYXRlOiAke2VuZERhdGV9LCBDdXJyZW50IERhdGU6ICR7bmV3IERhdGUoKX1gXG4gICAgICAgICAgKTtcbiAgICBcbiAgICAgICAgICByZXR1cm4gZW5kRGF0ZSAmJiBlbmREYXRlID4gbmV3IERhdGUoKTtcbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGBUb3RhbCBhY3RpdmUgY2hhbGxlbmdlczogJHthY3RpdmVDaGFsbGVuZ2VzLmxlbmd0aH1gLCBhY3RpdmVDaGFsbGVuZ2VzKTtcbiAgICBcbiAgICAgICAgcmV0dXJuIGFjdGl2ZUNoYWxsZW5nZXM7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhY3RpdmUgY2hhbGxlbmdlczonLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH1cbiAgICBcblxuICAvKipcbiAgICogRmV0Y2ggdXNlciBjaGFsbGVuZ2VzIGJ5IHVzZXJJZC5cbiAgICogQHJldHVybnMgQSBwcm9taXNlIHJlc29sdmluZyB0byBhbiBhcnJheSBvZiBjaGFsbGVuZ2VzLlxuICAgKiBAdGhyb3dzIElmIG5vIHVzZXIgaXMgc2lnbmVkIGluIG9yIGlmIHRoZSBGaXJlc3RvcmUgcXVlcnkgZmFpbHMuXG4gICAqL1xuICBhc3luYyBmZXRjaFVzZXJDaGFsbGVuZ2VzKCk6IFByb21pc2U8VXNlckNoYWxsZW5nZVtdPiB7XG4gICAgY29uc3QgY3VycmVudFVzZXIgPSB1c2VyU2VydmljZS5jdXJyZW50VXNlcjtcbiAgICBpZiAoIWN1cnJlbnRVc2VyPy5pZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGlzIHNpZ25lZCBpbicpO1xuICAgIH1cblxuICAgIC8vIFJlZmVyZW5jZSB0byB0aGUgdXNlci1jaGFsbGVuZ2UgY29sbGVjdGlvblxuICAgIGNvbnN0IHVzZXJDaGFsbGVuZ2VzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXItY2hhbGxlbmdlJyk7XG5cbiAgICAvLyBRdWVyeSBjaGFsbGVuZ2VzIHdoZXJlIHVzZXJJZCBtYXRjaGVzIHRoZSBjdXJyZW50IHVzZXIncyBJRFxuICAgIGNvbnN0IHEgPSBxdWVyeSh1c2VyQ2hhbGxlbmdlc1JlZiwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIGN1cnJlbnRVc2VyLmlkKSk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuXG4gICAgICAvLyBNYXAgZG9jdW1lbnRzIHRvIGFuIGFycmF5IG9mIENoYWxsZW5nZSBvYmplY3RzXG4gICAgICByZXR1cm4gc25hcHNob3QuZG9jcy5tYXAoKGRvYzogRG9jdW1lbnREYXRhKSA9PiAoe1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kb2MuZGF0YSgpLFxuICAgICAgfSkpIGFzIFVzZXJDaGFsbGVuZ2VbXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBjaGFsbGVuZ2VzOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIHVzZXIgY2hhbGxlbmdlcycpO1xuICAgIH1cbiAgfVxuICBcbiAgXG4gIC8qKlxuICAgKiBGZXRjaCB0aGUgd29ya291dCBzZXNzaW9uIGZyb20gRmlyZXN0b3JlLCByZXR1cm5pbmcgeyB3b3Jrb3V0LCBsb2dzIH0uXG4gICAqIENoZWNrcyBmaXJzdCBmb3IgYSBRdWV1ZWRVcCBzZXNzaW9uLCB0aGVuIGZvciBJblByb2dyZXNzLlxuICAgKi9cbiAgYXN5bmMgZmV0Y2hDdXJyZW50V29ya291dFNlc3Npb24oKTogUHJvbWlzZTx7XG4gICAgd29ya291dDogV29ya291dCB8IG51bGw7XG4gICAgbG9nczogRXhlcmNpc2VMb2dbXSB8IG51bGw7XG4gIH0+IHtcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IHVzZXJTZXJ2aWNlLmN1cnJlbnRVc2VyO1xuICAgIGlmICghY3VycmVudFVzZXI/LmlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgfVxuXG4gICAgLy8gUmVmZXJlbmNlIHRvIHVzZXIncyB3b3Jrb3V0U2Vzc2lvbnNcbiAgICBjb25zdCB3b3Jrb3V0U2Vzc2lvbnNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCBjdXJyZW50VXNlci5pZCwgJ3dvcmtvdXRTZXNzaW9ucycpO1xuXG4gICAgLy8gMSkgQ2hlY2sgZm9yIFF1ZXVlZFVwXG4gICAgbGV0IHEgPSBxdWVyeSh3b3Jrb3V0U2Vzc2lvbnNSZWYsIHdoZXJlKCdzdGF0dXMnLCAnPT0nLCBXb3Jrb3V0U3RhdHVzLlF1ZXVlZFVwKSk7XG4gICAgbGV0IHNuYXAgPSBhd2FpdCBnZXREb2NzKHEpO1xuXG4gICAgaWYgKCFzbmFwLmVtcHR5KSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9jZXNzV29ya291dFNlc3Npb25Eb2N1bWVudChzbmFwLmRvY3NbMF0pO1xuICAgIH1cblxuICAgIC8vIDIpIENoZWNrIGZvciBJblByb2dyZXNzXG4gICAgcSA9IHF1ZXJ5KHdvcmtvdXRTZXNzaW9uc1JlZiwgd2hlcmUoJ3N0YXR1cycsICc9PScsIFdvcmtvdXRTdGF0dXMuSW5Qcm9ncmVzcykpO1xuICAgIHNuYXAgPSBhd2FpdCBnZXREb2NzKHEpO1xuXG4gICAgaWYgKCFzbmFwLmVtcHR5KSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9jZXNzV29ya291dFNlc3Npb25Eb2N1bWVudChzbmFwLmRvY3NbMF0pO1xuICAgIH1cblxuICAgIC8vIE5vbmUgZm91bmRcbiAgICByZXR1cm4geyB3b3Jrb3V0OiBudWxsLCBsb2dzOiBudWxsIH07XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIHRvIGJ1aWxkIHRoZSBXb3Jrb3V0IG9iamVjdCArIGFueSBsb2dzIGZyb20gdGhlIHNuYXBzaG90LlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzV29ya291dFNlc3Npb25Eb2N1bWVudChcbiAgICB3b3Jrb3V0RG9jOiBRdWVyeURvY3VtZW50U25hcHNob3Q8RG9jdW1lbnREYXRhPlxuICApOiBQcm9taXNlPHsgd29ya291dDogV29ya291dDsgbG9nczogRXhlcmNpc2VMb2dbXSB9PiB7XG4gICAgY29uc3QgZGF0YSA9IHdvcmtvdXREb2MuZGF0YSgpO1xuICAgIGNvbnN0IHdvcmtvdXQ6IFdvcmtvdXQgPSB7XG4gICAgICBpZDogd29ya291dERvYy5pZCxcbiAgICAgIC4uLmRhdGEsXG4gICAgICAvLyBNYWtlIHN1cmUgdG8gaGFuZGxlIC50b0RhdGUoKSBpZiB0aGVzZSBmaWVsZHMgYXJlIEZpcmViYXNlIFRpbWVzdGFtcHNcbiAgICAgIGNyZWF0ZWRBdDogZGF0YS5jcmVhdGVkQXQ/LnRvRGF0ZSgpID8/IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IGRhdGEudXBkYXRlZEF0Py50b0RhdGUoKSA/PyBuZXcgRGF0ZSgpXG4gICAgfSBhcyBXb3Jrb3V0O1xuXG4gICAgLy8gSWYgeW91IGhhdmUgbG9ncyBlbWJlZGRlZCBpbiB0aGUgc2FtZSBkb2Mgb3IgaW4gYSBzdWJjb2xsZWN0aW9uLFxuICAgIC8vIGZldGNoIHRoZW0gaGVyZS4gRm9yIG5vdywgd2UgcmV0dXJuIGFuIGVtcHR5IGFycmF5LlxuICAgIGNvbnN0IGxvZ3M6IEV4ZXJjaXNlTG9nW10gPSBbXTtcblxuICAgIHJldHVybiB7IHdvcmtvdXQsIGxvZ3MgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGFtcGxlIFwiam9pbiBjaGFsbGVuZ2VcIiBtZXRob2QgdXNpbmcgdGhlIGNsaWVudCBTREsgKG5vIGFkbWluIHByaXZpbGVnZXMpLlxuICAgKiBUaGlzIGNyZWF0ZXMgYSBkb2MgaW4gYHVzZXItY2hhbGxlbmdlYCB3aXRoIHRoZSB1c2VySWQsIGNoYWxsZW5nZUlkLCBldGMuXG4gICAqL1xuICBhc3luYyBqb2luQ2hhbGxlbmdlKHtcbiAgICB1c2VybmFtZSxcbiAgICBjaGFsbGVuZ2VJZFxuICB9OiB7XG4gICAgdXNlcm5hbWU6IHN0cmluZztcbiAgICBjaGFsbGVuZ2VJZDogc3RyaW5nO1xuICB9KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gMSkgTWFrZSBzdXJlIHdlIGhhdmUgYSBzaWduZWQtaW4gdXNlclxuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlclNlcnZpY2UuY3VycmVudFVzZXI7XG4gICAgaWYgKCFjdXJyZW50VXNlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGlzIHNpZ25lZCBpbicpO1xuICAgIH1cblxuICAgIC8vIDIpIEZpbmQgdGhlIHVzZXIgZG9jIGJ5IHVzZXJuYW1lXG4gICAgY29uc3QgdXNlcnNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnKTtcbiAgICBjb25zdCB1c2VyUXVlcnkgPSBxdWVyeSh1c2Vyc1JlZiwgd2hlcmUoJ3VzZXJuYW1lJywgJz09JywgdXNlcm5hbWUpKTtcbiAgICBjb25zdCB1c2VyU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHVzZXJRdWVyeSk7XG5cbiAgICBpZiAodXNlclNuYXBzaG90LmVtcHR5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlckRvYyA9IHVzZXJTbmFwc2hvdC5kb2NzWzBdO1xuICAgIGNvbnN0IHVzZXJEYXRhID0gdXNlckRvYy5kYXRhKCk7XG4gICAgY29uc3QgdXNlcklkID0gdXNlckRvYy5pZDtcblxuICAgIC8vIDMpIENoZWNrIGlmIHRoZSBjaGFsbGVuZ2UgZG9jIGV4aXN0c1xuICAgIGNvbnN0IGNoYWxsZW5nZVJlZiA9IGRvYyhkYiwgJ3N3ZWF0bGlzdC1jb2xsZWN0aW9uJywgY2hhbGxlbmdlSWQpO1xuICAgIGNvbnN0IGNoYWxsZW5nZVNuYXAgPSBhd2FpdCBnZXREb2MoY2hhbGxlbmdlUmVmKTtcblxuICAgIGlmICghY2hhbGxlbmdlU25hcC5leGlzdHMoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDaGFsbGVuZ2Ugbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgY29uc3QgY2hhbGxlbmdlID0gY2hhbGxlbmdlU25hcC5kYXRhKCk7XG5cbiAgICAvLyA0KSBCdWlsZCBuZXcgdXNlci1jaGFsbGVuZ2UgZG9jdW1lbnRcbiAgICBjb25zdCB1c2VyQ2hhbGxlbmdlSWQgPSBgJHtjaGFsbGVuZ2VJZH0tJHt1c2VySWR9LSR7RGF0ZS5ub3coKX1gO1xuICAgIGNvbnN0IHVzZXJDaGFsbGVuZ2VEYXRhID0ge1xuICAgICAgaWQ6IHVzZXJDaGFsbGVuZ2VJZCxcbiAgICAgIGNoYWxsZW5nZTogY2hhbGxlbmdlLFxuICAgICAgY2hhbGxlbmdlSWQsXG4gICAgICB1c2VySWQsXG4gICAgICBmY21Ub2tlbjogdXNlckRhdGEuZmNtVG9rZW4gfHwgJycsXG4gICAgICBwcm9maWxlSW1hZ2U6IHVzZXJEYXRhLnByb2ZpbGVJbWFnZSB8fCB7fSxcbiAgICAgIHByb2dyZXNzOiAwLFxuICAgICAgY29tcGxldGVkV29ya291dHM6IFtdLFxuICAgICAgaXNDb21wbGV0ZWQ6IGZhbHNlLFxuICAgICAgdWlkOiB1c2VySWQsXG4gICAgICBsb2NhdGlvbjogdXNlckRhdGEubG9jYXRpb24gfHwgbnVsbCxcbiAgICAgIGNpdHk6ICcnLFxuICAgICAgY291bnRyeTogJycsXG4gICAgICB0aW1lem9uZTogJycsXG4gICAgICB1c2VybmFtZSxcbiAgICAgIGpvaW5EYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgcHVsc2VQb2ludHM6IHtcbiAgICAgICAgYmFzZUNvbXBsZXRpb246IDAsXG4gICAgICAgIGZpcnN0Q29tcGxldGlvbjogMCxcbiAgICAgICAgc3RyZWFrQm9udXM6IDAsXG4gICAgICAgIGNoZWNrSW5Cb251czogMCxcbiAgICAgICAgZWZmb3J0UmF0aW5nOiAwLFxuICAgICAgICBjaGF0UGFydGljaXBhdGlvbjogMCxcbiAgICAgICAgbG9jYXRpb25DaGVja2luOiAwLFxuICAgICAgICBjb250ZW50RW5nYWdlbWVudDogMCxcbiAgICAgICAgZW5jb3VyYWdlbWVudFNlbnQ6IDAsXG4gICAgICAgIGVuY291cmFnZW1lbnRSZWNlaXZlZDogMFxuICAgICAgfSxcbiAgICAgIGN1cnJlbnRTdHJlYWs6IDAsXG4gICAgICBlbmNvdXJhZ2VkVXNlcnM6IFtdLFxuICAgICAgZW5jb3VyYWdlZEJ5VXNlcnM6IFtdLFxuICAgICAgY2hlY2tJbnM6IFtdXG4gICAgfTtcblxuICAgIC8vIDUpIFN0b3JlIHVzZXItY2hhbGxlbmdlIGRvY1xuICAgIGF3YWl0IHNldERvYyhkb2MoZGIsICd1c2VyLWNoYWxsZW5nZScsIHVzZXJDaGFsbGVuZ2VJZCksIHVzZXJDaGFsbGVuZ2VEYXRhKTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3Qgd29ya291dFNlcnZpY2UgPSBuZXcgV29ya291dFNlcnZpY2UoKTsiXSwibmFtZXMiOlsiY29sbGVjdGlvbiIsImRvYyIsImdldERvY3MiLCJnZXREb2MiLCJxdWVyeSIsIndoZXJlIiwib3JkZXJCeSIsInNldERvYyIsImRiIiwidXNlclNlcnZpY2UiLCJXb3Jrb3V0IiwiV29ya291dFN0YXR1cyIsImZvcm1hdCIsImNvbnZlcnRUaW1lc3RhbXAiLCJDaGFsbGVuZ2UiLCJXb3Jrb3V0U2VydmljZSIsImN1cnJlbnRXb3Jrb3V0IiwiZmV0Y2hDdXJyZW50V29ya291dCIsInNlc3Npb24iLCJmZXRjaEN1cnJlbnRXb3Jrb3V0U2Vzc2lvbiIsIndvcmtvdXQiLCJnZXRBbGxTd2VhdGxpc3RzIiwidXNlcklkIiwid29ya291dHNSZWYiLCJ3b3Jrb3V0c1NuYXBzaG90Iiwid29ya291dHMiLCJ3b3Jrb3V0RG9jIiwid29ya291dERhdGEiLCJ3b3Jrb3V0SWQiLCJsb2dzUmVmIiwibG9nc1NuYXBzaG90IiwiZXJyb3IiLCJmaXJlc3RvcmVFcnJvciIsIkVycm9yIiwiZG9jcyIsImRhdGEiLCJpZCIsInJvdW5kV29ya291dElkIiwiY29sbGVjdGlvbklkIiwiZXhlcmNpc2VzIiwiY2hhbGxlbmdlIiwibG9ncyIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkdXJhdGlvbiIsIndvcmtvdXRSYXRpbmciLCJ1c2VBdXRob3JDb250ZW50IiwiaXNDb21wbGV0ZWQiLCJ3b3Jrb3V0U3RhdHVzIiwic3RhcnRUaW1lIiwiRGF0ZSIsInVuZGVmaW5lZCIsIm9yZGVyIiwiYXV0aG9yIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0Iiwiem9uZSIsIm1hcCIsImxvZ0RvYyIsInB1c2giLCJjb25zb2xlIiwibWVzc2FnZSIsImZldGNoV29ya291dFN1bW1hcmllcyIsImRhdGUiLCJjdXJyZW50VXNlciIsImZvcm1hdHRlZERhdGUiLCJzdW1tYXJpZXNSZWYiLCJxIiwic25hcHNob3QiLCJmZXRjaEFsbFdvcmtvdXRTdW1tYXJpZXMiLCJmZXRjaFVzZXJDaGFsbGVuZ2VzQnlVc2VySWQiLCJ1c2VyQ2hhbGxlbmdlc1JlZiIsInVzZXJDaGFsbGVuZ2VzIiwibG9nIiwibGVuZ3RoIiwic3VidGl0bGUiLCJwYXJ0aWNpcGFudHMiLCJzdGF0dXMiLCJzdGFydERhdGUiLCJlbmREYXRlIiwiaW50cm9WaWRlb1VSTCIsIkpTT04iLCJzdHJpbmdpZnkiLCJmZXRjaFVzZXJDaGFsbGVuZ2VzQnlDaGFsbGVuZ2VJZCIsImNoYWxsZW5nZUlkIiwiZ2V0Q29sbGVjdGlvbkJ5SWQiLCJkb2NSZWYiLCJkb2NTbmFwIiwiZXhpc3RzIiwiZmV0Y2hBY3RpdmVDaGFsbGVuZ2VzIiwiYWxsQ2hhbGxlbmdlcyIsImFjdGl2ZUNoYWxsZW5nZXMiLCJ0b0RhdGUiLCJmaWx0ZXIiLCJ1c2VyQ2hhbGxlbmdlIiwiZmV0Y2hVc2VyQ2hhbGxlbmdlcyIsIndvcmtvdXRTZXNzaW9uc1JlZiIsInNuYXAiLCJRdWV1ZWRVcCIsImVtcHR5IiwicHJvY2Vzc1dvcmtvdXRTZXNzaW9uRG9jdW1lbnQiLCJJblByb2dyZXNzIiwiam9pbkNoYWxsZW5nZSIsInVzZXJuYW1lIiwidXNlcnNSZWYiLCJ1c2VyUXVlcnkiLCJ1c2VyU25hcHNob3QiLCJ1c2VyRG9jIiwidXNlckRhdGEiLCJjaGFsbGVuZ2VSZWYiLCJjaGFsbGVuZ2VTbmFwIiwidXNlckNoYWxsZW5nZUlkIiwidXNlckNoYWxsZW5nZURhdGEiLCJub3ciLCJmY21Ub2tlbiIsInByb2ZpbGVJbWFnZSIsInByb2dyZXNzIiwiY29tcGxldGVkV29ya291dHMiLCJ1aWQiLCJsb2NhdGlvbiIsImNpdHkiLCJjb3VudHJ5IiwidGltZXpvbmUiLCJqb2luRGF0ZSIsInB1bHNlUG9pbnRzIiwiYmFzZUNvbXBsZXRpb24iLCJmaXJzdENvbXBsZXRpb24iLCJzdHJlYWtCb251cyIsImNoZWNrSW5Cb251cyIsImVmZm9ydFJhdGluZyIsImNoYXRQYXJ0aWNpcGF0aW9uIiwibG9jYXRpb25DaGVja2luIiwiY29udGVudEVuZ2FnZW1lbnQiLCJlbmNvdXJhZ2VtZW50U2VudCIsImVuY291cmFnZW1lbnRSZWNlaXZlZCIsImN1cnJlbnRTdHJlYWsiLCJlbmNvdXJhZ2VkVXNlcnMiLCJlbmNvdXJhZ2VkQnlVc2VycyIsImNoZWNrSW5zIiwid29ya291dFNlcnZpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/api/firebase/workout/service.ts\n"));

/***/ })

});
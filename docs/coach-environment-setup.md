# Coach Partnership Environment Setup

This document outlines the environment variables needed for the Coach Partnership functionality.

## Required Environment Variables

Add these variables to your `.env.local` file:

### Stripe Configuration
```bash
# Stripe API Keys
STRIPE_SECRET_KEY=sk_test_...               # Stripe secret key for API calls
STRIPE_WEBHOOK_SECRET=whsec_...             # Webhook secret for general Stripe webhooks
STRIPE_WEBHOOK_SECRET_COACH=whsec_...       # Webhook secret specifically for coach subscriptions
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_... # Publishable key for frontend
NEXT_PUBLIC_TEST_STRIPE_PUBLISHABLE_KEY=pk_test_... # Test publishable key for development

# Stripe Product/Price IDs (Generated by create-stripe-products.js script)
STRIPE_PRICE_ATHLETE_MONTHLY=price_...      # Monthly athlete subscription ($12.99/month)
STRIPE_PRICE_ATHLETE_ANNUAL=price_...       # Annual athlete subscription ($119/year)
STRIPE_PRICE_COACH_MONTHLY=price_...        # Monthly coach subscription ($24.99/month)
STRIPE_PRICE_COACH_ANNUAL=price_...         # Annual coach subscription ($249/year)
STRIPE_PRODUCT_ATHLETE=prod_...             # Athlete product ID
STRIPE_PRODUCT_COACH=prod_...               # Coach product ID
```

### Site Configuration
```bash
SITE_URL=https://yourdomain.com             # Your site URL for webhooks and redirects
```

### Firebase Service Account
```bash
FIREBASE_SERVICE_ACCOUNT={"type":"service_account",...} # Firebase service account JSON for Netlify functions
```

## Setup Steps

1. **Create Stripe Products**:
   ```bash
   node scripts/create-stripe-products.js
   ```

2. **Update Environment Variables**:
   - Copy the output price IDs from the script to your `.env.local`
   - Add your Stripe keys and webhook secrets
   - Set your site URL

3. **Configure Netlify**:
   - Add all environment variables to your Netlify site settings
   - Ensure sensitive keys (STRIPE_SECRET_KEY, FIREBASE_SERVICE_ACCOUNT) are only in Netlify, not in git

## Security Notes

- ❌ **Never commit** `.env.local` or `.env` files with real keys
- ✅ **Only store sensitive keys** in Netlify environment variables
- ✅ **Use test keys** for development
- ✅ **Use live keys** only in production Netlify environment

## Pricing Structure

### Athletes (No Coach)
- **Monthly**: $12.99/month
- **Annual**: $119/year (8% discount)

### Coaches
- **Monthly**: $24.99/month  
- **Annual**: $249/year (16% discount)
- **Connected Athletes**: Free (paid for by coach subscription)

### Revenue Sharing
- **Coach Partnership**: 40% to coach, 60% to Pulse
- **Coach Referral**: 20% to referring coach, 80% to Pulse


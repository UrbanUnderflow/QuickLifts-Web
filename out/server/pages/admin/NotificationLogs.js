/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/admin/NotificationLogs";
exports.ids = ["pages/admin/NotificationLogs"];
exports.modules = {

/***/ "__barrel_optimize__?names=AlertTriangle,Award,CheckCircle,Info,XCircle!=!./node_modules/lucide-react/dist/esm/lucide-react.js":
/*!*************************************************************************************************************************************!*\
  !*** __barrel_optimize__?names=AlertTriangle,Award,CheckCircle,Info,XCircle!=!./node_modules/lucide-react/dist/esm/lucide-react.js ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AlertTriangle: () => (/* reexport safe */ _icons_triangle_alert_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   Award: () => (/* reexport safe */ _icons_award_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]),\n/* harmony export */   CheckCircle: () => (/* reexport safe */ _icons_circle_check_big_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]),\n/* harmony export */   Info: () => (/* reexport safe */ _icons_info_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]),\n/* harmony export */   XCircle: () => (/* reexport safe */ _icons_circle_x_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _icons_triangle_alert_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icons/triangle-alert.js */ \"./node_modules/lucide-react/dist/esm/icons/triangle-alert.js\");\n/* harmony import */ var _icons_award_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icons/award.js */ \"./node_modules/lucide-react/dist/esm/icons/award.js\");\n/* harmony import */ var _icons_circle_check_big_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./icons/circle-check-big.js */ \"./node_modules/lucide-react/dist/esm/icons/circle-check-big.js\");\n/* harmony import */ var _icons_info_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./icons/info.js */ \"./node_modules/lucide-react/dist/esm/icons/info.js\");\n/* harmony import */ var _icons_circle_x_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./icons/circle-x.js */ \"./node_modules/lucide-react/dist/esm/icons/circle-x.js\");\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiX19iYXJyZWxfb3B0aW1pemVfXz9uYW1lcz1BbGVydFRyaWFuZ2xlLEF3YXJkLENoZWNrQ2lyY2xlLEluZm8sWENpcmNsZSE9IS4vbm9kZV9tb2R1bGVzL2x1Y2lkZS1yZWFjdC9kaXN0L2VzbS9sdWNpZGUtcmVhY3QuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFDb0U7QUFDakI7QUFDaUI7QUFDbkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1hcHAvLi9ub2RlX21vZHVsZXMvbHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2x1Y2lkZS1yZWFjdC5qcz8zMWQ5Il0sInNvdXJjZXNDb250ZW50IjpbIlxuZXhwb3J0IHsgZGVmYXVsdCBhcyBBbGVydFRyaWFuZ2xlIH0gZnJvbSBcIi4vaWNvbnMvdHJpYW5nbGUtYWxlcnQuanNcIlxuZXhwb3J0IHsgZGVmYXVsdCBhcyBBd2FyZCB9IGZyb20gXCIuL2ljb25zL2F3YXJkLmpzXCJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgQ2hlY2tDaXJjbGUgfSBmcm9tIFwiLi9pY29ucy9jaXJjbGUtY2hlY2stYmlnLmpzXCJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgSW5mbyB9IGZyb20gXCIuL2ljb25zL2luZm8uanNcIlxuZXhwb3J0IHsgZGVmYXVsdCBhcyBYQ2lyY2xlIH0gZnJvbSBcIi4vaWNvbnMvY2lyY2xlLXguanNcIiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///__barrel_optimize__?names=AlertTriangle,Award,CheckCircle,Info,XCircle!=!./node_modules/lucide-react/dist/esm/lucide-react.js\n");

/***/ }),

/***/ "__barrel_optimize__?names=Camera,Eye,EyeOff,X!=!./node_modules/lucide-react/dist/esm/lucide-react.js":
/*!************************************************************************************************************!*\
  !*** __barrel_optimize__?names=Camera,Eye,EyeOff,X!=!./node_modules/lucide-react/dist/esm/lucide-react.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Camera: () => (/* reexport safe */ _icons_camera_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   Eye: () => (/* reexport safe */ _icons_eye_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]),\n/* harmony export */   EyeOff: () => (/* reexport safe */ _icons_eye_off_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]),\n/* harmony export */   X: () => (/* reexport safe */ _icons_x_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _icons_camera_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icons/camera.js */ \"./node_modules/lucide-react/dist/esm/icons/camera.js\");\n/* harmony import */ var _icons_eye_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icons/eye.js */ \"./node_modules/lucide-react/dist/esm/icons/eye.js\");\n/* harmony import */ var _icons_eye_off_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./icons/eye-off.js */ \"./node_modules/lucide-react/dist/esm/icons/eye-off.js\");\n/* harmony import */ var _icons_x_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./icons/x.js */ \"./node_modules/lucide-react/dist/esm/icons/x.js\");\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiX19iYXJyZWxfb3B0aW1pemVfXz9uYW1lcz1DYW1lcmEsRXllLEV5ZU9mZixYIT0hLi9ub2RlX21vZHVsZXMvbHVjaWRlLXJlYWN0L2Rpc3QvZXNtL2x1Y2lkZS1yZWFjdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFDcUQ7QUFDTjtBQUNPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktYXBwLy4vbm9kZV9tb2R1bGVzL2x1Y2lkZS1yZWFjdC9kaXN0L2VzbS9sdWNpZGUtcmVhY3QuanM/ZmZlMSJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgQ2FtZXJhIH0gZnJvbSBcIi4vaWNvbnMvY2FtZXJhLmpzXCJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRXllIH0gZnJvbSBcIi4vaWNvbnMvZXllLmpzXCJcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRXllT2ZmIH0gZnJvbSBcIi4vaWNvbnMvZXllLW9mZi5qc1wiXG5leHBvcnQgeyBkZWZhdWx0IGFzIFggfSBmcm9tIFwiLi9pY29ucy94LmpzXCIiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///__barrel_optimize__?names=Camera,Eye,EyeOff,X!=!./node_modules/lucide-react/dist/esm/lucide-react.js\n");

/***/ }),

/***/ "__barrel_optimize__?names=format!=!./node_modules/date-fns/index.js":
/*!***************************************************************************!*\
  !*** __barrel_optimize__?names=format!=!./node_modules/date-fns/index.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   format: () => (/* reexport safe */ _Users_tremainegrant_Documents_GitHub_QuickLifts_Web_node_modules_date_fns_format_js__WEBPACK_IMPORTED_MODULE_0__.format)
/* harmony export */ });
/* harmony import */ var _Users_tremainegrant_Documents_GitHub_QuickLifts_Web_node_modules_date_fns_format_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/date-fns/format.js */ "./node_modules/date-fns/format.js");



/***/ }),

/***/ "./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fadmin%2FNotificationLogs&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fadmin%2FNotificationLogs.tsx&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fadmin%2FNotificationLogs&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fadmin%2FNotificationLogs.tsx&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getServerSideProps: () => (/* binding */ getServerSideProps),\n/* harmony export */   getStaticPaths: () => (/* binding */ getStaticPaths),\n/* harmony export */   getStaticProps: () => (/* binding */ getStaticProps),\n/* harmony export */   reportWebVitals: () => (/* binding */ reportWebVitals),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   unstable_getServerProps: () => (/* binding */ unstable_getServerProps),\n/* harmony export */   unstable_getServerSideProps: () => (/* binding */ unstable_getServerSideProps),\n/* harmony export */   unstable_getStaticParams: () => (/* binding */ unstable_getStaticParams),\n/* harmony export */   unstable_getStaticPaths: () => (/* binding */ unstable_getStaticPaths),\n/* harmony export */   unstable_getStaticProps: () => (/* binding */ unstable_getStaticProps)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages/module.compiled */ \"./node_modules/next/dist/server/future/route-modules/pages/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-pages/_document */ \"./src/pages/_document.tsx\");\n/* harmony import */ var private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! private-next-pages/_app */ \"./src/pages/_app.tsx\");\n/* harmony import */ var _src_pages_admin_NotificationLogs_tsx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./src/pages/admin/NotificationLogs.tsx */ \"./src/pages/admin/NotificationLogs.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__, _src_pages_admin_NotificationLogs_tsx__WEBPACK_IMPORTED_MODULE_5__]);\n([private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__, _src_pages_admin_NotificationLogs_tsx__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n// Import the app and document modules.\n\n\n// Import the userland code.\n\n// Re-export the component (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_admin_NotificationLogs_tsx__WEBPACK_IMPORTED_MODULE_5__, \"default\"));\n// Re-export methods.\nconst getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_admin_NotificationLogs_tsx__WEBPACK_IMPORTED_MODULE_5__, \"getStaticProps\");\nconst getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_admin_NotificationLogs_tsx__WEBPACK_IMPORTED_MODULE_5__, \"getStaticPaths\");\nconst getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_admin_NotificationLogs_tsx__WEBPACK_IMPORTED_MODULE_5__, \"getServerSideProps\");\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_admin_NotificationLogs_tsx__WEBPACK_IMPORTED_MODULE_5__, \"config\");\nconst reportWebVitals = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_admin_NotificationLogs_tsx__WEBPACK_IMPORTED_MODULE_5__, \"reportWebVitals\");\n// Re-export legacy methods.\nconst unstable_getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_admin_NotificationLogs_tsx__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticProps\");\nconst unstable_getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_admin_NotificationLogs_tsx__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticPaths\");\nconst unstable_getStaticParams = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_admin_NotificationLogs_tsx__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticParams\");\nconst unstable_getServerProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_admin_NotificationLogs_tsx__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getServerProps\");\nconst unstable_getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_admin_NotificationLogs_tsx__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getServerSideProps\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES,\n        page: \"/admin/NotificationLogs\",\n        pathname: \"/admin/NotificationLogs\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    components: {\n        App: private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n        Document: private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__[\"default\"]\n    },\n    userland: _src_pages_admin_NotificationLogs_tsx__WEBPACK_IMPORTED_MODULE_5__\n});\n\n//# sourceMappingURL=pages.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTJnBhZ2U9JTJGYWRtaW4lMkZOb3RpZmljYXRpb25Mb2dzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTJGcGFnZXMlMkZhZG1pbiUyRk5vdGlmaWNhdGlvbkxvZ3MudHN4JmFic29sdXRlQXBwUGF0aD1wcml2YXRlLW5leHQtcGFnZXMlMkZfYXBwJmFic29sdXRlRG9jdW1lbnRQYXRoPXByaXZhdGUtbmV4dC1wYWdlcyUyRl9kb2N1bWVudCZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUErRjtBQUNoQztBQUNMO0FBQzFEO0FBQ29EO0FBQ1Y7QUFDMUM7QUFDbUU7QUFDbkU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGtFQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLHVCQUF1Qix3RUFBSyxDQUFDLGtFQUFRO0FBQ3JDLHVCQUF1Qix3RUFBSyxDQUFDLGtFQUFRO0FBQ3JDLDJCQUEyQix3RUFBSyxDQUFDLGtFQUFRO0FBQ3pDLGVBQWUsd0VBQUssQ0FBQyxrRUFBUTtBQUM3Qix3QkFBd0Isd0VBQUssQ0FBQyxrRUFBUTtBQUM3QztBQUNPLGdDQUFnQyx3RUFBSyxDQUFDLGtFQUFRO0FBQzlDLGdDQUFnQyx3RUFBSyxDQUFDLGtFQUFRO0FBQzlDLGlDQUFpQyx3RUFBSyxDQUFDLGtFQUFRO0FBQy9DLGdDQUFnQyx3RUFBSyxDQUFDLGtFQUFRO0FBQzlDLG9DQUFvQyx3RUFBSyxDQUFDLGtFQUFRO0FBQ3pEO0FBQ08sd0JBQXdCLHlHQUFnQjtBQUMvQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLFdBQVc7QUFDWCxnQkFBZ0I7QUFDaEIsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELGlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktYXBwLz8yNzRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgYXBwIGFuZCBkb2N1bWVudCBtb2R1bGVzLlxuaW1wb3J0IERvY3VtZW50IGZyb20gXCJwcml2YXRlLW5leHQtcGFnZXMvX2RvY3VtZW50XCI7XG5pbXBvcnQgQXBwIGZyb20gXCJwcml2YXRlLW5leHQtcGFnZXMvX2FwcFwiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vc3JjL3BhZ2VzL2FkbWluL05vdGlmaWNhdGlvbkxvZ3MudHN4XCI7XG4vLyBSZS1leHBvcnQgdGhlIGNvbXBvbmVudCAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IG1ldGhvZHMuXG5leHBvcnQgY29uc3QgZ2V0U3RhdGljUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgXCJnZXRTdGF0aWNQcm9wc1wiKTtcbmV4cG9ydCBjb25zdCBnZXRTdGF0aWNQYXRocyA9IGhvaXN0KHVzZXJsYW5kLCBcImdldFN0YXRpY1BhdGhzXCIpO1xuZXhwb3J0IGNvbnN0IGdldFNlcnZlclNpZGVQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCBcImdldFNlcnZlclNpZGVQcm9wc1wiKTtcbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG5leHBvcnQgY29uc3QgcmVwb3J0V2ViVml0YWxzID0gaG9pc3QodXNlcmxhbmQsIFwicmVwb3J0V2ViVml0YWxzXCIpO1xuLy8gUmUtZXhwb3J0IGxlZ2FjeSBtZXRob2RzLlxuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFN0YXRpY1Byb3BzID0gaG9pc3QodXNlcmxhbmQsIFwidW5zdGFibGVfZ2V0U3RhdGljUHJvcHNcIik7XG5leHBvcnQgY29uc3QgdW5zdGFibGVfZ2V0U3RhdGljUGF0aHMgPSBob2lzdCh1c2VybGFuZCwgXCJ1bnN0YWJsZV9nZXRTdGF0aWNQYXRoc1wiKTtcbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQYXJhbXMgPSBob2lzdCh1c2VybGFuZCwgXCJ1bnN0YWJsZV9nZXRTdGF0aWNQYXJhbXNcIik7XG5leHBvcnQgY29uc3QgdW5zdGFibGVfZ2V0U2VydmVyUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgXCJ1bnN0YWJsZV9nZXRTZXJ2ZXJQcm9wc1wiKTtcbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTZXJ2ZXJTaWRlUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgXCJ1bnN0YWJsZV9nZXRTZXJ2ZXJTaWRlUHJvcHNcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc1JvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFUyxcbiAgICAgICAgcGFnZTogXCIvYWRtaW4vTm90aWZpY2F0aW9uTG9nc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYWRtaW4vTm90aWZpY2F0aW9uTG9nc1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICBjb21wb25lbnRzOiB7XG4gICAgICAgIEFwcCxcbiAgICAgICAgRG9jdW1lbnRcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fadmin%2FNotificationLogs&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fadmin%2FNotificationLogs.tsx&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "./src/api/firebase/auth/index.ts":
/*!****************************************!*\
  !*** ./src/api/firebase/auth/index.ts ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* reexport safe */ _methods__WEBPACK_IMPORTED_MODULE_1__.authMethods)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ \"./src/api/firebase/auth/types.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _types__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _types__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _methods__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./methods */ \"./src/api/firebase/auth/methods.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_methods__WEBPACK_IMPORTED_MODULE_1__]);\n_methods__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL2ZpcmViYXNlL2F1dGgvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXdCO0FBQzJCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktYXBwLy4vc3JjL2FwaS9maXJlYmFzZS9hdXRoL2luZGV4LnRzPzc0Y2UiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi90eXBlcyc7XG5leHBvcnQgeyBhdXRoTWV0aG9kcyBhcyBkZWZhdWx0IH0gZnJvbSAnLi9tZXRob2RzJzsiXSwibmFtZXMiOlsiYXV0aE1ldGhvZHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/api/firebase/auth/index.ts\n");

/***/ }),

/***/ "./src/api/firebase/auth/methods.ts":
/*!******************************************!*\
  !*** ./src/api/firebase/auth/methods.ts ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authMethods: () => (/* binding */ authMethods)\n/* harmony export */ });\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/auth */ \"firebase/auth\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config */ \"./src/api/firebase/config.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_auth__WEBPACK_IMPORTED_MODULE_0__, firebase_firestore__WEBPACK_IMPORTED_MODULE_1__, _config__WEBPACK_IMPORTED_MODULE_2__]);\n([firebase_auth__WEBPACK_IMPORTED_MODULE_0__, firebase_firestore__WEBPACK_IMPORTED_MODULE_1__, _config__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst authMethods = {\n    async signUpWithEmail ({ email, password, username, profileImage, quizData }) {\n        try {\n            const userCredential = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.createUserWithEmailAndPassword)(_config__WEBPACK_IMPORTED_MODULE_2__.auth, email, password);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_config__WEBPACK_IMPORTED_MODULE_2__.db, \"users\", userCredential.user.uid), {\n                email,\n                username,\n                createdAt: new Date(),\n                quizData: quizData || null\n            });\n            if (profileImage) {\n            // TODO: Handle profile image upload\n            }\n            return userCredential;\n        } catch (error) {\n            console.error(\"Error in signUpWithEmail:\", error);\n            throw error;\n        }\n    },\n    async signInWithEmail (email, password) {\n        return (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.signInWithEmailAndPassword)(_config__WEBPACK_IMPORTED_MODULE_2__.auth, email, password);\n    },\n    async signInWithGoogle () {\n        const provider = new firebase_auth__WEBPACK_IMPORTED_MODULE_0__.GoogleAuthProvider();\n        provider.addScope(\"email\");\n        provider.addScope(\"profile\");\n        try {\n            const result = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.signInWithPopup)(_config__WEBPACK_IMPORTED_MODULE_2__.auth, provider, firebase_auth__WEBPACK_IMPORTED_MODULE_0__.browserPopupRedirectResolver);\n            return result;\n        } catch (error) {\n            console.error(\"Error in signInWithGoogle:\", error);\n            throw error;\n        }\n    },\n    async signInWithApple () {\n        const provider = new firebase_auth__WEBPACK_IMPORTED_MODULE_0__.OAuthProvider(\"apple.com\");\n        // Add these configurations\n        provider.addScope(\"email\");\n        provider.addScope(\"name\");\n        // Add your service ID\n        provider.setCustomParameters({\n            client_id: \"com.pulsefitnesscollective.pulse.web\",\n            redirect_uri: window.location.origin // Your app's URL\n        });\n        try {\n            return await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.signInWithRedirect)(_config__WEBPACK_IMPORTED_MODULE_2__.auth, provider);\n        } catch (error) {\n            console.error(\"Error during Apple sign-in redirect:\", error);\n            throw error;\n        }\n    },\n    async resetPassword (email) {\n        try {\n            await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_0__.sendPasswordResetEmail)(_config__WEBPACK_IMPORTED_MODULE_2__.auth, email);\n            console.log(\"Password reset email sent to:\", email);\n            return true;\n        } catch (error) {\n            console.error(\"Error sending password reset email:\", error);\n            throw error;\n        }\n    },\n    async addVersion (version, changeNotes, isCriticalUpdate) {\n        try {\n            // Transform changeNotes array to numbered properties\n            const notesObject = {};\n            changeNotes.forEach((note, idx)=>{\n                notesObject[(idx + 1).toString()] = note;\n            });\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_config__WEBPACK_IMPORTED_MODULE_2__.db, \"versions\", version), {\n                ...notesObject,\n                isCriticalUpdate\n            });\n            return true;\n        } catch (error) {\n            console.error(\"Error adding version:\", error);\n            throw error;\n        }\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YmFzZS9hdXRoL21ldGhvZHMudHM/YWUwZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBcbiAgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkLFxuICBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCxcbiAgc2lnbkluV2l0aFBvcHVwLFxuICBzaWduSW5XaXRoUmVkaXJlY3QsIFxuICBHb29nbGVBdXRoUHJvdmlkZXIsXG4gIGJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIsXG4gIE9BdXRoUHJvdmlkZXIsXG4gIHNlbmRQYXNzd29yZFJlc2V0RW1haWwsXG59IGZyb20gJ2ZpcmViYXNlL2F1dGgnO1xuaW1wb3J0IHsgZG9jLCBzZXREb2MgfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xuaW1wb3J0IHsgYXV0aCwgZGIgfSBmcm9tICcuLi9jb25maWcnO1xuaW1wb3J0IHsgU2lnblVwRGF0YSwgQXV0aFNlcnZpY2UgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuLi8uLi9maXJlYmFzZS91c2VyJztcbiAgXG4gIGV4cG9ydCBjb25zdCBhdXRoTWV0aG9kczogQXV0aFNlcnZpY2UgPSB7XG4gICAgYXN5bmMgc2lnblVwV2l0aEVtYWlsKHsgZW1haWwsIHBhc3N3b3JkLCB1c2VybmFtZSwgcHJvZmlsZUltYWdlLCBxdWl6RGF0YSB9OiBTaWduVXBEYXRhKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgc2V0RG9jKGRvYyhkYiwgJ3VzZXJzJywgdXNlckNyZWRlbnRpYWwudXNlci51aWQpLCB7XG4gICAgICAgICAgZW1haWwsXG4gICAgICAgICAgdXNlcm5hbWUsXG4gICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHF1aXpEYXRhOiBxdWl6RGF0YSB8fCBudWxsXG4gICAgICAgIH0pO1xuICBcbiAgICAgICAgaWYgKHByb2ZpbGVJbWFnZSkge1xuICAgICAgICAgIC8vIFRPRE86IEhhbmRsZSBwcm9maWxlIGltYWdlIHVwbG9hZFxuICAgICAgICB9XG4gIFxuICAgICAgICByZXR1cm4gdXNlckNyZWRlbnRpYWw7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBzaWduVXBXaXRoRW1haWw6JywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICB9LFxuICBcbiAgICBhc3luYyBzaWduSW5XaXRoRW1haWwoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykge1xuICAgICAgcmV0dXJuIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCk7XG4gICAgfSxcbiAgXG4gICAgYXN5bmMgc2lnbkluV2l0aEdvb2dsZSgpIHtcbiAgICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IEdvb2dsZUF1dGhQcm92aWRlcigpO1xuICAgICAgcHJvdmlkZXIuYWRkU2NvcGUoJ2VtYWlsJyk7XG4gICAgICBwcm92aWRlci5hZGRTY29wZSgncHJvZmlsZScpO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIsIGJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gc2lnbkluV2l0aEdvb2dsZTonLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH0sXG4gIFxuICAgIGFzeW5jIHNpZ25JbldpdGhBcHBsZSgpIHtcbiAgICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IE9BdXRoUHJvdmlkZXIoJ2FwcGxlLmNvbScpO1xuICAgICAgXG4gICAgICAvLyBBZGQgdGhlc2UgY29uZmlndXJhdGlvbnNcbiAgICAgIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xuICAgICAgcHJvdmlkZXIuYWRkU2NvcGUoJ25hbWUnKTtcbiAgICAgIFxuICAgICAgLy8gQWRkIHlvdXIgc2VydmljZSBJRFxuICAgICAgcHJvdmlkZXIuc2V0Q3VzdG9tUGFyYW1ldGVycyh7XG4gICAgICAgICAgY2xpZW50X2lkOiAnY29tLnB1bHNlZml0bmVzc2NvbGxlY3RpdmUucHVsc2Uud2ViJywgLy8gVGhlIFNlcnZpY2VzIElEIGZyb20gQXBwbGVcbiAgICAgICAgICByZWRpcmVjdF91cmk6IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gLy8gWW91ciBhcHAncyBVUkxcbiAgICAgIH0pO1xuICBcbiAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGR1cmluZyBBcHBsZSBzaWduLWluIHJlZGlyZWN0OicsIGVycm9yKTtcbiAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgfSxcblxuICBhc3luYyByZXNldFBhc3N3b3JkKGVtYWlsOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbChhdXRoLCBlbWFpbCk7XG4gICAgICBjb25zb2xlLmxvZygnUGFzc3dvcmQgcmVzZXQgZW1haWwgc2VudCB0bzonLCBlbWFpbCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBwYXNzd29yZCByZXNldCBlbWFpbDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH0sXG5cbiAgYXN5bmMgYWRkVmVyc2lvbih2ZXJzaW9uOiBzdHJpbmcsIGNoYW5nZU5vdGVzOiBzdHJpbmdbXSwgaXNDcml0aWNhbFVwZGF0ZTogYm9vbGVhbikge1xuICAgIHRyeSB7XG4gICAgICAvLyBUcmFuc2Zvcm0gY2hhbmdlTm90ZXMgYXJyYXkgdG8gbnVtYmVyZWQgcHJvcGVydGllc1xuICAgICAgY29uc3Qgbm90ZXNPYmplY3Q6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7fTtcbiAgICAgIGNoYW5nZU5vdGVzLmZvckVhY2goKG5vdGUsIGlkeCkgPT4ge1xuICAgICAgICBub3Rlc09iamVjdFsoaWR4ICsgMSkudG9TdHJpbmcoKV0gPSBub3RlO1xuICAgICAgfSk7XG4gICAgICBhd2FpdCBzZXREb2MoZG9jKGRiLCAndmVyc2lvbnMnLCB2ZXJzaW9uKSwge1xuICAgICAgICAuLi5ub3Rlc09iamVjdCxcbiAgICAgICAgaXNDcml0aWNhbFVwZGF0ZSxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFkZGluZyB2ZXJzaW9uOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufTsiXSwibmFtZXMiOlsiY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkIiwic2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJzaWduSW5XaXRoUG9wdXAiLCJzaWduSW5XaXRoUmVkaXJlY3QiLCJHb29nbGVBdXRoUHJvdmlkZXIiLCJicm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyIiwiT0F1dGhQcm92aWRlciIsInNlbmRQYXNzd29yZFJlc2V0RW1haWwiLCJkb2MiLCJzZXREb2MiLCJhdXRoIiwiZGIiLCJhdXRoTWV0aG9kcyIsInNpZ25VcFdpdGhFbWFpbCIsImVtYWlsIiwicGFzc3dvcmQiLCJ1c2VybmFtZSIsInByb2ZpbGVJbWFnZSIsInF1aXpEYXRhIiwidXNlckNyZWRlbnRpYWwiLCJ1c2VyIiwidWlkIiwiY3JlYXRlZEF0IiwiRGF0ZSIsImVycm9yIiwiY29uc29sZSIsInNpZ25JbldpdGhFbWFpbCIsInNpZ25JbldpdGhHb29nbGUiLCJwcm92aWRlciIsImFkZFNjb3BlIiwicmVzdWx0Iiwic2lnbkluV2l0aEFwcGxlIiwic2V0Q3VzdG9tUGFyYW1ldGVycyIsImNsaWVudF9pZCIsInJlZGlyZWN0X3VyaSIsIndpbmRvdyIsImxvY2F0aW9uIiwib3JpZ2luIiwicmVzZXRQYXNzd29yZCIsImxvZyIsImFkZFZlcnNpb24iLCJ2ZXJzaW9uIiwiY2hhbmdlTm90ZXMiLCJpc0NyaXRpY2FsVXBkYXRlIiwibm90ZXNPYmplY3QiLCJmb3JFYWNoIiwibm90ZSIsImlkeCIsInRvU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/api/firebase/auth/methods.ts\n");

/***/ }),

/***/ "./src/api/firebase/auth/types.ts":
/*!****************************************!*\
  !*** ./src/api/firebase/auth/types.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL2ZpcmViYXNlL2F1dGgvdHlwZXMudHMiLCJtYXBwaW5ncyI6IjtBQW9CRyIsInNvdXJjZXMiOlsid2VicGFjazovL215LWFwcC8uL3NyYy9hcGkvZmlyZWJhc2UvYXV0aC90eXBlcy50cz8xNWUwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFF1aXpEYXRhIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzL0F1dGhUeXBlc1wiO1xuaW1wb3J0IHsgXG4gICAgVXNlckNyZWRlbnRpYWxcbn0gZnJvbSAnZmlyZWJhc2UvYXV0aCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2lnblVwRGF0YSB7XG4gICAgZW1haWw6IHN0cmluZztcbiAgICBwYXNzd29yZDogc3RyaW5nO1xuICAgIHVzZXJuYW1lOiBzdHJpbmc7XG4gICAgcHJvZmlsZUltYWdlPzogRmlsZTtcbiAgICBxdWl6RGF0YT86IFF1aXpEYXRhOyAgLy8gWW91J2xsIG5lZWQgdG8gaW1wb3J0IG9yIGRlZmluZSBRdWl6RGF0YSB0eXBlXG4gIH1cbiAgXG4gIGV4cG9ydCBpbnRlcmZhY2UgQXV0aFNlcnZpY2Uge1xuICAgIHNpZ25VcFdpdGhFbWFpbDogKGRhdGE6IFNpZ25VcERhdGEpID0+IFByb21pc2U8VXNlckNyZWRlbnRpYWw+O1xuICAgIHNpZ25JbldpdGhFbWFpbDogKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpID0+IFByb21pc2U8VXNlckNyZWRlbnRpYWw+O1xuICAgIHNpZ25JbldpdGhHb29nbGU6ICgpID0+IFByb21pc2U8VXNlckNyZWRlbnRpYWw+O1xuICAgIHNpZ25JbldpdGhBcHBsZTogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgICByZXNldFBhc3N3b3JkOiAoZW1haWw6IHN0cmluZykgPT4gUHJvbWlzZTxib29sZWFuPjtcbiAgICBhZGRWZXJzaW9uOiAodmVyc2lvbjogc3RyaW5nLCBjaGFuZ2VOb3Rlczogc3RyaW5nW10sIGlzQ3JpdGljYWxVcGRhdGU6IGJvb2xlYW4pID0+IFByb21pc2U8Ym9vbGVhbj47XG4gIH0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/api/firebase/auth/types.ts\n");

/***/ }),

/***/ "./src/api/firebase/config.ts":
/*!************************************!*\
  !*** ./src/api/firebase/config.ts ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   app: () => (/* binding */ app),\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   initializeFirebase: () => (/* binding */ initializeFirebase),\n/* harmony export */   storage: () => (/* binding */ storage)\n/* harmony export */ });\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/app */ \"firebase/app\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/auth */ \"firebase/auth\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var firebase_storage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! firebase/storage */ \"firebase/storage\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_app__WEBPACK_IMPORTED_MODULE_0__, firebase_auth__WEBPACK_IMPORTED_MODULE_1__, firebase_firestore__WEBPACK_IMPORTED_MODULE_2__, firebase_storage__WEBPACK_IMPORTED_MODULE_3__]);\n([firebase_app__WEBPACK_IMPORTED_MODULE_0__, firebase_auth__WEBPACK_IMPORTED_MODULE_1__, firebase_firestore__WEBPACK_IMPORTED_MODULE_2__, firebase_storage__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// src/api/firebase/config.ts\n\n\n\n\nlet firebaseApp;\nlet firebaseAuth;\nlet firebaseDb;\nlet firebaseStorage;\nconst getFirebaseConfig = (isDev)=>{\n    const isLocalhost =  false && 0;\n    // Log specific environment variables we're interested in\n    const envVarsToCheck = isDev ? [\n        \"NEXT_PUBLIC_DEV_FIREBASE_API_KEY\",\n        \"NEXT_PUBLIC_DEV_FIREBASE_AUTH_DOMAIN\",\n        \"NEXT_PUBLIC_DEV_FIREBASE_PROJECT_ID\"\n    ] : [\n        \"NEXT_PUBLIC_FIREBASE_API_KEY\",\n        \"NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN\",\n        \"NEXT_PUBLIC_FIREBASE_PROJECT_ID\"\n    ];\n    console.log(\"[Firebase Config] Environment Check:\", {\n        isDev,\n        isLocalhost,\n        nodeEnv: \"development\",\n        envVarsPresent: envVarsToCheck.reduce((acc, key)=>{\n            acc[key] = process.env[key] ? \"✓ Present\" : \"✗ Missing\";\n            return acc;\n        }, {}),\n        timestamp: new Date().toISOString()\n    });\n    // Log the actual config we're going to use (without exposing full keys)\n    const config = {\n        apiKey: isDev ? \"AIzaSyDy25daRNR3sd9P9OJKYnoQmLkQlhuQcy4\" : \"AIzaSyBmf38HJ65h5GuGGzNtPA6Qy2FRZIrSX7c\",\n        authDomain: isDev ? \"quicklifts-dev-01.firebaseapp.com\" : \"quicklifts-dd3f1.firebaseapp.com\",\n        projectId: isDev ? \"quicklifts-dev-01\" : \"quicklifts-dd3f1\",\n        storageBucket: isDev ? \"quicklifts-dev-01.appspot.com\" : \"quicklifts-dd3f1.appspot.com\",\n        messagingSenderId: isDev ? \"793216169358\" : \"691046627244\",\n        appId: isDev ? \"1:793216169358:ios:cecca8dfb08ea5df8aa0df\" : \"1:691046627244:web:877d908f23c34840a9ec09\"\n    };\n    console.log(\"[Firebase Config] Final Configuration:\", {\n        mode: isDev ? \"development\" : \"production\",\n        apiKey: config.apiKey,\n        authDomain: config.authDomain,\n        projectId: config.projectId,\n        storageBucket: config.storageBucket,\n        messagingSenderId: config.messagingSenderId,\n        appId: config.appId,\n        timestamp: new Date().toISOString()\n    });\n    return config;\n};\nconst validateConfig = (config, isDev)=>{\n    const mode = isDev ? \"development\" : \"production\";\n    const prefix = isDev ? \"NEXT_PUBLIC_DEV_FIREBASE_\" : \"NEXT_PUBLIC_FIREBASE_\";\n    const requiredFields = [\n        \"apiKey\",\n        \"authDomain\",\n        \"projectId\",\n        \"storageBucket\",\n        \"messagingSenderId\",\n        \"appId\"\n    ];\n    const missingFields = requiredFields.filter((field)=>!config[field]);\n    if (missingFields.length > 0) {\n        const errorMessage = `\n    Missing required Firebase configuration for ${mode} mode.\n    Please check your .env.local file and ensure these environment variables are set:\n    ${missingFields.map((field)=>`${prefix}${field.toUpperCase()}`).join(\"\\n\")}\n\n    If you're running in development mode, make sure to:\n    1. Create a .env.local file in your project root\n    2. Add all required Firebase environment variables\n    3. Restart your Next.js development server\n        `;\n        throw new Error(errorMessage);\n    }\n};\nconst initializeFirebase = (isDev = false)=>{\n    const isLocalhost =  false && 0;\n    console.log(\"[Firebase] Starting initialization:\", {\n        environment: isDev ? \"development\" : \"production\",\n        isLocalhost,\n        timestamp: new Date().toISOString()\n    });\n    // Only delete app if it exists\n    if (firebaseApp) {\n        try {\n            (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.deleteApp)(firebaseApp);\n            console.log(\"[Firebase] Existing app deleted successfully\");\n        } catch (error) {\n            console.error(\"[Firebase] Error deleting Firebase app:\", error);\n        }\n    }\n    try {\n        // Get the configuration based on environment\n        const config = getFirebaseConfig(isDev);\n        // Validate configuration before proceeding\n        validateConfig(config, isDev);\n        // Log environment information\n        console.log(\"[Firebase] Using configuration:\", {\n            mode: isDev ? \"development\" : \"production\",\n            isLocalhost,\n            projectId: config.projectId,\n            hasApiKey: !!config.apiKey,\n            hasAppId: !!config.appId,\n            timestamp: new Date().toISOString()\n        });\n        // Initialize Firebase\n        firebaseApp = (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)(config);\n        firebaseAuth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.getAuth)(firebaseApp);\n        firebaseDb = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getFirestore)(firebaseApp);\n        firebaseStorage = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_3__.getStorage)(firebaseApp);\n        // Set persistence immediately after auth initialization\n        if (false) {} else {\n            console.log(\"[Firebase] Skipping persistence setup (non-browser environment)\");\n        }\n        console.log(\"[Firebase] Initialization complete:\", {\n            hasApp: !!firebaseApp,\n            hasAuth: !!firebaseAuth,\n            hasDb: !!firebaseDb,\n            hasStorage: !!firebaseStorage,\n            timestamp: new Date().toISOString()\n        });\n        return {\n            app: firebaseApp,\n            auth: firebaseAuth,\n            db: firebaseDb,\n            storage: firebaseStorage\n        };\n    } catch (error) {\n        console.error(\"[Firebase] Error during initialization:\", error);\n        throw error;\n    }\n};\n// Get initial mode from localStorage if available\nconst getInitialMode = ()=>{\n    if (false) {}\n    return false;\n};\n// Initialize with appropriate config\nconst { app, auth, db, storage } = initializeFirebase(getInitialMode());\n// Ensure auth is available before exporting\nif (!auth) {\n    throw new Error(\"[Firebase] Auth was not properly initialized\");\n}\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxxQ0FBcUM7QUFDckMsTUFBTSxFQUFFSixHQUFHLEVBQUVDLElBQUksRUFBRUMsRUFBRSxFQUFFQyxPQUFPLEVBQUUsR0FBR2QsbUJBQW1CZTtBQUV0RCw0Q0FBNEM7QUFDNUMsSUFBSSxDQUFDSCxNQUFNO0lBQ1QsTUFBTSxJQUFJYixNQUFNO0FBQ2xCO0FBRWtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktYXBwLy4vc3JjL2FwaS9maXJlYmFzZS9jb25maWcudHM/YjkxZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvYXBpL2ZpcmViYXNlL2NvbmZpZy50c1xuaW1wb3J0IHsgaW5pdGlhbGl6ZUFwcCwgZ2V0QXBwcywgZGVsZXRlQXBwLCBGaXJlYmFzZUFwcCB9IGZyb20gJ2ZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBnZXRBdXRoLCBzZXRQZXJzaXN0ZW5jZSwgYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UsIEF1dGggfSBmcm9tIFwiZmlyZWJhc2UvYXV0aFwiO1xuaW1wb3J0IHsgZ2V0RmlyZXN0b3JlLCBGaXJlc3RvcmUgfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xuaW1wb3J0IHsgZ2V0U3RvcmFnZSwgRmlyZWJhc2VTdG9yYWdlIH0gZnJvbSAnZmlyZWJhc2Uvc3RvcmFnZSc7XG5cbmxldCBmaXJlYmFzZUFwcDogRmlyZWJhc2VBcHA7XG5sZXQgZmlyZWJhc2VBdXRoOiBBdXRoO1xubGV0IGZpcmViYXNlRGI6IEZpcmVzdG9yZTtcbmxldCBmaXJlYmFzZVN0b3JhZ2U6IEZpcmViYXNlU3RvcmFnZTtcblxuY29uc3QgZ2V0RmlyZWJhc2VDb25maWcgPSAoaXNEZXY6IGJvb2xlYW4pID0+IHtcbiAgY29uc3QgaXNMb2NhbGhvc3QgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnO1xuICBcbiAgLy8gTG9nIHNwZWNpZmljIGVudmlyb25tZW50IHZhcmlhYmxlcyB3ZSdyZSBpbnRlcmVzdGVkIGluXG4gIGNvbnN0IGVudlZhcnNUb0NoZWNrID0gaXNEZXYgPyBbXG4gICAgJ05FWFRfUFVCTElDX0RFVl9GSVJFQkFTRV9BUElfS0VZJyxcbiAgICAnTkVYVF9QVUJMSUNfREVWX0ZJUkVCQVNFX0FVVEhfRE9NQUlOJyxcbiAgICAnTkVYVF9QVUJMSUNfREVWX0ZJUkVCQVNFX1BST0pFQ1RfSUQnXG4gIF0gOiBbXG4gICAgJ05FWFRfUFVCTElDX0ZJUkVCQVNFX0FQSV9LRVknLFxuICAgICdORVhUX1BVQkxJQ19GSVJFQkFTRV9BVVRIX0RPTUFJTicsXG4gICAgJ05FWFRfUFVCTElDX0ZJUkVCQVNFX1BST0pFQ1RfSUQnXG4gIF07XG5cbiAgY29uc29sZS5sb2coJ1tGaXJlYmFzZSBDb25maWddIEVudmlyb25tZW50IENoZWNrOicsIHtcbiAgICBpc0RldixcbiAgICBpc0xvY2FsaG9zdCxcbiAgICBub2RlRW52OiBwcm9jZXNzLmVudi5OT0RFX0VOVixcbiAgICBlbnZWYXJzUHJlc2VudDogZW52VmFyc1RvQ2hlY2sucmVkdWNlKChhY2MsIGtleSkgPT4ge1xuICAgICAgYWNjW2tleV0gPSBwcm9jZXNzLmVudltrZXldID8gJ+KckyBQcmVzZW50JyA6ICfinJcgTWlzc2luZyc7XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4pLFxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gIH0pO1xuXG4gIC8vIExvZyB0aGUgYWN0dWFsIGNvbmZpZyB3ZSdyZSBnb2luZyB0byB1c2UgKHdpdGhvdXQgZXhwb3NpbmcgZnVsbCBrZXlzKVxuICBjb25zdCBjb25maWcgPSB7XG4gICAgYXBpS2V5OiBpc0RldiA/IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0RFVl9GSVJFQkFTRV9BUElfS0VZIDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRklSRUJBU0VfQVBJX0tFWSxcbiAgICBhdXRoRG9tYWluOiBpc0RldiA/IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0RFVl9GSVJFQkFTRV9BVVRIX0RPTUFJTiA6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FVVEhfRE9NQUlOLFxuICAgIHByb2plY3RJZDogaXNEZXYgPyBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19ERVZfRklSRUJBU0VfUFJPSkVDVF9JRCA6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX1BST0pFQ1RfSUQsXG4gICAgc3RvcmFnZUJ1Y2tldDogaXNEZXYgPyBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19ERVZfRklSRUJBU0VfU1RPUkFHRV9CVUNLRVQgOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9TVE9SQUdFX0JVQ0tFVCxcbiAgICBtZXNzYWdpbmdTZW5kZXJJZDogaXNEZXYgPyBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19ERVZfRklSRUJBU0VfTUVTU0FHSU5HX1NFTkRFUl9JRCA6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX01FU1NBR0lOR19TRU5ERVJfSUQsXG4gICAgYXBwSWQ6IGlzRGV2ID8gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfREVWX0ZJUkVCQVNFX0FQUF9JRCA6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQUF9JRFxuICB9O1xuXG4gIGNvbnNvbGUubG9nKCdbRmlyZWJhc2UgQ29uZmlnXSBGaW5hbCBDb25maWd1cmF0aW9uOicsIHtcbiAgICBtb2RlOiBpc0RldiA/ICdkZXZlbG9wbWVudCcgOiAncHJvZHVjdGlvbicsXG4gICAgYXBpS2V5OiBjb25maWcuYXBpS2V5LFxuICAgIGF1dGhEb21haW46IGNvbmZpZy5hdXRoRG9tYWluLFxuICAgIHByb2plY3RJZDogY29uZmlnLnByb2plY3RJZCxcbiAgICBzdG9yYWdlQnVja2V0OiBjb25maWcuc3RvcmFnZUJ1Y2tldCxcbiAgICBtZXNzYWdpbmdTZW5kZXJJZDogY29uZmlnLm1lc3NhZ2luZ1NlbmRlcklkLFxuICAgIGFwcElkOiBjb25maWcuYXBwSWQsXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgfSk7XG5cbiAgcmV0dXJuIGNvbmZpZztcbn07XG5cbmNvbnN0IHZhbGlkYXRlQ29uZmlnID0gKGNvbmZpZzogYW55LCBpc0RldjogYm9vbGVhbikgPT4ge1xuICBjb25zdCBtb2RlID0gaXNEZXYgPyAnZGV2ZWxvcG1lbnQnIDogJ3Byb2R1Y3Rpb24nO1xuICBjb25zdCBwcmVmaXggPSBpc0RldiA/ICdORVhUX1BVQkxJQ19ERVZfRklSRUJBU0VfJyA6ICdORVhUX1BVQkxJQ19GSVJFQkFTRV8nO1xuICBjb25zdCByZXF1aXJlZEZpZWxkcyA9IFsnYXBpS2V5JywgJ2F1dGhEb21haW4nLCAncHJvamVjdElkJywgJ3N0b3JhZ2VCdWNrZXQnLCAnbWVzc2FnaW5nU2VuZGVySWQnLCAnYXBwSWQnXTtcbiAgXG4gIGNvbnN0IG1pc3NpbmdGaWVsZHMgPSByZXF1aXJlZEZpZWxkcy5maWx0ZXIoZmllbGQgPT4gIWNvbmZpZ1tmaWVsZF0pO1xuICBcbiAgaWYgKG1pc3NpbmdGaWVsZHMubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGBcbiAgICBNaXNzaW5nIHJlcXVpcmVkIEZpcmViYXNlIGNvbmZpZ3VyYXRpb24gZm9yICR7bW9kZX0gbW9kZS5cbiAgICBQbGVhc2UgY2hlY2sgeW91ciAuZW52LmxvY2FsIGZpbGUgYW5kIGVuc3VyZSB0aGVzZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIHNldDpcbiAgICAke21pc3NpbmdGaWVsZHMubWFwKGZpZWxkID0+IGAke3ByZWZpeH0ke2ZpZWxkLnRvVXBwZXJDYXNlKCl9YCkuam9pbignXFxuJyl9XG5cbiAgICBJZiB5b3UncmUgcnVubmluZyBpbiBkZXZlbG9wbWVudCBtb2RlLCBtYWtlIHN1cmUgdG86XG4gICAgMS4gQ3JlYXRlIGEgLmVudi5sb2NhbCBmaWxlIGluIHlvdXIgcHJvamVjdCByb290XG4gICAgMi4gQWRkIGFsbCByZXF1aXJlZCBGaXJlYmFzZSBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgICAzLiBSZXN0YXJ0IHlvdXIgTmV4dC5qcyBkZXZlbG9wbWVudCBzZXJ2ZXJcbiAgICAgICAgYDtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxpemVGaXJlYmFzZSA9IChpc0RldiA9IGZhbHNlKSA9PiB7XG4gIGNvbnN0IGlzTG9jYWxob3N0ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lID09PSAnbG9jYWxob3N0JztcblxuICBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBTdGFydGluZyBpbml0aWFsaXphdGlvbjonLCB7XG4gICAgZW52aXJvbm1lbnQ6IGlzRGV2ID8gJ2RldmVsb3BtZW50JyA6ICdwcm9kdWN0aW9uJyxcbiAgICBpc0xvY2FsaG9zdCxcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICB9KTtcblxuICAvLyBPbmx5IGRlbGV0ZSBhcHAgaWYgaXQgZXhpc3RzXG4gIGlmIChmaXJlYmFzZUFwcCkge1xuICAgIHRyeSB7XG4gICAgICBkZWxldGVBcHAoZmlyZWJhc2VBcHApO1xuICAgICAgY29uc29sZS5sb2coJ1tGaXJlYmFzZV0gRXhpc3RpbmcgYXBwIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tGaXJlYmFzZV0gRXJyb3IgZGVsZXRpbmcgRmlyZWJhc2UgYXBwOicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICB0cnkge1xuICAgIC8vIEdldCB0aGUgY29uZmlndXJhdGlvbiBiYXNlZCBvbiBlbnZpcm9ubWVudFxuICAgIGNvbnN0IGNvbmZpZyA9IGdldEZpcmViYXNlQ29uZmlnKGlzRGV2KTtcbiAgICBcbiAgICAvLyBWYWxpZGF0ZSBjb25maWd1cmF0aW9uIGJlZm9yZSBwcm9jZWVkaW5nXG4gICAgdmFsaWRhdGVDb25maWcoY29uZmlnLCBpc0Rldik7XG4gICAgXG4gICAgLy8gTG9nIGVudmlyb25tZW50IGluZm9ybWF0aW9uXG4gICAgY29uc29sZS5sb2coJ1tGaXJlYmFzZV0gVXNpbmcgY29uZmlndXJhdGlvbjonLCB7XG4gICAgICBtb2RlOiBpc0RldiA/ICdkZXZlbG9wbWVudCcgOiAncHJvZHVjdGlvbicsXG4gICAgICBpc0xvY2FsaG9zdCxcbiAgICAgIHByb2plY3RJZDogY29uZmlnLnByb2plY3RJZCxcbiAgICAgIGhhc0FwaUtleTogISFjb25maWcuYXBpS2V5LFxuICAgICAgaGFzQXBwSWQ6ICEhY29uZmlnLmFwcElkLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KTtcblxuICAgIC8vIEluaXRpYWxpemUgRmlyZWJhc2VcbiAgICBmaXJlYmFzZUFwcCA9IGluaXRpYWxpemVBcHAoY29uZmlnKTtcbiAgICBmaXJlYmFzZUF1dGggPSBnZXRBdXRoKGZpcmViYXNlQXBwKTtcbiAgICBmaXJlYmFzZURiID0gZ2V0RmlyZXN0b3JlKGZpcmViYXNlQXBwKTtcbiAgICBmaXJlYmFzZVN0b3JhZ2UgPSBnZXRTdG9yYWdlKGZpcmViYXNlQXBwKTtcblxuICAgIC8vIFNldCBwZXJzaXN0ZW5jZSBpbW1lZGlhdGVseSBhZnRlciBhdXRoIGluaXRpYWxpemF0aW9uXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzZXRQZXJzaXN0ZW5jZShmaXJlYmFzZUF1dGgsIGJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlKVxuICAgICAgICAudGhlbigoKSA9PiBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBQZXJzaXN0ZW5jZSBzZXQgc3VjY2Vzc2Z1bGx5IHRvIGJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlJykpXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUuZXJyb3IoJ1tGaXJlYmFzZV0gRXJyb3Igc2V0dGluZyBwZXJzaXN0ZW5jZTonLCBlcnJvcikpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygnW0ZpcmViYXNlXSBTa2lwcGluZyBwZXJzaXN0ZW5jZSBzZXR1cCAobm9uLWJyb3dzZXIgZW52aXJvbm1lbnQpJyk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1tGaXJlYmFzZV0gSW5pdGlhbGl6YXRpb24gY29tcGxldGU6Jywge1xuICAgICAgaGFzQXBwOiAhIWZpcmViYXNlQXBwLFxuICAgICAgaGFzQXV0aDogISFmaXJlYmFzZUF1dGgsXG4gICAgICBoYXNEYjogISFmaXJlYmFzZURiLFxuICAgICAgaGFzU3RvcmFnZTogISFmaXJlYmFzZVN0b3JhZ2UsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGFwcDogZmlyZWJhc2VBcHAsXG4gICAgICBhdXRoOiBmaXJlYmFzZUF1dGgsXG4gICAgICBkYjogZmlyZWJhc2VEYixcbiAgICAgIHN0b3JhZ2U6IGZpcmViYXNlU3RvcmFnZVxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW0ZpcmViYXNlXSBFcnJvciBkdXJpbmcgaW5pdGlhbGl6YXRpb246JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59O1xuXG4vLyBHZXQgaW5pdGlhbCBtb2RlIGZyb20gbG9jYWxTdG9yYWdlIGlmIGF2YWlsYWJsZVxuY29uc3QgZ2V0SW5pdGlhbE1vZGUgPSAoKSA9PiB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnN0IG1vZGUgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Rldk1vZGUnKSA9PT0gJ3RydWUnO1xuICAgIGNvbnNvbGUubG9nKCdbRmlyZWJhc2VdIEluaXRpYWwgbW9kZTonLCB7XG4gICAgICBpc0RldjogbW9kZSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSk7XG4gICAgcmV0dXJuIG1vZGU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLy8gSW5pdGlhbGl6ZSB3aXRoIGFwcHJvcHJpYXRlIGNvbmZpZ1xuY29uc3QgeyBhcHAsIGF1dGgsIGRiLCBzdG9yYWdlIH0gPSBpbml0aWFsaXplRmlyZWJhc2UoZ2V0SW5pdGlhbE1vZGUoKSk7XG5cbi8vIEVuc3VyZSBhdXRoIGlzIGF2YWlsYWJsZSBiZWZvcmUgZXhwb3J0aW5nXG5pZiAoIWF1dGgpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdbRmlyZWJhc2VdIEF1dGggd2FzIG5vdCBwcm9wZXJseSBpbml0aWFsaXplZCcpO1xufVxuXG5leHBvcnQgeyBhcHAsIGF1dGgsIGRiLCBzdG9yYWdlIH07Il0sIm5hbWVzIjpbImluaXRpYWxpemVBcHAiLCJkZWxldGVBcHAiLCJnZXRBdXRoIiwic2V0UGVyc2lzdGVuY2UiLCJicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSIsImdldEZpcmVzdG9yZSIsImdldFN0b3JhZ2UiLCJmaXJlYmFzZUFwcCIsImZpcmViYXNlQXV0aCIsImZpcmViYXNlRGIiLCJmaXJlYmFzZVN0b3JhZ2UiLCJnZXRGaXJlYmFzZUNvbmZpZyIsImlzRGV2IiwiaXNMb2NhbGhvc3QiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhvc3RuYW1lIiwiZW52VmFyc1RvQ2hlY2siLCJjb25zb2xlIiwibG9nIiwibm9kZUVudiIsImVudlZhcnNQcmVzZW50IiwicmVkdWNlIiwiYWNjIiwia2V5IiwicHJvY2VzcyIsImVudiIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImNvbmZpZyIsImFwaUtleSIsIk5FWFRfUFVCTElDX0RFVl9GSVJFQkFTRV9BUElfS0VZIiwiTkVYVF9QVUJMSUNfRklSRUJBU0VfQVBJX0tFWSIsImF1dGhEb21haW4iLCJORVhUX1BVQkxJQ19ERVZfRklSRUJBU0VfQVVUSF9ET01BSU4iLCJORVhUX1BVQkxJQ19GSVJFQkFTRV9BVVRIX0RPTUFJTiIsInByb2plY3RJZCIsIk5FWFRfUFVCTElDX0RFVl9GSVJFQkFTRV9QUk9KRUNUX0lEIiwiTkVYVF9QVUJMSUNfRklSRUJBU0VfUFJPSkVDVF9JRCIsInN0b3JhZ2VCdWNrZXQiLCJORVhUX1BVQkxJQ19ERVZfRklSRUJBU0VfU1RPUkFHRV9CVUNLRVQiLCJORVhUX1BVQkxJQ19GSVJFQkFTRV9TVE9SQUdFX0JVQ0tFVCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwiTkVYVF9QVUJMSUNfREVWX0ZJUkVCQVNFX01FU1NBR0lOR19TRU5ERVJfSUQiLCJORVhUX1BVQkxJQ19GSVJFQkFTRV9NRVNTQUdJTkdfU0VOREVSX0lEIiwiYXBwSWQiLCJORVhUX1BVQkxJQ19ERVZfRklSRUJBU0VfQVBQX0lEIiwiTkVYVF9QVUJMSUNfRklSRUJBU0VfQVBQX0lEIiwibW9kZSIsInZhbGlkYXRlQ29uZmlnIiwicHJlZml4IiwicmVxdWlyZWRGaWVsZHMiLCJtaXNzaW5nRmllbGRzIiwiZmlsdGVyIiwiZmllbGQiLCJsZW5ndGgiLCJlcnJvck1lc3NhZ2UiLCJtYXAiLCJ0b1VwcGVyQ2FzZSIsImpvaW4iLCJFcnJvciIsImluaXRpYWxpemVGaXJlYmFzZSIsImVudmlyb25tZW50IiwiZXJyb3IiLCJoYXNBcGlLZXkiLCJoYXNBcHBJZCIsInRoZW4iLCJjYXRjaCIsImhhc0FwcCIsImhhc0F1dGgiLCJoYXNEYiIsImhhc1N0b3JhZ2UiLCJhcHAiLCJhdXRoIiwiZGIiLCJzdG9yYWdlIiwiZ2V0SW5pdGlhbE1vZGUiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/api/firebase/config.ts\n");

/***/ }),

/***/ "./src/api/firebase/exercise/service.ts":
/*!**********************************************!*\
  !*** ./src/api/firebase/exercise/service.ts ***!
  \**********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   exerciseService: () => (/* binding */ exerciseService)\n/* harmony export */ });\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/api/firebase/config.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../firebase/exercise/types */ \"./src/api/firebase/exercise/types.ts\");\n/* harmony import */ var _utils_formatDate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/formatDate */ \"./src/utils/formatDate.ts\");\n/* harmony import */ var _utils_stringUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/stringUtils */ \"./src/utils/stringUtils.ts\");\n/* harmony import */ var firebase_storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! firebase/storage */ \"firebase/storage\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _config__WEBPACK_IMPORTED_MODULE_1__, _types__WEBPACK_IMPORTED_MODULE_2__, firebase_storage__WEBPACK_IMPORTED_MODULE_5__]);\n([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _config__WEBPACK_IMPORTED_MODULE_1__, _types__WEBPACK_IMPORTED_MODULE_2__, firebase_storage__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\nclass ExerciseService {\n    get allExercises() {\n        return this._allExercises;\n    }\n    // Clear the exercise cache to ensure fresh data\n    clearCache() {\n        console.log(\"[DEBUG-EXERCISE] Clearing exercise cache\");\n        this._allExercises = [];\n        this.exerciseCache.clear();\n    }\n    generateExerciseId() {\n        const newId = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\")).id;\n        console.log(\"[DEBUG-EXERCISE] Generated exercise ID:\", newId);\n        return newId;\n    }\n    generateExerciseVideoId() {\n        const newId = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\")).id;\n        console.log(\"[DEBUG-EXERCISE] Generated exercise video ID:\", newId);\n        return newId;\n    }\n    // Verify if an exercise exists in Firestore by its ID field\n    async verifyExerciseExists(exerciseId) {\n        try {\n            console.log(\"[DEBUG-EXERCISE] Verifying if exercise exists by ID:\", exerciseId);\n            // Query for documents with this ID field\n            const exercisesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\");\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(exercisesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"id\", \"==\", exerciseId));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            const exists = !querySnapshot.empty;\n            console.log(\"[DEBUG-EXERCISE] Exercise verification by ID result:\", {\n                exists,\n                id: exerciseId,\n                matchCount: querySnapshot.size\n            });\n            return exists;\n        } catch (error) {\n            console.error(\"[DEBUG-EXERCISE] Error verifying exercise by ID:\", error);\n            return false;\n        }\n    }\n    // Verify if an exercise exists in Firestore by name (document ID)\n    async verifyExerciseExistsByName(exerciseName) {\n        console.log(`[DEBUG-EXERCISE] Verifying if exercise exists by name: ${exerciseName}`);\n        // Ensure consistent capitalization\n        const formattedName = (0,_utils_stringUtils__WEBPACK_IMPORTED_MODULE_4__.formatExerciseNameForId)(exerciseName);\n        try {\n            const exerciseRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\", formattedName);\n            const exerciseDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(exerciseRef);\n            console.log(`[DEBUG-EXERCISE] Exercise verification by name result: {exists: ${exerciseDoc.exists()}, name: '${formattedName.toLowerCase()}', data: ${exerciseDoc.exists() ? \"exists\" : \"null\"}}`);\n            return exerciseDoc.exists();\n        } catch (error) {\n            console.error(`[DEBUG-EXERCISE] Error verifying exercise: ${error}`);\n            return false;\n        }\n    }\n    // Get an exercise by its name\n    async getExerciseByName(exerciseName) {\n        console.log(`[DEBUG-EXERCISE] Getting exercise by name: ${exerciseName}`);\n        // Ensure consistent capitalization\n        const formattedName = (0,_utils_stringUtils__WEBPACK_IMPORTED_MODULE_4__.formatExerciseNameForId)(exerciseName);\n        try {\n            // Check cache first\n            if (this.exerciseCache.has(formattedName)) {\n                const cachedExercise = this.exerciseCache.get(formattedName);\n                console.log(`[DEBUG-EXERCISE] Found exercise in cache: ${formattedName}`);\n                return cachedExercise;\n            }\n            // Use the formatted name as document ID\n            const exerciseRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\", formattedName);\n            const exerciseDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(exerciseRef);\n            if (!exerciseDoc.exists()) {\n                console.log(`[DEBUG-EXERCISE] No exercise found with name: ${formattedName.toLowerCase()}`);\n                return null;\n            }\n            const exerciseData = exerciseDoc.data();\n            const exercise = new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise(exerciseData);\n            // Cache the result\n            this.exerciseCache.set(formattedName, exercise);\n            return exercise;\n        } catch (error) {\n            console.error(`[DEBUG-EXERCISE] Error getting exercise by name: ${error}`);\n            return null;\n        }\n    }\n    // Helper function for capitalizing exercise names\n    capitalizeExerciseName(name) {\n        if (!name) return \"\";\n        // Capitalize each word in the exercise name\n        return name.split(\" \").map((word)=>word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()).join(\" \");\n    }\n    // Create a new exercise document in Firestore\n    async createExercise(exercise) {\n        console.log(`[DEBUG-EXERCISE] Creating new exercise:`, exercise);\n        // Ensure consistent capitalization for the exercise name\n        const formattedName = (0,_utils_stringUtils__WEBPACK_IMPORTED_MODULE_4__.formatExerciseNameForId)(exercise.name);\n        console.log(`[DEBUG-EXERCISE] Capitalized exercise name: ${formattedName}`);\n        // Use the formatted name as document ID\n        console.log(`[DEBUG-EXERCISE] Using exercise name as document ID: ${formattedName}`);\n        try {\n            // Create the exercise document with the name as ID (consistently capitalized)\n            const exerciseRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\", formattedName);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(exerciseRef, {\n                ...exercise,\n                name: formattedName\n            });\n            console.log(`[DEBUG-EXERCISE] Exercise created successfully with document ID: ${formattedName}`);\n            // Clear cache after creating\n            this.clearCache();\n        } catch (error) {\n            console.error(`[DEBUG-EXERCISE] Error creating exercise: ${error}`);\n            throw error;\n        }\n    }\n    // Create a new exercise video document in Firestore\n    async createExerciseVideo(video) {\n        console.log(`[DEBUG-EXERCISE] Creating new exercise video:`, video);\n        // Ensure consistent capitalization for the exercise name\n        const formattedExerciseName = (0,_utils_stringUtils__WEBPACK_IMPORTED_MODULE_4__.formatExerciseNameForId)(video.exercise);\n        console.log(`[DEBUG-EXERCISE] Capitalized exercise name in video: ${formattedExerciseName}`);\n        try {\n            // Create the exercise video document\n            const exerciseVideoRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\", video.id);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(exerciseVideoRef, {\n                ...video,\n                exercise: formattedExerciseName\n            });\n            console.log(`[DEBUG-EXERCISE] Exercise video created successfully: ${video.id}`);\n            console.log(`[DEBUG-EXERCISE] Exercise video linked to exercise document: ${formattedExerciseName}`);\n            // Clear cache after creating\n            this.clearCache();\n        } catch (error) {\n            console.error(`[DEBUG-EXERCISE] Error creating exercise video: ${error}`);\n            throw error;\n        }\n    }\n    async fetchExercises() {\n        try {\n            console.log(\"[DEBUG-EXERCISE] Starting fetchExercises method\");\n            // Fetch all exercises\n            console.log(\"[DEBUG-EXERCISE] Fetching exercises from Firestore\");\n            const exerciseSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"));\n            console.log(`[DEBUG-EXERCISE] Fetched ${exerciseSnapshot.docs.length} exercises`);\n            const exercises = exerciseSnapshot.docs.map((doc)=>{\n                // Document ID is now the exercise name, but we still want to use the id field for internal references\n                const data = doc.data();\n                // Ensure the exercise name is capitalized\n                const capitalizedName = this.capitalizeExerciseName(data.name || doc.id);\n                return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise({\n                    // Use the id field from the document data, not the document ID\n                    id: data.id || doc.id,\n                    // Ensure the name is properly capitalized\n                    name: capitalizedName,\n                    // Rest of the data\n                    ...data,\n                    // Ensure the name is consistent with the document ID\n                    documentId: doc.id\n                });\n            });\n            console.log(\"[DEBUG-EXERCISE] Mapped exercises data to Exercise objects\");\n            console.log(\"[DEBUG-EXERCISE] Sample exercise data:\", exercises.slice(0, 2).map((ex)=>({\n                    id: ex.id,\n                    name: ex.name,\n                    documentId: ex.documentId,\n                    category: ex.category\n                })));\n            // Fetch all videos\n            console.log(\"[DEBUG-EXERCISE] Fetching exercise videos from Firestore\");\n            const videoSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"));\n            console.log(`[DEBUG-EXERCISE] Fetched ${videoSnapshot.docs.length} exercise videos`);\n            const exerciseVideos = videoSnapshot.docs.map((doc)=>{\n                const data = doc.data();\n                // Ensure exercise name in video is capitalized\n                const capitalizedExerciseName = this.capitalizeExerciseName(data.exercise || \"\");\n                return new _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo({\n                    id: doc.id,\n                    ...data,\n                    // Ensure exercise name is properly capitalized\n                    exercise: capitalizedExerciseName,\n                    // Make sure exerciseId is properly set if it's missing or incorrect\n                    exerciseId: data.exerciseId || data.exercise?.toLowerCase() || \"\"\n                });\n            });\n            console.log(\"[DEBUG-EXERCISE] Mapped video data to ExerciseVideo objects\");\n            console.log(\"[DEBUG-EXERCISE] Sample video data:\", exerciseVideos.slice(0, 2).map((video)=>({\n                    id: video.id,\n                    exerciseId: video.exerciseId,\n                    exercise: video.exercise,\n                    videoURL: video.videoURL ? \"Has URL\" : \"No URL\"\n                })));\n            // Map videos to their corresponding exercises by matching exerciseId to document ID\n            console.log(\"[DEBUG-EXERCISE] Mapping videos to exercises by exerciseId\");\n            const mappedExercises = exercises.map((exercise)=>{\n                // Find videos where exerciseId matches the document ID (name) of the exercise\n                const videosForExercise = exerciseVideos.filter((video)=>{\n                    // Match by the name (document ID) instead of the internal ID field\n                    // Do case-insensitive matching\n                    const matchByName = video.exerciseId === exercise.name.toLowerCase();\n                    const matchByExerciseId = video.exerciseId === exercise.documentId;\n                    const matchByExerciseName = video.exercise.toLowerCase() === exercise.name.toLowerCase();\n                    if (matchByName || matchByExerciseId || matchByExerciseName) {\n                        return true;\n                    }\n                    // Log any potential mismatches for debugging\n                    if (video.exercise.toLowerCase() === exercise.name.toLowerCase() && video.exerciseId !== exercise.name.toLowerCase() && video.exerciseId !== exercise.documentId) {\n                        console.log(`[DEBUG-EXERCISE] Potential mismatch: Video \"${video.id}\" has name that matches \"${exercise.name}\" but exerciseId \"${video.exerciseId}\" doesn't match documentId \"${exercise.documentId}\"`);\n                    }\n                    return false;\n                }).map((video)=>new _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo({\n                        ...video,\n                        // Ensure exercise name is properly capitalized\n                        exercise: this.capitalizeExerciseName(video.exercise)\n                    })); // Ensure proper ExerciseVideo instances\n                console.log(`[DEBUG-EXERCISE] Exercise \"${exercise.name}\" matched with ${videosForExercise.length} videos`);\n                return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise({\n                    ...exercise,\n                    videos: videosForExercise\n                });\n            });\n            // Filter out exercises without videos\n            this._allExercises = mappedExercises.filter((exercise)=>exercise.videos.length > 0);\n            console.log(`[DEBUG-EXERCISE] Final result: ${this._allExercises.length} exercises with videos`);\n            console.log(\"[DEBUG-EXERCISE] Sample from final result:\", this._allExercises.slice(0, 3).map((ex)=>({\n                    id: ex.id,\n                    name: ex.name,\n                    videoCount: ex.videos.length\n                })));\n        // console.log(`Fetched ${this._allExercises.length} exercises with videos.`);\n        // Detailed logging for debugging\n        // console.log('Sample exercises:', this._allExercises.slice(0, 5).map(ex => ({\n        //   name: ex.name,\n        //   videoCount: ex.videos.length,\n        //   firstVideoUrl: ex.videos[0]?.videoURL\n        // })));\n        } catch (error) {\n            console.error(\"[DEBUG-EXERCISE] Error fetching exercises:\", error);\n            console.error(\"[DEBUG-EXERCISE] Error details:\", {\n                message: error instanceof Error ? error.message : \"Unknown error\",\n                name: error instanceof Error ? error.name : \"Unknown type\",\n                stack: error instanceof Error ? error.stack : \"No stack trace\"\n            });\n            throw new Error(\"Failed to fetch exercises.\");\n        }\n    }\n    async fetchFeaturedExercisesWithVideos(limit = 24) {\n        try {\n            // Fetch all exercises\n            const exerciseSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"));\n            const exercises = exerciseSnapshot.docs.map((doc)=>new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            // Fetch all videos\n            const videoSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"));\n            const exerciseVideos = videoSnapshot.docs.map((doc)=>new _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            // Map videos to exercises and filter for those with GIFs\n            const mappedExercises = exercises.map((exerciseData)=>{\n                // Ensure that each video is properly instantiated as an `ExerciseVideo`\n                const videosForExercise = exerciseVideos.filter((video)=>video.exercise.toLowerCase() === exerciseData.name.toLowerCase()).map((video)=>new _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo(video));\n                return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise({\n                    id: exerciseData.id,\n                    name: exerciseData.name,\n                    description: exerciseData.description,\n                    category: exerciseData.category,\n                    primaryBodyParts: exerciseData.primaryBodyParts || [],\n                    secondaryBodyParts: exerciseData.secondaryBodyParts || [],\n                    tags: exerciseData.tags || [],\n                    videos: videosForExercise,\n                    steps: exerciseData.steps || [],\n                    visibility: exerciseData.visibility || \"live\",\n                    currentVideoPosition: exerciseData.currentVideoPosition || 0,\n                    sets: exerciseData.sets || 0,\n                    reps: exerciseData.reps || \"\",\n                    weight: exerciseData.weight || 0,\n                    author: new _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseAuthor(exerciseData.author || {}),\n                    createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_3__.convertFirestoreTimestamp)(exerciseData.createdAt),\n                    updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_3__.convertFirestoreTimestamp)(exerciseData.updatedAt)\n                });\n            });\n            // Shuffle and limit results\n            const shuffledExercises = mappedExercises.sort(()=>Math.random() - 0.5).slice(0, limit);\n            return shuffledExercises;\n        } catch (error) {\n            console.error(\"Error fetching featured exercises:\", error);\n            return [];\n        }\n    }\n    async getExercisesByAuthor(userId) {\n        try {\n            // Query exerciseVideos collection instead\n            const videosRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\");\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(videosRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", userId));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            // Create a Set to store unique exercise names\n            const uniqueExerciseNames = new Set();\n            // Collect all unique exercise names from the videos\n            querySnapshot.forEach((doc)=>{\n                const videoData = doc.data();\n                if (videoData.exerciseName) {\n                    uniqueExerciseNames.add(videoData.exerciseName);\n                }\n            });\n            // Convert to array and create Exercise objects\n            const exercises = Array.from(uniqueExerciseNames).map((name)=>{\n                return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise({\n                    id: name,\n                    name: name,\n                    author: {\n                        userId: userId\n                    }\n                });\n            });\n            return exercises;\n        } catch (error) {\n            console.error(\"Error fetching exercises by author:\", error);\n            return [];\n        }\n    }\n    async fetchPaginatedExercises(lastDoc = null, pageSize = 15) {\n        try {\n            // Query for exercises with pagination\n            let exerciseQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(pageSize));\n            if (lastDoc) {\n                exerciseQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(exerciseQuery, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.startAfter)(lastDoc));\n            }\n            const exerciseSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(exerciseQuery);\n            if (exerciseSnapshot.empty) {\n                return {\n                    exercises: [],\n                    lastVisible: null\n                };\n            }\n            // Fetch exercise videos separately\n            const videoSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"));\n            const exerciseVideos = videoSnapshot.docs.map((doc)=>new _types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            const exercises = exerciseSnapshot.docs.map((doc)=>new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            // Map videos to exercises and ensure correct instantiation\n            const mappedExercises = exercises.map((exerciseData)=>{\n                const videosForExercise = exerciseVideos.filter((video)=>video.exerciseId === exerciseData.id);\n                return new _types__WEBPACK_IMPORTED_MODULE_2__.Exercise({\n                    ...exerciseData,\n                    videos: videosForExercise\n                });\n            });\n            // Filter exercises with videos\n            const filteredExercises = mappedExercises.filter((exercise)=>exercise.videos.length > 0);\n            // Update the last visible document for pagination\n            const lastVisible = exerciseSnapshot.docs.length > 0 ? exerciseSnapshot.docs[exerciseSnapshot.docs.length - 1] : null;\n            return {\n                exercises: filteredExercises,\n                lastVisible\n            };\n        } catch (error) {\n            console.error(\"Error fetching paginated exercises:\", error);\n            throw error;\n        }\n    }\n    generateExerciseLogID(workoutId, userId) {\n        // Create a document reference in the logs subcollection of the workout,\n        // then return its generated ID.\n        return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\", workoutId, \"logs\")).id;\n    }\n    // Delete a specific video from an exercise\n    async deleteSpecificExerciseVideo(exerciseId, videoId, requestingUserId) {\n        try {\n            console.log(`[DEBUG-EXERCISE] Deleting video ${videoId} linked to exercise ${exerciseId}`);\n            // Get the video document directly from the exerciseVideos collection\n            const videoRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\", videoId);\n            const videoDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(videoRef);\n            if (!videoDoc.exists()) {\n                console.error(`[DEBUG-EXERCISE] Video ${videoId} not found in exerciseVideos collection`);\n                throw new Error(\"Video not found in exerciseVideos collection\");\n            }\n            const videoData = videoDoc.data();\n            // Check authorization - ensure the user is the creator of the video\n            if (videoData.userId && videoData.userId !== requestingUserId) {\n                console.error(`[DEBUG-EXERCISE] Unauthorized deletion attempt. User ${requestingUserId} attempting to delete video created by ${videoData.userId}`);\n                throw new Error(\"Not authorized to delete this video\");\n            }\n            // Delete the video file from storage if it exists\n            if (videoData.videoURL) {\n                try {\n                    const videoStorageRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.ref)((0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.getStorage)(), videoData.videoURL);\n                    await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.deleteObject)(videoStorageRef);\n                    console.log(`[DEBUG-EXERCISE] Deleted video file: ${videoData.videoURL}`);\n                } catch (error) {\n                    console.error(`[DEBUG-EXERCISE] Error deleting video file: ${error}`);\n                // Continue even if file deletion fails\n                }\n            }\n            // Delete the GIF file from storage if it exists\n            if (videoData.gifURL) {\n                try {\n                    const gifStorageRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.ref)((0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.getStorage)(), videoData.gifURL);\n                    await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.deleteObject)(gifStorageRef);\n                    console.log(`[DEBUG-EXERCISE] Deleted GIF file: ${videoData.gifURL}`);\n                } catch (error) {\n                    console.error(`[DEBUG-EXERCISE] Error deleting GIF file: ${error}`);\n                // Continue even if file deletion fails\n                }\n            }\n            // Delete the video document from Firestore\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.deleteDoc)(videoRef);\n            console.log(`[DEBUG-EXERCISE] Successfully deleted video ${videoId}`);\n            // Clear cache after modification\n            this.clearCache();\n        } catch (error) {\n            console.error(`[DEBUG-EXERCISE] Error deleting video: ${error}`);\n            throw error;\n        }\n    }\n    constructor(){\n        this._allExercises = [];\n        this.exerciseCache = new Map();\n    }\n}\nconst exerciseService = new ExerciseService();\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TSxDQUFDO2dCQUNwRSx1Q0FBdUM7Z0JBQ3pDO1lBQ0Y7WUFFQSxnREFBZ0Q7WUFDaEQsSUFBSTZFLFVBQVVrQixNQUFNLEVBQUU7Z0JBQ3BCLElBQUk7b0JBQ0YsTUFBTUMsZ0JBQWdCeEgscURBQUdBLENBQUNFLDREQUFVQSxJQUFJbUcsVUFBVWtCLE1BQU07b0JBQ3hELE1BQU10SCw4REFBWUEsQ0FBQ3VIO29CQUNuQmpILFFBQVFDLEdBQUcsQ0FBQyxDQUFDLG1DQUFtQyxFQUFFNkYsVUFBVWtCLE1BQU0sQ0FBQyxDQUFDO2dCQUN0RSxFQUFFLE9BQU8vRixPQUFPO29CQUNkakIsUUFBUWlCLEtBQUssQ0FBQyxDQUFDLDBDQUEwQyxFQUFFQSxNQUFNLENBQUM7Z0JBQ2xFLHVDQUF1QztnQkFDekM7WUFDRjtZQUVBLDJDQUEyQztZQUMzQyxNQUFNL0IsNkRBQVNBLENBQUMySDtZQUVoQjdHLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDRDQUE0QyxFQUFFMEcsUUFBUSxDQUFDO1lBRXBFLGlDQUFpQztZQUNqQyxJQUFJLENBQUM1RyxVQUFVO1FBRWpCLEVBQUUsT0FBT2tCLE9BQU87WUFDZGpCLFFBQVFpQixLQUFLLENBQUMsQ0FBQyx1Q0FBdUMsRUFBRUEsTUFBTSxDQUFDO1lBQy9ELE1BQU1BO1FBQ1I7SUFDRjs7YUE1Z0JRbkIsZ0JBQTRCLEVBQUU7YUFDOUJJLGdCQUF1QyxJQUFJZ0g7O0FBNGdCdkQ7QUFFTyxNQUFNQyxrQkFBa0IsSUFBSXZILGtCQUFrQiIsInNvdXJjZXMiOlsid2VicGFjazovL215LWFwcC8uL3NyYy9hcGkvZmlyZWJhc2UvZXhlcmNpc2Uvc2VydmljZS50cz9hODMxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgY29sbGVjdGlvbixcbiAgICBnZXREb2NzLFxuICAgIHF1ZXJ5LFxuICAgIG9yZGVyQnksXG4gICAgbGltaXQsXG4gICAgc3RhcnRBZnRlcixcbiAgICBEb2N1bWVudFNuYXBzaG90LFxuICAgIGRvYyxcbiAgICB3aGVyZSxcbiAgICBnZXREb2MsXG4gICAgc2V0RG9jLFxuICAgIHVwZGF0ZURvYyxcbiAgICBkZWxldGVEb2MsXG4gIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vY29uZmlnJztcbmltcG9ydCB7IEV4ZXJjaXNlIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBFeGVyY2lzZVZpZGVvLCBFeGVyY2lzZUF1dGhvciB9IGZyb20gJy4uLy4uL2ZpcmViYXNlL2V4ZXJjaXNlL3R5cGVzJztcbmltcG9ydCB7IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAgfSBmcm9tICcuLi8uLi8uLi91dGlscy9mb3JtYXREYXRlJztcbmltcG9ydCB7IGZvcm1hdEV4ZXJjaXNlTmFtZUZvcklkIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvc3RyaW5nVXRpbHMnO1xuaW1wb3J0IHsgcmVmLCBkZWxldGVPYmplY3QsIGdldFN0b3JhZ2UgfSBmcm9tICdmaXJlYmFzZS9zdG9yYWdlJztcblxuY2xhc3MgRXhlcmNpc2VTZXJ2aWNlIHtcbiAgICBwcml2YXRlIF9hbGxFeGVyY2lzZXM6IEV4ZXJjaXNlW10gPSBbXTtcbiAgICBwcml2YXRlIGV4ZXJjaXNlQ2FjaGU6IE1hcDxzdHJpbmcsIEV4ZXJjaXNlPiA9IG5ldyBNYXAoKTtcbiAgXG4gICAgZ2V0IGFsbEV4ZXJjaXNlcygpOiBFeGVyY2lzZVtdIHtcbiAgICAgIHJldHVybiB0aGlzLl9hbGxFeGVyY2lzZXM7XG4gICAgfVxuICBcbiAgICAvLyBDbGVhciB0aGUgZXhlcmNpc2UgY2FjaGUgdG8gZW5zdXJlIGZyZXNoIGRhdGFcbiAgICBjbGVhckNhY2hlKCk6IHZvaWQge1xuICAgICAgY29uc29sZS5sb2coJ1tERUJVRy1FWEVSQ0lTRV0gQ2xlYXJpbmcgZXhlcmNpc2UgY2FjaGUnKTtcbiAgICAgIHRoaXMuX2FsbEV4ZXJjaXNlcyA9IFtdO1xuICAgICAgdGhpcy5leGVyY2lzZUNhY2hlLmNsZWFyKCk7XG4gICAgfVxuICBcbiAgICBnZW5lcmF0ZUV4ZXJjaXNlSWQoKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IG5ld0lkID0gZG9jKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZXMnKSkuaWQ7XG4gICAgICBjb25zb2xlLmxvZygnW0RFQlVHLUVYRVJDSVNFXSBHZW5lcmF0ZWQgZXhlcmNpc2UgSUQ6JywgbmV3SWQpO1xuICAgICAgcmV0dXJuIG5ld0lkO1xuICAgIH1cbiAgXG4gICAgZ2VuZXJhdGVFeGVyY2lzZVZpZGVvSWQoKTogc3RyaW5nIHtcbiAgICAgIGNvbnN0IG5ld0lkID0gZG9jKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZVZpZGVvcycpKS5pZDtcbiAgICAgIGNvbnNvbGUubG9nKCdbREVCVUctRVhFUkNJU0VdIEdlbmVyYXRlZCBleGVyY2lzZSB2aWRlbyBJRDonLCBuZXdJZCk7XG4gICAgICByZXR1cm4gbmV3SWQ7XG4gICAgfVxuICAgIFxuICAgIC8vIFZlcmlmeSBpZiBhbiBleGVyY2lzZSBleGlzdHMgaW4gRmlyZXN0b3JlIGJ5IGl0cyBJRCBmaWVsZFxuICAgIGFzeW5jIHZlcmlmeUV4ZXJjaXNlRXhpc3RzKGV4ZXJjaXNlSWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tERUJVRy1FWEVSQ0lTRV0gVmVyaWZ5aW5nIGlmIGV4ZXJjaXNlIGV4aXN0cyBieSBJRDonLCBleGVyY2lzZUlkKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFF1ZXJ5IGZvciBkb2N1bWVudHMgd2l0aCB0aGlzIElEIGZpZWxkXG4gICAgICAgIGNvbnN0IGV4ZXJjaXNlc1JlZiA9IGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZXMnKTtcbiAgICAgICAgY29uc3QgcSA9IHF1ZXJ5KGV4ZXJjaXNlc1JlZiwgd2hlcmUoJ2lkJywgJz09JywgZXhlcmNpc2VJZCkpO1xuICAgICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGV4aXN0cyA9ICFxdWVyeVNuYXBzaG90LmVtcHR5O1xuICAgICAgICBjb25zb2xlLmxvZygnW0RFQlVHLUVYRVJDSVNFXSBFeGVyY2lzZSB2ZXJpZmljYXRpb24gYnkgSUQgcmVzdWx0OicsIHtcbiAgICAgICAgICBleGlzdHMsXG4gICAgICAgICAgaWQ6IGV4ZXJjaXNlSWQsXG4gICAgICAgICAgbWF0Y2hDb3VudDogcXVlcnlTbmFwc2hvdC5zaXplXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGV4aXN0cztcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tERUJVRy1FWEVSQ0lTRV0gRXJyb3IgdmVyaWZ5aW5nIGV4ZXJjaXNlIGJ5IElEOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBWZXJpZnkgaWYgYW4gZXhlcmNpc2UgZXhpc3RzIGluIEZpcmVzdG9yZSBieSBuYW1lIChkb2N1bWVudCBJRClcbiAgICBhc3luYyB2ZXJpZnlFeGVyY2lzZUV4aXN0c0J5TmFtZShleGVyY2lzZU5hbWU6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgY29uc29sZS5sb2coYFtERUJVRy1FWEVSQ0lTRV0gVmVyaWZ5aW5nIGlmIGV4ZXJjaXNlIGV4aXN0cyBieSBuYW1lOiAke2V4ZXJjaXNlTmFtZX1gKTtcbiAgICAgIFxuICAgICAgLy8gRW5zdXJlIGNvbnNpc3RlbnQgY2FwaXRhbGl6YXRpb25cbiAgICAgIGNvbnN0IGZvcm1hdHRlZE5hbWUgPSBmb3JtYXRFeGVyY2lzZU5hbWVGb3JJZChleGVyY2lzZU5hbWUpO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBleGVyY2lzZVJlZiA9IGRvYyhkYiwgJ2V4ZXJjaXNlcycsIGZvcm1hdHRlZE5hbWUpO1xuICAgICAgICBjb25zdCBleGVyY2lzZURvYyA9IGF3YWl0IGdldERvYyhleGVyY2lzZVJlZik7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHLUVYRVJDSVNFXSBFeGVyY2lzZSB2ZXJpZmljYXRpb24gYnkgbmFtZSByZXN1bHQ6IHtleGlzdHM6ICR7ZXhlcmNpc2VEb2MuZXhpc3RzKCl9LCBuYW1lOiAnJHtmb3JtYXR0ZWROYW1lLnRvTG93ZXJDYXNlKCl9JywgZGF0YTogJHtleGVyY2lzZURvYy5leGlzdHMoKSA/ICdleGlzdHMnIDogJ251bGwnfX1gKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBleGVyY2lzZURvYy5leGlzdHMoKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFtERUJVRy1FWEVSQ0lTRV0gRXJyb3IgdmVyaWZ5aW5nIGV4ZXJjaXNlOiAke2Vycm9yfWApO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEdldCBhbiBleGVyY2lzZSBieSBpdHMgbmFtZVxuICAgIGFzeW5jIGdldEV4ZXJjaXNlQnlOYW1lKGV4ZXJjaXNlTmFtZTogc3RyaW5nKTogUHJvbWlzZTxFeGVyY2lzZSB8IG51bGw+IHtcbiAgICAgIGNvbnNvbGUubG9nKGBbREVCVUctRVhFUkNJU0VdIEdldHRpbmcgZXhlcmNpc2UgYnkgbmFtZTogJHtleGVyY2lzZU5hbWV9YCk7XG4gICAgICBcbiAgICAgIC8vIEVuc3VyZSBjb25zaXN0ZW50IGNhcGl0YWxpemF0aW9uXG4gICAgICBjb25zdCBmb3JtYXR0ZWROYW1lID0gZm9ybWF0RXhlcmNpc2VOYW1lRm9ySWQoZXhlcmNpc2VOYW1lKTtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gQ2hlY2sgY2FjaGUgZmlyc3RcbiAgICAgICAgaWYgKHRoaXMuZXhlcmNpc2VDYWNoZS5oYXMoZm9ybWF0dGVkTmFtZSkpIHtcbiAgICAgICAgICBjb25zdCBjYWNoZWRFeGVyY2lzZSA9IHRoaXMuZXhlcmNpc2VDYWNoZS5nZXQoZm9ybWF0dGVkTmFtZSk7XG4gICAgICAgICAgY29uc29sZS5sb2coYFtERUJVRy1FWEVSQ0lTRV0gRm91bmQgZXhlcmNpc2UgaW4gY2FjaGU6ICR7Zm9ybWF0dGVkTmFtZX1gKTtcbiAgICAgICAgICByZXR1cm4gY2FjaGVkRXhlcmNpc2UhO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBVc2UgdGhlIGZvcm1hdHRlZCBuYW1lIGFzIGRvY3VtZW50IElEXG4gICAgICAgIGNvbnN0IGV4ZXJjaXNlUmVmID0gZG9jKGRiLCAnZXhlcmNpc2VzJywgZm9ybWF0dGVkTmFtZSk7XG4gICAgICAgIGNvbnN0IGV4ZXJjaXNlRG9jID0gYXdhaXQgZ2V0RG9jKGV4ZXJjaXNlUmVmKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghZXhlcmNpc2VEb2MuZXhpc3RzKCkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHLUVYRVJDSVNFXSBObyBleGVyY2lzZSBmb3VuZCB3aXRoIG5hbWU6ICR7Zm9ybWF0dGVkTmFtZS50b0xvd2VyQ2FzZSgpfWApO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBleGVyY2lzZURhdGEgPSBleGVyY2lzZURvYy5kYXRhKCk7XG4gICAgICAgIGNvbnN0IGV4ZXJjaXNlID0gbmV3IEV4ZXJjaXNlKGV4ZXJjaXNlRGF0YSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDYWNoZSB0aGUgcmVzdWx0XG4gICAgICAgIHRoaXMuZXhlcmNpc2VDYWNoZS5zZXQoZm9ybWF0dGVkTmFtZSwgZXhlcmNpc2UpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGV4ZXJjaXNlO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgW0RFQlVHLUVYRVJDSVNFXSBFcnJvciBnZXR0aW5nIGV4ZXJjaXNlIGJ5IG5hbWU6ICR7ZXJyb3J9YCk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhlbHBlciBmdW5jdGlvbiBmb3IgY2FwaXRhbGl6aW5nIGV4ZXJjaXNlIG5hbWVzXG4gICAgcHJpdmF0ZSBjYXBpdGFsaXplRXhlcmNpc2VOYW1lKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICBpZiAoIW5hbWUpIHJldHVybiAnJztcbiAgICAgIC8vIENhcGl0YWxpemUgZWFjaCB3b3JkIGluIHRoZSBleGVyY2lzZSBuYW1lXG4gICAgICByZXR1cm4gbmFtZVxuICAgICAgICAuc3BsaXQoJyAnKVxuICAgICAgICAubWFwKHdvcmQgPT4gd29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmQuc2xpY2UoMSkudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgLmpvaW4oJyAnKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgZXhlcmNpc2UgZG9jdW1lbnQgaW4gRmlyZXN0b3JlXG4gICAgYXN5bmMgY3JlYXRlRXhlcmNpc2UoZXhlcmNpc2U6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgY29uc29sZS5sb2coYFtERUJVRy1FWEVSQ0lTRV0gQ3JlYXRpbmcgbmV3IGV4ZXJjaXNlOmAsIGV4ZXJjaXNlKTtcbiAgICAgIFxuICAgICAgLy8gRW5zdXJlIGNvbnNpc3RlbnQgY2FwaXRhbGl6YXRpb24gZm9yIHRoZSBleGVyY2lzZSBuYW1lXG4gICAgICBjb25zdCBmb3JtYXR0ZWROYW1lID0gZm9ybWF0RXhlcmNpc2VOYW1lRm9ySWQoZXhlcmNpc2UubmFtZSk7XG4gICAgICBjb25zb2xlLmxvZyhgW0RFQlVHLUVYRVJDSVNFXSBDYXBpdGFsaXplZCBleGVyY2lzZSBuYW1lOiAke2Zvcm1hdHRlZE5hbWV9YCk7XG4gICAgICBcbiAgICAgIC8vIFVzZSB0aGUgZm9ybWF0dGVkIG5hbWUgYXMgZG9jdW1lbnQgSURcbiAgICAgIGNvbnNvbGUubG9nKGBbREVCVUctRVhFUkNJU0VdIFVzaW5nIGV4ZXJjaXNlIG5hbWUgYXMgZG9jdW1lbnQgSUQ6ICR7Zm9ybWF0dGVkTmFtZX1gKTtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBleGVyY2lzZSBkb2N1bWVudCB3aXRoIHRoZSBuYW1lIGFzIElEIChjb25zaXN0ZW50bHkgY2FwaXRhbGl6ZWQpXG4gICAgICAgIGNvbnN0IGV4ZXJjaXNlUmVmID0gZG9jKGRiLCAnZXhlcmNpc2VzJywgZm9ybWF0dGVkTmFtZSk7XG4gICAgICAgIGF3YWl0IHNldERvYyhleGVyY2lzZVJlZiwgeyAuLi5leGVyY2lzZSwgbmFtZTogZm9ybWF0dGVkTmFtZSB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGBbREVCVUctRVhFUkNJU0VdIEV4ZXJjaXNlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IHdpdGggZG9jdW1lbnQgSUQ6ICR7Zm9ybWF0dGVkTmFtZX1gKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENsZWFyIGNhY2hlIGFmdGVyIGNyZWF0aW5nXG4gICAgICAgIHRoaXMuY2xlYXJDYWNoZSgpO1xuICAgICAgICBcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFtERUJVRy1FWEVSQ0lTRV0gRXJyb3IgY3JlYXRpbmcgZXhlcmNpc2U6ICR7ZXJyb3J9YCk7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhIG5ldyBleGVyY2lzZSB2aWRlbyBkb2N1bWVudCBpbiBGaXJlc3RvcmVcbiAgICBhc3luYyBjcmVhdGVFeGVyY2lzZVZpZGVvKHZpZGVvOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgIGNvbnNvbGUubG9nKGBbREVCVUctRVhFUkNJU0VdIENyZWF0aW5nIG5ldyBleGVyY2lzZSB2aWRlbzpgLCB2aWRlbyk7XG4gICAgICBcbiAgICAgIC8vIEVuc3VyZSBjb25zaXN0ZW50IGNhcGl0YWxpemF0aW9uIGZvciB0aGUgZXhlcmNpc2UgbmFtZVxuICAgICAgY29uc3QgZm9ybWF0dGVkRXhlcmNpc2VOYW1lID0gZm9ybWF0RXhlcmNpc2VOYW1lRm9ySWQodmlkZW8uZXhlcmNpc2UpO1xuICAgICAgY29uc29sZS5sb2coYFtERUJVRy1FWEVSQ0lTRV0gQ2FwaXRhbGl6ZWQgZXhlcmNpc2UgbmFtZSBpbiB2aWRlbzogJHtmb3JtYXR0ZWRFeGVyY2lzZU5hbWV9YCk7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgZXhlcmNpc2UgdmlkZW8gZG9jdW1lbnRcbiAgICAgICAgY29uc3QgZXhlcmNpc2VWaWRlb1JlZiA9IGRvYyhkYiwgJ2V4ZXJjaXNlVmlkZW9zJywgdmlkZW8uaWQpO1xuICAgICAgICBhd2FpdCBzZXREb2MoZXhlcmNpc2VWaWRlb1JlZiwgeyAuLi52aWRlbywgZXhlcmNpc2U6IGZvcm1hdHRlZEV4ZXJjaXNlTmFtZSB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGBbREVCVUctRVhFUkNJU0VdIEV4ZXJjaXNlIHZpZGVvIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5OiAke3ZpZGVvLmlkfWApO1xuICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHLUVYRVJDSVNFXSBFeGVyY2lzZSB2aWRlbyBsaW5rZWQgdG8gZXhlcmNpc2UgZG9jdW1lbnQ6ICR7Zm9ybWF0dGVkRXhlcmNpc2VOYW1lfWApO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2xlYXIgY2FjaGUgYWZ0ZXIgY3JlYXRpbmdcbiAgICAgICAgdGhpcy5jbGVhckNhY2hlKCk7XG4gICAgICAgIFxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgW0RFQlVHLUVYRVJDSVNFXSBFcnJvciBjcmVhdGluZyBleGVyY2lzZSB2aWRlbzogJHtlcnJvcn1gKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGFzeW5jIGZldGNoRXhlcmNpc2VzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tERUJVRy1FWEVSQ0lTRV0gU3RhcnRpbmcgZmV0Y2hFeGVyY2lzZXMgbWV0aG9kJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBGZXRjaCBhbGwgZXhlcmNpc2VzXG4gICAgICAgIGNvbnNvbGUubG9nKCdbREVCVUctRVhFUkNJU0VdIEZldGNoaW5nIGV4ZXJjaXNlcyBmcm9tIEZpcmVzdG9yZScpO1xuICAgICAgICBjb25zdCBleGVyY2lzZVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VzJykpO1xuICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHLUVYRVJDSVNFXSBGZXRjaGVkICR7ZXhlcmNpc2VTbmFwc2hvdC5kb2NzLmxlbmd0aH0gZXhlcmNpc2VzYCk7XG5cbiAgICAgICAgY29uc3QgZXhlcmNpc2VzOiBFeGVyY2lzZVtdID0gZXhlcmNpc2VTbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PiB7XG4gICAgICAgICAgLy8gRG9jdW1lbnQgSUQgaXMgbm93IHRoZSBleGVyY2lzZSBuYW1lLCBidXQgd2Ugc3RpbGwgd2FudCB0byB1c2UgdGhlIGlkIGZpZWxkIGZvciBpbnRlcm5hbCByZWZlcmVuY2VzXG4gICAgICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRW5zdXJlIHRoZSBleGVyY2lzZSBuYW1lIGlzIGNhcGl0YWxpemVkXG4gICAgICAgICAgY29uc3QgY2FwaXRhbGl6ZWROYW1lID0gdGhpcy5jYXBpdGFsaXplRXhlcmNpc2VOYW1lKGRhdGEubmFtZSB8fCBkb2MuaWQpO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiBuZXcgRXhlcmNpc2Uoe1xuICAgICAgICAgICAgLy8gVXNlIHRoZSBpZCBmaWVsZCBmcm9tIHRoZSBkb2N1bWVudCBkYXRhLCBub3QgdGhlIGRvY3VtZW50IElEXG4gICAgICAgICAgICBpZDogZGF0YS5pZCB8fCBkb2MuaWQsXG4gICAgICAgICAgICAvLyBFbnN1cmUgdGhlIG5hbWUgaXMgcHJvcGVybHkgY2FwaXRhbGl6ZWRcbiAgICAgICAgICAgIG5hbWU6IGNhcGl0YWxpemVkTmFtZSxcbiAgICAgICAgICAgIC8vIFJlc3Qgb2YgdGhlIGRhdGFcbiAgICAgICAgICAgIC4uLmRhdGEsXG4gICAgICAgICAgICAvLyBFbnN1cmUgdGhlIG5hbWUgaXMgY29uc2lzdGVudCB3aXRoIHRoZSBkb2N1bWVudCBJRFxuICAgICAgICAgICAgZG9jdW1lbnRJZDogZG9jLmlkXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coJ1tERUJVRy1FWEVSQ0lTRV0gTWFwcGVkIGV4ZXJjaXNlcyBkYXRhIHRvIEV4ZXJjaXNlIG9iamVjdHMnKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tERUJVRy1FWEVSQ0lTRV0gU2FtcGxlIGV4ZXJjaXNlIGRhdGE6JywgZXhlcmNpc2VzLnNsaWNlKDAsIDIpLm1hcChleCA9PiAoe1xuICAgICAgICAgIGlkOiBleC5pZCxcbiAgICAgICAgICBuYW1lOiBleC5uYW1lLFxuICAgICAgICAgIGRvY3VtZW50SWQ6IGV4LmRvY3VtZW50SWQsXG4gICAgICAgICAgY2F0ZWdvcnk6IGV4LmNhdGVnb3J5XG4gICAgICAgIH0pKSk7XG4gICAgXG4gICAgICAgIC8vIEZldGNoIGFsbCB2aWRlb3NcbiAgICAgICAgY29uc29sZS5sb2coJ1tERUJVRy1FWEVSQ0lTRV0gRmV0Y2hpbmcgZXhlcmNpc2UgdmlkZW9zIGZyb20gRmlyZXN0b3JlJyk7XG4gICAgICAgIGNvbnN0IHZpZGVvU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZVZpZGVvcycpKTtcbiAgICAgICAgY29uc29sZS5sb2coYFtERUJVRy1FWEVSQ0lTRV0gRmV0Y2hlZCAke3ZpZGVvU25hcHNob3QuZG9jcy5sZW5ndGh9IGV4ZXJjaXNlIHZpZGVvc2ApO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZXhlcmNpc2VWaWRlb3M6IEV4ZXJjaXNlVmlkZW9bXSA9IHZpZGVvU25hcHNob3QuZG9jcy5tYXAoKGRvYykgPT4ge1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEVuc3VyZSBleGVyY2lzZSBuYW1lIGluIHZpZGVvIGlzIGNhcGl0YWxpemVkXG4gICAgICAgICAgY29uc3QgY2FwaXRhbGl6ZWRFeGVyY2lzZU5hbWUgPSB0aGlzLmNhcGl0YWxpemVFeGVyY2lzZU5hbWUoZGF0YS5leGVyY2lzZSB8fCAnJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIG5ldyBFeGVyY2lzZVZpZGVvKHtcbiAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICAuLi5kYXRhLFxuICAgICAgICAgICAgLy8gRW5zdXJlIGV4ZXJjaXNlIG5hbWUgaXMgcHJvcGVybHkgY2FwaXRhbGl6ZWRcbiAgICAgICAgICAgIGV4ZXJjaXNlOiBjYXBpdGFsaXplZEV4ZXJjaXNlTmFtZSxcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSBleGVyY2lzZUlkIGlzIHByb3Blcmx5IHNldCBpZiBpdCdzIG1pc3Npbmcgb3IgaW5jb3JyZWN0XG4gICAgICAgICAgICBleGVyY2lzZUlkOiBkYXRhLmV4ZXJjaXNlSWQgfHwgZGF0YS5leGVyY2lzZT8udG9Mb3dlckNhc2UoKSB8fCAnJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKCdbREVCVUctRVhFUkNJU0VdIE1hcHBlZCB2aWRlbyBkYXRhIHRvIEV4ZXJjaXNlVmlkZW8gb2JqZWN0cycpO1xuICAgICAgICBjb25zb2xlLmxvZygnW0RFQlVHLUVYRVJDSVNFXSBTYW1wbGUgdmlkZW8gZGF0YTonLCBleGVyY2lzZVZpZGVvcy5zbGljZSgwLCAyKS5tYXAodmlkZW8gPT4gKHtcbiAgICAgICAgICBpZDogdmlkZW8uaWQsXG4gICAgICAgICAgZXhlcmNpc2VJZDogdmlkZW8uZXhlcmNpc2VJZCxcbiAgICAgICAgICBleGVyY2lzZTogdmlkZW8uZXhlcmNpc2UsXG4gICAgICAgICAgdmlkZW9VUkw6IHZpZGVvLnZpZGVvVVJMID8gJ0hhcyBVUkwnIDogJ05vIFVSTCdcbiAgICAgICAgfSkpKTtcbiAgICBcbiAgICAgICAgLy8gTWFwIHZpZGVvcyB0byB0aGVpciBjb3JyZXNwb25kaW5nIGV4ZXJjaXNlcyBieSBtYXRjaGluZyBleGVyY2lzZUlkIHRvIGRvY3VtZW50IElEXG4gICAgICAgIGNvbnNvbGUubG9nKCdbREVCVUctRVhFUkNJU0VdIE1hcHBpbmcgdmlkZW9zIHRvIGV4ZXJjaXNlcyBieSBleGVyY2lzZUlkJyk7XG4gICAgICAgIGNvbnN0IG1hcHBlZEV4ZXJjaXNlcyA9IGV4ZXJjaXNlcy5tYXAoKGV4ZXJjaXNlKSA9PiB7XG4gICAgICAgICAgLy8gRmluZCB2aWRlb3Mgd2hlcmUgZXhlcmNpc2VJZCBtYXRjaGVzIHRoZSBkb2N1bWVudCBJRCAobmFtZSkgb2YgdGhlIGV4ZXJjaXNlXG4gICAgICAgICAgY29uc3QgdmlkZW9zRm9yRXhlcmNpc2UgPSBleGVyY2lzZVZpZGVvc1xuICAgICAgICAgICAgLmZpbHRlcigodmlkZW8pID0+IHtcbiAgICAgICAgICAgICAgLy8gTWF0Y2ggYnkgdGhlIG5hbWUgKGRvY3VtZW50IElEKSBpbnN0ZWFkIG9mIHRoZSBpbnRlcm5hbCBJRCBmaWVsZFxuICAgICAgICAgICAgICAvLyBEbyBjYXNlLWluc2Vuc2l0aXZlIG1hdGNoaW5nXG4gICAgICAgICAgICAgIGNvbnN0IG1hdGNoQnlOYW1lID0gdmlkZW8uZXhlcmNpc2VJZCA9PT0gZXhlcmNpc2UubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICBjb25zdCBtYXRjaEJ5RXhlcmNpc2VJZCA9IHZpZGVvLmV4ZXJjaXNlSWQgPT09IGV4ZXJjaXNlLmRvY3VtZW50SWQ7XG4gICAgICAgICAgICAgIGNvbnN0IG1hdGNoQnlFeGVyY2lzZU5hbWUgPSB2aWRlby5leGVyY2lzZS50b0xvd2VyQ2FzZSgpID09PSBleGVyY2lzZS5uYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpZiAobWF0Y2hCeU5hbWUgfHwgbWF0Y2hCeUV4ZXJjaXNlSWQgfHwgbWF0Y2hCeUV4ZXJjaXNlTmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBMb2cgYW55IHBvdGVudGlhbCBtaXNtYXRjaGVzIGZvciBkZWJ1Z2dpbmdcbiAgICAgICAgICAgICAgaWYgKHZpZGVvLmV4ZXJjaXNlLnRvTG93ZXJDYXNlKCkgPT09IGV4ZXJjaXNlLm5hbWUudG9Mb3dlckNhc2UoKSAmJiBcbiAgICAgICAgICAgICAgICAgIHZpZGVvLmV4ZXJjaXNlSWQgIT09IGV4ZXJjaXNlLm5hbWUudG9Mb3dlckNhc2UoKSAmJlxuICAgICAgICAgICAgICAgICAgdmlkZW8uZXhlcmNpc2VJZCAhPT0gZXhlcmNpc2UuZG9jdW1lbnRJZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbREVCVUctRVhFUkNJU0VdIFBvdGVudGlhbCBtaXNtYXRjaDogVmlkZW8gXCIke3ZpZGVvLmlkfVwiIGhhcyBuYW1lIHRoYXQgbWF0Y2hlcyBcIiR7ZXhlcmNpc2UubmFtZX1cIiBidXQgZXhlcmNpc2VJZCBcIiR7dmlkZW8uZXhlcmNpc2VJZH1cIiBkb2Vzbid0IG1hdGNoIGRvY3VtZW50SWQgXCIke2V4ZXJjaXNlLmRvY3VtZW50SWR9XCJgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5tYXAoKHZpZGVvKSA9PiBuZXcgRXhlcmNpc2VWaWRlbyh7XG4gICAgICAgICAgICAgIC4uLnZpZGVvLFxuICAgICAgICAgICAgICAvLyBFbnN1cmUgZXhlcmNpc2UgbmFtZSBpcyBwcm9wZXJseSBjYXBpdGFsaXplZFxuICAgICAgICAgICAgICBleGVyY2lzZTogdGhpcy5jYXBpdGFsaXplRXhlcmNpc2VOYW1lKHZpZGVvLmV4ZXJjaXNlKVxuICAgICAgICAgICAgfSkpOyAvLyBFbnN1cmUgcHJvcGVyIEV4ZXJjaXNlVmlkZW8gaW5zdGFuY2VzXG4gICAgICAgICAgXG4gICAgICAgICAgY29uc29sZS5sb2coYFtERUJVRy1FWEVSQ0lTRV0gRXhlcmNpc2UgXCIke2V4ZXJjaXNlLm5hbWV9XCIgbWF0Y2hlZCB3aXRoICR7dmlkZW9zRm9yRXhlcmNpc2UubGVuZ3RofSB2aWRlb3NgKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiBuZXcgRXhlcmNpc2Uoe1xuICAgICAgICAgICAgLi4uZXhlcmNpc2UsIC8vIEtlZXAgZXhpc3RpbmcgcHJvcGVydGllc1xuICAgICAgICAgICAgdmlkZW9zOiB2aWRlb3NGb3JFeGVyY2lzZSwgLy8gRW5zdXJlIHZpZGVvcyBhcmUgaW5zdGFuY2VzIG9mIEV4ZXJjaXNlVmlkZW9cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIC8vIEZpbHRlciBvdXQgZXhlcmNpc2VzIHdpdGhvdXQgdmlkZW9zXG4gICAgICAgIHRoaXMuX2FsbEV4ZXJjaXNlcyA9IG1hcHBlZEV4ZXJjaXNlcy5maWx0ZXIoKGV4ZXJjaXNlOiBFeGVyY2lzZSkgPT4gZXhlcmNpc2UudmlkZW9zLmxlbmd0aCA+IDApO1xuICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHLUVYRVJDSVNFXSBGaW5hbCByZXN1bHQ6ICR7dGhpcy5fYWxsRXhlcmNpc2VzLmxlbmd0aH0gZXhlcmNpc2VzIHdpdGggdmlkZW9zYCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbREVCVUctRVhFUkNJU0VdIFNhbXBsZSBmcm9tIGZpbmFsIHJlc3VsdDonLCB0aGlzLl9hbGxFeGVyY2lzZXMuc2xpY2UoMCwgMykubWFwKGV4ID0+ICh7XG4gICAgICAgICAgaWQ6IGV4LmlkLFxuICAgICAgICAgIG5hbWU6IGV4Lm5hbWUsXG4gICAgICAgICAgdmlkZW9Db3VudDogZXgudmlkZW9zLmxlbmd0aCxcbiAgICAgICAgfSkpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBGZXRjaGVkICR7dGhpcy5fYWxsRXhlcmNpc2VzLmxlbmd0aH0gZXhlcmNpc2VzIHdpdGggdmlkZW9zLmApO1xuICAgICAgICBcbiAgICAgICAgLy8gRGV0YWlsZWQgbG9nZ2luZyBmb3IgZGVidWdnaW5nXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdTYW1wbGUgZXhlcmNpc2VzOicsIHRoaXMuX2FsbEV4ZXJjaXNlcy5zbGljZSgwLCA1KS5tYXAoZXggPT4gKHtcbiAgICAgICAgLy8gICBuYW1lOiBleC5uYW1lLFxuICAgICAgICAvLyAgIHZpZGVvQ291bnQ6IGV4LnZpZGVvcy5sZW5ndGgsXG4gICAgICAgIC8vICAgZmlyc3RWaWRlb1VybDogZXgudmlkZW9zWzBdPy52aWRlb1VSTFxuICAgICAgICAvLyB9KSkpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW0RFQlVHLUVYRVJDSVNFXSBFcnJvciBmZXRjaGluZyBleGVyY2lzZXM6JywgZXJyb3IpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbREVCVUctRVhFUkNJU0VdIEVycm9yIGRldGFpbHM6Jywge1xuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgIG5hbWU6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5uYW1lIDogJ1Vua25vd24gdHlwZScsXG4gICAgICAgICAgc3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6ICdObyBzdGFjayB0cmFjZSdcbiAgICAgICAgfSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIGV4ZXJjaXNlcy4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBmZXRjaEZlYXR1cmVkRXhlcmNpc2VzV2l0aFZpZGVvcyhsaW1pdDogbnVtYmVyID0gMjQpOiBQcm9taXNlPEV4ZXJjaXNlW10+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEZldGNoIGFsbCBleGVyY2lzZXNcbiAgICAgICAgY29uc3QgZXhlcmNpc2VTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlcycpKTtcbiAgICAgICAgY29uc3QgZXhlcmNpc2VzOiBFeGVyY2lzZVtdID0gZXhlcmNpc2VTbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PiBcbiAgICAgICAgIG5ldyBFeGVyY2lzZSh7XG4gICAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgICAgLi4uZG9jLmRhdGEoKSxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIFxuICAgICAgICAvLyBGZXRjaCBhbGwgdmlkZW9zXG4gICAgICAgIGNvbnN0IHZpZGVvU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZVZpZGVvcycpKTtcbiAgICAgICAgY29uc3QgZXhlcmNpc2VWaWRlb3M6IEV4ZXJjaXNlVmlkZW9bXSA9IHZpZGVvU25hcHNob3QuZG9jcy5tYXAoKGRvYykgPT5cbiAgICAgICAgICBuZXcgRXhlcmNpc2VWaWRlbyh7XG4gICAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgICAgLi4uZG9jLmRhdGEoKSxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIFxuICAgICAgICAvLyBNYXAgdmlkZW9zIHRvIGV4ZXJjaXNlcyBhbmQgZmlsdGVyIGZvciB0aG9zZSB3aXRoIEdJRnNcbiAgICAgICAgY29uc3QgbWFwcGVkRXhlcmNpc2VzID0gZXhlcmNpc2VzLm1hcCgoZXhlcmNpc2VEYXRhKSA9PiB7XG4gICAgICAgICAgLy8gRW5zdXJlIHRoYXQgZWFjaCB2aWRlbyBpcyBwcm9wZXJseSBpbnN0YW50aWF0ZWQgYXMgYW4gYEV4ZXJjaXNlVmlkZW9gXG4gICAgICAgICAgY29uc3QgdmlkZW9zRm9yRXhlcmNpc2UgPSAoZXhlcmNpc2VWaWRlb3NcbiAgICAgICAgICAgIC5maWx0ZXIoKHZpZGVvKSA9PiB2aWRlby5leGVyY2lzZS50b0xvd2VyQ2FzZSgpID09PSBleGVyY2lzZURhdGEubmFtZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgICAgLm1hcCgodmlkZW8pID0+IG5ldyBFeGVyY2lzZVZpZGVvKHZpZGVvKSkpIGFzIEV4ZXJjaXNlVmlkZW9bXTtcbiAgICAgICAgXG5cbiAgICAgICAgICByZXR1cm4gbmV3IEV4ZXJjaXNlKHtcbiAgICAgICAgICAgIGlkOiBleGVyY2lzZURhdGEuaWQsXG4gICAgICAgICAgICBuYW1lOiBleGVyY2lzZURhdGEubmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBleGVyY2lzZURhdGEuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBjYXRlZ29yeTogZXhlcmNpc2VEYXRhLmNhdGVnb3J5LFxuICAgICAgICAgICAgcHJpbWFyeUJvZHlQYXJ0czogZXhlcmNpc2VEYXRhLnByaW1hcnlCb2R5UGFydHMgfHwgW10sXG4gICAgICAgICAgICBzZWNvbmRhcnlCb2R5UGFydHM6IGV4ZXJjaXNlRGF0YS5zZWNvbmRhcnlCb2R5UGFydHMgfHwgW10sXG4gICAgICAgICAgICB0YWdzOiBleGVyY2lzZURhdGEudGFncyB8fCBbXSxcbiAgICAgICAgICAgIHZpZGVvczogdmlkZW9zRm9yRXhlcmNpc2UsIC8vIEF0dGFjaCBwcm9wZXJseSBtYXBwZWQgdmlkZW9zXG4gICAgICAgICAgICBzdGVwczogZXhlcmNpc2VEYXRhLnN0ZXBzIHx8IFtdLFxuICAgICAgICAgICAgdmlzaWJpbGl0eTogZXhlcmNpc2VEYXRhLnZpc2liaWxpdHkgfHwgJ2xpdmUnLFxuICAgICAgICAgICAgY3VycmVudFZpZGVvUG9zaXRpb246IGV4ZXJjaXNlRGF0YS5jdXJyZW50VmlkZW9Qb3NpdGlvbiB8fCAwLFxuICAgICAgICAgICAgc2V0czogZXhlcmNpc2VEYXRhLnNldHMgfHwgMCxcbiAgICAgICAgICAgIHJlcHM6IGV4ZXJjaXNlRGF0YS5yZXBzIHx8ICcnLFxuICAgICAgICAgICAgd2VpZ2h0OiBleGVyY2lzZURhdGEud2VpZ2h0IHx8IDAsXG4gICAgICAgICAgICBhdXRob3I6IG5ldyBFeGVyY2lzZUF1dGhvcihleGVyY2lzZURhdGEuYXV0aG9yIHx8IHt9KSxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChleGVyY2lzZURhdGEuY3JlYXRlZEF0KSxcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChleGVyY2lzZURhdGEudXBkYXRlZEF0KSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgIFxuICAgICAgICAvLyBTaHVmZmxlIGFuZCBsaW1pdCByZXN1bHRzXG4gICAgICAgIGNvbnN0IHNodWZmbGVkRXhlcmNpc2VzID0gbWFwcGVkRXhlcmNpc2VzXG4gICAgICAgICAgLnNvcnQoKCkgPT4gTWF0aC5yYW5kb20oKSAtIDAuNSlcbiAgICAgICAgICAuc2xpY2UoMCwgbGltaXQpO1xuICAgIFxuICAgICAgICByZXR1cm4gc2h1ZmZsZWRFeGVyY2lzZXM7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBmZWF0dXJlZCBleGVyY2lzZXM6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0RXhlcmNpc2VzQnlBdXRob3IodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPEV4ZXJjaXNlW10+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFF1ZXJ5IGV4ZXJjaXNlVmlkZW9zIGNvbGxlY3Rpb24gaW5zdGVhZFxuICAgICAgICBjb25zdCB2aWRlb3NSZWYgPSBjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VWaWRlb3MnKTtcbiAgICAgICAgY29uc3QgcSA9IHF1ZXJ5KHZpZGVvc1JlZiwgd2hlcmUoJ3VzZXJJZCcsICc9PScsIHVzZXJJZCkpO1xuICAgICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBhIFNldCB0byBzdG9yZSB1bmlxdWUgZXhlcmNpc2UgbmFtZXNcbiAgICAgICAgY29uc3QgdW5pcXVlRXhlcmNpc2VOYW1lcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ29sbGVjdCBhbGwgdW5pcXVlIGV4ZXJjaXNlIG5hbWVzIGZyb20gdGhlIHZpZGVvc1xuICAgICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGRvYykgPT4ge1xuICAgICAgICAgIGNvbnN0IHZpZGVvRGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICAgICAgaWYgKHZpZGVvRGF0YS5leGVyY2lzZU5hbWUpIHtcbiAgICAgICAgICAgIHVuaXF1ZUV4ZXJjaXNlTmFtZXMuYWRkKHZpZGVvRGF0YS5leGVyY2lzZU5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gIFxuICAgICAgICAvLyBDb252ZXJ0IHRvIGFycmF5IGFuZCBjcmVhdGUgRXhlcmNpc2Ugb2JqZWN0c1xuICAgICAgICBjb25zdCBleGVyY2lzZXMgPSBBcnJheS5mcm9tKHVuaXF1ZUV4ZXJjaXNlTmFtZXMpLm1hcChuYW1lID0+IHtcbiAgICAgICAgICByZXR1cm4gbmV3IEV4ZXJjaXNlKHtcbiAgICAgICAgICAgIGlkOiBuYW1lLCAvLyBVc2luZyBuYW1lIGFzIElEIHNpbmNlIHdlIGp1c3QgbmVlZCB1bmlxdWUgaWRlbnRpZmllcnNcbiAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICBhdXRob3I6IHsgdXNlcklkOiB1c2VySWQgfVxuICAgICAgICAgICAgLy8gQWRkIG90aGVyIHJlcXVpcmVkIEV4ZXJjaXNlIHByb3BlcnRpZXMgYXMgbmVlZGVkXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGV4ZXJjaXNlcztcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGV4ZXJjaXNlcyBieSBhdXRob3I6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZmV0Y2hQYWdpbmF0ZWRFeGVyY2lzZXMoXG4gICAgICAgIGxhc3REb2M6IERvY3VtZW50U25hcHNob3QgfCBudWxsID0gbnVsbCxcbiAgICAgICAgcGFnZVNpemU6IG51bWJlciA9IDE1XG4gICAgICApOiBQcm9taXNlPHsgZXhlcmNpc2VzOiBFeGVyY2lzZVtdOyBsYXN0VmlzaWJsZTogRG9jdW1lbnRTbmFwc2hvdCB8IG51bGwgfT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFF1ZXJ5IGZvciBleGVyY2lzZXMgd2l0aCBwYWdpbmF0aW9uXG4gICAgICAgICAgbGV0IGV4ZXJjaXNlUXVlcnkgPSBxdWVyeShcbiAgICAgICAgICAgIGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZXMnKSxcbiAgICAgICAgICAgIG9yZGVyQnkoJ2NyZWF0ZWRBdCcsICdkZXNjJyksXG4gICAgICAgICAgICBsaW1pdChwYWdlU2l6ZSlcbiAgICAgICAgICApO1xuICAgIFxuICAgICAgICAgIGlmIChsYXN0RG9jKSB7XG4gICAgICAgICAgICBleGVyY2lzZVF1ZXJ5ID0gcXVlcnkoZXhlcmNpc2VRdWVyeSwgc3RhcnRBZnRlcihsYXN0RG9jKSk7XG4gICAgICAgICAgfVxuICAgIFxuICAgICAgICAgIGNvbnN0IGV4ZXJjaXNlU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGV4ZXJjaXNlUXVlcnkpO1xuICAgIFxuICAgICAgICAgIGlmIChleGVyY2lzZVNuYXBzaG90LmVtcHR5KSB7XG4gICAgICAgICAgICByZXR1cm4geyBleGVyY2lzZXM6IFtdLCBsYXN0VmlzaWJsZTogbnVsbCB9O1xuICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAvLyBGZXRjaCBleGVyY2lzZSB2aWRlb3Mgc2VwYXJhdGVseVxuICAgICAgICAgIGNvbnN0IHZpZGVvU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZVZpZGVvcycpKTtcbiAgICAgICAgICBjb25zdCBleGVyY2lzZVZpZGVvczogRXhlcmNpc2VWaWRlb1tdID0gdmlkZW9TbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PlxuICAgICAgICAgICAgbmV3IEV4ZXJjaXNlVmlkZW8oe1xuICAgICAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgICAgICAuLi5kb2MuZGF0YSgpLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGV4ZXJjaXNlczogRXhlcmNpc2VbXSA9IGV4ZXJjaXNlU25hcHNob3QuZG9jcy5tYXAoKGRvYykgPT5cbiAgICAgICAgICAgIG5ldyBFeGVyY2lzZSh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSlcbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIE1hcCB2aWRlb3MgdG8gZXhlcmNpc2VzIGFuZCBlbnN1cmUgY29ycmVjdCBpbnN0YW50aWF0aW9uXG4gICAgICAgICAgY29uc3QgbWFwcGVkRXhlcmNpc2VzOiBFeGVyY2lzZVtdID0gZXhlcmNpc2VzLm1hcCgoZXhlcmNpc2VEYXRhKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2aWRlb3NGb3JFeGVyY2lzZSA9IGV4ZXJjaXNlVmlkZW9zLmZpbHRlcigodmlkZW8pID0+IHZpZGVvLmV4ZXJjaXNlSWQgPT09IGV4ZXJjaXNlRGF0YS5pZCk7XG4gICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gbmV3IEV4ZXJjaXNlKHtcbiAgICAgICAgICAgICAgLi4uZXhlcmNpc2VEYXRhLCAvLyBDb3B5IGV4aXN0aW5nIHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgdmlkZW9zOiB2aWRlb3NGb3JFeGVyY2lzZSwgLy8gQXNzaWduIGZpbHRlcmVkIHZpZGVvc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRmlsdGVyIGV4ZXJjaXNlcyB3aXRoIHZpZGVvc1xuICAgICAgICAgIGNvbnN0IGZpbHRlcmVkRXhlcmNpc2VzOiBFeGVyY2lzZVtdID0gbWFwcGVkRXhlcmNpc2VzLmZpbHRlcigoZXhlcmNpc2UpID0+IGV4ZXJjaXNlLnZpZGVvcy5sZW5ndGggPiAwKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIGxhc3QgdmlzaWJsZSBkb2N1bWVudCBmb3IgcGFnaW5hdGlvblxuICAgICAgICAgIGNvbnN0IGxhc3RWaXNpYmxlID0gZXhlcmNpc2VTbmFwc2hvdC5kb2NzLmxlbmd0aCA+IDAgPyBleGVyY2lzZVNuYXBzaG90LmRvY3NbZXhlcmNpc2VTbmFwc2hvdC5kb2NzLmxlbmd0aCAtIDFdIDogbnVsbDtcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4geyBleGVyY2lzZXM6IGZpbHRlcmVkRXhlcmNpc2VzLCBsYXN0VmlzaWJsZSB9O1xuICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHBhZ2luYXRlZCBleGVyY2lzZXM6JywgZXJyb3IpO1xuICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGdlbmVyYXRlRXhlcmNpc2VMb2dJRCh3b3Jrb3V0SWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICAvLyBDcmVhdGUgYSBkb2N1bWVudCByZWZlcmVuY2UgaW4gdGhlIGxvZ3Mgc3ViY29sbGVjdGlvbiBvZiB0aGUgd29ya291dCxcbiAgICAgICAgLy8gdGhlbiByZXR1cm4gaXRzIGdlbmVyYXRlZCBJRC5cbiAgICAgICAgcmV0dXJuIGRvYyhcbiAgICAgICAgICBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCB1c2VySWQsICdNeUNyZWF0ZWRXb3Jrb3V0cycsIHdvcmtvdXRJZCwgJ2xvZ3MnKVxuICAgICAgICApLmlkO1xuICAgICAgfVxuXG4gICAgLy8gRGVsZXRlIGEgc3BlY2lmaWMgdmlkZW8gZnJvbSBhbiBleGVyY2lzZVxuICAgIGFzeW5jIGRlbGV0ZVNwZWNpZmljRXhlcmNpc2VWaWRlbyhleGVyY2lzZUlkOiBzdHJpbmcsIHZpZGVvSWQ6IHN0cmluZywgcmVxdWVzdGluZ1VzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHLUVYRVJDSVNFXSBEZWxldGluZyB2aWRlbyAke3ZpZGVvSWR9IGxpbmtlZCB0byBleGVyY2lzZSAke2V4ZXJjaXNlSWR9YCk7XG4gICAgICAgIFxuICAgICAgICAvLyBHZXQgdGhlIHZpZGVvIGRvY3VtZW50IGRpcmVjdGx5IGZyb20gdGhlIGV4ZXJjaXNlVmlkZW9zIGNvbGxlY3Rpb25cbiAgICAgICAgY29uc3QgdmlkZW9SZWYgPSBkb2MoZGIsICdleGVyY2lzZVZpZGVvcycsIHZpZGVvSWQpO1xuICAgICAgICBjb25zdCB2aWRlb0RvYyA9IGF3YWl0IGdldERvYyh2aWRlb1JlZik7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXZpZGVvRG9jLmV4aXN0cygpKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgW0RFQlVHLUVYRVJDSVNFXSBWaWRlbyAke3ZpZGVvSWR9IG5vdCBmb3VuZCBpbiBleGVyY2lzZVZpZGVvcyBjb2xsZWN0aW9uYCk7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdWaWRlbyBub3QgZm91bmQgaW4gZXhlcmNpc2VWaWRlb3MgY29sbGVjdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCB2aWRlb0RhdGEgPSB2aWRlb0RvYy5kYXRhKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBhdXRob3JpemF0aW9uIC0gZW5zdXJlIHRoZSB1c2VyIGlzIHRoZSBjcmVhdG9yIG9mIHRoZSB2aWRlb1xuICAgICAgICBpZiAodmlkZW9EYXRhLnVzZXJJZCAmJiB2aWRlb0RhdGEudXNlcklkICE9PSByZXF1ZXN0aW5nVXNlcklkKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgW0RFQlVHLUVYRVJDSVNFXSBVbmF1dGhvcml6ZWQgZGVsZXRpb24gYXR0ZW1wdC4gVXNlciAke3JlcXVlc3RpbmdVc2VySWR9IGF0dGVtcHRpbmcgdG8gZGVsZXRlIHZpZGVvIGNyZWF0ZWQgYnkgJHt2aWRlb0RhdGEudXNlcklkfWApO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGF1dGhvcml6ZWQgdG8gZGVsZXRlIHRoaXMgdmlkZW8nKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRGVsZXRlIHRoZSB2aWRlbyBmaWxlIGZyb20gc3RvcmFnZSBpZiBpdCBleGlzdHNcbiAgICAgICAgaWYgKHZpZGVvRGF0YS52aWRlb1VSTCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB2aWRlb1N0b3JhZ2VSZWYgPSByZWYoZ2V0U3RvcmFnZSgpLCB2aWRlb0RhdGEudmlkZW9VUkwpO1xuICAgICAgICAgICAgYXdhaXQgZGVsZXRlT2JqZWN0KHZpZGVvU3RvcmFnZVJlZik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHLUVYRVJDSVNFXSBEZWxldGVkIHZpZGVvIGZpbGU6ICR7dmlkZW9EYXRhLnZpZGVvVVJMfWApO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbREVCVUctRVhFUkNJU0VdIEVycm9yIGRlbGV0aW5nIHZpZGVvIGZpbGU6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICAvLyBDb250aW51ZSBldmVuIGlmIGZpbGUgZGVsZXRpb24gZmFpbHNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIERlbGV0ZSB0aGUgR0lGIGZpbGUgZnJvbSBzdG9yYWdlIGlmIGl0IGV4aXN0c1xuICAgICAgICBpZiAodmlkZW9EYXRhLmdpZlVSTCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBnaWZTdG9yYWdlUmVmID0gcmVmKGdldFN0b3JhZ2UoKSwgdmlkZW9EYXRhLmdpZlVSTCk7XG4gICAgICAgICAgICBhd2FpdCBkZWxldGVPYmplY3QoZ2lmU3RvcmFnZVJlZik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHLUVYRVJDSVNFXSBEZWxldGVkIEdJRiBmaWxlOiAke3ZpZGVvRGF0YS5naWZVUkx9YCk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtERUJVRy1FWEVSQ0lTRV0gRXJyb3IgZGVsZXRpbmcgR0lGIGZpbGU6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICAvLyBDb250aW51ZSBldmVuIGlmIGZpbGUgZGVsZXRpb24gZmFpbHNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIERlbGV0ZSB0aGUgdmlkZW8gZG9jdW1lbnQgZnJvbSBGaXJlc3RvcmVcbiAgICAgICAgYXdhaXQgZGVsZXRlRG9jKHZpZGVvUmVmKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGBbREVCVUctRVhFUkNJU0VdIFN1Y2Nlc3NmdWxseSBkZWxldGVkIHZpZGVvICR7dmlkZW9JZH1gKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENsZWFyIGNhY2hlIGFmdGVyIG1vZGlmaWNhdGlvblxuICAgICAgICB0aGlzLmNsZWFyQ2FjaGUoKTtcbiAgICAgICAgXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBbREVCVUctRVhFUkNJU0VdIEVycm9yIGRlbGV0aW5nIHZpZGVvOiAke2Vycm9yfWApO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICB9XG59XG4gIFxuZXhwb3J0IGNvbnN0IGV4ZXJjaXNlU2VydmljZSA9IG5ldyBFeGVyY2lzZVNlcnZpY2UoKTsiXSwibmFtZXMiOlsiY29sbGVjdGlvbiIsImdldERvY3MiLCJxdWVyeSIsIm9yZGVyQnkiLCJsaW1pdCIsInN0YXJ0QWZ0ZXIiLCJkb2MiLCJ3aGVyZSIsImdldERvYyIsInNldERvYyIsImRlbGV0ZURvYyIsImRiIiwiRXhlcmNpc2UiLCJFeGVyY2lzZVZpZGVvIiwiRXhlcmNpc2VBdXRob3IiLCJjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wIiwiZm9ybWF0RXhlcmNpc2VOYW1lRm9ySWQiLCJyZWYiLCJkZWxldGVPYmplY3QiLCJnZXRTdG9yYWdlIiwiRXhlcmNpc2VTZXJ2aWNlIiwiYWxsRXhlcmNpc2VzIiwiX2FsbEV4ZXJjaXNlcyIsImNsZWFyQ2FjaGUiLCJjb25zb2xlIiwibG9nIiwiZXhlcmNpc2VDYWNoZSIsImNsZWFyIiwiZ2VuZXJhdGVFeGVyY2lzZUlkIiwibmV3SWQiLCJpZCIsImdlbmVyYXRlRXhlcmNpc2VWaWRlb0lkIiwidmVyaWZ5RXhlcmNpc2VFeGlzdHMiLCJleGVyY2lzZUlkIiwiZXhlcmNpc2VzUmVmIiwicSIsInF1ZXJ5U25hcHNob3QiLCJleGlzdHMiLCJlbXB0eSIsIm1hdGNoQ291bnQiLCJzaXplIiwiZXJyb3IiLCJ2ZXJpZnlFeGVyY2lzZUV4aXN0c0J5TmFtZSIsImV4ZXJjaXNlTmFtZSIsImZvcm1hdHRlZE5hbWUiLCJleGVyY2lzZVJlZiIsImV4ZXJjaXNlRG9jIiwidG9Mb3dlckNhc2UiLCJnZXRFeGVyY2lzZUJ5TmFtZSIsImhhcyIsImNhY2hlZEV4ZXJjaXNlIiwiZ2V0IiwiZXhlcmNpc2VEYXRhIiwiZGF0YSIsImV4ZXJjaXNlIiwic2V0IiwiY2FwaXRhbGl6ZUV4ZXJjaXNlTmFtZSIsIm5hbWUiLCJzcGxpdCIsIm1hcCIsIndvcmQiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiam9pbiIsImNyZWF0ZUV4ZXJjaXNlIiwiY3JlYXRlRXhlcmNpc2VWaWRlbyIsInZpZGVvIiwiZm9ybWF0dGVkRXhlcmNpc2VOYW1lIiwiZXhlcmNpc2VWaWRlb1JlZiIsImZldGNoRXhlcmNpc2VzIiwiZXhlcmNpc2VTbmFwc2hvdCIsImRvY3MiLCJsZW5ndGgiLCJleGVyY2lzZXMiLCJjYXBpdGFsaXplZE5hbWUiLCJkb2N1bWVudElkIiwiZXgiLCJjYXRlZ29yeSIsInZpZGVvU25hcHNob3QiLCJleGVyY2lzZVZpZGVvcyIsImNhcGl0YWxpemVkRXhlcmNpc2VOYW1lIiwidmlkZW9VUkwiLCJtYXBwZWRFeGVyY2lzZXMiLCJ2aWRlb3NGb3JFeGVyY2lzZSIsImZpbHRlciIsIm1hdGNoQnlOYW1lIiwibWF0Y2hCeUV4ZXJjaXNlSWQiLCJtYXRjaEJ5RXhlcmNpc2VOYW1lIiwidmlkZW9zIiwidmlkZW9Db3VudCIsIm1lc3NhZ2UiLCJFcnJvciIsInN0YWNrIiwiZmV0Y2hGZWF0dXJlZEV4ZXJjaXNlc1dpdGhWaWRlb3MiLCJkZXNjcmlwdGlvbiIsInByaW1hcnlCb2R5UGFydHMiLCJzZWNvbmRhcnlCb2R5UGFydHMiLCJ0YWdzIiwic3RlcHMiLCJ2aXNpYmlsaXR5IiwiY3VycmVudFZpZGVvUG9zaXRpb24iLCJzZXRzIiwicmVwcyIsIndlaWdodCIsImF1dGhvciIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInNodWZmbGVkRXhlcmNpc2VzIiwic29ydCIsIk1hdGgiLCJyYW5kb20iLCJnZXRFeGVyY2lzZXNCeUF1dGhvciIsInVzZXJJZCIsInZpZGVvc1JlZiIsInVuaXF1ZUV4ZXJjaXNlTmFtZXMiLCJTZXQiLCJmb3JFYWNoIiwidmlkZW9EYXRhIiwiYWRkIiwiQXJyYXkiLCJmcm9tIiwiZmV0Y2hQYWdpbmF0ZWRFeGVyY2lzZXMiLCJsYXN0RG9jIiwicGFnZVNpemUiLCJleGVyY2lzZVF1ZXJ5IiwibGFzdFZpc2libGUiLCJmaWx0ZXJlZEV4ZXJjaXNlcyIsImdlbmVyYXRlRXhlcmNpc2VMb2dJRCIsIndvcmtvdXRJZCIsImRlbGV0ZVNwZWNpZmljRXhlcmNpc2VWaWRlbyIsInZpZGVvSWQiLCJyZXF1ZXN0aW5nVXNlcklkIiwidmlkZW9SZWYiLCJ2aWRlb0RvYyIsInZpZGVvU3RvcmFnZVJlZiIsImdpZlVSTCIsImdpZlN0b3JhZ2VSZWYiLCJNYXAiLCJleGVyY2lzZVNlcnZpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/api/firebase/exercise/service.ts\n");

/***/ }),

/***/ "./src/api/firebase/exercise/types.ts":
/*!********************************************!*\
  !*** ./src/api/firebase/exercise/types.ts ***!
  \********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BodyPart: () => (/* binding */ BodyPart),\n/* harmony export */   Exercise: () => (/* binding */ Exercise),\n/* harmony export */   ExerciseAuthor: () => (/* binding */ ExerciseAuthor),\n/* harmony export */   ExerciseCategory: () => (/* binding */ ExerciseCategory),\n/* harmony export */   ExerciseDetail: () => (/* binding */ ExerciseDetail),\n/* harmony export */   ExerciseLog: () => (/* binding */ ExerciseLog),\n/* harmony export */   ExerciseReference: () => (/* binding */ ExerciseReference),\n/* harmony export */   ExerciseVideo: () => (/* binding */ ExerciseVideo),\n/* harmony export */   isAdvancedBodyPart: () => (/* binding */ isAdvancedBodyPart)\n/* harmony export */ });\n/* harmony import */ var _workout_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../workout/types */ \"./src/api/firebase/workout/types.ts\");\n/* harmony import */ var _user_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../user/types */ \"./src/api/firebase/user/types.ts\");\n/* harmony import */ var _utils_formatDate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/formatDate */ \"./src/utils/formatDate.ts\");\n/* harmony import */ var _exerciseLog_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../exerciseLog/service */ \"./src/api/firebase/exerciseLog/service.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_workout_types__WEBPACK_IMPORTED_MODULE_0__, _exerciseLog_service__WEBPACK_IMPORTED_MODULE_3__]);\n([_workout_types__WEBPACK_IMPORTED_MODULE_0__, _exerciseLog_service__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n// Interfaces\nclass ExerciseReference {\n    constructor(data){\n        this.exercise = data.exercise;\n        this.groupId = data.groupId || 0;\n        this.isCompleted = data.isCompleted || false;\n    }\n    toDictionary() {\n        return {\n            exercise: this.exercise.toDictionary(),\n            groupId: this.groupId,\n            isCompleted: this.isCompleted\n        };\n    }\n}\nvar BodyPart;\n(function(BodyPart) {\n    BodyPart[\"Biceps\"] = \"biceps\";\n    BodyPart[\"Triceps\"] = \"triceps\";\n    BodyPart[\"Chest\"] = \"chest\";\n    BodyPart[\"Calves\"] = \"calves\";\n    BodyPart[\"Abs\"] = \"abs\";\n    BodyPart[\"Hamstrings\"] = \"hamstrings\";\n    BodyPart[\"Back\"] = \"back\";\n    BodyPart[\"Glutes\"] = \"glutes\";\n    BodyPart[\"Quadriceps\"] = \"quadriceps\";\n    BodyPart[\"Forearms\"] = \"forearms\";\n    BodyPart[\"Shoulders\"] = \"shoulders\";\n    BodyPart[\"Lowerback\"] = \"lowerback\";\n    // advanced\n    BodyPart[\"Lats\"] = \"lats\";\n    BodyPart[\"Traps\"] = \"traps\";\n    BodyPart[\"Rhomboids\"] = \"rhomboids\";\n    BodyPart[\"Deltoids\"] = \"deltoids\";\n    BodyPart[\"Fullbody\"] = \"fullbody\";\n})(BodyPart || (BodyPart = {}));\n// Function to check if a body part is advanced\nfunction isAdvancedBodyPart(bodyPart) {\n    return [\n        \"traps\",\n        \"lats\",\n        \"rhomboids\",\n        \"deltoids\"\n    ].includes(bodyPart);\n}\nclass ExerciseLog {\n    constructor(data){\n        this.id = data.id || \"\";\n        this.workoutId = data.workoutId || \"\";\n        this.userId = data.userId || \"\";\n        // Ensure exercise is always constructed properly\n        if (!data.exercise) {\n            throw new Error(\"Exercise is required for ExerciseLog\");\n        }\n        this.exercise = new Exercise(data.exercise instanceof Exercise ? data.exercise.toDictionary() : data.exercise);\n        // Ensure logs are always constructed properly\n        this.logs = Array.isArray(data.logs) ? data.logs.map((log)=>new _workout_types__WEBPACK_IMPORTED_MODULE_0__.RepsAndWeightLog(log)) : [];\n        this.feedback = data.feedback || \"\";\n        this.note = data.note || \"\";\n        this.recommendedWeight = data.recommendedWeight || \"calculating...\";\n        this.isSplit = data.isSplit || false;\n        this.isBodyWeight = data.isBodyWeight || false;\n        this.logSubmitted = data.logSubmitted || false;\n        this.logIsEditing = data.logIsEditing || false;\n        this.isCompleted = data.isCompleted || false;\n        this.order = data.order || null;\n        this.completedAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_2__.convertFirestoreTimestamp)(data.completedAt);\n        this.createdAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_2__.convertFirestoreTimestamp)(data.createdAt);\n        this.updatedAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_2__.convertFirestoreTimestamp)(data.updatedAt);\n    }\n    setIsSubmitted(isSubmitted) {\n        this.logSubmitted = isSubmitted;\n    }\n    fetchTotalWeightLifted(user) {\n        const bodyWeight = Math.max(user?.bodyWeight?.at(-1)?.newWeight || 150, 1);\n        let totalWeightLifted = 0;\n        for (const log of this.logs){\n            totalWeightLifted += (log.weight + (log.isBodyWeight ? bodyWeight : 0)) * log.reps;\n            if (log.isSplit) {\n                totalWeightLifted += log.leftWeight * log.leftReps;\n            }\n        }\n        return totalWeightLifted;\n    }\n    calculateWorkScore(user, workoutId, workoutSummaries) {\n        const bodyWeight = Math.max(user?.bodyWeight?.at(-1)?.newWeight || 150, 1);\n        const intensityWeight = 0.4;\n        const volumeWeight = 0.4;\n        const allLogs = this.getLogsForExercise(workoutSummaries, this.exercise.name);\n        const averageTotalWeight = allLogs.length === 0 ? 0 : allLogs.reduce((sum, log)=>sum + log.weight, 0) / allLogs.length;\n        let workScore = 0;\n        for (const logItem of this.logs){\n            const totalWeight = logItem.weight + bodyWeight;\n            const intensityFactor = totalWeight / bodyWeight;\n            const volumeFactor = logItem.reps;\n            const percentageOfAverage = totalWeight / Math.max(averageTotalWeight, 1) * 100;\n            let progressiveScore = 0;\n            if (percentageOfAverage >= 90) progressiveScore = 40;\n            else if (percentageOfAverage >= 80) progressiveScore = 35;\n            else if (percentageOfAverage >= 70) progressiveScore = 30;\n            workScore += intensityFactor * volumeFactor * intensityWeight + progressiveScore * volumeWeight;\n        }\n        return Math.round(workScore);\n    }\n    getLogsForExercise(workoutSummaries, exerciseName) {\n        return workoutSummaries?.flatMap((summary)=>summary.exercisesCompleted).filter((log)=>log.exercise.name === exerciseName).flatMap((log)=>log.logs) || [];\n    }\n    checkIfAnyPastLogsWereBodyWeight(workoutSummaries) {\n        const allLogItems = workoutSummaries.flatMap((summary)=>summary.exercisesCompleted).filter((log)=>log.exercise.name === this.exercise.name).flatMap((log)=>log.logs);\n        const nonBodyWeightLogs = allLogItems.filter((log)=>!log.isBodyWeight);\n        const hasBodyWeightLogs = allLogItems.some((log)=>log.isBodyWeight);\n        if (nonBodyWeightLogs.length === 0) {\n            return {\n                hasBodyWeightLogs,\n                averageWeight: 0\n            };\n        }\n        const totalWeight = nonBodyWeightLogs.reduce((sum, log)=>sum + log.weight, 0);\n        const averageWeight = totalWeight / nonBodyWeightLogs.length;\n        return {\n            hasBodyWeightLogs,\n            averageWeight\n        };\n    }\n    fetchHighestTWL(workoutSummaries, user) {\n        const exerciseWorkouts = workoutSummaries?.filter((summary)=>summary.exercisesCompleted.some((log)=>log.exercise.name === this.exercise.name));\n        if (!exerciseWorkouts?.length) return null;\n        const twls = exerciseWorkouts.map((summary)=>summary.exercisesCompleted.reduce((total, log)=>log.exercise.name === this.exercise.name ? total + log.fetchTotalWeightLifted(user) : total, 0));\n        return Math.max(...twls);\n    }\n    static fetchHighestWeightLiftedForExercise(exerciseName, workoutSummaries) {\n        const exerciseWorkouts = workoutSummaries?.filter((summary)=>summary.exercisesCompleted.some((log)=>log.exercise.name === exerciseName));\n        if (!exerciseWorkouts?.length) return null;\n        const weights = exerciseWorkouts.flatMap((summary)=>summary.exercisesCompleted.flatMap((log)=>{\n                if (log.exercise.name !== exerciseName) return [];\n                return log.logs.map((logItem)=>logItem.isSplit ? Math.max(logItem.weight, logItem.leftWeight) : logItem.weight);\n            }));\n        return weights.length ? Math.max(...weights) : null;\n    }\n    fetchHighestWeightInSet(workoutSummaries) {\n        const exerciseWorkouts = workoutSummaries?.filter((summary)=>summary.exercisesCompleted.some((log)=>log.exercise.name === this.exercise.name));\n        if (!exerciseWorkouts?.length) return {\n            weight: null,\n            reps: null\n        };\n        const weightAndReps = exerciseWorkouts.flatMap((summary)=>summary.exercisesCompleted.flatMap((log)=>log.exercise.name === this.exercise.name ? log.logs.map((logItem)=>({\n                        weight: logItem.weight,\n                        reps: logItem.reps\n                    })) : []));\n        if (!weightAndReps.length) return {\n            weight: null,\n            reps: null\n        };\n        const maxWeightEntry = weightAndReps.reduce((max, current)=>current.weight > max.weight ? current : max);\n        return {\n            weight: maxWeightEntry.weight,\n            reps: maxWeightEntry.reps\n        };\n    }\n    fetchTotalReps() {\n        return this.logs.reduce((total, log)=>total + log.reps, 0);\n    }\n    fetchTotalSessions(allLogs) {\n        return allLogs.filter((log)=>log.exercise.name === this.exercise.name).length;\n    }\n    fetchTotalCompletedSets() {\n        return this.logs.filter((log)=>log.reps > 0).length;\n    }\n    isLogComplete() {\n        return this.logs.some((log)=>log.reps > 0);\n    }\n    updateLog(workout) {\n        _exerciseLog_service__WEBPACK_IMPORTED_MODULE_3__.exerciseLogService.updateExerciseLog(this, workout);\n    }\n    toDictionary() {\n        const data = {\n            id: this.id,\n            workoutId: this.workoutId,\n            userId: this.userId,\n            exercise: this.exercise.toDictionary(),\n            logs: this.logs.map((log)=>log.toDictionary()),\n            feedback: this.feedback,\n            note: this.note,\n            isSplit: this.isSplit,\n            isBodyWeight: this.isBodyWeight,\n            logSubmitted: this.logSubmitted,\n            logIsEditing: this.logIsEditing,\n            isCompleted: this.isCompleted,\n            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_2__.dateToUnixTimestamp)(this.createdAt),\n            updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_2__.dateToUnixTimestamp)(this.updatedAt),\n            completedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_2__.dateToUnixTimestamp)(this.completedAt),\n            recommendedWeight: this.recommendedWeight\n        };\n        if (this.order != null) {\n            data[\"order\"] = this.order;\n        }\n        return data;\n    }\n}\n// Helper functions to mimic Swift enum behavior\nconst ExerciseCategory = {\n    weightTraining: (details)=>({\n            type: \"weight-training\",\n            details\n        }),\n    cardio: (details)=>({\n            type: \"cardio\",\n            details\n        }),\n    mobility: (details)=>({\n            type: \"mobility\",\n            details\n        }),\n    pilates: (details)=>({\n            type: \"pilates\",\n            details\n        }),\n    stretching: (details)=>({\n            type: \"stretching\",\n            details\n        }),\n    calisthenics: (details)=>({\n            type: \"calisthenics\",\n            details\n        }),\n    fromIdentifier: (identifier)=>{\n        const baseDetails = {\n            screenTime: 0,\n            selectedVideo: null\n        };\n        switch(identifier.toLowerCase()){\n            case \"weight-training\":\n                return ExerciseCategory.weightTraining({\n                    ...baseDetails,\n                    reps: [\n                        \"12\"\n                    ],\n                    sets: 3,\n                    weight: 0\n                });\n            case \"cardio\":\n                return ExerciseCategory.cardio({\n                    ...baseDetails,\n                    duration: 20,\n                    bpm: 125,\n                    calories: 0\n                });\n            case \"mobility\":\n                return ExerciseCategory.mobility({\n                    ...baseDetails,\n                    reps: [\n                        \"12\"\n                    ],\n                    sets: 3\n                });\n            case \"pilates\":\n                return ExerciseCategory.pilates({\n                    ...baseDetails,\n                    reps: [\n                        \"12\"\n                    ],\n                    sets: 3\n                });\n            case \"stretching\":\n                return ExerciseCategory.stretching({\n                    ...baseDetails,\n                    duration: 30\n                });\n            case \"calisthenics\":\n                return ExerciseCategory.calisthenics({\n                    ...baseDetails,\n                    reps: [\n                        \"12\"\n                    ],\n                    sets: 3\n                });\n            default:\n                return null;\n        }\n    },\n    identifier: (category)=>category.type\n};\nclass Exercise {\n    constructor(data){\n        this.id = data.id || \"\";\n        this.name = data.name || \"\";\n        this.documentId = data.documentId || data.name?.toLowerCase() || data.id || \"\";\n        this.description = data.description || \"\";\n        this.steps = data.steps || [];\n        this.visibility = data.visibility || \"live\";\n        this.currentVideoPosition = data.currentVideoPosition || 0;\n        this.sets = data.sets || 0;\n        this.reps = data.reps || \"\";\n        this.weight = data.weight || 0;\n        this.author = new ExerciseAuthor(data.author || {});\n        this.createdAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_2__.convertFirestoreTimestamp)(data.createdAt);\n        this.updatedAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_2__.convertFirestoreTimestamp)(data.updatedAt);\n        this.videos = (data.videos || []).map((video)=>new ExerciseVideo(video));\n        // Handle primaryBodyParts, secondaryBodyParts and tags\n        this.primaryBodyParts = data.primaryBodyParts || [];\n        this.secondaryBodyParts = data.secondaryBodyParts || [];\n        this.tags = data.tags || [];\n        // Handle category field - can be either string or complex object\n        if (typeof data.category === \"string\") {\n            this.category = data.category || \"\";\n        } else if (data.category && typeof data.category === \"object\") {\n            const categoryObj = {};\n            const categoryType = data.category.type || data.category.id || \"\";\n            categoryObj.type = categoryType;\n            categoryObj.details = {\n                ...data.category.details || {},\n                // Convert selectedVideo to ExerciseVideo instance if it exists\n                ...data.category.details?.selectedVideo ? {\n                    selectedVideo: new ExerciseVideo(data.category.details.selectedVideo)\n                } : {}\n            };\n            // If it's raw data format, merge the remaining properties\n            if (!data.category.details && data.category.sets) {\n                categoryObj.details = {\n                    ...categoryObj.details,\n                    sets: data.category.sets,\n                    reps: data.category.reps || [\n                        \"12\"\n                    ],\n                    weight: data.category.weight || 0,\n                    screenTime: data.category.screenTime || 0,\n                    selectedVideo: data.category.selectedVideo ? new ExerciseVideo(data.category.selectedVideo) : null\n                };\n            }\n            this.category = categoryObj;\n        } else {\n            // Default category as string for new document structure\n            this.category = \"weight-training\";\n        }\n    }\n    toDictionary() {\n        // Create the category object:\n        const categoryData = {\n            id: this.category.type,\n            ...this.category.details,\n            // Only include selectedVideo if it exists and is an ExerciseVideo instance\n            ...this.category.details?.selectedVideo && this.category.details.selectedVideo instanceof ExerciseVideo ? {\n                selectedVideo: this.category.details.selectedVideo.toDictionary()\n            } : {\n                selectedVideo: null\n            }\n        };\n        const data = {\n            id: this.id,\n            name: this.name,\n            description: this.description,\n            category: categoryData,\n            primaryBodyParts: this.primaryBodyParts,\n            secondaryBodyParts: this.secondaryBodyParts,\n            tags: this.tags,\n            videos: this.videos.map((video)=>video.toDictionary()),\n            steps: this.steps,\n            author: this.author.toDictionary(),\n            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_2__.dateToUnixTimestamp)(this.createdAt),\n            updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_2__.dateToUnixTimestamp)(this.updatedAt)\n        };\n        return data;\n    }\n}\n// ExerciseVideo.ts\nclass ExerciseVideo {\n    constructor(data){\n        this.id = data.id || \"\";\n        this.exerciseId = data.exerciseId || \"\";\n        this.username = data.username || \"\";\n        this.userId = data.userId || \"\";\n        this.videoURL = data.videoURL || \"\";\n        this.fileName = data.fileName || \"\";\n        this.exercise = data.exercise || \"\";\n        this.profileImage = new _user_types__WEBPACK_IMPORTED_MODULE_1__.ProfileImage(data.profileImage || {});\n        this.caption = data.caption;\n        this.gifURL = data.gifURL;\n        this.thumbnail = data.thumbnail;\n        this.visibility = data.visibility || \"private\";\n        this.totalAccountsReached = data.totalAccountsReached || 0;\n        this.totalAccountLikes = data.totalAccountLikes || 0;\n        this.totalAccountBookmarked = data.totalAccountBookmarked || 0;\n        this.totalAccountUsage = data.totalAccountUsage || 0;\n        this.isApproved = data.isApproved || false;\n        this.liked = data.liked || false;\n        this.bookmarked = data.bookmarked || false;\n        this.createdAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_2__.convertFirestoreTimestamp)(data.createdAt);\n        this.updatedAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_2__.convertFirestoreTimestamp)(data.updatedAt);\n    }\n    toDictionary() {\n        const data = {\n            id: this.id,\n            exerciseId: this.exerciseId,\n            username: this.username,\n            userId: this.userId,\n            videoURL: this.videoURL,\n            fileName: this.fileName,\n            exercise: this.exercise,\n            profileImage: this.profileImage.toDictionary(),\n            visibility: this.visibility,\n            totalAccountsReached: this.totalAccountsReached,\n            totalAccountLikes: this.totalAccountLikes,\n            totalAccountBookmarked: this.totalAccountBookmarked,\n            totalAccountUsage: this.totalAccountUsage,\n            isApproved: this.isApproved,\n            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_2__.dateToUnixTimestamp)(this.createdAt),\n            updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_2__.dateToUnixTimestamp)(this.updatedAt)\n        };\n        if (this.caption) data.caption = this.caption;\n        if (this.gifURL) data.gifURL = this.gifURL;\n        if (this.thumbnail) data.thumbnail = this.thumbnail;\n        if (this.liked !== null) data.liked = this.liked;\n        if (this.bookmarked !== null) data.bookmarked = this.bookmarked;\n        return data;\n    }\n}\nclass ExerciseDetail {\n    constructor(data){\n        this.id = data.id || \"\";\n        this.exerciseName = data.exerciseName || \"\";\n        this.exercise = data.exercise;\n        this.exerciseLogId = data.exerciseLogId;\n        this.category = data.category;\n        this.notes = data.notes || \"\";\n        this.isSplit = data.isSplit || false;\n        this.isMissing = data.isMissing || false;\n        this.groupId = data.groupId || 0;\n        this.closestMatch = data.closestMatch || [];\n    }\n    toDictionary() {\n        return {\n            id: this.id,\n            exerciseName: this.exerciseName,\n            exercise: this.exercise.toDictionary(),\n            exerciseLogId: this.exerciseLogId,\n            category: {\n                id: this.category.type,\n                ...this.category.details,\n                ...this.category.details?.selectedVideo ? {\n                    selectedVideo: this.category.details.selectedVideo.toDictionary()\n                } : {}\n            },\n            notes: this.notes,\n            isSplit: this.isSplit,\n            isMissing: this.isMissing,\n            groupId: this.groupId,\n            closestMatch: this.closestMatch.map((ex)=>ex.toDictionary())\n        };\n    }\n}\n// ExerciseAuthor.ts\nclass ExerciseAuthor {\n    constructor(data){\n        this.userId = data.userId || \"\";\n        this.username = data.username || \"\";\n    }\n    toDictionary() {\n        return {\n            userId: this.userId,\n            username: this.username\n        };\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL2ZpcmViYXNlL2V4ZXJjaXNlL3R5cGVzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNkU7QUFDMUI7QUFFd0M7QUFDL0I7QUFvQjVELGFBQWE7QUFDTixNQUFNSztJQUtYQyxZQUFZQyxJQUlYLENBQUU7UUFDRCxJQUFJLENBQUNDLFFBQVEsR0FBR0QsS0FBS0MsUUFBUTtRQUM3QixJQUFJLENBQUNDLE9BQU8sR0FBR0YsS0FBS0UsT0FBTyxJQUFJO1FBQy9CLElBQUksQ0FBQ0MsV0FBVyxHQUFHSCxLQUFLRyxXQUFXLElBQUk7SUFDekM7SUFFQUMsZUFBdUM7UUFDckMsT0FBTztZQUNMSCxVQUFVLElBQUksQ0FBQ0EsUUFBUSxDQUFDRyxZQUFZO1lBQ3BDRixTQUFTLElBQUksQ0FBQ0EsT0FBTztZQUNyQkMsYUFBYSxJQUFJLENBQUNBLFdBQVc7UUFDL0I7SUFDRjtBQUNGOztVQUVZRTs7Ozs7Ozs7Ozs7OztJQWFSLFdBQVc7Ozs7OztHQWJIQSxhQUFBQTtBQXFCWiwrQ0FBK0M7QUFDeEMsU0FBU0MsbUJBQW1CQyxRQUFrQjtJQUNuRCxPQUFPOzs7OztLQUFzRSxDQUFDQyxRQUFRLENBQUNEO0FBQ3pGO0FBSU8sTUFBTUU7SUFtQlhWLFlBQVlDLElBQVMsQ0FBRTtRQUNuQixJQUFJLENBQUNVLEVBQUUsR0FBR1YsS0FBS1UsRUFBRSxJQUFJO1FBQ3JCLElBQUksQ0FBQ0MsU0FBUyxHQUFHWCxLQUFLVyxTQUFTLElBQUk7UUFDbkMsSUFBSSxDQUFDQyxNQUFNLEdBQUdaLEtBQUtZLE1BQU0sSUFBSTtRQUU3QixpREFBaUQ7UUFDakQsSUFBSSxDQUFDWixLQUFLQyxRQUFRLEVBQUU7WUFDbEIsTUFBTSxJQUFJWSxNQUFNO1FBQ2xCO1FBRUEsSUFBSSxDQUFDWixRQUFRLEdBQUcsSUFBSWEsU0FDbEJkLEtBQUtDLFFBQVEsWUFBWWEsV0FDckJkLEtBQUtDLFFBQVEsQ0FBQ0csWUFBWSxLQUMxQkosS0FBS0MsUUFBUTtRQUduQiw4Q0FBOEM7UUFDOUMsSUFBSSxDQUFDYyxJQUFJLEdBQUdDLE1BQU1DLE9BQU8sQ0FBQ2pCLEtBQUtlLElBQUksSUFDL0JmLEtBQUtlLElBQUksQ0FBQ0csR0FBRyxDQUFDLENBQUNDLE1BQWEsSUFBSTFCLDREQUFnQkEsQ0FBQzBCLFFBQ2pELEVBQUU7UUFFTixJQUFJLENBQUNDLFFBQVEsR0FBR3BCLEtBQUtvQixRQUFRLElBQUk7UUFDakMsSUFBSSxDQUFDQyxJQUFJLEdBQUdyQixLQUFLcUIsSUFBSSxJQUFJO1FBQ3pCLElBQUksQ0FBQ0MsaUJBQWlCLEdBQUd0QixLQUFLc0IsaUJBQWlCLElBQUk7UUFDbkQsSUFBSSxDQUFDQyxPQUFPLEdBQUd2QixLQUFLdUIsT0FBTyxJQUFJO1FBQy9CLElBQUksQ0FBQ0MsWUFBWSxHQUFHeEIsS0FBS3dCLFlBQVksSUFBSTtRQUN6QyxJQUFJLENBQUNDLFlBQVksR0FBR3pCLEtBQUt5QixZQUFZLElBQUk7UUFDekMsSUFBSSxDQUFDQyxZQUFZLEdBQUcxQixLQUFLMEIsWUFBWSxJQUFJO1FBQ3pDLElBQUksQ0FBQ3ZCLFdBQVcsR0FBR0gsS0FBS0csV0FBVyxJQUFJO1FBQ3ZDLElBQUksQ0FBQ3dCLEtBQUssR0FBRzNCLEtBQUsyQixLQUFLLElBQUk7UUFDM0IsSUFBSSxDQUFDQyxXQUFXLEdBQUdqQyw0RUFBeUJBLENBQUNLLEtBQUs0QixXQUFXO1FBQzdELElBQUksQ0FBQ0MsU0FBUyxHQUFHbEMsNEVBQXlCQSxDQUFDSyxLQUFLNkIsU0FBUztRQUN6RCxJQUFJLENBQUNDLFNBQVMsR0FBR25DLDRFQUF5QkEsQ0FBQ0ssS0FBSzhCLFNBQVM7SUFDN0Q7SUFFQUMsZUFBZUMsV0FBb0IsRUFBUTtRQUN2QyxJQUFJLENBQUNQLFlBQVksR0FBR087SUFDeEI7SUFFQUMsdUJBQXVCQyxJQUFVLEVBQVU7UUFDdkMsTUFBTUMsYUFBYUMsS0FBS0MsR0FBRyxDQUFDSCxNQUFNQyxZQUFZRyxHQUFHLENBQUMsSUFBSUMsYUFBYSxLQUFLO1FBRXhFLElBQUlDLG9CQUFvQjtRQUV4QixLQUFLLE1BQU1yQixPQUFPLElBQUksQ0FBQ0osSUFBSSxDQUFFO1lBQ3pCeUIscUJBQXNCLENBQUNyQixJQUFJc0IsTUFBTSxHQUFJdEIsQ0FBQUEsSUFBSUssWUFBWSxHQUFHVyxhQUFhLEVBQUMsSUFBS2hCLElBQUl1QixJQUFJO1lBRW5GLElBQUl2QixJQUFJSSxPQUFPLEVBQUU7Z0JBQ2JpQixxQkFBc0JyQixJQUFJd0IsVUFBVSxHQUFHeEIsSUFBSXlCLFFBQVE7WUFDdkQ7UUFDSjtRQUVBLE9BQU9KO0lBQ1g7SUFFQUssbUJBQW1CWCxJQUFVLEVBQUV2QixTQUF3QixFQUFFbUMsZ0JBQWtDLEVBQVU7UUFDakcsTUFBTVgsYUFBYUMsS0FBS0MsR0FBRyxDQUFDSCxNQUFNQyxZQUFZRyxHQUFHLENBQUMsSUFBSUMsYUFBYSxLQUFLO1FBQ3hFLE1BQU1RLGtCQUFrQjtRQUN4QixNQUFNQyxlQUFlO1FBRXJCLE1BQU1DLFVBQVUsSUFBSSxDQUFDQyxrQkFBa0IsQ0FBQ0osa0JBQWtCLElBQUksQ0FBQzdDLFFBQVEsQ0FBQ2tELElBQUk7UUFDNUUsTUFBTUMscUJBQXFCSCxRQUFRSSxNQUFNLEtBQUssSUFDMUMsSUFBSUosUUFBUUssTUFBTSxDQUFDLENBQUNDLEtBQUtwQyxNQUFRb0MsTUFBTXBDLElBQUlzQixNQUFNLEVBQUUsS0FBS1EsUUFBUUksTUFBTTtRQUUxRSxJQUFJRyxZQUFZO1FBRWhCLEtBQUssTUFBTUMsV0FBVyxJQUFJLENBQUMxQyxJQUFJLENBQUU7WUFDN0IsTUFBTTJDLGNBQWNELFFBQVFoQixNQUFNLEdBQUdOO1lBQ3JDLE1BQU13QixrQkFBa0JELGNBQWN2QjtZQUN0QyxNQUFNeUIsZUFBZUgsUUFBUWYsSUFBSTtZQUVqQyxNQUFNbUIsc0JBQXNCSCxjQUFjdEIsS0FBS0MsR0FBRyxDQUFDZSxvQkFBb0IsS0FBSztZQUM1RSxJQUFJVSxtQkFBbUI7WUFFdkIsSUFBSUQsdUJBQXVCLElBQUlDLG1CQUFtQjtpQkFDN0MsSUFBSUQsdUJBQXVCLElBQUlDLG1CQUFtQjtpQkFDbEQsSUFBSUQsdUJBQXVCLElBQUlDLG1CQUFtQjtZQUV2RE4sYUFBYSxrQkFBbUJJLGVBQWViLGtCQUFvQmUsbUJBQW1CZDtRQUMxRjtRQUVBLE9BQU9aLEtBQUsyQixLQUFLLENBQUNQO0lBQ3RCO0lBRUFOLG1CQUFtQkosZ0JBQWtDLEVBQUVrQixZQUFvQixFQUFzQjtRQUM3RixPQUFPbEIsa0JBQ0RtQixRQUFRQyxDQUFBQSxVQUFXQSxRQUFRQyxrQkFBa0IsRUFDOUNDLE9BQU9qRCxDQUFBQSxNQUFPQSxJQUFJbEIsUUFBUSxDQUFDa0QsSUFBSSxLQUFLYSxjQUNwQ0MsUUFBUTlDLENBQUFBLE1BQU9BLElBQUlKLElBQUksS0FBSyxFQUFFO0lBQ3ZDO0lBRUFzRCxpQ0FBaUN2QixnQkFBa0MsRUFHakU7UUFDRSxNQUFNd0IsY0FBY3hCLGlCQUNmbUIsT0FBTyxDQUFDQyxDQUFBQSxVQUFXQSxRQUFRQyxrQkFBa0IsRUFDN0NDLE1BQU0sQ0FBQ2pELENBQUFBLE1BQU9BLElBQUlsQixRQUFRLENBQUNrRCxJQUFJLEtBQUssSUFBSSxDQUFDbEQsUUFBUSxDQUFDa0QsSUFBSSxFQUN0RGMsT0FBTyxDQUFDOUMsQ0FBQUEsTUFBT0EsSUFBSUosSUFBSTtRQUU1QixNQUFNd0Qsb0JBQW9CRCxZQUFZRixNQUFNLENBQUNqRCxDQUFBQSxNQUFPLENBQUNBLElBQUlLLFlBQVk7UUFDckUsTUFBTWdELG9CQUFvQkYsWUFBWUcsSUFBSSxDQUFDdEQsQ0FBQUEsTUFBT0EsSUFBSUssWUFBWTtRQUVsRSxJQUFJK0Msa0JBQWtCbEIsTUFBTSxLQUFLLEdBQUc7WUFDaEMsT0FBTztnQkFBRW1CO2dCQUFtQkUsZUFBZTtZQUFFO1FBQ2pEO1FBRUEsTUFBTWhCLGNBQWNhLGtCQUFrQmpCLE1BQU0sQ0FBQyxDQUFDQyxLQUFLcEMsTUFBUW9DLE1BQU1wQyxJQUFJc0IsTUFBTSxFQUFFO1FBQzdFLE1BQU1pQyxnQkFBZ0JoQixjQUFjYSxrQkFBa0JsQixNQUFNO1FBRTVELE9BQU87WUFBRW1CO1lBQW1CRTtRQUFjO0lBQzlDO0lBRUFDLGdCQUFnQjdCLGdCQUFrQyxFQUFFWixJQUFVLEVBQWlCO1FBQzNFLE1BQU0wQyxtQkFBbUI5QixrQkFDbkJzQixPQUFPRixDQUFBQSxVQUNMQSxRQUFRQyxrQkFBa0IsQ0FBQ00sSUFBSSxDQUFDdEQsQ0FBQUEsTUFDNUJBLElBQUlsQixRQUFRLENBQUNrRCxJQUFJLEtBQUssSUFBSSxDQUFDbEQsUUFBUSxDQUFDa0QsSUFBSTtRQUlwRCxJQUFJLENBQUN5QixrQkFBa0J2QixRQUFRLE9BQU87UUFFdEMsTUFBTXdCLE9BQU9ELGlCQUFpQjFELEdBQUcsQ0FBQ2dELENBQUFBLFVBQzlCQSxRQUFRQyxrQkFBa0IsQ0FBQ2IsTUFBTSxDQUFDLENBQUN3QixPQUFPM0QsTUFDdENBLElBQUlsQixRQUFRLENBQUNrRCxJQUFJLEtBQUssSUFBSSxDQUFDbEQsUUFBUSxDQUFDa0QsSUFBSSxHQUNsQzJCLFFBQVEzRCxJQUFJYyxzQkFBc0IsQ0FBQ0MsUUFDbkM0QyxPQUNSO1FBR04sT0FBTzFDLEtBQUtDLEdBQUcsSUFBSXdDO0lBQ3ZCO0lBRUEsT0FBT0Usb0NBQW9DZixZQUFvQixFQUFFbEIsZ0JBQWtDLEVBQWlCO1FBQ2hILE1BQU04QixtQkFBbUI5QixrQkFDbkJzQixPQUFPRixDQUFBQSxVQUNMQSxRQUFRQyxrQkFBa0IsQ0FBQ00sSUFBSSxDQUFDdEQsQ0FBQUEsTUFDNUJBLElBQUlsQixRQUFRLENBQUNrRCxJQUFJLEtBQUthO1FBSWxDLElBQUksQ0FBQ1ksa0JBQWtCdkIsUUFBUSxPQUFPO1FBRXRDLE1BQU0yQixVQUFVSixpQkFBaUJYLE9BQU8sQ0FBQ0MsQ0FBQUEsVUFDckNBLFFBQVFDLGtCQUFrQixDQUFDRixPQUFPLENBQUM5QyxDQUFBQTtnQkFDL0IsSUFBSUEsSUFBSWxCLFFBQVEsQ0FBQ2tELElBQUksS0FBS2EsY0FBYyxPQUFPLEVBQUU7Z0JBQ2pELE9BQU83QyxJQUFJSixJQUFJLENBQUNHLEdBQUcsQ0FBQ3VDLENBQUFBLFVBQ2hCQSxRQUFRbEMsT0FBTyxHQUNUYSxLQUFLQyxHQUFHLENBQUNvQixRQUFRaEIsTUFBTSxFQUFFZ0IsUUFBUWQsVUFBVSxJQUMzQ2MsUUFBUWhCLE1BQU07WUFFNUI7UUFHSixPQUFPdUMsUUFBUTNCLE1BQU0sR0FBR2pCLEtBQUtDLEdBQUcsSUFBSTJDLFdBQVc7SUFDbkQ7SUFFQUMsd0JBQXdCbkMsZ0JBQWtDLEVBQWtEO1FBQ3hHLE1BQU04QixtQkFBbUI5QixrQkFDbkJzQixPQUFPRixDQUFBQSxVQUNMQSxRQUFRQyxrQkFBa0IsQ0FBQ00sSUFBSSxDQUFDdEQsQ0FBQUEsTUFDNUJBLElBQUlsQixRQUFRLENBQUNrRCxJQUFJLEtBQUssSUFBSSxDQUFDbEQsUUFBUSxDQUFDa0QsSUFBSTtRQUlwRCxJQUFJLENBQUN5QixrQkFBa0J2QixRQUFRLE9BQU87WUFBRVosUUFBUTtZQUFNQyxNQUFNO1FBQUs7UUFFakUsTUFBTXdDLGdCQUFnQk4saUJBQWlCWCxPQUFPLENBQUNDLENBQUFBLFVBQzNDQSxRQUFRQyxrQkFBa0IsQ0FBQ0YsT0FBTyxDQUFDOUMsQ0FBQUEsTUFDL0JBLElBQUlsQixRQUFRLENBQUNrRCxJQUFJLEtBQUssSUFBSSxDQUFDbEQsUUFBUSxDQUFDa0QsSUFBSSxHQUNsQ2hDLElBQUlKLElBQUksQ0FBQ0csR0FBRyxDQUFDdUMsQ0FBQUEsVUFBWTt3QkFBRWhCLFFBQVFnQixRQUFRaEIsTUFBTTt3QkFBRUMsTUFBTWUsUUFBUWYsSUFBSTtvQkFBQyxNQUN0RSxFQUFFO1FBSWhCLElBQUksQ0FBQ3dDLGNBQWM3QixNQUFNLEVBQUUsT0FBTztZQUFFWixRQUFRO1lBQU1DLE1BQU07UUFBSztRQUU3RCxNQUFNeUMsaUJBQWlCRCxjQUFjNUIsTUFBTSxDQUFDLENBQUNqQixLQUFLK0MsVUFDOUNBLFFBQVEzQyxNQUFNLEdBQUdKLElBQUlJLE1BQU0sR0FBRzJDLFVBQVUvQztRQUc1QyxPQUFPO1lBQUVJLFFBQVEwQyxlQUFlMUMsTUFBTTtZQUFFQyxNQUFNeUMsZUFBZXpDLElBQUk7UUFBQztJQUN0RTtJQUVBMkMsaUJBQXlCO1FBQ3JCLE9BQU8sSUFBSSxDQUFDdEUsSUFBSSxDQUFDdUMsTUFBTSxDQUFDLENBQUN3QixPQUFPM0QsTUFBUTJELFFBQVEzRCxJQUFJdUIsSUFBSSxFQUFFO0lBQzlEO0lBRUE0QyxtQkFBbUJyQyxPQUFzQixFQUFVO1FBQy9DLE9BQU9BLFFBQ0ZtQixNQUFNLENBQUNqRCxDQUFBQSxNQUFPQSxJQUFJbEIsUUFBUSxDQUFDa0QsSUFBSSxLQUFLLElBQUksQ0FBQ2xELFFBQVEsQ0FBQ2tELElBQUksRUFDdERFLE1BQU07SUFDZjtJQUVBa0MsMEJBQWtDO1FBQzlCLE9BQU8sSUFBSSxDQUFDeEUsSUFBSSxDQUFDcUQsTUFBTSxDQUFDakQsQ0FBQUEsTUFBT0EsSUFBSXVCLElBQUksR0FBRyxHQUFHVyxNQUFNO0lBQ3ZEO0lBRUFtQyxnQkFBeUI7UUFDckIsT0FBTyxJQUFJLENBQUN6RSxJQUFJLENBQUMwRCxJQUFJLENBQUN0RCxDQUFBQSxNQUFPQSxJQUFJdUIsSUFBSSxHQUFHO0lBQzVDO0lBRUErQyxVQUFVQyxPQUFnQixFQUFRO1FBQzlCN0Ysb0VBQWtCQSxDQUFDOEYsaUJBQWlCLENBQUMsSUFBSSxFQUFFRDtJQUMvQztJQUVBdEYsZUFBdUM7UUFDbkMsTUFBTUosT0FBK0I7WUFDakNVLElBQUksSUFBSSxDQUFDQSxFQUFFO1lBQ1hDLFdBQVcsSUFBSSxDQUFDQSxTQUFTO1lBQ3pCQyxRQUFRLElBQUksQ0FBQ0EsTUFBTTtZQUNuQlgsVUFBVSxJQUFJLENBQUNBLFFBQVEsQ0FBQ0csWUFBWTtZQUNwQ1csTUFBTSxJQUFJLENBQUNBLElBQUksQ0FBQ0csR0FBRyxDQUFDQyxDQUFBQSxNQUFPQSxJQUFJZixZQUFZO1lBQzNDZ0IsVUFBVSxJQUFJLENBQUNBLFFBQVE7WUFDdkJDLE1BQU0sSUFBSSxDQUFDQSxJQUFJO1lBQ2ZFLFNBQVMsSUFBSSxDQUFDQSxPQUFPO1lBQ3JCQyxjQUFjLElBQUksQ0FBQ0EsWUFBWTtZQUMvQkMsY0FBYyxJQUFJLENBQUNBLFlBQVk7WUFDL0JDLGNBQWMsSUFBSSxDQUFDQSxZQUFZO1lBQy9CdkIsYUFBYSxJQUFJLENBQUNBLFdBQVc7WUFDN0IwQixXQUFXakMsc0VBQW1CQSxDQUFDLElBQUksQ0FBQ2lDLFNBQVM7WUFDN0NDLFdBQVdsQyxzRUFBbUJBLENBQUMsSUFBSSxDQUFDa0MsU0FBUztZQUM3Q0YsYUFBYWhDLHNFQUFtQkEsQ0FBQyxJQUFJLENBQUNnQyxXQUFXO1lBQ2pETixtQkFBbUIsSUFBSSxDQUFDQSxpQkFBaUI7UUFDN0M7UUFFQSxJQUFJLElBQUksQ0FBQ0ssS0FBSyxJQUFJLE1BQU07WUFDcEIzQixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQzJCLEtBQUs7UUFDOUI7UUFFQSxPQUFPM0I7SUFDWDtBQUNGO0FBc0RBLGdEQUFnRDtBQUN6QyxNQUFNNEYsbUJBQW1CO0lBQzlCQyxnQkFBZ0IsQ0FBQ0MsVUFBd0Q7WUFDdkVDLE1BQU07WUFDTkQ7UUFDRjtJQUNBRSxRQUFRLENBQUNGLFVBQWdEO1lBQ3ZEQyxNQUFNO1lBQ05EO1FBQ0Y7SUFDQUcsVUFBVSxDQUFDSCxVQUFrRDtZQUMzREMsTUFBTTtZQUNORDtRQUNGO0lBQ0FJLFNBQVMsQ0FBQ0osVUFBaUQ7WUFDekRDLE1BQU07WUFDTkQ7UUFDRjtJQUNBSyxZQUFZLENBQUNMLFVBQW9EO1lBQy9EQyxNQUFNO1lBQ05EO1FBQ0Y7SUFDQU0sY0FBYyxDQUFDTixVQUFzRDtZQUNuRUMsTUFBTTtZQUNORDtRQUNGO0lBRUFPLGdCQUFnQixDQUFDQztRQUNmLE1BQU1DLGNBQWM7WUFDbEJDLFlBQVk7WUFDWkMsZUFBZTtRQUNqQjtRQUVBLE9BQVFILFdBQVdJLFdBQVc7WUFDNUIsS0FBSztnQkFDSCxPQUFPZCxpQkFBaUJDLGNBQWMsQ0FBQztvQkFDckMsR0FBR1UsV0FBVztvQkFDZDdELE1BQU07d0JBQUM7cUJBQUs7b0JBQ1ppRSxNQUFNO29CQUNObEUsUUFBUTtnQkFDVjtZQUNGLEtBQUs7Z0JBQ0gsT0FBT21ELGlCQUFpQkksTUFBTSxDQUFDO29CQUM3QixHQUFHTyxXQUFXO29CQUNkSyxVQUFVO29CQUNWQyxLQUFLO29CQUNMQyxVQUFVO2dCQUNaO1lBQ0YsS0FBSztnQkFDSCxPQUFPbEIsaUJBQWlCSyxRQUFRLENBQUM7b0JBQy9CLEdBQUdNLFdBQVc7b0JBQ2Q3RCxNQUFNO3dCQUFDO3FCQUFLO29CQUNaaUUsTUFBTTtnQkFDUjtZQUNGLEtBQUs7Z0JBQ0gsT0FBT2YsaUJBQWlCTSxPQUFPLENBQUM7b0JBQzlCLEdBQUdLLFdBQVc7b0JBQ2Q3RCxNQUFNO3dCQUFDO3FCQUFLO29CQUNaaUUsTUFBTTtnQkFDUjtZQUNGLEtBQUs7Z0JBQ0gsT0FBT2YsaUJBQWlCTyxVQUFVLENBQUM7b0JBQ2pDLEdBQUdJLFdBQVc7b0JBQ2RLLFVBQVU7Z0JBQ1o7WUFDRixLQUFLO2dCQUNILE9BQU9oQixpQkFBaUJRLFlBQVksQ0FBQztvQkFDbkMsR0FBR0csV0FBVztvQkFDZDdELE1BQU07d0JBQUM7cUJBQUs7b0JBQ1ppRSxNQUFNO2dCQUNSO1lBQ0Y7Z0JBQ0UsT0FBTztRQUNYO0lBQ0Y7SUFFQUwsWUFBWSxDQUFDUyxXQUF1Q0EsU0FBU2hCLElBQUk7QUFDbkUsRUFBRTtBQXNCSyxNQUFNakY7SUFvQlhmLFlBQVlDLElBQVMsQ0FBRTtRQUNyQixJQUFJLENBQUNVLEVBQUUsR0FBR1YsS0FBS1UsRUFBRSxJQUFJO1FBQ3JCLElBQUksQ0FBQ3lDLElBQUksR0FBR25ELEtBQUttRCxJQUFJLElBQUk7UUFDekIsSUFBSSxDQUFDNkQsVUFBVSxHQUFHaEgsS0FBS2dILFVBQVUsSUFBSWhILEtBQUttRCxJQUFJLEVBQUV1RCxpQkFBaUIxRyxLQUFLVSxFQUFFLElBQUk7UUFDNUUsSUFBSSxDQUFDdUcsV0FBVyxHQUFHakgsS0FBS2lILFdBQVcsSUFBSTtRQUN2QyxJQUFJLENBQUNDLEtBQUssR0FBR2xILEtBQUtrSCxLQUFLLElBQUksRUFBRTtRQUM3QixJQUFJLENBQUNDLFVBQVUsR0FBR25ILEtBQUttSCxVQUFVLElBQUk7UUFDckMsSUFBSSxDQUFDQyxvQkFBb0IsR0FBR3BILEtBQUtvSCxvQkFBb0IsSUFBSTtRQUN6RCxJQUFJLENBQUNULElBQUksR0FBRzNHLEtBQUsyRyxJQUFJLElBQUk7UUFDekIsSUFBSSxDQUFDakUsSUFBSSxHQUFHMUMsS0FBSzBDLElBQUksSUFBSTtRQUN6QixJQUFJLENBQUNELE1BQU0sR0FBR3pDLEtBQUt5QyxNQUFNLElBQUk7UUFDN0IsSUFBSSxDQUFDNEUsTUFBTSxHQUFHLElBQUlDLGVBQWV0SCxLQUFLcUgsTUFBTSxJQUFJLENBQUM7UUFDakQsSUFBSSxDQUFDeEYsU0FBUyxHQUFHbEMsNEVBQXlCQSxDQUFDSyxLQUFLNkIsU0FBUztRQUN6RCxJQUFJLENBQUNDLFNBQVMsR0FBR25DLDRFQUF5QkEsQ0FBQ0ssS0FBSzhCLFNBQVM7UUFDekQsSUFBSSxDQUFDeUYsTUFBTSxHQUFHLENBQUN2SCxLQUFLdUgsTUFBTSxJQUFJLEVBQUUsRUFBRXJHLEdBQUcsQ0FDbkMsQ0FBQ3NHLFFBQWUsSUFBSUMsY0FBY0Q7UUFHcEMsdURBQXVEO1FBQ3ZELElBQUksQ0FBQ0UsZ0JBQWdCLEdBQUcxSCxLQUFLMEgsZ0JBQWdCLElBQUksRUFBRTtRQUNuRCxJQUFJLENBQUNDLGtCQUFrQixHQUFHM0gsS0FBSzJILGtCQUFrQixJQUFJLEVBQUU7UUFDdkQsSUFBSSxDQUFDQyxJQUFJLEdBQUc1SCxLQUFLNEgsSUFBSSxJQUFJLEVBQUU7UUFFM0IsaUVBQWlFO1FBQ2pFLElBQUksT0FBTzVILEtBQUsrRyxRQUFRLEtBQUssVUFBVTtZQUNyQyxJQUFJLENBQUNBLFFBQVEsR0FBRy9HLEtBQUsrRyxRQUFRLElBQUk7UUFDbkMsT0FBTyxJQUFJL0csS0FBSytHLFFBQVEsSUFBSSxPQUFPL0csS0FBSytHLFFBQVEsS0FBSyxVQUFVO1lBQzdELE1BQU1jLGNBQW1CLENBQUM7WUFDMUIsTUFBTUMsZUFBZTlILEtBQUsrRyxRQUFRLENBQUNoQixJQUFJLElBQUkvRixLQUFLK0csUUFBUSxDQUFDckcsRUFBRSxJQUFJO1lBRS9EbUgsWUFBWTlCLElBQUksR0FBRytCO1lBQ25CRCxZQUFZL0IsT0FBTyxHQUFHO2dCQUNwQixHQUFJOUYsS0FBSytHLFFBQVEsQ0FBQ2pCLE9BQU8sSUFBSSxDQUFDLENBQUM7Z0JBQy9CLCtEQUErRDtnQkFDL0QsR0FBSTlGLEtBQUsrRyxRQUFRLENBQUNqQixPQUFPLEVBQUVXLGdCQUFnQjtvQkFDekNBLGVBQWUsSUFBSWdCLGNBQWN6SCxLQUFLK0csUUFBUSxDQUFDakIsT0FBTyxDQUFDVyxhQUFhO2dCQUN0RSxJQUFJLENBQUMsQ0FBQztZQUNSO1lBRUEsMERBQTBEO1lBQzFELElBQUksQ0FBQ3pHLEtBQUsrRyxRQUFRLENBQUNqQixPQUFPLElBQUk5RixLQUFLK0csUUFBUSxDQUFDSixJQUFJLEVBQUU7Z0JBQ2hEa0IsWUFBWS9CLE9BQU8sR0FBRztvQkFDcEIsR0FBRytCLFlBQVkvQixPQUFPO29CQUN0QmEsTUFBTTNHLEtBQUsrRyxRQUFRLENBQUNKLElBQUk7b0JBQ3hCakUsTUFBTTFDLEtBQUsrRyxRQUFRLENBQUNyRSxJQUFJLElBQUk7d0JBQUM7cUJBQUs7b0JBQ2xDRCxRQUFRekMsS0FBSytHLFFBQVEsQ0FBQ3RFLE1BQU0sSUFBSTtvQkFDaEMrRCxZQUFZeEcsS0FBSytHLFFBQVEsQ0FBQ1AsVUFBVSxJQUFJO29CQUN4Q0MsZUFBZXpHLEtBQUsrRyxRQUFRLENBQUNOLGFBQWEsR0FBRyxJQUFJZ0IsY0FBY3pILEtBQUsrRyxRQUFRLENBQUNOLGFBQWEsSUFBSTtnQkFDaEc7WUFDRjtZQUVBLElBQUksQ0FBQ00sUUFBUSxHQUFHYztRQUNsQixPQUFPO1lBQ0wsd0RBQXdEO1lBQ3hELElBQUksQ0FBQ2QsUUFBUSxHQUFHO1FBQ2xCO0lBQ0Y7SUFFQTNHLGVBQXVDO1FBQ3JDLDhCQUE4QjtRQUM5QixNQUFNMkgsZUFBZTtZQUNuQnJILElBQUksSUFBSSxDQUFDcUcsUUFBUSxDQUFDaEIsSUFBSTtZQUN0QixHQUFHLElBQUksQ0FBQ2dCLFFBQVEsQ0FBQ2pCLE9BQU87WUFDeEIsMkVBQTJFO1lBQzNFLEdBQUksSUFBSSxDQUFDaUIsUUFBUSxDQUFDakIsT0FBTyxFQUFFVyxpQkFBaUIsSUFBSSxDQUFDTSxRQUFRLENBQUNqQixPQUFPLENBQUNXLGFBQWEsWUFBWWdCLGdCQUNyRjtnQkFBRWhCLGVBQWUsSUFBSSxDQUFDTSxRQUFRLENBQUNqQixPQUFPLENBQUNXLGFBQWEsQ0FBQ3JHLFlBQVk7WUFBRyxJQUNwRTtnQkFBRXFHLGVBQWU7WUFBSyxDQUFDO1FBQy9CO1FBRUEsTUFBTXpHLE9BQStCO1lBQ25DVSxJQUFJLElBQUksQ0FBQ0EsRUFBRTtZQUNYeUMsTUFBTSxJQUFJLENBQUNBLElBQUk7WUFDZjhELGFBQWEsSUFBSSxDQUFDQSxXQUFXO1lBQzdCRixVQUFVZ0I7WUFDVkwsa0JBQWtCLElBQUksQ0FBQ0EsZ0JBQWdCO1lBQ3ZDQyxvQkFBb0IsSUFBSSxDQUFDQSxrQkFBa0I7WUFDM0NDLE1BQU0sSUFBSSxDQUFDQSxJQUFJO1lBQ2ZMLFFBQVEsSUFBSSxDQUFDQSxNQUFNLENBQUNyRyxHQUFHLENBQUMsQ0FBQ3NHLFFBQVVBLE1BQU1wSCxZQUFZO1lBQ3JEOEcsT0FBTyxJQUFJLENBQUNBLEtBQUs7WUFDakJHLFFBQVEsSUFBSSxDQUFDQSxNQUFNLENBQUNqSCxZQUFZO1lBQ2hDeUIsV0FBV2pDLHNFQUFtQkEsQ0FBQyxJQUFJLENBQUNpQyxTQUFTO1lBQzdDQyxXQUFXbEMsc0VBQW1CQSxDQUFDLElBQUksQ0FBQ2tDLFNBQVM7UUFDL0M7UUFFQSxPQUFPOUI7SUFDVDtBQUNGO0FBS0EsbUJBQW1CO0FBQ1osTUFBTXlIO0lBdUJYMUgsWUFBWUMsSUFBUyxDQUFFO1FBQ3JCLElBQUksQ0FBQ1UsRUFBRSxHQUFHVixLQUFLVSxFQUFFLElBQUk7UUFDckIsSUFBSSxDQUFDc0gsVUFBVSxHQUFHaEksS0FBS2dJLFVBQVUsSUFBSTtRQUNyQyxJQUFJLENBQUNDLFFBQVEsR0FBR2pJLEtBQUtpSSxRQUFRLElBQUk7UUFDakMsSUFBSSxDQUFDckgsTUFBTSxHQUFHWixLQUFLWSxNQUFNLElBQUk7UUFDN0IsSUFBSSxDQUFDc0gsUUFBUSxHQUFHbEksS0FBS2tJLFFBQVEsSUFBSTtRQUNqQyxJQUFJLENBQUNDLFFBQVEsR0FBR25JLEtBQUttSSxRQUFRLElBQUk7UUFDakMsSUFBSSxDQUFDbEksUUFBUSxHQUFHRCxLQUFLQyxRQUFRLElBQUk7UUFDakMsSUFBSSxDQUFDbUksWUFBWSxHQUFHLElBQUkxSSxxREFBWUEsQ0FBQ00sS0FBS29JLFlBQVksSUFBSSxDQUFDO1FBQzNELElBQUksQ0FBQ0MsT0FBTyxHQUFHckksS0FBS3FJLE9BQU87UUFDM0IsSUFBSSxDQUFDQyxNQUFNLEdBQUd0SSxLQUFLc0ksTUFBTTtRQUN6QixJQUFJLENBQUNDLFNBQVMsR0FBR3ZJLEtBQUt1SSxTQUFTO1FBQy9CLElBQUksQ0FBQ3BCLFVBQVUsR0FBR25ILEtBQUttSCxVQUFVLElBQStCO1FBQ2hFLElBQUksQ0FBQ3FCLG9CQUFvQixHQUFHeEksS0FBS3dJLG9CQUFvQixJQUFJO1FBQ3pELElBQUksQ0FBQ0MsaUJBQWlCLEdBQUd6SSxLQUFLeUksaUJBQWlCLElBQUk7UUFDbkQsSUFBSSxDQUFDQyxzQkFBc0IsR0FBRzFJLEtBQUswSSxzQkFBc0IsSUFBSTtRQUM3RCxJQUFJLENBQUNDLGlCQUFpQixHQUFHM0ksS0FBSzJJLGlCQUFpQixJQUFJO1FBQ25ELElBQUksQ0FBQ0MsVUFBVSxHQUFHNUksS0FBSzRJLFVBQVUsSUFBSTtRQUNyQyxJQUFJLENBQUNDLEtBQUssR0FBRzdJLEtBQUs2SSxLQUFLLElBQUk7UUFDM0IsSUFBSSxDQUFDQyxVQUFVLEdBQUc5SSxLQUFLOEksVUFBVSxJQUFJO1FBQ3JDLElBQUksQ0FBQ2pILFNBQVMsR0FBR2xDLDRFQUF5QkEsQ0FBQ0ssS0FBSzZCLFNBQVM7UUFDekQsSUFBSSxDQUFDQyxTQUFTLEdBQUduQyw0RUFBeUJBLENBQUNLLEtBQUs4QixTQUFTO0lBQzNEO0lBRUExQixlQUF1QztRQUNyQyxNQUFNSixPQUErQjtZQUNuQ1UsSUFBSSxJQUFJLENBQUNBLEVBQUU7WUFDWHNILFlBQVksSUFBSSxDQUFDQSxVQUFVO1lBQzNCQyxVQUFVLElBQUksQ0FBQ0EsUUFBUTtZQUN2QnJILFFBQVEsSUFBSSxDQUFDQSxNQUFNO1lBQ25Cc0gsVUFBVSxJQUFJLENBQUNBLFFBQVE7WUFDdkJDLFVBQVUsSUFBSSxDQUFDQSxRQUFRO1lBQ3ZCbEksVUFBVSxJQUFJLENBQUNBLFFBQVE7WUFDdkJtSSxjQUFjLElBQUksQ0FBQ0EsWUFBWSxDQUFDaEksWUFBWTtZQUM1QytHLFlBQVksSUFBSSxDQUFDQSxVQUFVO1lBQzNCcUIsc0JBQXNCLElBQUksQ0FBQ0Esb0JBQW9CO1lBQy9DQyxtQkFBbUIsSUFBSSxDQUFDQSxpQkFBaUI7WUFDekNDLHdCQUF3QixJQUFJLENBQUNBLHNCQUFzQjtZQUNuREMsbUJBQW1CLElBQUksQ0FBQ0EsaUJBQWlCO1lBQ3pDQyxZQUFZLElBQUksQ0FBQ0EsVUFBVTtZQUMzQi9HLFdBQVdqQyxzRUFBbUJBLENBQUMsSUFBSSxDQUFDaUMsU0FBUztZQUM3Q0MsV0FBV2xDLHNFQUFtQkEsQ0FBQyxJQUFJLENBQUNrQyxTQUFTO1FBQy9DO1FBRUEsSUFBSSxJQUFJLENBQUN1RyxPQUFPLEVBQUVySSxLQUFLcUksT0FBTyxHQUFHLElBQUksQ0FBQ0EsT0FBTztRQUM3QyxJQUFJLElBQUksQ0FBQ0MsTUFBTSxFQUFFdEksS0FBS3NJLE1BQU0sR0FBRyxJQUFJLENBQUNBLE1BQU07UUFDMUMsSUFBSSxJQUFJLENBQUNDLFNBQVMsRUFBRXZJLEtBQUt1SSxTQUFTLEdBQUcsSUFBSSxDQUFDQSxTQUFTO1FBQ25ELElBQUksSUFBSSxDQUFDTSxLQUFLLEtBQUssTUFBTTdJLEtBQUs2SSxLQUFLLEdBQUcsSUFBSSxDQUFDQSxLQUFLO1FBQ2hELElBQUksSUFBSSxDQUFDQyxVQUFVLEtBQUssTUFBTTlJLEtBQUs4SSxVQUFVLEdBQUcsSUFBSSxDQUFDQSxVQUFVO1FBRS9ELE9BQU85STtJQUNUO0FBQ0Y7QUFFTyxNQUFNK0k7SUFZWGhKLFlBQVlDLElBQVMsQ0FBRTtRQUNyQixJQUFJLENBQUNVLEVBQUUsR0FBR1YsS0FBS1UsRUFBRSxJQUFJO1FBQ3JCLElBQUksQ0FBQ3NELFlBQVksR0FBR2hFLEtBQUtnRSxZQUFZLElBQUk7UUFDekMsSUFBSSxDQUFDL0QsUUFBUSxHQUFHRCxLQUFLQyxRQUFRO1FBQzdCLElBQUksQ0FBQytJLGFBQWEsR0FBR2hKLEtBQUtnSixhQUFhO1FBQ3ZDLElBQUksQ0FBQ2pDLFFBQVEsR0FBRy9HLEtBQUsrRyxRQUFRO1FBQzdCLElBQUksQ0FBQ2tDLEtBQUssR0FBR2pKLEtBQUtpSixLQUFLLElBQUk7UUFDM0IsSUFBSSxDQUFDMUgsT0FBTyxHQUFHdkIsS0FBS3VCLE9BQU8sSUFBSTtRQUMvQixJQUFJLENBQUMySCxTQUFTLEdBQUdsSixLQUFLa0osU0FBUyxJQUFJO1FBQ25DLElBQUksQ0FBQ2hKLE9BQU8sR0FBR0YsS0FBS0UsT0FBTyxJQUFJO1FBQy9CLElBQUksQ0FBQ2lKLFlBQVksR0FBR25KLEtBQUttSixZQUFZLElBQUksRUFBRTtJQUM3QztJQUVBL0ksZUFBdUM7UUFDckMsT0FBTztZQUNMTSxJQUFJLElBQUksQ0FBQ0EsRUFBRTtZQUNYc0QsY0FBYyxJQUFJLENBQUNBLFlBQVk7WUFDL0IvRCxVQUFVLElBQUksQ0FBQ0EsUUFBUSxDQUFDRyxZQUFZO1lBQ3BDNEksZUFBZSxJQUFJLENBQUNBLGFBQWE7WUFDakNqQyxVQUFVO2dCQUNSckcsSUFBSSxJQUFJLENBQUNxRyxRQUFRLENBQUNoQixJQUFJO2dCQUN0QixHQUFHLElBQUksQ0FBQ2dCLFFBQVEsQ0FBQ2pCLE9BQU87Z0JBQ3hCLEdBQUksSUFBSSxDQUFDaUIsUUFBUSxDQUFDakIsT0FBTyxFQUFFVyxnQkFDdkI7b0JBQUVBLGVBQWUsSUFBSSxDQUFDTSxRQUFRLENBQUNqQixPQUFPLENBQUNXLGFBQWEsQ0FBQ3JHLFlBQVk7Z0JBQUcsSUFDcEUsQ0FBQyxDQUFDO1lBQ1I7WUFDQTZJLE9BQU8sSUFBSSxDQUFDQSxLQUFLO1lBQ2pCMUgsU0FBUyxJQUFJLENBQUNBLE9BQU87WUFDckIySCxXQUFXLElBQUksQ0FBQ0EsU0FBUztZQUN6QmhKLFNBQVMsSUFBSSxDQUFDQSxPQUFPO1lBQ3JCaUosY0FBYyxJQUFJLENBQUNBLFlBQVksQ0FBQ2pJLEdBQUcsQ0FBQ2tJLENBQUFBLEtBQU1BLEdBQUdoSixZQUFZO1FBQzNEO0lBQ0Y7QUFFRjtBQUVBLG9CQUFvQjtBQUNiLE1BQU1rSDtJQUlYdkgsWUFBWUMsSUFBUyxDQUFFO1FBQ3JCLElBQUksQ0FBQ1ksTUFBTSxHQUFHWixLQUFLWSxNQUFNLElBQUk7UUFDN0IsSUFBSSxDQUFDcUgsUUFBUSxHQUFHakksS0FBS2lJLFFBQVEsSUFBSTtJQUNuQztJQUVBN0gsZUFBdUM7UUFDckMsT0FBTztZQUNMUSxRQUFRLElBQUksQ0FBQ0EsTUFBTTtZQUNuQnFILFVBQVUsSUFBSSxDQUFDQSxRQUFRO1FBQ3pCO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL215LWFwcC8uL3NyYy9hcGkvZmlyZWJhc2UvZXhlcmNpc2UvdHlwZXMudHM/ZWI4MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXBzQW5kV2VpZ2h0TG9nLCBXb3Jrb3V0U3VtbWFyeSwgV29ya291dCB9IGZyb20gXCIuLi93b3Jrb3V0L3R5cGVzXCI7XG5pbXBvcnQgeyBQcm9maWxlSW1hZ2UsIFVzZXIgfSBmcm9tICcuLi91c2VyL3R5cGVzJztcbmltcG9ydCB7IERvY3VtZW50U25hcHNob3QgfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xuaW1wb3J0IHsgY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcCwgZGF0ZVRvVW5peFRpbWVzdGFtcCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL2Zvcm1hdERhdGUnO1xuaW1wb3J0IHsgZXhlcmNpc2VMb2dTZXJ2aWNlIH0gZnJvbSAnLi4vZXhlcmNpc2VMb2cvc2VydmljZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXhlcmNpc2VTZXJ2aWNlIHtcbiAgZmV0Y2hFeGVyY2lzZXM6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIGZldGNoUGFnaW5hdGVkRXhlcmNpc2VzOiAoXG4gICAgICBsYXN0RG9jOiBEb2N1bWVudFNuYXBzaG90IHwgbnVsbCxcbiAgICAgIHBhZ2VTaXplPzogbnVtYmVyXG4gICkgPT4gUHJvbWlzZTx7IGV4ZXJjaXNlczogRXhlcmNpc2VbXTsgbGFzdFZpc2libGU6IERvY3VtZW50U25hcHNob3QgfCBudWxsIH0+O1xuICBmZXRjaEZlYXR1cmVkRXhlcmNpc2VzV2l0aFZpZGVvczogKGxpbWl0PzogbnVtYmVyKSA9PiBQcm9taXNlPEV4ZXJjaXNlW10+O1xuICBhbGxFeGVyY2lzZXM6IEV4ZXJjaXNlW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXhlcmNpc2VDb21tZW50IHtcbiAgaWQ6IHN0cmluZztcbiAgdXNlcm5hbWU6IHN0cmluZztcbiAgdGV4dDogc3RyaW5nO1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIHVwZGF0ZWRBdDogRGF0ZTtcbn1cblxuLy8gSW50ZXJmYWNlc1xuZXhwb3J0IGNsYXNzIEV4ZXJjaXNlUmVmZXJlbmNlIHtcbiAgZXhlcmNpc2U6IEV4ZXJjaXNlO1xuICBncm91cElkOiBudW1iZXI7XG4gIGlzQ29tcGxldGVkPzogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3RvcihkYXRhOiB7XG4gICAgZXhlcmNpc2U6IEV4ZXJjaXNlO1xuICAgIGdyb3VwSWQ/OiBudW1iZXI7XG4gICAgaXNDb21wbGV0ZWQ/OiBib29sZWFuO1xuICB9KSB7XG4gICAgdGhpcy5leGVyY2lzZSA9IGRhdGEuZXhlcmNpc2U7XG4gICAgdGhpcy5ncm91cElkID0gZGF0YS5ncm91cElkIHx8IDA7XG4gICAgdGhpcy5pc0NvbXBsZXRlZCA9IGRhdGEuaXNDb21wbGV0ZWQgfHwgZmFsc2U7XG4gIH1cblxuICB0b0RpY3Rpb25hcnkoKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGV4ZXJjaXNlOiB0aGlzLmV4ZXJjaXNlLnRvRGljdGlvbmFyeSgpLFxuICAgICAgZ3JvdXBJZDogdGhpcy5ncm91cElkLFxuICAgICAgaXNDb21wbGV0ZWQ6IHRoaXMuaXNDb21wbGV0ZWRcbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBlbnVtIEJvZHlQYXJ0IHtcbiAgICBCaWNlcHMgPSAnYmljZXBzJyxcbiAgICBUcmljZXBzID0gJ3RyaWNlcHMnLFxuICAgIENoZXN0ID0gJ2NoZXN0JyxcbiAgICBDYWx2ZXMgPSAnY2FsdmVzJyxcbiAgICBBYnMgPSAnYWJzJyxcbiAgICBIYW1zdHJpbmdzID0gJ2hhbXN0cmluZ3MnLFxuICAgIEJhY2sgPSAnYmFjaycsXG4gICAgR2x1dGVzID0gJ2dsdXRlcycsXG4gICAgUXVhZHJpY2VwcyA9ICdxdWFkcmljZXBzJyxcbiAgICBGb3JlYXJtcyA9ICdmb3JlYXJtcycsXG4gICAgU2hvdWxkZXJzID0gJ3Nob3VsZGVycycsXG4gICAgTG93ZXJiYWNrID0gJ2xvd2VyYmFjaycsXG4gICAgLy8gYWR2YW5jZWRcbiAgICBMYXRzID0gJ2xhdHMnLFxuICAgIFRyYXBzID0gJ3RyYXBzJyxcbiAgICBSaG9tYm9pZHMgPSAncmhvbWJvaWRzJyxcbiAgICBEZWx0b2lkcyA9ICdkZWx0b2lkcycsXG4gICAgRnVsbGJvZHkgPSAnZnVsbGJvZHknXG59XG4gIFxuLy8gRnVuY3Rpb24gdG8gY2hlY2sgaWYgYSBib2R5IHBhcnQgaXMgYWR2YW5jZWRcbmV4cG9ydCBmdW5jdGlvbiBpc0FkdmFuY2VkQm9keVBhcnQoYm9keVBhcnQ6IEJvZHlQYXJ0KTogYm9vbGVhbiB7XG4gIHJldHVybiBbQm9keVBhcnQuVHJhcHMsIEJvZHlQYXJ0LkxhdHMsIEJvZHlQYXJ0LlJob21ib2lkcywgQm9keVBhcnQuRGVsdG9pZHNdLmluY2x1ZGVzKGJvZHlQYXJ0KTtcbn1cblxudHlwZSBFeGVyY2lzZVZpc2liaWxpdHkgPSAnbGltaXRlZCcgfCAnc2VjcmV0JyB8ICdsaXZlJztcblxuZXhwb3J0IGNsYXNzIEV4ZXJjaXNlTG9nIHtcbiAgaWQ6IHN0cmluZztcbiAgd29ya291dElkOiBzdHJpbmc7XG4gIHVzZXJJZDogc3RyaW5nO1xuICBleGVyY2lzZTogRXhlcmNpc2U7XG4gIGxvZ3M6IFJlcHNBbmRXZWlnaHRMb2dbXTtcbiAgZmVlZGJhY2s6IHN0cmluZztcbiAgbm90ZTogc3RyaW5nO1xuICByZWNvbW1lbmRlZFdlaWdodD86IHN0cmluZztcbiAgaXNTcGxpdDogYm9vbGVhbjtcbiAgaXNCb2R5V2VpZ2h0OiBib29sZWFuO1xuICBsb2dTdWJtaXR0ZWQ6IGJvb2xlYW47XG4gIGxvZ0lzRWRpdGluZzogYm9vbGVhbjtcbiAgaXNDb21wbGV0ZWQ6IGJvb2xlYW47XG4gIG9yZGVyPzogbnVtYmVyIHwgbnVsbDtcbiAgY29tcGxldGVkQXQ6IERhdGU7XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbiAgdXBkYXRlZEF0OiBEYXRlO1xuXG4gIGNvbnN0cnVjdG9yKGRhdGE6IGFueSkge1xuICAgICAgdGhpcy5pZCA9IGRhdGEuaWQgfHwgJyc7XG4gICAgICB0aGlzLndvcmtvdXRJZCA9IGRhdGEud29ya291dElkIHx8ICcnO1xuICAgICAgdGhpcy51c2VySWQgPSBkYXRhLnVzZXJJZCB8fCAnJztcbiAgICAgIFxuICAgICAgLy8gRW5zdXJlIGV4ZXJjaXNlIGlzIGFsd2F5cyBjb25zdHJ1Y3RlZCBwcm9wZXJseVxuICAgICAgaWYgKCFkYXRhLmV4ZXJjaXNlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRXhlcmNpc2UgaXMgcmVxdWlyZWQgZm9yIEV4ZXJjaXNlTG9nJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRoaXMuZXhlcmNpc2UgPSBuZXcgRXhlcmNpc2UoXG4gICAgICAgIGRhdGEuZXhlcmNpc2UgaW5zdGFuY2VvZiBFeGVyY2lzZSBcbiAgICAgICAgICA/IGRhdGEuZXhlcmNpc2UudG9EaWN0aW9uYXJ5KCkgXG4gICAgICAgICAgOiBkYXRhLmV4ZXJjaXNlXG4gICAgICApO1xuXG4gICAgICAvLyBFbnN1cmUgbG9ncyBhcmUgYWx3YXlzIGNvbnN0cnVjdGVkIHByb3Blcmx5XG4gICAgICB0aGlzLmxvZ3MgPSBBcnJheS5pc0FycmF5KGRhdGEubG9ncykgXG4gICAgICAgID8gZGF0YS5sb2dzLm1hcCgobG9nOiBhbnkpID0+IG5ldyBSZXBzQW5kV2VpZ2h0TG9nKGxvZykpXG4gICAgICAgIDogW107XG5cbiAgICAgIHRoaXMuZmVlZGJhY2sgPSBkYXRhLmZlZWRiYWNrIHx8ICcnO1xuICAgICAgdGhpcy5ub3RlID0gZGF0YS5ub3RlIHx8ICcnO1xuICAgICAgdGhpcy5yZWNvbW1lbmRlZFdlaWdodCA9IGRhdGEucmVjb21tZW5kZWRXZWlnaHQgfHwgJ2NhbGN1bGF0aW5nLi4uJztcbiAgICAgIHRoaXMuaXNTcGxpdCA9IGRhdGEuaXNTcGxpdCB8fCBmYWxzZTtcbiAgICAgIHRoaXMuaXNCb2R5V2VpZ2h0ID0gZGF0YS5pc0JvZHlXZWlnaHQgfHwgZmFsc2U7XG4gICAgICB0aGlzLmxvZ1N1Ym1pdHRlZCA9IGRhdGEubG9nU3VibWl0dGVkIHx8IGZhbHNlO1xuICAgICAgdGhpcy5sb2dJc0VkaXRpbmcgPSBkYXRhLmxvZ0lzRWRpdGluZyB8fCBmYWxzZTtcbiAgICAgIHRoaXMuaXNDb21wbGV0ZWQgPSBkYXRhLmlzQ29tcGxldGVkIHx8IGZhbHNlO1xuICAgICAgdGhpcy5vcmRlciA9IGRhdGEub3JkZXIgfHwgbnVsbDtcbiAgICAgIHRoaXMuY29tcGxldGVkQXQgPSBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY29tcGxldGVkQXQpO1xuICAgICAgdGhpcy5jcmVhdGVkQXQgPSBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY3JlYXRlZEF0KTtcbiAgICAgIHRoaXMudXBkYXRlZEF0ID0gY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLnVwZGF0ZWRBdCk7XG4gIH1cblxuICBzZXRJc1N1Ym1pdHRlZChpc1N1Ym1pdHRlZDogYm9vbGVhbik6IHZvaWQge1xuICAgICAgdGhpcy5sb2dTdWJtaXR0ZWQgPSBpc1N1Ym1pdHRlZDtcbiAgfVxuXG4gIGZldGNoVG90YWxXZWlnaHRMaWZ0ZWQodXNlcjogVXNlcik6IG51bWJlciB7XG4gICAgICBjb25zdCBib2R5V2VpZ2h0ID0gTWF0aC5tYXgodXNlcj8uYm9keVdlaWdodD8uYXQoLTEpPy5uZXdXZWlnaHQgfHwgMTUwLCAxKTtcblxuICAgICAgbGV0IHRvdGFsV2VpZ2h0TGlmdGVkID0gMDtcblxuICAgICAgZm9yIChjb25zdCBsb2cgb2YgdGhpcy5sb2dzKSB7XG4gICAgICAgICAgdG90YWxXZWlnaHRMaWZ0ZWQgKz0gKChsb2cud2VpZ2h0ICsgKGxvZy5pc0JvZHlXZWlnaHQgPyBib2R5V2VpZ2h0IDogMCkpICogbG9nLnJlcHMpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChsb2cuaXNTcGxpdCkge1xuICAgICAgICAgICAgICB0b3RhbFdlaWdodExpZnRlZCArPSAobG9nLmxlZnRXZWlnaHQgKiBsb2cubGVmdFJlcHMpO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHRvdGFsV2VpZ2h0TGlmdGVkO1xuICB9XG5cbiAgY2FsY3VsYXRlV29ya1Njb3JlKHVzZXI6IFVzZXIsIHdvcmtvdXRJZDogc3RyaW5nIHwgbnVsbCwgd29ya291dFN1bW1hcmllczogV29ya291dFN1bW1hcnlbXSk6IG51bWJlciB7XG4gICAgICBjb25zdCBib2R5V2VpZ2h0ID0gTWF0aC5tYXgodXNlcj8uYm9keVdlaWdodD8uYXQoLTEpPy5uZXdXZWlnaHQgfHwgMTUwLCAxKTtcbiAgICAgIGNvbnN0IGludGVuc2l0eVdlaWdodCA9IDAuNDtcbiAgICAgIGNvbnN0IHZvbHVtZVdlaWdodCA9IDAuNDtcblxuICAgICAgY29uc3QgYWxsTG9ncyA9IHRoaXMuZ2V0TG9nc0ZvckV4ZXJjaXNlKHdvcmtvdXRTdW1tYXJpZXMsIHRoaXMuZXhlcmNpc2UubmFtZSk7XG4gICAgICBjb25zdCBhdmVyYWdlVG90YWxXZWlnaHQgPSBhbGxMb2dzLmxlbmd0aCA9PT0gMCA/IFxuICAgICAgICAgIDAgOiBhbGxMb2dzLnJlZHVjZSgoc3VtLCBsb2cpID0+IHN1bSArIGxvZy53ZWlnaHQsIDApIC8gYWxsTG9ncy5sZW5ndGg7XG5cbiAgICAgIGxldCB3b3JrU2NvcmUgPSAwO1xuXG4gICAgICBmb3IgKGNvbnN0IGxvZ0l0ZW0gb2YgdGhpcy5sb2dzKSB7XG4gICAgICAgICAgY29uc3QgdG90YWxXZWlnaHQgPSBsb2dJdGVtLndlaWdodCArIGJvZHlXZWlnaHQ7XG4gICAgICAgICAgY29uc3QgaW50ZW5zaXR5RmFjdG9yID0gdG90YWxXZWlnaHQgLyBib2R5V2VpZ2h0O1xuICAgICAgICAgIGNvbnN0IHZvbHVtZUZhY3RvciA9IGxvZ0l0ZW0ucmVwcztcblxuICAgICAgICAgIGNvbnN0IHBlcmNlbnRhZ2VPZkF2ZXJhZ2UgPSB0b3RhbFdlaWdodCAvIE1hdGgubWF4KGF2ZXJhZ2VUb3RhbFdlaWdodCwgMSkgKiAxMDA7XG4gICAgICAgICAgbGV0IHByb2dyZXNzaXZlU2NvcmUgPSAwO1xuXG4gICAgICAgICAgaWYgKHBlcmNlbnRhZ2VPZkF2ZXJhZ2UgPj0gOTApIHByb2dyZXNzaXZlU2NvcmUgPSA0MDtcbiAgICAgICAgICBlbHNlIGlmIChwZXJjZW50YWdlT2ZBdmVyYWdlID49IDgwKSBwcm9ncmVzc2l2ZVNjb3JlID0gMzU7XG4gICAgICAgICAgZWxzZSBpZiAocGVyY2VudGFnZU9mQXZlcmFnZSA+PSA3MCkgcHJvZ3Jlc3NpdmVTY29yZSA9IDMwO1xuXG4gICAgICAgICAgd29ya1Njb3JlICs9IChpbnRlbnNpdHlGYWN0b3IgKiB2b2x1bWVGYWN0b3IgKiBpbnRlbnNpdHlXZWlnaHQpICsgKHByb2dyZXNzaXZlU2NvcmUgKiB2b2x1bWVXZWlnaHQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gTWF0aC5yb3VuZCh3b3JrU2NvcmUpO1xuICB9XG5cbiAgZ2V0TG9nc0ZvckV4ZXJjaXNlKHdvcmtvdXRTdW1tYXJpZXM6IFdvcmtvdXRTdW1tYXJ5W10sIGV4ZXJjaXNlTmFtZTogc3RyaW5nKTogUmVwc0FuZFdlaWdodExvZ1tdIHtcbiAgICAgIHJldHVybiB3b3Jrb3V0U3VtbWFyaWVzXG4gICAgICAgICAgPy5mbGF0TWFwKHN1bW1hcnkgPT4gc3VtbWFyeS5leGVyY2lzZXNDb21wbGV0ZWQpXG4gICAgICAgICAgLmZpbHRlcihsb2cgPT4gbG9nLmV4ZXJjaXNlLm5hbWUgPT09IGV4ZXJjaXNlTmFtZSlcbiAgICAgICAgICAuZmxhdE1hcChsb2cgPT4gbG9nLmxvZ3MpIHx8IFtdO1xuICB9XG5cbiAgY2hlY2tJZkFueVBhc3RMb2dzV2VyZUJvZHlXZWlnaHQod29ya291dFN1bW1hcmllczogV29ya291dFN1bW1hcnlbXSk6IHsgXG4gICAgICBoYXNCb2R5V2VpZ2h0TG9nczogYm9vbGVhbiwgXG4gICAgICBhdmVyYWdlV2VpZ2h0OiBudW1iZXIgXG4gIH0ge1xuICAgICAgY29uc3QgYWxsTG9nSXRlbXMgPSB3b3Jrb3V0U3VtbWFyaWVzXG4gICAgICAgICAgLmZsYXRNYXAoc3VtbWFyeSA9PiBzdW1tYXJ5LmV4ZXJjaXNlc0NvbXBsZXRlZClcbiAgICAgICAgICAuZmlsdGVyKGxvZyA9PiBsb2cuZXhlcmNpc2UubmFtZSA9PT0gdGhpcy5leGVyY2lzZS5uYW1lKVxuICAgICAgICAgIC5mbGF0TWFwKGxvZyA9PiBsb2cubG9ncyk7XG5cbiAgICAgIGNvbnN0IG5vbkJvZHlXZWlnaHRMb2dzID0gYWxsTG9nSXRlbXMuZmlsdGVyKGxvZyA9PiAhbG9nLmlzQm9keVdlaWdodCk7XG4gICAgICBjb25zdCBoYXNCb2R5V2VpZ2h0TG9ncyA9IGFsbExvZ0l0ZW1zLnNvbWUobG9nID0+IGxvZy5pc0JvZHlXZWlnaHQpO1xuXG4gICAgICBpZiAobm9uQm9keVdlaWdodExvZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIHsgaGFzQm9keVdlaWdodExvZ3MsIGF2ZXJhZ2VXZWlnaHQ6IDAgfTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdG90YWxXZWlnaHQgPSBub25Cb2R5V2VpZ2h0TG9ncy5yZWR1Y2UoKHN1bSwgbG9nKSA9PiBzdW0gKyBsb2cud2VpZ2h0LCAwKTtcbiAgICAgIGNvbnN0IGF2ZXJhZ2VXZWlnaHQgPSB0b3RhbFdlaWdodCAvIG5vbkJvZHlXZWlnaHRMb2dzLmxlbmd0aDtcblxuICAgICAgcmV0dXJuIHsgaGFzQm9keVdlaWdodExvZ3MsIGF2ZXJhZ2VXZWlnaHQgfTtcbiAgfVxuXG4gIGZldGNoSGlnaGVzdFRXTCh3b3Jrb3V0U3VtbWFyaWVzOiBXb3Jrb3V0U3VtbWFyeVtdLCB1c2VyOiBVc2VyKTogbnVtYmVyIHwgbnVsbCB7XG4gICAgICBjb25zdCBleGVyY2lzZVdvcmtvdXRzID0gd29ya291dFN1bW1hcmllc1xuICAgICAgICAgID8uZmlsdGVyKHN1bW1hcnkgPT4gXG4gICAgICAgICAgICAgIHN1bW1hcnkuZXhlcmNpc2VzQ29tcGxldGVkLnNvbWUobG9nID0+IFxuICAgICAgICAgICAgICAgICAgbG9nLmV4ZXJjaXNlLm5hbWUgPT09IHRoaXMuZXhlcmNpc2UubmFtZVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgKTtcblxuICAgICAgaWYgKCFleGVyY2lzZVdvcmtvdXRzPy5sZW5ndGgpIHJldHVybiBudWxsO1xuXG4gICAgICBjb25zdCB0d2xzID0gZXhlcmNpc2VXb3Jrb3V0cy5tYXAoc3VtbWFyeSA9PlxuICAgICAgICAgIHN1bW1hcnkuZXhlcmNpc2VzQ29tcGxldGVkLnJlZHVjZSgodG90YWwsIGxvZykgPT5cbiAgICAgICAgICAgICAgbG9nLmV4ZXJjaXNlLm5hbWUgPT09IHRoaXMuZXhlcmNpc2UubmFtZVxuICAgICAgICAgICAgICAgICAgPyB0b3RhbCArIGxvZy5mZXRjaFRvdGFsV2VpZ2h0TGlmdGVkKHVzZXIpXG4gICAgICAgICAgICAgICAgICA6IHRvdGFsXG4gICAgICAgICAgLCAwKVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIE1hdGgubWF4KC4uLnR3bHMpO1xuICB9XG5cbiAgc3RhdGljIGZldGNoSGlnaGVzdFdlaWdodExpZnRlZEZvckV4ZXJjaXNlKGV4ZXJjaXNlTmFtZTogc3RyaW5nLCB3b3Jrb3V0U3VtbWFyaWVzOiBXb3Jrb3V0U3VtbWFyeVtdKTogbnVtYmVyIHwgbnVsbCB7XG4gICAgICBjb25zdCBleGVyY2lzZVdvcmtvdXRzID0gd29ya291dFN1bW1hcmllc1xuICAgICAgICAgID8uZmlsdGVyKHN1bW1hcnkgPT5cbiAgICAgICAgICAgICAgc3VtbWFyeS5leGVyY2lzZXNDb21wbGV0ZWQuc29tZShsb2cgPT5cbiAgICAgICAgICAgICAgICAgIGxvZy5leGVyY2lzZS5uYW1lID09PSBleGVyY2lzZU5hbWVcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICk7XG5cbiAgICAgIGlmICghZXhlcmNpc2VXb3Jrb3V0cz8ubGVuZ3RoKSByZXR1cm4gbnVsbDtcblxuICAgICAgY29uc3Qgd2VpZ2h0cyA9IGV4ZXJjaXNlV29ya291dHMuZmxhdE1hcChzdW1tYXJ5ID0+XG4gICAgICAgICAgc3VtbWFyeS5leGVyY2lzZXNDb21wbGV0ZWQuZmxhdE1hcChsb2cgPT4ge1xuICAgICAgICAgICAgICBpZiAobG9nLmV4ZXJjaXNlLm5hbWUgIT09IGV4ZXJjaXNlTmFtZSkgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICByZXR1cm4gbG9nLmxvZ3MubWFwKGxvZ0l0ZW0gPT5cbiAgICAgICAgICAgICAgICAgIGxvZ0l0ZW0uaXNTcGxpdFxuICAgICAgICAgICAgICAgICAgICAgID8gTWF0aC5tYXgobG9nSXRlbS53ZWlnaHQsIGxvZ0l0ZW0ubGVmdFdlaWdodClcbiAgICAgICAgICAgICAgICAgICAgICA6IGxvZ0l0ZW0ud2VpZ2h0XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiB3ZWlnaHRzLmxlbmd0aCA/IE1hdGgubWF4KC4uLndlaWdodHMpIDogbnVsbDtcbiAgfVxuXG4gIGZldGNoSGlnaGVzdFdlaWdodEluU2V0KHdvcmtvdXRTdW1tYXJpZXM6IFdvcmtvdXRTdW1tYXJ5W10pOiB7IHdlaWdodDogbnVtYmVyIHwgbnVsbCwgcmVwczogbnVtYmVyIHwgbnVsbCB9IHtcbiAgICAgIGNvbnN0IGV4ZXJjaXNlV29ya291dHMgPSB3b3Jrb3V0U3VtbWFyaWVzXG4gICAgICAgICAgPy5maWx0ZXIoc3VtbWFyeSA9PlxuICAgICAgICAgICAgICBzdW1tYXJ5LmV4ZXJjaXNlc0NvbXBsZXRlZC5zb21lKGxvZyA9PlxuICAgICAgICAgICAgICAgICAgbG9nLmV4ZXJjaXNlLm5hbWUgPT09IHRoaXMuZXhlcmNpc2UubmFtZVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgKTtcblxuICAgICAgaWYgKCFleGVyY2lzZVdvcmtvdXRzPy5sZW5ndGgpIHJldHVybiB7IHdlaWdodDogbnVsbCwgcmVwczogbnVsbCB9O1xuXG4gICAgICBjb25zdCB3ZWlnaHRBbmRSZXBzID0gZXhlcmNpc2VXb3Jrb3V0cy5mbGF0TWFwKHN1bW1hcnkgPT5cbiAgICAgICAgICBzdW1tYXJ5LmV4ZXJjaXNlc0NvbXBsZXRlZC5mbGF0TWFwKGxvZyA9PlxuICAgICAgICAgICAgICBsb2cuZXhlcmNpc2UubmFtZSA9PT0gdGhpcy5leGVyY2lzZS5uYW1lXG4gICAgICAgICAgICAgICAgICA/IGxvZy5sb2dzLm1hcChsb2dJdGVtID0+ICh7IHdlaWdodDogbG9nSXRlbS53ZWlnaHQsIHJlcHM6IGxvZ0l0ZW0ucmVwcyB9KSlcbiAgICAgICAgICAgICAgICAgIDogW11cbiAgICAgICAgICApXG4gICAgICApO1xuXG4gICAgICBpZiAoIXdlaWdodEFuZFJlcHMubGVuZ3RoKSByZXR1cm4geyB3ZWlnaHQ6IG51bGwsIHJlcHM6IG51bGwgfTtcblxuICAgICAgY29uc3QgbWF4V2VpZ2h0RW50cnkgPSB3ZWlnaHRBbmRSZXBzLnJlZHVjZSgobWF4LCBjdXJyZW50KSA9PlxuICAgICAgICAgIGN1cnJlbnQud2VpZ2h0ID4gbWF4LndlaWdodCA/IGN1cnJlbnQgOiBtYXhcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiB7IHdlaWdodDogbWF4V2VpZ2h0RW50cnkud2VpZ2h0LCByZXBzOiBtYXhXZWlnaHRFbnRyeS5yZXBzIH07XG4gIH1cblxuICBmZXRjaFRvdGFsUmVwcygpOiBudW1iZXIge1xuICAgICAgcmV0dXJuIHRoaXMubG9ncy5yZWR1Y2UoKHRvdGFsLCBsb2cpID0+IHRvdGFsICsgbG9nLnJlcHMsIDApO1xuICB9XG5cbiAgZmV0Y2hUb3RhbFNlc3Npb25zKGFsbExvZ3M6IEV4ZXJjaXNlTG9nW10pOiBudW1iZXIge1xuICAgICAgcmV0dXJuIGFsbExvZ3NcbiAgICAgICAgICAuZmlsdGVyKGxvZyA9PiBsb2cuZXhlcmNpc2UubmFtZSA9PT0gdGhpcy5leGVyY2lzZS5uYW1lKVxuICAgICAgICAgIC5sZW5ndGg7XG4gIH1cblxuICBmZXRjaFRvdGFsQ29tcGxldGVkU2V0cygpOiBudW1iZXIge1xuICAgICAgcmV0dXJuIHRoaXMubG9ncy5maWx0ZXIobG9nID0+IGxvZy5yZXBzID4gMCkubGVuZ3RoO1xuICB9XG5cbiAgaXNMb2dDb21wbGV0ZSgpOiBib29sZWFuIHtcbiAgICAgIHJldHVybiB0aGlzLmxvZ3Muc29tZShsb2cgPT4gbG9nLnJlcHMgPiAwKTtcbiAgfVxuXG4gIHVwZGF0ZUxvZyh3b3Jrb3V0OiBXb3Jrb3V0KTogdm9pZCB7XG4gICAgICBleGVyY2lzZUxvZ1NlcnZpY2UudXBkYXRlRXhlcmNpc2VMb2codGhpcywgd29ya291dCk7XG4gIH1cblxuICB0b0RpY3Rpb25hcnkoKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSB7XG4gICAgICBjb25zdCBkYXRhOiB7IFtrZXk6IHN0cmluZ106IGFueSB9ID0ge1xuICAgICAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgICAgIHdvcmtvdXRJZDogdGhpcy53b3Jrb3V0SWQsXG4gICAgICAgICAgdXNlcklkOiB0aGlzLnVzZXJJZCxcbiAgICAgICAgICBleGVyY2lzZTogdGhpcy5leGVyY2lzZS50b0RpY3Rpb25hcnkoKSxcbiAgICAgICAgICBsb2dzOiB0aGlzLmxvZ3MubWFwKGxvZyA9PiBsb2cudG9EaWN0aW9uYXJ5KCkpLFxuICAgICAgICAgIGZlZWRiYWNrOiB0aGlzLmZlZWRiYWNrLFxuICAgICAgICAgIG5vdGU6IHRoaXMubm90ZSxcbiAgICAgICAgICBpc1NwbGl0OiB0aGlzLmlzU3BsaXQsXG4gICAgICAgICAgaXNCb2R5V2VpZ2h0OiB0aGlzLmlzQm9keVdlaWdodCxcbiAgICAgICAgICBsb2dTdWJtaXR0ZWQ6IHRoaXMubG9nU3VibWl0dGVkLFxuICAgICAgICAgIGxvZ0lzRWRpdGluZzogdGhpcy5sb2dJc0VkaXRpbmcsXG4gICAgICAgICAgaXNDb21wbGV0ZWQ6IHRoaXMuaXNDb21wbGV0ZWQsXG4gICAgICAgICAgY3JlYXRlZEF0OiBkYXRlVG9Vbml4VGltZXN0YW1wKHRoaXMuY3JlYXRlZEF0KSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IGRhdGVUb1VuaXhUaW1lc3RhbXAodGhpcy51cGRhdGVkQXQpLFxuICAgICAgICAgIGNvbXBsZXRlZEF0OiBkYXRlVG9Vbml4VGltZXN0YW1wKHRoaXMuY29tcGxldGVkQXQpLFxuICAgICAgICAgIHJlY29tbWVuZGVkV2VpZ2h0OiB0aGlzLnJlY29tbWVuZGVkV2VpZ2h0LFxuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMub3JkZXIgIT0gbnVsbCkge1xuICAgICAgICAgIGRhdGFbXCJvcmRlclwiXSA9IHRoaXMub3JkZXI7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZUV4ZXJjaXNlRGV0YWlscyB7XG4gIHJlcHM/OiBzdHJpbmdbXTtcbiAgc2V0cz86IG51bWJlcjtcbiAgd2VpZ2h0PzogbnVtYmVyO1xuICBzY3JlZW5UaW1lOiBudW1iZXI7XG4gIHNlbGVjdGVkVmlkZW8/OiBFeGVyY2lzZVZpZGVvIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXZWlnaHRUcmFpbmluZ0V4ZXJjaXNlIGV4dGVuZHMgQmFzZUV4ZXJjaXNlRGV0YWlscyB7XG4gIHJlcHM6IHN0cmluZ1tdO1xuICBzZXRzOiBudW1iZXI7XG4gIHdlaWdodDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpb0V4ZXJjaXNlIGV4dGVuZHMgQmFzZUV4ZXJjaXNlRGV0YWlscyB7XG4gIGR1cmF0aW9uOiBudW1iZXI7XG4gIGJwbTogbnVtYmVyO1xuICBjYWxvcmllczogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vYmlsaXR5RXhlcmNpc2UgZXh0ZW5kcyBCYXNlRXhlcmNpc2VEZXRhaWxzIHtcbiAgcmVwcz86IHN0cmluZ1tdO1xuICBzZXRzPzogbnVtYmVyO1xuICB3ZWlnaHQ/OiBudW1iZXI7XG4gIGR1cmF0aW9uPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBpbGF0ZXNFeGVyY2lzZSBleHRlbmRzIEJhc2VFeGVyY2lzZURldGFpbHMge1xuICByZXBzPzogc3RyaW5nW107XG4gIHNldHM/OiBudW1iZXI7XG4gIGR1cmF0aW9uPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmV0Y2hpbmdFeGVyY2lzZSBleHRlbmRzIEJhc2VFeGVyY2lzZURldGFpbHMge1xuICBkdXJhdGlvbj86IG51bWJlcjtcbiAgcmVwcz86IHN0cmluZ1tdO1xuICBzZXRzPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhbGlzdGhlbmljc0V4ZXJjaXNlIGV4dGVuZHMgQmFzZUV4ZXJjaXNlRGV0YWlscyB7XG4gIHJlcHM6IHN0cmluZ1tdO1xuICBzZXRzOiBudW1iZXI7XG59XG5cbmV4cG9ydCB0eXBlIEV4ZXJjaXNlQ2F0ZWdvcnkgPSBcbiAgfCB7IHR5cGU6ICd3ZWlnaHQtdHJhaW5pbmcnLCBkZXRhaWxzPzogV2VpZ2h0VHJhaW5pbmdFeGVyY2lzZSB9XG4gIHwgeyB0eXBlOiAnY2FyZGlvJywgZGV0YWlscz86IENhcmRpb0V4ZXJjaXNlIH1cbiAgfCB7IHR5cGU6ICdtb2JpbGl0eScsIGRldGFpbHM/OiBNb2JpbGl0eUV4ZXJjaXNlIH1cbiAgfCB7IHR5cGU6ICdwaWxhdGVzJywgZGV0YWlscz86IFBpbGF0ZXNFeGVyY2lzZSB9XG4gIHwgeyB0eXBlOiAnc3RyZXRjaGluZycsIGRldGFpbHM/OiBTdHJldGNoaW5nRXhlcmNpc2UgfVxuICB8IHsgdHlwZTogJ2NhbGlzdGhlbmljcycsIGRldGFpbHM/OiBDYWxpc3RoZW5pY3NFeGVyY2lzZSB9O1xuXG4vLyBIZWxwZXIgZnVuY3Rpb25zIHRvIG1pbWljIFN3aWZ0IGVudW0gYmVoYXZpb3JcbmV4cG9ydCBjb25zdCBFeGVyY2lzZUNhdGVnb3J5ID0ge1xuICB3ZWlnaHRUcmFpbmluZzogKGRldGFpbHM/OiBXZWlnaHRUcmFpbmluZ0V4ZXJjaXNlKTogRXhlcmNpc2VDYXRlZ29yeSA9PiAoe1xuICAgIHR5cGU6ICd3ZWlnaHQtdHJhaW5pbmcnLFxuICAgIGRldGFpbHNcbiAgfSksXG4gIGNhcmRpbzogKGRldGFpbHM/OiBDYXJkaW9FeGVyY2lzZSk6IEV4ZXJjaXNlQ2F0ZWdvcnkgPT4gKHtcbiAgICB0eXBlOiAnY2FyZGlvJyxcbiAgICBkZXRhaWxzXG4gIH0pLFxuICBtb2JpbGl0eTogKGRldGFpbHM/OiBNb2JpbGl0eUV4ZXJjaXNlKTogRXhlcmNpc2VDYXRlZ29yeSA9PiAoe1xuICAgIHR5cGU6ICdtb2JpbGl0eScsXG4gICAgZGV0YWlsc1xuICB9KSxcbiAgcGlsYXRlczogKGRldGFpbHM/OiBQaWxhdGVzRXhlcmNpc2UpOiBFeGVyY2lzZUNhdGVnb3J5ID0+ICh7XG4gICAgdHlwZTogJ3BpbGF0ZXMnLFxuICAgIGRldGFpbHNcbiAgfSksXG4gIHN0cmV0Y2hpbmc6IChkZXRhaWxzPzogU3RyZXRjaGluZ0V4ZXJjaXNlKTogRXhlcmNpc2VDYXRlZ29yeSA9PiAoe1xuICAgIHR5cGU6ICdzdHJldGNoaW5nJyxcbiAgICBkZXRhaWxzXG4gIH0pLFxuICBjYWxpc3RoZW5pY3M6IChkZXRhaWxzPzogQ2FsaXN0aGVuaWNzRXhlcmNpc2UpOiBFeGVyY2lzZUNhdGVnb3J5ID0+ICh7XG4gICAgdHlwZTogJ2NhbGlzdGhlbmljcycsXG4gICAgZGV0YWlsc1xuICB9KSxcblxuICBmcm9tSWRlbnRpZmllcjogKGlkZW50aWZpZXI6IHN0cmluZyk6IEV4ZXJjaXNlQ2F0ZWdvcnkgfCBudWxsID0+IHtcbiAgICBjb25zdCBiYXNlRGV0YWlscyA9IHtcbiAgICAgIHNjcmVlblRpbWU6IDAsXG4gICAgICBzZWxlY3RlZFZpZGVvOiBudWxsXG4gICAgfTtcblxuICAgIHN3aXRjaCAoaWRlbnRpZmllci50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlICd3ZWlnaHQtdHJhaW5pbmcnOlxuICAgICAgICByZXR1cm4gRXhlcmNpc2VDYXRlZ29yeS53ZWlnaHRUcmFpbmluZyh7XG4gICAgICAgICAgLi4uYmFzZURldGFpbHMsXG4gICAgICAgICAgcmVwczogWycxMiddLFxuICAgICAgICAgIHNldHM6IDMsXG4gICAgICAgICAgd2VpZ2h0OiAwXG4gICAgICAgIH0pO1xuICAgICAgY2FzZSAnY2FyZGlvJzpcbiAgICAgICAgcmV0dXJuIEV4ZXJjaXNlQ2F0ZWdvcnkuY2FyZGlvKHtcbiAgICAgICAgICAuLi5iYXNlRGV0YWlscyxcbiAgICAgICAgICBkdXJhdGlvbjogMjAsXG4gICAgICAgICAgYnBtOiAxMjUsXG4gICAgICAgICAgY2Fsb3JpZXM6IDBcbiAgICAgICAgfSk7XG4gICAgICBjYXNlICdtb2JpbGl0eSc6XG4gICAgICAgIHJldHVybiBFeGVyY2lzZUNhdGVnb3J5Lm1vYmlsaXR5KHtcbiAgICAgICAgICAuLi5iYXNlRGV0YWlscyxcbiAgICAgICAgICByZXBzOiBbJzEyJ10sXG4gICAgICAgICAgc2V0czogM1xuICAgICAgICB9KTtcbiAgICAgIGNhc2UgJ3BpbGF0ZXMnOlxuICAgICAgICByZXR1cm4gRXhlcmNpc2VDYXRlZ29yeS5waWxhdGVzKHtcbiAgICAgICAgICAuLi5iYXNlRGV0YWlscyxcbiAgICAgICAgICByZXBzOiBbJzEyJ10sXG4gICAgICAgICAgc2V0czogM1xuICAgICAgICB9KTtcbiAgICAgIGNhc2UgJ3N0cmV0Y2hpbmcnOlxuICAgICAgICByZXR1cm4gRXhlcmNpc2VDYXRlZ29yeS5zdHJldGNoaW5nKHtcbiAgICAgICAgICAuLi5iYXNlRGV0YWlscyxcbiAgICAgICAgICBkdXJhdGlvbjogMzBcbiAgICAgICAgfSk7XG4gICAgICBjYXNlICdjYWxpc3RoZW5pY3MnOlxuICAgICAgICByZXR1cm4gRXhlcmNpc2VDYXRlZ29yeS5jYWxpc3RoZW5pY3Moe1xuICAgICAgICAgIC4uLmJhc2VEZXRhaWxzLFxuICAgICAgICAgIHJlcHM6IFsnMTInXSxcbiAgICAgICAgICBzZXRzOiAzXG4gICAgICAgIH0pO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9LFxuXG4gIGlkZW50aWZpZXI6IChjYXRlZ29yeTogRXhlcmNpc2VDYXRlZ29yeSk6IHN0cmluZyA9PiBjYXRlZ29yeS50eXBlXG59O1xuXG4vLyBVc2FnZSBleGFtcGxlczpcbi8vIGNvbnN0IHdlaWdodFRyYWluaW5nID0gRXhlcmNpc2VDYXRlZ29yeS53ZWlnaHRUcmFpbmluZyh7IHJlcHM6ICcxMCcsIHNldHM6IDMsIHdlaWdodDogNTAgfSk7XG4vLyBjb25zdCBjYXJkaW8gPSBFeGVyY2lzZUNhdGVnb3J5LmNhcmRpbyh7IGR1cmF0aW9uOiAzMCwgYnBtOiAxNDAsIGNhbG9yaWVzOiAzMDAgfSk7XG4vLyBjb25zdCBmcm9tSWQgPSBFeGVyY2lzZUNhdGVnb3J5LmZyb21JZGVudGlmaWVyKCd3ZWlnaHQtdHJhaW5pbmcnKTtcbi8vIGNvbnN0IGlkID0gRXhlcmNpc2VDYXRlZ29yeS5pZGVudGlmaWVyKHdlaWdodFRyYWluaW5nKTtcblxuLy8gTmV3IGludGVyZmFjZXMgZm9yIGNhdGVnb3J5IGhhbmRsaW5nIHdpdGggZGlmZmVyZW50IG5hbWVzIHRvIGF2b2lkIGNvbmZsaWN0c1xuZXhwb3J0IGludGVyZmFjZSBFeGVyY2lzZUNhdGVnb3J5RGV0YWlsc1R5cGUge1xuICBzZXRzOiBudW1iZXI7XG4gIHJlcHM6IHN0cmluZ1tdO1xuICB3ZWlnaHQ6IG51bWJlcjtcbiAgc2NyZWVuVGltZTogbnVtYmVyO1xuICBzZWxlY3RlZFZpZGVvOiBFeGVyY2lzZVZpZGVvIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFeGVyY2lzZUNhdGVnb3J5VHlwZSB7XG4gIHR5cGU6IHN0cmluZztcbiAgZGV0YWlsczogRXhlcmNpc2VDYXRlZ29yeURldGFpbHNUeXBlO1xufVxuXG5leHBvcnQgY2xhc3MgRXhlcmNpc2Uge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRvY3VtZW50SWQ6IHN0cmluZztcbiAgY2F0ZWdvcnk6IHN0cmluZyB8IGFueTtcbiAgcHJpbWFyeUJvZHlQYXJ0czogc3RyaW5nW107XG4gIHNlY29uZGFyeUJvZHlQYXJ0czogc3RyaW5nW107XG4gIHRhZ3M6IHN0cmluZ1tdO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBzdGVwczogc3RyaW5nW107XG4gIHZpc2liaWxpdHk/OiBzdHJpbmc7XG4gIGN1cnJlbnRWaWRlb1Bvc2l0aW9uPzogbnVtYmVyO1xuICBzZXRzPzogbnVtYmVyO1xuICByZXBzPzogc3RyaW5nO1xuICB3ZWlnaHQ/OiBudW1iZXI7XG4gIGF1dGhvcjogRXhlcmNpc2VBdXRob3I7XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbiAgdXBkYXRlZEF0OiBEYXRlO1xuICB2aWRlb3M6IEV4ZXJjaXNlVmlkZW9bXTtcblxuICBjb25zdHJ1Y3RvcihkYXRhOiBhbnkpIHtcbiAgICB0aGlzLmlkID0gZGF0YS5pZCB8fCAnJztcbiAgICB0aGlzLm5hbWUgPSBkYXRhLm5hbWUgfHwgJyc7XG4gICAgdGhpcy5kb2N1bWVudElkID0gZGF0YS5kb2N1bWVudElkIHx8IGRhdGEubmFtZT8udG9Mb3dlckNhc2UoKSB8fCBkYXRhLmlkIHx8ICcnO1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkYXRhLmRlc2NyaXB0aW9uIHx8ICcnO1xuICAgIHRoaXMuc3RlcHMgPSBkYXRhLnN0ZXBzIHx8IFtdO1xuICAgIHRoaXMudmlzaWJpbGl0eSA9IGRhdGEudmlzaWJpbGl0eSB8fCAnbGl2ZSc7XG4gICAgdGhpcy5jdXJyZW50VmlkZW9Qb3NpdGlvbiA9IGRhdGEuY3VycmVudFZpZGVvUG9zaXRpb24gfHwgMDtcbiAgICB0aGlzLnNldHMgPSBkYXRhLnNldHMgfHwgMDtcbiAgICB0aGlzLnJlcHMgPSBkYXRhLnJlcHMgfHwgJyc7XG4gICAgdGhpcy53ZWlnaHQgPSBkYXRhLndlaWdodCB8fCAwO1xuICAgIHRoaXMuYXV0aG9yID0gbmV3IEV4ZXJjaXNlQXV0aG9yKGRhdGEuYXV0aG9yIHx8IHt9KTtcbiAgICB0aGlzLmNyZWF0ZWRBdCA9IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5jcmVhdGVkQXQpO1xuICAgIHRoaXMudXBkYXRlZEF0ID0gY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLnVwZGF0ZWRBdCk7XG4gICAgdGhpcy52aWRlb3MgPSAoZGF0YS52aWRlb3MgfHwgW10pLm1hcChcbiAgICAgICh2aWRlbzogYW55KSA9PiBuZXcgRXhlcmNpc2VWaWRlbyh2aWRlbylcbiAgICApO1xuICAgIFxuICAgIC8vIEhhbmRsZSBwcmltYXJ5Qm9keVBhcnRzLCBzZWNvbmRhcnlCb2R5UGFydHMgYW5kIHRhZ3NcbiAgICB0aGlzLnByaW1hcnlCb2R5UGFydHMgPSBkYXRhLnByaW1hcnlCb2R5UGFydHMgfHwgW107XG4gICAgdGhpcy5zZWNvbmRhcnlCb2R5UGFydHMgPSBkYXRhLnNlY29uZGFyeUJvZHlQYXJ0cyB8fCBbXTtcbiAgICB0aGlzLnRhZ3MgPSBkYXRhLnRhZ3MgfHwgW107XG4gICAgXG4gICAgLy8gSGFuZGxlIGNhdGVnb3J5IGZpZWxkIC0gY2FuIGJlIGVpdGhlciBzdHJpbmcgb3IgY29tcGxleCBvYmplY3RcbiAgICBpZiAodHlwZW9mIGRhdGEuY2F0ZWdvcnkgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLmNhdGVnb3J5ID0gZGF0YS5jYXRlZ29yeSB8fCAnJztcbiAgICB9IGVsc2UgaWYgKGRhdGEuY2F0ZWdvcnkgJiYgdHlwZW9mIGRhdGEuY2F0ZWdvcnkgPT09ICdvYmplY3QnKSB7XG4gICAgICBjb25zdCBjYXRlZ29yeU9iajogYW55ID0ge307XG4gICAgICBjb25zdCBjYXRlZ29yeVR5cGUgPSBkYXRhLmNhdGVnb3J5LnR5cGUgfHwgZGF0YS5jYXRlZ29yeS5pZCB8fCAnJztcbiAgICAgIFxuICAgICAgY2F0ZWdvcnlPYmoudHlwZSA9IGNhdGVnb3J5VHlwZTtcbiAgICAgIGNhdGVnb3J5T2JqLmRldGFpbHMgPSB7XG4gICAgICAgIC4uLihkYXRhLmNhdGVnb3J5LmRldGFpbHMgfHwge30pLFxuICAgICAgICAvLyBDb252ZXJ0IHNlbGVjdGVkVmlkZW8gdG8gRXhlcmNpc2VWaWRlbyBpbnN0YW5jZSBpZiBpdCBleGlzdHNcbiAgICAgICAgLi4uKGRhdGEuY2F0ZWdvcnkuZGV0YWlscz8uc2VsZWN0ZWRWaWRlbyA/IHtcbiAgICAgICAgICBzZWxlY3RlZFZpZGVvOiBuZXcgRXhlcmNpc2VWaWRlbyhkYXRhLmNhdGVnb3J5LmRldGFpbHMuc2VsZWN0ZWRWaWRlbylcbiAgICAgICAgfSA6IHt9KSxcbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIElmIGl0J3MgcmF3IGRhdGEgZm9ybWF0LCBtZXJnZSB0aGUgcmVtYWluaW5nIHByb3BlcnRpZXNcbiAgICAgIGlmICghZGF0YS5jYXRlZ29yeS5kZXRhaWxzICYmIGRhdGEuY2F0ZWdvcnkuc2V0cykge1xuICAgICAgICBjYXRlZ29yeU9iai5kZXRhaWxzID0ge1xuICAgICAgICAgIC4uLmNhdGVnb3J5T2JqLmRldGFpbHMsXG4gICAgICAgICAgc2V0czogZGF0YS5jYXRlZ29yeS5zZXRzLFxuICAgICAgICAgIHJlcHM6IGRhdGEuY2F0ZWdvcnkucmVwcyB8fCBbJzEyJ10sXG4gICAgICAgICAgd2VpZ2h0OiBkYXRhLmNhdGVnb3J5LndlaWdodCB8fCAwLFxuICAgICAgICAgIHNjcmVlblRpbWU6IGRhdGEuY2F0ZWdvcnkuc2NyZWVuVGltZSB8fCAwLFxuICAgICAgICAgIHNlbGVjdGVkVmlkZW86IGRhdGEuY2F0ZWdvcnkuc2VsZWN0ZWRWaWRlbyA/IG5ldyBFeGVyY2lzZVZpZGVvKGRhdGEuY2F0ZWdvcnkuc2VsZWN0ZWRWaWRlbykgOiBudWxsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRoaXMuY2F0ZWdvcnkgPSBjYXRlZ29yeU9iajtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRGVmYXVsdCBjYXRlZ29yeSBhcyBzdHJpbmcgZm9yIG5ldyBkb2N1bWVudCBzdHJ1Y3R1cmVcbiAgICAgIHRoaXMuY2F0ZWdvcnkgPSAnd2VpZ2h0LXRyYWluaW5nJztcbiAgICB9XG4gIH1cblxuICB0b0RpY3Rpb25hcnkoKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSB7XG4gICAgLy8gQ3JlYXRlIHRoZSBjYXRlZ29yeSBvYmplY3Q6XG4gICAgY29uc3QgY2F0ZWdvcnlEYXRhID0ge1xuICAgICAgaWQ6IHRoaXMuY2F0ZWdvcnkudHlwZSxcbiAgICAgIC4uLnRoaXMuY2F0ZWdvcnkuZGV0YWlscyxcbiAgICAgIC8vIE9ubHkgaW5jbHVkZSBzZWxlY3RlZFZpZGVvIGlmIGl0IGV4aXN0cyBhbmQgaXMgYW4gRXhlcmNpc2VWaWRlbyBpbnN0YW5jZVxuICAgICAgLi4uKHRoaXMuY2F0ZWdvcnkuZGV0YWlscz8uc2VsZWN0ZWRWaWRlbyAmJiB0aGlzLmNhdGVnb3J5LmRldGFpbHMuc2VsZWN0ZWRWaWRlbyBpbnN0YW5jZW9mIEV4ZXJjaXNlVmlkZW9cbiAgICAgICAgICA/IHsgc2VsZWN0ZWRWaWRlbzogdGhpcy5jYXRlZ29yeS5kZXRhaWxzLnNlbGVjdGVkVmlkZW8udG9EaWN0aW9uYXJ5KCkgfVxuICAgICAgICAgIDogeyBzZWxlY3RlZFZpZGVvOiBudWxsIH0pXG4gICAgfTtcblxuICAgIGNvbnN0IGRhdGE6IHsgW2tleTogc3RyaW5nXTogYW55IH0gPSB7XG4gICAgICBpZDogdGhpcy5pZCxcbiAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLFxuICAgICAgY2F0ZWdvcnk6IGNhdGVnb3J5RGF0YSxcbiAgICAgIHByaW1hcnlCb2R5UGFydHM6IHRoaXMucHJpbWFyeUJvZHlQYXJ0cyxcbiAgICAgIHNlY29uZGFyeUJvZHlQYXJ0czogdGhpcy5zZWNvbmRhcnlCb2R5UGFydHMsXG4gICAgICB0YWdzOiB0aGlzLnRhZ3MsXG4gICAgICB2aWRlb3M6IHRoaXMudmlkZW9zLm1hcCgodmlkZW8pID0+IHZpZGVvLnRvRGljdGlvbmFyeSgpKSxcbiAgICAgIHN0ZXBzOiB0aGlzLnN0ZXBzLFxuICAgICAgYXV0aG9yOiB0aGlzLmF1dGhvci50b0RpY3Rpb25hcnkoKSxcbiAgICAgIGNyZWF0ZWRBdDogZGF0ZVRvVW5peFRpbWVzdGFtcCh0aGlzLmNyZWF0ZWRBdCksXG4gICAgICB1cGRhdGVkQXQ6IGRhdGVUb1VuaXhUaW1lc3RhbXAodGhpcy51cGRhdGVkQXQpLFxuICAgIH07XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxufVxuXG4vLyB0eXBlcy9FeGVyY2lzZVZpZGVvLnRzXG5leHBvcnQgdHlwZSBFeGVyY2lzZVZpZGVvVmlzaWJpbGl0eSA9ICdvcGVuJyB8ICdwcml2YXRlJyB8ICdmb2xsb3dlcnMnIHwgJ3JlamVjdGVkJztcblxuLy8gRXhlcmNpc2VWaWRlby50c1xuZXhwb3J0IGNsYXNzIEV4ZXJjaXNlVmlkZW8ge1xuICBpZDogc3RyaW5nO1xuICBleGVyY2lzZUlkOiBzdHJpbmc7XG4gIHVzZXJuYW1lOiBzdHJpbmc7XG4gIHVzZXJJZDogc3RyaW5nO1xuICB2aWRlb1VSTDogc3RyaW5nO1xuICBmaWxlTmFtZTogc3RyaW5nO1xuICBleGVyY2lzZTogc3RyaW5nO1xuICBwcm9maWxlSW1hZ2U6IFByb2ZpbGVJbWFnZTtcbiAgY2FwdGlvbj86IHN0cmluZztcbiAgZ2lmVVJMPzogc3RyaW5nO1xuICB0aHVtYm5haWw/OiBzdHJpbmc7XG4gIHZpc2liaWxpdHk6IEV4ZXJjaXNlVmlkZW9WaXNpYmlsaXR5O1xuICB0b3RhbEFjY291bnRzUmVhY2hlZDogbnVtYmVyO1xuICB0b3RhbEFjY291bnRMaWtlczogbnVtYmVyO1xuICB0b3RhbEFjY291bnRCb29rbWFya2VkOiBudW1iZXI7XG4gIHRvdGFsQWNjb3VudFVzYWdlOiBudW1iZXI7XG4gIGlzQXBwcm92ZWQ6IGJvb2xlYW47XG4gIGxpa2VkPzogYm9vbGVhbjtcbiAgYm9va21hcmtlZD86IGJvb2xlYW47XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbiAgdXBkYXRlZEF0OiBEYXRlO1xuXG4gIGNvbnN0cnVjdG9yKGRhdGE6IGFueSkge1xuICAgIHRoaXMuaWQgPSBkYXRhLmlkIHx8ICcnO1xuICAgIHRoaXMuZXhlcmNpc2VJZCA9IGRhdGEuZXhlcmNpc2VJZCB8fCAnJztcbiAgICB0aGlzLnVzZXJuYW1lID0gZGF0YS51c2VybmFtZSB8fCAnJztcbiAgICB0aGlzLnVzZXJJZCA9IGRhdGEudXNlcklkIHx8ICcnO1xuICAgIHRoaXMudmlkZW9VUkwgPSBkYXRhLnZpZGVvVVJMIHx8ICcnO1xuICAgIHRoaXMuZmlsZU5hbWUgPSBkYXRhLmZpbGVOYW1lIHx8ICcnO1xuICAgIHRoaXMuZXhlcmNpc2UgPSBkYXRhLmV4ZXJjaXNlIHx8ICcnO1xuICAgIHRoaXMucHJvZmlsZUltYWdlID0gbmV3IFByb2ZpbGVJbWFnZShkYXRhLnByb2ZpbGVJbWFnZSB8fCB7fSk7XG4gICAgdGhpcy5jYXB0aW9uID0gZGF0YS5jYXB0aW9uO1xuICAgIHRoaXMuZ2lmVVJMID0gZGF0YS5naWZVUkw7XG4gICAgdGhpcy50aHVtYm5haWwgPSBkYXRhLnRodW1ibmFpbDtcbiAgICB0aGlzLnZpc2liaWxpdHkgPSBkYXRhLnZpc2liaWxpdHkgYXMgRXhlcmNpc2VWaWRlb1Zpc2liaWxpdHkgfHwgJ3ByaXZhdGUnO1xuICAgIHRoaXMudG90YWxBY2NvdW50c1JlYWNoZWQgPSBkYXRhLnRvdGFsQWNjb3VudHNSZWFjaGVkIHx8IDA7XG4gICAgdGhpcy50b3RhbEFjY291bnRMaWtlcyA9IGRhdGEudG90YWxBY2NvdW50TGlrZXMgfHwgMDtcbiAgICB0aGlzLnRvdGFsQWNjb3VudEJvb2ttYXJrZWQgPSBkYXRhLnRvdGFsQWNjb3VudEJvb2ttYXJrZWQgfHwgMDtcbiAgICB0aGlzLnRvdGFsQWNjb3VudFVzYWdlID0gZGF0YS50b3RhbEFjY291bnRVc2FnZSB8fCAwO1xuICAgIHRoaXMuaXNBcHByb3ZlZCA9IGRhdGEuaXNBcHByb3ZlZCB8fCBmYWxzZTtcbiAgICB0aGlzLmxpa2VkID0gZGF0YS5saWtlZCB8fCBmYWxzZTtcbiAgICB0aGlzLmJvb2ttYXJrZWQgPSBkYXRhLmJvb2ttYXJrZWQgfHwgZmFsc2U7XG4gICAgdGhpcy5jcmVhdGVkQXQgPSBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY3JlYXRlZEF0KTtcbiAgICB0aGlzLnVwZGF0ZWRBdCA9IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS51cGRhdGVkQXQpO1xuICB9XG5cbiAgdG9EaWN0aW9uYXJ5KCk6IHsgW2tleTogc3RyaW5nXTogYW55IH0ge1xuICAgIGNvbnN0IGRhdGE6IHsgW2tleTogc3RyaW5nXTogYW55IH0gPSB7XG4gICAgICBpZDogdGhpcy5pZCxcbiAgICAgIGV4ZXJjaXNlSWQ6IHRoaXMuZXhlcmNpc2VJZCxcbiAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lLFxuICAgICAgdXNlcklkOiB0aGlzLnVzZXJJZCxcbiAgICAgIHZpZGVvVVJMOiB0aGlzLnZpZGVvVVJMLFxuICAgICAgZmlsZU5hbWU6IHRoaXMuZmlsZU5hbWUsXG4gICAgICBleGVyY2lzZTogdGhpcy5leGVyY2lzZSxcbiAgICAgIHByb2ZpbGVJbWFnZTogdGhpcy5wcm9maWxlSW1hZ2UudG9EaWN0aW9uYXJ5KCksXG4gICAgICB2aXNpYmlsaXR5OiB0aGlzLnZpc2liaWxpdHksXG4gICAgICB0b3RhbEFjY291bnRzUmVhY2hlZDogdGhpcy50b3RhbEFjY291bnRzUmVhY2hlZCxcbiAgICAgIHRvdGFsQWNjb3VudExpa2VzOiB0aGlzLnRvdGFsQWNjb3VudExpa2VzLFxuICAgICAgdG90YWxBY2NvdW50Qm9va21hcmtlZDogdGhpcy50b3RhbEFjY291bnRCb29rbWFya2VkLFxuICAgICAgdG90YWxBY2NvdW50VXNhZ2U6IHRoaXMudG90YWxBY2NvdW50VXNhZ2UsXG4gICAgICBpc0FwcHJvdmVkOiB0aGlzLmlzQXBwcm92ZWQsXG4gICAgICBjcmVhdGVkQXQ6IGRhdGVUb1VuaXhUaW1lc3RhbXAodGhpcy5jcmVhdGVkQXQpLFxuICAgICAgdXBkYXRlZEF0OiBkYXRlVG9Vbml4VGltZXN0YW1wKHRoaXMudXBkYXRlZEF0KSxcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuY2FwdGlvbikgZGF0YS5jYXB0aW9uID0gdGhpcy5jYXB0aW9uO1xuICAgIGlmICh0aGlzLmdpZlVSTCkgZGF0YS5naWZVUkwgPSB0aGlzLmdpZlVSTDtcbiAgICBpZiAodGhpcy50aHVtYm5haWwpIGRhdGEudGh1bWJuYWlsID0gdGhpcy50aHVtYm5haWw7XG4gICAgaWYgKHRoaXMubGlrZWQgIT09IG51bGwpIGRhdGEubGlrZWQgPSB0aGlzLmxpa2VkO1xuICAgIGlmICh0aGlzLmJvb2ttYXJrZWQgIT09IG51bGwpIGRhdGEuYm9va21hcmtlZCA9IHRoaXMuYm9va21hcmtlZDtcblxuICAgIHJldHVybiBkYXRhO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBFeGVyY2lzZURldGFpbCB7XG4gIGlkOiBzdHJpbmc7XG4gIGV4ZXJjaXNlTmFtZTogc3RyaW5nO1xuICBleGVyY2lzZTogRXhlcmNpc2U7XG4gIGV4ZXJjaXNlTG9nSWQ/OiBzdHJpbmc7XG4gIGNhdGVnb3J5OiBFeGVyY2lzZUNhdGVnb3J5O1xuICBub3Rlczogc3RyaW5nO1xuICBpc1NwbGl0OiBib29sZWFuO1xuICBpc01pc3Npbmc6IGJvb2xlYW47XG4gIGdyb3VwSWQ6IG51bWJlcjtcbiAgY2xvc2VzdE1hdGNoOiBFeGVyY2lzZVtdO1xuXG4gIGNvbnN0cnVjdG9yKGRhdGE6IGFueSkge1xuICAgIHRoaXMuaWQgPSBkYXRhLmlkIHx8ICcnO1xuICAgIHRoaXMuZXhlcmNpc2VOYW1lID0gZGF0YS5leGVyY2lzZU5hbWUgfHwgJyc7XG4gICAgdGhpcy5leGVyY2lzZSA9IGRhdGEuZXhlcmNpc2U7XG4gICAgdGhpcy5leGVyY2lzZUxvZ0lkID0gZGF0YS5leGVyY2lzZUxvZ0lkO1xuICAgIHRoaXMuY2F0ZWdvcnkgPSBkYXRhLmNhdGVnb3J5O1xuICAgIHRoaXMubm90ZXMgPSBkYXRhLm5vdGVzIHx8ICcnO1xuICAgIHRoaXMuaXNTcGxpdCA9IGRhdGEuaXNTcGxpdCB8fCBmYWxzZTtcbiAgICB0aGlzLmlzTWlzc2luZyA9IGRhdGEuaXNNaXNzaW5nIHx8IGZhbHNlO1xuICAgIHRoaXMuZ3JvdXBJZCA9IGRhdGEuZ3JvdXBJZCB8fCAwO1xuICAgIHRoaXMuY2xvc2VzdE1hdGNoID0gZGF0YS5jbG9zZXN0TWF0Y2ggfHwgW107XG4gIH1cblxuICB0b0RpY3Rpb25hcnkoKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgZXhlcmNpc2VOYW1lOiB0aGlzLmV4ZXJjaXNlTmFtZSxcbiAgICAgIGV4ZXJjaXNlOiB0aGlzLmV4ZXJjaXNlLnRvRGljdGlvbmFyeSgpLFxuICAgICAgZXhlcmNpc2VMb2dJZDogdGhpcy5leGVyY2lzZUxvZ0lkLFxuICAgICAgY2F0ZWdvcnk6IHtcbiAgICAgICAgaWQ6IHRoaXMuY2F0ZWdvcnkudHlwZSxcbiAgICAgICAgLi4udGhpcy5jYXRlZ29yeS5kZXRhaWxzLFxuICAgICAgICAuLi4odGhpcy5jYXRlZ29yeS5kZXRhaWxzPy5zZWxlY3RlZFZpZGVvXG4gICAgICAgICAgPyB7IHNlbGVjdGVkVmlkZW86IHRoaXMuY2F0ZWdvcnkuZGV0YWlscy5zZWxlY3RlZFZpZGVvLnRvRGljdGlvbmFyeSgpIH1cbiAgICAgICAgICA6IHt9KVxuICAgICAgfSxcbiAgICAgIG5vdGVzOiB0aGlzLm5vdGVzLFxuICAgICAgaXNTcGxpdDogdGhpcy5pc1NwbGl0LFxuICAgICAgaXNNaXNzaW5nOiB0aGlzLmlzTWlzc2luZyxcbiAgICAgIGdyb3VwSWQ6IHRoaXMuZ3JvdXBJZCxcbiAgICAgIGNsb3Nlc3RNYXRjaDogdGhpcy5jbG9zZXN0TWF0Y2gubWFwKGV4ID0+IGV4LnRvRGljdGlvbmFyeSgpKVxuICAgIH07XG4gIH1cbiAgXG59XG5cbi8vIEV4ZXJjaXNlQXV0aG9yLnRzXG5leHBvcnQgY2xhc3MgRXhlcmNpc2VBdXRob3Ige1xuICB1c2VySWQ6IHN0cmluZztcbiAgdXNlcm5hbWU6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihkYXRhOiBhbnkpIHtcbiAgICB0aGlzLnVzZXJJZCA9IGRhdGEudXNlcklkIHx8ICcnO1xuICAgIHRoaXMudXNlcm5hbWUgPSBkYXRhLnVzZXJuYW1lIHx8ICcnO1xuICB9XG5cbiAgdG9EaWN0aW9uYXJ5KCk6IHsgW2tleTogc3RyaW5nXTogYW55IH0ge1xuICAgIHJldHVybiB7XG4gICAgICB1c2VySWQ6IHRoaXMudXNlcklkLFxuICAgICAgdXNlcm5hbWU6IHRoaXMudXNlcm5hbWVcbiAgICB9O1xuICB9XG59Il0sIm5hbWVzIjpbIlJlcHNBbmRXZWlnaHRMb2ciLCJQcm9maWxlSW1hZ2UiLCJjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wIiwiZGF0ZVRvVW5peFRpbWVzdGFtcCIsImV4ZXJjaXNlTG9nU2VydmljZSIsIkV4ZXJjaXNlUmVmZXJlbmNlIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiZXhlcmNpc2UiLCJncm91cElkIiwiaXNDb21wbGV0ZWQiLCJ0b0RpY3Rpb25hcnkiLCJCb2R5UGFydCIsImlzQWR2YW5jZWRCb2R5UGFydCIsImJvZHlQYXJ0IiwiaW5jbHVkZXMiLCJFeGVyY2lzZUxvZyIsImlkIiwid29ya291dElkIiwidXNlcklkIiwiRXJyb3IiLCJFeGVyY2lzZSIsImxvZ3MiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJsb2ciLCJmZWVkYmFjayIsIm5vdGUiLCJyZWNvbW1lbmRlZFdlaWdodCIsImlzU3BsaXQiLCJpc0JvZHlXZWlnaHQiLCJsb2dTdWJtaXR0ZWQiLCJsb2dJc0VkaXRpbmciLCJvcmRlciIsImNvbXBsZXRlZEF0IiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0Iiwic2V0SXNTdWJtaXR0ZWQiLCJpc1N1Ym1pdHRlZCIsImZldGNoVG90YWxXZWlnaHRMaWZ0ZWQiLCJ1c2VyIiwiYm9keVdlaWdodCIsIk1hdGgiLCJtYXgiLCJhdCIsIm5ld1dlaWdodCIsInRvdGFsV2VpZ2h0TGlmdGVkIiwid2VpZ2h0IiwicmVwcyIsImxlZnRXZWlnaHQiLCJsZWZ0UmVwcyIsImNhbGN1bGF0ZVdvcmtTY29yZSIsIndvcmtvdXRTdW1tYXJpZXMiLCJpbnRlbnNpdHlXZWlnaHQiLCJ2b2x1bWVXZWlnaHQiLCJhbGxMb2dzIiwiZ2V0TG9nc0ZvckV4ZXJjaXNlIiwibmFtZSIsImF2ZXJhZ2VUb3RhbFdlaWdodCIsImxlbmd0aCIsInJlZHVjZSIsInN1bSIsIndvcmtTY29yZSIsImxvZ0l0ZW0iLCJ0b3RhbFdlaWdodCIsImludGVuc2l0eUZhY3RvciIsInZvbHVtZUZhY3RvciIsInBlcmNlbnRhZ2VPZkF2ZXJhZ2UiLCJwcm9ncmVzc2l2ZVNjb3JlIiwicm91bmQiLCJleGVyY2lzZU5hbWUiLCJmbGF0TWFwIiwic3VtbWFyeSIsImV4ZXJjaXNlc0NvbXBsZXRlZCIsImZpbHRlciIsImNoZWNrSWZBbnlQYXN0TG9nc1dlcmVCb2R5V2VpZ2h0IiwiYWxsTG9nSXRlbXMiLCJub25Cb2R5V2VpZ2h0TG9ncyIsImhhc0JvZHlXZWlnaHRMb2dzIiwic29tZSIsImF2ZXJhZ2VXZWlnaHQiLCJmZXRjaEhpZ2hlc3RUV0wiLCJleGVyY2lzZVdvcmtvdXRzIiwidHdscyIsInRvdGFsIiwiZmV0Y2hIaWdoZXN0V2VpZ2h0TGlmdGVkRm9yRXhlcmNpc2UiLCJ3ZWlnaHRzIiwiZmV0Y2hIaWdoZXN0V2VpZ2h0SW5TZXQiLCJ3ZWlnaHRBbmRSZXBzIiwibWF4V2VpZ2h0RW50cnkiLCJjdXJyZW50IiwiZmV0Y2hUb3RhbFJlcHMiLCJmZXRjaFRvdGFsU2Vzc2lvbnMiLCJmZXRjaFRvdGFsQ29tcGxldGVkU2V0cyIsImlzTG9nQ29tcGxldGUiLCJ1cGRhdGVMb2ciLCJ3b3Jrb3V0IiwidXBkYXRlRXhlcmNpc2VMb2ciLCJFeGVyY2lzZUNhdGVnb3J5Iiwid2VpZ2h0VHJhaW5pbmciLCJkZXRhaWxzIiwidHlwZSIsImNhcmRpbyIsIm1vYmlsaXR5IiwicGlsYXRlcyIsInN0cmV0Y2hpbmciLCJjYWxpc3RoZW5pY3MiLCJmcm9tSWRlbnRpZmllciIsImlkZW50aWZpZXIiLCJiYXNlRGV0YWlscyIsInNjcmVlblRpbWUiLCJzZWxlY3RlZFZpZGVvIiwidG9Mb3dlckNhc2UiLCJzZXRzIiwiZHVyYXRpb24iLCJicG0iLCJjYWxvcmllcyIsImNhdGVnb3J5IiwiZG9jdW1lbnRJZCIsImRlc2NyaXB0aW9uIiwic3RlcHMiLCJ2aXNpYmlsaXR5IiwiY3VycmVudFZpZGVvUG9zaXRpb24iLCJhdXRob3IiLCJFeGVyY2lzZUF1dGhvciIsInZpZGVvcyIsInZpZGVvIiwiRXhlcmNpc2VWaWRlbyIsInByaW1hcnlCb2R5UGFydHMiLCJzZWNvbmRhcnlCb2R5UGFydHMiLCJ0YWdzIiwiY2F0ZWdvcnlPYmoiLCJjYXRlZ29yeVR5cGUiLCJjYXRlZ29yeURhdGEiLCJleGVyY2lzZUlkIiwidXNlcm5hbWUiLCJ2aWRlb1VSTCIsImZpbGVOYW1lIiwicHJvZmlsZUltYWdlIiwiY2FwdGlvbiIsImdpZlVSTCIsInRodW1ibmFpbCIsInRvdGFsQWNjb3VudHNSZWFjaGVkIiwidG90YWxBY2NvdW50TGlrZXMiLCJ0b3RhbEFjY291bnRCb29rbWFya2VkIiwidG90YWxBY2NvdW50VXNhZ2UiLCJpc0FwcHJvdmVkIiwibGlrZWQiLCJib29rbWFya2VkIiwiRXhlcmNpc2VEZXRhaWwiLCJleGVyY2lzZUxvZ0lkIiwibm90ZXMiLCJpc01pc3NpbmciLCJjbG9zZXN0TWF0Y2giLCJleCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/api/firebase/exercise/types.ts\n");

/***/ }),

/***/ "./src/api/firebase/exerciseLog/service.ts":
/*!*************************************************!*\
  !*** ./src/api/firebase/exerciseLog/service.ts ***!
  \*************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   exerciseLogService: () => (/* binding */ exerciseLogService)\n/* harmony export */ });\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var _exercise_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../exercise/types */ \"./src/api/firebase/exercise/types.ts\");\n/* harmony import */ var _firebase_workout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../firebase/workout */ \"./src/api/firebase/workout/index.ts\");\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../user */ \"./src/api/firebase/user/index.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../config */ \"./src/api/firebase/config.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _exercise_types__WEBPACK_IMPORTED_MODULE_1__, _firebase_workout__WEBPACK_IMPORTED_MODULE_2__, _user__WEBPACK_IMPORTED_MODULE_3__, _config__WEBPACK_IMPORTED_MODULE_4__]);\n([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _exercise_types__WEBPACK_IMPORTED_MODULE_1__, _firebase_workout__WEBPACK_IMPORTED_MODULE_2__, _user__WEBPACK_IMPORTED_MODULE_3__, _config__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nclass ExerciseLogService {\n    // Getter for all logs\n    get allLogs() {\n        return this._allLogs;\n    }\n    // Setter for all logs\n    set allLogs(logs) {\n        this._allLogs = logs;\n    }\n    async updateExerciseLog(log, workout) {\n        const userId = _user__WEBPACK_IMPORTED_MODULE_3__.userService.nonUICurrentUser?.id || \"anonymous\";\n        if (!userId) {\n            return;\n        }\n        // Create references to the workout and log documents\n        const workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_4__.db, \"users\", userId, \"workoutSessions\"), workout.id);\n        // Update the workout's updatedAt timestamp\n        const updatedWorkoutDate = {\n            ...workout,\n            updatedAt: new Date()\n        };\n        const updatedWorkout = new _firebase_workout__WEBPACK_IMPORTED_MODULE_2__.Workout(updatedWorkoutDate);\n        try {\n            // Update the workout document\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(workoutRef, updatedWorkout.toDictionary());\n            console.log(\"Workout document updated successfully\");\n            // Create reference to the log document\n            const logRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\"), log.id);\n            // Update the log document\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(logRef, log.toDictionary());\n            console.log(\"Exercise log document updated successfully\");\n        } catch (error) {\n            console.error(\"Error updating exercise log:\", error);\n            throw error;\n        }\n    }\n    // Helper method to convert Firestore data to ExerciseLog\n    convertToExerciseLog(data) {\n        return new _exercise_types__WEBPACK_IMPORTED_MODULE_1__.ExerciseLog(data);\n    }\n    // Method to clear all logs (useful for cleanup)\n    clearLogs() {\n        this._allLogs = [];\n    }\n    constructor(){\n        this._allLogs = [];\n    }\n}\n// Export a single instance, matching the pattern used in UserService\nconst exerciseLogService = new ExerciseLogService();\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL2ZpcmViYXNlL2V4ZXJjaXNlTG9nL3NlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXdFO0FBQ3hCO0FBQ0M7QUFDWDtBQUNQO0FBRS9CLE1BQU1PO0lBR0Ysc0JBQXNCO0lBQ3RCLElBQUlDLFVBQXlCO1FBQ3pCLE9BQU8sSUFBSSxDQUFDQyxRQUFRO0lBQ3hCO0lBRUEsc0JBQXNCO0lBQ3RCLElBQUlELFFBQVFFLElBQW1CLEVBQUU7UUFDN0IsSUFBSSxDQUFDRCxRQUFRLEdBQUdDO0lBQ3BCO0lBRUEsTUFBTUMsa0JBQWtCQyxHQUFnQixFQUFFQyxPQUFnQixFQUFpQjtRQUN2RSxNQUFNQyxTQUFTVCw4Q0FBV0EsQ0FBQ1UsZ0JBQWdCLEVBQUVDLE1BQU07UUFFbkQsSUFBSSxDQUFDRixRQUFRO1lBQ1Q7UUFDSjtRQUVBLHFEQUFxRDtRQUNyRCxNQUFNRyxhQUFhaEIsdURBQUdBLENBQ2xCRCw4REFBVUEsQ0FBQ00sdUNBQUVBLEVBQUUsU0FBU1EsUUFBUSxvQkFDaENELFFBQVFHLEVBQUU7UUFHZCwyQ0FBMkM7UUFDM0MsTUFBTUUscUJBQXFCO1lBQ3ZCLEdBQUdMLE9BQU87WUFDVk0sV0FBVyxJQUFJQztRQUNuQjtRQUVBLE1BQU1DLGlCQUFpQixJQUFJakIsc0RBQU9BLENBQUNjO1FBRW5DLElBQUk7WUFDQSw4QkFBOEI7WUFDOUIsTUFBTWhCLDBEQUFNQSxDQUFDZSxZQUFZSSxlQUFlQyxZQUFZO1lBQ3BEQyxRQUFRWCxHQUFHLENBQUM7WUFFWix1Q0FBdUM7WUFDdkMsTUFBTVksU0FBU3ZCLHVEQUFHQSxDQUNkRCw4REFBVUEsQ0FBQ2lCLFlBQVksU0FDdkJMLElBQUlJLEVBQUU7WUFHViwwQkFBMEI7WUFDMUIsTUFBTWQsMERBQU1BLENBQUNzQixRQUFRWixJQUFJVSxZQUFZO1lBQ3JDQyxRQUFRWCxHQUFHLENBQUM7UUFDaEIsRUFBRSxPQUFPYSxPQUFPO1lBQ1pGLFFBQVFFLEtBQUssQ0FBQyxnQ0FBZ0NBO1lBQzlDLE1BQU1BO1FBQ1Y7SUFDSjtJQUVBLHlEQUF5RDtJQUNqREMscUJBQXFCQyxJQUFTLEVBQWU7UUFDakQsT0FBTyxJQUFJeEIsd0RBQVdBLENBQUN3QjtJQUMzQjtJQUVBLGdEQUFnRDtJQUNoREMsWUFBa0I7UUFDZCxJQUFJLENBQUNuQixRQUFRLEdBQUcsRUFBRTtJQUN0Qjs7YUE3RFFBLFdBQTBCLEVBQUU7O0FBOER4QztBQUVBLHFFQUFxRTtBQUM5RCxNQUFNb0IscUJBQXFCLElBQUl0QixxQkFBcUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1hcHAvLi9zcmMvYXBpL2ZpcmViYXNlL2V4ZXJjaXNlTG9nL3NlcnZpY2UudHM/MDhkYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGaXJlc3RvcmUsIGNvbGxlY3Rpb24sIGRvYywgc2V0RG9jIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcbmltcG9ydCB7IEV4ZXJjaXNlTG9nIH0gZnJvbSAnLi4vZXhlcmNpc2UvdHlwZXMnO1xuaW1wb3J0IHsgV29ya291dCB9IGZyb20gJy4uLy4uL2ZpcmViYXNlL3dvcmtvdXQnO1xuaW1wb3J0IHsgdXNlclNlcnZpY2UgfSBmcm9tICcuLi91c2VyJztcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vY29uZmlnJztcblxuY2xhc3MgRXhlcmNpc2VMb2dTZXJ2aWNlIHtcbiAgICBwcml2YXRlIF9hbGxMb2dzOiBFeGVyY2lzZUxvZ1tdID0gW107XG5cbiAgICAvLyBHZXR0ZXIgZm9yIGFsbCBsb2dzXG4gICAgZ2V0IGFsbExvZ3MoKTogRXhlcmNpc2VMb2dbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hbGxMb2dzO1xuICAgIH1cblxuICAgIC8vIFNldHRlciBmb3IgYWxsIGxvZ3NcbiAgICBzZXQgYWxsTG9ncyhsb2dzOiBFeGVyY2lzZUxvZ1tdKSB7XG4gICAgICAgIHRoaXMuX2FsbExvZ3MgPSBsb2dzO1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZUV4ZXJjaXNlTG9nKGxvZzogRXhlcmNpc2VMb2csIHdvcmtvdXQ6IFdvcmtvdXQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgdXNlcklkID0gdXNlclNlcnZpY2Uubm9uVUlDdXJyZW50VXNlcj8uaWQgfHwgJ2Fub255bW91cyc7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXRlIHJlZmVyZW5jZXMgdG8gdGhlIHdvcmtvdXQgYW5kIGxvZyBkb2N1bWVudHNcbiAgICAgICAgY29uc3Qgd29ya291dFJlZiA9IGRvYyhcbiAgICAgICAgICAgIGNvbGxlY3Rpb24oZGIsIFwidXNlcnNcIiwgdXNlcklkLCBcIndvcmtvdXRTZXNzaW9uc1wiKSwgXG4gICAgICAgICAgICB3b3Jrb3V0LmlkXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSB3b3Jrb3V0J3MgdXBkYXRlZEF0IHRpbWVzdGFtcFxuICAgICAgICBjb25zdCB1cGRhdGVkV29ya291dERhdGUgPSB7XG4gICAgICAgICAgICAuLi53b3Jrb3V0LFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgdXBkYXRlZFdvcmtvdXQgPSBuZXcgV29ya291dCh1cGRhdGVkV29ya291dERhdGUpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHdvcmtvdXQgZG9jdW1lbnRcbiAgICAgICAgICAgIGF3YWl0IHNldERvYyh3b3Jrb3V0UmVmLCB1cGRhdGVkV29ya291dC50b0RpY3Rpb25hcnkoKSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIldvcmtvdXQgZG9jdW1lbnQgdXBkYXRlZCBzdWNjZXNzZnVsbHlcIik7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSByZWZlcmVuY2UgdG8gdGhlIGxvZyBkb2N1bWVudFxuICAgICAgICAgICAgY29uc3QgbG9nUmVmID0gZG9jKFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24od29ya291dFJlZiwgXCJsb2dzXCIpLCBcbiAgICAgICAgICAgICAgICBsb2cuaWRcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbG9nIGRvY3VtZW50XG4gICAgICAgICAgICBhd2FpdCBzZXREb2MobG9nUmVmLCBsb2cudG9EaWN0aW9uYXJ5KCkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFeGVyY2lzZSBsb2cgZG9jdW1lbnQgdXBkYXRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgZXhlcmNpc2UgbG9nOlwiLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhlbHBlciBtZXRob2QgdG8gY29udmVydCBGaXJlc3RvcmUgZGF0YSB0byBFeGVyY2lzZUxvZ1xuICAgIHByaXZhdGUgY29udmVydFRvRXhlcmNpc2VMb2coZGF0YTogYW55KTogRXhlcmNpc2VMb2cge1xuICAgICAgICByZXR1cm4gbmV3IEV4ZXJjaXNlTG9nKGRhdGEpO1xuICAgIH1cblxuICAgIC8vIE1ldGhvZCB0byBjbGVhciBhbGwgbG9ncyAodXNlZnVsIGZvciBjbGVhbnVwKVxuICAgIGNsZWFyTG9ncygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fYWxsTG9ncyA9IFtdO1xuICAgIH1cbn1cblxuLy8gRXhwb3J0IGEgc2luZ2xlIGluc3RhbmNlLCBtYXRjaGluZyB0aGUgcGF0dGVybiB1c2VkIGluIFVzZXJTZXJ2aWNlXG5leHBvcnQgY29uc3QgZXhlcmNpc2VMb2dTZXJ2aWNlID0gbmV3IEV4ZXJjaXNlTG9nU2VydmljZSgpOyJdLCJuYW1lcyI6WyJjb2xsZWN0aW9uIiwiZG9jIiwic2V0RG9jIiwiRXhlcmNpc2VMb2ciLCJXb3Jrb3V0IiwidXNlclNlcnZpY2UiLCJkYiIsIkV4ZXJjaXNlTG9nU2VydmljZSIsImFsbExvZ3MiLCJfYWxsTG9ncyIsImxvZ3MiLCJ1cGRhdGVFeGVyY2lzZUxvZyIsImxvZyIsIndvcmtvdXQiLCJ1c2VySWQiLCJub25VSUN1cnJlbnRVc2VyIiwiaWQiLCJ3b3Jrb3V0UmVmIiwidXBkYXRlZFdvcmtvdXREYXRlIiwidXBkYXRlZEF0IiwiRGF0ZSIsInVwZGF0ZWRXb3Jrb3V0IiwidG9EaWN0aW9uYXJ5IiwiY29uc29sZSIsImxvZ1JlZiIsImVycm9yIiwiY29udmVydFRvRXhlcmNpc2VMb2ciLCJkYXRhIiwiY2xlYXJMb2dzIiwiZXhlcmNpc2VMb2dTZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/api/firebase/exerciseLog/service.ts\n");

/***/ }),

/***/ "./src/api/firebase/storage/service.ts":
/*!*********************************************!*\
  !*** ./src/api/firebase/storage/service.ts ***!
  \*********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FirebaseStorageService: () => (/* binding */ FirebaseStorageService),\n/* harmony export */   UploadImageType: () => (/* binding */ UploadImageType),\n/* harmony export */   VideoTrimmerService: () => (/* binding */ VideoTrimmerService),\n/* harmony export */   VideoType: () => (/* binding */ VideoType),\n/* harmony export */   firebaseStorageService: () => (/* binding */ firebaseStorageService),\n/* harmony export */   videoTrimmerService: () => (/* binding */ videoTrimmerService)\n/* harmony export */ });\n/* harmony import */ var firebase_storage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/storage */ \"firebase/storage\");\n/* harmony import */ var _api_firebase_user__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../api/firebase/user */ \"./src/api/firebase/user/index.ts\");\n/* harmony import */ var _api_firebase_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../api/firebase/config */ \"./src/api/firebase/config.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_storage__WEBPACK_IMPORTED_MODULE_0__, _api_firebase_user__WEBPACK_IMPORTED_MODULE_1__, _api_firebase_config__WEBPACK_IMPORTED_MODULE_2__]);\n([firebase_storage__WEBPACK_IMPORTED_MODULE_0__, _api_firebase_user__WEBPACK_IMPORTED_MODULE_1__, _api_firebase_config__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// src/services/FirebaseStorageService.ts\n\n\n\n\nvar UploadImageType;\n(function(UploadImageType) {\n    UploadImageType[\"Profile\"] = \"profile_images\";\n    UploadImageType[\"Feedback\"] = \"feedback\";\n    UploadImageType[\"CheckIn\"] = \"checkin\";\n    UploadImageType[\"Meal\"] = \"meal\";\n    UploadImageType[\"GroupChat\"] = \"group_chat\";\n})(UploadImageType || (UploadImageType = {}));\nvar VideoType;\n(function(VideoType) {\n    VideoType[\"Exercise\"] = \"exercise\";\n    VideoType[\"Intro\"] = \"intro\";\n    VideoType[\"RoundChat\"] = \"round-chat\";\n})(VideoType || (VideoType = {}));\nclass FirebaseStorageService {\n    async uploadVideo(file, videoType = \"exercise\", onProgress, exerciseName) {\n        console.log(\"[DEBUG-STORAGE] Starting uploadVideo method\", {\n            fileType: file.type,\n            fileSize: file.size,\n            videoType,\n            exerciseName\n        });\n        // Ensure user is authenticated\n        const user = _api_firebase_config__WEBPACK_IMPORTED_MODULE_2__.auth.currentUser;\n        if (!user) {\n            console.error(\"[DEBUG-STORAGE] Authentication error: No current user\");\n            throw new Error(\"User must be authenticated to upload video\");\n        }\n        console.log(\"[DEBUG-STORAGE] User authenticated\", {\n            uid: user.uid,\n            email: user.email\n        });\n        // Validate file type and size\n        const ALLOWED_TYPES = [\n            \"video/mp4\",\n            \"video/quicktime\",\n            \"video/x-msvideo\"\n        ];\n        const MAX_FILE_SIZE = 100 * 1024 * 1024; // 100MB\n        if (!ALLOWED_TYPES.includes(file.type)) {\n            console.error(\"[DEBUG-STORAGE] File type validation error\", {\n                fileType: file.type,\n                allowedTypes: ALLOWED_TYPES\n            });\n            throw new Error(\"Invalid file type. Only MP4, AVI, and QuickTime videos are allowed.\");\n        }\n        if (file.size > MAX_FILE_SIZE) {\n            console.error(\"[DEBUG-STORAGE] File size validation error\", {\n                fileSize: file.size,\n                maxSize: MAX_FILE_SIZE\n            });\n            throw new Error(\"File is too large. Maximum size is 100MB.\");\n        }\n        console.log(\"[DEBUG-STORAGE] File validation passed\");\n        // Generate unique filename\n        const fileName = `${Date.now()}_${file.name}`;\n        // Determine the storage path based on the video type and exercise name\n        let storagePath = \"\";\n        if (videoType === \"exercise\" && exerciseName) {\n            // Format the exercise name for storage path (capitalize first letter of each word)\n            const formattedExerciseName = exerciseName.trim().split(\" \").map((word)=>word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()).join(\" \");\n            // Use exercise name for videos folder structure\n            storagePath = `videos/${formattedExerciseName}/${fileName}`;\n            console.log(\"[DEBUG-STORAGE] Using exercise name for storage path:\", formattedExerciseName);\n        } else {\n            // Fallback to user ID if no exercise name provided\n            storagePath = `videos/${videoType}/${user.uid}/${fileName}`;\n            console.log(\"[DEBUG-STORAGE] Using default storage path (no exercise name provided)\");\n        }\n        console.log(\"[DEBUG-STORAGE] Generated storage path\", {\n            fileName,\n            storagePath\n        });\n        // Create storage reference\n        const storageRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.ref)((0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.getStorage)(), storagePath);\n        console.log(\"[DEBUG-STORAGE] Created storage reference\");\n        try {\n            // Create upload task\n            console.log(\"[DEBUG-STORAGE] Creating upload task\");\n            const uploadTask = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.uploadBytesResumable)(storageRef, file);\n            console.log(\"[DEBUG-STORAGE] Upload task created\");\n            // Add progress listener if callback provided\n            if (onProgress) {\n                console.log(\"[DEBUG-STORAGE] Adding progress listener\");\n                uploadTask.on(\"state_changed\", (snapshot)=>{\n                    const progress = snapshot.bytesTransferred / snapshot.totalBytes;\n                    console.log(`[DEBUG-STORAGE] Upload progress: ${Math.round(progress * 100)}%`, {\n                        bytesTransferred: snapshot.bytesTransferred,\n                        totalBytes: snapshot.totalBytes,\n                        state: snapshot.state\n                    });\n                    onProgress(progress);\n                }, (error)=>{\n                    console.error(\"[DEBUG-STORAGE] Upload state error:\", error);\n                });\n            }\n            // Wait for upload to complete\n            console.log(\"[DEBUG-STORAGE] Waiting for upload to complete\");\n            const snapshot = await uploadTask;\n            console.log(\"[DEBUG-STORAGE] Upload completed\", snapshot);\n            // Get download URL\n            console.log(\"[DEBUG-STORAGE] Getting download URL\");\n            const downloadURL = await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.getDownloadURL)(snapshot.ref);\n            console.log(\"[DEBUG-STORAGE] Got download URL:\", downloadURL);\n            const gsURL = `gs://${snapshot.ref.bucket}/${snapshot.ref.fullPath}`;\n            console.log(\"[DEBUG-STORAGE] Complete upload result\", {\n                gsURL,\n                downloadURL\n            });\n            return {\n                gsURL,\n                downloadURL\n            };\n        } catch (error) {\n            console.error(\"[DEBUG-STORAGE] Video upload failed\", error);\n            console.error(\"[DEBUG-STORAGE] Error details:\", {\n                message: error instanceof Error ? error.message : \"Unknown error\",\n                name: error instanceof Error ? error.name : \"Unknown error type\",\n                stack: error instanceof Error ? error.stack : \"No stack trace\"\n            });\n            throw error;\n        }\n    }\n    async uploadImage(file, imageType = \"profile_images\") {\n        // Ensure user is authenticated\n        const user = _api_firebase_config__WEBPACK_IMPORTED_MODULE_2__.auth.currentUser;\n        if (!user) {\n            throw new Error(\"User must be authenticated to upload image\");\n        }\n        // Generate unique filename\n        const fileName = `${Date.now()}_${file.name}`;\n        const storagePath = `${imageType}/${user.uid}/${fileName}`;\n        // Create storage reference\n        const storageRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.ref)((0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.getStorage)(), storagePath);\n        try {\n            // Upload the file\n            const snapshot = await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.uploadBytes)(storageRef, file);\n            // Get download URL\n            const downloadURL = await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.getDownloadURL)(snapshot.ref);\n            // Construct GS URL (Google Storage URL)\n            const gsURL = `gs://${snapshot.ref.bucket}/${snapshot.ref.fullPath}`;\n            // If it's a profile image, update the user\n            if (imageType === \"profile_images\") {\n                await this.updateUserProfileImage(downloadURL);\n            }\n            return {\n                gsURL,\n                downloadURL\n            };\n        } catch (error) {\n            console.error(\"Image upload failed\", error);\n            throw error;\n        }\n    }\n    /**\n   * Uploads a GIF blob to Firebase Storage\n   * @param blob The GIF blob to upload\n   * @param storagePath The path in Firebase Storage to upload to\n   * @returns Promise that resolves to the upload result\n   */ async uploadGifBlob(blob, storagePath) {\n        console.log(\"[DEBUG-STORAGE] Starting uploadGifBlob method\", {\n            blobSize: blob.size,\n            storagePath\n        });\n        // Ensure user is authenticated\n        const user = _api_firebase_config__WEBPACK_IMPORTED_MODULE_2__.auth.currentUser;\n        if (!user) {\n            console.error(\"[DEBUG-STORAGE] Authentication error: No current user\");\n            throw new Error(\"User must be authenticated to upload GIF\");\n        }\n        console.log(\"[DEBUG-STORAGE] User authenticated\", {\n            uid: user.uid,\n            email: user.email\n        });\n        try {\n            // Create a storage reference\n            const storageRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.ref)(this.storage, storagePath);\n            // Upload the blob\n            console.log(\"[DEBUG-STORAGE] Uploading GIF blob to\", storagePath);\n            const snapshot = await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.uploadBytes)(storageRef, blob, {\n                contentType: \"image/gif\",\n                customMetadata: {\n                    \"uploaded-by\": user.uid,\n                    \"upload-timestamp\": new Date().toISOString()\n                }\n            });\n            // Get the download URL\n            const downloadURL = await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.getDownloadURL)(snapshot.ref);\n            console.log(\"[DEBUG-STORAGE] GIF upload complete\", {\n                downloadURL,\n                storagePath\n            });\n            return {\n                gsURL: storagePath,\n                downloadURL\n            };\n        } catch (error) {\n            console.error(\"[DEBUG-STORAGE] Error uploading GIF:\", error);\n            throw error;\n        }\n    }\n    async updateUserProfileImage(imageURL) {\n        // Ensure current user exists\n        if (!_api_firebase_user__WEBPACK_IMPORTED_MODULE_1__.userService.nonUICurrentUser) {\n            throw new Error(\"No current user found\");\n        }\n        // Create a new User object with updated profile image\n        const updatedUser = new _api_firebase_user__WEBPACK_IMPORTED_MODULE_1__.User(_api_firebase_user__WEBPACK_IMPORTED_MODULE_1__.userService.nonUICurrentUser.id, {\n            ..._api_firebase_user__WEBPACK_IMPORTED_MODULE_1__.userService.nonUICurrentUser.toDictionary(),\n            profileImage: {\n                profileImageURL: imageURL,\n                imageOffsetWidth: 0,\n                imageOffsetHeight: 0\n            },\n            updatedAt: new Date()\n        });\n        // Update user in Firestore\n        await _api_firebase_user__WEBPACK_IMPORTED_MODULE_1__.userService.updateUser(updatedUser.id, updatedUser);\n        _api_firebase_user__WEBPACK_IMPORTED_MODULE_1__.userService.nonUICurrentUser = updatedUser; // Update cached user\n    }\n    async fetchImage(url) {\n        // Check cache first\n        if (this.imageCache.has(url)) {\n            return this.imageCache.get(url);\n        }\n        try {\n            const response = await fetch(url);\n            const blob = await response.blob();\n            const imageURL = URL.createObjectURL(blob);\n            // Cache the image URL\n            this.imageCache.set(url, imageURL);\n            return imageURL;\n        } catch (error) {\n            console.error(\"Image fetch failed\", error);\n            throw error;\n        }\n    }\n    async uploadFileToStorage(file, storagePath, onProgress) {\n        console.log(\"[DEBUG-STORAGE] Starting uploadFileToStorage method\", {\n            fileName: file.name,\n            fileType: file.type,\n            fileSize: file.size,\n            storagePath\n        });\n        const user = _api_firebase_config__WEBPACK_IMPORTED_MODULE_2__.auth.currentUser;\n        if (!user) {\n            console.error(\"[DEBUG-STORAGE] Authentication error: No current user for uploadFileToStorage\");\n            // Depending on requirements, you might allow uploads for certain public paths without auth,\n            // but for now, let's keep it consistent with other upload methods.\n            throw new Error(\"User must be authenticated to upload file\");\n        }\n        console.log(\"[DEBUG-STORAGE] User authenticated for uploadFileToStorage\", {\n            uid: user.uid\n        });\n        // Basic file validation (can be expanded)\n        if (!file) {\n            console.error(\"[DEBUG-STORAGE] File validation error: No file provided\");\n            throw new Error(\"No file provided for upload.\");\n        }\n        const storageRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.ref)(this.storage, storagePath);\n        console.log(\"[DEBUG-STORAGE] Created storage reference for uploadFileToStorage\");\n        try {\n            console.log(\"[DEBUG-STORAGE] Creating upload task for uploadFileToStorage\");\n            const uploadTask = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.uploadBytesResumable)(storageRef, file);\n            console.log(\"[DEBUG-STORAGE] Upload task created for uploadFileToStorage\");\n            if (onProgress) {\n                console.log(\"[DEBUG-STORAGE] Adding progress listener for uploadFileToStorage\");\n                uploadTask.on(\"state_changed\", (snapshot)=>{\n                    const progress = snapshot.bytesTransferred / snapshot.totalBytes;\n                    // console.log(`[DEBUG-STORAGE] Upload progress for ${storagePath}: ${Math.round(progress * 100)}%`);\n                    onProgress(progress);\n                }, (error)=>{\n                    console.error(`[DEBUG-STORAGE] Upload state error for ${storagePath}:`, error);\n                });\n            }\n            console.log(\"[DEBUG-STORAGE] Waiting for upload to complete for uploadFileToStorage\", storagePath);\n            const snapshot = await uploadTask;\n            console.log(\"[DEBUG-STORAGE] Upload completed for uploadFileToStorage\", snapshot);\n            console.log(\"[DEBUG-STORAGE] Getting download URL for uploadFileToStorage\", storagePath);\n            const downloadURL = await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.getDownloadURL)(snapshot.ref);\n            console.log(\"[DEBUG-STORAGE] Got download URL for uploadFileToStorage:\", downloadURL);\n            const gsURL = `gs://${snapshot.ref.bucket}/${snapshot.ref.fullPath}`;\n            console.log(\"[DEBUG-STORAGE] Complete upload result for uploadFileToStorage\", {\n                gsURL,\n                downloadURL\n            });\n            return {\n                gsURL,\n                downloadURL\n            };\n        } catch (error) {\n            console.error(`[DEBUG-STORAGE] File upload failed for ${storagePath}`, error);\n            if (error instanceof Error) {\n                console.error(\"[DEBUG-STORAGE] Error details:\", {\n                    message: error.message,\n                    name: error.name,\n                    stack: error.stack\n                });\n            }\n            throw error;\n        }\n    }\n    constructor(){\n        this.storage = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_0__.getStorage)();\n        // Optional: Image caching similar to iOS implementation\n        this.imageCache = new Map();\n    }\n}\n// In FirebaseStorageService.ts, update the VideoTrimmerService class\nclass VideoTrimmerService {\n    trimVideo(file, startTime, endTime, onProgress) {\n        return new Promise((resolve, reject)=>{\n            const video = document.createElement(\"video\");\n            const canvas = document.createElement(\"canvas\");\n            const ctx = canvas.getContext(\"2d\");\n            if (!ctx) {\n                return reject(new Error(\"Unable to get canvas context\"));\n            }\n            const chunks = [];\n            video.src = URL.createObjectURL(file);\n            video.onloadedmetadata = ()=>{\n                canvas.width = video.videoWidth;\n                canvas.height = video.videoHeight;\n                video.currentTime = startTime;\n            };\n            // Wait until the video has seeked to startTime before starting recording\n            video.onseeked = ()=>{\n                const stream = canvas.captureStream();\n                const mediaRecorder = new MediaRecorder(stream);\n                mediaRecorder.ondataavailable = (e)=>{\n                    if (e.data.size > 0) {\n                        chunks.push(e.data);\n                    }\n                };\n                mediaRecorder.onstop = ()=>{\n                    const blob = new Blob(chunks, {\n                        type: chunks[0]?.type || \"video/webm\"\n                    });\n                    // Force the file type to \"video/webm\" so it passes the allowed formats check\n                    const trimmedFile = new File([\n                        blob\n                    ], file.name, {\n                        type: \"video/webm\"\n                    });\n                    URL.revokeObjectURL(video.src);\n                    resolve(trimmedFile);\n                };\n                mediaRecorder.start();\n                video.play();\n                video.ontimeupdate = ()=>{\n                    if (video.currentTime >= endTime) {\n                        mediaRecorder.stop();\n                        video.pause();\n                    } else {\n                        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n                        if (onProgress) {\n                            onProgress((video.currentTime - startTime) / (endTime - startTime));\n                        }\n                    }\n                };\n            };\n            video.onerror = ()=>{\n                reject(new Error(\"Error loading video\"));\n            };\n        });\n    }\n}\nconst videoTrimmerService = new VideoTrimmerService();\n// Create a singleton instance\nconst firebaseStorageService = new FirebaseStorageService();\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL2ZpcmViYXNlL3N0b3JhZ2Uvc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQSx5Q0FBeUM7QUFDNkQ7QUFDcEQ7QUFDTztBQUNMOztVQUV4Q1E7Ozs7OztHQUFBQSxvQkFBQUE7O1VBY01DOzs7O0dBQUFBLGNBQUFBO0FBTVgsTUFBTUM7SUFHWCxNQUFNQyxZQUNGQyxJQUFVLEVBQ1ZDLHNCQUF5QyxFQUN6Q0MsVUFBdUMsRUFDdkNDLFlBQXFCLEVBQ0U7UUFDdkJDLFFBQVFDLEdBQUcsQ0FBQywrQ0FBK0M7WUFDekRDLFVBQVVOLEtBQUtPLElBQUk7WUFDbkJDLFVBQVVSLEtBQUtTLElBQUk7WUFDbkJSO1lBQ0FFO1FBQ0Y7UUFFQSwrQkFBK0I7UUFDL0IsTUFBTU8sT0FBT2Ysc0RBQUlBLENBQUNnQixXQUFXO1FBQzdCLElBQUksQ0FBQ0QsTUFBTTtZQUNUTixRQUFRUSxLQUFLLENBQUM7WUFDZCxNQUFNLElBQUlDLE1BQU07UUFDbEI7UUFFQVQsUUFBUUMsR0FBRyxDQUFDLHNDQUFzQztZQUNoRFMsS0FBS0osS0FBS0ksR0FBRztZQUNiQyxPQUFPTCxLQUFLSyxLQUFLO1FBQ25CO1FBRUEsOEJBQThCO1FBQzlCLE1BQU1DLGdCQUFnQjtZQUFDO1lBQWE7WUFBbUI7U0FBa0I7UUFDekUsTUFBTUMsZ0JBQWdCLE1BQU0sT0FBTyxNQUFNLFFBQVE7UUFFakQsSUFBSSxDQUFDRCxjQUFjRSxRQUFRLENBQUNsQixLQUFLTyxJQUFJLEdBQUc7WUFDdENILFFBQVFRLEtBQUssQ0FBQyw4Q0FBOEM7Z0JBQzFETixVQUFVTixLQUFLTyxJQUFJO2dCQUNuQlksY0FBY0g7WUFDaEI7WUFDQSxNQUFNLElBQUlILE1BQU07UUFDbEI7UUFFQSxJQUFJYixLQUFLUyxJQUFJLEdBQUdRLGVBQWU7WUFDN0JiLFFBQVFRLEtBQUssQ0FBQyw4Q0FBOEM7Z0JBQzFESixVQUFVUixLQUFLUyxJQUFJO2dCQUNuQlcsU0FBU0g7WUFDWDtZQUNBLE1BQU0sSUFBSUosTUFBTTtRQUNsQjtRQUVBVCxRQUFRQyxHQUFHLENBQUM7UUFFWiwyQkFBMkI7UUFDM0IsTUFBTWdCLFdBQVcsQ0FBQyxFQUFFQyxLQUFLQyxHQUFHLEdBQUcsQ0FBQyxFQUFFdkIsS0FBS3dCLElBQUksQ0FBQyxDQUFDO1FBRTdDLHVFQUF1RTtRQUN2RSxJQUFJQyxjQUFjO1FBQ2xCLElBQUl4Qiw0QkFBb0NFLGNBQWM7WUFDcEQsbUZBQW1GO1lBQ25GLE1BQU11Qix3QkFBd0J2QixhQUFhd0IsSUFBSSxHQUM1Q0MsS0FBSyxDQUFDLEtBQ05DLEdBQUcsQ0FBQ0MsQ0FBQUEsT0FBUUEsS0FBS0MsTUFBTSxDQUFDLEdBQUdDLFdBQVcsS0FBS0YsS0FBS0csS0FBSyxDQUFDLEdBQUdDLFdBQVcsSUFDcEVDLElBQUksQ0FBQztZQUVSLGdEQUFnRDtZQUNoRFYsY0FBYyxDQUFDLE9BQU8sRUFBRUMsc0JBQXNCLENBQUMsRUFBRUwsU0FBUyxDQUFDO1lBQzNEakIsUUFBUUMsR0FBRyxDQUFDLHlEQUF5RHFCO1FBQ3ZFLE9BQU87WUFDTCxtREFBbUQ7WUFDbkRELGNBQWMsQ0FBQyxPQUFPLEVBQUV4QixVQUFVLENBQUMsRUFBRVMsS0FBS0ksR0FBRyxDQUFDLENBQUMsRUFBRU8sU0FBUyxDQUFDO1lBQzNEakIsUUFBUUMsR0FBRyxDQUFDO1FBQ2Q7UUFFQUQsUUFBUUMsR0FBRyxDQUFDLDBDQUEwQztZQUNwRGdCO1lBQ0FJO1FBQ0Y7UUFFQSwyQkFBMkI7UUFDM0IsTUFBTVcsYUFBYS9DLHFEQUFHQSxDQUFDRCw0REFBVUEsSUFBSXFDO1FBQ3JDckIsUUFBUUMsR0FBRyxDQUFDO1FBRVosSUFBSTtZQUNGLHFCQUFxQjtZQUNyQkQsUUFBUUMsR0FBRyxDQUFDO1lBQ1osTUFBTWdDLGFBQWE3QyxzRUFBb0JBLENBQUM0QyxZQUFZcEM7WUFDcERJLFFBQVFDLEdBQUcsQ0FBQztZQUVaLDZDQUE2QztZQUM3QyxJQUFJSCxZQUFZO2dCQUNkRSxRQUFRQyxHQUFHLENBQUM7Z0JBQ1pnQyxXQUFXQyxFQUFFLENBQUMsaUJBQ1osQ0FBQ0M7b0JBQ0MsTUFBTUMsV0FBWUQsU0FBU0UsZ0JBQWdCLEdBQUdGLFNBQVNHLFVBQVU7b0JBQ2pFdEMsUUFBUUMsR0FBRyxDQUFDLENBQUMsaUNBQWlDLEVBQUVzQyxLQUFLQyxLQUFLLENBQUNKLFdBQVcsS0FBSyxDQUFDLENBQUMsRUFBRTt3QkFDN0VDLGtCQUFrQkYsU0FBU0UsZ0JBQWdCO3dCQUMzQ0MsWUFBWUgsU0FBU0csVUFBVTt3QkFDL0JHLE9BQU9OLFNBQVNNLEtBQUs7b0JBQ3ZCO29CQUNBM0MsV0FBV3NDO2dCQUNiLEdBQ0EsQ0FBQzVCO29CQUNDUixRQUFRUSxLQUFLLENBQUMsdUNBQXVDQTtnQkFDdkQ7WUFFSjtZQUVBLDhCQUE4QjtZQUM5QlIsUUFBUUMsR0FBRyxDQUFDO1lBQ1osTUFBTWtDLFdBQVcsTUFBTUY7WUFDdkJqQyxRQUFRQyxHQUFHLENBQUMsb0NBQW9Da0M7WUFFaEQsbUJBQW1CO1lBQ25CbkMsUUFBUUMsR0FBRyxDQUFDO1lBQ1osTUFBTXlDLGNBQWMsTUFBTXZELGdFQUFjQSxDQUFDZ0QsU0FBU2xELEdBQUc7WUFDckRlLFFBQVFDLEdBQUcsQ0FBQyxxQ0FBcUN5QztZQUVqRCxNQUFNQyxRQUFRLENBQUMsS0FBSyxFQUFFUixTQUFTbEQsR0FBRyxDQUFDMkQsTUFBTSxDQUFDLENBQUMsRUFBRVQsU0FBU2xELEdBQUcsQ0FBQzRELFFBQVEsQ0FBQyxDQUFDO1lBQ3BFN0MsUUFBUUMsR0FBRyxDQUFDLDBDQUEwQztnQkFBRTBDO2dCQUFPRDtZQUFZO1lBRTNFLE9BQU87Z0JBQUVDO2dCQUFPRDtZQUFZO1FBQzlCLEVBQUUsT0FBT2xDLE9BQU87WUFDZFIsUUFBUVEsS0FBSyxDQUFDLHVDQUF1Q0E7WUFDckRSLFFBQVFRLEtBQUssQ0FBQyxrQ0FBa0M7Z0JBQzlDc0MsU0FBU3RDLGlCQUFpQkMsUUFBUUQsTUFBTXNDLE9BQU8sR0FBRztnQkFDbEQxQixNQUFNWixpQkFBaUJDLFFBQVFELE1BQU1ZLElBQUksR0FBRztnQkFDNUMyQixPQUFPdkMsaUJBQWlCQyxRQUFRRCxNQUFNdUMsS0FBSyxHQUFHO1lBQ2hEO1lBQ0EsTUFBTXZDO1FBQ1I7SUFDRjtJQUVGLE1BQU13QyxZQUNKcEQsSUFBVSxFQUNWcUQsNEJBQW9ELEVBQzdCO1FBQ3ZCLCtCQUErQjtRQUMvQixNQUFNM0MsT0FBT2Ysc0RBQUlBLENBQUNnQixXQUFXO1FBQzdCLElBQUksQ0FBQ0QsTUFBTTtZQUNULE1BQU0sSUFBSUcsTUFBTTtRQUNsQjtRQUVBLDJCQUEyQjtRQUMzQixNQUFNUSxXQUFXLENBQUMsRUFBRUMsS0FBS0MsR0FBRyxHQUFHLENBQUMsRUFBRXZCLEtBQUt3QixJQUFJLENBQUMsQ0FBQztRQUM3QyxNQUFNQyxjQUFjLENBQUMsRUFBRTRCLFVBQVUsQ0FBQyxFQUFFM0MsS0FBS0ksR0FBRyxDQUFDLENBQUMsRUFBRU8sU0FBUyxDQUFDO1FBRTFELDJCQUEyQjtRQUMzQixNQUFNZSxhQUFhL0MscURBQUdBLENBQUNELDREQUFVQSxJQUFJcUM7UUFFckMsSUFBSTtZQUNGLGtCQUFrQjtZQUNsQixNQUFNYyxXQUFXLE1BQU1qRCw2REFBV0EsQ0FBQzhDLFlBQVlwQztZQUUvQyxtQkFBbUI7WUFDbkIsTUFBTThDLGNBQWMsTUFBTXZELGdFQUFjQSxDQUFDZ0QsU0FBU2xELEdBQUc7WUFFckQsd0NBQXdDO1lBQ3hDLE1BQU0wRCxRQUFRLENBQUMsS0FBSyxFQUFFUixTQUFTbEQsR0FBRyxDQUFDMkQsTUFBTSxDQUFDLENBQUMsRUFBRVQsU0FBU2xELEdBQUcsQ0FBQzRELFFBQVEsQ0FBQyxDQUFDO1lBRXBFLDJDQUEyQztZQUMzQyxJQUFJSSxnQ0FBdUM7Z0JBQ3pDLE1BQU0sSUFBSSxDQUFDQyxzQkFBc0IsQ0FBQ1I7WUFDcEM7WUFFQSxPQUFPO2dCQUFFQztnQkFBT0Q7WUFBWTtRQUM5QixFQUFFLE9BQU9sQyxPQUFPO1lBQ2RSLFFBQVFRLEtBQUssQ0FBQyx1QkFBdUJBO1lBQ3JDLE1BQU1BO1FBQ1I7SUFDRjtJQUVBOzs7OztHQUtDLEdBQ0QsTUFBTTJDLGNBQ0pDLElBQVUsRUFDVi9CLFdBQW1CLEVBQ0k7UUFDdkJyQixRQUFRQyxHQUFHLENBQUMsaURBQWlEO1lBQzNEb0QsVUFBVUQsS0FBSy9DLElBQUk7WUFDbkJnQjtRQUNGO1FBRUEsK0JBQStCO1FBQy9CLE1BQU1mLE9BQU9mLHNEQUFJQSxDQUFDZ0IsV0FBVztRQUM3QixJQUFJLENBQUNELE1BQU07WUFDVE4sUUFBUVEsS0FBSyxDQUFDO1lBQ2QsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBRUFULFFBQVFDLEdBQUcsQ0FBQyxzQ0FBc0M7WUFDaERTLEtBQUtKLEtBQUtJLEdBQUc7WUFDYkMsT0FBT0wsS0FBS0ssS0FBSztRQUNuQjtRQUVBLElBQUk7WUFDRiw2QkFBNkI7WUFDN0IsTUFBTXFCLGFBQWEvQyxxREFBR0EsQ0FBQyxJQUFJLENBQUNxRSxPQUFPLEVBQUVqQztZQUVyQyxrQkFBa0I7WUFDbEJyQixRQUFRQyxHQUFHLENBQUMseUNBQXlDb0I7WUFDckQsTUFBTWMsV0FBVyxNQUFNakQsNkRBQVdBLENBQUM4QyxZQUFZb0IsTUFBTTtnQkFDbkRHLGFBQWE7Z0JBQ2JDLGdCQUFnQjtvQkFDZCxlQUFlbEQsS0FBS0ksR0FBRztvQkFDdkIsb0JBQW9CLElBQUlRLE9BQU91QyxXQUFXO2dCQUM1QztZQUNGO1lBRUEsdUJBQXVCO1lBQ3ZCLE1BQU1mLGNBQWMsTUFBTXZELGdFQUFjQSxDQUFDZ0QsU0FBU2xELEdBQUc7WUFFckRlLFFBQVFDLEdBQUcsQ0FBQyx1Q0FBdUM7Z0JBQ2pEeUM7Z0JBQ0FyQjtZQUNGO1lBRUEsT0FBTztnQkFDTHNCLE9BQU90QjtnQkFDUHFCO1lBQ0Y7UUFDRixFQUFFLE9BQU9sQyxPQUFPO1lBQ2RSLFFBQVFRLEtBQUssQ0FBQyx3Q0FBd0NBO1lBQ3RELE1BQU1BO1FBQ1I7SUFDRjtJQUVBLE1BQWMwQyx1QkFBdUJRLFFBQWdCLEVBQWlCO1FBQ3BFLDZCQUE2QjtRQUM3QixJQUFJLENBQUNwRSwyREFBV0EsQ0FBQ3FFLGdCQUFnQixFQUFFO1lBQ2pDLE1BQU0sSUFBSWxELE1BQU07UUFDbEI7UUFFQSxzREFBc0Q7UUFDdEQsTUFBTW1ELGNBQWMsSUFBSXZFLG9EQUFJQSxDQUFDQywyREFBV0EsQ0FBQ3FFLGdCQUFnQixDQUFDRSxFQUFFLEVBQUU7WUFDNUQsR0FBR3ZFLDJEQUFXQSxDQUFDcUUsZ0JBQWdCLENBQUNHLFlBQVksRUFBRTtZQUM5Q0MsY0FBYztnQkFDWkMsaUJBQWlCTjtnQkFDakJPLGtCQUFrQjtnQkFDbEJDLG1CQUFtQjtZQUNyQjtZQUNBQyxXQUFXLElBQUlqRDtRQUNqQjtRQUVBLDJCQUEyQjtRQUMzQixNQUFNNUIsMkRBQVdBLENBQUM4RSxVQUFVLENBQUNSLFlBQVlDLEVBQUUsRUFBRUQ7UUFDN0N0RSwyREFBV0EsQ0FBQ3FFLGdCQUFnQixHQUFHQyxhQUFhLHFCQUFxQjtJQUNuRTtJQUtBLE1BQU1TLFdBQVdDLEdBQVcsRUFBbUI7UUFDN0Msb0JBQW9CO1FBQ3BCLElBQUksSUFBSSxDQUFDQyxVQUFVLENBQUNDLEdBQUcsQ0FBQ0YsTUFBTTtZQUM1QixPQUFPLElBQUksQ0FBQ0MsVUFBVSxDQUFDRSxHQUFHLENBQUNIO1FBQzdCO1FBRUEsSUFBSTtZQUNGLE1BQU1JLFdBQVcsTUFBTUMsTUFBTUw7WUFDN0IsTUFBTWxCLE9BQU8sTUFBTXNCLFNBQVN0QixJQUFJO1lBQ2hDLE1BQU1NLFdBQVdrQixJQUFJQyxlQUFlLENBQUN6QjtZQUVyQyxzQkFBc0I7WUFDdEIsSUFBSSxDQUFDbUIsVUFBVSxDQUFDTyxHQUFHLENBQUNSLEtBQUtaO1lBRXpCLE9BQU9BO1FBQ1QsRUFBRSxPQUFPbEQsT0FBTztZQUNkUixRQUFRUSxLQUFLLENBQUMsc0JBQXNCQTtZQUNwQyxNQUFNQTtRQUNSO0lBQ0Y7SUFFQSxNQUFNdUUsb0JBQ0puRixJQUFVLEVBQ1Z5QixXQUFtQixFQUNuQnZCLFVBQXVDLEVBQ2hCO1FBQ3ZCRSxRQUFRQyxHQUFHLENBQUMsdURBQXVEO1lBQ2pFZ0IsVUFBVXJCLEtBQUt3QixJQUFJO1lBQ25CbEIsVUFBVU4sS0FBS08sSUFBSTtZQUNuQkMsVUFBVVIsS0FBS1MsSUFBSTtZQUNuQmdCO1FBQ0Y7UUFFQSxNQUFNZixPQUFPZixzREFBSUEsQ0FBQ2dCLFdBQVc7UUFDN0IsSUFBSSxDQUFDRCxNQUFNO1lBQ1ROLFFBQVFRLEtBQUssQ0FBQztZQUNkLDRGQUE0RjtZQUM1RixtRUFBbUU7WUFDbkUsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBRUFULFFBQVFDLEdBQUcsQ0FBQyw4REFBOEQ7WUFDeEVTLEtBQUtKLEtBQUtJLEdBQUc7UUFDZjtRQUVBLDBDQUEwQztRQUMxQyxJQUFJLENBQUNkLE1BQU07WUFDVEksUUFBUVEsS0FBSyxDQUFDO1lBQ2QsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBRUEsTUFBTXVCLGFBQWEvQyxxREFBR0EsQ0FBQyxJQUFJLENBQUNxRSxPQUFPLEVBQUVqQztRQUNyQ3JCLFFBQVFDLEdBQUcsQ0FBQztRQUVaLElBQUk7WUFDRkQsUUFBUUMsR0FBRyxDQUFDO1lBQ1osTUFBTWdDLGFBQWE3QyxzRUFBb0JBLENBQUM0QyxZQUFZcEM7WUFDcERJLFFBQVFDLEdBQUcsQ0FBQztZQUVaLElBQUlILFlBQVk7Z0JBQ2RFLFFBQVFDLEdBQUcsQ0FBQztnQkFDWmdDLFdBQVdDLEVBQUUsQ0FBQyxpQkFDWixDQUFDQztvQkFDQyxNQUFNQyxXQUFZRCxTQUFTRSxnQkFBZ0IsR0FBR0YsU0FBU0csVUFBVTtvQkFDakUscUdBQXFHO29CQUNyR3hDLFdBQVdzQztnQkFDYixHQUNBLENBQUM1QjtvQkFDQ1IsUUFBUVEsS0FBSyxDQUFDLENBQUMsdUNBQXVDLEVBQUVhLFlBQVksQ0FBQyxDQUFDLEVBQUViO2dCQUMxRTtZQUVKO1lBRUFSLFFBQVFDLEdBQUcsQ0FBQywwRUFBMEVvQjtZQUN0RixNQUFNYyxXQUFXLE1BQU1GO1lBQ3ZCakMsUUFBUUMsR0FBRyxDQUFDLDREQUE0RGtDO1lBRXhFbkMsUUFBUUMsR0FBRyxDQUFDLGdFQUFnRW9CO1lBQzVFLE1BQU1xQixjQUFjLE1BQU12RCxnRUFBY0EsQ0FBQ2dELFNBQVNsRCxHQUFHO1lBQ3JEZSxRQUFRQyxHQUFHLENBQUMsNkRBQTZEeUM7WUFFekUsTUFBTUMsUUFBUSxDQUFDLEtBQUssRUFBRVIsU0FBU2xELEdBQUcsQ0FBQzJELE1BQU0sQ0FBQyxDQUFDLEVBQUVULFNBQVNsRCxHQUFHLENBQUM0RCxRQUFRLENBQUMsQ0FBQztZQUNwRTdDLFFBQVFDLEdBQUcsQ0FBQyxrRUFBa0U7Z0JBQUUwQztnQkFBT0Q7WUFBWTtZQUVuRyxPQUFPO2dCQUFFQztnQkFBT0Q7WUFBWTtRQUM5QixFQUFFLE9BQU9sQyxPQUFPO1lBQ2RSLFFBQVFRLEtBQUssQ0FBQyxDQUFDLHVDQUF1QyxFQUFFYSxZQUFZLENBQUMsRUFBRWI7WUFDdkUsSUFBSUEsaUJBQWlCQyxPQUFPO2dCQUMxQlQsUUFBUVEsS0FBSyxDQUFDLGtDQUFrQztvQkFDOUNzQyxTQUFTdEMsTUFBTXNDLE9BQU87b0JBQ3RCMUIsTUFBTVosTUFBTVksSUFBSTtvQkFDaEIyQixPQUFPdkMsTUFBTXVDLEtBQUs7Z0JBQ3BCO1lBQ0Y7WUFDQSxNQUFNdkM7UUFDUjtJQUNGOzthQTVWUThDLFVBQVV0RSw0REFBVUE7UUF5UDVCLHdEQUF3RDthQUNoRHVGLGFBQWtDLElBQUlTOztBQW1HaEQ7QUFHQSxxRUFBcUU7QUFFOUQsTUFBTUM7SUFDVEMsVUFDRXRGLElBQVUsRUFDVnVGLFNBQWlCLEVBQ2pCQyxPQUFlLEVBQ2Z0RixVQUF1QyxFQUN4QjtRQUNmLE9BQU8sSUFBSXVGLFFBQVEsQ0FBQ0MsU0FBU0M7WUFDM0IsTUFBTUMsUUFBUUMsU0FBU0MsYUFBYSxDQUFDO1lBQ3JDLE1BQU1DLFNBQVNGLFNBQVNDLGFBQWEsQ0FBQztZQUN0QyxNQUFNRSxNQUFNRCxPQUFPRSxVQUFVLENBQUM7WUFDOUIsSUFBSSxDQUFDRCxLQUFLO2dCQUNSLE9BQU9MLE9BQU8sSUFBSTlFLE1BQU07WUFDMUI7WUFDQSxNQUFNcUYsU0FBaUIsRUFBRTtZQUV6Qk4sTUFBTU8sR0FBRyxHQUFHbkIsSUFBSUMsZUFBZSxDQUFDakY7WUFFaEM0RixNQUFNUSxnQkFBZ0IsR0FBRztnQkFDdkJMLE9BQU9NLEtBQUssR0FBR1QsTUFBTVUsVUFBVTtnQkFDL0JQLE9BQU9RLE1BQU0sR0FBR1gsTUFBTVksV0FBVztnQkFDakNaLE1BQU1hLFdBQVcsR0FBR2xCO1lBQ3RCO1lBRUEseUVBQXlFO1lBQ3pFSyxNQUFNYyxRQUFRLEdBQUc7Z0JBQ2YsTUFBTUMsU0FBU1osT0FBT2EsYUFBYTtnQkFDbkMsTUFBTUMsZ0JBQWdCLElBQUlDLGNBQWNIO2dCQUV4Q0UsY0FBY0UsZUFBZSxHQUFHLENBQUNDO29CQUMvQixJQUFJQSxFQUFFQyxJQUFJLENBQUN4RyxJQUFJLEdBQUcsR0FBRzt3QkFDbkJ5RixPQUFPZ0IsSUFBSSxDQUFDRixFQUFFQyxJQUFJO29CQUNwQjtnQkFDRjtnQkFFQUosY0FBY00sTUFBTSxHQUFHO29CQUNyQixNQUFNM0QsT0FBTyxJQUFJNEQsS0FBS2xCLFFBQVE7d0JBQUUzRixNQUFNMkYsTUFBTSxDQUFDLEVBQUUsRUFBRTNGLFFBQVE7b0JBQWE7b0JBQ3RFLDZFQUE2RTtvQkFDN0UsTUFBTThHLGNBQWMsSUFBSUMsS0FBSzt3QkFBQzlEO3FCQUFLLEVBQUV4RCxLQUFLd0IsSUFBSSxFQUFFO3dCQUFFakIsTUFBTTtvQkFBYTtvQkFDckV5RSxJQUFJdUMsZUFBZSxDQUFDM0IsTUFBTU8sR0FBRztvQkFDN0JULFFBQVEyQjtnQkFDVjtnQkFFQVIsY0FBY1csS0FBSztnQkFDbkI1QixNQUFNNkIsSUFBSTtnQkFFVjdCLE1BQU04QixZQUFZLEdBQUc7b0JBQ25CLElBQUk5QixNQUFNYSxXQUFXLElBQUlqQixTQUFTO3dCQUNoQ3FCLGNBQWNjLElBQUk7d0JBQ2xCL0IsTUFBTWdDLEtBQUs7b0JBQ2IsT0FBTzt3QkFDTDVCLElBQUk2QixTQUFTLENBQUNqQyxPQUFPLEdBQUcsR0FBR0csT0FBT00sS0FBSyxFQUFFTixPQUFPUSxNQUFNO3dCQUN0RCxJQUFJckcsWUFBWTs0QkFDZEEsV0FBVyxDQUFDMEYsTUFBTWEsV0FBVyxHQUFHbEIsU0FBUSxJQUFNQyxDQUFBQSxVQUFVRCxTQUFRO3dCQUNsRTtvQkFDRjtnQkFDRjtZQUNGO1lBRUFLLE1BQU1rQyxPQUFPLEdBQUc7Z0JBQ2RuQyxPQUFPLElBQUk5RSxNQUFNO1lBQ25CO1FBQ0Y7SUFDRjtBQUNGO0FBSUssTUFBTWtILHNCQUFzQixJQUFJMUMsc0JBQXNCO0FBRTdELDhCQUE4QjtBQUN2QixNQUFNMkMseUJBQXlCLElBQUlsSSx5QkFBeUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1hcHAvLi9zcmMvYXBpL2ZpcmViYXNlL3N0b3JhZ2Uvc2VydmljZS50cz82MjFkIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9zZXJ2aWNlcy9GaXJlYmFzZVN0b3JhZ2VTZXJ2aWNlLnRzXG5pbXBvcnQgeyBnZXRTdG9yYWdlLCByZWYsIHVwbG9hZEJ5dGVzLCBnZXREb3dubG9hZFVSTCwgdXBsb2FkQnl0ZXNSZXN1bWFibGUgfSBmcm9tIFwiZmlyZWJhc2Uvc3RvcmFnZVwiO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuLi8uLi8uLi9hcGkvZmlyZWJhc2UvdXNlclwiO1xuaW1wb3J0IHsgdXNlclNlcnZpY2UgfSBmcm9tIFwiLi4vLi4vLi4vYXBpL2ZpcmViYXNlL3VzZXJcIjtcbmltcG9ydCB7IGF1dGggfSBmcm9tIFwiLi4vLi4vLi4vYXBpL2ZpcmViYXNlL2NvbmZpZ1wiO1xuXG5leHBvcnQgZW51bSBVcGxvYWRJbWFnZVR5cGUge1xuICBQcm9maWxlID0gXCJwcm9maWxlX2ltYWdlc1wiLFxuICBGZWVkYmFjayA9IFwiZmVlZGJhY2tcIixcbiAgQ2hlY2tJbiA9IFwiY2hlY2tpblwiLFxuICBNZWFsID0gXCJtZWFsXCIsXG4gIEdyb3VwQ2hhdCA9IFwiZ3JvdXBfY2hhdFwiXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXBsb2FkUmVzdWx0IHtcbiAgZ3NVUkw6IHN0cmluZztcbiAgZG93bmxvYWRVUkw6IHN0cmluZztcbiAgZXhlcmNpc2VJZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IGVudW0gVmlkZW9UeXBlIHtcbiAgICBFeGVyY2lzZSA9IFwiZXhlcmNpc2VcIixcbiAgICBJbnRybyA9IFwiaW50cm9cIixcbiAgICBSb3VuZENoYXQgPSBcInJvdW5kLWNoYXRcIlxufVxuXG5leHBvcnQgY2xhc3MgRmlyZWJhc2VTdG9yYWdlU2VydmljZSB7XG4gIHByaXZhdGUgc3RvcmFnZSA9IGdldFN0b3JhZ2UoKTtcblxuICBhc3luYyB1cGxvYWRWaWRlbyhcbiAgICAgIGZpbGU6IEZpbGUsIFxuICAgICAgdmlkZW9UeXBlOiBWaWRlb1R5cGUgPSBWaWRlb1R5cGUuRXhlcmNpc2UsXG4gICAgICBvblByb2dyZXNzPzogKHByb2dyZXNzOiBudW1iZXIpID0+IHZvaWQsXG4gICAgICBleGVyY2lzZU5hbWU/OiBzdHJpbmdcbiAgICApOiBQcm9taXNlPFVwbG9hZFJlc3VsdD4ge1xuICAgICAgY29uc29sZS5sb2coJ1tERUJVRy1TVE9SQUdFXSBTdGFydGluZyB1cGxvYWRWaWRlbyBtZXRob2QnLCB7IFxuICAgICAgICBmaWxlVHlwZTogZmlsZS50eXBlLCBcbiAgICAgICAgZmlsZVNpemU6IGZpbGUuc2l6ZSwgXG4gICAgICAgIHZpZGVvVHlwZSxcbiAgICAgICAgZXhlcmNpc2VOYW1lXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gRW5zdXJlIHVzZXIgaXMgYXV0aGVudGljYXRlZFxuICAgICAgY29uc3QgdXNlciA9IGF1dGguY3VycmVudFVzZXI7XG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW0RFQlVHLVNUT1JBR0VdIEF1dGhlbnRpY2F0aW9uIGVycm9yOiBObyBjdXJyZW50IHVzZXInKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlciBtdXN0IGJlIGF1dGhlbnRpY2F0ZWQgdG8gdXBsb2FkIHZpZGVvXCIpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnW0RFQlVHLVNUT1JBR0VdIFVzZXIgYXV0aGVudGljYXRlZCcsIHsgXG4gICAgICAgIHVpZDogdXNlci51aWQsIFxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbCBcbiAgICAgIH0pO1xuICBcbiAgICAgIC8vIFZhbGlkYXRlIGZpbGUgdHlwZSBhbmQgc2l6ZVxuICAgICAgY29uc3QgQUxMT1dFRF9UWVBFUyA9IFsndmlkZW8vbXA0JywgJ3ZpZGVvL3F1aWNrdGltZScsICd2aWRlby94LW1zdmlkZW8nXTtcbiAgICAgIGNvbnN0IE1BWF9GSUxFX1NJWkUgPSAxMDAgKiAxMDI0ICogMTAyNDsgLy8gMTAwTUJcbiAgXG4gICAgICBpZiAoIUFMTE9XRURfVFlQRVMuaW5jbHVkZXMoZmlsZS50eXBlKSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbREVCVUctU1RPUkFHRV0gRmlsZSB0eXBlIHZhbGlkYXRpb24gZXJyb3InLCB7IFxuICAgICAgICAgIGZpbGVUeXBlOiBmaWxlLnR5cGUsIFxuICAgICAgICAgIGFsbG93ZWRUeXBlczogQUxMT1dFRF9UWVBFUyBcbiAgICAgICAgfSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZmlsZSB0eXBlLiBPbmx5IE1QNCwgQVZJLCBhbmQgUXVpY2tUaW1lIHZpZGVvcyBhcmUgYWxsb3dlZC5cIik7XG4gICAgICB9XG4gIFxuICAgICAgaWYgKGZpbGUuc2l6ZSA+IE1BWF9GSUxFX1NJWkUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW0RFQlVHLVNUT1JBR0VdIEZpbGUgc2l6ZSB2YWxpZGF0aW9uIGVycm9yJywgeyBcbiAgICAgICAgICBmaWxlU2l6ZTogZmlsZS5zaXplLCBcbiAgICAgICAgICBtYXhTaXplOiBNQVhfRklMRV9TSVpFIFxuICAgICAgICB9KTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmlsZSBpcyB0b28gbGFyZ2UuIE1heGltdW0gc2l6ZSBpcyAxMDBNQi5cIik7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdbREVCVUctU1RPUkFHRV0gRmlsZSB2YWxpZGF0aW9uIHBhc3NlZCcpO1xuICBcbiAgICAgIC8vIEdlbmVyYXRlIHVuaXF1ZSBmaWxlbmFtZVxuICAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHtEYXRlLm5vdygpfV8ke2ZpbGUubmFtZX1gO1xuICAgICAgXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIHN0b3JhZ2UgcGF0aCBiYXNlZCBvbiB0aGUgdmlkZW8gdHlwZSBhbmQgZXhlcmNpc2UgbmFtZVxuICAgICAgbGV0IHN0b3JhZ2VQYXRoID0gJyc7XG4gICAgICBpZiAodmlkZW9UeXBlID09PSBWaWRlb1R5cGUuRXhlcmNpc2UgJiYgZXhlcmNpc2VOYW1lKSB7XG4gICAgICAgIC8vIEZvcm1hdCB0aGUgZXhlcmNpc2UgbmFtZSBmb3Igc3RvcmFnZSBwYXRoIChjYXBpdGFsaXplIGZpcnN0IGxldHRlciBvZiBlYWNoIHdvcmQpXG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZEV4ZXJjaXNlTmFtZSA9IGV4ZXJjaXNlTmFtZS50cmltKClcbiAgICAgICAgICAuc3BsaXQoJyAnKVxuICAgICAgICAgIC5tYXAod29yZCA9PiB3b3JkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgd29yZC5zbGljZSgxKS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgIC5qb2luKCcgJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBVc2UgZXhlcmNpc2UgbmFtZSBmb3IgdmlkZW9zIGZvbGRlciBzdHJ1Y3R1cmVcbiAgICAgICAgc3RvcmFnZVBhdGggPSBgdmlkZW9zLyR7Zm9ybWF0dGVkRXhlcmNpc2VOYW1lfS8ke2ZpbGVOYW1lfWA7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbREVCVUctU1RPUkFHRV0gVXNpbmcgZXhlcmNpc2UgbmFtZSBmb3Igc3RvcmFnZSBwYXRoOicsIGZvcm1hdHRlZEV4ZXJjaXNlTmFtZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGYWxsYmFjayB0byB1c2VyIElEIGlmIG5vIGV4ZXJjaXNlIG5hbWUgcHJvdmlkZWRcbiAgICAgICAgc3RvcmFnZVBhdGggPSBgdmlkZW9zLyR7dmlkZW9UeXBlfS8ke3VzZXIudWlkfS8ke2ZpbGVOYW1lfWA7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbREVCVUctU1RPUkFHRV0gVXNpbmcgZGVmYXVsdCBzdG9yYWdlIHBhdGggKG5vIGV4ZXJjaXNlIG5hbWUgcHJvdmlkZWQpJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdbREVCVUctU1RPUkFHRV0gR2VuZXJhdGVkIHN0b3JhZ2UgcGF0aCcsIHsgXG4gICAgICAgIGZpbGVOYW1lLCBcbiAgICAgICAgc3RvcmFnZVBhdGggXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIHN0b3JhZ2UgcmVmZXJlbmNlXG4gICAgICBjb25zdCBzdG9yYWdlUmVmID0gcmVmKGdldFN0b3JhZ2UoKSwgc3RvcmFnZVBhdGgpO1xuICAgICAgY29uc29sZS5sb2coJ1tERUJVRy1TVE9SQUdFXSBDcmVhdGVkIHN0b3JhZ2UgcmVmZXJlbmNlJyk7XG4gIFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gQ3JlYXRlIHVwbG9hZCB0YXNrXG4gICAgICAgIGNvbnNvbGUubG9nKCdbREVCVUctU1RPUkFHRV0gQ3JlYXRpbmcgdXBsb2FkIHRhc2snKTtcbiAgICAgICAgY29uc3QgdXBsb2FkVGFzayA9IHVwbG9hZEJ5dGVzUmVzdW1hYmxlKHN0b3JhZ2VSZWYsIGZpbGUpO1xuICAgICAgICBjb25zb2xlLmxvZygnW0RFQlVHLVNUT1JBR0VdIFVwbG9hZCB0YXNrIGNyZWF0ZWQnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBwcm9ncmVzcyBsaXN0ZW5lciBpZiBjYWxsYmFjayBwcm92aWRlZFxuICAgICAgICBpZiAob25Qcm9ncmVzcykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdbREVCVUctU1RPUkFHRV0gQWRkaW5nIHByb2dyZXNzIGxpc3RlbmVyJyk7XG4gICAgICAgICAgdXBsb2FkVGFzay5vbignc3RhdGVfY2hhbmdlZCcsIFxuICAgICAgICAgICAgKHNuYXBzaG90KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzID0gKHNuYXBzaG90LmJ5dGVzVHJhbnNmZXJyZWQgLyBzbmFwc2hvdC50b3RhbEJ5dGVzKTtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtERUJVRy1TVE9SQUdFXSBVcGxvYWQgcHJvZ3Jlc3M6ICR7TWF0aC5yb3VuZChwcm9ncmVzcyAqIDEwMCl9JWAsIHtcbiAgICAgICAgICAgICAgICBieXRlc1RyYW5zZmVycmVkOiBzbmFwc2hvdC5ieXRlc1RyYW5zZmVycmVkLFxuICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXM6IHNuYXBzaG90LnRvdGFsQnl0ZXMsXG4gICAgICAgICAgICAgICAgc3RhdGU6IHNuYXBzaG90LnN0YXRlXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBvblByb2dyZXNzKHByb2dyZXNzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW0RFQlVHLVNUT1JBR0VdIFVwbG9hZCBzdGF0ZSBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gV2FpdCBmb3IgdXBsb2FkIHRvIGNvbXBsZXRlXG4gICAgICAgIGNvbnNvbGUubG9nKCdbREVCVUctU1RPUkFHRV0gV2FpdGluZyBmb3IgdXBsb2FkIHRvIGNvbXBsZXRlJyk7XG4gICAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgdXBsb2FkVGFzaztcbiAgICAgICAgY29uc29sZS5sb2coJ1tERUJVRy1TVE9SQUdFXSBVcGxvYWQgY29tcGxldGVkJywgc25hcHNob3QpO1xuICAgICAgICBcbiAgICAgICAgLy8gR2V0IGRvd25sb2FkIFVSTFxuICAgICAgICBjb25zb2xlLmxvZygnW0RFQlVHLVNUT1JBR0VdIEdldHRpbmcgZG93bmxvYWQgVVJMJyk7XG4gICAgICAgIGNvbnN0IGRvd25sb2FkVVJMID0gYXdhaXQgZ2V0RG93bmxvYWRVUkwoc25hcHNob3QucmVmKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tERUJVRy1TVE9SQUdFXSBHb3QgZG93bmxvYWQgVVJMOicsIGRvd25sb2FkVVJMKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGdzVVJMID0gYGdzOi8vJHtzbmFwc2hvdC5yZWYuYnVja2V0fS8ke3NuYXBzaG90LnJlZi5mdWxsUGF0aH1gO1xuICAgICAgICBjb25zb2xlLmxvZygnW0RFQlVHLVNUT1JBR0VdIENvbXBsZXRlIHVwbG9hZCByZXN1bHQnLCB7IGdzVVJMLCBkb3dubG9hZFVSTCB9KTtcbiAgXG4gICAgICAgIHJldHVybiB7IGdzVVJMLCBkb3dubG9hZFVSTCB9O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIltERUJVRy1TVE9SQUdFXSBWaWRlbyB1cGxvYWQgZmFpbGVkXCIsIGVycm9yKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignW0RFQlVHLVNUT1JBR0VdIEVycm9yIGRldGFpbHM6Jywge1xuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgICAgIG5hbWU6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5uYW1lIDogJ1Vua25vd24gZXJyb3IgdHlwZScsXG4gICAgICAgICAgc3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6ICdObyBzdGFjayB0cmFjZSdcbiAgICAgICAgfSk7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH1cblxuICBhc3luYyB1cGxvYWRJbWFnZShcbiAgICBmaWxlOiBGaWxlLCBcbiAgICBpbWFnZVR5cGU6IFVwbG9hZEltYWdlVHlwZSA9IFVwbG9hZEltYWdlVHlwZS5Qcm9maWxlXG4gICk6IFByb21pc2U8VXBsb2FkUmVzdWx0PiB7XG4gICAgLy8gRW5zdXJlIHVzZXIgaXMgYXV0aGVudGljYXRlZFxuICAgIGNvbnN0IHVzZXIgPSBhdXRoLmN1cnJlbnRVc2VyO1xuICAgIGlmICghdXNlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlciBtdXN0IGJlIGF1dGhlbnRpY2F0ZWQgdG8gdXBsb2FkIGltYWdlXCIpO1xuICAgIH1cblxuICAgIC8vIEdlbmVyYXRlIHVuaXF1ZSBmaWxlbmFtZVxuICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7RGF0ZS5ub3coKX1fJHtmaWxlLm5hbWV9YDtcbiAgICBjb25zdCBzdG9yYWdlUGF0aCA9IGAke2ltYWdlVHlwZX0vJHt1c2VyLnVpZH0vJHtmaWxlTmFtZX1gO1xuICAgIFxuICAgIC8vIENyZWF0ZSBzdG9yYWdlIHJlZmVyZW5jZVxuICAgIGNvbnN0IHN0b3JhZ2VSZWYgPSByZWYoZ2V0U3RvcmFnZSgpLCBzdG9yYWdlUGF0aCk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gVXBsb2FkIHRoZSBmaWxlXG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IHVwbG9hZEJ5dGVzKHN0b3JhZ2VSZWYsIGZpbGUpO1xuICAgICAgXG4gICAgICAvLyBHZXQgZG93bmxvYWQgVVJMXG4gICAgICBjb25zdCBkb3dubG9hZFVSTCA9IGF3YWl0IGdldERvd25sb2FkVVJMKHNuYXBzaG90LnJlZik7XG4gICAgICBcbiAgICAgIC8vIENvbnN0cnVjdCBHUyBVUkwgKEdvb2dsZSBTdG9yYWdlIFVSTClcbiAgICAgIGNvbnN0IGdzVVJMID0gYGdzOi8vJHtzbmFwc2hvdC5yZWYuYnVja2V0fS8ke3NuYXBzaG90LnJlZi5mdWxsUGF0aH1gO1xuXG4gICAgICAvLyBJZiBpdCdzIGEgcHJvZmlsZSBpbWFnZSwgdXBkYXRlIHRoZSB1c2VyXG4gICAgICBpZiAoaW1hZ2VUeXBlID09PSBVcGxvYWRJbWFnZVR5cGUuUHJvZmlsZSkge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVVzZXJQcm9maWxlSW1hZ2UoZG93bmxvYWRVUkwpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4geyBnc1VSTCwgZG93bmxvYWRVUkwgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkltYWdlIHVwbG9hZCBmYWlsZWRcIiwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwbG9hZHMgYSBHSUYgYmxvYiB0byBGaXJlYmFzZSBTdG9yYWdlXG4gICAqIEBwYXJhbSBibG9iIFRoZSBHSUYgYmxvYiB0byB1cGxvYWRcbiAgICogQHBhcmFtIHN0b3JhZ2VQYXRoIFRoZSBwYXRoIGluIEZpcmViYXNlIFN0b3JhZ2UgdG8gdXBsb2FkIHRvXG4gICAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgdXBsb2FkIHJlc3VsdFxuICAgKi9cbiAgYXN5bmMgdXBsb2FkR2lmQmxvYihcbiAgICBibG9iOiBCbG9iLFxuICAgIHN0b3JhZ2VQYXRoOiBzdHJpbmdcbiAgKTogUHJvbWlzZTxVcGxvYWRSZXN1bHQ+IHtcbiAgICBjb25zb2xlLmxvZygnW0RFQlVHLVNUT1JBR0VdIFN0YXJ0aW5nIHVwbG9hZEdpZkJsb2IgbWV0aG9kJywgeyBcbiAgICAgIGJsb2JTaXplOiBibG9iLnNpemUsIFxuICAgICAgc3RvcmFnZVBhdGhcbiAgICB9KTtcbiAgICBcbiAgICAvLyBFbnN1cmUgdXNlciBpcyBhdXRoZW50aWNhdGVkXG4gICAgY29uc3QgdXNlciA9IGF1dGguY3VycmVudFVzZXI7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbREVCVUctU1RPUkFHRV0gQXV0aGVudGljYXRpb24gZXJyb3I6IE5vIGN1cnJlbnQgdXNlcicpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlciBtdXN0IGJlIGF1dGhlbnRpY2F0ZWQgdG8gdXBsb2FkIEdJRlwiKTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1tERUJVRy1TVE9SQUdFXSBVc2VyIGF1dGhlbnRpY2F0ZWQnLCB7IFxuICAgICAgdWlkOiB1c2VyLnVpZCwgXG4gICAgICBlbWFpbDogdXNlci5lbWFpbCBcbiAgICB9KTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gQ3JlYXRlIGEgc3RvcmFnZSByZWZlcmVuY2VcbiAgICAgIGNvbnN0IHN0b3JhZ2VSZWYgPSByZWYodGhpcy5zdG9yYWdlLCBzdG9yYWdlUGF0aCk7XG4gICAgICBcbiAgICAgIC8vIFVwbG9hZCB0aGUgYmxvYlxuICAgICAgY29uc29sZS5sb2coJ1tERUJVRy1TVE9SQUdFXSBVcGxvYWRpbmcgR0lGIGJsb2IgdG8nLCBzdG9yYWdlUGF0aCk7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IHVwbG9hZEJ5dGVzKHN0b3JhZ2VSZWYsIGJsb2IsIHtcbiAgICAgICAgY29udGVudFR5cGU6ICdpbWFnZS9naWYnLFxuICAgICAgICBjdXN0b21NZXRhZGF0YToge1xuICAgICAgICAgICd1cGxvYWRlZC1ieSc6IHVzZXIudWlkLFxuICAgICAgICAgICd1cGxvYWQtdGltZXN0YW1wJzogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBHZXQgdGhlIGRvd25sb2FkIFVSTFxuICAgICAgY29uc3QgZG93bmxvYWRVUkwgPSBhd2FpdCBnZXREb3dubG9hZFVSTChzbmFwc2hvdC5yZWYpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnW0RFQlVHLVNUT1JBR0VdIEdJRiB1cGxvYWQgY29tcGxldGUnLCB7IFxuICAgICAgICBkb3dubG9hZFVSTCwgXG4gICAgICAgIHN0b3JhZ2VQYXRoIFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGdzVVJMOiBzdG9yYWdlUGF0aCxcbiAgICAgICAgZG93bmxvYWRVUkxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tERUJVRy1TVE9SQUdFXSBFcnJvciB1cGxvYWRpbmcgR0lGOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgdXBkYXRlVXNlclByb2ZpbGVJbWFnZShpbWFnZVVSTDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gRW5zdXJlIGN1cnJlbnQgdXNlciBleGlzdHNcbiAgICBpZiAoIXVzZXJTZXJ2aWNlLm5vblVJQ3VycmVudFVzZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGN1cnJlbnQgdXNlciBmb3VuZFwiKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgVXNlciBvYmplY3Qgd2l0aCB1cGRhdGVkIHByb2ZpbGUgaW1hZ2VcbiAgICBjb25zdCB1cGRhdGVkVXNlciA9IG5ldyBVc2VyKHVzZXJTZXJ2aWNlLm5vblVJQ3VycmVudFVzZXIuaWQsIHtcbiAgICAgIC4uLnVzZXJTZXJ2aWNlLm5vblVJQ3VycmVudFVzZXIudG9EaWN0aW9uYXJ5KCksXG4gICAgICBwcm9maWxlSW1hZ2U6IHtcbiAgICAgICAgcHJvZmlsZUltYWdlVVJMOiBpbWFnZVVSTCxcbiAgICAgICAgaW1hZ2VPZmZzZXRXaWR0aDogMCxcbiAgICAgICAgaW1hZ2VPZmZzZXRIZWlnaHQ6IDBcbiAgICAgIH0sXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICB9KTtcblxuICAgIC8vIFVwZGF0ZSB1c2VyIGluIEZpcmVzdG9yZVxuICAgIGF3YWl0IHVzZXJTZXJ2aWNlLnVwZGF0ZVVzZXIodXBkYXRlZFVzZXIuaWQsIHVwZGF0ZWRVc2VyKTtcbiAgICB1c2VyU2VydmljZS5ub25VSUN1cnJlbnRVc2VyID0gdXBkYXRlZFVzZXI7IC8vIFVwZGF0ZSBjYWNoZWQgdXNlclxuICB9XG5cbiAgLy8gT3B0aW9uYWw6IEltYWdlIGNhY2hpbmcgc2ltaWxhciB0byBpT1MgaW1wbGVtZW50YXRpb25cbiAgcHJpdmF0ZSBpbWFnZUNhY2hlOiBNYXA8c3RyaW5nLCBzdHJpbmc+ID0gbmV3IE1hcCgpO1xuXG4gIGFzeW5jIGZldGNoSW1hZ2UodXJsOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIC8vIENoZWNrIGNhY2hlIGZpcnN0XG4gICAgaWYgKHRoaXMuaW1hZ2VDYWNoZS5oYXModXJsKSkge1xuICAgICAgcmV0dXJuIHRoaXMuaW1hZ2VDYWNoZS5nZXQodXJsKSE7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XG4gICAgICBjb25zdCBpbWFnZVVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICBcbiAgICAgIC8vIENhY2hlIHRoZSBpbWFnZSBVUkxcbiAgICAgIHRoaXMuaW1hZ2VDYWNoZS5zZXQodXJsLCBpbWFnZVVSTCk7XG4gICAgICBcbiAgICAgIHJldHVybiBpbWFnZVVSTDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkltYWdlIGZldGNoIGZhaWxlZFwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGxvYWRGaWxlVG9TdG9yYWdlKFxuICAgIGZpbGU6IEZpbGUsXG4gICAgc3RvcmFnZVBhdGg6IHN0cmluZyxcbiAgICBvblByb2dyZXNzPzogKHByb2dyZXNzOiBudW1iZXIpID0+IHZvaWRcbiAgKTogUHJvbWlzZTxVcGxvYWRSZXN1bHQ+IHtcbiAgICBjb25zb2xlLmxvZygnW0RFQlVHLVNUT1JBR0VdIFN0YXJ0aW5nIHVwbG9hZEZpbGVUb1N0b3JhZ2UgbWV0aG9kJywge1xuICAgICAgZmlsZU5hbWU6IGZpbGUubmFtZSxcbiAgICAgIGZpbGVUeXBlOiBmaWxlLnR5cGUsXG4gICAgICBmaWxlU2l6ZTogZmlsZS5zaXplLFxuICAgICAgc3RvcmFnZVBhdGgsXG4gICAgfSk7XG5cbiAgICBjb25zdCB1c2VyID0gYXV0aC5jdXJyZW50VXNlcjtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tERUJVRy1TVE9SQUdFXSBBdXRoZW50aWNhdGlvbiBlcnJvcjogTm8gY3VycmVudCB1c2VyIGZvciB1cGxvYWRGaWxlVG9TdG9yYWdlJyk7XG4gICAgICAvLyBEZXBlbmRpbmcgb24gcmVxdWlyZW1lbnRzLCB5b3UgbWlnaHQgYWxsb3cgdXBsb2FkcyBmb3IgY2VydGFpbiBwdWJsaWMgcGF0aHMgd2l0aG91dCBhdXRoLFxuICAgICAgLy8gYnV0IGZvciBub3csIGxldCdzIGtlZXAgaXQgY29uc2lzdGVudCB3aXRoIG90aGVyIHVwbG9hZCBtZXRob2RzLlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlciBtdXN0IGJlIGF1dGhlbnRpY2F0ZWQgdG8gdXBsb2FkIGZpbGVcIik7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1tERUJVRy1TVE9SQUdFXSBVc2VyIGF1dGhlbnRpY2F0ZWQgZm9yIHVwbG9hZEZpbGVUb1N0b3JhZ2UnLCB7XG4gICAgICB1aWQ6IHVzZXIudWlkLFxuICAgIH0pO1xuXG4gICAgLy8gQmFzaWMgZmlsZSB2YWxpZGF0aW9uIChjYW4gYmUgZXhwYW5kZWQpXG4gICAgaWYgKCFmaWxlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbREVCVUctU1RPUkFHRV0gRmlsZSB2YWxpZGF0aW9uIGVycm9yOiBObyBmaWxlIHByb3ZpZGVkJyk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBmaWxlIHByb3ZpZGVkIGZvciB1cGxvYWQuXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0b3JhZ2VSZWYgPSByZWYodGhpcy5zdG9yYWdlLCBzdG9yYWdlUGF0aCk7XG4gICAgY29uc29sZS5sb2coJ1tERUJVRy1TVE9SQUdFXSBDcmVhdGVkIHN0b3JhZ2UgcmVmZXJlbmNlIGZvciB1cGxvYWRGaWxlVG9TdG9yYWdlJyk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ1tERUJVRy1TVE9SQUdFXSBDcmVhdGluZyB1cGxvYWQgdGFzayBmb3IgdXBsb2FkRmlsZVRvU3RvcmFnZScpO1xuICAgICAgY29uc3QgdXBsb2FkVGFzayA9IHVwbG9hZEJ5dGVzUmVzdW1hYmxlKHN0b3JhZ2VSZWYsIGZpbGUpO1xuICAgICAgY29uc29sZS5sb2coJ1tERUJVRy1TVE9SQUdFXSBVcGxvYWQgdGFzayBjcmVhdGVkIGZvciB1cGxvYWRGaWxlVG9TdG9yYWdlJyk7XG5cbiAgICAgIGlmIChvblByb2dyZXNzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbREVCVUctU1RPUkFHRV0gQWRkaW5nIHByb2dyZXNzIGxpc3RlbmVyIGZvciB1cGxvYWRGaWxlVG9TdG9yYWdlJyk7XG4gICAgICAgIHVwbG9hZFRhc2sub24oJ3N0YXRlX2NoYW5nZWQnLFxuICAgICAgICAgIChzbmFwc2hvdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSAoc25hcHNob3QuYnl0ZXNUcmFuc2ZlcnJlZCAvIHNuYXBzaG90LnRvdGFsQnl0ZXMpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYFtERUJVRy1TVE9SQUdFXSBVcGxvYWQgcHJvZ3Jlc3MgZm9yICR7c3RvcmFnZVBhdGh9OiAke01hdGgucm91bmQocHJvZ3Jlc3MgKiAxMDApfSVgKTtcbiAgICAgICAgICAgIG9uUHJvZ3Jlc3MocHJvZ3Jlc3MpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbREVCVUctU1RPUkFHRV0gVXBsb2FkIHN0YXRlIGVycm9yIGZvciAke3N0b3JhZ2VQYXRofTpgLCBlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygnW0RFQlVHLVNUT1JBR0VdIFdhaXRpbmcgZm9yIHVwbG9hZCB0byBjb21wbGV0ZSBmb3IgdXBsb2FkRmlsZVRvU3RvcmFnZScsIHN0b3JhZ2VQYXRoKTtcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgdXBsb2FkVGFzaztcbiAgICAgIGNvbnNvbGUubG9nKCdbREVCVUctU1RPUkFHRV0gVXBsb2FkIGNvbXBsZXRlZCBmb3IgdXBsb2FkRmlsZVRvU3RvcmFnZScsIHNuYXBzaG90KTtcblxuICAgICAgY29uc29sZS5sb2coJ1tERUJVRy1TVE9SQUdFXSBHZXR0aW5nIGRvd25sb2FkIFVSTCBmb3IgdXBsb2FkRmlsZVRvU3RvcmFnZScsIHN0b3JhZ2VQYXRoKTtcbiAgICAgIGNvbnN0IGRvd25sb2FkVVJMID0gYXdhaXQgZ2V0RG93bmxvYWRVUkwoc25hcHNob3QucmVmKTtcbiAgICAgIGNvbnNvbGUubG9nKCdbREVCVUctU1RPUkFHRV0gR290IGRvd25sb2FkIFVSTCBmb3IgdXBsb2FkRmlsZVRvU3RvcmFnZTonLCBkb3dubG9hZFVSTCk7XG5cbiAgICAgIGNvbnN0IGdzVVJMID0gYGdzOi8vJHtzbmFwc2hvdC5yZWYuYnVja2V0fS8ke3NuYXBzaG90LnJlZi5mdWxsUGF0aH1gO1xuICAgICAgY29uc29sZS5sb2coJ1tERUJVRy1TVE9SQUdFXSBDb21wbGV0ZSB1cGxvYWQgcmVzdWx0IGZvciB1cGxvYWRGaWxlVG9TdG9yYWdlJywgeyBnc1VSTCwgZG93bmxvYWRVUkwgfSk7XG5cbiAgICAgIHJldHVybiB7IGdzVVJMLCBkb3dubG9hZFVSTCB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBbREVCVUctU1RPUkFHRV0gRmlsZSB1cGxvYWQgZmFpbGVkIGZvciAke3N0b3JhZ2VQYXRofWAsIGVycm9yKTtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tERUJVRy1TVE9SQUdFXSBFcnJvciBkZXRhaWxzOicsIHtcbiAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgIG5hbWU6IGVycm9yLm5hbWUsXG4gICAgICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufVxuXG5cbi8vIEluIEZpcmViYXNlU3RvcmFnZVNlcnZpY2UudHMsIHVwZGF0ZSB0aGUgVmlkZW9UcmltbWVyU2VydmljZSBjbGFzc1xuXG5leHBvcnQgY2xhc3MgVmlkZW9UcmltbWVyU2VydmljZSB7XG4gICAgdHJpbVZpZGVvKFxuICAgICAgZmlsZTogRmlsZSxcbiAgICAgIHN0YXJ0VGltZTogbnVtYmVyLFxuICAgICAgZW5kVGltZTogbnVtYmVyLFxuICAgICAgb25Qcm9ncmVzcz86IChwcm9ncmVzczogbnVtYmVyKSA9PiB2b2lkXG4gICAgKTogUHJvbWlzZTxGaWxlPiB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiKTtcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgaWYgKCFjdHgpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBFcnJvcihcIlVuYWJsZSB0byBnZXQgY2FudmFzIGNvbnRleHRcIikpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNodW5rczogQmxvYltdID0gW107XG4gIFxuICAgICAgICB2aWRlby5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xuICBcbiAgICAgICAgdmlkZW8ub25sb2FkZWRtZXRhZGF0YSA9ICgpID0+IHtcbiAgICAgICAgICBjYW52YXMud2lkdGggPSB2aWRlby52aWRlb1dpZHRoO1xuICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSB2aWRlby52aWRlb0hlaWdodDtcbiAgICAgICAgICB2aWRlby5jdXJyZW50VGltZSA9IHN0YXJ0VGltZTtcbiAgICAgICAgfTtcbiAgXG4gICAgICAgIC8vIFdhaXQgdW50aWwgdGhlIHZpZGVvIGhhcyBzZWVrZWQgdG8gc3RhcnRUaW1lIGJlZm9yZSBzdGFydGluZyByZWNvcmRpbmdcbiAgICAgICAgdmlkZW8ub25zZWVrZWQgPSAoKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3RyZWFtID0gY2FudmFzLmNhcHR1cmVTdHJlYW0oKTtcbiAgICAgICAgICBjb25zdCBtZWRpYVJlY29yZGVyID0gbmV3IE1lZGlhUmVjb3JkZXIoc3RyZWFtKTtcbiAgXG4gICAgICAgICAgbWVkaWFSZWNvcmRlci5vbmRhdGFhdmFpbGFibGUgPSAoZTogQmxvYkV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5kYXRhLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgIGNodW5rcy5wdXNoKGUuZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgXG4gICAgICAgICAgbWVkaWFSZWNvcmRlci5vbnN0b3AgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoY2h1bmtzLCB7IHR5cGU6IGNodW5rc1swXT8udHlwZSB8fCBcInZpZGVvL3dlYm1cIiB9KTtcbiAgICAgICAgICAgIC8vIEZvcmNlIHRoZSBmaWxlIHR5cGUgdG8gXCJ2aWRlby93ZWJtXCIgc28gaXQgcGFzc2VzIHRoZSBhbGxvd2VkIGZvcm1hdHMgY2hlY2tcbiAgICAgICAgICAgIGNvbnN0IHRyaW1tZWRGaWxlID0gbmV3IEZpbGUoW2Jsb2JdLCBmaWxlLm5hbWUsIHsgdHlwZTogXCJ2aWRlby93ZWJtXCIgfSk7XG4gICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHZpZGVvLnNyYyk7XG4gICAgICAgICAgICByZXNvbHZlKHRyaW1tZWRGaWxlKTtcbiAgICAgICAgICB9O1xuICBcbiAgICAgICAgICBtZWRpYVJlY29yZGVyLnN0YXJ0KCk7XG4gICAgICAgICAgdmlkZW8ucGxheSgpO1xuICBcbiAgICAgICAgICB2aWRlby5vbnRpbWV1cGRhdGUgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodmlkZW8uY3VycmVudFRpbWUgPj0gZW5kVGltZSkge1xuICAgICAgICAgICAgICBtZWRpYVJlY29yZGVyLnN0b3AoKTtcbiAgICAgICAgICAgICAgdmlkZW8ucGF1c2UoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UodmlkZW8sIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgICAgICAgIGlmIChvblByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgb25Qcm9ncmVzcygodmlkZW8uY3VycmVudFRpbWUgLSBzdGFydFRpbWUpIC8gKGVuZFRpbWUgLSBzdGFydFRpbWUpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH07XG4gIFxuICAgICAgICB2aWRlby5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJFcnJvciBsb2FkaW5nIHZpZGVvXCIpKTtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBcbiAgXG5cbmV4cG9ydCBjb25zdCB2aWRlb1RyaW1tZXJTZXJ2aWNlID0gbmV3IFZpZGVvVHJpbW1lclNlcnZpY2UoKTtcblxuLy8gQ3JlYXRlIGEgc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3QgZmlyZWJhc2VTdG9yYWdlU2VydmljZSA9IG5ldyBGaXJlYmFzZVN0b3JhZ2VTZXJ2aWNlKCk7Il0sIm5hbWVzIjpbImdldFN0b3JhZ2UiLCJyZWYiLCJ1cGxvYWRCeXRlcyIsImdldERvd25sb2FkVVJMIiwidXBsb2FkQnl0ZXNSZXN1bWFibGUiLCJVc2VyIiwidXNlclNlcnZpY2UiLCJhdXRoIiwiVXBsb2FkSW1hZ2VUeXBlIiwiVmlkZW9UeXBlIiwiRmlyZWJhc2VTdG9yYWdlU2VydmljZSIsInVwbG9hZFZpZGVvIiwiZmlsZSIsInZpZGVvVHlwZSIsIm9uUHJvZ3Jlc3MiLCJleGVyY2lzZU5hbWUiLCJjb25zb2xlIiwibG9nIiwiZmlsZVR5cGUiLCJ0eXBlIiwiZmlsZVNpemUiLCJzaXplIiwidXNlciIsImN1cnJlbnRVc2VyIiwiZXJyb3IiLCJFcnJvciIsInVpZCIsImVtYWlsIiwiQUxMT1dFRF9UWVBFUyIsIk1BWF9GSUxFX1NJWkUiLCJpbmNsdWRlcyIsImFsbG93ZWRUeXBlcyIsIm1heFNpemUiLCJmaWxlTmFtZSIsIkRhdGUiLCJub3ciLCJuYW1lIiwic3RvcmFnZVBhdGgiLCJmb3JtYXR0ZWRFeGVyY2lzZU5hbWUiLCJ0cmltIiwic3BsaXQiLCJtYXAiLCJ3b3JkIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsInRvTG93ZXJDYXNlIiwiam9pbiIsInN0b3JhZ2VSZWYiLCJ1cGxvYWRUYXNrIiwib24iLCJzbmFwc2hvdCIsInByb2dyZXNzIiwiYnl0ZXNUcmFuc2ZlcnJlZCIsInRvdGFsQnl0ZXMiLCJNYXRoIiwicm91bmQiLCJzdGF0ZSIsImRvd25sb2FkVVJMIiwiZ3NVUkwiLCJidWNrZXQiLCJmdWxsUGF0aCIsIm1lc3NhZ2UiLCJzdGFjayIsInVwbG9hZEltYWdlIiwiaW1hZ2VUeXBlIiwidXBkYXRlVXNlclByb2ZpbGVJbWFnZSIsInVwbG9hZEdpZkJsb2IiLCJibG9iIiwiYmxvYlNpemUiLCJzdG9yYWdlIiwiY29udGVudFR5cGUiLCJjdXN0b21NZXRhZGF0YSIsInRvSVNPU3RyaW5nIiwiaW1hZ2VVUkwiLCJub25VSUN1cnJlbnRVc2VyIiwidXBkYXRlZFVzZXIiLCJpZCIsInRvRGljdGlvbmFyeSIsInByb2ZpbGVJbWFnZSIsInByb2ZpbGVJbWFnZVVSTCIsImltYWdlT2Zmc2V0V2lkdGgiLCJpbWFnZU9mZnNldEhlaWdodCIsInVwZGF0ZWRBdCIsInVwZGF0ZVVzZXIiLCJmZXRjaEltYWdlIiwidXJsIiwiaW1hZ2VDYWNoZSIsImhhcyIsImdldCIsInJlc3BvbnNlIiwiZmV0Y2giLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJzZXQiLCJ1cGxvYWRGaWxlVG9TdG9yYWdlIiwiTWFwIiwiVmlkZW9UcmltbWVyU2VydmljZSIsInRyaW1WaWRlbyIsInN0YXJ0VGltZSIsImVuZFRpbWUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInZpZGVvIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2FudmFzIiwiY3R4IiwiZ2V0Q29udGV4dCIsImNodW5rcyIsInNyYyIsIm9ubG9hZGVkbWV0YWRhdGEiLCJ3aWR0aCIsInZpZGVvV2lkdGgiLCJoZWlnaHQiLCJ2aWRlb0hlaWdodCIsImN1cnJlbnRUaW1lIiwib25zZWVrZWQiLCJzdHJlYW0iLCJjYXB0dXJlU3RyZWFtIiwibWVkaWFSZWNvcmRlciIsIk1lZGlhUmVjb3JkZXIiLCJvbmRhdGFhdmFpbGFibGUiLCJlIiwiZGF0YSIsInB1c2giLCJvbnN0b3AiLCJCbG9iIiwidHJpbW1lZEZpbGUiLCJGaWxlIiwicmV2b2tlT2JqZWN0VVJMIiwic3RhcnQiLCJwbGF5Iiwib250aW1ldXBkYXRlIiwic3RvcCIsInBhdXNlIiwiZHJhd0ltYWdlIiwib25lcnJvciIsInZpZGVvVHJpbW1lclNlcnZpY2UiLCJmaXJlYmFzZVN0b3JhZ2VTZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/api/firebase/storage/service.ts\n");

/***/ }),

/***/ "./src/api/firebase/user/index.ts":
/*!****************************************!*\
  !*** ./src/api/firebase/user/index.ts ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   userService: () => (/* reexport safe */ _service__WEBPACK_IMPORTED_MODULE_1__.userService)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ \"./src/api/firebase/user/types.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _types__WEBPACK_IMPORTED_MODULE_0__) if([\"default\",\"userService\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _types__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./service */ \"./src/api/firebase/user/service.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_service__WEBPACK_IMPORTED_MODULE_1__]);\n_service__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL2ZpcmViYXNlL3VzZXIvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXdCO0FBQ2dCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktYXBwLy4vc3JjL2FwaS9maXJlYmFzZS91c2VyL2luZGV4LnRzP2U0Y2QiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi90eXBlcyc7XG5leHBvcnQgeyB1c2VyU2VydmljZSB9IGZyb20gJy4vc2VydmljZSc7ICJdLCJuYW1lcyI6WyJ1c2VyU2VydmljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/api/firebase/user/index.ts\n");

/***/ }),

/***/ "./src/api/firebase/user/service.ts":
/*!******************************************!*\
  !*** ./src/api/firebase/user/service.ts ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   userService: () => (/* binding */ userService)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ \"./src/api/firebase/user/types.ts\");\n/* harmony import */ var _workout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../workout */ \"./src/api/firebase/workout/index.ts\");\n/* harmony import */ var _exercise_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../exercise/types */ \"./src/api/firebase/exercise/types.ts\");\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../user */ \"./src/api/firebase/user/index.ts\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var firebase_storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! firebase/storage */ \"firebase/storage\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../config */ \"./src/api/firebase/config.ts\");\n/* harmony import */ var _redux_store__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../redux/store */ \"./src/redux/store.ts\");\n/* harmony import */ var _redux_userSlice__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../redux/userSlice */ \"./src/redux/userSlice.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_workout__WEBPACK_IMPORTED_MODULE_1__, _exercise_types__WEBPACK_IMPORTED_MODULE_2__, _user__WEBPACK_IMPORTED_MODULE_3__, firebase_firestore__WEBPACK_IMPORTED_MODULE_4__, firebase_storage__WEBPACK_IMPORTED_MODULE_5__, _config__WEBPACK_IMPORTED_MODULE_6__, _redux_store__WEBPACK_IMPORTED_MODULE_7__, _redux_userSlice__WEBPACK_IMPORTED_MODULE_8__]);\n([_workout__WEBPACK_IMPORTED_MODULE_1__, _exercise_types__WEBPACK_IMPORTED_MODULE_2__, _user__WEBPACK_IMPORTED_MODULE_3__, firebase_firestore__WEBPACK_IMPORTED_MODULE_4__, firebase_storage__WEBPACK_IMPORTED_MODULE_5__, _config__WEBPACK_IMPORTED_MODULE_6__, _redux_store__WEBPACK_IMPORTED_MODULE_7__, _redux_userSlice__WEBPACK_IMPORTED_MODULE_8__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\nclass UserService {\n    get nonUICurrentUser() {\n        const userDict = _redux_store__WEBPACK_IMPORTED_MODULE_7__.store.getState().user.currentUser;\n        return _types__WEBPACK_IMPORTED_MODULE_0__.User.fromDictionary(userDict);\n    }\n    set nonUICurrentUser(user) {\n        _redux_store__WEBPACK_IMPORTED_MODULE_7__.store.dispatch((0,_redux_userSlice__WEBPACK_IMPORTED_MODULE_8__.setUser)(user ? user.toDictionary() : null));\n    }\n    async fetchUserFromFirestore(userId) {\n        console.log(\"fetchUserFromFirestore called for userId:\", userId);\n        const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\", userId);\n        const userDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDoc)(userRef);\n        if (!userDoc.exists()) {\n            console.log(`User document not found for userId: ${userId}`);\n            return null;\n        }\n        const userData = userDoc.data();\n        // Log full user data for debugging\n        console.log(\"Raw user data structure:\", userData);\n        // Special handling for creator object \n        if (userData.creator) {\n            // Log the raw creator object structure and key values\n            console.log(\"Raw creator object keys:\", userData.creator);\n            // Specifically check for the stripeAccountId\n            const rawStripeAccountId = userData.creator.stripeAccountId;\n            console.log(`Raw stripeAccountId in Firestore: ${rawStripeAccountId} (${typeof rawStripeAccountId})`);\n            // Ensure we preserve the stripeAccountId exactly as it comes from Firestore\n            if (rawStripeAccountId) {\n                console.log(\"★ Found valid stripeAccountId in Firestore:\", rawStripeAccountId);\n            } else {\n                console.log(\"✖ No stripeAccountId found in Firestore\");\n            }\n        } else {\n            console.log(\"No creator object found in user data\");\n        }\n        return new _types__WEBPACK_IMPORTED_MODULE_0__.User(userId, userData);\n    }\n    async updateUser(userId, user) {\n        const userRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\", userId);\n        const userData = user.toDictionary();\n        console.log(`[UserService Update] Updating user ${userId} with data:`, JSON.parse(JSON.stringify(userData)));\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.setDoc)(userRef, user.toDictionary(), {\n            merge: true\n        });\n    }\n    async getUsersByIds(ids) {\n        if (!ids.length) return [];\n        const users = [];\n        const chunkSize = 10; // Firestore 'in' queries support up to 10 values\n        for(let i = 0; i < ids.length; i += chunkSize){\n            const chunk = ids.slice(i, i + chunkSize);\n            const usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\");\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.documentId)(), \"in\", chunk));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q);\n            querySnapshot.docs.forEach((doc)=>{\n                users.push(new _types__WEBPACK_IMPORTED_MODULE_0__.User(doc.id, {\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            });\n        }\n        return users;\n    }\n    async getUserById(userId) {\n        try {\n            const userDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\", userId));\n            if (!userDoc.exists()) {\n                throw new Error(\"User not found\");\n            }\n            return new _types__WEBPACK_IMPORTED_MODULE_0__.User(userDoc.id, {\n                id: userDoc.id,\n                ...userDoc.data()\n            });\n        } catch (error) {\n            console.error(\"Error getting user by ID:\", error);\n            throw error;\n        }\n    }\n    async deleteUserVideo(exerciseId) {\n        if (!this.nonUICurrentUser?.id) {\n            throw new Error(\"No user is signed in\");\n        }\n        try {\n            const exerciseRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"exercises\", exerciseId);\n            const exerciseDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDoc)(exerciseRef);\n            if (exerciseDoc.exists()) {\n                const videos = exerciseDoc.data().videos || [];\n                // Delete video files from storage\n                await Promise.all(videos.map(async (video)=>{\n                    if (video.videoURL) {\n                        const videoRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.ref)((0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.getStorage)(), video.videoURL);\n                        await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.deleteObject)(videoRef);\n                    }\n                    if (video.gifURL) {\n                        const gifRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.ref)((0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.getStorage)(), video.gifURL);\n                        await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_5__.deleteObject)(gifRef);\n                    }\n                }));\n            }\n            // Delete exercise document\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.deleteDoc)(exerciseRef);\n        } catch (error) {\n            console.error(\"Error deleting user video:\", error);\n            throw error;\n        }\n    }\n    async deleteStack(stackId) {\n        if (!this.nonUICurrentUser?.id) {\n            throw new Error(\"No user is signed in\");\n        }\n        try {\n            const stackRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\", this.nonUICurrentUser.id, \"MyCreatedWorkouts\", stackId);\n            // Delete associated logs\n            const logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(stackRef, \"logs\");\n            const logsSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(logsRef);\n            await Promise.all(logsSnapshot.docs.map((doc)=>(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.deleteDoc)(doc.ref)));\n            // Delete stack document\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.deleteDoc)(stackRef);\n        } catch (error) {\n            console.error(\"Error deleting stack:\", error);\n            throw error;\n        }\n    }\n    async getBetaUserAccess(email, user) {\n        try {\n            console.log(\"Starting getBetaUser check:\", {\n                email,\n                currentUserId: user.id,\n                environment: \"development\",\n                currentSubscription: user.subscriptionType,\n                timestamp: new Date().toISOString()\n            });\n            const betaRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"beta\");\n            const betaQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(betaRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"email\", \"==\", email.toLowerCase()));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(betaQuery);\n            console.log(\"Beta query results:\", {\n                found: !querySnapshot.empty,\n                email: email.toLowerCase(),\n                documentsCount: querySnapshot.size,\n                timestamp: new Date().toISOString()\n            });\n            if (querySnapshot.empty) {\n                return false;\n            }\n            const document = querySnapshot.docs[0];\n            const isApproved = document.data()?.isApproved;\n            console.log(\"Beta document data:\", {\n                isApproved,\n                documentId: document.id,\n                fullData: document.data()\n            });\n            if (!this.nonUICurrentUser) {\n                console.log(\"No current user found\");\n                return false;\n            }\n            if (isApproved) {\n                if (this.nonUICurrentUser.subscriptionType != _user__WEBPACK_IMPORTED_MODULE_3__.SubscriptionType.unsubscribed) {\n                    console.log(\"User already subscribed:\", {\n                        currentType: user.subscriptionType,\n                        action: \"no change needed\"\n                    });\n                    return true;\n                }\n                console.log(\"Upgrading user to beta:\", {\n                    user: user,\n                    fromType: this.nonUICurrentUser.subscriptionType,\n                    toType: _user__WEBPACK_IMPORTED_MODULE_3__.SubscriptionType.beta\n                });\n                const updatedUser = new _types__WEBPACK_IMPORTED_MODULE_0__.User(user.id, {\n                    ...user,\n                    subscriptionType: _user__WEBPACK_IMPORTED_MODULE_3__.SubscriptionType.beta\n                });\n                await this.updateUser(user.id, updatedUser);\n                console.log(\"Successfully upgraded user to beta\");\n            } else {\n                if (user.subscriptionType == _user__WEBPACK_IMPORTED_MODULE_3__.SubscriptionType.beta) {\n                    console.log(\"Downgrading beta user:\", {\n                        fromType: user.subscriptionType,\n                        toType: _user__WEBPACK_IMPORTED_MODULE_3__.SubscriptionType.unsubscribed\n                    });\n                    const updatedUser = new _types__WEBPACK_IMPORTED_MODULE_0__.User(user.id, {\n                        ...user,\n                        subscriptionType: _user__WEBPACK_IMPORTED_MODULE_3__.SubscriptionType.unsubscribed\n                    });\n                    await this.updateUser(user.id, updatedUser);\n                    console.log(\"Successfully downgraded user from beta\");\n                } else {\n                    console.log(\"No subscription change needed:\", {\n                        currentType: user.subscriptionType,\n                        betaStatus: \"not approved\"\n                    });\n                }\n            }\n            return isApproved || false;\n        } catch (error) {\n            console.error(\"Error in getBetaUser:\", {\n                error,\n                email,\n                userId: user.id,\n                timestamp: new Date().toISOString()\n            });\n            return false;\n        }\n    }\n    async createStack(workout, exerciseLogs) {\n        if (!this.nonUICurrentUser?.id) {\n            throw new Error(\"No user is signed in.\");\n        }\n        // Reference to the new stack document under the user's MyCreatedWorkouts subcollection\n        const userWorkoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\", this.nonUICurrentUser.id, \"MyCreatedWorkouts\"), workout.id);\n        try {\n            // Save the workout document\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.setDoc)(userWorkoutRef, workout.toDictionary());\n            console.log(\"Stack created successfully\");\n            // // If there are exercise logs, save them in a batch to the \"logs\" subcollection\n            if (exerciseLogs && exerciseLogs.length > 0) {\n                const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_6__.db);\n                exerciseLogs.forEach((log, index)=>{\n                    // Set the order (index + 1)\n                    log.order = index + 1;\n                    const logRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(userWorkoutRef, \"logs\"), log.id);\n                    batch.set(logRef, log.toDictionary());\n                });\n                await batch.commit();\n                console.log(\"Exercise logs saved successfully\");\n            }\n            // After successful save, return the workout\n            return workout;\n        } catch (error) {\n            console.error(\"Error creating stack:\", error);\n            throw error;\n        }\n    }\n    async fetchUserStacks(userId) {\n        const currentUserId = userId || this.nonUICurrentUser?.id;\n        if (!currentUserId) {\n            throw new Error(\"No user ID provided\");\n        }\n        try {\n            const stacksRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\", currentUserId, \"MyCreatedWorkouts\");\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(stacksRef);\n            const stacks = await Promise.all(querySnapshot.docs.map(async (doc)=>{\n                const stackData = doc.data();\n                // Fetch logs for this stack\n                const logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(doc.ref, \"logs\");\n                const logsSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(logsRef);\n                console.log(\"log data:\", logsSnapshot.docs.map((logDoc)=>logDoc.data()));\n                const logs = logsSnapshot.docs.map((logDoc)=>new _exercise_types__WEBPACK_IMPORTED_MODULE_2__.ExerciseLog({\n                        id: logDoc.id,\n                        ...logDoc.data()\n                    }));\n                console.log(\"logs after construction:\", logs);\n                return new _workout__WEBPACK_IMPORTED_MODULE_1__.Workout({\n                    ...stackData,\n                    id: doc.id,\n                    logs\n                });\n            }));\n            return stacks;\n        } catch (error) {\n            console.error(\"Error fetching user stacks:\", error);\n            throw error;\n        }\n    }\n    async fetchUserVideos(userId) {\n        // Use current user's ID if no ID is provided\n        const currentUserId = userId || this.nonUICurrentUser?.id;\n        if (!currentUserId) {\n            throw new Error(\"No user ID provided\");\n        }\n        try {\n            // Step 1: Fetch user's exercise videos\n            const exerciseVideosRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"exerciseVideos\");\n            console.log(\"[DEBUG-PROFILE] Fetching videos for user ID:\", currentUserId);\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(exerciseVideosRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"userId\", \"==\", currentUserId));\n            const videoSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q);\n            console.log(`[DEBUG-PROFILE] Found ${videoSnapshot.size} videos for user`);\n            // Check for our specific video ID\n            console.log(\"[DEBUG-PROFILE] Looking for video with ID: UYpNnfGmw9xyPA6dOv2D\");\n            const targetVideoExists = videoSnapshot.docs.some((doc)=>doc.id === \"UYpNnfGmw9xyPA6dOv2D\");\n            console.log(`[DEBUG-PROFILE] Target video exists in query results: ${targetVideoExists}`);\n            // List all video IDs for debugging\n            console.log(\"[DEBUG-PROFILE] All video IDs in query results:\", videoSnapshot.docs.map((doc)=>doc.id));\n            // Group videos by exercise name\n            const videosByExerciseName = {};\n            videoSnapshot.docs.forEach((doc)=>{\n                const videoData = doc.data();\n                const exerciseName = videoData[\"exercise\"];\n                if (!exerciseName) {\n                    console.warn(`Exercise name missing for video ${doc.id}`);\n                    return;\n                }\n                console.log(`[DEBUG-PROFILE] Processing video ${doc.id}:`, {\n                    exerciseName: exerciseName,\n                    exerciseId: videoData.exerciseId || \"\",\n                    userId: videoData.userId || \"\"\n                });\n                // Special logging for Hangs videos to debug the issue\n                if (exerciseName === \"Hangs\") {\n                    console.log(`[DEBUG-PROFILE] Found Hangs video: ${doc.id} with exerciseId: ${videoData.exerciseId || \"none\"}`);\n                }\n                const video = new _exercise_types__WEBPACK_IMPORTED_MODULE_2__.ExerciseVideo({\n                    id: doc.id,\n                    exerciseId: videoData.exerciseId || \"\",\n                    username: videoData.username || \"\",\n                    userId: videoData.userId || \"\",\n                    videoURL: videoData.videoURL || \"\",\n                    fileName: videoData.fileName || \"\",\n                    exercise: exerciseName,\n                    profileImage: new _user__WEBPACK_IMPORTED_MODULE_3__.ProfileImage(videoData.profileImage || {}),\n                    caption: videoData.caption || \"\",\n                    gifURL: videoData.gifURL || \"\",\n                    thumbnail: videoData.thumbnail || \"\",\n                    visibility: videoData.visibility || \"open\",\n                    totalAccountsReached: videoData.totalAccountsReached || 0,\n                    totalAccountLikes: videoData.totalAccountLikes || 0,\n                    totalAccountBookmarked: videoData.totalAccountBookmarked || 0,\n                    totalAccountUsage: videoData.totalAccountUsage || 0,\n                    isApproved: videoData.isApproved || false,\n                    liked: videoData.liked || false,\n                    bookmarked: videoData.bookmarked || false,\n                    createdAt: videoData.createdAt ? new Date(videoData.createdAt) : new Date(),\n                    updatedAt: videoData.updatedAt ? new Date(videoData.updatedAt) : new Date()\n                });\n                if (!videosByExerciseName[exerciseName]) {\n                    videosByExerciseName[exerciseName] = [];\n                }\n                videosByExerciseName[exerciseName].push(video);\n            });\n            // Step 2: Fetch all exercises\n            const exercisesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"exercises\");\n            const exercisesSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(exercisesRef);\n            // Step 3: Map videos to exercises\n            const userExercises = exercisesSnapshot.docs.map((doc)=>{\n                const exerciseData = doc.data();\n                const exerciseName = exerciseData.name;\n                // Check if we have videos for this exercise name\n                const hasVideos = videosByExerciseName[exerciseName]?.length > 0;\n                console.log(`[DEBUG-PROFILE] Checking exercise \"${exerciseName}\" - has videos: ${hasVideos ? \"yes\" : \"no\"}`);\n                // IMPORTANT: If the document ID doesn't match the exercise name (lowercase), find videos by document ID too\n                const exerciseDocId = doc.id.toLowerCase();\n                const exerciseNameLower = exerciseName.toLowerCase();\n                // Log document ID vs name\n                console.log(`[DEBUG-PROFILE] Exercise document ID: \"${exerciseDocId}\", name: \"${exerciseName}\" (lower: \"${exerciseNameLower}\")`);\n                // If they don't match, look for videos by document ID too\n                let videosForThisExercise = videosByExerciseName[exerciseName] || [];\n                if (exerciseDocId !== exerciseNameLower && videosByExerciseName[exerciseDocId]) {\n                    console.log(`[DEBUG-PROFILE] Found ${videosByExerciseName[exerciseDocId].length} additional videos by document ID`);\n                    videosForThisExercise = [\n                        ...videosForThisExercise,\n                        ...videosByExerciseName[exerciseDocId]\n                    ];\n                }\n                // Create base exercise\n                // For the Exercise:\n                const exercise = new _exercise_types__WEBPACK_IMPORTED_MODULE_2__.Exercise({\n                    id: doc.id,\n                    name: exerciseName,\n                    category: exerciseData.category,\n                    primaryBodyParts: exerciseData.primaryBodyParts || [],\n                    secondaryBodyParts: exerciseData.secondaryBodyParts || [],\n                    tags: exerciseData.tags || [],\n                    description: exerciseData.description || \"\",\n                    visibility: exerciseData.visibility || \"limited\",\n                    steps: exerciseData.steps || [],\n                    videos: videosForThisExercise,\n                    currentVideoPosition: 0,\n                    reps: exerciseData.reps || \"\",\n                    sets: exerciseData.sets || 0,\n                    weight: exerciseData.weight || 0,\n                    author: new _exercise_types__WEBPACK_IMPORTED_MODULE_2__.ExerciseAuthor({\n                        userId: exerciseData.author?.userId || \"\",\n                        username: exerciseData.author?.username || \"\"\n                    }),\n                    createdAt: exerciseData.createdAt ? new Date(exerciseData.createdAt) : new Date(),\n                    updatedAt: exerciseData.updatedAt ? new Date(exerciseData.updatedAt) : new Date()\n                });\n                return exercise;\n            }).filter((exercise)=>{\n                const hasVideos = exercise.videos.length > 0;\n                console.log(`[DEBUG-PROFILE] Filtering exercise \"${exercise.name}\" - has videos: ${hasVideos ? \"yes\" : \"no\"}, video count: ${exercise.videos.length}`);\n                return hasVideos;\n            });\n            console.log(`[DEBUG-PROFILE] Final user exercises count: ${userExercises.length}`);\n            console.log(\"[DEBUG-PROFILE] Final exercises:\", userExercises.map((ex)=>({\n                    id: ex.id,\n                    name: ex.name,\n                    videoCount: ex.videos.length,\n                    videoIds: ex.videos.map((v)=>v.id)\n                })));\n            return userExercises;\n        } catch (error) {\n            console.error(\"Error fetching user videos:\", error);\n            throw error;\n        }\n    }\n    async fetchFollowing() {\n        const currentUser = this.nonUICurrentUser;\n        if (!currentUser?.id) {\n            throw new Error(\"No user is signed in\");\n        }\n        try {\n            const followRequestsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"followRequests\");\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(followRequestsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"fromUser.id\", \"==\", currentUser.id));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q);\n            const followRequests = querySnapshot.docs.map((doc)=>{\n                const data = doc.data();\n                return {\n                    fromUser: {\n                        id: data.fromUser?.id || \"\",\n                        username: data.fromUser?.username || \"\",\n                        displayName: data.fromUser?.displayName || \"\"\n                    },\n                    toUser: {\n                        id: data.toUser?.id || \"\",\n                        username: data.toUser?.username || \"\",\n                        displayName: data.toUser?.displayName || \"\"\n                    },\n                    status: data.status || \"\",\n                    createdAt: data.createdAt instanceof Date ? data.createdAt : data.createdAt ? new Date(data.createdAt) : new Date(),\n                    updatedAt: data.updatedAt instanceof Date ? data.updatedAt : data.updatedAt ? new Date(data.updatedAt) : new Date()\n                };\n            });\n            return followRequests;\n        } catch (error) {\n            console.error(\"Error fetching following:\", error);\n            throw error;\n        }\n    }\n    async fetchFollowers() {\n        const currentUser = this.nonUICurrentUser;\n        if (!currentUser?.id) {\n            throw new Error(\"No user is signed in\");\n        }\n        try {\n            const followRequestsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"followRequests\");\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(followRequestsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"toUser.id\", \"==\", currentUser.id));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q);\n            const followRequests = querySnapshot.docs.map((doc)=>{\n                const data = doc.data();\n                return {\n                    fromUser: {\n                        id: data.fromUser?.id || \"\",\n                        username: data.fromUser?.username || \"\",\n                        displayName: data.fromUser?.displayName || \"\"\n                    },\n                    toUser: {\n                        id: data.toUser?.id || \"\",\n                        username: data.toUser?.username || \"\",\n                        displayName: data.toUser?.displayName || \"\"\n                    },\n                    status: data.status || \"\",\n                    createdAt: data.createdAt instanceof Date ? data.createdAt : data.createdAt ? new Date(data.createdAt) : new Date(),\n                    updatedAt: data.updatedAt instanceof Date ? data.updatedAt : data.updatedAt ? new Date(data.updatedAt) : new Date()\n                };\n            });\n            return followRequests;\n        } catch (error) {\n            console.error(\"Error fetching followers:\", error);\n            throw error;\n        }\n    }\n    /**\n   * Fetch user ID by username\n   * @param username The username to search for\n   * @returns Promise resolving to the user ID or null if not found\n   */ async getUserIdByUsername(username) {\n        try {\n            const usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\");\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"username\", \"==\", username), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.limit)(1));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q);\n            if (!querySnapshot.empty) {\n                const userDoc = querySnapshot.docs[0];\n                return userDoc.id;\n            }\n            return null;\n        } catch (error) {\n            console.error(\"Error fetching user ID by username:\", error);\n            return null;\n        }\n    }\n    async getAllUsers() {\n        try {\n            const usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\");\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(usersRef);\n            return querySnapshot.docs.map((doc)=>new _types__WEBPACK_IMPORTED_MODULE_0__.User(doc.id, {\n                    id: doc.id,\n                    ...doc.data()\n                })).filter((user)=>user.profileImage?.profileImageURL); // Only return users with profile images\n        } catch (error) {\n            console.error(\"Error fetching users:\", error);\n            return [];\n        }\n    }\n    // In userService\n    async getUserByUsername(username) {\n        try {\n            const usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\");\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"username\", \"==\", username));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q);\n            if (querySnapshot.empty) {\n                return null;\n            }\n            const userData = querySnapshot.docs[0].data();\n            return new _types__WEBPACK_IMPORTED_MODULE_0__.User(querySnapshot.docs[0].id, {\n                id: querySnapshot.docs[0].id,\n                ...userData\n            });\n        } catch (error) {\n            throw error;\n        }\n    }\n    async fetchFeaturedUsers() {\n        try {\n            // Create a query against the users collection\n            const usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\");\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"videoCount\", \">\", 0) // Only fetch users with videos\n            );\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q);\n            // Map the documents to User objects\n            const users = querySnapshot.docs.map((doc)=>{\n                const data = doc.data();\n                return new _types__WEBPACK_IMPORTED_MODULE_0__.User(doc.id, {\n                    id: doc.id,\n                    ...data\n                });\n            })// Filter out users without profile images\n            .filter((user)=>user.profileImage?.profileImageURL)// Shuffle the results\n            .sort(()=>Math.random() - 0.5);\n            return users;\n        } catch (error) {\n            console.error(\"Error fetching users with videos:\", error);\n            return [];\n        }\n    }\n    async queryUsers(searchQuery) {\n        try {\n            const usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"users\");\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"username\", \">=\", searchQuery.toLowerCase()), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"username\", \"<=\", searchQuery.toLowerCase() + \"\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.limit)(10));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q);\n            return querySnapshot.docs.map((doc)=>new _types__WEBPACK_IMPORTED_MODULE_0__.User(doc.id, {\n                    id: doc.id,\n                    ...doc.data()\n                })).filter((user)=>user.profileImage?.profileImageURL); // Only return users with profile images\n        } catch (error) {\n            console.error(\"Error querying users:\", error);\n            return [];\n        }\n    }\n    /**\n   * Check if a user has purchased a specific challenge\n   * @param userId The ID of the user to check\n   * @param challengeId The ID of the challenge to check\n   * @returns Promise resolving to an object with hasPurchased flag and payment details if found\n   */ async hasUserPurchasedChallenge(userId, challengeId) {\n        if (!userId || !challengeId) {\n            console.warn(\"hasUserPurchasedChallenge called with missing parameters\", {\n                userId,\n                challengeId\n            });\n            return {\n                hasPurchased: false\n            };\n        }\n        try {\n            console.log(`==================== PAYMENT CHECK ====================`);\n            console.log(`Checking if user ${userId} has purchased challenge ${challengeId}`);\n            // Convert timestamp for Unix timestamps or Firestore timestamps\n            const convertTimestamp = (timestamp)=>{\n                if (!timestamp) return null;\n                // If it's a number (Unix timestamp), convert it\n                if (typeof timestamp === \"number\") {\n                    return new Date(timestamp * 1000).toISOString();\n                }\n                // If it has a toDate method (Firestore Timestamp)\n                if (timestamp && typeof timestamp.toDate === \"function\") {\n                    return timestamp.toDate().toISOString();\n                }\n                // If it's a Firestore serialized timestamp with _seconds\n                if (timestamp && timestamp._seconds) {\n                    return new Date(timestamp._seconds * 1000).toISOString();\n                }\n                // Handle already converted date\n                if (timestamp instanceof Date) {\n                    return timestamp.toISOString();\n                }\n                // Handle string timestamp\n                if (typeof timestamp === \"string\") {\n                    try {\n                        return new Date(timestamp).toISOString();\n                    } catch (e) {\n                        return timestamp;\n                    }\n                }\n                return null;\n            };\n            // First, let's log all payments for this user\n            const allUserPaymentsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"payments\");\n            const allUserPaymentsQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(allUserPaymentsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"buyerId\", \"==\", userId));\n            const allUserPaymentsSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(allUserPaymentsQuery);\n            console.log(`Found ${allUserPaymentsSnapshot.size} total payments for user ${userId}`);\n            allUserPaymentsSnapshot.forEach((doc)=>{\n                const data = doc.data();\n                console.log(`Payment ${doc.id}:`, {\n                    challengeId: data.challengeId,\n                    amount: data.amount,\n                    status: data.status,\n                    buyerId: data.buyerId,\n                    ownerId: data.ownerId,\n                    createdAt: convertTimestamp(data.createdAt),\n                    rawCreatedAt: data.createdAt ? {\n                        type: typeof data.createdAt,\n                        value: JSON.stringify(data.createdAt)\n                    } : null\n                });\n            });\n            // Simple check: Does this user have ANY payment for this challenge?\n            const matchingPayment = allUserPaymentsSnapshot.docs.find((doc)=>doc.data().challengeId === challengeId);\n            const hasPurchased = !!matchingPayment;\n            console.log(`RESULT: User ${userId} has ${hasPurchased ? \"\" : \"NOT \"}purchased challenge ${challengeId}`);\n            if (hasPurchased) {\n                const paymentData = matchingPayment.data();\n                console.log(\"Found matching payment:\", paymentData);\n                return {\n                    hasPurchased: true,\n                    payment: {\n                        id: matchingPayment.id,\n                        purchaseDate: convertTimestamp(paymentData.createdAt),\n                        amount: paymentData.amount || 0\n                    }\n                };\n            }\n            console.log(`==================== PAYMENT CHECK COMPLETE ====================`);\n            return {\n                hasPurchased: false\n            };\n        } catch (error) {\n            console.error(\"Error checking if user has purchased challenge:\", error);\n            return {\n                hasPurchased: false\n            };\n        }\n    }\n    /**\n   * Saves the Pulse Programming application form data to the beta collection\n   * @param formData The form data to save\n   * @returns Promise resolving to success status\n   */ async saveApplicationForm(formData) {\n        try {\n            // Normalize email to lowercase for consistency\n            const normalizedEmail = formData.email.toLowerCase();\n            // Check if there's an existing application for this email\n            const betaRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(_config__WEBPACK_IMPORTED_MODULE_6__.db, \"beta\");\n            const betaQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(betaRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)(\"email\", \"==\", normalizedEmail));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(betaQuery);\n            const formDataToSave = {\n                email: normalizedEmail,\n                name: formData.name,\n                role: formData.role,\n                primaryUse: formData.primaryUse,\n                useCases: formData.useCases,\n                clientCount: formData.clientCount,\n                yearsExperience: formData.yearsExperience,\n                longTermGoal: formData.longTermGoal,\n                isCertified: formData.isCertified,\n                certificationName: formData.certificationName,\n                applyForFoundingCoaches: formData.applyForFoundingCoaches,\n                isApproved: false,\n                createdAt: new Date(),\n                updatedAt: new Date()\n            };\n            // If a document exists for this email, update it\n            if (!querySnapshot.empty) {\n                const docRef = querySnapshot.docs[0].ref;\n                // Preserve isApproved status if it exists\n                const existingData = querySnapshot.docs[0].data();\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.setDoc)(docRef, {\n                    ...formDataToSave,\n                    isApproved: existingData.isApproved ?? false,\n                    createdAt: existingData.createdAt || new Date(),\n                    updatedAt: new Date() // Update the updated date\n                }, {\n                    merge: true\n                });\n                return {\n                    success: true,\n                    message: \"Application updated successfully\"\n                };\n            } else {\n                // Create a new document\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.addDoc)(betaRef, formDataToSave);\n                return {\n                    success: true,\n                    message: \"Application submitted successfully\"\n                };\n            }\n        } catch (error) {\n            console.error(\"Error saving application form:\", error);\n            return {\n                success: false,\n                message: error instanceof Error ? error.message : \"An error occurred while saving your application\"\n            };\n        }\n    }\n}\nconst userService = new UserService();\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LnRzPzhmMGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVXNlciwgRm9sbG93UmVxdWVzdCB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgV29ya291dCB9IGZyb20gJy4uL3dvcmtvdXQnO1xuaW1wb3J0IHsgRXhlcmNpc2UsIEV4ZXJjaXNlVmlkZW8sIEV4ZXJjaXNlQXV0aG9yLCBFeGVyY2lzZUxvZyB9IGZyb20gJy4uL2V4ZXJjaXNlL3R5cGVzJztcbmltcG9ydCB7IFByb2ZpbGVJbWFnZSwgU3Vic2NyaXB0aW9uVHlwZSB9IGZyb20gJy4uL3VzZXInO1xuXG5pbXBvcnQgeyBkb2MsIGdldERvYywgc2V0RG9jLCBkb2N1bWVudElkLCBjb2xsZWN0aW9uLCBxdWVyeSwgd2hlcmUsIGdldERvY3MsIGxpbWl0LCB3cml0ZUJhdGNoLCBkZWxldGVEb2MsIGFkZERvYyB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XG5pbXBvcnQgeyByZWYsIGRlbGV0ZU9iamVjdCwgZ2V0U3RvcmFnZSB9IGZyb20gJ2ZpcmViYXNlL3N0b3JhZ2UnO1xuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi9jb25maWcnO1xuXG5pbXBvcnQgeyBzdG9yZSB9IGZyb20gJy4uLy4uLy4uL3JlZHV4L3N0b3JlJztcbmltcG9ydCB7IHNldFVzZXIgfSBmcm9tICcuLi8uLi8uLi9yZWR1eC91c2VyU2xpY2UnO1xuXG5jbGFzcyBVc2VyU2VydmljZSB7XG4gIGdldCBub25VSUN1cnJlbnRVc2VyKCk6IFVzZXIgfCBudWxsIHtcbiAgICBjb25zdCB1c2VyRGljdCA9IHN0b3JlLmdldFN0YXRlKCkudXNlci5jdXJyZW50VXNlcjtcbiAgICByZXR1cm4gVXNlci5mcm9tRGljdGlvbmFyeSh1c2VyRGljdCk7XG4gIH1cblxuICBzZXQgbm9uVUlDdXJyZW50VXNlcih1c2VyOiBVc2VyIHwgbnVsbCkge1xuICAgIHN0b3JlLmRpc3BhdGNoKHNldFVzZXIodXNlciA/IHVzZXIudG9EaWN0aW9uYXJ5KCkgOiBudWxsKSk7XG4gIH1cblxuICBhc3luYyBmZXRjaFVzZXJGcm9tRmlyZXN0b3JlKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICAgIGNvbnNvbGUubG9nKCdmZXRjaFVzZXJGcm9tRmlyZXN0b3JlIGNhbGxlZCBmb3IgdXNlcklkOicsIHVzZXJJZCk7XG4gICAgY29uc3QgdXNlclJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdXNlcklkKTtcbiAgICBjb25zdCB1c2VyRG9jID0gYXdhaXQgZ2V0RG9jKHVzZXJSZWYpO1xuXG4gICAgaWYgKCF1c2VyRG9jLmV4aXN0cygpKSB7XG4gICAgICBjb25zb2xlLmxvZyhgVXNlciBkb2N1bWVudCBub3QgZm91bmQgZm9yIHVzZXJJZDogJHt1c2VySWR9YCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyRGF0YSA9IHVzZXJEb2MuZGF0YSgpO1xuICAgIFxuICAgIC8vIExvZyBmdWxsIHVzZXIgZGF0YSBmb3IgZGVidWdnaW5nXG4gICAgY29uc29sZS5sb2coJ1JhdyB1c2VyIGRhdGEgc3RydWN0dXJlOicsIHVzZXJEYXRhKTtcbiAgICBcbiAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBjcmVhdG9yIG9iamVjdCBcbiAgICBpZiAodXNlckRhdGEuY3JlYXRvcikge1xuICAgICAgLy8gTG9nIHRoZSByYXcgY3JlYXRvciBvYmplY3Qgc3RydWN0dXJlIGFuZCBrZXkgdmFsdWVzXG4gICAgICBjb25zb2xlLmxvZygnUmF3IGNyZWF0b3Igb2JqZWN0IGtleXM6JywgdXNlckRhdGEuY3JlYXRvcik7XG4gICAgICBcbiAgICAgIC8vIFNwZWNpZmljYWxseSBjaGVjayBmb3IgdGhlIHN0cmlwZUFjY291bnRJZFxuICAgICAgY29uc3QgcmF3U3RyaXBlQWNjb3VudElkID0gdXNlckRhdGEuY3JlYXRvci5zdHJpcGVBY2NvdW50SWQ7XG4gICAgICBjb25zb2xlLmxvZyhgUmF3IHN0cmlwZUFjY291bnRJZCBpbiBGaXJlc3RvcmU6ICR7cmF3U3RyaXBlQWNjb3VudElkfSAoJHt0eXBlb2YgcmF3U3RyaXBlQWNjb3VudElkfSlgKTtcbiAgICAgIFxuICAgICAgLy8gRW5zdXJlIHdlIHByZXNlcnZlIHRoZSBzdHJpcGVBY2NvdW50SWQgZXhhY3RseSBhcyBpdCBjb21lcyBmcm9tIEZpcmVzdG9yZVxuICAgICAgaWYgKHJhd1N0cmlwZUFjY291bnRJZCkge1xuICAgICAgICBjb25zb2xlLmxvZygn4piFIEZvdW5kIHZhbGlkIHN0cmlwZUFjY291bnRJZCBpbiBGaXJlc3RvcmU6JywgcmF3U3RyaXBlQWNjb3VudElkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinJYgTm8gc3RyaXBlQWNjb3VudElkIGZvdW5kIGluIEZpcmVzdG9yZScpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygnTm8gY3JlYXRvciBvYmplY3QgZm91bmQgaW4gdXNlciBkYXRhJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBVc2VyKHVzZXJJZCwgdXNlckRhdGEpO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlVXNlcih1c2VySWQ6IHN0cmluZywgdXNlcjogVXNlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHVzZXJSZWYgPSBkb2MoZGIsICd1c2VycycsIHVzZXJJZCk7XG4gICAgY29uc3QgdXNlckRhdGEgPSB1c2VyLnRvRGljdGlvbmFyeSgpO1xuICAgIGNvbnNvbGUubG9nKGBbVXNlclNlcnZpY2UgVXBkYXRlXSBVcGRhdGluZyB1c2VyICR7dXNlcklkfSB3aXRoIGRhdGE6YCwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh1c2VyRGF0YSkpKTtcbiAgICBhd2FpdCBzZXREb2ModXNlclJlZiwgdXNlci50b0RpY3Rpb25hcnkoKSwgeyBtZXJnZTogdHJ1ZSB9KTtcbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJzQnlJZHMoaWRzOiBzdHJpbmdbXSk6IFByb21pc2U8VXNlcltdPiB7XG4gICAgaWYgKCFpZHMubGVuZ3RoKSByZXR1cm4gW107XG4gICAgY29uc3QgdXNlcnM6IFVzZXJbXSA9IFtdO1xuICAgIGNvbnN0IGNodW5rU2l6ZSA9IDEwOyAvLyBGaXJlc3RvcmUgJ2luJyBxdWVyaWVzIHN1cHBvcnQgdXAgdG8gMTAgdmFsdWVzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpZHMubGVuZ3RoOyBpICs9IGNodW5rU2l6ZSkge1xuICAgICAgY29uc3QgY2h1bmsgPSBpZHMuc2xpY2UoaSwgaSArIGNodW5rU2l6ZSk7XG4gICAgICBjb25zdCB1c2Vyc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycpO1xuICAgICAgY29uc3QgcSA9IHF1ZXJ5KHVzZXJzUmVmLCB3aGVyZShkb2N1bWVudElkKCksICdpbicsIGNodW5rKSk7XG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICAgIHF1ZXJ5U25hcHNob3QuZG9jcy5mb3JFYWNoKGRvYyA9PiB7XG4gICAgICAgIHVzZXJzLnB1c2gobmV3IFVzZXIoZG9jLmlkLCB7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSkpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB1c2VycztcbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJCeUlkKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJEb2MgPSBhd2FpdCBnZXREb2MoZG9jKGRiLCAndXNlcnMnLCB1c2VySWQpKTtcbiAgICAgIGlmICghdXNlckRvYy5leGlzdHMoKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgbm90IGZvdW5kJyk7XG4gICAgICB9XG4gICBcbiAgICAgIHJldHVybiBuZXcgVXNlcih1c2VyRG9jLmlkLCB7XG4gICAgICAgIGlkOiB1c2VyRG9jLmlkLFxuICAgICAgICAuLi51c2VyRG9jLmRhdGEoKVxuICAgICAgfSk7XG4gICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyIGJ5IElEOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgIH1cblxuICAgYXN5bmMgZGVsZXRlVXNlclZpZGVvKGV4ZXJjaXNlSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdGhpcy5ub25VSUN1cnJlbnRVc2VyPy5pZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGlzIHNpZ25lZCBpbicpO1xuICAgIH1cbiAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGV4ZXJjaXNlUmVmID0gZG9jKGRiLCAnZXhlcmNpc2VzJywgZXhlcmNpc2VJZCk7XG4gICAgICBjb25zdCBleGVyY2lzZURvYyA9IGF3YWl0IGdldERvYyhleGVyY2lzZVJlZik7XG4gIFxuICAgICAgaWYgKGV4ZXJjaXNlRG9jLmV4aXN0cygpKSB7XG4gICAgICAgIGNvbnN0IHZpZGVvcyA9IGV4ZXJjaXNlRG9jLmRhdGEoKS52aWRlb3MgfHwgW107XG4gICAgICAgIFxuICAgICAgICAvLyBEZWxldGUgdmlkZW8gZmlsZXMgZnJvbSBzdG9yYWdlXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgIHZpZGVvcy5tYXAoYXN5bmMgKHZpZGVvOiB7IHZpZGVvVVJMPzogc3RyaW5nLCBnaWZVUkw/OiBzdHJpbmcgfSkgPT4ge1xuICAgICAgICAgICAgaWYgKHZpZGVvLnZpZGVvVVJMKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHZpZGVvUmVmID0gcmVmKGdldFN0b3JhZ2UoKSwgdmlkZW8udmlkZW9VUkwpO1xuICAgICAgICAgICAgICBhd2FpdCBkZWxldGVPYmplY3QodmlkZW9SZWYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZpZGVvLmdpZlVSTCkge1xuICAgICAgICAgICAgICBjb25zdCBnaWZSZWYgPSByZWYoZ2V0U3RvcmFnZSgpLCB2aWRlby5naWZVUkwpO1xuICAgICAgICAgICAgICBhd2FpdCBkZWxldGVPYmplY3QoZ2lmUmVmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfVxuICBcbiAgICAgIC8vIERlbGV0ZSBleGVyY2lzZSBkb2N1bWVudFxuICAgICAgYXdhaXQgZGVsZXRlRG9jKGV4ZXJjaXNlUmVmKTtcbiAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIHVzZXIgdmlkZW86JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG4gIFxuICBhc3luYyBkZWxldGVTdGFjayhzdGFja0lkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMubm9uVUlDdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBpcyBzaWduZWQgaW4nKTtcbiAgICB9XG4gIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdGFja1JlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdGhpcy5ub25VSUN1cnJlbnRVc2VyLmlkLCAnTXlDcmVhdGVkV29ya291dHMnLCBzdGFja0lkKTtcbiAgICAgIFxuICAgICAgLy8gRGVsZXRlIGFzc29jaWF0ZWQgbG9nc1xuICAgICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24oc3RhY2tSZWYsICdsb2dzJyk7XG4gICAgICBjb25zdCBsb2dzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGxvZ3NSZWYpO1xuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIGxvZ3NTbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4gZGVsZXRlRG9jKGRvYy5yZWYpKVxuICAgICAgKTtcbiAgXG4gICAgICAvLyBEZWxldGUgc3RhY2sgZG9jdW1lbnRcbiAgICAgIGF3YWl0IGRlbGV0ZURvYyhzdGFja1JlZik7XG4gIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBzdGFjazonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRCZXRhVXNlckFjY2VzcyhlbWFpbDogc3RyaW5nLCB1c2VyOiBVc2VyKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBnZXRCZXRhVXNlciBjaGVjazonLCB7IFxuICAgICAgICBlbWFpbCxcbiAgICAgICAgY3VycmVudFVzZXJJZDogdXNlci5pZCxcbiAgICAgICAgZW52aXJvbm1lbnQ6IHByb2Nlc3MuZW52Lk5PREVfRU5WLFxuICAgICAgICBjdXJyZW50U3Vic2NyaXB0aW9uOiB1c2VyLnN1YnNjcmlwdGlvblR5cGUsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgYmV0YVJlZiA9IGNvbGxlY3Rpb24oZGIsICdiZXRhJyk7XG4gICAgICBjb25zdCBiZXRhUXVlcnkgPSBxdWVyeShiZXRhUmVmLCB3aGVyZSgnZW1haWwnLCAnPT0nLCBlbWFpbC50b0xvd2VyQ2FzZSgpKSk7XG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhiZXRhUXVlcnkpO1xuXG4gICAgICBjb25zb2xlLmxvZygnQmV0YSBxdWVyeSByZXN1bHRzOicsIHtcbiAgICAgICAgZm91bmQ6ICFxdWVyeVNuYXBzaG90LmVtcHR5LFxuICAgICAgICBlbWFpbDogZW1haWwudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgZG9jdW1lbnRzQ291bnQ6IHF1ZXJ5U25hcHNob3Quc2l6ZSxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocXVlcnlTbmFwc2hvdC5lbXB0eSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRvY3VtZW50ID0gcXVlcnlTbmFwc2hvdC5kb2NzWzBdO1xuICAgICAgY29uc3QgaXNBcHByb3ZlZCA9IGRvY3VtZW50LmRhdGEoKT8uaXNBcHByb3ZlZCBhcyBib29sZWFuO1xuXG4gICAgICBjb25zb2xlLmxvZygnQmV0YSBkb2N1bWVudCBkYXRhOicsIHtcbiAgICAgICAgaXNBcHByb3ZlZCxcbiAgICAgICAgZG9jdW1lbnRJZDogZG9jdW1lbnQuaWQsXG4gICAgICAgIGZ1bGxEYXRhOiBkb2N1bWVudC5kYXRhKClcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXRoaXMubm9uVUlDdXJyZW50VXNlcikge1xuICAgICAgICBjb25zb2xlLmxvZygnTm8gY3VycmVudCB1c2VyIGZvdW5kJyk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzQXBwcm92ZWQpIHtcbiAgICAgICAgaWYgKHRoaXMubm9uVUlDdXJyZW50VXNlci5zdWJzY3JpcHRpb25UeXBlICE9IFN1YnNjcmlwdGlvblR5cGUudW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgYWxyZWFkeSBzdWJzY3JpYmVkOicsIHtcbiAgICAgICAgICAgIGN1cnJlbnRUeXBlOiB1c2VyLnN1YnNjcmlwdGlvblR5cGUsXG4gICAgICAgICAgICBhY3Rpb246ICdubyBjaGFuZ2UgbmVlZGVkJ1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZygnVXBncmFkaW5nIHVzZXIgdG8gYmV0YTonLCB7XG4gICAgICAgICAgdXNlcjogdXNlcixcbiAgICAgICAgICBmcm9tVHlwZTogdGhpcy5ub25VSUN1cnJlbnRVc2VyLnN1YnNjcmlwdGlvblR5cGUsXG4gICAgICAgICAgdG9UeXBlOiBTdWJzY3JpcHRpb25UeXBlLmJldGFcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgdXBkYXRlZFVzZXIgPSBuZXcgVXNlcih1c2VyLmlkLCB7XG4gICAgICAgICAgLi4udXNlcixcbiAgICAgICAgICBzdWJzY3JpcHRpb25UeXBlOiBTdWJzY3JpcHRpb25UeXBlLmJldGFcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVVzZXIodXNlci5pZCwgdXBkYXRlZFVzZXIpO1xuICAgICAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IHVwZ3JhZGVkIHVzZXIgdG8gYmV0YScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHVzZXIuc3Vic2NyaXB0aW9uVHlwZSA9PSBTdWJzY3JpcHRpb25UeXBlLmJldGEpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRG93bmdyYWRpbmcgYmV0YSB1c2VyOicsIHtcbiAgICAgICAgICAgIGZyb21UeXBlOiB1c2VyLnN1YnNjcmlwdGlvblR5cGUsXG4gICAgICAgICAgICB0b1R5cGU6IFN1YnNjcmlwdGlvblR5cGUudW5zdWJzY3JpYmVkXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgdXBkYXRlZFVzZXIgPSBuZXcgVXNlcih1c2VyLmlkLCB7XG4gICAgICAgICAgICAuLi51c2VyLFxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uVHlwZTogU3Vic2NyaXB0aW9uVHlwZS51bnN1YnNjcmliZWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVVzZXIodXNlci5pZCwgdXBkYXRlZFVzZXIpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgZG93bmdyYWRlZCB1c2VyIGZyb20gYmV0YScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBzdWJzY3JpcHRpb24gY2hhbmdlIG5lZWRlZDonLCB7XG4gICAgICAgICAgICBjdXJyZW50VHlwZTogdXNlci5zdWJzY3JpcHRpb25UeXBlLFxuICAgICAgICAgICAgYmV0YVN0YXR1czogJ25vdCBhcHByb3ZlZCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gaXNBcHByb3ZlZCB8fCBmYWxzZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZ2V0QmV0YVVzZXI6Jywge1xuICAgICAgICBlcnJvcixcbiAgICAgICAgZW1haWwsXG4gICAgICAgIHVzZXJJZDogdXNlci5pZCxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVN0YWNrKHdvcmtvdXQ6IFdvcmtvdXQsIGV4ZXJjaXNlTG9ncz86IEV4ZXJjaXNlTG9nW10pOiBQcm9taXNlPFdvcmtvdXQ+IHtcbiAgICBpZiAoIXRoaXMubm9uVUlDdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBpcyBzaWduZWQgaW4uJyk7XG4gICAgfVxuXG4gICAgLy8gUmVmZXJlbmNlIHRvIHRoZSBuZXcgc3RhY2sgZG9jdW1lbnQgdW5kZXIgdGhlIHVzZXIncyBNeUNyZWF0ZWRXb3Jrb3V0cyBzdWJjb2xsZWN0aW9uXG4gICAgY29uc3QgdXNlcldvcmtvdXRSZWYgPSBkb2MoXG4gICAgICBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCB0aGlzLm5vblVJQ3VycmVudFVzZXIuaWQsICdNeUNyZWF0ZWRXb3Jrb3V0cycpLFxuICAgICAgd29ya291dC5pZFxuICAgICk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gU2F2ZSB0aGUgd29ya291dCBkb2N1bWVudFxuICAgICAgYXdhaXQgc2V0RG9jKHVzZXJXb3Jrb3V0UmVmLCB3b3Jrb3V0LnRvRGljdGlvbmFyeSgpKTtcbiAgICAgIGNvbnNvbGUubG9nKCdTdGFjayBjcmVhdGVkIHN1Y2Nlc3NmdWxseScpO1xuXG4gICAgICAvLyAvLyBJZiB0aGVyZSBhcmUgZXhlcmNpc2UgbG9ncywgc2F2ZSB0aGVtIGluIGEgYmF0Y2ggdG8gdGhlIFwibG9nc1wiIHN1YmNvbGxlY3Rpb25cbiAgICAgIGlmIChleGVyY2lzZUxvZ3MgJiYgZXhlcmNpc2VMb2dzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcbiAgICAgICAgZXhlcmNpc2VMb2dzLmZvckVhY2goKGxvZywgaW5kZXgpID0+IHtcbiAgICAgICAgICAvLyBTZXQgdGhlIG9yZGVyIChpbmRleCArIDEpXG4gICAgICAgICAgbG9nLm9yZGVyID0gaW5kZXggKyAxO1xuICAgICAgICAgIGNvbnN0IGxvZ1JlZiA9IGRvYyhjb2xsZWN0aW9uKHVzZXJXb3Jrb3V0UmVmLCAnbG9ncycpLCBsb2cuaWQpO1xuICAgICAgICAgIGJhdGNoLnNldChsb2dSZWYsIGxvZy50b0RpY3Rpb25hcnkoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBiYXRjaC5jb21taXQoKTtcbiAgICAgICAgY29uc29sZS5sb2coJ0V4ZXJjaXNlIGxvZ3Mgc2F2ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFmdGVyIHN1Y2Nlc3NmdWwgc2F2ZSwgcmV0dXJuIHRoZSB3b3Jrb3V0XG4gICAgICByZXR1cm4gd29ya291dDtcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBzdGFjazonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBmZXRjaFVzZXJTdGFja3ModXNlcklkPzogc3RyaW5nKTogUHJvbWlzZTxXb3Jrb3V0W10+IHtcbiAgICBjb25zdCBjdXJyZW50VXNlcklkID0gdXNlcklkIHx8IHRoaXMubm9uVUlDdXJyZW50VXNlcj8uaWQ7XG4gICAgXG4gICAgaWYgKCFjdXJyZW50VXNlcklkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgSUQgcHJvdmlkZWQnKTtcbiAgICB9XG4gIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdGFja3NSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCBjdXJyZW50VXNlcklkLCAnTXlDcmVhdGVkV29ya291dHMnKTtcbiAgICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHN0YWNrc1JlZik7XG4gICAgICBcbiAgICAgIGNvbnN0IHN0YWNrcyA9IGF3YWl0IFByb21pc2UuYWxsKHF1ZXJ5U25hcHNob3QuZG9jcy5tYXAoYXN5bmMgZG9jID0+IHtcbiAgICAgICAgY29uc3Qgc3RhY2tEYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZldGNoIGxvZ3MgZm9yIHRoaXMgc3RhY2tcbiAgICAgICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24oZG9jLnJlZiwgJ2xvZ3MnKTtcbiAgICAgICAgY29uc3QgbG9nc1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhsb2dzUmVmKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJsb2cgZGF0YTpcIiwgbG9nc1NuYXBzaG90LmRvY3MubWFwKGxvZ0RvYyA9PiBsb2dEb2MuZGF0YSgpKSk7XG5cbiAgICAgICAgY29uc3QgbG9ncyA9IGxvZ3NTbmFwc2hvdC5kb2NzLm1hcChsb2dEb2MgPT4gXG4gICAgICAgICAgbmV3IEV4ZXJjaXNlTG9nKHsgaWQ6IGxvZ0RvYy5pZCwgLi4ubG9nRG9jLmRhdGEoKSB9KVxuICAgICAgICApO1xuICBcbiAgICAgICAgY29uc29sZS5sb2coXCJsb2dzIGFmdGVyIGNvbnN0cnVjdGlvbjpcIiwgbG9ncyk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBXb3Jrb3V0KHtcbiAgICAgICAgICAuLi5zdGFja0RhdGEsXG4gICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICBsb2dzXG4gICAgICAgIH0pO1xuICAgICAgfSkpO1xuICBcbiAgICAgIHJldHVybiBzdGFja3M7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgc3RhY2tzOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZldGNoVXNlclZpZGVvcyh1c2VySWQ/OiBzdHJpbmcpOiBQcm9taXNlPEV4ZXJjaXNlW10+IHtcbiAgICAvLyBVc2UgY3VycmVudCB1c2VyJ3MgSUQgaWYgbm8gSUQgaXMgcHJvdmlkZWRcbiAgICBjb25zdCBjdXJyZW50VXNlcklkID0gdXNlcklkIHx8IHRoaXMubm9uVUlDdXJyZW50VXNlcj8uaWQ7XG4gICAgXG4gICAgaWYgKCFjdXJyZW50VXNlcklkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgSUQgcHJvdmlkZWQnKTtcbiAgICB9XG4gIFxuICAgIHRyeSB7XG4gICAgICAvLyBTdGVwIDE6IEZldGNoIHVzZXIncyBleGVyY2lzZSB2aWRlb3NcbiAgICAgIGNvbnN0IGV4ZXJjaXNlVmlkZW9zUmVmID0gY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlVmlkZW9zJyk7XG4gICAgICBjb25zb2xlLmxvZyhcIltERUJVRy1QUk9GSUxFXSBGZXRjaGluZyB2aWRlb3MgZm9yIHVzZXIgSUQ6XCIsIGN1cnJlbnRVc2VySWQpO1xuICAgICAgY29uc3QgcSA9IHF1ZXJ5KGV4ZXJjaXNlVmlkZW9zUmVmLCB3aGVyZSgndXNlcklkJywgJz09JywgY3VycmVudFVzZXJJZCkpO1xuICAgICAgXG4gICAgICBjb25zdCB2aWRlb1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICAgIGNvbnNvbGUubG9nKGBbREVCVUctUFJPRklMRV0gRm91bmQgJHt2aWRlb1NuYXBzaG90LnNpemV9IHZpZGVvcyBmb3IgdXNlcmApO1xuXG4gICAgICAvLyBDaGVjayBmb3Igb3VyIHNwZWNpZmljIHZpZGVvIElEXG4gICAgICBjb25zb2xlLmxvZyhcIltERUJVRy1QUk9GSUxFXSBMb29raW5nIGZvciB2aWRlbyB3aXRoIElEOiBVWXBObmZHbXc5eHlQQTZkT3YyRFwiKTtcbiAgICAgIGNvbnN0IHRhcmdldFZpZGVvRXhpc3RzID0gdmlkZW9TbmFwc2hvdC5kb2NzLnNvbWUoZG9jID0+IGRvYy5pZCA9PT0gXCJVWXBObmZHbXc5eHlQQTZkT3YyRFwiKTtcbiAgICAgIGNvbnNvbGUubG9nKGBbREVCVUctUFJPRklMRV0gVGFyZ2V0IHZpZGVvIGV4aXN0cyBpbiBxdWVyeSByZXN1bHRzOiAke3RhcmdldFZpZGVvRXhpc3RzfWApO1xuXG4gICAgICAvLyBMaXN0IGFsbCB2aWRlbyBJRHMgZm9yIGRlYnVnZ2luZ1xuICAgICAgY29uc29sZS5sb2coXCJbREVCVUctUFJPRklMRV0gQWxsIHZpZGVvIElEcyBpbiBxdWVyeSByZXN1bHRzOlwiLCB2aWRlb1NuYXBzaG90LmRvY3MubWFwKGRvYyA9PiBkb2MuaWQpKTtcbiAgXG4gICAgICAvLyBHcm91cCB2aWRlb3MgYnkgZXhlcmNpc2UgbmFtZVxuICAgICAgY29uc3QgdmlkZW9zQnlFeGVyY2lzZU5hbWU6IHsgW2tleTogc3RyaW5nXTogRXhlcmNpc2VWaWRlb1tdIH0gPSB7fTtcbiAgXG4gICAgICB2aWRlb1NuYXBzaG90LmRvY3MuZm9yRWFjaChkb2MgPT4ge1xuICAgICAgICBjb25zdCB2aWRlb0RhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgICBjb25zdCBleGVyY2lzZU5hbWUgPSB2aWRlb0RhdGFbJ2V4ZXJjaXNlJ10gYXMgc3RyaW5nO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFleGVyY2lzZU5hbWUpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYEV4ZXJjaXNlIG5hbWUgbWlzc2luZyBmb3IgdmlkZW8gJHtkb2MuaWR9YCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coYFtERUJVRy1QUk9GSUxFXSBQcm9jZXNzaW5nIHZpZGVvICR7ZG9jLmlkfTpgLCB7XG4gICAgICAgICAgZXhlcmNpc2VOYW1lOiBleGVyY2lzZU5hbWUsXG4gICAgICAgICAgZXhlcmNpc2VJZDogdmlkZW9EYXRhLmV4ZXJjaXNlSWQgfHwgJycsXG4gICAgICAgICAgdXNlcklkOiB2aWRlb0RhdGEudXNlcklkIHx8ICcnLFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNwZWNpYWwgbG9nZ2luZyBmb3IgSGFuZ3MgdmlkZW9zIHRvIGRlYnVnIHRoZSBpc3N1ZVxuICAgICAgICBpZiAoZXhlcmNpc2VOYW1lID09PSAnSGFuZ3MnKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYFtERUJVRy1QUk9GSUxFXSBGb3VuZCBIYW5ncyB2aWRlbzogJHtkb2MuaWR9IHdpdGggZXhlcmNpc2VJZDogJHt2aWRlb0RhdGEuZXhlcmNpc2VJZCB8fCAnbm9uZSd9YCk7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIGNvbnN0IHZpZGVvID0gbmV3IEV4ZXJjaXNlVmlkZW8oe1xuICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgZXhlcmNpc2VJZDogdmlkZW9EYXRhLmV4ZXJjaXNlSWQgfHwgJycsXG4gICAgICAgICAgdXNlcm5hbWU6IHZpZGVvRGF0YS51c2VybmFtZSB8fCAnJyxcbiAgICAgICAgICB1c2VySWQ6IHZpZGVvRGF0YS51c2VySWQgfHwgJycsXG4gICAgICAgICAgdmlkZW9VUkw6IHZpZGVvRGF0YS52aWRlb1VSTCB8fCAnJyxcbiAgICAgICAgICBmaWxlTmFtZTogdmlkZW9EYXRhLmZpbGVOYW1lIHx8ICcnLFxuICAgICAgICAgIGV4ZXJjaXNlOiBleGVyY2lzZU5hbWUsXG4gICAgICAgICAgcHJvZmlsZUltYWdlOiBuZXcgUHJvZmlsZUltYWdlKHZpZGVvRGF0YS5wcm9maWxlSW1hZ2UgfHwge30pLCAgLy8gVXNlIFByb2ZpbGVJbWFnZSBjb25zdHJ1Y3RvclxuICAgICAgICAgIGNhcHRpb246IHZpZGVvRGF0YS5jYXB0aW9uIHx8ICcnLFxuICAgICAgICAgIGdpZlVSTDogdmlkZW9EYXRhLmdpZlVSTCB8fCAnJyxcbiAgICAgICAgICB0aHVtYm5haWw6IHZpZGVvRGF0YS50aHVtYm5haWwgfHwgJycsXG4gICAgICAgICAgdmlzaWJpbGl0eTogdmlkZW9EYXRhLnZpc2liaWxpdHkgfHwgJ29wZW4nLFxuICAgICAgICAgIHRvdGFsQWNjb3VudHNSZWFjaGVkOiB2aWRlb0RhdGEudG90YWxBY2NvdW50c1JlYWNoZWQgfHwgMCxcbiAgICAgICAgICB0b3RhbEFjY291bnRMaWtlczogdmlkZW9EYXRhLnRvdGFsQWNjb3VudExpa2VzIHx8IDAsXG4gICAgICAgICAgdG90YWxBY2NvdW50Qm9va21hcmtlZDogdmlkZW9EYXRhLnRvdGFsQWNjb3VudEJvb2ttYXJrZWQgfHwgMCxcbiAgICAgICAgICB0b3RhbEFjY291bnRVc2FnZTogdmlkZW9EYXRhLnRvdGFsQWNjb3VudFVzYWdlIHx8IDAsXG4gICAgICAgICAgaXNBcHByb3ZlZDogdmlkZW9EYXRhLmlzQXBwcm92ZWQgfHwgZmFsc2UsXG4gICAgICAgICAgbGlrZWQ6IHZpZGVvRGF0YS5saWtlZCB8fCBmYWxzZSxcbiAgICAgICAgICBib29rbWFya2VkOiB2aWRlb0RhdGEuYm9va21hcmtlZCB8fCBmYWxzZSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IHZpZGVvRGF0YS5jcmVhdGVkQXQgPyBuZXcgRGF0ZSh2aWRlb0RhdGEuY3JlYXRlZEF0KSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgdXBkYXRlZEF0OiB2aWRlb0RhdGEudXBkYXRlZEF0ID8gbmV3IERhdGUodmlkZW9EYXRhLnVwZGF0ZWRBdCkgOiBuZXcgRGF0ZSgpXG4gICAgICAgIH0pO1xuICBcbiAgICAgICAgaWYgKCF2aWRlb3NCeUV4ZXJjaXNlTmFtZVtleGVyY2lzZU5hbWVdKSB7XG4gICAgICAgICAgdmlkZW9zQnlFeGVyY2lzZU5hbWVbZXhlcmNpc2VOYW1lXSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHZpZGVvc0J5RXhlcmNpc2VOYW1lW2V4ZXJjaXNlTmFtZV0ucHVzaCh2aWRlbyk7XG4gICAgICB9KTtcbiAgXG4gICAgICAvLyBTdGVwIDI6IEZldGNoIGFsbCBleGVyY2lzZXNcbiAgICAgIGNvbnN0IGV4ZXJjaXNlc1JlZiA9IGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZXMnKTtcbiAgICAgIGNvbnN0IGV4ZXJjaXNlc1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhleGVyY2lzZXNSZWYpO1xuICBcbiAgICAgIC8vIFN0ZXAgMzogTWFwIHZpZGVvcyB0byBleGVyY2lzZXNcbiAgICAgIGNvbnN0IHVzZXJFeGVyY2lzZXM6IEV4ZXJjaXNlW10gPSBleGVyY2lzZXNTbmFwc2hvdC5kb2NzXG4gICAgICAgIC5tYXAoZG9jID0+IHtcbiAgICAgICAgICBjb25zdCBleGVyY2lzZURhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgICAgIGNvbnN0IGV4ZXJjaXNlTmFtZSA9IGV4ZXJjaXNlRGF0YS5uYW1lO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgdmlkZW9zIGZvciB0aGlzIGV4ZXJjaXNlIG5hbWVcbiAgICAgICAgICBjb25zdCBoYXNWaWRlb3MgPSB2aWRlb3NCeUV4ZXJjaXNlTmFtZVtleGVyY2lzZU5hbWVdPy5sZW5ndGggPiAwO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBbREVCVUctUFJPRklMRV0gQ2hlY2tpbmcgZXhlcmNpc2UgXCIke2V4ZXJjaXNlTmFtZX1cIiAtIGhhcyB2aWRlb3M6ICR7aGFzVmlkZW9zID8gJ3llcycgOiAnbm8nfWApO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIElNUE9SVEFOVDogSWYgdGhlIGRvY3VtZW50IElEIGRvZXNuJ3QgbWF0Y2ggdGhlIGV4ZXJjaXNlIG5hbWUgKGxvd2VyY2FzZSksIGZpbmQgdmlkZW9zIGJ5IGRvY3VtZW50IElEIHRvb1xuICAgICAgICAgIGNvbnN0IGV4ZXJjaXNlRG9jSWQgPSBkb2MuaWQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICBjb25zdCBleGVyY2lzZU5hbWVMb3dlciA9IGV4ZXJjaXNlTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIExvZyBkb2N1bWVudCBJRCB2cyBuYW1lXG4gICAgICAgICAgY29uc29sZS5sb2coYFtERUJVRy1QUk9GSUxFXSBFeGVyY2lzZSBkb2N1bWVudCBJRDogXCIke2V4ZXJjaXNlRG9jSWR9XCIsIG5hbWU6IFwiJHtleGVyY2lzZU5hbWV9XCIgKGxvd2VyOiBcIiR7ZXhlcmNpc2VOYW1lTG93ZXJ9XCIpYCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gSWYgdGhleSBkb24ndCBtYXRjaCwgbG9vayBmb3IgdmlkZW9zIGJ5IGRvY3VtZW50IElEIHRvb1xuICAgICAgICAgIGxldCB2aWRlb3NGb3JUaGlzRXhlcmNpc2UgPSB2aWRlb3NCeUV4ZXJjaXNlTmFtZVtleGVyY2lzZU5hbWVdIHx8IFtdO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChleGVyY2lzZURvY0lkICE9PSBleGVyY2lzZU5hbWVMb3dlciAmJiB2aWRlb3NCeUV4ZXJjaXNlTmFtZVtleGVyY2lzZURvY0lkXSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtERUJVRy1QUk9GSUxFXSBGb3VuZCAke3ZpZGVvc0J5RXhlcmNpc2VOYW1lW2V4ZXJjaXNlRG9jSWRdLmxlbmd0aH0gYWRkaXRpb25hbCB2aWRlb3MgYnkgZG9jdW1lbnQgSURgKTtcbiAgICAgICAgICAgIHZpZGVvc0ZvclRoaXNFeGVyY2lzZSA9IFsuLi52aWRlb3NGb3JUaGlzRXhlcmNpc2UsIC4uLnZpZGVvc0J5RXhlcmNpc2VOYW1lW2V4ZXJjaXNlRG9jSWRdXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ3JlYXRlIGJhc2UgZXhlcmNpc2VcbiAgICAgICAgICAvLyBGb3IgdGhlIEV4ZXJjaXNlOlxuICAgICAgICAgIGNvbnN0IGV4ZXJjaXNlID0gbmV3IEV4ZXJjaXNlKHtcbiAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICBuYW1lOiBleGVyY2lzZU5hbWUsXG4gICAgICAgICAgICBjYXRlZ29yeTogZXhlcmNpc2VEYXRhLmNhdGVnb3J5LFxuICAgICAgICAgICAgcHJpbWFyeUJvZHlQYXJ0czogZXhlcmNpc2VEYXRhLnByaW1hcnlCb2R5UGFydHMgfHwgW10sXG4gICAgICAgICAgICBzZWNvbmRhcnlCb2R5UGFydHM6IGV4ZXJjaXNlRGF0YS5zZWNvbmRhcnlCb2R5UGFydHMgfHwgW10sXG4gICAgICAgICAgICB0YWdzOiBleGVyY2lzZURhdGEudGFncyB8fCBbXSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBleGVyY2lzZURhdGEuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgICAgICB2aXNpYmlsaXR5OiBleGVyY2lzZURhdGEudmlzaWJpbGl0eSB8fCAnbGltaXRlZCcsXG4gICAgICAgICAgICBzdGVwczogZXhlcmNpc2VEYXRhLnN0ZXBzIHx8IFtdLFxuICAgICAgICAgICAgdmlkZW9zOiB2aWRlb3NGb3JUaGlzRXhlcmNpc2UsXG4gICAgICAgICAgICBjdXJyZW50VmlkZW9Qb3NpdGlvbjogMCxcbiAgICAgICAgICAgIHJlcHM6IGV4ZXJjaXNlRGF0YS5yZXBzIHx8ICcnLFxuICAgICAgICAgICAgc2V0czogZXhlcmNpc2VEYXRhLnNldHMgfHwgMCxcbiAgICAgICAgICAgIHdlaWdodDogZXhlcmNpc2VEYXRhLndlaWdodCB8fCAwLFxuICAgICAgICAgICAgYXV0aG9yOiBuZXcgRXhlcmNpc2VBdXRob3IoeyAgLy8gVXNlIEV4ZXJjaXNlQXV0aG9yIGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgIHVzZXJJZDogZXhlcmNpc2VEYXRhLmF1dGhvcj8udXNlcklkIHx8ICcnLFxuICAgICAgICAgICAgICB1c2VybmFtZTogZXhlcmNpc2VEYXRhLmF1dGhvcj8udXNlcm5hbWUgfHwgJydcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBleGVyY2lzZURhdGEuY3JlYXRlZEF0ID8gbmV3IERhdGUoZXhlcmNpc2VEYXRhLmNyZWF0ZWRBdCkgOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBleGVyY2lzZURhdGEudXBkYXRlZEF0ID8gbmV3IERhdGUoZXhlcmNpc2VEYXRhLnVwZGF0ZWRBdCkgOiBuZXcgRGF0ZSgpXG4gICAgICAgICAgfSk7XG4gIFxuICAgICAgICAgIHJldHVybiBleGVyY2lzZTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbHRlcihleGVyY2lzZSA9PiB7XG4gICAgICAgICAgY29uc3QgaGFzVmlkZW9zID0gZXhlcmNpc2UudmlkZW9zLmxlbmd0aCA+IDA7XG4gICAgICAgICAgY29uc29sZS5sb2coYFtERUJVRy1QUk9GSUxFXSBGaWx0ZXJpbmcgZXhlcmNpc2UgXCIke2V4ZXJjaXNlLm5hbWV9XCIgLSBoYXMgdmlkZW9zOiAke2hhc1ZpZGVvcyA/ICd5ZXMnIDogJ25vJ30sIHZpZGVvIGNvdW50OiAke2V4ZXJjaXNlLnZpZGVvcy5sZW5ndGh9YCk7XG4gICAgICAgICAgcmV0dXJuIGhhc1ZpZGVvcztcbiAgICAgICAgfSk7XG4gIFxuICAgICAgY29uc29sZS5sb2coYFtERUJVRy1QUk9GSUxFXSBGaW5hbCB1c2VyIGV4ZXJjaXNlcyBjb3VudDogJHt1c2VyRXhlcmNpc2VzLmxlbmd0aH1gKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiW0RFQlVHLVBST0ZJTEVdIEZpbmFsIGV4ZXJjaXNlczpcIiwgdXNlckV4ZXJjaXNlcy5tYXAoZXggPT4gKHtcbiAgICAgICAgaWQ6IGV4LmlkLFxuICAgICAgICBuYW1lOiBleC5uYW1lLFxuICAgICAgICB2aWRlb0NvdW50OiBleC52aWRlb3MubGVuZ3RoLFxuICAgICAgICB2aWRlb0lkczogZXgudmlkZW9zLm1hcCh2ID0+IHYuaWQpXG4gICAgICB9KSkpO1xuXG4gICAgICByZXR1cm4gdXNlckV4ZXJjaXNlcztcbiAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgdmlkZW9zOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZldGNoRm9sbG93aW5nKCk6IFByb21pc2U8Rm9sbG93UmVxdWVzdFtdPiB7XG4gICAgY29uc3QgY3VycmVudFVzZXIgPSB0aGlzLm5vblVJQ3VycmVudFVzZXI7XG4gICAgaWYgKCFjdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBpcyBzaWduZWQgaW4nKTtcbiAgICB9XG4gIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBmb2xsb3dSZXF1ZXN0c1JlZiA9IGNvbGxlY3Rpb24oZGIsICdmb2xsb3dSZXF1ZXN0cycpO1xuICAgICAgY29uc3QgcSA9IHF1ZXJ5KFxuICAgICAgICBmb2xsb3dSZXF1ZXN0c1JlZiwgXG4gICAgICAgIHdoZXJlKCdmcm9tVXNlci5pZCcsICc9PScsIGN1cnJlbnRVc2VyLmlkKVxuICAgICAgKTtcbiAgXG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgXG4gICAgICBjb25zdCBmb2xsb3dSZXF1ZXN0czogRm9sbG93UmVxdWVzdFtdID0gcXVlcnlTbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBmcm9tVXNlcjoge1xuICAgICAgICAgICAgaWQ6IGRhdGEuZnJvbVVzZXI/LmlkIHx8ICcnLFxuICAgICAgICAgICAgdXNlcm5hbWU6IGRhdGEuZnJvbVVzZXI/LnVzZXJuYW1lIHx8ICcnLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IGRhdGEuZnJvbVVzZXI/LmRpc3BsYXlOYW1lIHx8ICcnXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0b1VzZXI6IHtcbiAgICAgICAgICAgIGlkOiBkYXRhLnRvVXNlcj8uaWQgfHwgJycsXG4gICAgICAgICAgICB1c2VybmFtZTogZGF0YS50b1VzZXI/LnVzZXJuYW1lIHx8ICcnLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IGRhdGEudG9Vc2VyPy5kaXNwbGF5TmFtZSB8fCAnJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc3RhdHVzOiBkYXRhLnN0YXR1cyB8fCAnJyxcbiAgICAgICAgICBjcmVhdGVkQXQ6IGRhdGEuY3JlYXRlZEF0IGluc3RhbmNlb2YgRGF0ZSBcbiAgICAgICAgICAgID8gZGF0YS5jcmVhdGVkQXQgXG4gICAgICAgICAgICA6IChkYXRhLmNyZWF0ZWRBdCA/IG5ldyBEYXRlKGRhdGEuY3JlYXRlZEF0KSA6IG5ldyBEYXRlKCkpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogZGF0YS51cGRhdGVkQXQgaW5zdGFuY2VvZiBEYXRlIFxuICAgICAgICAgICAgPyBkYXRhLnVwZGF0ZWRBdCBcbiAgICAgICAgICAgIDogKGRhdGEudXBkYXRlZEF0ID8gbmV3IERhdGUoZGF0YS51cGRhdGVkQXQpIDogbmV3IERhdGUoKSlcbiAgICAgICAgfSBhcyBGb2xsb3dSZXF1ZXN0O1xuICAgICAgfSk7XG4gIFxuICAgICAgcmV0dXJuIGZvbGxvd1JlcXVlc3RzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBmb2xsb3dpbmc6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG4gIFxuICBhc3luYyBmZXRjaEZvbGxvd2VycygpOiBQcm9taXNlPEZvbGxvd1JlcXVlc3RbXT4ge1xuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gdGhpcy5ub25VSUN1cnJlbnRVc2VyO1xuICAgIGlmICghY3VycmVudFVzZXI/LmlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgfVxuICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgZm9sbG93UmVxdWVzdHNSZWYgPSBjb2xsZWN0aW9uKGRiLCAnZm9sbG93UmVxdWVzdHMnKTtcbiAgICAgIGNvbnN0IHEgPSBxdWVyeShcbiAgICAgICAgZm9sbG93UmVxdWVzdHNSZWYsIFxuICAgICAgICB3aGVyZSgndG9Vc2VyLmlkJywgJz09JywgY3VycmVudFVzZXIuaWQpXG4gICAgICApO1xuICBcbiAgICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICBcbiAgICAgIGNvbnN0IGZvbGxvd1JlcXVlc3RzOiBGb2xsb3dSZXF1ZXN0W10gPSBxdWVyeVNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGZyb21Vc2VyOiB7XG4gICAgICAgICAgICBpZDogZGF0YS5mcm9tVXNlcj8uaWQgfHwgJycsXG4gICAgICAgICAgICB1c2VybmFtZTogZGF0YS5mcm9tVXNlcj8udXNlcm5hbWUgfHwgJycsXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogZGF0YS5mcm9tVXNlcj8uZGlzcGxheU5hbWUgfHwgJydcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRvVXNlcjoge1xuICAgICAgICAgICAgaWQ6IGRhdGEudG9Vc2VyPy5pZCB8fCAnJyxcbiAgICAgICAgICAgIHVzZXJuYW1lOiBkYXRhLnRvVXNlcj8udXNlcm5hbWUgfHwgJycsXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogZGF0YS50b1VzZXI/LmRpc3BsYXlOYW1lIHx8ICcnXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzdGF0dXM6IGRhdGEuc3RhdHVzIHx8ICcnLFxuICAgICAgICAgIGNyZWF0ZWRBdDogZGF0YS5jcmVhdGVkQXQgaW5zdGFuY2VvZiBEYXRlIFxuICAgICAgICAgICAgPyBkYXRhLmNyZWF0ZWRBdCBcbiAgICAgICAgICAgIDogKGRhdGEuY3JlYXRlZEF0ID8gbmV3IERhdGUoZGF0YS5jcmVhdGVkQXQpIDogbmV3IERhdGUoKSksXG4gICAgICAgICAgdXBkYXRlZEF0OiBkYXRhLnVwZGF0ZWRBdCBpbnN0YW5jZW9mIERhdGUgXG4gICAgICAgICAgICA/IGRhdGEudXBkYXRlZEF0IFxuICAgICAgICAgICAgOiAoZGF0YS51cGRhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLnVwZGF0ZWRBdCkgOiBuZXcgRGF0ZSgpKVxuICAgICAgICB9IGFzIEZvbGxvd1JlcXVlc3Q7XG4gICAgICB9KTtcbiAgXG4gICAgICByZXR1cm4gZm9sbG93UmVxdWVzdHM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGZvbGxvd2VyczonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAgLyoqXG4gICAqIEZldGNoIHVzZXIgSUQgYnkgdXNlcm5hbWVcbiAgICogQHBhcmFtIHVzZXJuYW1lIFRoZSB1c2VybmFtZSB0byBzZWFyY2ggZm9yXG4gICAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2aW5nIHRvIHRoZSB1c2VyIElEIG9yIG51bGwgaWYgbm90IGZvdW5kXG4gICAqL1xuICAgYXN5bmMgZ2V0VXNlcklkQnlVc2VybmFtZSh1c2VybmFtZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJyk7XG4gICAgICBjb25zdCBxID0gcXVlcnkodXNlcnNSZWYsIHdoZXJlKCd1c2VybmFtZScsICc9PScsIHVzZXJuYW1lKSwgbGltaXQoMSkpO1xuICAgICAgXG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICAgIFxuICAgICAgaWYgKCFxdWVyeVNuYXBzaG90LmVtcHR5KSB7XG4gICAgICAgIGNvbnN0IHVzZXJEb2MgPSBxdWVyeVNuYXBzaG90LmRvY3NbMF07XG4gICAgICAgIHJldHVybiB1c2VyRG9jLmlkO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBJRCBieSB1c2VybmFtZTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRBbGxVc2VycygpOiBQcm9taXNlPFVzZXJbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2Vyc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycpO1xuICAgICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3ModXNlcnNSZWYpO1xuICAgICAgXG4gICAgICByZXR1cm4gcXVlcnlTbmFwc2hvdC5kb2NzXG4gICAgICAgIC5tYXAoZG9jID0+IG5ldyBVc2VyKGRvYy5pZCwgeyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH0pKVxuICAgICAgICAuZmlsdGVyKHVzZXIgPT4gdXNlci5wcm9maWxlSW1hZ2U/LnByb2ZpbGVJbWFnZVVSTCk7IC8vIE9ubHkgcmV0dXJuIHVzZXJzIHdpdGggcHJvZmlsZSBpbWFnZXNcbiAgICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXJzOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICAvLyBJbiB1c2VyU2VydmljZVxuICBhc3luYyBnZXRVc2VyQnlVc2VybmFtZSh1c2VybmFtZTogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICAgIHRyeSB7ICAgICAgXG4gICAgICBjb25zdCB1c2Vyc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycpO1xuICAgICAgY29uc3QgcSA9IHF1ZXJ5KHVzZXJzUmVmLCB3aGVyZSgndXNlcm5hbWUnLCAnPT0nLCB1c2VybmFtZSkpO1xuICAgICAgXG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICAgICAgICAgIFxuICAgICAgaWYgKHF1ZXJ5U25hcHNob3QuZW1wdHkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVzZXJEYXRhID0gcXVlcnlTbmFwc2hvdC5kb2NzWzBdLmRhdGEoKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIG5ldyBVc2VyKHF1ZXJ5U25hcHNob3QuZG9jc1swXS5pZCwgeyBpZDogcXVlcnlTbmFwc2hvdC5kb2NzWzBdLmlkLCAuLi51c2VyRGF0YSB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZmV0Y2hGZWF0dXJlZFVzZXJzKCk6IFByb21pc2U8VXNlcltdPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENyZWF0ZSBhIHF1ZXJ5IGFnYWluc3QgdGhlIHVzZXJzIGNvbGxlY3Rpb25cbiAgICAgIGNvbnN0IHVzZXJzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJyk7XG4gICAgICBjb25zdCBxID0gcXVlcnkoXG4gICAgICAgIHVzZXJzUmVmLFxuICAgICAgICB3aGVyZSgndmlkZW9Db3VudCcsICc+JywgMCkgLy8gT25seSBmZXRjaCB1c2VycyB3aXRoIHZpZGVvc1xuICAgICAgKTtcblxuICAgICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgICBcbiAgICAgIC8vIE1hcCB0aGUgZG9jdW1lbnRzIHRvIFVzZXIgb2JqZWN0c1xuICAgICAgY29uc3QgdXNlcnMgPSBxdWVyeVNuYXBzaG90LmRvY3NcbiAgICAgIC5tYXAoZG9jID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVc2VyKGRvYy5pZCwgeyBpZDogZG9jLmlkLCAuLi5kYXRhIH0pO1xuICAgICAgICB9KVxuICAgICAgICAvLyBGaWx0ZXIgb3V0IHVzZXJzIHdpdGhvdXQgcHJvZmlsZSBpbWFnZXNcbiAgICAgICAgLmZpbHRlcih1c2VyID0+IHVzZXIucHJvZmlsZUltYWdlPy5wcm9maWxlSW1hZ2VVUkwpXG4gICAgICAgIC8vIFNodWZmbGUgdGhlIHJlc3VsdHNcbiAgICAgICAgLnNvcnQoKCkgPT4gTWF0aC5yYW5kb20oKSAtIDAuNSk7XG5cbiAgICAgIHJldHVybiB1c2VycztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlcnMgd2l0aCB2aWRlb3M6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHF1ZXJ5VXNlcnMoc2VhcmNoUXVlcnk6IHN0cmluZyk6IFByb21pc2U8VXNlcltdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXJzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJyk7XG4gICAgICBjb25zdCBxID0gcXVlcnkoXG4gICAgICAgIHVzZXJzUmVmLFxuICAgICAgICB3aGVyZSgndXNlcm5hbWUnLCAnPj0nLCBzZWFyY2hRdWVyeS50b0xvd2VyQ2FzZSgpKSxcbiAgICAgICAgd2hlcmUoJ3VzZXJuYW1lJywgJzw9Jywgc2VhcmNoUXVlcnkudG9Mb3dlckNhc2UoKSArICdcXHVmOGZmJyksXG4gICAgICAgIGxpbWl0KDEwKVxuICAgICAgKTtcblxuICAgICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgICBcbiAgICAgIHJldHVybiBxdWVyeVNuYXBzaG90LmRvY3NcbiAgICAgICAgLm1hcChkb2MgPT4gbmV3IFVzZXIoZG9jLmlkLCB7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSkpXG4gICAgICAgIC5maWx0ZXIodXNlciA9PiB1c2VyLnByb2ZpbGVJbWFnZT8ucHJvZmlsZUltYWdlVVJMKTsgLy8gT25seSByZXR1cm4gdXNlcnMgd2l0aCBwcm9maWxlIGltYWdlc1xuICAgICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcXVlcnlpbmcgdXNlcnM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHVzZXIgaGFzIHB1cmNoYXNlZCBhIHNwZWNpZmljIGNoYWxsZW5nZVxuICAgKiBAcGFyYW0gdXNlcklkIFRoZSBJRCBvZiB0aGUgdXNlciB0byBjaGVja1xuICAgKiBAcGFyYW0gY2hhbGxlbmdlSWQgVGhlIElEIG9mIHRoZSBjaGFsbGVuZ2UgdG8gY2hlY2tcbiAgICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gYW4gb2JqZWN0IHdpdGggaGFzUHVyY2hhc2VkIGZsYWcgYW5kIHBheW1lbnQgZGV0YWlscyBpZiBmb3VuZFxuICAgKi9cbiAgYXN5bmMgaGFzVXNlclB1cmNoYXNlZENoYWxsZW5nZSh1c2VySWQ6IHN0cmluZywgY2hhbGxlbmdlSWQ6IHN0cmluZyk6IFByb21pc2U8e1xuICAgIGhhc1B1cmNoYXNlZDogYm9vbGVhbjtcbiAgICBwYXltZW50Pzoge1xuICAgICAgaWQ6IHN0cmluZztcbiAgICAgIHB1cmNoYXNlRGF0ZTogc3RyaW5nIHwgbnVsbDtcbiAgICAgIGFtb3VudDogbnVtYmVyO1xuICAgIH07XG4gIH0+IHtcbiAgICBpZiAoIXVzZXJJZCB8fCAhY2hhbGxlbmdlSWQpIHtcbiAgICAgIGNvbnNvbGUud2FybignaGFzVXNlclB1cmNoYXNlZENoYWxsZW5nZSBjYWxsZWQgd2l0aCBtaXNzaW5nIHBhcmFtZXRlcnMnLCB7IHVzZXJJZCwgY2hhbGxlbmdlSWQgfSk7XG4gICAgICByZXR1cm4geyBoYXNQdXJjaGFzZWQ6IGZhbHNlIH07XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhgPT09PT09PT09PT09PT09PT09PT0gUEFZTUVOVCBDSEVDSyA9PT09PT09PT09PT09PT09PT09PWApO1xuICAgICAgY29uc29sZS5sb2coYENoZWNraW5nIGlmIHVzZXIgJHt1c2VySWR9IGhhcyBwdXJjaGFzZWQgY2hhbGxlbmdlICR7Y2hhbGxlbmdlSWR9YCk7XG4gICAgICBcbiAgICAgIC8vIENvbnZlcnQgdGltZXN0YW1wIGZvciBVbml4IHRpbWVzdGFtcHMgb3IgRmlyZXN0b3JlIHRpbWVzdGFtcHNcbiAgICAgIGNvbnN0IGNvbnZlcnRUaW1lc3RhbXAgPSAodGltZXN0YW1wOiBhbnkpOiBzdHJpbmcgfCBudWxsID0+IHtcbiAgICAgICAgaWYgKCF0aW1lc3RhbXApIHJldHVybiBudWxsO1xuICAgICAgICBcbiAgICAgICAgLy8gSWYgaXQncyBhIG51bWJlciAoVW5peCB0aW1lc3RhbXApLCBjb252ZXJ0IGl0XG4gICAgICAgIGlmICh0eXBlb2YgdGltZXN0YW1wID09PSAnbnVtYmVyJykge1xuICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aW1lc3RhbXAgKiAxMDAwKS50b0lTT1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBJZiBpdCBoYXMgYSB0b0RhdGUgbWV0aG9kIChGaXJlc3RvcmUgVGltZXN0YW1wKVxuICAgICAgICBpZiAodGltZXN0YW1wICYmIHR5cGVvZiB0aW1lc3RhbXAudG9EYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgcmV0dXJuIHRpbWVzdGFtcC50b0RhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBJZiBpdCdzIGEgRmlyZXN0b3JlIHNlcmlhbGl6ZWQgdGltZXN0YW1wIHdpdGggX3NlY29uZHNcbiAgICAgICAgaWYgKHRpbWVzdGFtcCAmJiB0aW1lc3RhbXAuX3NlY29uZHMpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IERhdGUodGltZXN0YW1wLl9zZWNvbmRzICogMTAwMCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIGFscmVhZHkgY29udmVydGVkIGRhdGVcbiAgICAgICAgaWYgKHRpbWVzdGFtcCBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICByZXR1cm4gdGltZXN0YW1wLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSBzdHJpbmcgdGltZXN0YW1wXG4gICAgICAgIGlmICh0eXBlb2YgdGltZXN0YW1wID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUodGltZXN0YW1wKS50b0lTT1N0cmluZygpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aW1lc3RhbXA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIEZpcnN0LCBsZXQncyBsb2cgYWxsIHBheW1lbnRzIGZvciB0aGlzIHVzZXJcbiAgICAgIGNvbnN0IGFsbFVzZXJQYXltZW50c1JlZiA9IGNvbGxlY3Rpb24oZGIsICdwYXltZW50cycpO1xuICAgICAgY29uc3QgYWxsVXNlclBheW1lbnRzUXVlcnkgPSBxdWVyeShcbiAgICAgICAgYWxsVXNlclBheW1lbnRzUmVmLFxuICAgICAgICB3aGVyZSgnYnV5ZXJJZCcsICc9PScsIHVzZXJJZCksXG4gICAgICApO1xuICAgICAgXG4gICAgICBjb25zdCBhbGxVc2VyUGF5bWVudHNTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoYWxsVXNlclBheW1lbnRzUXVlcnkpO1xuICAgICAgY29uc29sZS5sb2coYEZvdW5kICR7YWxsVXNlclBheW1lbnRzU25hcHNob3Quc2l6ZX0gdG90YWwgcGF5bWVudHMgZm9yIHVzZXIgJHt1c2VySWR9YCk7XG4gICAgICBcbiAgICAgIGFsbFVzZXJQYXltZW50c1NuYXBzaG90LmZvckVhY2goZG9jID0+IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBQYXltZW50ICR7ZG9jLmlkfTpgLCB7XG4gICAgICAgICAgY2hhbGxlbmdlSWQ6IGRhdGEuY2hhbGxlbmdlSWQsXG4gICAgICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcbiAgICAgICAgICBzdGF0dXM6IGRhdGEuc3RhdHVzLFxuICAgICAgICAgIGJ1eWVySWQ6IGRhdGEuYnV5ZXJJZCxcbiAgICAgICAgICBvd25lcklkOiBkYXRhLm93bmVySWQsXG4gICAgICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0VGltZXN0YW1wKGRhdGEuY3JlYXRlZEF0KSxcbiAgICAgICAgICByYXdDcmVhdGVkQXQ6IGRhdGEuY3JlYXRlZEF0ID8gXG4gICAgICAgICAgICB7IHR5cGU6IHR5cGVvZiBkYXRhLmNyZWF0ZWRBdCwgdmFsdWU6IEpTT04uc3RyaW5naWZ5KGRhdGEuY3JlYXRlZEF0KSB9IDogbnVsbFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTaW1wbGUgY2hlY2s6IERvZXMgdGhpcyB1c2VyIGhhdmUgQU5ZIHBheW1lbnQgZm9yIHRoaXMgY2hhbGxlbmdlP1xuICAgICAgY29uc3QgbWF0Y2hpbmdQYXltZW50ID0gYWxsVXNlclBheW1lbnRzU25hcHNob3QuZG9jcy5maW5kKFxuICAgICAgICBkb2MgPT4gZG9jLmRhdGEoKS5jaGFsbGVuZ2VJZCA9PT0gY2hhbGxlbmdlSWRcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnN0IGhhc1B1cmNoYXNlZCA9ICEhbWF0Y2hpbmdQYXltZW50O1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgUkVTVUxUOiBVc2VyICR7dXNlcklkfSBoYXMgJHtoYXNQdXJjaGFzZWQgPyAnJyA6ICdOT1QgJ31wdXJjaGFzZWQgY2hhbGxlbmdlICR7Y2hhbGxlbmdlSWR9YCk7XG4gICAgICBcbiAgICAgIGlmIChoYXNQdXJjaGFzZWQpIHtcbiAgICAgICAgY29uc3QgcGF5bWVudERhdGEgPSBtYXRjaGluZ1BheW1lbnQuZGF0YSgpO1xuICAgICAgICBjb25zb2xlLmxvZygnRm91bmQgbWF0Y2hpbmcgcGF5bWVudDonLCBwYXltZW50RGF0YSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGhhc1B1cmNoYXNlZDogdHJ1ZSxcbiAgICAgICAgICBwYXltZW50OiB7XG4gICAgICAgICAgICBpZDogbWF0Y2hpbmdQYXltZW50LmlkLFxuICAgICAgICAgICAgcHVyY2hhc2VEYXRlOiBjb252ZXJ0VGltZXN0YW1wKHBheW1lbnREYXRhLmNyZWF0ZWRBdCksXG4gICAgICAgICAgICBhbW91bnQ6IHBheW1lbnREYXRhLmFtb3VudCB8fCAwXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgPT09PT09PT09PT09PT09PT09PT0gUEFZTUVOVCBDSEVDSyBDT01QTEVURSA9PT09PT09PT09PT09PT09PT09PWApO1xuICAgICAgcmV0dXJuIHsgaGFzUHVyY2hhc2VkOiBmYWxzZSB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBpZiB1c2VyIGhhcyBwdXJjaGFzZWQgY2hhbGxlbmdlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7IGhhc1B1cmNoYXNlZDogZmFsc2UgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2F2ZXMgdGhlIFB1bHNlIFByb2dyYW1taW5nIGFwcGxpY2F0aW9uIGZvcm0gZGF0YSB0byB0aGUgYmV0YSBjb2xsZWN0aW9uXG4gICAqIEBwYXJhbSBmb3JtRGF0YSBUaGUgZm9ybSBkYXRhIHRvIHNhdmVcbiAgICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gc3VjY2VzcyBzdGF0dXNcbiAgICovXG4gIGFzeW5jIHNhdmVBcHBsaWNhdGlvbkZvcm0oZm9ybURhdGE6IHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgZW1haWw6IHN0cmluZztcbiAgICByb2xlOiB7XG4gICAgICB0cmFpbmVyOiBib29sZWFuO1xuICAgICAgZW50aHVzaWFzdDogYm9vbGVhbjtcbiAgICAgIGNvYWNoOiBib29sZWFuO1xuICAgICAgZml0bmVzc0luc3RydWN0b3I6IGJvb2xlYW47XG4gICAgfTtcbiAgICBwcmltYXJ5VXNlOiBzdHJpbmc7XG4gICAgdXNlQ2FzZXM6IHtcbiAgICAgIG9uZU9uT25lQ29hY2hpbmc6IGJvb2xlYW47XG4gICAgICBjb21tdW5pdHlSb3VuZHM6IGJvb2xlYW47XG4gICAgICBwZXJzb25hbFByb2dyYW1zOiBib29sZWFuO1xuICAgIH07XG4gICAgY2xpZW50Q291bnQ6IHN0cmluZztcbiAgICB5ZWFyc0V4cGVyaWVuY2U6IHN0cmluZztcbiAgICBsb25nVGVybUdvYWw6IHN0cmluZztcbiAgICBpc0NlcnRpZmllZDogYm9vbGVhbjtcbiAgICBjZXJ0aWZpY2F0aW9uTmFtZT86IHN0cmluZztcbiAgICBhcHBseUZvckZvdW5kaW5nQ29hY2hlczogYm9vbGVhbjtcbiAgfSk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbmcgfT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBOb3JtYWxpemUgZW1haWwgdG8gbG93ZXJjYXNlIGZvciBjb25zaXN0ZW5jeVxuICAgICAgY29uc3Qgbm9ybWFsaXplZEVtYWlsID0gZm9ybURhdGEuZW1haWwudG9Mb3dlckNhc2UoKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUncyBhbiBleGlzdGluZyBhcHBsaWNhdGlvbiBmb3IgdGhpcyBlbWFpbFxuICAgICAgY29uc3QgYmV0YVJlZiA9IGNvbGxlY3Rpb24oZGIsICdiZXRhJyk7XG4gICAgICBjb25zdCBiZXRhUXVlcnkgPSBxdWVyeShiZXRhUmVmLCB3aGVyZSgnZW1haWwnLCAnPT0nLCBub3JtYWxpemVkRW1haWwpKTtcbiAgICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGJldGFRdWVyeSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGZvcm1EYXRhVG9TYXZlID0ge1xuICAgICAgICBlbWFpbDogbm9ybWFsaXplZEVtYWlsLFxuICAgICAgICBuYW1lOiBmb3JtRGF0YS5uYW1lLFxuICAgICAgICByb2xlOiBmb3JtRGF0YS5yb2xlLFxuICAgICAgICBwcmltYXJ5VXNlOiBmb3JtRGF0YS5wcmltYXJ5VXNlLFxuICAgICAgICB1c2VDYXNlczogZm9ybURhdGEudXNlQ2FzZXMsXG4gICAgICAgIGNsaWVudENvdW50OiBmb3JtRGF0YS5jbGllbnRDb3VudCxcbiAgICAgICAgeWVhcnNFeHBlcmllbmNlOiBmb3JtRGF0YS55ZWFyc0V4cGVyaWVuY2UsXG4gICAgICAgIGxvbmdUZXJtR29hbDogZm9ybURhdGEubG9uZ1Rlcm1Hb2FsLFxuICAgICAgICBpc0NlcnRpZmllZDogZm9ybURhdGEuaXNDZXJ0aWZpZWQsXG4gICAgICAgIGNlcnRpZmljYXRpb25OYW1lOiBmb3JtRGF0YS5jZXJ0aWZpY2F0aW9uTmFtZSxcbiAgICAgICAgYXBwbHlGb3JGb3VuZGluZ0NvYWNoZXM6IGZvcm1EYXRhLmFwcGx5Rm9yRm91bmRpbmdDb2FjaGVzLFxuICAgICAgICBpc0FwcHJvdmVkOiBmYWxzZSwgLy8gRGVmYXVsdCB0byBmYWxzZSBmb3IgbmV3IHN1Ym1pc3Npb25zXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgICB9O1xuXG4gICAgICAvLyBJZiBhIGRvY3VtZW50IGV4aXN0cyBmb3IgdGhpcyBlbWFpbCwgdXBkYXRlIGl0XG4gICAgICBpZiAoIXF1ZXJ5U25hcHNob3QuZW1wdHkpIHtcbiAgICAgICAgY29uc3QgZG9jUmVmID0gcXVlcnlTbmFwc2hvdC5kb2NzWzBdLnJlZjtcbiAgICAgICAgLy8gUHJlc2VydmUgaXNBcHByb3ZlZCBzdGF0dXMgaWYgaXQgZXhpc3RzXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nRGF0YSA9IHF1ZXJ5U25hcHNob3QuZG9jc1swXS5kYXRhKCk7XG4gICAgICAgIFxuICAgICAgICBhd2FpdCBzZXREb2MoZG9jUmVmLCB7XG4gICAgICAgICAgLi4uZm9ybURhdGFUb1NhdmUsXG4gICAgICAgICAgaXNBcHByb3ZlZDogZXhpc3RpbmdEYXRhLmlzQXBwcm92ZWQgPz8gZmFsc2UsIC8vIEtlZXAgZXhpc3RpbmcgYXBwcm92YWwgc3RhdHVzXG4gICAgICAgICAgY3JlYXRlZEF0OiBleGlzdGluZ0RhdGEuY3JlYXRlZEF0IHx8IG5ldyBEYXRlKCksIC8vIEtlZXAgb3JpZ2luYWwgY3JlYXRpb24gZGF0ZVxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSAvLyBVcGRhdGUgdGhlIHVwZGF0ZWQgZGF0ZVxuICAgICAgICB9LCB7IG1lcmdlOiB0cnVlIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSwgXG4gICAgICAgICAgbWVzc2FnZTogJ0FwcGxpY2F0aW9uIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JyBcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBkb2N1bWVudFxuICAgICAgICBhd2FpdCBhZGREb2MoYmV0YVJlZiwgZm9ybURhdGFUb1NhdmUpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSwgXG4gICAgICAgICAgbWVzc2FnZTogJ0FwcGxpY2F0aW9uIHN1Ym1pdHRlZCBzdWNjZXNzZnVsbHknIFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgYXBwbGljYXRpb24gZm9ybTonLCBlcnJvcik7XG4gICAgICByZXR1cm4geyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBzYXZpbmcgeW91ciBhcHBsaWNhdGlvbicgXG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgdXNlclNlcnZpY2UgPSBuZXcgVXNlclNlcnZpY2UoKTsiXSwibmFtZXMiOlsiVXNlciIsIldvcmtvdXQiLCJFeGVyY2lzZSIsIkV4ZXJjaXNlVmlkZW8iLCJFeGVyY2lzZUF1dGhvciIsIkV4ZXJjaXNlTG9nIiwiUHJvZmlsZUltYWdlIiwiU3Vic2NyaXB0aW9uVHlwZSIsImRvYyIsImdldERvYyIsInNldERvYyIsImRvY3VtZW50SWQiLCJjb2xsZWN0aW9uIiwicXVlcnkiLCJ3aGVyZSIsImdldERvY3MiLCJsaW1pdCIsIndyaXRlQmF0Y2giLCJkZWxldGVEb2MiLCJhZGREb2MiLCJyZWYiLCJkZWxldGVPYmplY3QiLCJnZXRTdG9yYWdlIiwiZGIiLCJzdG9yZSIsInNldFVzZXIiLCJVc2VyU2VydmljZSIsIm5vblVJQ3VycmVudFVzZXIiLCJ1c2VyRGljdCIsImdldFN0YXRlIiwidXNlciIsImN1cnJlbnRVc2VyIiwiZnJvbURpY3Rpb25hcnkiLCJkaXNwYXRjaCIsInRvRGljdGlvbmFyeSIsImZldGNoVXNlckZyb21GaXJlc3RvcmUiLCJ1c2VySWQiLCJjb25zb2xlIiwibG9nIiwidXNlclJlZiIsInVzZXJEb2MiLCJleGlzdHMiLCJ1c2VyRGF0YSIsImRhdGEiLCJjcmVhdG9yIiwicmF3U3RyaXBlQWNjb3VudElkIiwic3RyaXBlQWNjb3VudElkIiwidXBkYXRlVXNlciIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsIm1lcmdlIiwiZ2V0VXNlcnNCeUlkcyIsImlkcyIsImxlbmd0aCIsInVzZXJzIiwiY2h1bmtTaXplIiwiaSIsImNodW5rIiwic2xpY2UiLCJ1c2Vyc1JlZiIsInEiLCJxdWVyeVNuYXBzaG90IiwiZG9jcyIsImZvckVhY2giLCJwdXNoIiwiaWQiLCJnZXRVc2VyQnlJZCIsIkVycm9yIiwiZXJyb3IiLCJkZWxldGVVc2VyVmlkZW8iLCJleGVyY2lzZUlkIiwiZXhlcmNpc2VSZWYiLCJleGVyY2lzZURvYyIsInZpZGVvcyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJ2aWRlbyIsInZpZGVvVVJMIiwidmlkZW9SZWYiLCJnaWZVUkwiLCJnaWZSZWYiLCJkZWxldGVTdGFjayIsInN0YWNrSWQiLCJzdGFja1JlZiIsImxvZ3NSZWYiLCJsb2dzU25hcHNob3QiLCJnZXRCZXRhVXNlckFjY2VzcyIsImVtYWlsIiwiY3VycmVudFVzZXJJZCIsImVudmlyb25tZW50IiwiY3VycmVudFN1YnNjcmlwdGlvbiIsInN1YnNjcmlwdGlvblR5cGUiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJiZXRhUmVmIiwiYmV0YVF1ZXJ5IiwidG9Mb3dlckNhc2UiLCJmb3VuZCIsImVtcHR5IiwiZG9jdW1lbnRzQ291bnQiLCJzaXplIiwiZG9jdW1lbnQiLCJpc0FwcHJvdmVkIiwiZnVsbERhdGEiLCJ1bnN1YnNjcmliZWQiLCJjdXJyZW50VHlwZSIsImFjdGlvbiIsImZyb21UeXBlIiwidG9UeXBlIiwiYmV0YSIsInVwZGF0ZWRVc2VyIiwiYmV0YVN0YXR1cyIsImNyZWF0ZVN0YWNrIiwid29ya291dCIsImV4ZXJjaXNlTG9ncyIsInVzZXJXb3Jrb3V0UmVmIiwiYmF0Y2giLCJpbmRleCIsIm9yZGVyIiwibG9nUmVmIiwic2V0IiwiY29tbWl0IiwiZmV0Y2hVc2VyU3RhY2tzIiwic3RhY2tzUmVmIiwic3RhY2tzIiwic3RhY2tEYXRhIiwibG9nRG9jIiwibG9ncyIsImZldGNoVXNlclZpZGVvcyIsImV4ZXJjaXNlVmlkZW9zUmVmIiwidmlkZW9TbmFwc2hvdCIsInRhcmdldFZpZGVvRXhpc3RzIiwic29tZSIsInZpZGVvc0J5RXhlcmNpc2VOYW1lIiwidmlkZW9EYXRhIiwiZXhlcmNpc2VOYW1lIiwid2FybiIsInVzZXJuYW1lIiwiZmlsZU5hbWUiLCJleGVyY2lzZSIsInByb2ZpbGVJbWFnZSIsImNhcHRpb24iLCJ0aHVtYm5haWwiLCJ2aXNpYmlsaXR5IiwidG90YWxBY2NvdW50c1JlYWNoZWQiLCJ0b3RhbEFjY291bnRMaWtlcyIsInRvdGFsQWNjb3VudEJvb2ttYXJrZWQiLCJ0b3RhbEFjY291bnRVc2FnZSIsImxpa2VkIiwiYm9va21hcmtlZCIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsImV4ZXJjaXNlc1JlZiIsImV4ZXJjaXNlc1NuYXBzaG90IiwidXNlckV4ZXJjaXNlcyIsImV4ZXJjaXNlRGF0YSIsIm5hbWUiLCJoYXNWaWRlb3MiLCJleGVyY2lzZURvY0lkIiwiZXhlcmNpc2VOYW1lTG93ZXIiLCJ2aWRlb3NGb3JUaGlzRXhlcmNpc2UiLCJjYXRlZ29yeSIsInByaW1hcnlCb2R5UGFydHMiLCJzZWNvbmRhcnlCb2R5UGFydHMiLCJ0YWdzIiwiZGVzY3JpcHRpb24iLCJzdGVwcyIsImN1cnJlbnRWaWRlb1Bvc2l0aW9uIiwicmVwcyIsInNldHMiLCJ3ZWlnaHQiLCJhdXRob3IiLCJmaWx0ZXIiLCJleCIsInZpZGVvQ291bnQiLCJ2aWRlb0lkcyIsInYiLCJmZXRjaEZvbGxvd2luZyIsImZvbGxvd1JlcXVlc3RzUmVmIiwiZm9sbG93UmVxdWVzdHMiLCJmcm9tVXNlciIsImRpc3BsYXlOYW1lIiwidG9Vc2VyIiwic3RhdHVzIiwiZmV0Y2hGb2xsb3dlcnMiLCJnZXRVc2VySWRCeVVzZXJuYW1lIiwiZ2V0QWxsVXNlcnMiLCJwcm9maWxlSW1hZ2VVUkwiLCJnZXRVc2VyQnlVc2VybmFtZSIsImZldGNoRmVhdHVyZWRVc2VycyIsInNvcnQiLCJNYXRoIiwicmFuZG9tIiwicXVlcnlVc2VycyIsInNlYXJjaFF1ZXJ5IiwiaGFzVXNlclB1cmNoYXNlZENoYWxsZW5nZSIsImNoYWxsZW5nZUlkIiwiaGFzUHVyY2hhc2VkIiwiY29udmVydFRpbWVzdGFtcCIsInRvRGF0ZSIsIl9zZWNvbmRzIiwiZSIsImFsbFVzZXJQYXltZW50c1JlZiIsImFsbFVzZXJQYXltZW50c1F1ZXJ5IiwiYWxsVXNlclBheW1lbnRzU25hcHNob3QiLCJhbW91bnQiLCJidXllcklkIiwib3duZXJJZCIsInJhd0NyZWF0ZWRBdCIsInR5cGUiLCJ2YWx1ZSIsIm1hdGNoaW5nUGF5bWVudCIsImZpbmQiLCJwYXltZW50RGF0YSIsInBheW1lbnQiLCJwdXJjaGFzZURhdGUiLCJzYXZlQXBwbGljYXRpb25Gb3JtIiwiZm9ybURhdGEiLCJub3JtYWxpemVkRW1haWwiLCJmb3JtRGF0YVRvU2F2ZSIsInJvbGUiLCJwcmltYXJ5VXNlIiwidXNlQ2FzZXMiLCJjbGllbnRDb3VudCIsInllYXJzRXhwZXJpZW5jZSIsImxvbmdUZXJtR29hbCIsImlzQ2VydGlmaWVkIiwiY2VydGlmaWNhdGlvbk5hbWUiLCJhcHBseUZvckZvdW5kaW5nQ29hY2hlcyIsImRvY1JlZiIsImV4aXN0aW5nRGF0YSIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwidXNlclNlcnZpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/api/firebase/user/service.ts\n");

/***/ }),

/***/ "./src/api/firebase/user/types.ts":
/*!****************************************!*\
  !*** ./src/api/firebase/user/types.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BodyWeight: () => (/* binding */ BodyWeight),\n/* harmony export */   ContentCreatorType: () => (/* binding */ ContentCreatorType),\n/* harmony export */   Creator: () => (/* binding */ Creator),\n/* harmony export */   FitnessCreatorWhy: () => (/* binding */ FitnessCreatorWhy),\n/* harmony export */   Gender: () => (/* binding */ Gender),\n/* harmony export */   OnboardingPayoutState: () => (/* binding */ OnboardingPayoutState),\n/* harmony export */   OnboardingStatus: () => (/* binding */ OnboardingStatus),\n/* harmony export */   ProfileImage: () => (/* binding */ ProfileImage),\n/* harmony export */   ShortUser: () => (/* binding */ ShortUser),\n/* harmony export */   StripeOnboardingStatus: () => (/* binding */ StripeOnboardingStatus),\n/* harmony export */   Subscription: () => (/* binding */ Subscription),\n/* harmony export */   SubscriptionPlatform: () => (/* binding */ SubscriptionPlatform),\n/* harmony export */   SubscriptionType: () => (/* binding */ SubscriptionType),\n/* harmony export */   User: () => (/* binding */ User),\n/* harmony export */   UserLevel: () => (/* binding */ UserLevel),\n/* harmony export */   WorkoutGoal: () => (/* binding */ WorkoutGoal)\n/* harmony export */ });\n/* harmony import */ var _utils_formatDate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/formatDate */ \"./src/utils/formatDate.ts\");\n// src/api/firebase/user/types.ts\n\nclass ProfileImage {\n    constructor(data){\n        this.profileImageURL = data.profileImageURL || \"\";\n        this.imageOffsetWidth = data.imageOffsetWidth || 0;\n        this.imageOffsetHeight = data.imageOffsetHeight || 0;\n    }\n    toDictionary() {\n        return {\n            profileImageURL: this.profileImageURL,\n            imageOffsetWidth: this.imageOffsetWidth,\n            imageOffsetHeight: this.imageOffsetHeight\n        };\n    }\n}\nclass User {\n    constructor(id, data){\n        this.level = \"novice\";\n        this.id = id;\n        this.displayName = data.displayName || \"\";\n        this.email = data.email;\n        this.username = data.username || \"\";\n        this.homeGym = data.homeGym || null;\n        this.encouragement = data.encouragement || [];\n        this.birthdate = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.convertFirestoreTimestamp)(data.birthdate) || null;\n        this.gender = data.gender || null;\n        this.selfDisclosedGender = data.selfDisclosedGender || \"\";\n        this.height = data.height || null;\n        this.location = data.location || null;\n        this.bio = data.bio || \"\";\n        this.fcmToken = data.fcmToken || \"\";\n        this.workoutBuddy = data.workoutBuddy || \"\";\n        this.workoutBuddyUser = data.workoutBuddyUser || null;\n        this.additionalGoals = data.additionalGoals || \"\";\n        this.blockedUsers = data.blockedUsers || [];\n        this.level = data.level || \"novice\";\n        this.goal = data.goal || [];\n        this.bodyWeight = Array.isArray(data.bodyWeight) ? data.bodyWeight.map((weight)=>new BodyWeight(weight)) : [];\n        this.macros = data.macros || {};\n        this.profileImage = new ProfileImage(data.profileImage || {});\n        this.registrationComplete = data.registrationComplete || false;\n        // Create the Creator instance\n        if (data.creator) {\n            this.creator = new Creator(data.creator);\n        } else {\n            this.creator = null;\n        }\n        this.subscriptionType = data.subscriptionType || \"Unsubscribed\";\n        this.subscriptionPlatform = data.subscriptionPlatform || \"web\";\n        this.referrer = data.referrer || \"\";\n        this.isCurrentlyActive = data.isCurrentlyActive || false;\n        this.videoCount = data.videoCount || 0;\n        this.createdAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.convertFirestoreTimestamp)(data.createdAt) || null;\n        this.updatedAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.convertFirestoreTimestamp)(data.updatedAt) || null;\n    }\n    static fromDictionary(dict) {\n        if (!dict) return null;\n        // Convert timestamps back to Date objects\n        const processedData = {\n            ...dict,\n            birthdate: dict.birthdate ? new Date(dict.birthdate * 1000) : null,\n            createdAt: dict.createdAt ? new Date(dict.createdAt * 1000) : null,\n            updatedAt: dict.updatedAt ? new Date(dict.updatedAt * 1000) : null,\n            // Convert any nested objects that need special handling\n            profileImage: dict.profileImage ? new ProfileImage(dict.profileImage) : null,\n            bodyWeight: Array.isArray(dict.bodyWeight) ? dict.bodyWeight.map((weight)=>new BodyWeight(weight)) : []\n        };\n        return new User(dict.id, processedData);\n    }\n    toDictionary() {\n        const userDict = {\n            id: this.id,\n            displayName: this.displayName,\n            email: this.email,\n            username: this.username,\n            homeGym: this.homeGym,\n            encouragement: this.encouragement,\n            birthdate: this.birthdate ? (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.dateToUnixTimestamp)(this.birthdate) : null,\n            gender: this.gender,\n            selfDisclosedGender: this.selfDisclosedGender,\n            height: this.height,\n            location: this.location,\n            bio: this.bio,\n            fcmToken: this.fcmToken,\n            workoutBuddy: this.workoutBuddy,\n            workoutBuddyUser: this.workoutBuddyUser,\n            additionalGoals: this.additionalGoals,\n            blockedUsers: this.blockedUsers,\n            level: this.level,\n            goal: this.goal,\n            bodyWeight: this.bodyWeight.map((bw)=>typeof bw.toDictionary === \"function\" ? bw.toDictionary() : bw),\n            macros: this.macros,\n            profileImage: this.profileImage.toDictionary(),\n            registrationComplete: this.registrationComplete,\n            creator: this.creator,\n            subscriptionType: this.subscriptionType,\n            subscriptionPlatform: this.subscriptionPlatform,\n            referrer: this.referrer,\n            isCurrentlyActive: this.isCurrentlyActive,\n            videoCount: this.videoCount,\n            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.dateToUnixTimestamp)(this.createdAt),\n            updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.dateToUnixTimestamp)(this.updatedAt)\n        };\n        return userDict;\n    }\n    toShortUser() {\n        return new ShortUser({\n            id: this.id,\n            displayName: this.displayName,\n            email: this.email,\n            fcmToken: this.fcmToken,\n            username: this.username,\n            level: this.level,\n            videoCount: this.videoCount,\n            profileImage: this.profileImage\n        });\n    }\n}\nvar SubscriptionType;\n(function(SubscriptionType) {\n    SubscriptionType[\"unsubscribed\"] = \"Unsubscribed\";\n    SubscriptionType[\"beta\"] = \"Beta User\";\n    SubscriptionType[\"monthly\"] = \"Monthly Subscriber\";\n    SubscriptionType[\"annual\"] = \"Annual Subscriber\";\n    SubscriptionType[\"sweatEquityPartner\"] = \"Sweat Equity Partner\";\n    SubscriptionType[\"executivePartner\"] = \"Executive Partner\";\n})(SubscriptionType || (SubscriptionType = {}));\nvar UserLevel;\n(function(UserLevel) {\n    UserLevel[\"Novice\"] = \"novice\";\n    UserLevel[\"Intermediate\"] = \"intermediate\";\n    UserLevel[\"Expert\"] = \"expert\";\n})(UserLevel || (UserLevel = {}));\nvar WorkoutGoal;\n(function(WorkoutGoal) {\n    WorkoutGoal[\"LoseWeight\"] = \"Lose weight\";\n    WorkoutGoal[\"GainWeight\"] = \"Gain muscle mass\";\n    WorkoutGoal[\"ToneUp\"] = \"Tone up\";\n    WorkoutGoal[\"GeneralFitness\"] = \"General Fitness\";\n})(WorkoutGoal || (WorkoutGoal = {}));\nclass ShortUser {\n    constructor(data){\n        this.id = data.id || \"\";\n        this.displayName = data.displayName || \"\";\n        this.email = data.email || \"\";\n        this.fcmToken = data.fcmToken || null;\n        this.username = data.username || \"\";\n        this.level = data.level || \"novice\";\n        this.videoCount = data.videoCount || 0;\n        this.profileImage = data.profileImage ? new ProfileImage(data.profileImage) : new ProfileImage({});\n    }\n    // Static factory method to create from Firestore data\n    static fromFirestore(data) {\n        return new ShortUser(data);\n    }\n    // Convert to dictionary for Firestore\n    toDictionary() {\n        return {\n            id: this.id,\n            displayName: this.displayName,\n            email: this.email,\n            fcmToken: this.fcmToken,\n            username: this.username,\n            level: this.level,\n            videoCount: this.videoCount,\n            profileImage: this.profileImage.toDictionary()\n        };\n    }\n    // Helper method to create from User object\n    static fromUser(user) {\n        return new ShortUser({\n            id: user.id,\n            displayName: user.displayName,\n            email: user.email,\n            fcmToken: user.fcmToken,\n            username: user.username,\n            level: user.level,\n            videoCount: user.videoCount,\n            profileImage: user.profileImage\n        });\n    }\n}\nvar Gender;\n(function(Gender) {\n    Gender[\"Woman\"] = \"woman\";\n    Gender[\"Man\"] = \"man\";\n    Gender[\"SelfDescribe\"] = \"I'd rather self describe\";\n})(Gender || (Gender = {}));\nvar SubscriptionPlatform;\n(function(SubscriptionPlatform) {\n    SubscriptionPlatform[\"iOS\"] = \"ios\";\n    SubscriptionPlatform[\"Web\"] = \"web\";\n    SubscriptionPlatform[\"Android\"] = \"android\";\n})(SubscriptionPlatform || (SubscriptionPlatform = {}));\nvar StripeOnboardingStatus;\n(function(StripeOnboardingStatus) {\n    StripeOnboardingStatus[\"Parseending\"] = \"incomplete\";\n    StripeOnboardingStatus[\"Complete\"] = \"complete\";\n    StripeOnboardingStatus[\"NotStarted\"] = \"notStarted\";\n})(StripeOnboardingStatus || (StripeOnboardingStatus = {}));\nvar ContentCreatorType;\n(function(ContentCreatorType) {\n    ContentCreatorType[\"FitnessEnthusiast\"] = \"fitness enthusiast\";\n    ContentCreatorType[\"PersonalTrainer\"] = \"personal trainer\";\n    ContentCreatorType[\"FitnessInfluencer\"] = \"fitness influencer\";\n    ContentCreatorType[\"InterestedInBecomingAThoughtLeader\"] = \"interested in becoming a thought leader\";\n})(ContentCreatorType || (ContentCreatorType = {}));\nvar FitnessCreatorWhy;\n(function(FitnessCreatorWhy) {\n    FitnessCreatorWhy[\"ShareKnowledge\"] = \"share knowledge\";\n    FitnessCreatorWhy[\"BuildAFollowing\"] = \"build a following\";\n    FitnessCreatorWhy[\"BuildPersonalBrand\"] = \"build personal brand\";\n    FitnessCreatorWhy[\"EarnIncome\"] = \"earn income\";\n})(FitnessCreatorWhy || (FitnessCreatorWhy = {}));\nclass Creator {\n    constructor(data){\n        this.id = data.id || \"\";\n        this.instagramHandle = data.instagramHandle || \"\";\n        this.twitterHandle = data.twitterHandle || \"\";\n        this.youtubeUrl = data.youtubeUrl || \"\";\n        this.type = Array.isArray(data.type) ? data.type.map((t)=>ContentCreatorType[t]) : [];\n        this.why = Array.isArray(data.why) ? data.why.map((w)=>FitnessCreatorWhy[w]) : [];\n        this.onboardingPayoutState = data.onboardingPayoutState || \"\";\n        this.onboardingExpirationDate = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.convertFirestoreTimestamp)(data.onboardingExpirationDate);\n        this.onboardingLink = data.onboardingLink;\n        this.onboardingStatus = data.onboardingStatus || \"notStarted\";\n        // Add explicit check for stripeAccountId\n        this.stripeAccountId = data.stripeAccountId || undefined;\n        this.isTrainer = data.isTrainer || false;\n        this.digitalSignatures = data.digitalSignatures || [];\n        this.additionalFeedback = data.additionalFeedback || \"\";\n        this.acceptGeneralTerms = data.acceptGeneralTerms || false;\n        this.acceptSweatEquityPartnership = data.acceptSweatEquityPartnership || false;\n        this.acceptCodeOfConduct = data.acceptCodeOfConduct || false;\n        this.acceptExecutiveTerms = data.acceptExecutiveTerms || false;\n        this.createdAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.convertFirestoreTimestamp)(data.createdAt) || new Date();\n        this.updatedAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.convertFirestoreTimestamp)(data.updatedAt) || new Date();\n    }\n    toDictionary() {\n        return {\n            id: this.id,\n            instagramHandle: this.instagramHandle,\n            twitterHandle: this.twitterHandle,\n            youtubeUrl: this.youtubeUrl,\n            type: this.type,\n            why: this.why,\n            onboardingPayoutState: this.onboardingPayoutState,\n            onboardingExpirationDate: this.onboardingExpirationDate ? (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.dateToUnixTimestamp)(this.onboardingExpirationDate) : null,\n            onboardingLink: this.onboardingLink,\n            onboardingStatus: this.onboardingStatus,\n            stripeAccountId: this.stripeAccountId,\n            isTrainer: this.isTrainer,\n            digitalSignatures: this.digitalSignatures,\n            additionalFeedback: this.additionalFeedback,\n            acceptGeneralTerms: this.acceptGeneralTerms,\n            acceptSweatEquityPartnership: this.acceptSweatEquityPartnership,\n            acceptCodeOfConduct: this.acceptCodeOfConduct,\n            acceptExecutiveTerms: this.acceptExecutiveTerms,\n            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.dateToUnixTimestamp)(this.createdAt),\n            updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.dateToUnixTimestamp)(this.updatedAt)\n        };\n    }\n    static fromDictionary(dict) {\n        if (!dict) return null;\n        return new Creator(dict);\n    }\n}\nvar OnboardingPayoutState;\n(function(OnboardingPayoutState) {\n    OnboardingPayoutState[\"Introduction\"] = \"introduction\";\n    OnboardingPayoutState[\"InProgress\"] = \"in_progress\";\n    OnboardingPayoutState[\"Complete\"] = \"complete\";\n})(OnboardingPayoutState || (OnboardingPayoutState = {}));\nvar OnboardingStatus;\n(function(OnboardingStatus) {\n    OnboardingStatus[\"NotStarted\"] = \"not_started\";\n    OnboardingStatus[\"InProgress\"] = \"in_progress\";\n    OnboardingStatus[\"Completed\"] = \"completed\";\n})(OnboardingStatus || (OnboardingStatus = {}));\nclass BodyWeight {\n    constructor(data){\n        const now = Date.now() / 1000;\n        this.id = data.id || crypto.randomUUID();\n        this.oldWeight = data.oldWeight || 0;\n        this.newWeight = data.newWeight || 0;\n        this.frontUrl = data.frontUrl || \"\";\n        this.backUrl = data.backUrl || \"\";\n        this.sideUrl = data.sideUrl || \"\";\n        this.createdAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.convertFirestoreTimestamp)(data.createdAt);\n        this.updatedAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.convertFirestoreTimestamp)(data.updatedAt);\n    }\n    toDictionary() {\n        return {\n            oldWeight: this.oldWeight,\n            newWeight: this.newWeight,\n            frontUrl: this.frontUrl,\n            backUrl: this.backUrl,\n            sideUrl: this.sideUrl,\n            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.dateToUnixTimestamp)(this.createdAt),\n            updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.dateToUnixTimestamp)(this.updatedAt)\n        };\n    }\n}\n// Add this class definition\nclass Subscription {\n    constructor(id, data){\n        this.id = id;\n        this.userId = data.userId;\n        this.subscriptionType = data.subscriptionType || \"Unsubscribed\";\n        this.platform = data.platform || \"web\"; // Default could be web or based on context\n        this.stripeSubscriptionId = data.stripeSubscriptionId;\n        this.stripeCustomerId = data.stripeCustomerId;\n        this.createdAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.convertFirestoreTimestamp)(data.createdAt) || new Date();\n        this.updatedAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.convertFirestoreTimestamp)(data.updatedAt) || new Date();\n    }\n    static fromDictionary(dict) {\n        if (!dict || !dict.id || !dict.userId) return null; // Need id and userId\n        // Assuming convertFirestoreTimestamp handles potential timestamp formats from Firestore\n        const processedData = {\n            ...dict,\n            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.convertFirestoreTimestamp)(dict.createdAt) || new Date(),\n            updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.convertFirestoreTimestamp)(dict.updatedAt) || new Date()\n        };\n        return new Subscription(dict.id, processedData);\n    }\n    toDictionary() {\n        return {\n            userId: this.userId,\n            subscriptionType: this.subscriptionType,\n            platform: this.platform,\n            stripeSubscriptionId: this.stripeSubscriptionId,\n            stripeCustomerId: this.stripeCustomerId,\n            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.dateToUnixTimestamp)(this.createdAt),\n            updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_0__.dateToUnixTimestamp)(this.updatedAt)\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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a0IsSUFBSSxDQUFDQSxnQkFBZ0I7WUFDdkMwRCxVQUFVLElBQUksQ0FBQ0EsUUFBUTtZQUN2QkMsc0JBQXNCLElBQUksQ0FBQ0Esb0JBQW9CO1lBQy9DQyxrQkFBa0IsSUFBSSxDQUFDQSxnQkFBZ0I7WUFDdkN2RCxXQUFXNUMsc0VBQW1CQSxDQUFDLElBQUksQ0FBQzRDLFNBQVM7WUFDN0NDLFdBQVc3QyxzRUFBbUJBLENBQUMsSUFBSSxDQUFDNkMsU0FBUztRQUNqRDtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1hcHAvLi9zcmMvYXBpL2ZpcmViYXNlL3VzZXIvdHlwZXMudHM/ZDljMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvYXBpL2ZpcmViYXNlL3VzZXIvdHlwZXMudHNcbmltcG9ydCB7IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAsIGRhdGVUb1VuaXhUaW1lc3RhbXAgfSBmcm9tICcuLi8uLi8uLi91dGlscy9mb3JtYXREYXRlJztcblxuZXhwb3J0IGludGVyZmFjZSBVc2VyU2VydmljZSB7XG4gICAgdXBkYXRlVXNlcjogKHVzZXJJZDogc3RyaW5nLCB1c2VyOiBVc2VyKSA9PiBQcm9taXNlPHZvaWQ+O1xuICAgIGZldGNoVXNlckZyb21GaXJlc3RvcmU6ICh1c2VySWQ6IHN0cmluZykgPT4gUHJvbWlzZTxVc2VyPjtcbiAgICBmZXRjaFVzZXJzV2l0aFZpZGVvc1VwbG9hZGVkOiAoKSA9PiBQcm9taXNlPFVzZXJbXT47XG4gICAgY3VycmVudFVzZXI6IFVzZXIgfCBudWxsO1xufVxuXG4vLyBBZGQgdG8gZXhpc3RpbmcgaW50ZXJmYWNlc1xuZXhwb3J0IGludGVyZmFjZSBGb2xsb3dSZXF1ZXN0IHtcbiAgZnJvbVVzZXI6IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIHVzZXJuYW1lOiBzdHJpbmc7XG4gICAgZGlzcGxheU5hbWU6IHN0cmluZztcbiAgfTtcbiAgdG9Vc2VyOiB7XG4gICAgaWQ6IHN0cmluZztcbiAgICB1c2VybmFtZTogc3RyaW5nO1xuICAgIGRpc3BsYXlOYW1lOiBzdHJpbmc7XG4gIH07XG4gIHN0YXR1czogc3RyaW5nO1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIHVwZGF0ZWRBdDogRGF0ZVxufVxuXG5leHBvcnQgY2xhc3MgUHJvZmlsZUltYWdlIHtcbiAgcHJvZmlsZUltYWdlVVJMOiBzdHJpbmc7XG4gIGltYWdlT2Zmc2V0V2lkdGg6IG51bWJlcjtcbiAgaW1hZ2VPZmZzZXRIZWlnaHQ6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihkYXRhOiBhbnkpIHtcbiAgICB0aGlzLnByb2ZpbGVJbWFnZVVSTCA9IGRhdGEucHJvZmlsZUltYWdlVVJMIHx8ICcnO1xuICAgIHRoaXMuaW1hZ2VPZmZzZXRXaWR0aCA9IGRhdGEuaW1hZ2VPZmZzZXRXaWR0aCB8fCAwO1xuICAgIHRoaXMuaW1hZ2VPZmZzZXRIZWlnaHQgPSBkYXRhLmltYWdlT2Zmc2V0SGVpZ2h0IHx8IDA7XG4gIH1cblxuICB0b0RpY3Rpb25hcnkoKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb2ZpbGVJbWFnZVVSTDogdGhpcy5wcm9maWxlSW1hZ2VVUkwsXG4gICAgICBpbWFnZU9mZnNldFdpZHRoOiB0aGlzLmltYWdlT2Zmc2V0V2lkdGgsXG4gICAgICBpbWFnZU9mZnNldEhlaWdodDogdGhpcy5pbWFnZU9mZnNldEhlaWdodFxuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFVzZXIge1xuICBpZDogc3RyaW5nO1xuICBkaXNwbGF5TmFtZTogc3RyaW5nO1xuICBlbWFpbDogc3RyaW5nO1xuICB1c2VybmFtZTogc3RyaW5nO1xuICBob21lR3ltPzogR3ltO1xuICBlbmNvdXJhZ2VtZW50PzogRW5jb3VyYWdlbWVudFtdO1xuICBiaXJ0aGRhdGU/OiBEYXRlO1xuICBnZW5kZXI/OiBHZW5kZXI7XG4gIHNlbGZEaXNjbG9zZWRHZW5kZXI/OiBzdHJpbmc7XG4gIGhlaWdodD86IFVzZXJIZWlnaHQ7XG4gIGxvY2F0aW9uPzogTG9jYXRpb247XG4gIGJpbzogc3RyaW5nO1xuICBmY21Ub2tlbj86IHN0cmluZztcbiAgd29ya291dEJ1ZGR5Pzogc3RyaW5nO1xuICB3b3Jrb3V0QnVkZHlVc2VyPzogU2hvcnRVc2VyO1xuICBhZGRpdGlvbmFsR29hbHM6IHN0cmluZztcbiAgYmxvY2tlZFVzZXJzOiBzdHJpbmdbXTtcbiAgbGV2ZWw6IFVzZXJMZXZlbCA9IFVzZXJMZXZlbC5Ob3ZpY2U7XG4gIGdvYWw6IFdvcmtvdXRHb2FsW107XG4gIGJvZHlXZWlnaHQ6IEJvZHlXZWlnaHRbXTtcbiAgbWFjcm9zOiBSZWNvcmQ8c3RyaW5nLCBNYWNyb1JlY29tbWVuZGF0aW9ucz47XG4gIHByb2ZpbGVJbWFnZTogUHJvZmlsZUltYWdlO1xuICByZWdpc3RyYXRpb25Db21wbGV0ZTogYm9vbGVhbjtcbiAgY3JlYXRvcjogQ3JlYXRvciB8IG51bGw7XG4gIHN1YnNjcmlwdGlvblR5cGU6IFN1YnNjcmlwdGlvblR5cGU7XG4gIHN1YnNjcmlwdGlvblBsYXRmb3JtOiBTdWJzY3JpcHRpb25QbGF0Zm9ybTtcbiAgcmVmZXJyZXI/OiBzdHJpbmc7XG4gIGlzQ3VycmVudGx5QWN0aXZlOiBib29sZWFuO1xuICB2aWRlb0NvdW50OiBudW1iZXI7XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbiAgdXBkYXRlZEF0OiBEYXRlO1xuXG4gIGNvbnN0cnVjdG9yKGlkOiBzdHJpbmcsIGRhdGE6IGFueSkgeyAgICBcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5kaXNwbGF5TmFtZSA9IGRhdGEuZGlzcGxheU5hbWUgfHwgJyc7XG4gICAgdGhpcy5lbWFpbCA9IGRhdGEuZW1haWw7XG4gICAgdGhpcy51c2VybmFtZSA9IGRhdGEudXNlcm5hbWUgfHwgJyc7XG4gICAgdGhpcy5ob21lR3ltID0gZGF0YS5ob21lR3ltIHx8IG51bGw7XG4gICAgdGhpcy5lbmNvdXJhZ2VtZW50ID0gZGF0YS5lbmNvdXJhZ2VtZW50IHx8IFtdO1xuXG4gICAgdGhpcy5iaXJ0aGRhdGUgPSBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuYmlydGhkYXRlKSB8fCBudWxsO1xuXG4gICAgdGhpcy5nZW5kZXIgPSBkYXRhLmdlbmRlciB8fCBudWxsO1xuICAgIHRoaXMuc2VsZkRpc2Nsb3NlZEdlbmRlciA9IGRhdGEuc2VsZkRpc2Nsb3NlZEdlbmRlciB8fCAnJztcbiAgICB0aGlzLmhlaWdodCA9IGRhdGEuaGVpZ2h0IHx8IG51bGw7XG4gICAgdGhpcy5sb2NhdGlvbiA9IGRhdGEubG9jYXRpb24gfHwgbnVsbDtcbiAgICB0aGlzLmJpbyA9IGRhdGEuYmlvIHx8ICcnO1xuICAgIHRoaXMuZmNtVG9rZW4gPSBkYXRhLmZjbVRva2VuIHx8ICcnO1xuICAgIHRoaXMud29ya291dEJ1ZGR5ID0gZGF0YS53b3Jrb3V0QnVkZHkgfHwgJyc7XG4gICAgdGhpcy53b3Jrb3V0QnVkZHlVc2VyID0gZGF0YS53b3Jrb3V0QnVkZHlVc2VyIHx8IG51bGw7XG4gICAgdGhpcy5hZGRpdGlvbmFsR29hbHMgPSBkYXRhLmFkZGl0aW9uYWxHb2FscyB8fCAnJztcbiAgICB0aGlzLmJsb2NrZWRVc2VycyA9IGRhdGEuYmxvY2tlZFVzZXJzIHx8IFtdO1xuICAgIHRoaXMubGV2ZWwgPSBkYXRhLmxldmVsIHx8IFVzZXJMZXZlbC5Ob3ZpY2U7XG4gICAgdGhpcy5nb2FsID0gZGF0YS5nb2FsIHx8IFtdO1xuICAgIHRoaXMuYm9keVdlaWdodCA9IEFycmF5LmlzQXJyYXkoZGF0YS5ib2R5V2VpZ2h0KVxuICAgICAgPyBkYXRhLmJvZHlXZWlnaHQubWFwKCh3ZWlnaHQ6IGFueSkgPT4gbmV3IEJvZHlXZWlnaHQod2VpZ2h0KSlcbiAgICAgIDogW107XG4gICAgdGhpcy5tYWNyb3MgPSBkYXRhLm1hY3JvcyB8fCB7fTtcbiAgICB0aGlzLnByb2ZpbGVJbWFnZSA9IG5ldyBQcm9maWxlSW1hZ2UoZGF0YS5wcm9maWxlSW1hZ2UgfHwge30pO1xuICAgIHRoaXMucmVnaXN0cmF0aW9uQ29tcGxldGUgPSBkYXRhLnJlZ2lzdHJhdGlvbkNvbXBsZXRlIHx8IGZhbHNlO1xuICAgIFxuICAgIC8vIENyZWF0ZSB0aGUgQ3JlYXRvciBpbnN0YW5jZVxuICAgIGlmIChkYXRhLmNyZWF0b3IpIHtcbiAgICAgIHRoaXMuY3JlYXRvciA9IG5ldyBDcmVhdG9yKGRhdGEuY3JlYXRvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY3JlYXRvciA9IG51bGw7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuc3Vic2NyaXB0aW9uVHlwZSA9IGRhdGEuc3Vic2NyaXB0aW9uVHlwZSB8fCBTdWJzY3JpcHRpb25UeXBlLnVuc3Vic2NyaWJlZDtcbiAgICB0aGlzLnN1YnNjcmlwdGlvblBsYXRmb3JtID0gZGF0YS5zdWJzY3JpcHRpb25QbGF0Zm9ybSB8fCBTdWJzY3JpcHRpb25QbGF0Zm9ybS5XZWI7XG4gICAgdGhpcy5yZWZlcnJlciA9IGRhdGEucmVmZXJyZXIgfHwgJyc7XG4gICAgdGhpcy5pc0N1cnJlbnRseUFjdGl2ZSA9IGRhdGEuaXNDdXJyZW50bHlBY3RpdmUgfHwgZmFsc2U7XG4gICAgdGhpcy52aWRlb0NvdW50ID0gZGF0YS52aWRlb0NvdW50IHx8IDA7XG5cbiAgICB0aGlzLmNyZWF0ZWRBdCA9IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5jcmVhdGVkQXQpIHx8IG51bGw7XG5cbiAgICB0aGlzLnVwZGF0ZWRBdCA9IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS51cGRhdGVkQXQpIHx8IG51bGw7XG4gIH1cblxuICBzdGF0aWMgZnJvbURpY3Rpb25hcnkoZGljdDogUmVjb3JkPHN0cmluZywgYW55PiB8IG51bGwpOiBVc2VyIHwgbnVsbCB7XG4gICAgaWYgKCFkaWN0KSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICAvLyBDb252ZXJ0IHRpbWVzdGFtcHMgYmFjayB0byBEYXRlIG9iamVjdHNcbiAgICBjb25zdCBwcm9jZXNzZWREYXRhID0ge1xuICAgICAgLi4uZGljdCxcbiAgICAgIGJpcnRoZGF0ZTogZGljdC5iaXJ0aGRhdGUgPyBuZXcgRGF0ZShkaWN0LmJpcnRoZGF0ZSAqIDEwMDApIDogbnVsbCxcbiAgICAgIGNyZWF0ZWRBdDogZGljdC5jcmVhdGVkQXQgPyBuZXcgRGF0ZShkaWN0LmNyZWF0ZWRBdCAqIDEwMDApIDogbnVsbCxcbiAgICAgIHVwZGF0ZWRBdDogZGljdC51cGRhdGVkQXQgPyBuZXcgRGF0ZShkaWN0LnVwZGF0ZWRBdCAqIDEwMDApIDogbnVsbCxcbiAgICAgIC8vIENvbnZlcnQgYW55IG5lc3RlZCBvYmplY3RzIHRoYXQgbmVlZCBzcGVjaWFsIGhhbmRsaW5nXG4gICAgICBwcm9maWxlSW1hZ2U6IGRpY3QucHJvZmlsZUltYWdlID8gbmV3IFByb2ZpbGVJbWFnZShkaWN0LnByb2ZpbGVJbWFnZSkgOiBudWxsLFxuICAgICAgYm9keVdlaWdodDogQXJyYXkuaXNBcnJheShkaWN0LmJvZHlXZWlnaHQpIFxuICAgICAgICA/IGRpY3QuYm9keVdlaWdodC5tYXAoKHdlaWdodDogYW55KSA9PiBuZXcgQm9keVdlaWdodCh3ZWlnaHQpKVxuICAgICAgICA6IFtdLFxuICAgIH07XG5cbiAgICByZXR1cm4gbmV3IFVzZXIoZGljdC5pZCwgcHJvY2Vzc2VkRGF0YSk7XG4gIH1cblxuICB0b0RpY3Rpb25hcnkoKTogUmVjb3JkPHN0cmluZywgYW55PiB7XG4gICAgY29uc3QgdXNlckRpY3Q6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7XG4gICAgICBpZDogdGhpcy5pZCxcbiAgICAgIGRpc3BsYXlOYW1lOiB0aGlzLmRpc3BsYXlOYW1lLFxuICAgICAgZW1haWw6IHRoaXMuZW1haWwsXG4gICAgICB1c2VybmFtZTogdGhpcy51c2VybmFtZSxcbiAgICAgIGhvbWVHeW06IHRoaXMuaG9tZUd5bSxcbiAgICAgIGVuY291cmFnZW1lbnQ6IHRoaXMuZW5jb3VyYWdlbWVudCxcbiAgICAgIGJpcnRoZGF0ZTogdGhpcy5iaXJ0aGRhdGUgPyBkYXRlVG9Vbml4VGltZXN0YW1wKHRoaXMuYmlydGhkYXRlKSA6IG51bGwsXG4gICAgICBnZW5kZXI6IHRoaXMuZ2VuZGVyLFxuICAgICAgc2VsZkRpc2Nsb3NlZEdlbmRlcjogdGhpcy5zZWxmRGlzY2xvc2VkR2VuZGVyLFxuICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCxcbiAgICAgIGxvY2F0aW9uOiB0aGlzLmxvY2F0aW9uLFxuICAgICAgYmlvOiB0aGlzLmJpbyxcbiAgICAgIGZjbVRva2VuOiB0aGlzLmZjbVRva2VuLFxuICAgICAgd29ya291dEJ1ZGR5OiB0aGlzLndvcmtvdXRCdWRkeSxcbiAgICAgIHdvcmtvdXRCdWRkeVVzZXI6IHRoaXMud29ya291dEJ1ZGR5VXNlcixcbiAgICAgIGFkZGl0aW9uYWxHb2FsczogdGhpcy5hZGRpdGlvbmFsR29hbHMsXG4gICAgICBibG9ja2VkVXNlcnM6IHRoaXMuYmxvY2tlZFVzZXJzLFxuICAgICAgbGV2ZWw6IHRoaXMubGV2ZWwsXG4gICAgICBnb2FsOiB0aGlzLmdvYWwsXG4gICAgICBib2R5V2VpZ2h0OiB0aGlzLmJvZHlXZWlnaHQubWFwKGJ3ID0+ICh0eXBlb2YgYncudG9EaWN0aW9uYXJ5ID09PSAnZnVuY3Rpb24nID8gYncudG9EaWN0aW9uYXJ5KCkgOiBidykpLFxuICAgICAgbWFjcm9zOiB0aGlzLm1hY3JvcyxcbiAgICAgIHByb2ZpbGVJbWFnZTogdGhpcy5wcm9maWxlSW1hZ2UudG9EaWN0aW9uYXJ5KCksXG4gICAgICByZWdpc3RyYXRpb25Db21wbGV0ZTogdGhpcy5yZWdpc3RyYXRpb25Db21wbGV0ZSxcbiAgICAgIGNyZWF0b3I6IHRoaXMuY3JlYXRvcixcbiAgICAgIHN1YnNjcmlwdGlvblR5cGU6IHRoaXMuc3Vic2NyaXB0aW9uVHlwZSxcbiAgICAgIHN1YnNjcmlwdGlvblBsYXRmb3JtOiB0aGlzLnN1YnNjcmlwdGlvblBsYXRmb3JtLFxuICAgICAgcmVmZXJyZXI6IHRoaXMucmVmZXJyZXIsXG4gICAgICBpc0N1cnJlbnRseUFjdGl2ZTogdGhpcy5pc0N1cnJlbnRseUFjdGl2ZSxcbiAgICAgIHZpZGVvQ291bnQ6IHRoaXMudmlkZW9Db3VudCxcbiAgICAgIGNyZWF0ZWRBdDogZGF0ZVRvVW5peFRpbWVzdGFtcCh0aGlzLmNyZWF0ZWRBdCksXG4gICAgICB1cGRhdGVkQXQ6IGRhdGVUb1VuaXhUaW1lc3RhbXAodGhpcy51cGRhdGVkQXQpLFxuICAgIH07XG5cbiAgICByZXR1cm4gdXNlckRpY3Q7XG4gIH1cblxuICB0b1Nob3J0VXNlcigpOiBTaG9ydFVzZXIge1xuICAgIHJldHVybiBuZXcgU2hvcnRVc2VyKHtcbiAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgZGlzcGxheU5hbWU6IHRoaXMuZGlzcGxheU5hbWUsXG4gICAgICBlbWFpbDogdGhpcy5lbWFpbCwgXG4gICAgICBmY21Ub2tlbjogdGhpcy5mY21Ub2tlbixcbiAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lLFxuICAgICAgbGV2ZWw6IHRoaXMubGV2ZWwsXG4gICAgICB2aWRlb0NvdW50OiB0aGlzLnZpZGVvQ291bnQsXG4gICAgICBwcm9maWxlSW1hZ2U6IHRoaXMucHJvZmlsZUltYWdlXG4gICAgfSlcbiAgIH1cbn1cbiBcbiBleHBvcnQgaW50ZXJmYWNlIE1hY3JvUmVjb21tZW5kYXRpb25zIHtcbiAgIGNhbG9yaWVzOiBudW1iZXI7XG4gICBwcm90ZWluOiBudW1iZXI7XG4gICBjYXJiczogbnVtYmVyO1xuICAgZmF0OiBudW1iZXI7XG4gfVxuIFxuIGV4cG9ydCBlbnVtIFN1YnNjcmlwdGlvblR5cGUge1xuICAgdW5zdWJzY3JpYmVkID0gXCJVbnN1YnNjcmliZWRcIixcbiAgIGJldGEgPSBcIkJldGEgVXNlclwiLFxuICAgbW9udGhseSA9IFwiTW9udGhseSBTdWJzY3JpYmVyXCIsXG4gICBhbm51YWwgPSBcIkFubnVhbCBTdWJzY3JpYmVyXCIsXG4gICBzd2VhdEVxdWl0eVBhcnRuZXIgPSBcIlN3ZWF0IEVxdWl0eSBQYXJ0bmVyXCIsXG4gICBleGVjdXRpdmVQYXJ0bmVyID0gXCJFeGVjdXRpdmUgUGFydG5lclwiLFxuIH1cbiBcbiBleHBvcnQgZW51bSBVc2VyTGV2ZWwge1xuICAgTm92aWNlID0gXCJub3ZpY2VcIixcbiAgIEludGVybWVkaWF0ZSA9IFwiaW50ZXJtZWRpYXRlXCIsXG4gICBFeHBlcnQgPSBcImV4cGVydFwiLFxuIH1cbiBcbiBleHBvcnQgZW51bSBXb3Jrb3V0R29hbCB7XG4gICBMb3NlV2VpZ2h0ID0gXCJMb3NlIHdlaWdodFwiLFxuICAgR2FpbldlaWdodCA9IFwiR2FpbiBtdXNjbGUgbWFzc1wiLFxuICAgVG9uZVVwID0gXCJUb25lIHVwXCIsXG4gICBHZW5lcmFsRml0bmVzcyA9IFwiR2VuZXJhbCBGaXRuZXNzXCIsXG4gfVxuIFxuIGV4cG9ydCBpbnRlcmZhY2UgVXNlckhlaWdodCB7XG4gICBmZWV0OiBudW1iZXI7XG4gICBpbmNoZXM6IG51bWJlcjtcbiB9XG4gXG4gZXhwb3J0IGNsYXNzIFNob3J0VXNlciB7XG4gIGlkOiBzdHJpbmc7XG4gIGRpc3BsYXlOYW1lOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIGZjbVRva2VuPzogc3RyaW5nIHwgbnVsbDtcbiAgdXNlcm5hbWU6IHN0cmluZztcbiAgbGV2ZWw6IFVzZXJMZXZlbDtcbiAgdmlkZW9Db3VudDogbnVtYmVyO1xuICBwcm9maWxlSW1hZ2U6IFByb2ZpbGVJbWFnZTtcblxuICBjb25zdHJ1Y3RvcihkYXRhOiBhbnkpIHtcbiAgICB0aGlzLmlkID0gZGF0YS5pZCB8fCAnJztcbiAgICB0aGlzLmRpc3BsYXlOYW1lID0gZGF0YS5kaXNwbGF5TmFtZSB8fCAnJztcbiAgICB0aGlzLmVtYWlsID0gZGF0YS5lbWFpbCB8fCAnJztcbiAgICB0aGlzLmZjbVRva2VuID0gZGF0YS5mY21Ub2tlbiB8fCBudWxsO1xuICAgIHRoaXMudXNlcm5hbWUgPSBkYXRhLnVzZXJuYW1lIHx8ICcnO1xuICAgIHRoaXMubGV2ZWwgPSBkYXRhLmxldmVsIHx8IFVzZXJMZXZlbC5Ob3ZpY2U7XG4gICAgdGhpcy52aWRlb0NvdW50ID0gZGF0YS52aWRlb0NvdW50IHx8IDA7XG4gICAgdGhpcy5wcm9maWxlSW1hZ2UgPSBkYXRhLnByb2ZpbGVJbWFnZSA/IG5ldyBQcm9maWxlSW1hZ2UoZGF0YS5wcm9maWxlSW1hZ2UpIDogbmV3IFByb2ZpbGVJbWFnZSh7fSk7XG4gIH1cblxuICAvLyBTdGF0aWMgZmFjdG9yeSBtZXRob2QgdG8gY3JlYXRlIGZyb20gRmlyZXN0b3JlIGRhdGFcbiAgc3RhdGljIGZyb21GaXJlc3RvcmUoZGF0YTogYW55KTogU2hvcnRVc2VyIHtcbiAgICByZXR1cm4gbmV3IFNob3J0VXNlcihkYXRhKTtcbiAgfVxuXG4gIC8vIENvbnZlcnQgdG8gZGljdGlvbmFyeSBmb3IgRmlyZXN0b3JlXG4gIHRvRGljdGlvbmFyeSgpOiB7IFtrZXk6IHN0cmluZ106IGFueSB9IHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICBkaXNwbGF5TmFtZTogdGhpcy5kaXNwbGF5TmFtZSxcbiAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLFxuICAgICAgZmNtVG9rZW46IHRoaXMuZmNtVG9rZW4sXG4gICAgICB1c2VybmFtZTogdGhpcy51c2VybmFtZSxcbiAgICAgIGxldmVsOiB0aGlzLmxldmVsLFxuICAgICAgdmlkZW9Db3VudDogdGhpcy52aWRlb0NvdW50LFxuICAgICAgcHJvZmlsZUltYWdlOiB0aGlzLnByb2ZpbGVJbWFnZS50b0RpY3Rpb25hcnkoKVxuICAgIH07XG4gIH1cblxuICAvLyBIZWxwZXIgbWV0aG9kIHRvIGNyZWF0ZSBmcm9tIFVzZXIgb2JqZWN0XG4gIHN0YXRpYyBmcm9tVXNlcih1c2VyOiBVc2VyKTogU2hvcnRVc2VyIHtcbiAgICByZXR1cm4gbmV3IFNob3J0VXNlcih7XG4gICAgICBpZDogdXNlci5pZCxcbiAgICAgIGRpc3BsYXlOYW1lOiB1c2VyLmRpc3BsYXlOYW1lLFxuICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICBmY21Ub2tlbjogdXNlci5mY21Ub2tlbixcbiAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxuICAgICAgbGV2ZWw6IHVzZXIubGV2ZWwsXG4gICAgICB2aWRlb0NvdW50OiB1c2VyLnZpZGVvQ291bnQsXG4gICAgICBwcm9maWxlSW1hZ2U6IHVzZXIucHJvZmlsZUltYWdlXG4gICAgfSk7XG4gIH1cbn1cbiBcbiBleHBvcnQgZW51bSBHZW5kZXIge1xuICAgV29tYW4gPSBcIndvbWFuXCIsXG4gICBNYW4gPSBcIm1hblwiLFxuICAgU2VsZkRlc2NyaWJlID0gXCJJJ2QgcmF0aGVyIHNlbGYgZGVzY3JpYmVcIixcbiB9XG4gXG4gZXhwb3J0IGludGVyZmFjZSBFbmNvdXJhZ2VtZW50IHtcbiAgIGZyb21Vc2VyOiBTaG9ydFVzZXI7XG4gICB0b1VzZXI6IFNob3J0VXNlcjtcbiAgIGNyZWF0ZWRBdDogRGF0ZTtcbiB9XG4gXG4gXG4gZXhwb3J0IGludGVyZmFjZSBHeW0ge1xuICAgaWQ6IHN0cmluZztcbiAgIG5hbWU6IHN0cmluZztcbiAgIGFkZHJlc3M6IHN0cmluZztcbiAgIGxvY2F0aW9uOiB7IGxhdGl0dWRlOiBudW1iZXI7IGxvbmdpdHVkZTogbnVtYmVyIH07XG4gfVxuIFxuIGV4cG9ydCBlbnVtIFN1YnNjcmlwdGlvblBsYXRmb3JtIHtcbiAgIGlPUyA9IFwiaW9zXCIsXG4gICBXZWIgPSBcIndlYlwiLFxuICAgQW5kcm9pZCA9IFwiYW5kcm9pZFwiLFxuIH1cbiBcbiBleHBvcnQgZW51bSBTdHJpcGVPbmJvYXJkaW5nU3RhdHVzIHtcbiAgIFBhcnNlZW5kaW5nID0gJ2luY29tcGxldGUnLFxuICAgQ29tcGxldGUgPSAnY29tcGxldGUnLFxuICAgTm90U3RhcnRlZCA9ICdub3RTdGFydGVkJ1xuIH1cbiBcbiBleHBvcnQgZW51bSBDb250ZW50Q3JlYXRvclR5cGUge1xuICAgRml0bmVzc0VudGh1c2lhc3QgPSAnZml0bmVzcyBlbnRodXNpYXN0JyxcbiAgIFBlcnNvbmFsVHJhaW5lciA9ICdwZXJzb25hbCB0cmFpbmVyJyxcbiAgIEZpdG5lc3NJbmZsdWVuY2VyID0gJ2ZpdG5lc3MgaW5mbHVlbmNlcicsXG4gICBJbnRlcmVzdGVkSW5CZWNvbWluZ0FUaG91Z2h0TGVhZGVyID0gJ2ludGVyZXN0ZWQgaW4gYmVjb21pbmcgYSB0aG91Z2h0IGxlYWRlcidcbiB9XG4gXG4gZXhwb3J0IGVudW0gRml0bmVzc0NyZWF0b3JXaHkge1xuICAgU2hhcmVLbm93bGVkZ2UgPSAnc2hhcmUga25vd2xlZGdlJyxcbiAgIEJ1aWxkQUZvbGxvd2luZyA9ICdidWlsZCBhIGZvbGxvd2luZycsXG4gICBCdWlsZFBlcnNvbmFsQnJhbmQgPSAnYnVpbGQgcGVyc29uYWwgYnJhbmQnLFxuICAgRWFybkluY29tZSA9ICdlYXJuIGluY29tZSdcbiB9XG4gXG4gZXhwb3J0IGludGVyZmFjZSBCaW9tZXRyaWNEb2NTaWduYXR1cmUge1xuICAgaWQ6IHN0cmluZztcbiAgIGRldmljZUlkZW50aWZpZXI6IHN0cmluZztcbiAgIGZhY2VNYXBIYXNoOiBzdHJpbmc7XG4gICB0aW1lc3RhbXA6IERhdGU7XG4gICBkb2NUeXBlOiBzdHJpbmc7XG4gfVxuIFxuIGV4cG9ydCBjbGFzcyBDcmVhdG9yIHtcbiAgIGlkOiBzdHJpbmc7XG4gICBpbnN0YWdyYW1IYW5kbGU6IHN0cmluZztcbiAgIHR3aXR0ZXJIYW5kbGU6IHN0cmluZztcbiAgIHlvdXR1YmVVcmw6IHN0cmluZztcbiAgIHR5cGU6IENvbnRlbnRDcmVhdG9yVHlwZVtdO1xuICAgd2h5OiBGaXRuZXNzQ3JlYXRvcldoeVtdO1xuICAgb25ib2FyZGluZ1BheW91dFN0YXRlOiBzdHJpbmc7XG4gICBvbmJvYXJkaW5nRXhwaXJhdGlvbkRhdGU/OiBEYXRlO1xuICAgb25ib2FyZGluZ0xpbms/OiBzdHJpbmc7XG4gICBvbmJvYXJkaW5nU3RhdHVzOiBTdHJpcGVPbmJvYXJkaW5nU3RhdHVzO1xuICAgc3RyaXBlQWNjb3VudElkPzogc3RyaW5nO1xuICAgaXNUcmFpbmVyOiBib29sZWFuO1xuICAgZGlnaXRhbFNpZ25hdHVyZXM/OiBCaW9tZXRyaWNEb2NTaWduYXR1cmVbXTtcbiAgIGFkZGl0aW9uYWxGZWVkYmFjazogc3RyaW5nO1xuICAgYWNjZXB0R2VuZXJhbFRlcm1zOiBib29sZWFuO1xuICAgYWNjZXB0U3dlYXRFcXVpdHlQYXJ0bmVyc2hpcDogYm9vbGVhbjtcbiAgIGFjY2VwdENvZGVPZkNvbmR1Y3Q6IGJvb2xlYW47XG4gICBhY2NlcHRFeGVjdXRpdmVUZXJtczogYm9vbGVhbjtcbiAgIGNyZWF0ZWRBdDogRGF0ZTtcbiAgIHVwZGF0ZWRBdDogRGF0ZTtcblxuICAgY29uc3RydWN0b3IoZGF0YTogYW55KSB7ICAgICBcbiAgICAgdGhpcy5pZCA9IGRhdGEuaWQgfHwgJyc7XG4gICAgIHRoaXMuaW5zdGFncmFtSGFuZGxlID0gZGF0YS5pbnN0YWdyYW1IYW5kbGUgfHwgJyc7XG4gICAgIHRoaXMudHdpdHRlckhhbmRsZSA9IGRhdGEudHdpdHRlckhhbmRsZSB8fCAnJztcbiAgICAgdGhpcy55b3V0dWJlVXJsID0gZGF0YS55b3V0dWJlVXJsIHx8ICcnO1xuICAgICB0aGlzLnR5cGUgPSBBcnJheS5pc0FycmF5KGRhdGEudHlwZSkgXG4gICAgICAgPyBkYXRhLnR5cGUubWFwKCh0OiBzdHJpbmcpID0+IENvbnRlbnRDcmVhdG9yVHlwZVt0IGFzIGtleW9mIHR5cGVvZiBDb250ZW50Q3JlYXRvclR5cGVdKVxuICAgICAgIDogW107XG4gICAgIHRoaXMud2h5ID0gQXJyYXkuaXNBcnJheShkYXRhLndoeSlcbiAgICAgICA/IGRhdGEud2h5Lm1hcCgodzogc3RyaW5nKSA9PiBGaXRuZXNzQ3JlYXRvcldoeVt3IGFzIGtleW9mIHR5cGVvZiBGaXRuZXNzQ3JlYXRvcldoeV0pXG4gICAgICAgOiBbXTtcbiAgICAgdGhpcy5vbmJvYXJkaW5nUGF5b3V0U3RhdGUgPSBkYXRhLm9uYm9hcmRpbmdQYXlvdXRTdGF0ZSB8fCAnJztcbiAgICAgdGhpcy5vbmJvYXJkaW5nRXhwaXJhdGlvbkRhdGUgPSBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEub25ib2FyZGluZ0V4cGlyYXRpb25EYXRlKTtcbiAgICAgdGhpcy5vbmJvYXJkaW5nTGluayA9IGRhdGEub25ib2FyZGluZ0xpbms7XG4gICAgIHRoaXMub25ib2FyZGluZ1N0YXR1cyA9IGRhdGEub25ib2FyZGluZ1N0YXR1cyB8fCBTdHJpcGVPbmJvYXJkaW5nU3RhdHVzLk5vdFN0YXJ0ZWQ7XG4gICAgIFxuICAgICAvLyBBZGQgZXhwbGljaXQgY2hlY2sgZm9yIHN0cmlwZUFjY291bnRJZFxuICAgICB0aGlzLnN0cmlwZUFjY291bnRJZCA9IGRhdGEuc3RyaXBlQWNjb3VudElkIHx8IHVuZGVmaW5lZDtcbiAgICAgXG4gICAgIHRoaXMuaXNUcmFpbmVyID0gZGF0YS5pc1RyYWluZXIgfHwgZmFsc2U7XG4gICAgIHRoaXMuZGlnaXRhbFNpZ25hdHVyZXMgPSBkYXRhLmRpZ2l0YWxTaWduYXR1cmVzIHx8IFtdO1xuICAgICB0aGlzLmFkZGl0aW9uYWxGZWVkYmFjayA9IGRhdGEuYWRkaXRpb25hbEZlZWRiYWNrIHx8ICcnO1xuICAgICB0aGlzLmFjY2VwdEdlbmVyYWxUZXJtcyA9IGRhdGEuYWNjZXB0R2VuZXJhbFRlcm1zIHx8IGZhbHNlO1xuICAgICB0aGlzLmFjY2VwdFN3ZWF0RXF1aXR5UGFydG5lcnNoaXAgPSBkYXRhLmFjY2VwdFN3ZWF0RXF1aXR5UGFydG5lcnNoaXAgfHwgZmFsc2U7XG4gICAgIHRoaXMuYWNjZXB0Q29kZU9mQ29uZHVjdCA9IGRhdGEuYWNjZXB0Q29kZU9mQ29uZHVjdCB8fCBmYWxzZTtcbiAgICAgdGhpcy5hY2NlcHRFeGVjdXRpdmVUZXJtcyA9IGRhdGEuYWNjZXB0RXhlY3V0aXZlVGVybXMgfHwgZmFsc2U7XG4gICAgIHRoaXMuY3JlYXRlZEF0ID0gY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNyZWF0ZWRBdCkgfHwgbmV3IERhdGUoKTtcbiAgICAgdGhpcy51cGRhdGVkQXQgPSBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEudXBkYXRlZEF0KSB8fCBuZXcgRGF0ZSgpO1xuICAgICBcbiAgIH1cblxuICAgdG9EaWN0aW9uYXJ5KCk6IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICAgICByZXR1cm4ge1xuICAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgIGluc3RhZ3JhbUhhbmRsZTogdGhpcy5pbnN0YWdyYW1IYW5kbGUsXG4gICAgICAgdHdpdHRlckhhbmRsZTogdGhpcy50d2l0dGVySGFuZGxlLFxuICAgICAgIHlvdXR1YmVVcmw6IHRoaXMueW91dHViZVVybCxcbiAgICAgICB0eXBlOiB0aGlzLnR5cGUsXG4gICAgICAgd2h5OiB0aGlzLndoeSxcbiAgICAgICBvbmJvYXJkaW5nUGF5b3V0U3RhdGU6IHRoaXMub25ib2FyZGluZ1BheW91dFN0YXRlLFxuICAgICAgIG9uYm9hcmRpbmdFeHBpcmF0aW9uRGF0ZTogdGhpcy5vbmJvYXJkaW5nRXhwaXJhdGlvbkRhdGUgPyBkYXRlVG9Vbml4VGltZXN0YW1wKHRoaXMub25ib2FyZGluZ0V4cGlyYXRpb25EYXRlKSA6IG51bGwsXG4gICAgICAgb25ib2FyZGluZ0xpbms6IHRoaXMub25ib2FyZGluZ0xpbmssXG4gICAgICAgb25ib2FyZGluZ1N0YXR1czogdGhpcy5vbmJvYXJkaW5nU3RhdHVzLFxuICAgICAgIHN0cmlwZUFjY291bnRJZDogdGhpcy5zdHJpcGVBY2NvdW50SWQsXG4gICAgICAgaXNUcmFpbmVyOiB0aGlzLmlzVHJhaW5lcixcbiAgICAgICBkaWdpdGFsU2lnbmF0dXJlczogdGhpcy5kaWdpdGFsU2lnbmF0dXJlcyxcbiAgICAgICBhZGRpdGlvbmFsRmVlZGJhY2s6IHRoaXMuYWRkaXRpb25hbEZlZWRiYWNrLFxuICAgICAgIGFjY2VwdEdlbmVyYWxUZXJtczogdGhpcy5hY2NlcHRHZW5lcmFsVGVybXMsXG4gICAgICAgYWNjZXB0U3dlYXRFcXVpdHlQYXJ0bmVyc2hpcDogdGhpcy5hY2NlcHRTd2VhdEVxdWl0eVBhcnRuZXJzaGlwLFxuICAgICAgIGFjY2VwdENvZGVPZkNvbmR1Y3Q6IHRoaXMuYWNjZXB0Q29kZU9mQ29uZHVjdCxcbiAgICAgICBhY2NlcHRFeGVjdXRpdmVUZXJtczogdGhpcy5hY2NlcHRFeGVjdXRpdmVUZXJtcyxcbiAgICAgICBjcmVhdGVkQXQ6IGRhdGVUb1VuaXhUaW1lc3RhbXAodGhpcy5jcmVhdGVkQXQpLFxuICAgICAgIHVwZGF0ZWRBdDogZGF0ZVRvVW5peFRpbWVzdGFtcCh0aGlzLnVwZGF0ZWRBdClcbiAgICAgfTtcbiAgIH1cblxuICAgc3RhdGljIGZyb21EaWN0aW9uYXJ5KGRpY3Q6IFJlY29yZDxzdHJpbmcsIGFueT4gfCBudWxsKTogQ3JlYXRvciB8IG51bGwge1xuICAgICBpZiAoIWRpY3QpIHJldHVybiBudWxsO1xuICAgICByZXR1cm4gbmV3IENyZWF0b3IoZGljdCk7XG4gICB9XG4gfVxuIFxuIGV4cG9ydCBlbnVtIE9uYm9hcmRpbmdQYXlvdXRTdGF0ZSB7XG4gICBJbnRyb2R1Y3Rpb24gPSBcImludHJvZHVjdGlvblwiLFxuICAgSW5Qcm9ncmVzcyA9IFwiaW5fcHJvZ3Jlc3NcIixcbiAgIENvbXBsZXRlID0gXCJjb21wbGV0ZVwiLFxuIH1cbiBcbiBleHBvcnQgZW51bSBPbmJvYXJkaW5nU3RhdHVzIHtcbiAgIE5vdFN0YXJ0ZWQgPSBcIm5vdF9zdGFydGVkXCIsXG4gICBJblByb2dyZXNzID0gXCJpbl9wcm9ncmVzc1wiLFxuICAgQ29tcGxldGVkID0gXCJjb21wbGV0ZWRcIixcbiB9XG5cbiBleHBvcnQgY2xhc3MgQm9keVdlaWdodCB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBvbGRXZWlnaHQ6IG51bWJlcjtcbiAgICBuZXdXZWlnaHQ6IG51bWJlcjtcbiAgICBmcm9udFVybD86IHN0cmluZztcbiAgICBiYWNrVXJsPzogc3RyaW5nO1xuICAgIHNpZGVVcmw/OiBzdHJpbmc7XG4gICAgY3JlYXRlZEF0OiBEYXRlO1xuICAgIHVwZGF0ZWRBdDogRGF0ZTtcbiAgXG4gICAgY29uc3RydWN0b3IoZGF0YTogUGFydGlhbDxCb2R5V2VpZ2h0Pikge1xuICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKSAvIDEwMDA7XG4gICAgICB0aGlzLmlkID0gZGF0YS5pZCB8fCBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuICAgICAgdGhpcy5vbGRXZWlnaHQgPSBkYXRhLm9sZFdlaWdodCB8fCAwO1xuICAgICAgdGhpcy5uZXdXZWlnaHQgPSBkYXRhLm5ld1dlaWdodCB8fCAwO1xuICAgICAgdGhpcy5mcm9udFVybCA9IGRhdGEuZnJvbnRVcmwgfHwgXCJcIjtcbiAgICAgIHRoaXMuYmFja1VybCA9IGRhdGEuYmFja1VybCB8fCBcIlwiO1xuICAgICAgdGhpcy5zaWRlVXJsID0gZGF0YS5zaWRlVXJsIHx8IFwiXCI7XG4gICAgICB0aGlzLmNyZWF0ZWRBdCA9IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5jcmVhdGVkQXQpO1xuICAgICAgdGhpcy51cGRhdGVkQXQgPSBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEudXBkYXRlZEF0KTtcbiAgICB9XG4gIFxuICAgIHRvRGljdGlvbmFyeSgpOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG9sZFdlaWdodDogdGhpcy5vbGRXZWlnaHQsXG4gICAgICAgIG5ld1dlaWdodDogdGhpcy5uZXdXZWlnaHQsXG4gICAgICAgIGZyb250VXJsOiB0aGlzLmZyb250VXJsLFxuICAgICAgICBiYWNrVXJsOiB0aGlzLmJhY2tVcmwsXG4gICAgICAgIHNpZGVVcmw6IHRoaXMuc2lkZVVybCxcbiAgICAgICAgY3JlYXRlZEF0OiBkYXRlVG9Vbml4VGltZXN0YW1wKHRoaXMuY3JlYXRlZEF0KSxcbiAgICAgICAgdXBkYXRlZEF0OiBkYXRlVG9Vbml4VGltZXN0YW1wKHRoaXMudXBkYXRlZEF0KVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuLy8gQWRkIHRoaXMgY2xhc3MgZGVmaW5pdGlvblxuZXhwb3J0IGNsYXNzIFN1YnNjcmlwdGlvbiB7XG4gICAgaWQ6IHN0cmluZzsgLy8gRmlyZXN0b3JlIGRvY3VtZW50IElELCBwb3RlbnRpYWxseSBzYW1lIGFzIHN0cmlwZVN1YnNjcmlwdGlvbklkXG4gICAgdXNlcklkOiBzdHJpbmc7XG4gICAgc3Vic2NyaXB0aW9uVHlwZTogU3Vic2NyaXB0aW9uVHlwZTtcbiAgICBwbGF0Zm9ybTogU3Vic2NyaXB0aW9uUGxhdGZvcm07XG4gICAgc3RyaXBlU3Vic2NyaXB0aW9uSWQ/OiBzdHJpbmc7IC8vIFN0b3JlIHRoZSBsaW5rIHRvIFN0cmlwZSBTdWJzY3JpcHRpb25cbiAgICBzdHJpcGVDdXN0b21lcklkPzogc3RyaW5nOyAgICAgLy8gU3RvcmUgdGhlIGxpbmsgdG8gU3RyaXBlIEN1c3RvbWVyXG4gICAgY3JlYXRlZEF0OiBEYXRlO1xuICAgIHVwZGF0ZWRBdDogRGF0ZTtcblxuICAgIGNvbnN0cnVjdG9yKGlkOiBzdHJpbmcsIGRhdGE6IGFueSkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMudXNlcklkID0gZGF0YS51c2VySWQ7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uVHlwZSA9IGRhdGEuc3Vic2NyaXB0aW9uVHlwZSB8fCBTdWJzY3JpcHRpb25UeXBlLnVuc3Vic2NyaWJlZDtcbiAgICAgICAgdGhpcy5wbGF0Zm9ybSA9IGRhdGEucGxhdGZvcm0gfHwgU3Vic2NyaXB0aW9uUGxhdGZvcm0uV2ViOyAvLyBEZWZhdWx0IGNvdWxkIGJlIHdlYiBvciBiYXNlZCBvbiBjb250ZXh0XG4gICAgICAgIHRoaXMuc3RyaXBlU3Vic2NyaXB0aW9uSWQgPSBkYXRhLnN0cmlwZVN1YnNjcmlwdGlvbklkO1xuICAgICAgICB0aGlzLnN0cmlwZUN1c3RvbWVySWQgPSBkYXRhLnN0cmlwZUN1c3RvbWVySWQ7XG4gICAgICAgIHRoaXMuY3JlYXRlZEF0ID0gY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNyZWF0ZWRBdCkgfHwgbmV3IERhdGUoKTtcbiAgICAgICAgdGhpcy51cGRhdGVkQXQgPSBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEudXBkYXRlZEF0KSB8fCBuZXcgRGF0ZSgpO1xuICAgIH1cblxuICAgIHN0YXRpYyBmcm9tRGljdGlvbmFyeShkaWN0OiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgbnVsbCk6IFN1YnNjcmlwdGlvbiB8IG51bGwge1xuICAgICAgICBpZiAoIWRpY3QgfHwgIWRpY3QuaWQgfHwgIWRpY3QudXNlcklkKSByZXR1cm4gbnVsbDsgLy8gTmVlZCBpZCBhbmQgdXNlcklkXG4gICAgICAgIC8vIEFzc3VtaW5nIGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAgaGFuZGxlcyBwb3RlbnRpYWwgdGltZXN0YW1wIGZvcm1hdHMgZnJvbSBGaXJlc3RvcmVcbiAgICAgICAgY29uc3QgcHJvY2Vzc2VkRGF0YSA9IHtcbiAgICAgICAgICAgIC4uLmRpY3QsXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGljdC5jcmVhdGVkQXQpIHx8IG5ldyBEYXRlKCksXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGljdC51cGRhdGVkQXQpIHx8IG5ldyBEYXRlKCksXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBuZXcgU3Vic2NyaXB0aW9uKGRpY3QuaWQsIHByb2Nlc3NlZERhdGEpO1xuICAgIH1cblxuICAgIHRvRGljdGlvbmFyeSgpOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVzZXJJZDogdGhpcy51c2VySWQsXG4gICAgICAgICAgICBzdWJzY3JpcHRpb25UeXBlOiB0aGlzLnN1YnNjcmlwdGlvblR5cGUsXG4gICAgICAgICAgICBwbGF0Zm9ybTogdGhpcy5wbGF0Zm9ybSxcbiAgICAgICAgICAgIHN0cmlwZVN1YnNjcmlwdGlvbklkOiB0aGlzLnN0cmlwZVN1YnNjcmlwdGlvbklkLFxuICAgICAgICAgICAgc3RyaXBlQ3VzdG9tZXJJZDogdGhpcy5zdHJpcGVDdXN0b21lcklkLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBkYXRlVG9Vbml4VGltZXN0YW1wKHRoaXMuY3JlYXRlZEF0KSxcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogZGF0ZVRvVW5peFRpbWVzdGFtcCh0aGlzLnVwZGF0ZWRBdCksXG4gICAgICAgIH07XG4gICAgfVxufSJdLCJuYW1lcyI6WyJjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wIiwiZGF0ZVRvVW5peFRpbWVzdGFtcCIsIlByb2ZpbGVJbWFnZSIsImNvbnN0cnVjdG9yIiwiZGF0YSIsInByb2ZpbGVJbWFnZVVSTCIsImltYWdlT2Zmc2V0V2lkdGgiLCJpbWFnZU9mZnNldEhlaWdodCIsInRvRGljdGlvbmFyeSIsIlVzZXIiLCJpZCIsImxldmVsIiwiZGlzcGxheU5hbWUiLCJlbWFpbCIsInVzZXJuYW1lIiwiaG9tZUd5bSIsImVuY291cmFnZW1lbnQiLCJiaXJ0aGRhdGUiLCJnZW5kZXIiLCJzZWxmRGlzY2xvc2VkR2VuZGVyIiwiaGVpZ2h0IiwibG9jYXRpb24iLCJiaW8iLCJmY21Ub2tlbiIsIndvcmtvdXRCdWRkeSIsIndvcmtvdXRCdWRkeVVzZXIiLCJhZGRpdGlvbmFsR29hbHMiLCJibG9ja2VkVXNlcnMiLCJnb2FsIiwiYm9keVdlaWdodCIsIkFycmF5IiwiaXNBcnJheSIsIm1hcCIsIndlaWdodCIsIkJvZHlXZWlnaHQiLCJtYWNyb3MiLCJwcm9maWxlSW1hZ2UiLCJyZWdpc3RyYXRpb25Db21wbGV0ZSIsImNyZWF0b3IiLCJDcmVhdG9yIiwic3Vic2NyaXB0aW9uVHlwZSIsInN1YnNjcmlwdGlvblBsYXRmb3JtIiwicmVmZXJyZXIiLCJpc0N1cnJlbnRseUFjdGl2ZSIsInZpZGVvQ291bnQiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJmcm9tRGljdGlvbmFyeSIsImRpY3QiLCJwcm9jZXNzZWREYXRhIiwiRGF0ZSIsInVzZXJEaWN0IiwiYnciLCJ0b1Nob3J0VXNlciIsIlNob3J0VXNlciIsIlN1YnNjcmlwdGlvblR5cGUiLCJVc2VyTGV2ZWwiLCJXb3Jrb3V0R29hbCIsImZyb21GaXJlc3RvcmUiLCJmcm9tVXNlciIsInVzZXIiLCJHZW5kZXIiLCJTdWJzY3JpcHRpb25QbGF0Zm9ybSIsIlN0cmlwZU9uYm9hcmRpbmdTdGF0dXMiLCJDb250ZW50Q3JlYXRvclR5cGUiLCJGaXRuZXNzQ3JlYXRvcldoeSIsImluc3RhZ3JhbUhhbmRsZSIsInR3aXR0ZXJIYW5kbGUiLCJ5b3V0dWJlVXJsIiwidHlwZSIsInQiLCJ3aHkiLCJ3Iiwib25ib2FyZGluZ1BheW91dFN0YXRlIiwib25ib2FyZGluZ0V4cGlyYXRpb25EYXRlIiwib25ib2FyZGluZ0xpbmsiLCJvbmJvYXJkaW5nU3RhdHVzIiwic3RyaXBlQWNjb3VudElkIiwidW5kZWZpbmVkIiwiaXNUcmFpbmVyIiwiZGlnaXRhbFNpZ25hdHVyZXMiLCJhZGRpdGlvbmFsRmVlZGJhY2siLCJhY2NlcHRHZW5lcmFsVGVybXMiLCJhY2NlcHRTd2VhdEVxdWl0eVBhcnRuZXJzaGlwIiwiYWNjZXB0Q29kZU9mQ29uZHVjdCIsImFjY2VwdEV4ZWN1dGl2ZVRlcm1zIiwiT25ib2FyZGluZ1BheW91dFN0YXRlIiwiT25ib2FyZGluZ1N0YXR1cyIsIm5vdyIsImNyeXB0byIsInJhbmRvbVVVSUQiLCJvbGRXZWlnaHQiLCJuZXdXZWlnaHQiLCJmcm9udFVybCIsImJhY2tVcmwiLCJzaWRlVXJsIiwiU3Vic2NyaXB0aW9uIiwidXNlcklkIiwicGxhdGZvcm0iLCJzdHJpcGVTdWJzY3JpcHRpb25JZCIsInN0cmlwZUN1c3RvbWVySWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/api/firebase/user/types.ts\n");

/***/ }),

/***/ "./src/api/firebase/workout/index.ts":
/*!*******************************************!*\
  !*** ./src/api/firebase/workout/index.ts ***!
  \*******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   workoutService: () => (/* reexport safe */ _service__WEBPACK_IMPORTED_MODULE_0__.workoutService)\n/* harmony export */ });\n/* harmony import */ var _service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./service */ \"./src/api/firebase/workout/service.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types */ \"./src/api/firebase/workout/types.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_service__WEBPACK_IMPORTED_MODULE_0__, _types__WEBPACK_IMPORTED_MODULE_1__]);\n([_service__WEBPACK_IMPORTED_MODULE_0__, _types__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _types__WEBPACK_IMPORTED_MODULE_1__) if([\"default\",\"workoutService\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _types__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n// src/api/firebase/workout/index.ts\n\n// If you want to export the singleton instance\n// Or if you want to export the class (if you prefer constructing a new instance):\n// export { WorkoutService } from './WorkoutService';\n // Re-export all the domain types from `types.ts`\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL2ZpcmViYXNlL3dvcmtvdXQvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsb0NBQW9DO0FBRU87QUFDM0MsK0NBQStDO0FBRS9DLGtGQUFrRjtBQUNsRixxREFBcUQ7QUFFN0IsQ0FDeEIsaURBQWlEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktYXBwLy4vc3JjL2FwaS9maXJlYmFzZS93b3Jrb3V0L2luZGV4LnRzP2Q2NmUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2FwaS9maXJlYmFzZS93b3Jrb3V0L2luZGV4LnRzXG5cbmV4cG9ydCB7IHdvcmtvdXRTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlJzsgXG4vLyBJZiB5b3Ugd2FudCB0byBleHBvcnQgdGhlIHNpbmdsZXRvbiBpbnN0YW5jZVxuXG4vLyBPciBpZiB5b3Ugd2FudCB0byBleHBvcnQgdGhlIGNsYXNzIChpZiB5b3UgcHJlZmVyIGNvbnN0cnVjdGluZyBhIG5ldyBpbnN0YW5jZSk6XG4vLyBleHBvcnQgeyBXb3Jrb3V0U2VydmljZSB9IGZyb20gJy4vV29ya291dFNlcnZpY2UnO1xuXG5leHBvcnQgKiBmcm9tICcuL3R5cGVzJzsgXG4vLyBSZS1leHBvcnQgYWxsIHRoZSBkb21haW4gdHlwZXMgZnJvbSBgdHlwZXMudHNgIl0sIm5hbWVzIjpbIndvcmtvdXRTZXJ2aWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/api/firebase/workout/index.ts\n");

/***/ }),

/***/ "./src/api/firebase/workout/service.ts":
/*!*********************************************!*\
  !*** ./src/api/firebase/workout/service.ts ***!
  \*********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   workoutService: () => (/* binding */ workoutService)\n/* harmony export */ });\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config */ \"./src/api/firebase/config.ts\");\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../user */ \"./src/api/firebase/user/index.ts\");\n/* harmony import */ var _exercise_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../exercise/types */ \"./src/api/firebase/exercise/types.ts\");\n/* harmony import */ var _exercise_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../exercise/service */ \"./src/api/firebase/exercise/service.ts\");\n/* harmony import */ var _user_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../user/types */ \"./src/api/firebase/user/types.ts\");\n/* harmony import */ var _workout_types__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../api/firebase/workout/types */ \"./src/api/firebase/workout/types.ts\");\n/* harmony import */ var _barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! __barrel_optimize__?names=format!=!date-fns */ \"__barrel_optimize__?names=format!=!./node_modules/date-fns/index.js\");\n/* harmony import */ var _utils_timestamp__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../utils/timestamp */ \"./src/utils/timestamp.ts\");\n/* harmony import */ var _utils_formatDate__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../utils/formatDate */ \"./src/utils/formatDate.ts\");\n/* harmony import */ var _redux_store__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../redux/store */ \"./src/redux/store.ts\");\n/* harmony import */ var _redux_workoutSlice__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../redux/workoutSlice */ \"./src/redux/workoutSlice.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _config__WEBPACK_IMPORTED_MODULE_1__, _user__WEBPACK_IMPORTED_MODULE_2__, _exercise_types__WEBPACK_IMPORTED_MODULE_3__, _exercise_service__WEBPACK_IMPORTED_MODULE_4__, _workout_types__WEBPACK_IMPORTED_MODULE_6__, _redux_store__WEBPACK_IMPORTED_MODULE_9__, _redux_workoutSlice__WEBPACK_IMPORTED_MODULE_10__]);\n([firebase_firestore__WEBPACK_IMPORTED_MODULE_0__, _config__WEBPACK_IMPORTED_MODULE_1__, _user__WEBPACK_IMPORTED_MODULE_2__, _exercise_types__WEBPACK_IMPORTED_MODULE_3__, _exercise_service__WEBPACK_IMPORTED_MODULE_4__, _workout_types__WEBPACK_IMPORTED_MODULE_6__, _redux_store__WEBPACK_IMPORTED_MODULE_9__, _redux_workoutSlice__WEBPACK_IMPORTED_MODULE_10__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// src/api/firebase/workout/service.ts\n\n\n\n\n\n\n\n\n\n // Adjust the import path\n\n\n\n\n\nclass WorkoutService {\n    // Replace getters/setters to use Redux\n    get currentWorkout() {\n        const workoutData = _redux_store__WEBPACK_IMPORTED_MODULE_9__.store.getState().workout.currentWorkout;\n        return workoutData ? new _workout_types__WEBPACK_IMPORTED_MODULE_6__.Workout(workoutData) : null;\n    }\n    set currentWorkout(workout) {\n        _redux_store__WEBPACK_IMPORTED_MODULE_9__.store.dispatch((0,_redux_workoutSlice__WEBPACK_IMPORTED_MODULE_10__.setCurrentWorkout)(workout));\n    }\n    get currentWorkoutLogs() {\n        const logsData = _redux_store__WEBPACK_IMPORTED_MODULE_9__.store.getState().workout.currentExerciseLogs;\n        return logsData.map((log)=>new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseLog(log));\n    }\n    set currentWorkoutLogs(logs) {\n        _redux_store__WEBPACK_IMPORTED_MODULE_9__.store.dispatch((0,_redux_workoutSlice__WEBPACK_IMPORTED_MODULE_10__.setCurrentExerciseLogs)(logs));\n    }\n    get currentWorkoutSummary() {\n        const summaryData = _redux_store__WEBPACK_IMPORTED_MODULE_9__.store.getState().workout.workoutSummary;\n        return summaryData ? new _workout_types__WEBPACK_IMPORTED_MODULE_6__.WorkoutSummary(summaryData) : null;\n    }\n    set currentWorkoutSummary(workoutSummary) {\n        _redux_store__WEBPACK_IMPORTED_MODULE_9__.store.dispatch((0,_redux_workoutSlice__WEBPACK_IMPORTED_MODULE_10__.setWorkoutSummary)(workoutSummary));\n    }\n    generateId() {\n        return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"workouts\")).id;\n    }\n    async fetchWorkoutSummary(userId, workoutId, summaryId) {\n        try {\n            console.log(\"Fetching workout summary:\", {\n                userId,\n                workoutId,\n                summaryId\n            });\n            // Assuming summaries are stored in a 'workoutSummaries' collection\n            const summaryRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSummary\", summaryId);\n            const summaryDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(summaryRef);\n            if (!summaryDoc.exists()) {\n                console.log(\"Summary document not found\");\n                return null;\n            }\n            const summaryData = summaryDoc.data();\n            console.log(\"Found summary data:\", summaryData);\n            return new _workout_types__WEBPACK_IMPORTED_MODULE_6__.WorkoutSummary(summaryData);\n        } catch (error) {\n            console.error(\"Error fetching workout summary:\", error);\n            return null;\n        }\n    }\n    // Update the formatWorkoutAndInitializeLogs function\n    async formatWorkoutAndInitializeLogs(exerciseDetails, workoutAuthor) {\n        const workId = this.generateId(); // Use this.generateId() since it's a class method\n        const exerciseReferences = [];\n        const exerciseLogs = [];\n        console.log(\"Exercise details passed in:\", exerciseDetails);\n        // Ensure exercise details are valid before processing\n        const validExerciseDetails = exerciseDetails.filter((detail)=>detail?.exercise && detail.exercise.id);\n        validExerciseDetails.forEach((detail, index)=>{\n            if (detail.exercise.id == null) {\n                return;\n            }\n            console.log(\"Detail being used:\", detail);\n            // Create the category first\n            const category = {\n                type: detail.category?.type === \"weight-training\" ? \"weight-training\" : \"cardio\",\n                details: detail.category?.type === \"weight-training\" ? {\n                    sets: detail.category?.details?.sets ?? 3,\n                    reps: detail.category?.details?.reps ?? [\n                        \"12\"\n                    ],\n                    weight: detail.category?.details?.weight ?? 0,\n                    screenTime: detail.category?.details?.screenTime ?? 0,\n                    selectedVideo: detail.category?.details?.selectedVideo ?? null\n                } : {\n                    duration: detail.category?.details?.duration ?? 60,\n                    bpm: detail.category?.details?.bpm ?? 140,\n                    calories: detail.category?.details?.calories ?? 0,\n                    screenTime: detail.category?.details?.screenTime ?? 0,\n                    selectedVideo: detail.category?.details?.selectedVideo ?? null\n                }\n            };\n            console.log(\"Category being used:\", category); // Debug log\n            // Create exercise instance with our new category\n            const exerciseInstance = {\n                ...detail.exercise,\n                category: category.type === \"weight-training\" ? _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseCategory.weightTraining({\n                    sets: category.details?.sets ?? 3,\n                    reps: category.details?.reps ?? [\n                        \"12\"\n                    ],\n                    weight: category.details?.weight ?? 0,\n                    screenTime: category.details?.screenTime ?? 0,\n                    selectedVideo: category.details?.selectedVideo ?? null\n                }) : _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseCategory.cardio({\n                    duration: category.details?.duration ?? 60,\n                    bpm: category.details?.bpm ?? 140,\n                    calories: category.details?.calories ?? 0,\n                    screenTime: category.details?.screenTime ?? 0,\n                    selectedVideo: category.details?.selectedVideo ?? null\n                })\n            };\n            console.log(\"Exercise instance being used:\", exerciseInstance);\n            var exerciseInstanceClass = new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise(exerciseInstance);\n            console.log(\"Exercise instance Object being used:\", exerciseInstanceClass);\n            // Create exercise reference using the constructor\n            const exerciseRef = new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseReference({\n                exercise: exerciseInstanceClass,\n                groupId: detail.groupId || 0\n            });\n            exerciseReferences.push(exerciseRef);\n            // Create logs using the same category details\n            const sets = category.details?.sets ?? 3;\n            const reps = category.details?.reps ?? [\n                \"12\"\n            ];\n            const weight = category.details?.weight ?? 0;\n            // Create logs for each set with validated data\n            const setsLogs = Array.from({\n                length: sets\n            }, ()=>new _workout_types__WEBPACK_IMPORTED_MODULE_6__.RepsAndWeightLog({\n                    reps: parseInt(reps[0] || \"12\", 10),\n                    weight: weight || 0\n                }));\n            // Create exercise log with validated data\n            const exerciseLogId = _exercise_service__WEBPACK_IMPORTED_MODULE_4__.exerciseService.generateExerciseLogID(workId, _user__WEBPACK_IMPORTED_MODULE_2__.userService.nonUICurrentUser?.id || \"anonymous\");\n            const log = new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseLog({\n                id: exerciseLogId,\n                workoutId: workId,\n                userId: _user__WEBPACK_IMPORTED_MODULE_2__.userService.nonUICurrentUser?.id || \"anonymous\",\n                exercise: exerciseInstance,\n                logs: setsLogs,\n                feedback: \"\",\n                note: detail.notes || \"\",\n                isSplit: detail.isSplit || false,\n                logSubmitted: false,\n                logIsEditing: false,\n                isCompleted: false,\n                order: index + 1,\n                createdAt: new Date(),\n                updatedAt: new Date(),\n                completedAt: new Date()\n            });\n            exerciseLogs.push(log);\n        });\n        // Create workout with validated data\n        const newWorkout = new _workout_types__WEBPACK_IMPORTED_MODULE_6__.Workout({\n            id: workId,\n            roundWorkoutId: \"\",\n            exercises: exerciseReferences,\n            logs: exerciseLogs,\n            title: \"\",\n            description: \"\",\n            duration: 0,\n            workoutRating: \"none\",\n            useAuthorContent: false,\n            isCompleted: false,\n            workoutStatus: \"archived\",\n            author: _user__WEBPACK_IMPORTED_MODULE_2__.userService.nonUICurrentUser?.id || \"PulseAI\",\n            createdAt: new Date(),\n            updatedAt: new Date(),\n            zone: _workout_types__WEBPACK_IMPORTED_MODULE_6__.Workout.determineWorkoutZone(exerciseReferences) || \"full\"\n        });\n        return {\n            workout: newWorkout,\n            exerciseLogs\n        };\n    }\n    // Add this function to your WorkoutService class\n    /**\n * Fetches random trending stack workouts with their videos.\n * Adapts the iOS implementation for web.\n * @returns {Promise<Workout[]>} Array of workout objects with videos\n */ async fetchRandomTrendingStacks() {\n        try {\n            // First, let's get all available stacks from the 'stacks' collection\n            const stacksRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"stacks\");\n            const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(stacksRef);\n            if (snapshot.empty) {\n                console.log(\"No stacks found.\");\n                return [];\n            }\n            // Get all documents and shuffle them\n            const documents = snapshot.docs;\n            const shuffledDocs = [\n                ...documents\n            ].sort(()=>0.5 - Math.random());\n            // Take up to 10 random stacks\n            const randomStacks = shuffledDocs.slice(0, 10).map((doc)=>{\n                return new _workout_types__WEBPACK_IMPORTED_MODULE_6__.Workout({\n                    id: doc.id,\n                    ...doc.data()\n                });\n            });\n            // Fetch videos for each workout\n            const workoutsWithVideos = await Promise.all(randomStacks.map(async (workout)=>{\n                try {\n                    return await this.fetchVideosForWorkout(workout);\n                } catch (error) {\n                    console.error(`Error fetching videos for workout ${workout.id}:`, error);\n                    return workout; // Return the workout without videos if there's an error\n                }\n            }));\n            return workoutsWithVideos;\n        } catch (error) {\n            console.error(\"Error fetching random trending stacks:\", error);\n            throw error;\n        }\n    }\n    /**\n * Fetches active rounds/challenges that are currently live.\n * Adapts the iOS implementation for web.\n * @returns {Promise<SweatlistCollection[]>} Array of live round collections\n */ async fetchLiveRounds() {\n        try {\n            const now = new Date();\n            // Create a query for published challenges that are currently active\n            const collectionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\");\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(collectionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"challenge.status\", \"==\", \"published\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"challenge.endDate\", \">\", now), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"challenge.startDate\", \"<\", now), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"challenge.startDate\", \"desc\"));\n            const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            // Filter and map the collections\n            const collections = snapshot.docs.map((doc)=>{\n                return new _workout_types__WEBPACK_IMPORTED_MODULE_6__.SweatlistCollection({\n                    id: doc.id,\n                    ...doc.data()\n                });\n            }).filter((collection)=>{\n                // Check if ownerId is not empty and cohortAuthor is not nil\n                const cohortAuthor = collection.challenge?.cohortAuthor;\n                return cohortAuthor && Array.isArray(collection.ownerId) && collection.ownerId.length > 0 && collection.ownerId.some((id)=>collection.challenge?.cohortAuthor.includes(id));\n            });\n            // Limit to 10 collections\n            return collections.slice(0, 10);\n        } catch (error) {\n            console.error(\"Error fetching live rounds:\", error);\n            return [];\n        }\n    }\n    /**\n * Fetches videos for a workout's exercises\n * @param {Workout} workout - The workout to fetch videos for\n * @returns {Promise<Workout>} - The workout with videos added to its exercises\n */ async fetchVideosForWorkout(workout) {\n        // Get all exercises with videos\n        const exercisesWithVideos = await this.fetchAndMapExercisesWithVideos();\n        // Map the exercises in the workout to include videos\n        const updatedExercises = workout.exercises.map((exerciseRef)=>{\n            const exerciseName = exerciseRef.exercise?.name?.toLowerCase().trim();\n            const matchingExercise = exercisesWithVideos.find((ex)=>ex.name.toLowerCase().trim() === exerciseName);\n            if (matchingExercise) {\n                return {\n                    ...exerciseRef,\n                    exercise: new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise({\n                        ...exerciseRef.exercise,\n                        videos: matchingExercise.videos || []\n                    })\n                };\n            }\n            return exerciseRef;\n        });\n        // Create a new workout with the updated exercises\n        return new _workout_types__WEBPACK_IMPORTED_MODULE_6__.Workout({\n            ...workout,\n            exercises: updatedExercises\n        });\n    }\n    // You may need to add a fallback method if 'stacks' collection doesn't exist:\n    async fetchRandomTrendingStacksFallback() {\n        try {\n            // If 'stacks' collection doesn't exist, we can fetch from user workouts as fallback\n            if (!_user__WEBPACK_IMPORTED_MODULE_2__.userService.nonUICurrentUser?.id) {\n                return [];\n            }\n            const workouts = await this.getAllSweatlists(_user__WEBPACK_IMPORTED_MODULE_2__.userService.nonUICurrentUser.id);\n            // Shuffle and take up to 10\n            const shuffledWorkouts = [\n                ...workouts\n            ].sort(()=>0.5 - Math.random()).slice(0, 10);\n            return shuffledWorkouts;\n        } catch (error) {\n            console.error(\"Error in fetchRandomTrendingStacksFallback:\", error);\n            return [];\n        }\n    }\n    async getUserById(userId) {\n        try {\n            const userDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId));\n            if (!userDoc.exists()) {\n                throw new Error(\"User not found\");\n            }\n            return new _user_types__WEBPACK_IMPORTED_MODULE_5__.User(userDoc.id, {\n                id: userDoc.id,\n                ...userDoc.data()\n            });\n        } catch (error) {\n            console.error(\"Error getting user by ID:\", error);\n            throw error;\n        }\n    }\n    // In WorkoutService\n    async revertAuthorFormat(workoutId, authorId) {\n        if (!_user__WEBPACK_IMPORTED_MODULE_2__.userService.nonUICurrentUser?.id) throw new Error(\"No user signed in\");\n        const workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", _user__WEBPACK_IMPORTED_MODULE_2__.userService.nonUICurrentUser.id, \"MyCreatedWorkouts\", workoutId);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(workoutRef, {\n            author: authorId\n        });\n    }\n    async updateWorkout(workout) {\n        if (!_user__WEBPACK_IMPORTED_MODULE_2__.userService.nonUICurrentUser?.id) {\n            throw new Error(\"No user is signed in\");\n        }\n        try {\n            const workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", _user__WEBPACK_IMPORTED_MODULE_2__.userService.nonUICurrentUser.id, \"MyCreatedWorkouts\", workout.id);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(workoutRef, workout.toDictionary(), {\n                merge: true\n            });\n            // Update logs if they exist\n            if (workout.logs && workout.logs.length > 0) {\n                const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n                const logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\");\n                workout.logs.forEach((log)=>{\n                    const logRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(logsRef, log.id);\n                    batch.set(logRef, log.toDictionary(), {\n                        merge: true\n                    });\n                });\n                await batch.commit();\n            }\n        } catch (error) {\n            console.error(\"Error updating workout:\", error);\n            throw error;\n        }\n    }\n    /**\n   * Fetch the user's current workout (either QueuedUp or InProgress).\n   */ async fetchCurrentWorkout(userId) {\n        const session = await this.fetchCurrentWorkoutSession(userId);\n        return session.workout;\n    }\n    async getAllSweatlists(userId) {\n        if (!userId) {\n            throw new Error(\"User ID is required\");\n        }\n        // Reference to the user's workout collection\n        const workoutsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\");\n        try {\n            // Fetch exercises with videos\n            const exercisesWithVideos = await this.fetchAndMapExercisesWithVideos();\n            // Query to fetch all workouts\n            const workoutsSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(workoutsRef);\n            const workouts = [];\n            // Process each workout document\n            for (const workoutDoc of workoutsSnapshot.docs){\n                const workoutData = workoutDoc.data();\n                const workoutId = workoutDoc.id;\n                // Map the exercises in the workout to the full exercise objects with videos\n                const mappedExercises = (workoutData.exercises || []).map((exerciseRef)=>{\n                    const fullExercise = exercisesWithVideos.find((ex)=>ex.name === exerciseRef.exercise.name);\n                    return {\n                        ...exerciseRef,\n                        exercise: fullExercise || exerciseRef\n                    };\n                });\n                // Parse workout data into the desired structure\n                const workout = new _workout_types__WEBPACK_IMPORTED_MODULE_6__.Workout({\n                    id: workoutData.id || \"\",\n                    roundWorkoutId: workoutData.roundWorkoutId || \"\",\n                    collectionId: workoutData.collectionId,\n                    exercises: mappedExercises,\n                    challenge: workoutData.challenge,\n                    logs: [],\n                    title: workoutData.title || \"\",\n                    description: workoutData.description || \"\",\n                    duration: workoutData.duration || 0,\n                    workoutRating: workoutData.workoutRating,\n                    useAuthorContent: workoutData.useAuthorContent || false,\n                    isCompleted: workoutData.isCompleted || false,\n                    workoutStatus: workoutData.workoutStatus || \"notStarted\",\n                    startTime: workoutData.startTime ? new Date(workoutData.startTime) : undefined,\n                    order: workoutData.order,\n                    author: workoutData.author || userId,\n                    createdAt: workoutData.createdAt ? new Date(workoutData.createdAt) : new Date(),\n                    updatedAt: workoutData.updatedAt ? new Date(workoutData.updatedAt) : new Date(),\n                    zone: workoutData.zone || \"FULL_BODY\"\n                });\n                // Fetch and process logs\n                const logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\", workoutId, \"logs\");\n                const logsSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef);\n                workout.logs = logsSnapshot.docs.map((logDoc)=>({\n                        ...logDoc.data(),\n                        id: logDoc.id\n                    }));\n                workouts.push(workout);\n            }\n            return workouts;\n        } catch (error) {\n            const firestoreError = error;\n            console.error(\"Error fetching sweatlists:\", firestoreError.message);\n            throw new Error(\"Failed to fetch sweatlists\");\n        }\n    }\n    async getUserChallengesByChallengeId(challengeId) {\n        const userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"challengeId\", \"==\", challengeId));\n        try {\n            const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            const userChallenges = snapshot.docs.map((doc)=>{\n                const data = doc.data();\n                return new _workout_types__WEBPACK_IMPORTED_MODULE_6__.UserChallenge(data);\n            });\n            if (userChallenges.length > 0) {\n                return {\n                    userChallenges\n                };\n            } else {\n                return {\n                    userChallenges: [],\n                    error: \"No user challenges found for this challenge.\"\n                };\n            }\n        } catch (error) {\n            console.error(\"Error fetching user challenges by challengeId:\", error);\n            return {\n                userChallenges: [],\n                error: error instanceof Error ? error.message : \"Unknown error\"\n            };\n        }\n    }\n    /**\n   * Fetches workout summaries for a specific date.\n   * @param date - The date for which workout summaries are being fetched.\n   * @returns A promise resolving to an array of workout summaries.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ async fetchWorkoutSummaries(date) {\n        const currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.nonUICurrentUser;\n        if (!currentUser?.id) {\n            throw new Error(\"No user is signed in\");\n        }\n        // Format the date to match the format in Firestore ('MM-dd-yyyy')\n        const formattedDate = (0,_barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_11__.format)(date, \"MM-dd-yyyy\");\n        // Reference to the user's workoutSummaries subcollection\n        const summariesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", currentUser.id, \"workoutSummaries\");\n        // Create a query to filter documents by the specified date\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(summariesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"date\", \"==\", formattedDate));\n        try {\n            const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            // Map the documents to an array of WorkoutSummary objects\n            return snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n        } catch (error) {\n            const firestoreError = error;\n            console.error(\"Error fetching workout summaries:\", firestoreError.message);\n            throw new Error(firestoreError.message);\n        }\n    }\n    async fetchAllWorkoutSummaries() {\n        const currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.nonUICurrentUser;\n        if (!currentUser?.id) {\n            throw new Error(\"No user is signed in\");\n        }\n        // Reference to the user's workoutSummaries subcollection\n        const summariesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", currentUser.id, \"workoutSummary\");\n        // Query to retrieve all workout summaries, sorted by `createdAt` in ascending order\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(summariesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"asc\")); // Adjust field name based on your schema\n        try {\n            const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            // Map the documents to an array of WorkoutSummary objects\n            return snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n        } catch (error) {\n            const firestoreError = error;\n            console.error(\"Error fetching all workout summaries:\", firestoreError.message);\n            throw new Error(firestoreError.message);\n        }\n    }\n    /**\n * Fetch user challenges by userId.\n * @param userId The ID of the user to fetch challenges for.\n * @returns A promise resolving to an array of user challenges.\n * @throws If the Firestore query fails.\n */ async fetchUserChallengesByUserId(userId) {\n        const userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", userId));\n        try {\n            // console.log(`Fetching challenges for user ID: ${userId}`);\n            const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            // console.log(`Total challenges fetched: ${snapshot.docs.length}`);\n            const userChallenges = snapshot.docs.map((doc)=>{\n                const data = doc.data();\n                // console.log(`Processing challenge with ID: ${doc.id}`, data);\n                return {\n                    id: doc.id,\n                    ...data,\n                    challenge: data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_6__.Challenge({\n                        id: data.challenge.id,\n                        title: data.challenge.title,\n                        subtitle: data.challenge.subtitle,\n                        participants: data.challenge.participants || [],\n                        status: data.challenge.status,\n                        startDate: data.challenge.startDate ? new Date(data.challenge.startDate) : new Date(),\n                        endDate: data.challenge.endDate ? new Date(data.challenge.endDate) : new Date(),\n                        createdAt: data.challenge.createdAt ? new Date(data.challenge.createdAt) : new Date(),\n                        updatedAt: data.challenge.updatedAt ? new Date(data.challenge.updatedAt) : new Date(),\n                        introVideos: data.challenge.introVideos || [],\n                        ownerId: data.challenge.ownerId || []\n                    }) : undefined,\n                    createdAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_7__.convertTimestamp)(data.createdAt),\n                    updatedAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_7__.convertTimestamp)(data.updatedAt)\n                };\n            });\n            // console.log('All challenges after processing:', JSON.stringify(userChallenges, null, 2));\n            return userChallenges;\n        } catch (error) {\n            console.error(\"Error fetching user challenges by userId:\", error);\n            throw error;\n        }\n    }\n    async fetchCollectionWithSweatLists(collectionId) {\n        try {\n            // Fetch the collection\n            const collection = await this.getCollectionById(collectionId);\n            // Fetch sweat lists (workouts)\n            const sweatLists = [];\n            // Assuming collection has sweatlistIds with author and workout IDs\n            for (const sweatlistIdentifier of collection.sweatlistIds || []){\n                try {\n                    const [workout] = await this.fetchSavedWorkout(sweatlistIdentifier.sweatlistAuthorId, sweatlistIdentifier.id);\n                    if (workout) {\n                        sweatLists.push(workout);\n                    }\n                } catch (error) {\n                    console.error(`Error fetching workout ${sweatlistIdentifier.id}:`, error);\n                }\n            }\n            return {\n                collection,\n                sweatLists\n            };\n        } catch (error) {\n            console.error(\"Error fetching collection with sweat lists:\", error);\n            throw error;\n        }\n    }\n    async fetchSavedWorkout(userId, workoutId) {\n        try {\n            const workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"MyCreatedWorkouts\", workoutId);\n            const workoutSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(workoutRef);\n            if (!workoutSnap.exists()) {\n                return [\n                    null,\n                    null\n                ];\n            }\n            const workoutData = workoutSnap.data();\n            console.log(\"1. Raw workout data from DB:\", JSON.stringify({\n                exercises: workoutData.exercises?.map((ex)=>({\n                        name: ex.exercise.name,\n                        category: ex.exercise.category\n                    }))\n            }, null, 2));\n            const exercisesWithVideos = await this.fetchAndMapExercisesWithVideos();\n            // Map the exercises while preserving original data\n            const mappedExercises = (workoutData.exercises || []).map((exerciseRef)=>{\n                // Find matching exercise just for its videos\n                const exerciseNameLower = exerciseRef.exercise?.name?.toLowerCase().trim();\n                const matchingExercise = exercisesWithVideos.find((ex)=>ex.name.toLowerCase().trim() === exerciseNameLower);\n                // Create new Exercise using original data but add videos from matching exercise\n                return {\n                    ...exerciseRef,\n                    exercise: new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise({\n                        ...exerciseRef.exercise,\n                        videos: matchingExercise?.videos || [],\n                        // Explicitly preserve the original category\n                        category: exerciseRef.exercise.category\n                    })\n                };\n            });\n            workoutData.exercises = mappedExercises;\n            const workout = new _workout_types__WEBPACK_IMPORTED_MODULE_6__.Workout({\n                id: workoutId,\n                ...workoutData\n            });\n            // Similarly for logs, preserve original exercise data\n            const logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\");\n            const logsSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef);\n            const logs = logsSnapshot.docs.map((logDoc)=>{\n                const logData = logDoc.data();\n                const matchingExercise = exercisesWithVideos.find((ex)=>ex.name === logData.exercise.name);\n                console.log(\"Raw logData:\", logData, null, 2);\n                var exerciseWithVideo = new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise({\n                    ...logData.exercise,\n                    videos: matchingExercise?.videos || []\n                });\n                console.log(\"Exercise with video:\", exerciseWithVideo, null, 2);\n                var exLog = new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseLog({\n                    id: logDoc.id,\n                    workoutId: workoutId,\n                    userId: userId,\n                    exercise: exerciseWithVideo,\n                    logs: logData.logs || [],\n                    feedback: logData.feedback || \"\",\n                    note: logData.note || \"\",\n                    recommendedWeight: logData.recommendedWeight || \"calculating...\",\n                    isSplit: logData.isSplit || false,\n                    isBodyWeight: logData.isBodyWeight || false,\n                    logSubmitted: logData.logSubmitted || false,\n                    logIsEditing: logData.logIsEditing || false,\n                    isCompleted: logData.isCompleted || false,\n                    order: logData.order || null,\n                    completedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(logData.completedAt),\n                    createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(logData.createdAt),\n                    updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(logData.updatedAt)\n                });\n                console.log(\"Exercise log:\", exLog, null, 2);\n                return exLog;\n            });\n            workout.logs = logs;\n            return [\n                workout,\n                logs\n            ];\n        } catch (error) {\n            console.error(\"Error fetching saved workout:\", error);\n            throw error;\n        }\n    }\n    /**\n * Fetch user challenges by challengeId.\n * @param challengeId The ID of the challenge to fetch associated user challenges for.\n * @returns A promise resolving to an array of user challenges.\n * @throws If the Firestore query fails.\n */ async fetchUserChallengesByChallengeId(challengeId) {\n        const userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"challengeId\", \"==\", challengeId));\n        try {\n            // console.log(`Fetching user challenges for challenge ID: ${challengeId}`);\n            const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            // console.log(`Total user challenges fetched: ${snapshot.docs.length}`);\n            const userChallenges = snapshot.docs.map((doc)=>{\n                const data = doc.data();\n                // console.log(`Processing user challenge with ID: ${doc.id}`, data);\n                // --- Instantiate UserChallenge here --- \n                return new _workout_types__WEBPACK_IMPORTED_MODULE_6__.UserChallenge({\n                    id: doc.id,\n                    ...data\n                });\n            // --- End Instantiation ---\n            });\n            console.log(\"All user challenges after processing:\", JSON.stringify(userChallenges, null, 2));\n            return userChallenges;\n        } catch (error) {\n            console.error(\"Error fetching user challenges by challengeId:\", error);\n            throw error;\n        }\n    }\n    async getCollectionById(id) {\n        console.log(\"Fetching collection with id:\", id);\n        try {\n            const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\", id);\n            const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef);\n            if (docSnap.exists()) {\n                const collectionData = docSnap.data();\n                const currentSweatlistIdsData = collectionData.sweatlistIds || [];\n                // Instantiate SweatlistIdentifiers from the raw data\n                const currentSweatlistIds = currentSweatlistIdsData.map((data)=>new _workout_types__WEBPACK_IMPORTED_MODULE_6__.SweatlistIdentifiers(data));\n                console.log(\"Current sweatlistIds (instantiated):\", currentSweatlistIds);\n                return new _workout_types__WEBPACK_IMPORTED_MODULE_6__.SweatlistCollection({\n                    id: docSnap.id,\n                    ...collectionData\n                });\n            } else {\n                throw new Error(\"Collection not found\");\n            }\n        } catch (error) {\n            console.error(\"Error getting collection by ID:\", error);\n            throw error;\n        }\n    }\n    // In WorkoutService class\n    async getCollectionsByIds(collectionIds) {\n        try {\n            // Use Promise.all to fetch all collections in parallel\n            const collections = await Promise.all(collectionIds.map(async (id)=>{\n                try {\n                    const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\", id);\n                    const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef);\n                    if (docSnap.exists()) {\n                        return new _workout_types__WEBPACK_IMPORTED_MODULE_6__.SweatlistCollection({\n                            id: docSnap.id,\n                            ...docSnap.data()\n                        });\n                    }\n                    return null;\n                } catch (error) {\n                    console.error(`Error fetching collection ${id}:`, error);\n                    return null;\n                }\n            }));\n            // Filter out any null values from failed fetches\n            return collections.filter((collection)=>collection !== null);\n        } catch (error) {\n            console.error(\"Error fetching collections:\", error);\n            throw error;\n        }\n    }\n    async fetchCollections(userId) {\n        if (!userId) {\n            throw new Error(\"User ID is required\");\n        }\n        try {\n            const collectionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\");\n            // Query for records where ownerId is an array that contains the userId.\n            const qArray = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(collectionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"ownerId\", \"array-contains\", userId));\n            const snapshotArray = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(qArray);\n            const collectionsFromArray = snapshotArray.docs.map((doc)=>{\n                const data = {\n                    id: doc.id,\n                    ...doc.data()\n                };\n                return new _workout_types__WEBPACK_IMPORTED_MODULE_6__.SweatlistCollection(data);\n            });\n            console.log(\"The array collections\", collectionsFromArray);\n            // Query for records where ownerId is a string equal to the userId.\n            const qString = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(collectionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"ownerId\", \"==\", userId));\n            const snapshotString = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(qString);\n            const collectionsFromString = snapshotString.docs.map((doc)=>{\n                const data = {\n                    id: doc.id,\n                    ...doc.data()\n                };\n                return new _workout_types__WEBPACK_IMPORTED_MODULE_6__.SweatlistCollection(data);\n            });\n            console.log(\"The string collections\", collectionsFromString);\n            // Combine both arrays and remove duplicates (if any) based on the collection id.\n            const combined = [\n                ...collectionsFromArray,\n                ...collectionsFromString\n            ];\n            const uniqueCollections = new Map();\n            combined.forEach((collection)=>{\n                uniqueCollections.set(collection.id, collection);\n            });\n            return Array.from(uniqueCollections.values());\n        } catch (error) {\n            console.error(\"Error fetching sweatlists:\", error);\n            throw error;\n        }\n    }\n    /**\n   * Fetch user challenges by userId and filter for active challenges.\n   * @returns A promise resolving to an array of active challenges.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ async fetchActiveChallenges() {\n        const currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.nonUICurrentUser;\n        if (!currentUser?.id) {\n            throw new Error(\"No user is signed in\");\n        }\n        const userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", currentUser.id));\n        try {\n            // console.log(`Fetching challenges for user ID: ${currentUser.id}`);\n            const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            // console.log(`Total challenges fetched: ${snapshot.docs.length}`);\n            const allChallenges = snapshot.docs.map((doc)=>{\n                const data = doc.data();\n                // console.log(`Processing challenge with ID: ${doc.id}`, data);\n                // Use the Challenge constructor to parse the challenge data\n                // console.log(\"date before format: \" + convertFirestoreTimestamp(data.challenge.startDate));\n                const challenge = data.challenge ? new _workout_types__WEBPACK_IMPORTED_MODULE_6__.Challenge({\n                    id: data.challenge.id,\n                    title: data.challenge.title,\n                    subtitle: data.challenge.subtitle,\n                    participants: data.challenge.participants || [],\n                    status: data.challenge.status,\n                    startDate: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.challenge.startDate),\n                    endDate: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.challenge.endDate),\n                    createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.challenge.createdAt),\n                    updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.challenge.updatedAt),\n                    introVideos: data.challenge.introVideos || [],\n                    ownerId: data.challenge.ownerId || []\n                }) : undefined;\n                return {\n                    id: doc.id,\n                    ...data,\n                    challenge,\n                    createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.createdAt),\n                    updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.updatedAt)\n                };\n            });\n            // console.log('All challenges after processing:', JSON.stringify(allChallenges, null, 2));\n            // Filter for active challenges (endDate > current date)\n            const activeChallenges = allChallenges.filter((userChallenge)=>{\n                const endDate = userChallenge.challenge?.endDate;\n                // console.log(\n                //   `Evaluating challenge ID: ${userChallenge.id}, End Date: ${endDate}, Current Date: ${new Date()}`\n                // );\n                return endDate && endDate > new Date();\n            });\n            // console.log(`Total active challenges: ${activeChallenges.length}`, activeChallenges);\n            return activeChallenges;\n        } catch (error) {\n            console.error(\"Error fetching active challenges:\", error);\n            throw error;\n        }\n    }\n    /**\n   * Fetch user challenges by userId.\n   * @returns A promise resolving to an array of challenges.\n   * @throws If no user is signed in or if the Firestore query fails.\n   */ async fetchUserChallenges() {\n        const currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.nonUICurrentUser;\n        if (!currentUser?.id) {\n            throw new Error(\"No user is signed in\");\n        }\n        // Reference to the user-challenge collection\n        const userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n        // Query challenges where userId matches the current user's ID\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", currentUser.id));\n        try {\n            const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            // Map documents to an array of Challenge objects\n            return snapshot.docs.map((doc)=>new _workout_types__WEBPACK_IMPORTED_MODULE_6__.UserChallenge({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n        } catch (error) {\n            console.error(\"Error fetching user challenges:\", error);\n            throw new Error(\"Failed to fetch user challenges\");\n        }\n    }\n    /**\n   * Fetch all user challenges from the database, ordered by creation date\n   * @returns A promise resolving to an array of all user challenges\n   * @throws If the Firestore query fails\n   */ async fetchAllUserChallenges() {\n        try {\n            // Reference to the user-challenge collection\n            const userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n            // Query all challenges ordered by creation date (newest first)\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"));\n            const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            console.log(`Loaded ${snapshot.docs.length} user challenges`);\n            // Process and map documents to an array of UserChallenge objects\n            const userChallenges = snapshot.docs.map((doc)=>{\n                try {\n                    const data = doc.data();\n                    // Pre-process challenge dates if they exist\n                    if (data.challenge) {\n                        // Ensure the dates are properly converted\n                        if (data.challenge.startDate) {\n                            data.challenge.startDate = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.challenge.startDate);\n                        }\n                        if (data.challenge.endDate) {\n                            data.challenge.endDate = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.challenge.endDate);\n                        }\n                        if (data.challenge.createdAt) {\n                            data.challenge.createdAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.challenge.createdAt);\n                        }\n                        if (data.challenge.updatedAt) {\n                            data.challenge.updatedAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.challenge.updatedAt);\n                        }\n                    }\n                    return new _workout_types__WEBPACK_IMPORTED_MODULE_6__.UserChallenge({\n                        id: doc.id,\n                        ...data\n                    });\n                } catch (err) {\n                    console.error(`Error processing user challenge document ${doc.id}:`, err);\n                    return null; // Skip documents that fail to process\n                }\n            }).filter(Boolean); // Remove null entries\n            return userChallenges;\n        } catch (error) {\n            console.error(\"Error fetching all user challenges:\", error);\n            throw new Error(\"Failed to fetch all user challenges\");\n        }\n    }\n    //update the workout summary,\n    async updateWorkoutSummary({ userId, workoutId, summary }) {\n        if (!userId) {\n            throw new Error(\"No user ID provided\");\n        }\n        try {\n            const summaryRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSummary\", summary.id);\n            // Update the updatedAt timestamp\n            summary.updatedAt = new Date();\n            // Use the toDictionary method to convert to Firestore format\n            const summaryData = summary.toDictionary();\n            console.log(\"Updating workout summary:\", {\n                path: `users/${userId}/workoutSummary/${summary.id}`,\n                data: summaryData\n            });\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(summaryRef, summaryData, {\n                merge: true\n            });\n            console.log(\"Workout summary document updated successfully\");\n        } catch (error) {\n            console.error(\"Error updating workout summary:\", error);\n            throw error;\n        }\n    }\n    async updateWorkoutLogs({ userId, workoutId, logs }) {\n        try {\n            const workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", workoutId);\n            const logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\");\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n            logs.forEach((log)=>{\n                const logDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(logsRef, log.id);\n                batch.update(logDocRef, {\n                    ...log.toDictionary()\n                });\n            });\n            await batch.commit();\n        } catch (error) {\n            console.error(\"Error updating workout logs:\", error);\n            throw error;\n        }\n    }\n    // The cancelWorkout method – it deletes the workout session and summary (if any),\n    // cleans up the local state, and logs the cancellation.\n    async cancelWorkout(workout, workoutSummary) {\n        if (!_user__WEBPACK_IMPORTED_MODULE_2__.userService.nonUICurrentUser?.id || !workout) {\n            throw new Error(\"User not authenticated.\");\n        }\n        try {\n            await this.deleteWorkoutSession(workout.id);\n            if (workoutSummary) {\n                await this.deleteWorkoutSummary(workoutSummary.id);\n            }\n            this.cleanUpWorkoutInProgress();\n            console.log(\"Workout canceled and cleaned up successfully.\");\n        } catch (error) {\n            console.error(\"Error canceling workout:\", error);\n            throw error;\n        }\n    }\n    // Deletes a workout session document and all its subcollection \"logs\"\n    async deleteWorkoutSession(workoutId) {\n        if (!_user__WEBPACK_IMPORTED_MODULE_2__.userService.nonUICurrentUser?.id || !workoutId) {\n            throw new Error(\"User not authenticated.\");\n        }\n        const userId = _user__WEBPACK_IMPORTED_MODULE_2__.userService.nonUICurrentUser.id;\n        const workoutRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", workoutId);\n        try {\n            // Delete all logs in the subcollection\n            const logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutRef, \"logs\");\n            const logsSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef);\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n            logsSnapshot.docs.forEach((logDoc)=>{\n                batch.delete(logDoc.ref);\n            });\n            // Delete the main workout document\n            batch.delete(workoutRef);\n            await batch.commit();\n            console.log(\"Workout session and logs deleted successfully.\");\n        } catch (error) {\n            console.error(\"Error deleting workout session:\", error);\n            throw error;\n        }\n    }\n    // Deletes the workout summary document.\n    async deleteWorkoutSummary(workoutSummaryId) {\n        if (!workoutSummaryId || !_user__WEBPACK_IMPORTED_MODULE_2__.userService.nonUICurrentUser?.id) {\n            return;\n        }\n        try {\n            const summaryRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", _user__WEBPACK_IMPORTED_MODULE_2__.userService.nonUICurrentUser.id, \"workoutSummary\", workoutSummaryId);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.deleteDoc)(summaryRef);\n            console.log(\"Workout summary deleted successfully.\");\n        } catch (error) {\n            console.error(\"Error deleting workout summary:\", error);\n            throw error;\n        }\n    }\n    // Clean up local storage and in-memory workout state.\n    cleanUpWorkoutInProgress() {\n        _redux_store__WEBPACK_IMPORTED_MODULE_9__.store.dispatch((0,_redux_workoutSlice__WEBPACK_IMPORTED_MODULE_10__.resetWorkoutState)());\n    }\n    /**\n   * Fetch the workout session from Firestore, returning { workout, logs }.\n   * Checks first for a QueuedUp session, then for InProgress.\n   */ async fetchCurrentWorkoutSession(userId) {\n        if (!userId) throw new Error(\"No user ID provided\");\n        const exerciseSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"));\n        const videoSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"));\n        const exerciseVideos = videoSnapshot.docs.map((doc)=>new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseVideo({\n                id: doc.id,\n                ...doc.data()\n            }));\n        const exercisesWithVideos = exerciseSnapshot.docs.map((doc)=>{\n            const exercise = new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise({\n                id: doc.id,\n                ...doc.data()\n            });\n            const matchingVideos = exerciseVideos.filter((video)=>video.exercise.toLowerCase() === exercise.name.toLowerCase());\n            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise({\n                ...exercise,\n                videos: matchingVideos\n            });\n        });\n        const workoutSessionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\");\n        let q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(workoutSessionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", _workout_types__WEBPACK_IMPORTED_MODULE_6__.WorkoutStatus.QueuedUp));\n        let snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        if (!snap.empty) {\n            return this.processWorkoutSessionDocument(snap.docs[0], exercisesWithVideos);\n        }\n        q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(workoutSessionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", _workout_types__WEBPACK_IMPORTED_MODULE_6__.WorkoutStatus.InProgress));\n        snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        if (!snap.empty) {\n            return this.processWorkoutSessionDocument(snap.docs[0], exercisesWithVideos);\n        }\n        return {\n            workout: null,\n            logs: null\n        };\n    }\n    async fetchAndMapExercisesWithVideos() {\n        try {\n            // console.log('Starting fetchAndMapExercisesWithVideos');\n            // 1. Fetch all exercises \n            const exerciseSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"));\n            const exercises = exerciseSnapshot.docs.map((doc)=>new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            // console.log(`Fetched ${exercises.length} exercises`);\n            // 2. Fetch all videos\n            const videoSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"));\n            const exerciseVideos = videoSnapshot.docs.map((doc)=>new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseVideo({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            // console.log(`Fetched ${exerciseVideos.length} exercise videos`);\n            // 3. Map videos to exercises\n            const exercisesWithVideos = exercises.map((exercise)=>{\n                const matchingVideos = exerciseVideos.filter((video)=>video.exercise.toLowerCase() === exercise.name.toLowerCase());\n                return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise({\n                    ...exercise,\n                    videos: matchingVideos\n                });\n            });\n            // console.log('Finished mapping exercises with videos');\n            // console.log(`Total exercises with videos: ${exercisesWithVideos.length}`);\n            return exercisesWithVideos;\n        } catch (error) {\n            console.error(\"Error fetching and mapping exercises with videos:\", error);\n            throw error;\n        }\n    }\n    /**\n   * Helper to build the Workout object + any logs from the snapshot.\n   */ async fetchAllWorkoutSessions(userId) {\n        if (!userId) {\n            throw new Error(\"No user ID provided\");\n        }\n        try {\n            const exerciseSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exercises\"));\n            const exercises = exerciseSnapshot.docs.map((doc)=>new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            const videoSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"exerciseVideos\"));\n            const exerciseVideos = videoSnapshot.docs.map((doc)=>new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseVideo({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            const exercisesWithVideos = exercises.map((exercise)=>{\n                const matchingVideos = exerciseVideos.filter((video)=>video.exercise.toLowerCase() === exercise.name.toLowerCase());\n                return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise({\n                    ...exercise,\n                    videos: matchingVideos\n                });\n            });\n            const workoutSessionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\");\n            const snap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(workoutSessionsRef);\n            if (snap.empty) {\n                console.log(\"No workout sessions found for user\");\n                return [];\n            }\n            const sessions = await Promise.all(snap.docs.map(async (doc)=>{\n                const sessionData = await this.processWorkoutSessionDocument(doc, exercisesWithVideos);\n                if (sessionData.logs) {\n                    sessionData.logs.sort((a, b)=>{\n                        const orderA = a.order ?? 0;\n                        const orderB = b.order ?? 0;\n                        return orderA - orderB;\n                    });\n                }\n                return sessionData;\n            }));\n            return sessions;\n        } catch (error) {\n            console.error(\"Error fetching workout sessions:\", error);\n            throw error;\n        }\n    }\n    // Add the updateUserChallenge method\n    async updateUserChallenge(challenge) {\n        if (!_user__WEBPACK_IMPORTED_MODULE_2__.userService.nonUICurrentUser?.id) {\n            throw new Error(\"No user is signed in\");\n        }\n        // Add safeguard check for ID\n        if (!challenge.id) {\n            console.error(\"Error updating user challenge: Provided UserChallenge has no ID.\", challenge);\n            throw new Error(\"Cannot update UserChallenge without a valid ID.\");\n        }\n        try {\n            const challengeRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\", challenge.id);\n            console.log(\"[updateUserChallenge] Challenge to update:\", challenge);\n            // --- Convert UserChallenge instance to a plain object --- \n            // Assuming UserChallenge has a toDictionary method that handles nested objects\n            const challengeData = challenge.toDictionary();\n            console.log(\"[updateUserChallenge] Challenge data:\", challengeData);\n            // --- Add/overwrite the update timestamp using Unix timestamp ---\n            challengeData.updatedAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.dateToUnixTimestamp)(new Date());\n            // Optional debugging log\n            // console.log(\"[updateUserChallenge] Data being sent to setDoc:\", challengeData);\n            // --- Detailed Log Before Save ---\n            console.log(\"[updateUserChallenge] Type of challengeData.challenge:\", typeof challengeData.challenge);\n            if (challengeData.challenge && challengeData.challenge.constructor) {\n                console.log(\"[updateUserChallenge] Constructor name of challengeData.challenge:\", challengeData.challenge.constructor.name);\n            } else if (challengeData.challenge === null) {\n                console.log(\"[updateUserChallenge] challengeData.challenge is null.\");\n            } else {\n                console.log(\"[updateUserChallenge] challengeData.challenge has no constructor or is undefined/primitive.\");\n            }\n            // Also log stringified version to see the structure Firestore likely gets\n            try {\n                console.log(\"[updateUserChallenge] Full challengeData object (stringified):\", JSON.stringify(challengeData, null, 2));\n            } catch (stringifyError) {\n                console.error(\"[updateUserChallenge] Error stringifying challengeData:\", stringifyError);\n                console.log(\"[updateUserChallenge] challengeData object (raw):\", challengeData); // Log raw object if stringify fails\n            }\n            // --- End Detailed Log ---\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(challengeRef, challengeData, {\n                merge: true\n            });\n            console.log(\"User challenge updated successfully\");\n        } catch (error) {\n            console.error(\"Error updating user challenge:\", error);\n            // Consider logging the data that caused the error\n            // console.error('Data that caused error:', challengeData)\n            throw error; // Re-throw original error\n        }\n    }\n    async updateCollection(collection) {\n        try {\n            const collRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\");\n            // If collection.id is empty, generate a new doc ID and assign it.\n            if (!collection.id || collection.id.trim() === \"\") {\n                const newDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(collRef);\n                collection.id = newDocRef.id;\n            }\n            // Ensure the challenge id matches the collection id.\n            if (collection.challenge) {\n                collection.challenge.id = collection.id;\n            }\n            // Update the updatedAt field.\n            collection.updatedAt = new Date();\n            // Save the collection to Firestore.\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(collRef, collection.id), collection.toDictionary());\n            console.log(\"Collection updated successfully\");\n            return collection;\n        } catch (error) {\n            console.error(\"Error updating collection document:\", error);\n            throw new Error(\"Error while updating the collection\");\n        }\n    }\n    async processWorkoutSessionDocument(workoutDoc, exercisesWithVideos) {\n        const data = workoutDoc.data();\n        // Map exercises with their full data and videos\n        const mappedExercises = (data.exercises || []).map((exerciseRef)=>{\n            // Find matching exercise just for its videos\n            const exerciseNameLower = exerciseRef.exercise?.name?.toLowerCase().trim();\n            const matchingExercise = exercisesWithVideos.find((ex)=>ex.name.toLowerCase().trim() === exerciseNameLower);\n            // Create new Exercise using original data but add videos from matching exercise\n            return {\n                ...exerciseRef,\n                exercise: new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.Exercise({\n                    ...exerciseRef.exercise,\n                    videos: matchingExercise?.videos || [],\n                    // Explicitly preserve the original category\n                    category: exerciseRef.exercise.category\n                })\n            };\n        });\n        // Create the workout with mapped exercises\n        const workout = new _workout_types__WEBPACK_IMPORTED_MODULE_6__.Workout({\n            id: workoutDoc.id,\n            roundWorkoutId: data.roundWorkoutId || \"\",\n            exercises: mappedExercises,\n            title: data.title || \"\",\n            description: data.description || \"\",\n            duration: data.duration || 0,\n            useAuthorContent: data.useAuthorContent || false,\n            isCompleted: data.isCompleted || false,\n            workoutStatus: data.workoutStatus || _workout_types__WEBPACK_IMPORTED_MODULE_6__.WorkoutStatus.Archived,\n            author: data.author || \"\",\n            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.createdAt),\n            updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.updatedAt),\n            startTime: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(data.startTime),\n            collectionId: data.collectionId,\n            challenge: data.challenge,\n            logs: (data.logs || []).map((logData)=>{\n                // Map logs with full exercises\n                const exerciseNameLower = logData.exercise?.name?.toLowerCase().trim();\n                const fullExercise = exercisesWithVideos.find((ex)=>ex.name.toLowerCase().trim() === exerciseNameLower);\n                return {\n                    ...logData,\n                    exercise: fullExercise || logData.exercise\n                };\n            }),\n            workoutRating: data.workoutRating,\n            order: data.order,\n            zone: data.zone || _workout_types__WEBPACK_IMPORTED_MODULE_6__.BodyZone.FullBody\n        });\n        // Fetch logs from subcollection\n        const logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutDoc.ref, \"logs\");\n        const logsSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef);\n        const logs = logsSnapshot.docs.map((logDoc)=>{\n            const logData = logDoc.data();\n            // Find the corresponding mapped exercise that we already processed\n            const matchingMappedExercise = mappedExercises.find((ex)=>ex.exercise.name.toLowerCase().trim() === logData.exercise?.name?.toLowerCase().trim());\n            const preparedLogData = {\n                ...logData,\n                id: logDoc.id,\n                workoutId: workout.id,\n                // Use the exercise from our mapped exercises which already has the correct category and videos\n                exercise: matchingMappedExercise?.exercise || logData.exercise,\n                createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(logData.createdAt),\n                updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.convertFirestoreTimestamp)(logData.updatedAt)\n            };\n            return new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseLog(preparedLogData);\n        });\n        return {\n            workout,\n            logs\n        };\n    }\n    async saveWorkoutSession({ userId, workout, logs }) {\n        if (!userId) throw new Error(\"No user ID provided\");\n        try {\n            // *** START: Cleanup existing QueuedUp sessions ***\n            const sessionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\");\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(sessionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"workoutStatus\", \"==\", _workout_types__WEBPACK_IMPORTED_MODULE_6__.WorkoutStatus.QueuedUp));\n            const queuedSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            if (!queuedSnapshot.empty) {\n                console.log(`[WorkoutService] Found ${queuedSnapshot.size} existing QueuedUp session(s) for user ${userId}. Cleaning up...`);\n                const deleteBatch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n                // Use Promise.all to handle asynchronous log fetching for all sessions\n                await Promise.all(queuedSnapshot.docs.map(async (sessionDoc)=>{\n                    // Delete logs subcollection first\n                    const logsToDeleteRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(sessionDoc.ref, \"logs\");\n                    const logsToDeleteSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsToDeleteRef);\n                    logsToDeleteSnapshot.forEach((logDoc)=>{\n                        deleteBatch.delete(logDoc.ref);\n                    });\n                    // Then delete the session doc itself\n                    deleteBatch.delete(sessionDoc.ref);\n                }));\n                await deleteBatch.commit();\n                console.log(`[WorkoutService] Finished cleaning up existing QueuedUp sessions.`);\n            } else {\n                console.log(`[WorkoutService] No existing QueuedUp sessions found for user ${userId}.`);\n            }\n            // *** END: Cleanup existing QueuedUp sessions ***\n            console.log(\"Incoming logs:\", logs.map((log)=>({\n                    name: log.exercise.name,\n                    category: log.exercise.category,\n                    originalType: log.exercise.category?.type\n                })));\n            const currentDate = new Date();\n            const cleanWorkout = new _workout_types__WEBPACK_IMPORTED_MODULE_6__.Workout({\n                ...workout,\n                // Generate a NEW ID for the session document itself\n                id: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(sessionsRef).id,\n                roundWorkoutId: `${workout.id}-${currentDate.getTime()}`,\n                workoutStatus: _workout_types__WEBPACK_IMPORTED_MODULE_6__.WorkoutStatus.QueuedUp,\n                createdAt: currentDate,\n                updatedAt: currentDate,\n                startTime: currentDate,\n                logs: [] // Logs stored in subcollection\n            });\n            // Use the generated ID for the document reference\n            const workoutSessionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", cleanWorkout.id);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(workoutSessionRef, cleanWorkout.toDictionary());\n            const logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutSessionRef, \"logs\");\n            const logBatch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n            const updatedLogsWithNewIds = []; // Array to hold logs with updated IDs\n            logs.forEach((log, index)=>{\n                // Generate a unique ID for the log document within the subcollection\n                const logDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(logsRef);\n                const newLogId = logDocRef.id; // Use Firestore generated ID\n                // Update the log instance's ID\n                const updatedLog = new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseLog({\n                    ...log,\n                    id: newLogId\n                });\n                updatedLogsWithNewIds.push(updatedLog);\n                console.log(`Processing log ${index} (New ID: ${newLogId}):`, {\n                    name: updatedLog.exercise.name,\n                    originalCategory: updatedLog.exercise.category,\n                    originalType: updatedLog.exercise.category?.type\n                });\n                logBatch.set(logDocRef, {\n                    ...updatedLog.toDictionary(),\n                    workoutId: cleanWorkout.id,\n                    order: index,\n                    logSubmitted: false,\n                    isCompleted: false\n                });\n            });\n            await logBatch.commit();\n            // Return the workout AND the logs with their new Firestore document IDs\n            return {\n                workout: cleanWorkout,\n                logs: updatedLogsWithNewIds\n            };\n        } catch (error) {\n            console.error(\"Error saving workout session:\", error);\n            throw error;\n        }\n    }\n    /**\n   * Example \"join challenge\" method using the client SDK (no admin privileges).\n   * This creates a doc in `user-challenge` with the userId, challengeId, etc.\n   */ async joinChallenge({ username, challengeId }) {\n        // 1) Make sure we have a signed-in user\n        const currentUser = _user__WEBPACK_IMPORTED_MODULE_2__.userService.nonUICurrentUser;\n        if (!currentUser) {\n            throw new Error(\"No user is signed in\");\n        }\n        // 2) Find the user doc by username\n        const usersRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\");\n        const userQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(usersRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"username\", \"==\", username));\n        const userSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(userQuery);\n        if (userSnapshot.empty) {\n            throw new Error(\"User not found\");\n        }\n        const userDoc = userSnapshot.docs[0];\n        const userData = userDoc.data();\n        const userId = userDoc.id;\n        // 3) Check if the challenge doc exists\n        const challengeRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\", challengeId);\n        const challengeSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(challengeRef);\n        if (!challengeSnap.exists()) {\n            throw new Error(\"Challenge not found\");\n        }\n        const challenge = challengeSnap.data();\n        // Current time as Date objects to be used in our app logic\n        const now = new Date();\n        // 4) Build new user-challenge document\n        const userChallengeId = `${challengeId}-${userId}-${Date.now()}`;\n        const userChallengeData = {\n            id: userChallengeId,\n            challenge: challenge,\n            challengeId,\n            userId,\n            fcmToken: userData.fcmToken || \"\",\n            profileImage: userData.profileImage || {},\n            progress: 0,\n            completedWorkouts: [],\n            isCompleted: false,\n            uid: userId,\n            location: userData.location || null,\n            city: \"\",\n            country: \"\",\n            timezone: \"\",\n            username,\n            // Store dates as Unix timestamps (seconds since epoch) for consistency with iOS\n            joinDate: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.dateToUnixTimestamp)(now),\n            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.dateToUnixTimestamp)(now),\n            updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.dateToUnixTimestamp)(now),\n            pulsePoints: {\n                baseCompletion: 0,\n                firstCompletion: 0,\n                streakBonus: 0,\n                checkInBonus: 0,\n                effortRating: 0,\n                chatParticipation: 0,\n                locationCheckin: 0,\n                contentEngagement: 0,\n                encouragementSent: 0,\n                encouragementReceived: 0\n            },\n            currentStreak: 0,\n            encouragedUsers: [],\n            encouragedByUsers: [],\n            checkIns: []\n        };\n        // 5) Store user-challenge doc\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\", userChallengeId), userChallengeData);\n        // Return the created data for logging/debugging purposes\n        return userChallengeData;\n    }\n    async fetchUserChallengeById(id) {\n        try {\n            const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\", id);\n            const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef);\n            if (!docSnap.exists()) {\n                return null;\n            }\n            return new _workout_types__WEBPACK_IMPORTED_MODULE_6__.UserChallenge({\n                id: docSnap.id,\n                ...docSnap.data()\n            });\n        } catch (error) {\n            console.error(\"Error fetching user challenge by ID:\", error);\n            return null;\n        }\n    }\n    /**\n   * Deletes a user challenge by ID\n   * @param id The ID of the user challenge to delete\n   * @returns A promise resolving to a success flag and message\n   */ async deleteUserChallenge(id) {\n        try {\n            if (!id) {\n                return {\n                    success: false,\n                    message: \"Invalid user challenge ID\"\n                };\n            }\n            // First fetch to ensure it exists\n            const challengeRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\", id);\n            const challengeSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(challengeRef);\n            if (!challengeSnap.exists()) {\n                return {\n                    success: false,\n                    message: \"User challenge not found\"\n                };\n            }\n            // Delete the document\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.deleteDoc)(challengeRef);\n            return {\n                success: true,\n                message: \"User challenge successfully deleted\"\n            };\n        } catch (error) {\n            console.error(\"Error deleting user challenge:\", error);\n            const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\n            return {\n                success: false,\n                message: `Failed to delete: ${errorMessage}`\n            };\n        }\n    }\n    get nonUICurrentUser() {\n        return _user__WEBPACK_IMPORTED_MODULE_2__.userService.nonUICurrentUser;\n    }\n    /**\n   * Fetches all SweatlistCollections that contain a challenge object.\n   * Intended for admin purposes.\n   * @returns {Promise<SweatlistCollection[]>} Array of collections with challenges.\n   */ async fetchAllAdminCollections() {\n        try {\n            const collectionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\");\n            // Query for documents where the 'challenge' field exists and is not null.\n            // Firestore doesn't directly support \"exists\", but we can query for a known subfield\n            // or filter out nulls later. A simpler approach is to fetch all and filter client-side if needed,\n            // or query for a mandatory field within challenge like 'status'.\n            // Let's query for challenge.status exists indirectly by ordering by it and filtering non-null later\n            // Or simply fetch all collections and filter.\n            // Let's fetch all and filter for simplicity and robustness against missing optional fields.\n            // Fetch all documents in the collection\n            const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(collectionsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"))); // Order by creation\n            const collections = snapshot.docs.map((doc)=>{\n                try {\n                    const data = doc.data();\n                    // Only include if the challenge object exists and is not empty/null\n                    if (data.challenge && typeof data.challenge === \"object\" && Object.keys(data.challenge).length > 0) {\n                        return new _workout_types__WEBPACK_IMPORTED_MODULE_6__.SweatlistCollection({\n                            id: doc.id,\n                            ...data\n                        });\n                    }\n                    return null;\n                } catch (mapError) {\n                    console.error(`Error mapping SweatlistCollection with id ${doc.id}:`, mapError);\n                    return null;\n                }\n            }).filter((collection)=>collection !== null); // Filter out nulls\n            console.log(`Fetched ${collections.length} collections with challenges for admin view.`);\n            return collections;\n        } catch (error) {\n            console.error(\"Error fetching all admin collections:\", error);\n            return []; // Return empty array on error\n        }\n    }\n    // --- Share Link Generation --- \n    async generateShareableRoundLink(collectionData, currentUser) {\n        if (!currentUser || !collectionData || !collectionData.id) {\n            console.error(\"Missing user or collection data for link generation.\");\n            return null;\n        }\n        const collectionId = collectionData.id;\n        const userId = currentUser.id;\n        // Use first owner as default host ID if no specific referral logic yet\n        const hostId = collectionData.ownerId?.[0] || userId;\n        const isPaid = collectionData.challenge?.pricingInfo?.isEnabled ?? false;\n        // --- Construct Base Fallback URL --- (Used for both paid and free links)\n        const fallbackBaseURL = `https://fitwithpulse.ai/round-invitation/${collectionId}`;\n        const fallbackParams = new URLSearchParams({\n            id: hostId,\n            sharedBy: userId\n        });\n        const fallbackURLString = `${fallbackBaseURL}?${fallbackParams.toString()}`;\n        // --- Paid Round: Return Direct Web Fallback --- \n        if (isPaid) {\n            console.log(\"Round is paid. Generating direct web fallback link.\");\n            return fallbackURLString;\n        }\n        // --- Free Round: Generate AppsFlyer OneLink --- \n        console.log(\"Round is free. Generating AppsFlyer OneLink.\");\n        try {\n            const oneLinkSubdomain = \"fitwithpulse.onelink.me\"; // Your OneLink subdomain\n            const oneLinkID = \"yffD\"; // Your OneLink Template ID\n            const oneLinkBaseURL = `https://${oneLinkSubdomain}/${oneLinkID}`;\n            // URL-encode the fallback URL for the af_r parameter value\n            const encodedFallbackURL = encodeURIComponent(fallbackURLString);\n            // Define parameters\n            const params = new URLSearchParams({\n                pid: \"user_share\",\n                c: \"round_share\",\n                af_referrer_customer_id: userId,\n                // --- Custom Deep Link Params --- \n                deep_link_value: \"round\",\n                roundId: collectionId,\n                id: hostId,\n                sharedBy: userId,\n                // --- Fallback Redirect --- \n                af_r: encodedFallbackURL\n            });\n            // --- Social Preview (Open Graph) Params --- \n            const challengeTitle = collectionData.challenge?.title || collectionData.title || \"Pulse Challenge\";\n            const startDate = collectionData.challenge?.startDate ? new Date(collectionData.challenge.startDate).toLocaleDateString() : \"\";\n            const endDate = collectionData.challenge?.endDate ? new Date(collectionData.challenge.endDate).toLocaleDateString() : \"\";\n            const dateRange = startDate && endDate ? `${startDate} - ${endDate}` : \"Check it out!\";\n            const previewTitle = challengeTitle;\n            const previewDescription = `Join me in this fitness challenge on Pulse! 🏋️‍♂️ ${dateRange}`;\n            const previewImageURL = \"https://fitwithpulse.ai/round-preview.png\"; // Use your actual preview image URL\n            params.set(\"af_og_title\", previewTitle);\n            params.set(\"af_og_description\", previewDescription);\n            params.set(\"af_og_image\", previewImageURL);\n            const finalURL = `${oneLinkBaseURL}?${params.toString()}`;\n            console.log(\"Generated AppsFlyer OneLink: \", finalURL);\n            return finalURL;\n        } catch (error) {\n            console.error(\"Error generating AppsFlyer OneLink:\", error);\n            console.log(\"Falling back to simple web URL due to OneLink generation error.\");\n            // Fallback to the simpler web URL if OneLink generation fails\n            return fallbackURLString;\n        }\n    }\n    // --- End Share Link Generation ---\n    // --- Remove Sweatlist from Collection --- \n    /**\n   * Removes a specific sweatlist (stack) from a sweatlist collection (round).\n   * @param collectionId The ID of the SweatlistCollection document.\n   * @param sweatlistId The ID of the sweatlist to remove from the 'sweatlistIds' array.\n   */ async removeStackFromRound(collectionId, sweatlistId) {\n        if (!collectionId || !sweatlistId) {\n            throw new Error(\"Collection ID and Sweatlist ID are required.\");\n        }\n        const collectionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\", collectionId);\n        try {\n            console.log(`Attempting to remove sweatlist ${sweatlistId} from collection ${collectionId}`);\n            // Get the current document data\n            const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(collectionRef);\n            if (!docSnap.exists()) {\n                throw new Error(`Sweatlist Collection with ID ${collectionId} not found.`);\n            }\n            const collectionData = docSnap.data();\n            const currentSweatlistIdsData = collectionData.sweatlistIds || [];\n            // Instantiate SweatlistIdentifiers from the raw data\n            const currentSweatlistIds = currentSweatlistIdsData.map((data)=>new _workout_types__WEBPACK_IMPORTED_MODULE_6__.SweatlistIdentifiers(data));\n            console.log(\"Current sweatlistIds (instantiated):\", currentSweatlistIds);\n            // Filter out the sweatlist to be removed\n            const updatedSweatlistIds = currentSweatlistIds.filter((sweatlist)=>sweatlist.id !== sweatlistId);\n            console.log(\"Updated sweatlistIds:\", updatedSweatlistIds);\n            if (updatedSweatlistIds.length === currentSweatlistIds.length) {\n                console.warn(`Sweatlist with ID ${sweatlistId} not found within the collection ${collectionId}. No update performed.`);\n                // Optionally throw an error or just return if you consider this an issue\n                // throw new Error(`Sweatlist with ID ${sweatlistId} not found within the collection.`);\n                return;\n            }\n            // Update the document with the filtered array\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(collectionRef, {\n                sweatlistIds: updatedSweatlistIds.map((sl)=>sl.toDictionary()),\n                updatedAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_7__.serverTimestamp)() // Update the timestamp\n            });\n            console.log(`Successfully removed sweatlist ${sweatlistId} from collection ${collectionId}`);\n        } catch (error) {\n            console.error(`Error removing sweatlist ${sweatlistId} from collection ${collectionId}:`, error);\n            // Re-throw the error to be caught by the calling function\n            throw error;\n        }\n    }\n    // --- End Remove Sweatlist --- \n    // --- Clear All Sweatlists from Collection --- \n    /**\n   * Removes ALL sweatlists (stacks) from a sweatlist collection (round) by setting sweatlistIds to [].\n   * @param collectionId The ID of the SweatlistCollection document.\n   */ async clearAllStacksFromRound(collectionId) {\n        if (!collectionId) {\n            throw new Error(\"Collection ID is required.\");\n        }\n        const collectionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\", collectionId);\n        try {\n            console.log(`Attempting to clear all sweatlists from collection ${collectionId}`);\n            // Check if the document exists before updating\n            const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(collectionRef);\n            if (!docSnap.exists()) {\n                throw new Error(`Sweatlist Collection with ID ${collectionId} not found.`);\n            }\n            // Update the document, setting sweatlistIds to an empty array\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(collectionRef, {\n                sweatlistIds: [],\n                updatedAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_7__.serverTimestamp)() // Update the timestamp\n            });\n            console.log(`Successfully cleared all sweatlists from collection ${collectionId}`);\n        } catch (error) {\n            console.error(`Error clearing sweatlists from collection ${collectionId}:`, error);\n            // Re-throw the error to be caught by the calling function\n            throw error;\n        }\n    }\n    // --- End Clear All Sweatlists ---\n    // --- Update Challenge Status --- \n    /**\n   * Updates the status of the challenge nested within a SweatlistCollection.\n   * @param collectionId The ID of the SweatlistCollection document.\n   * @param newStatus The new status to set for the challenge.\n   */ async updateChallengeStatus(collectionId, newStatus) {\n        if (!collectionId || !newStatus) {\n            throw new Error(\"Collection ID and new status are required.\");\n        }\n        // Validate the status value if necessary (ensure it's one of the allowed ChallengeStatus enum values)\n        const validStatuses = Object.values(_workout_types__WEBPACK_IMPORTED_MODULE_6__.ChallengeStatus);\n        if (!validStatuses.includes(newStatus)) {\n            throw new Error(`Invalid challenge status provided: ${newStatus}`);\n        }\n        const collectionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"sweatlist-collection\", collectionId);\n        try {\n            console.log(`Attempting to update challenge status to '${newStatus}' for collection ${collectionId}`);\n            // Check if the document exists before updating\n            const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(collectionRef);\n            if (!docSnap.exists()) {\n                throw new Error(`Sweatlist Collection with ID ${collectionId} not found.`);\n            }\n            // Prepare the update data using dot notation for nested field\n            const updateData = {\n                \"challenge.status\": newStatus,\n                \"challenge.updatedAt\": (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_7__.serverTimestamp)(),\n                \"updatedAt\": (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_7__.serverTimestamp)() // Also update the collection's timestamp\n            };\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(collectionRef, updateData);\n            console.log(`Successfully updated challenge status to '${newStatus}' for collection ${collectionId}`);\n        } catch (error) {\n            console.error(`Error updating challenge status for collection ${collectionId}:`, error);\n            throw error; // Re-throw\n        }\n    }\n    // --- End Update Challenge Status ---\n    // --- Batch Update User Challenge Status --- \n    /**\n   * Updates the status within the nested challenge object for all UserChallenge\n   * documents associated with a given challenge ID.\n   *\n   * @param challengeId The ID of the main challenge (equivalent to collectionId).\n   * @param newStatus The new status to set.\n   */ async updateStatusForAllUserChallenges(challengeId, newStatus) {\n        if (!challengeId || !newStatus) {\n            throw new Error(\"Challenge ID and new status are required for batch update.\");\n        }\n        const userChallengesRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"user-challenge\");\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(userChallengesRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"challengeId\", \"==\", challengeId));\n        console.log(`Starting batch update for user challenges status to '${newStatus}' for challenge ID: ${challengeId}`);\n        try {\n            const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            if (snapshot.empty) {\n                console.log(`No user challenges found for challenge ID ${challengeId}. No batch update needed.`);\n                return; // Nothing to update\n            }\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n            const nowTimestamp = (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_7__.serverTimestamp)(); // Use server timestamp for consistency\n            snapshot.forEach((doc)=>{\n                console.log(` - Adding update for user-challenge: ${doc.id}`);\n                batch.update(doc.ref, {\n                    \"challenge.status\": newStatus,\n                    \"challenge.updatedAt\": nowTimestamp,\n                    \"updatedAt\": nowTimestamp // Also update user-challenge timestamp\n                });\n            });\n            await batch.commit();\n            console.log(`Successfully committed batch update for ${snapshot.size} user challenges.`);\n        } catch (error) {\n            console.error(`Error during batch update of user challenges for challenge ID ${challengeId}:`, error);\n            throw error; // Re-throw\n        }\n    }\n    // --- End Batch Update User Challenge Status ---\n    /**\n   * Creates a test workout session for a specific user\n   * This is used exclusively for testing workout start notifications in the admin panel\n   * \n   * @param userId The ID of the user to create the test session for\n   * @param sessionData The workout session data to use\n   * @returns The ID of the created session\n   */ async createTestWorkoutSession(userId, sessionData) {\n        try {\n            if (!userId) {\n                throw new Error(\"User ID is required\");\n            }\n            // Generate a unique ID for the workout session\n            const sessionId = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"workout-sessions\")).id;\n            // Prepare the data with the status that will trigger the notification\n            const testData = {\n                ...sessionData,\n                id: sessionId,\n                createdAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_7__.serverTimestamp)(),\n                updatedAt: (0,_utils_timestamp__WEBPACK_IMPORTED_MODULE_7__.serverTimestamp)()\n            };\n            // Create a session doc in both the user's subcollection and the root collection\n            // 1. First in user's subcollection\n            const userSessionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", sessionId);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(userSessionRef, testData);\n            // 2. Also create in the root collection (this normally happens via Cloud Function)\n            // But we'll do it directly to ensure it's available immediately\n            const rootSessionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"workout-sessions\", sessionId);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(rootSessionRef, {\n                ...testData,\n                userId\n            });\n            console.log(`Created test workout session with ID ${sessionId} for user ${userId}`);\n            return sessionId;\n        } catch (error) {\n            console.error(\"Error creating test workout session:\", error);\n            throw error;\n        }\n    }\n    /**\n   * Deletes a test workout session\n   * This is used to clean up after testing workout start notifications\n   * \n   * @param userId The ID of the user who owns the session\n   * @param sessionId The ID of the session to delete\n   */ async deleteTestWorkoutSession(userId, sessionId) {\n        try {\n            if (!userId || !sessionId) {\n                throw new Error(\"User ID and Session ID are required\");\n            }\n            const userSessionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", sessionId);\n            const logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(userSessionRef, \"logs\");\n            // Delete all logs in the subcollection\n            const logsSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(logsRef);\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n            logsSnapshot.docs.forEach((logDoc)=>{\n                batch.delete(logDoc.ref);\n            });\n            await batch.commit(); // Commit deletion of logs first\n            // Then delete the main session document from user's subcollection\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.deleteDoc)(userSessionRef);\n            // And delete from root collection if it exists there\n            const rootSessionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"workout-sessions\", sessionId);\n            const rootSessionSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(rootSessionRef);\n            if (rootSessionSnap.exists()) {\n                await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.deleteDoc)(rootSessionRef);\n            }\n            console.log(`Deleted test workout session ${sessionId} for user ${userId}`);\n        } catch (error) {\n            console.error(\"Error deleting test workout session:\", error);\n            throw error;\n        }\n    }\n    /**\n   * Creates a full test workout session including its exercise logs.\n   * @param userId The ID of the user (participant).\n   * @param workoutTemplate The Workout object to use as a template.\n   * @param templateLogs The array of ExerciseLog objects from the template.\n   * @param challengeId The ID of the challenge this test session is associated with (optional).\n   * @param sweatlistId The ID of the sweatlist (workout template) this session is based on (optional).\n   * @returns The ID of the created session and the created ExerciseLog objects.\n   */ async createFullTestWorkoutSession(userId, workoutTemplate, templateLogs, challengeId, sweatlistId) {\n        if (!userId) throw new Error(\"User ID is required for creating a test session.\");\n        if (!workoutTemplate) throw new Error(\"Workout template is required.\");\n        const sessionsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\");\n        const newSessionId = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(sessionsRef).id; // Generate ID for the new session\n        const now = new Date();\n        const sessionData = new _workout_types__WEBPACK_IMPORTED_MODULE_6__.WorkoutSession({\n            id: newSessionId,\n            userId: userId,\n            workoutTemplateId: workoutTemplate.id,\n            challengeId: challengeId,\n            roundWorkoutId: `${workoutTemplate.id}-${now.getTime()}`,\n            title: workoutTemplate.title || \"Test Simulation Workout\",\n            description: workoutTemplate.description,\n            author: workoutTemplate.author,\n            // Exercises are typically not directly on the session document if logs reference a template.\n            // Logs will be created in the subcollection.\n            workoutStatus: _workout_types__WEBPACK_IMPORTED_MODULE_6__.WorkoutStatus.InProgress,\n            startTime: now,\n            createdAt: now,\n            updatedAt: now\n        });\n        // Log the relevant parts of sessionData (which is now a WorkoutSession instance)\n        console.log(\"[WorkoutService createFullTestWorkoutSession] Session data being written (WorkoutSession instance):\", JSON.stringify({\n            id: sessionData.id,\n            userId: sessionData.userId,\n            workoutTemplateId: sessionData.workoutTemplateId,\n            challengeId: sessionData.challengeId,\n            workoutStatus: sessionData.workoutStatus,\n            author: sessionData.author,\n            title: sessionData.title\n        }, null, 2)); // DEBUG LOG\n        const workoutSessionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", newSessionId);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(workoutSessionRef, sessionData.toDictionary());\n        // Also create in root `workout-sessions` for consistency if your functions expect it\n        const rootSessionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"workout-sessions\", newSessionId);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(rootSessionRef, {\n            ...sessionData.toDictionary(),\n            userId\n        });\n        const logsSubcollectionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(workoutSessionRef, \"logs\");\n        const createdLogObjects = [];\n        const logBatch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_config__WEBPACK_IMPORTED_MODULE_1__.db);\n        for(let i = 0; i < templateLogs.length; i++){\n            const templateLog = templateLogs[i];\n            const newLogDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(logsSubcollectionRef); // Auto-generate ID for each log\n            const newLog = new _exercise_types__WEBPACK_IMPORTED_MODULE_3__.ExerciseLog({\n                ...templateLog,\n                id: newLogDocRef.id,\n                workoutId: newSessionId,\n                userId: userId,\n                logSubmitted: false,\n                isCompleted: false,\n                completedAt: null,\n                createdAt: now,\n                updatedAt: now,\n                order: templateLog.order !== undefined && templateLog.order !== null ? templateLog.order : i\n            });\n            logBatch.set(newLogDocRef, newLog.toDictionary());\n            createdLogObjects.push(newLog);\n        }\n        await logBatch.commit();\n        console.log(`Created full test workout session ${newSessionId} for user ${userId} with ${createdLogObjects.length} logs.`);\n        return {\n            sessionId: newSessionId,\n            createdLogObjects\n        };\n    }\n    /**\n   * Simulates updating an exercise log, e.g., marking it as complete.\n   * @param userId The ID of the user.\n   * @param sessionId The ID of the workout session.\n   * @param logId The ID of the exercise log to update.\n   * @param updates A partial ExerciseLog object with fields to update.\n   */ async simulateUpdateExerciseLog(userId, sessionId, logId, updates) {\n        if (!userId || !sessionId || !logId) {\n            throw new Error(\"User ID, Session ID, and Log ID are required.\");\n        }\n        const logRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", sessionId, \"logs\", logId);\n        // Ensure dates are converted correctly if present in updates\n        const firestoreUpdates = {\n            ...updates\n        };\n        if (updates.completedAt) {\n            firestoreUpdates.completedAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.dateToUnixTimestamp)(updates.completedAt);\n        }\n        if (updates.updatedAt) {\n            firestoreUpdates.updatedAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.dateToUnixTimestamp)(updates.updatedAt);\n        }\n        if (updates.createdAt && !(updates.createdAt instanceof Date)) {\n            // This case should ideally not happen if updates.createdAt is always a Date\n            firestoreUpdates.createdAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.dateToUnixTimestamp)(new Date(updates.createdAt));\n        } else if (updates.createdAt) {\n            firestoreUpdates.createdAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.dateToUnixTimestamp)(updates.createdAt);\n        }\n        // We don't want to update the exercise object itself, only log properties\n        if (firestoreUpdates.exercise) {\n            delete firestoreUpdates.exercise;\n        }\n        // We don't want to update the logs array (RepsAndWeightLog) itself, only log properties\n        if (firestoreUpdates.logs) {\n            delete firestoreUpdates.logs;\n        }\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(logRef, firestoreUpdates);\n        console.log(`Simulated update for log ${logId} in session ${sessionId}.`);\n    }\n    /**\n   * Simulates updating a workout session, e.g., marking it as complete.\n   * @param userId The ID of the user.\n   * @param sessionId The ID of the workout session to update.\n   * @param updates A partial Workout object with fields to update.\n   */ async simulateUpdateWorkoutSession(userId, sessionId, updates) {\n        if (!userId || !sessionId) {\n            throw new Error(\"User ID and Session ID are required.\");\n        }\n        const sessionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"users\", userId, \"workoutSessions\", sessionId);\n        const firestoreUpdates = {\n            ...updates\n        };\n        // Convert dates if they are present\n        if (updates.startTime) {\n            firestoreUpdates.startTime = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.dateToUnixTimestamp)(updates.startTime);\n        }\n        // endTime is not a standard property of WorkoutSession, but if used, ensure it's handled.\n        // If endTime comes from a custom part of 'updates', it might need specific handling.\n        // For now, assuming if it exists in 'updates', it should be converted.\n        if (updates.endTime) {\n            firestoreUpdates.endTime = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.dateToUnixTimestamp)(updates.endTime);\n        }\n        if (updates.updatedAt) {\n            firestoreUpdates.updatedAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.dateToUnixTimestamp)(updates.updatedAt);\n        }\n        if (updates.createdAt && !(updates.createdAt instanceof Date)) {\n            firestoreUpdates.createdAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.dateToUnixTimestamp)(new Date(updates.createdAt));\n        } else if (updates.createdAt) {\n            firestoreUpdates.createdAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_8__.dateToUnixTimestamp)(updates.createdAt);\n        }\n        // Avoid overwriting entire nested objects if only partial updates are intended\n        // For simplicity here, we assume direct field updates are fine.\n        // If 'exercises' or 'logs' (the subcollection placeholder on Workout model) are in updates, remove them\n        // as they are handled differently or are part of the template.\n        if (firestoreUpdates.exercises) delete firestoreUpdates.exercises;\n        if (firestoreUpdates.logs) delete firestoreUpdates.logs;\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(sessionRef, firestoreUpdates);\n        // Also update the root collection document if it exists\n        const rootSessionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"workout-sessions\", sessionId);\n        const rootSessionSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(rootSessionRef);\n        if (rootSessionSnap.exists()) {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(rootSessionRef, firestoreUpdates);\n        }\n        console.log(`Simulated update for workout session ${sessionId}.`);\n    }\n    /**\n   * Fetches the details of a specific workout (stack) from the 'stacks' collection.\n   * @param stackId The ID of the workout/stack to fetch.\n   * @returns A Promise resolving to the Workout object or null if not found.\n   */ async fetchStackWorkoutDetails(stackId) {\n        if (!stackId) {\n            console.error(\"fetchStackWorkoutDetails: stackId is required\");\n            return null;\n        }\n        try {\n            const stackDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(_config__WEBPACK_IMPORTED_MODULE_1__.db, \"stacks\", stackId);\n            const stackDocSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(stackDocRef);\n            if (!stackDocSnap.exists()) {\n                console.warn(`fetchStackWorkoutDetails: No stack found with ID ${stackId}`);\n                return null;\n            }\n            const stackData = stackDocSnap.data();\n            // Construct a base Workout object\n            let workout = new _workout_types__WEBPACK_IMPORTED_MODULE_6__.Workout({\n                id: stackDocSnap.id,\n                ...stackData\n            });\n            // Enrich exercises with videos\n            // This assumes fetchVideosForWorkout can correctly populate videos based on exercise names\n            // and that workout.exercises are already in ExerciseReference format or compatible\n            workout = await this.fetchVideosForWorkout(workout);\n            return workout;\n        } catch (error) {\n            console.error(`Error fetching stack workout details for ID ${stackId}:`, error);\n            throw error; // Re-throw the error to be handled by the caller\n        }\n    }\n}\nconst workoutService = new WorkoutService();\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBRW1DLFFBQVEsQ0FBQztnQkFDMUUsT0FBTztZQUNUO1lBRUEsTUFBTUcsWUFBWUQsYUFBYWhYLElBQUk7WUFFbkMsa0NBQWtDO1lBQ2xDLElBQUlyQixVQUFVLElBQUl6QixtREFBT0EsQ0FBQztnQkFDeEJxQyxJQUFJeVgsYUFBYXpYLEVBQUU7Z0JBQ25CLEdBQUcwWCxTQUFTO1lBQ2Q7WUFFQSwrQkFBK0I7WUFDL0IsMkZBQTJGO1lBQzNGLG1GQUFtRjtZQUNuRnRZLFVBQVUsTUFBTSxJQUFJLENBQUNtRyxxQkFBcUIsQ0FBQ25HO1lBRTNDLE9BQU9BO1FBRVQsRUFBRSxPQUFPc0IsT0FBTztZQUNkTCxRQUFRSyxLQUFLLENBQUMsQ0FBQyw0Q0FBNEMsRUFBRTZXLFFBQVEsQ0FBQyxDQUFDLEVBQUU3VztZQUN6RSxNQUFNQSxPQUFPLGlEQUFpRDtRQUNoRTtJQUNGO0FBRUY7QUFFTyxNQUFNaVgsaUJBQWlCLElBQUkzWSxpQkFBaUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1hcHAvLi9zcmMvYXBpL2ZpcmViYXNlL3dvcmtvdXQvc2VydmljZS50cz9jNWUyIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9hcGkvZmlyZWJhc2Uvd29ya291dC9zZXJ2aWNlLnRzXG5pbXBvcnQge1xuICBjb2xsZWN0aW9uLFxuICBkb2MsXG4gIGdldERvY3MsXG4gIGdldERvYyxcbiAgdXBkYXRlRG9jLFxuICBxdWVyeSxcbiAgd2hlcmUsXG4gIG9yZGVyQnksIFxuICBEb2N1bWVudERhdGEsXG4gIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCxcbiAgY29sbGVjdGlvbiBhcyBmc0NvbGxlY3Rpb24sXG4gIHNldERvYyxcbiAgZGVsZXRlRG9jLFxuICB3cml0ZUJhdGNoLFxuICBhcnJheVVuaW9uLFxuICBGaWVsZFZhbHVlLFxuICBUaW1lc3RhbXBcbn0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcblxuaW1wb3J0IHsgZGIsIHN0b3JhZ2UgfSBmcm9tICcuLi9jb25maWcnO1xuaW1wb3J0IHsgdXNlclNlcnZpY2UgfSBmcm9tICcuLi91c2VyJztcbmltcG9ydCB7IFxuICBFeGVyY2lzZUxvZywgXG4gIEV4ZXJjaXNlQ2F0ZWdvcnksIFxuICBFeGVyY2lzZSwgXG4gIEJvZHlQYXJ0LCBcbiAgRXhlcmNpc2VWaWRlbywgXG4gIEV4ZXJjaXNlQXV0aG9yLCBcbiAgRXhlcmNpc2VWaWRlb1Zpc2liaWxpdHksIFxuICBFeGVyY2lzZURldGFpbCwgXG4gIEV4ZXJjaXNlUmVmZXJlbmNlIH0gZnJvbSAnLi4vZXhlcmNpc2UvdHlwZXMnO1xuaW1wb3J0IHsgZXhlcmNpc2VTZXJ2aWNlIH0gZnJvbSAnLi4vZXhlcmNpc2Uvc2VydmljZSc7XG5pbXBvcnQgeyBQcm9maWxlSW1hZ2UsIFVzZXIgfSBmcm9tICcuLi91c2VyL3R5cGVzJ1xuaW1wb3J0IHsgV29ya291dCwgV29ya291dFN1bW1hcnksIEJvZHlab25lLCBJbnRyb1ZpZGVvLCBSZXBzQW5kV2VpZ2h0TG9nLCBXb3Jrb3V0UmF0aW5nLCBXb3Jrb3V0U2Vzc2lvbiB9IGZyb20gJy4uL3dvcmtvdXQvdHlwZXMnO1xuaW1wb3J0IHsgV29ya291dFN0YXR1cywgU3dlYXRsaXN0Q29sbGVjdGlvbiwgU3dlYXRsaXN0SWRlbnRpZmllcnMgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGZvcm1hdCB9IGZyb20gJ2RhdGUtZm5zJzsgXG5pbXBvcnQgeyBjb252ZXJ0VGltZXN0YW1wLCBzZXJ2ZXJUaW1lc3RhbXAgfSBmcm9tICcuLi8uLi8uLi91dGlscy90aW1lc3RhbXAnOyAvLyBBZGp1c3QgdGhlIGltcG9ydCBwYXRoXG5pbXBvcnQgeyBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvZm9ybWF0RGF0ZSc7XG5pbXBvcnQgeyBDaGFsbGVuZ2UsIENoYWxsZW5nZVN0YXR1cywgVXNlckNoYWxsZW5nZSB9IGZyb20gJy4uLy4uLy4uL2FwaS9maXJlYmFzZS93b3Jrb3V0L3R5cGVzJztcblxuaW1wb3J0IHsgc3RvcmUgfSBmcm9tICcuLi8uLi8uLi9yZWR1eC9zdG9yZSc7XG5pbXBvcnQgeyBzZXRDdXJyZW50V29ya291dCwgc2V0Q3VycmVudEV4ZXJjaXNlTG9ncywgcmVzZXRXb3Jrb3V0U3RhdGUsIHNldFdvcmtvdXRTdW1tYXJ5IH0gZnJvbSAnLi4vLi4vLi4vcmVkdXgvd29ya291dFNsaWNlJztcbmltcG9ydCB7IGRhdGVUb1VuaXhUaW1lc3RhbXAgfSBmcm9tICcuLi8uLi8uLi91dGlscy9mb3JtYXREYXRlJztcbmltcG9ydCB7IHJlZiwgdXBsb2FkQnl0ZXMsIGdldERvd25sb2FkVVJMIH0gZnJvbSBcImZpcmViYXNlL3N0b3JhZ2VcIjtcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuXG5cbmludGVyZmFjZSBGaXJlc3RvcmVFcnJvciB7XG4gIGNvZGU6IHN0cmluZztcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHN0YWNrPzogc3RyaW5nO1xufVxuXG5jbGFzcyBXb3Jrb3V0U2VydmljZSB7XG5cbi8vIFJlcGxhY2UgZ2V0dGVycy9zZXR0ZXJzIHRvIHVzZSBSZWR1eFxuICBnZXQgY3VycmVudFdvcmtvdXQoKTogV29ya291dCB8IG51bGwge1xuICAgIGNvbnN0IHdvcmtvdXREYXRhID0gc3RvcmUuZ2V0U3RhdGUoKS53b3Jrb3V0LmN1cnJlbnRXb3Jrb3V0O1xuICAgIHJldHVybiB3b3Jrb3V0RGF0YSA/IG5ldyBXb3Jrb3V0KHdvcmtvdXREYXRhKSA6IG51bGw7XG4gIH1cblxuICBzZXQgY3VycmVudFdvcmtvdXQod29ya291dDogV29ya291dCB8IG51bGwpIHtcbiAgICBzdG9yZS5kaXNwYXRjaChzZXRDdXJyZW50V29ya291dCh3b3Jrb3V0KSk7XG4gIH1cblxuICBnZXQgY3VycmVudFdvcmtvdXRMb2dzKCk6IEV4ZXJjaXNlTG9nW10ge1xuICAgIGNvbnN0IGxvZ3NEYXRhID0gc3RvcmUuZ2V0U3RhdGUoKS53b3Jrb3V0LmN1cnJlbnRFeGVyY2lzZUxvZ3M7XG4gICAgcmV0dXJuIGxvZ3NEYXRhLm1hcChsb2cgPT4gbmV3IEV4ZXJjaXNlTG9nKGxvZykpO1xuICB9XG5cbiAgc2V0IGN1cnJlbnRXb3Jrb3V0TG9ncyhsb2dzOiBFeGVyY2lzZUxvZ1tdKSB7XG4gICAgc3RvcmUuZGlzcGF0Y2goc2V0Q3VycmVudEV4ZXJjaXNlTG9ncyhsb2dzKSk7XG4gIH1cblxuICBnZXQgY3VycmVudFdvcmtvdXRTdW1tYXJ5KCk6IFdvcmtvdXRTdW1tYXJ5IHwgbnVsbCB7XG4gICAgY29uc3Qgc3VtbWFyeURhdGEgPSBzdG9yZS5nZXRTdGF0ZSgpLndvcmtvdXQud29ya291dFN1bW1hcnk7XG4gICAgcmV0dXJuIHN1bW1hcnlEYXRhID8gbmV3IFdvcmtvdXRTdW1tYXJ5KHN1bW1hcnlEYXRhKSA6IG51bGw7XG4gIH1cblxuICBzZXQgY3VycmVudFdvcmtvdXRTdW1tYXJ5KHdvcmtvdXRTdW1tYXJ5OiBXb3Jrb3V0U3VtbWFyeSkge1xuICAgIHN0b3JlLmRpc3BhdGNoKHNldFdvcmtvdXRTdW1tYXJ5KHdvcmtvdXRTdW1tYXJ5KSk7XG4gIH1cblxuICAgZ2VuZXJhdGVJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBkb2MoY29sbGVjdGlvbihkYiwgJ3dvcmtvdXRzJykpLmlkO1xuICB9XG5cbiAgYXN5bmMgZmV0Y2hXb3Jrb3V0U3VtbWFyeShcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICB3b3Jrb3V0SWQ6IHN0cmluZyxcbiAgICBzdW1tYXJ5SWQ6IHN0cmluZ1xuICApOiBQcm9taXNlPFdvcmtvdXRTdW1tYXJ5IHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnRmV0Y2hpbmcgd29ya291dCBzdW1tYXJ5OicsIHsgdXNlcklkLCB3b3Jrb3V0SWQsIHN1bW1hcnlJZCB9KTtcbiAgICAgIFxuICAgICAgLy8gQXNzdW1pbmcgc3VtbWFyaWVzIGFyZSBzdG9yZWQgaW4gYSAnd29ya291dFN1bW1hcmllcycgY29sbGVjdGlvblxuICAgICAgY29uc3Qgc3VtbWFyeVJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdXNlcklkLCAnd29ya291dFN1bW1hcnknLCBzdW1tYXJ5SWQpO1xuICAgICAgY29uc3Qgc3VtbWFyeURvYyA9IGF3YWl0IGdldERvYyhzdW1tYXJ5UmVmKTtcbiAgXG4gICAgICBpZiAoIXN1bW1hcnlEb2MuZXhpc3RzKCkpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1N1bW1hcnkgZG9jdW1lbnQgbm90IGZvdW5kJyk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICBcbiAgICAgIGNvbnN0IHN1bW1hcnlEYXRhID0gc3VtbWFyeURvYy5kYXRhKCk7XG4gICAgICBjb25zb2xlLmxvZygnRm91bmQgc3VtbWFyeSBkYXRhOicsIHN1bW1hcnlEYXRhKTtcbiAgXG4gICAgICByZXR1cm4gbmV3IFdvcmtvdXRTdW1tYXJ5KHN1bW1hcnlEYXRhKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgd29ya291dCBzdW1tYXJ5OicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gICAgLy8gVXBkYXRlIHRoZSBmb3JtYXRXb3Jrb3V0QW5kSW5pdGlhbGl6ZUxvZ3MgZnVuY3Rpb25cbiAgYXN5bmMgZm9ybWF0V29ya291dEFuZEluaXRpYWxpemVMb2dzKFxuICAgICAgZXhlcmNpc2VEZXRhaWxzOiBFeGVyY2lzZURldGFpbFtdLFxuICAgICAgd29ya291dEF1dGhvcj86IHN0cmluZ1xuICAgICk6IFByb21pc2U8eyB3b3Jrb3V0OiBXb3Jrb3V0OyBleGVyY2lzZUxvZ3M6IEV4ZXJjaXNlTG9nW10gfT4ge1xuICAgICAgY29uc3Qgd29ya0lkID0gdGhpcy5nZW5lcmF0ZUlkKCk7IC8vIFVzZSB0aGlzLmdlbmVyYXRlSWQoKSBzaW5jZSBpdCdzIGEgY2xhc3MgbWV0aG9kXG4gICAgICBjb25zdCBleGVyY2lzZVJlZmVyZW5jZXM6IEV4ZXJjaXNlUmVmZXJlbmNlW10gPSBbXTtcbiAgICAgIGNvbnN0IGV4ZXJjaXNlTG9nczogRXhlcmNpc2VMb2dbXSA9IFtdO1xuXG4gICAgICBjb25zb2xlLmxvZyhcIkV4ZXJjaXNlIGRldGFpbHMgcGFzc2VkIGluOlwiLCBleGVyY2lzZURldGFpbHMpO1xuXG4gIC8vIEVuc3VyZSBleGVyY2lzZSBkZXRhaWxzIGFyZSB2YWxpZCBiZWZvcmUgcHJvY2Vzc2luZ1xuICBjb25zdCB2YWxpZEV4ZXJjaXNlRGV0YWlscyA9IGV4ZXJjaXNlRGV0YWlscy5maWx0ZXIoZGV0YWlsID0+IGRldGFpbD8uZXhlcmNpc2UgJiYgZGV0YWlsLmV4ZXJjaXNlLmlkKTtcblxuICB2YWxpZEV4ZXJjaXNlRGV0YWlscy5mb3JFYWNoKChkZXRhaWwsIGluZGV4KSA9PiB7XG4gICAgaWYgKGRldGFpbC5leGVyY2lzZS5pZCA9PSBudWxsKSB7IHJldHVybiB9XG5cbiAgICBjb25zb2xlLmxvZyhcIkRldGFpbCBiZWluZyB1c2VkOlwiLCBkZXRhaWwpO1xuICAgIC8vIENyZWF0ZSB0aGUgY2F0ZWdvcnkgZmlyc3RcbiAgICBjb25zdCBjYXRlZ29yeSA9IHtcbiAgICAgIHR5cGU6IGRldGFpbC5jYXRlZ29yeT8udHlwZSA9PT0gJ3dlaWdodC10cmFpbmluZycgXG4gICAgICAgID8gJ3dlaWdodC10cmFpbmluZydcbiAgICAgICAgOiAnY2FyZGlvJyxcbiAgICAgIGRldGFpbHM6IGRldGFpbC5jYXRlZ29yeT8udHlwZSA9PT0gJ3dlaWdodC10cmFpbmluZycgXG4gICAgICAgID8ge1xuICAgICAgICAgICAgc2V0czogZGV0YWlsLmNhdGVnb3J5Py5kZXRhaWxzPy5zZXRzID8/IDMsXG4gICAgICAgICAgICByZXBzOiBkZXRhaWwuY2F0ZWdvcnk/LmRldGFpbHM/LnJlcHMgPz8gWycxMiddLFxuICAgICAgICAgICAgd2VpZ2h0OiBkZXRhaWwuY2F0ZWdvcnk/LmRldGFpbHM/LndlaWdodCA/PyAwLFxuICAgICAgICAgICAgc2NyZWVuVGltZTogZGV0YWlsLmNhdGVnb3J5Py5kZXRhaWxzPy5zY3JlZW5UaW1lID8/IDAsXG4gICAgICAgICAgICBzZWxlY3RlZFZpZGVvOiBkZXRhaWwuY2F0ZWdvcnk/LmRldGFpbHM/LnNlbGVjdGVkVmlkZW8gPz8gbnVsbFxuICAgICAgICAgIH1cbiAgICAgICAgOiB7XG4gICAgICAgICAgICBkdXJhdGlvbjogKGRldGFpbC5jYXRlZ29yeT8uZGV0YWlscyBhcyBhbnkpPy5kdXJhdGlvbiA/PyA2MCxcbiAgICAgICAgICAgIGJwbTogKGRldGFpbC5jYXRlZ29yeT8uZGV0YWlscyBhcyBhbnkpPy5icG0gPz8gMTQwLFxuICAgICAgICAgICAgY2Fsb3JpZXM6IChkZXRhaWwuY2F0ZWdvcnk/LmRldGFpbHMgYXMgYW55KT8uY2Fsb3JpZXMgPz8gMCxcbiAgICAgICAgICAgIHNjcmVlblRpbWU6IGRldGFpbC5jYXRlZ29yeT8uZGV0YWlscz8uc2NyZWVuVGltZSA/PyAwLFxuICAgICAgICAgICAgc2VsZWN0ZWRWaWRlbzogZGV0YWlsLmNhdGVnb3J5Py5kZXRhaWxzPy5zZWxlY3RlZFZpZGVvID8/IG51bGxcbiAgICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnNvbGUubG9nKFwiQ2F0ZWdvcnkgYmVpbmcgdXNlZDpcIiwgY2F0ZWdvcnkpOyAvLyBEZWJ1ZyBsb2dcblxuICAgIC8vIENyZWF0ZSBleGVyY2lzZSBpbnN0YW5jZSB3aXRoIG91ciBuZXcgY2F0ZWdvcnlcbiAgICBjb25zdCBleGVyY2lzZUluc3RhbmNlID0ge1xuICAgICAgLi4uZGV0YWlsLmV4ZXJjaXNlLFxuICAgICAgY2F0ZWdvcnk6IGNhdGVnb3J5LnR5cGUgPT09ICd3ZWlnaHQtdHJhaW5pbmcnIFxuICAgICAgICAgID8gRXhlcmNpc2VDYXRlZ29yeS53ZWlnaHRUcmFpbmluZyh7XG4gICAgICAgICAgICAgIHNldHM6IGNhdGVnb3J5LmRldGFpbHM/LnNldHMgPz8gMyxcbiAgICAgICAgICAgICAgcmVwczogY2F0ZWdvcnkuZGV0YWlscz8ucmVwcyA/PyBbJzEyJ10sXG4gICAgICAgICAgICAgIHdlaWdodDogY2F0ZWdvcnkuZGV0YWlscz8ud2VpZ2h0ID8/IDAsXG4gICAgICAgICAgICAgIHNjcmVlblRpbWU6IGNhdGVnb3J5LmRldGFpbHM/LnNjcmVlblRpbWUgPz8gMCxcbiAgICAgICAgICAgICAgc2VsZWN0ZWRWaWRlbzogY2F0ZWdvcnkuZGV0YWlscz8uc2VsZWN0ZWRWaWRlbyA/PyBudWxsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIDogRXhlcmNpc2VDYXRlZ29yeS5jYXJkaW8oe1xuICAgICAgICAgICAgICBkdXJhdGlvbjogY2F0ZWdvcnkuZGV0YWlscz8uZHVyYXRpb24gPz8gNjAsXG4gICAgICAgICAgICAgIGJwbTogY2F0ZWdvcnkuZGV0YWlscz8uYnBtID8/IDE0MCxcbiAgICAgICAgICAgICAgY2Fsb3JpZXM6IGNhdGVnb3J5LmRldGFpbHM/LmNhbG9yaWVzID8/IDAsXG4gICAgICAgICAgICAgIHNjcmVlblRpbWU6IGNhdGVnb3J5LmRldGFpbHM/LnNjcmVlblRpbWUgPz8gMCxcbiAgICAgICAgICAgICAgc2VsZWN0ZWRWaWRlbzogY2F0ZWdvcnkuZGV0YWlscz8uc2VsZWN0ZWRWaWRlbyA/PyBudWxsXG4gICAgICAgICAgICB9KVxuICAgIH07XG5cbiAgICBjb25zb2xlLmxvZyhcIkV4ZXJjaXNlIGluc3RhbmNlIGJlaW5nIHVzZWQ6XCIsIGV4ZXJjaXNlSW5zdGFuY2UpO1xuXG4gICAgdmFyIGV4ZXJjaXNlSW5zdGFuY2VDbGFzcyA9IG5ldyBFeGVyY2lzZShleGVyY2lzZUluc3RhbmNlKTtcblxuICAgIGNvbnNvbGUubG9nKFwiRXhlcmNpc2UgaW5zdGFuY2UgT2JqZWN0IGJlaW5nIHVzZWQ6XCIsIGV4ZXJjaXNlSW5zdGFuY2VDbGFzcyk7XG5cbiAgICAvLyBDcmVhdGUgZXhlcmNpc2UgcmVmZXJlbmNlIHVzaW5nIHRoZSBjb25zdHJ1Y3RvclxuICAgIGNvbnN0IGV4ZXJjaXNlUmVmID0gbmV3IEV4ZXJjaXNlUmVmZXJlbmNlKHtcbiAgICAgIGV4ZXJjaXNlOiBleGVyY2lzZUluc3RhbmNlQ2xhc3MsXG4gICAgICBncm91cElkOiBkZXRhaWwuZ3JvdXBJZCB8fCAwXG4gICAgICAvLyBpc0NvbXBsZXRlZCB3aWxsIGJlIGRlZmF1bHRlZCB0byBmYWxzZSBieSB0aGUgRXhlcmNpc2VSZWZlcmVuY2UgY29uc3RydWN0b3JcbiAgICB9KTtcbiAgICBleGVyY2lzZVJlZmVyZW5jZXMucHVzaChleGVyY2lzZVJlZik7XG5cbiAgICAvLyBDcmVhdGUgbG9ncyB1c2luZyB0aGUgc2FtZSBjYXRlZ29yeSBkZXRhaWxzXG4gICAgY29uc3Qgc2V0cyA9IGNhdGVnb3J5LmRldGFpbHM/LnNldHMgPz8gMztcbiAgICBjb25zdCByZXBzID0gY2F0ZWdvcnkuZGV0YWlscz8ucmVwcyA/PyBbJzEyJ107XG4gICAgY29uc3Qgd2VpZ2h0ID0gY2F0ZWdvcnkuZGV0YWlscz8ud2VpZ2h0ID8/IDA7XG5cbiAgICAvLyBDcmVhdGUgbG9ncyBmb3IgZWFjaCBzZXQgd2l0aCB2YWxpZGF0ZWQgZGF0YVxuICAgIGNvbnN0IHNldHNMb2dzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogc2V0cyB9LCAoKSA9PiBcbiAgICAgIG5ldyBSZXBzQW5kV2VpZ2h0TG9nKHtcbiAgICAgICAgcmVwczogcGFyc2VJbnQocmVwc1swXSB8fCAnMTInLCAxMCksXG4gICAgICAgIHdlaWdodDogd2VpZ2h0IHx8IDBcbiAgICAgIH0pXG4gICAgKTtcblxuICAgIC8vIENyZWF0ZSBleGVyY2lzZSBsb2cgd2l0aCB2YWxpZGF0ZWQgZGF0YVxuICAgIGNvbnN0IGV4ZXJjaXNlTG9nSWQgPSBleGVyY2lzZVNlcnZpY2UuZ2VuZXJhdGVFeGVyY2lzZUxvZ0lEKFxuICAgICAgd29ya0lkLFxuICAgICAgdXNlclNlcnZpY2Uubm9uVUlDdXJyZW50VXNlcj8uaWQgfHwgJ2Fub255bW91cydcbiAgICApO1xuXG4gICAgY29uc3QgbG9nID0gbmV3IEV4ZXJjaXNlTG9nKHtcbiAgICAgIGlkOiBleGVyY2lzZUxvZ0lkLFxuICAgICAgd29ya291dElkOiB3b3JrSWQsXG4gICAgICB1c2VySWQ6IHVzZXJTZXJ2aWNlLm5vblVJQ3VycmVudFVzZXI/LmlkIHx8ICdhbm9ueW1vdXMnLFxuICAgICAgZXhlcmNpc2U6IGV4ZXJjaXNlSW5zdGFuY2UsXG4gICAgICBsb2dzOiBzZXRzTG9ncyxcbiAgICAgIGZlZWRiYWNrOiAnJyxcbiAgICAgIG5vdGU6IGRldGFpbC5ub3RlcyB8fCAnJyxcbiAgICAgIGlzU3BsaXQ6IGRldGFpbC5pc1NwbGl0IHx8IGZhbHNlLFxuICAgICAgbG9nU3VibWl0dGVkOiBmYWxzZSxcbiAgICAgIGxvZ0lzRWRpdGluZzogZmFsc2UsXG4gICAgICBpc0NvbXBsZXRlZDogZmFsc2UsXG4gICAgICBvcmRlcjogaW5kZXggKyAxLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgY29tcGxldGVkQXQ6IG5ldyBEYXRlKClcbiAgICB9KTtcbiAgICBcbiAgICBleGVyY2lzZUxvZ3MucHVzaChsb2cpO1xuICB9KTtcblxuICAvLyBDcmVhdGUgd29ya291dCB3aXRoIHZhbGlkYXRlZCBkYXRhXG4gIGNvbnN0IG5ld1dvcmtvdXQgPSBuZXcgV29ya291dCh7XG4gICAgaWQ6IHdvcmtJZCxcbiAgICByb3VuZFdvcmtvdXRJZDogJycsXG4gICAgZXhlcmNpc2VzOiBleGVyY2lzZVJlZmVyZW5jZXMsXG4gICAgbG9nczogZXhlcmNpc2VMb2dzLFxuICAgIHRpdGxlOiAnJyxcbiAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgZHVyYXRpb246IDAsXG4gICAgd29ya291dFJhdGluZzogJ25vbmUnIGFzIFdvcmtvdXRSYXRpbmcsXG4gICAgdXNlQXV0aG9yQ29udGVudDogZmFsc2UsXG4gICAgaXNDb21wbGV0ZWQ6IGZhbHNlLFxuICAgIHdvcmtvdXRTdGF0dXM6ICdhcmNoaXZlZCcgYXMgV29ya291dFN0YXR1cyxcbiAgICBhdXRob3I6IHVzZXJTZXJ2aWNlLm5vblVJQ3VycmVudFVzZXI/LmlkIHx8ICdQdWxzZUFJJyxcbiAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIHpvbmU6IFdvcmtvdXQuZGV0ZXJtaW5lV29ya291dFpvbmUoZXhlcmNpc2VSZWZlcmVuY2VzKSB8fCAnZnVsbCcgYXMgQm9keVpvbmVcbiAgfSk7XG5cbiAgcmV0dXJuIHsgd29ya291dDogbmV3V29ya291dCwgZXhlcmNpc2VMb2dzIH07XG5cbn1cblxuLy8gQWRkIHRoaXMgZnVuY3Rpb24gdG8geW91ciBXb3Jrb3V0U2VydmljZSBjbGFzc1xuXG4vKipcbiAqIEZldGNoZXMgcmFuZG9tIHRyZW5kaW5nIHN0YWNrIHdvcmtvdXRzIHdpdGggdGhlaXIgdmlkZW9zLlxuICogQWRhcHRzIHRoZSBpT1MgaW1wbGVtZW50YXRpb24gZm9yIHdlYi5cbiAqIEByZXR1cm5zIHtQcm9taXNlPFdvcmtvdXRbXT59IEFycmF5IG9mIHdvcmtvdXQgb2JqZWN0cyB3aXRoIHZpZGVvc1xuICovXG5hc3luYyBmZXRjaFJhbmRvbVRyZW5kaW5nU3RhY2tzKCk6IFByb21pc2U8V29ya291dFtdPiB7XG4gIHRyeSB7XG4gICAgLy8gRmlyc3QsIGxldCdzIGdldCBhbGwgYXZhaWxhYmxlIHN0YWNrcyBmcm9tIHRoZSAnc3RhY2tzJyBjb2xsZWN0aW9uXG4gICAgY29uc3Qgc3RhY2tzUmVmID0gY29sbGVjdGlvbihkYiwgJ3N0YWNrcycpO1xuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhzdGFja3NSZWYpO1xuXG4gICAgaWYgKHNuYXBzaG90LmVtcHR5KSB7XG4gICAgICBjb25zb2xlLmxvZygnTm8gc3RhY2tzIGZvdW5kLicpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIC8vIEdldCBhbGwgZG9jdW1lbnRzIGFuZCBzaHVmZmxlIHRoZW1cbiAgICBjb25zdCBkb2N1bWVudHMgPSBzbmFwc2hvdC5kb2NzO1xuICAgIGNvbnN0IHNodWZmbGVkRG9jcyA9IFsuLi5kb2N1bWVudHNdLnNvcnQoKCkgPT4gMC41IC0gTWF0aC5yYW5kb20oKSk7XG4gICAgXG4gICAgLy8gVGFrZSB1cCB0byAxMCByYW5kb20gc3RhY2tzXG4gICAgY29uc3QgcmFuZG9tU3RhY2tzID0gc2h1ZmZsZWREb2NzLnNsaWNlKDAsIDEwKS5tYXAoZG9jID0+IHtcbiAgICAgIHJldHVybiBuZXcgV29ya291dCh7XG4gICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgIC4uLmRvYy5kYXRhKClcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gRmV0Y2ggdmlkZW9zIGZvciBlYWNoIHdvcmtvdXRcbiAgICBjb25zdCB3b3Jrb3V0c1dpdGhWaWRlb3MgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgIHJhbmRvbVN0YWNrcy5tYXAoYXN5bmMgKHdvcmtvdXQpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5mZXRjaFZpZGVvc0ZvcldvcmtvdXQod29ya291dCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmV0Y2hpbmcgdmlkZW9zIGZvciB3b3Jrb3V0ICR7d29ya291dC5pZH06YCwgZXJyb3IpO1xuICAgICAgICAgIHJldHVybiB3b3Jrb3V0OyAvLyBSZXR1cm4gdGhlIHdvcmtvdXQgd2l0aG91dCB2aWRlb3MgaWYgdGhlcmUncyBhbiBlcnJvclxuICAgICAgICB9XG4gICAgICB9KVxuICAgICk7XG5cbiAgICByZXR1cm4gd29ya291dHNXaXRoVmlkZW9zO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHJhbmRvbSB0cmVuZGluZyBzdGFja3M6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogRmV0Y2hlcyBhY3RpdmUgcm91bmRzL2NoYWxsZW5nZXMgdGhhdCBhcmUgY3VycmVudGx5IGxpdmUuXG4gKiBBZGFwdHMgdGhlIGlPUyBpbXBsZW1lbnRhdGlvbiBmb3Igd2ViLlxuICogQHJldHVybnMge1Byb21pc2U8U3dlYXRsaXN0Q29sbGVjdGlvbltdPn0gQXJyYXkgb2YgbGl2ZSByb3VuZCBjb2xsZWN0aW9uc1xuICovXG5hc3luYyBmZXRjaExpdmVSb3VuZHMoKTogUHJvbWlzZTxTd2VhdGxpc3RDb2xsZWN0aW9uW10+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBhIHF1ZXJ5IGZvciBwdWJsaXNoZWQgY2hhbGxlbmdlcyB0aGF0IGFyZSBjdXJyZW50bHkgYWN0aXZlXG4gICAgY29uc3QgY29sbGVjdGlvbnNSZWYgPSBjb2xsZWN0aW9uKGRiLCAnc3dlYXRsaXN0LWNvbGxlY3Rpb24nKTtcbiAgICBjb25zdCBxID0gcXVlcnkoXG4gICAgICBjb2xsZWN0aW9uc1JlZixcbiAgICAgIHdoZXJlKCdjaGFsbGVuZ2Uuc3RhdHVzJywgJz09JywgJ3B1Ymxpc2hlZCcpLFxuICAgICAgd2hlcmUoJ2NoYWxsZW5nZS5lbmREYXRlJywgJz4nLCBub3cpLFxuICAgICAgd2hlcmUoJ2NoYWxsZW5nZS5zdGFydERhdGUnLCAnPCcsIG5vdyksXG4gICAgICBvcmRlckJ5KCdjaGFsbGVuZ2Uuc3RhcnREYXRlJywgJ2Rlc2MnKVxuICAgICk7XG5cbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgXG4gICAgLy8gRmlsdGVyIGFuZCBtYXAgdGhlIGNvbGxlY3Rpb25zXG4gICAgY29uc3QgY29sbGVjdGlvbnMgPSBzbmFwc2hvdC5kb2NzXG4gICAgICAubWFwKGRvYyA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgU3dlYXRsaXN0Q29sbGVjdGlvbih7XG4gICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAuLi5kb2MuZGF0YSgpXG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICAgIC5maWx0ZXIoY29sbGVjdGlvbiA9PiB7XG4gICAgICAgIC8vIENoZWNrIGlmIG93bmVySWQgaXMgbm90IGVtcHR5IGFuZCBjb2hvcnRBdXRob3IgaXMgbm90IG5pbFxuICAgICAgICBjb25zdCBjb2hvcnRBdXRob3IgPSBjb2xsZWN0aW9uLmNoYWxsZW5nZT8uY29ob3J0QXV0aG9yO1xuICAgICAgICByZXR1cm4gY29ob3J0QXV0aG9yICYmIFxuICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShjb2xsZWN0aW9uLm93bmVySWQpICYmIFxuICAgICAgICAgICAgICAgY29sbGVjdGlvbi5vd25lcklkLmxlbmd0aCA+IDAgJiYgXG4gICAgICAgICAgICAgICBjb2xsZWN0aW9uLm93bmVySWQuc29tZShpZCA9PiBjb2xsZWN0aW9uLmNoYWxsZW5nZT8uY29ob3J0QXV0aG9yLmluY2x1ZGVzKGlkKSk7XG4gICAgICB9KTtcbiAgICBcbiAgICAvLyBMaW1pdCB0byAxMCBjb2xsZWN0aW9uc1xuICAgIHJldHVybiBjb2xsZWN0aW9ucy5zbGljZSgwLCAxMCk7XG4gICAgXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgbGl2ZSByb3VuZHM6JywgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG4vKipcbiAqIEZldGNoZXMgdmlkZW9zIGZvciBhIHdvcmtvdXQncyBleGVyY2lzZXNcbiAqIEBwYXJhbSB7V29ya291dH0gd29ya291dCAtIFRoZSB3b3Jrb3V0IHRvIGZldGNoIHZpZGVvcyBmb3JcbiAqIEByZXR1cm5zIHtQcm9taXNlPFdvcmtvdXQ+fSAtIFRoZSB3b3Jrb3V0IHdpdGggdmlkZW9zIGFkZGVkIHRvIGl0cyBleGVyY2lzZXNcbiAqL1xucHJpdmF0ZSBhc3luYyBmZXRjaFZpZGVvc0ZvcldvcmtvdXQod29ya291dDogV29ya291dCk6IFByb21pc2U8V29ya291dD4ge1xuICAvLyBHZXQgYWxsIGV4ZXJjaXNlcyB3aXRoIHZpZGVvc1xuICBjb25zdCBleGVyY2lzZXNXaXRoVmlkZW9zID0gYXdhaXQgdGhpcy5mZXRjaEFuZE1hcEV4ZXJjaXNlc1dpdGhWaWRlb3MoKTtcbiAgXG4gIC8vIE1hcCB0aGUgZXhlcmNpc2VzIGluIHRoZSB3b3Jrb3V0IHRvIGluY2x1ZGUgdmlkZW9zXG4gIGNvbnN0IHVwZGF0ZWRFeGVyY2lzZXMgPSB3b3Jrb3V0LmV4ZXJjaXNlcy5tYXAoZXhlcmNpc2VSZWYgPT4ge1xuICAgIGNvbnN0IGV4ZXJjaXNlTmFtZSA9IGV4ZXJjaXNlUmVmLmV4ZXJjaXNlPy5uYW1lPy50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICBjb25zdCBtYXRjaGluZ0V4ZXJjaXNlID0gZXhlcmNpc2VzV2l0aFZpZGVvcy5maW5kKFxuICAgICAgZXggPT4gZXgubmFtZS50b0xvd2VyQ2FzZSgpLnRyaW0oKSA9PT0gZXhlcmNpc2VOYW1lXG4gICAgKTtcbiAgICBcbiAgICBpZiAobWF0Y2hpbmdFeGVyY2lzZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZXhlcmNpc2VSZWYsXG4gICAgICAgIGV4ZXJjaXNlOiBuZXcgRXhlcmNpc2Uoe1xuICAgICAgICAgIC4uLmV4ZXJjaXNlUmVmLmV4ZXJjaXNlLFxuICAgICAgICAgIHZpZGVvczogbWF0Y2hpbmdFeGVyY2lzZS52aWRlb3MgfHwgW11cbiAgICAgICAgfSlcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBleGVyY2lzZVJlZjtcbiAgfSk7XG4gIFxuICAvLyBDcmVhdGUgYSBuZXcgd29ya291dCB3aXRoIHRoZSB1cGRhdGVkIGV4ZXJjaXNlc1xuICByZXR1cm4gbmV3IFdvcmtvdXQoe1xuICAgIC4uLndvcmtvdXQsXG4gICAgZXhlcmNpc2VzOiB1cGRhdGVkRXhlcmNpc2VzXG4gIH0pO1xufVxuXG4vLyBZb3UgbWF5IG5lZWQgdG8gYWRkIGEgZmFsbGJhY2sgbWV0aG9kIGlmICdzdGFja3MnIGNvbGxlY3Rpb24gZG9lc24ndCBleGlzdDpcbmFzeW5jIGZldGNoUmFuZG9tVHJlbmRpbmdTdGFja3NGYWxsYmFjaygpOiBQcm9taXNlPFdvcmtvdXRbXT4ge1xuICB0cnkge1xuICAgIC8vIElmICdzdGFja3MnIGNvbGxlY3Rpb24gZG9lc24ndCBleGlzdCwgd2UgY2FuIGZldGNoIGZyb20gdXNlciB3b3Jrb3V0cyBhcyBmYWxsYmFja1xuICAgIGlmICghdXNlclNlcnZpY2Uubm9uVUlDdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgXG4gICAgY29uc3Qgd29ya291dHMgPSBhd2FpdCB0aGlzLmdldEFsbFN3ZWF0bGlzdHModXNlclNlcnZpY2Uubm9uVUlDdXJyZW50VXNlci5pZCk7XG4gICAgXG4gICAgLy8gU2h1ZmZsZSBhbmQgdGFrZSB1cCB0byAxMFxuICAgIGNvbnN0IHNodWZmbGVkV29ya291dHMgPSBbLi4ud29ya291dHNdLnNvcnQoKCkgPT4gMC41IC0gTWF0aC5yYW5kb20oKSkuc2xpY2UoMCwgMTApO1xuICAgIFxuICAgIHJldHVybiBzaHVmZmxlZFdvcmtvdXRzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGZldGNoUmFuZG9tVHJlbmRpbmdTdGFja3NGYWxsYmFjazonLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbiAgYXN5bmMgZ2V0VXNlckJ5SWQodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXI+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlckRvYyA9IGF3YWl0IGdldERvYyhkb2MoZGIsICd1c2VycycsIHVzZXJJZCkpO1xuICAgICAgaWYgKCF1c2VyRG9jLmV4aXN0cygpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBub3QgZm91bmQnKTtcbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gbmV3IFVzZXIodXNlckRvYy5pZCwge1xuICAgICAgICBpZDogdXNlckRvYy5pZCxcbiAgICAgICAgLi4udXNlckRvYy5kYXRhKCkgXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyIGJ5IElEOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIEluIFdvcmtvdXRTZXJ2aWNlXG4gIGFzeW5jIHJldmVydEF1dGhvckZvcm1hdCh3b3Jrb3V0SWQ6IHN0cmluZywgYXV0aG9ySWQ6IHN0cmluZykge1xuICAgIGlmICghdXNlclNlcnZpY2Uubm9uVUlDdXJyZW50VXNlcj8uaWQpIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBzaWduZWQgaW4nKTtcbiAgICBcbiAgICBjb25zdCB3b3Jrb3V0UmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VyU2VydmljZS5ub25VSUN1cnJlbnRVc2VyLmlkLCAnTXlDcmVhdGVkV29ya291dHMnLCB3b3Jrb3V0SWQpO1xuICAgIGF3YWl0IHVwZGF0ZURvYyh3b3Jrb3V0UmVmLCB7XG4gICAgICBhdXRob3I6IGF1dGhvcklkXG4gICAgfSk7XG4gICB9XG5cbmFzeW5jIHVwZGF0ZVdvcmtvdXQod29ya291dDogV29ya291dCk6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoIXVzZXJTZXJ2aWNlLm5vblVJQ3VycmVudFVzZXI/LmlkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdObyB1c2VyIGlzIHNpZ25lZCBpbicpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB3b3Jrb3V0UmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VyU2VydmljZS5ub25VSUN1cnJlbnRVc2VyLmlkLCAnTXlDcmVhdGVkV29ya291dHMnLCB3b3Jrb3V0LmlkKTtcbiAgICBhd2FpdCBzZXREb2Mod29ya291dFJlZiwgd29ya291dC50b0RpY3Rpb25hcnkoKSwgeyBtZXJnZTogdHJ1ZSB9KTtcblxuICAgIC8vIFVwZGF0ZSBsb2dzIGlmIHRoZXkgZXhpc3RcbiAgICBpZiAod29ya291dC5sb2dzICYmIHdvcmtvdXQubG9ncy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xuICAgICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24od29ya291dFJlZiwgJ2xvZ3MnKTtcblxuICAgICAgd29ya291dC5sb2dzLmZvckVhY2gobG9nID0+IHtcbiAgICAgICAgY29uc3QgbG9nUmVmID0gZG9jKGxvZ3NSZWYsIGxvZy5pZCk7XG4gICAgICAgIGJhdGNoLnNldChsb2dSZWYsIGxvZy50b0RpY3Rpb25hcnkoKSwgeyBtZXJnZTogdHJ1ZSB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBiYXRjaC5jb21taXQoKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgd29ya291dDonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuICAvKipcbiAgICogRmV0Y2ggdGhlIHVzZXIncyBjdXJyZW50IHdvcmtvdXQgKGVpdGhlciBRdWV1ZWRVcCBvciBJblByb2dyZXNzKS5cbiAgICovXG4gIGFzeW5jIGZldGNoQ3VycmVudFdvcmtvdXQodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFdvcmtvdXQgfCBudWxsPiB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHRoaXMuZmV0Y2hDdXJyZW50V29ya291dFNlc3Npb24odXNlcklkKTtcbiAgICByZXR1cm4gc2Vzc2lvbi53b3Jrb3V0O1xuICB9XG5cbiAgYXN5bmMgZ2V0QWxsU3dlYXRsaXN0cyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8V29ya291dFtdPiB7XG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBJRCBpcyByZXF1aXJlZCcpO1xuICAgIH1cbiAgXG4gICAgLy8gUmVmZXJlbmNlIHRvIHRoZSB1c2VyJ3Mgd29ya291dCBjb2xsZWN0aW9uXG4gICAgY29uc3Qgd29ya291dHNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCB1c2VySWQsICdNeUNyZWF0ZWRXb3Jrb3V0cycpO1xuICBcbiAgICB0cnkge1xuICAgICAgLy8gRmV0Y2ggZXhlcmNpc2VzIHdpdGggdmlkZW9zXG4gICAgICBjb25zdCBleGVyY2lzZXNXaXRoVmlkZW9zID0gYXdhaXQgdGhpcy5mZXRjaEFuZE1hcEV4ZXJjaXNlc1dpdGhWaWRlb3MoKTtcbiAgXG4gICAgICAvLyBRdWVyeSB0byBmZXRjaCBhbGwgd29ya291dHNcbiAgICAgIGNvbnN0IHdvcmtvdXRzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHdvcmtvdXRzUmVmKTtcbiAgICAgIGNvbnN0IHdvcmtvdXRzOiBXb3Jrb3V0W10gPSBbXTtcbiAgXG4gICAgICAvLyBQcm9jZXNzIGVhY2ggd29ya291dCBkb2N1bWVudFxuICAgICAgZm9yIChjb25zdCB3b3Jrb3V0RG9jIG9mIHdvcmtvdXRzU25hcHNob3QuZG9jcykge1xuICAgICAgICBjb25zdCB3b3Jrb3V0RGF0YSA9IHdvcmtvdXREb2MuZGF0YSgpO1xuICAgICAgICBjb25zdCB3b3Jrb3V0SWQgPSB3b3Jrb3V0RG9jLmlkO1xuICBcbiAgICAgICAgLy8gTWFwIHRoZSBleGVyY2lzZXMgaW4gdGhlIHdvcmtvdXQgdG8gdGhlIGZ1bGwgZXhlcmNpc2Ugb2JqZWN0cyB3aXRoIHZpZGVvc1xuICAgICAgICBjb25zdCBtYXBwZWRFeGVyY2lzZXMgPSAod29ya291dERhdGEuZXhlcmNpc2VzIHx8IFtdKS5tYXAoKGV4ZXJjaXNlUmVmOiBhbnkpID0+IHtcbiAgICAgICAgICBjb25zdCBmdWxsRXhlcmNpc2UgPSBleGVyY2lzZXNXaXRoVmlkZW9zLmZpbmQoZXggPT4gZXgubmFtZSA9PT0gZXhlcmNpc2VSZWYuZXhlcmNpc2UubmFtZSk7XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZXhlcmNpc2VSZWYsXG4gICAgICAgICAgICBleGVyY2lzZTogZnVsbEV4ZXJjaXNlIHx8IGV4ZXJjaXNlUmVmXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgXG4gICAgICAgIC8vIFBhcnNlIHdvcmtvdXQgZGF0YSBpbnRvIHRoZSBkZXNpcmVkIHN0cnVjdHVyZVxuICAgICAgICBjb25zdCB3b3Jrb3V0ID0gbmV3IFdvcmtvdXQoe1xuICAgICAgICAgIGlkOiB3b3Jrb3V0RGF0YS5pZCB8fCAnJyxcbiAgICAgICAgICByb3VuZFdvcmtvdXRJZDogd29ya291dERhdGEucm91bmRXb3Jrb3V0SWQgfHwgJycsXG4gICAgICAgICAgY29sbGVjdGlvbklkOiB3b3Jrb3V0RGF0YS5jb2xsZWN0aW9uSWQsXG4gICAgICAgICAgZXhlcmNpc2VzOiBtYXBwZWRFeGVyY2lzZXMsXG4gICAgICAgICAgY2hhbGxlbmdlOiB3b3Jrb3V0RGF0YS5jaGFsbGVuZ2UsXG4gICAgICAgICAgbG9nczogW10sXG4gICAgICAgICAgdGl0bGU6IHdvcmtvdXREYXRhLnRpdGxlIHx8ICcnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiB3b3Jrb3V0RGF0YS5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgICBkdXJhdGlvbjogd29ya291dERhdGEuZHVyYXRpb24gfHwgMCxcbiAgICAgICAgICB3b3Jrb3V0UmF0aW5nOiB3b3Jrb3V0RGF0YS53b3Jrb3V0UmF0aW5nLFxuICAgICAgICAgIHVzZUF1dGhvckNvbnRlbnQ6IHdvcmtvdXREYXRhLnVzZUF1dGhvckNvbnRlbnQgfHwgZmFsc2UsXG4gICAgICAgICAgaXNDb21wbGV0ZWQ6IHdvcmtvdXREYXRhLmlzQ29tcGxldGVkIHx8IGZhbHNlLFxuICAgICAgICAgIHdvcmtvdXRTdGF0dXM6IHdvcmtvdXREYXRhLndvcmtvdXRTdGF0dXMgfHwgJ25vdFN0YXJ0ZWQnLFxuICAgICAgICAgIHN0YXJ0VGltZTogd29ya291dERhdGEuc3RhcnRUaW1lID8gbmV3IERhdGUod29ya291dERhdGEuc3RhcnRUaW1lKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBvcmRlcjogd29ya291dERhdGEub3JkZXIsXG4gICAgICAgICAgYXV0aG9yOiB3b3Jrb3V0RGF0YS5hdXRob3IgfHwgdXNlcklkLFxuICAgICAgICAgIGNyZWF0ZWRBdDogd29ya291dERhdGEuY3JlYXRlZEF0ID8gbmV3IERhdGUod29ya291dERhdGEuY3JlYXRlZEF0KSA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgdXBkYXRlZEF0OiB3b3Jrb3V0RGF0YS51cGRhdGVkQXQgPyBuZXcgRGF0ZSh3b3Jrb3V0RGF0YS51cGRhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICB6b25lOiB3b3Jrb3V0RGF0YS56b25lIHx8ICdGVUxMX0JPRFknLFxuICAgICAgICB9KTsgICAgICAgIFxuICBcbiAgICAgICAgLy8gRmV0Y2ggYW5kIHByb2Nlc3MgbG9nc1xuICAgICAgICBjb25zdCBsb2dzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgdXNlcklkLCAnTXlDcmVhdGVkV29ya291dHMnLCB3b3Jrb3V0SWQsICdsb2dzJyk7XG4gICAgICAgIGNvbnN0IGxvZ3NTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MobG9nc1JlZik7XG4gICAgICAgIHdvcmtvdXQubG9ncyA9IGxvZ3NTbmFwc2hvdC5kb2NzLm1hcCgobG9nRG9jKSA9PiAoe1xuICAgICAgICAgIC4uLmxvZ0RvYy5kYXRhKCksXG4gICAgICAgICAgaWQ6IGxvZ0RvYy5pZCxcbiAgICAgICAgfSkpIGFzIEV4ZXJjaXNlTG9nW107XG4gIFxuICAgICAgICB3b3Jrb3V0cy5wdXNoKHdvcmtvdXQpO1xuICAgICAgfVxuICBcbiAgICAgIHJldHVybiB3b3Jrb3V0cztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZmlyZXN0b3JlRXJyb3IgPSBlcnJvciBhcyBGaXJlc3RvcmVFcnJvcjtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHN3ZWF0bGlzdHM6JywgZmlyZXN0b3JlRXJyb3IubWVzc2FnZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBzd2VhdGxpc3RzJyk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0VXNlckNoYWxsZW5nZXNCeUNoYWxsZW5nZUlkKGNoYWxsZW5nZUlkOiBzdHJpbmcpOiBQcm9taXNlPHsgdXNlckNoYWxsZW5nZXM6IFVzZXJDaGFsbGVuZ2VbXTsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICAgIGNvbnN0IHVzZXJDaGFsbGVuZ2VzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXItY2hhbGxlbmdlJyk7XG4gICAgY29uc3QgcSA9IHF1ZXJ5KHVzZXJDaGFsbGVuZ2VzUmVmLCB3aGVyZSgnY2hhbGxlbmdlSWQnLCAnPT0nLCBjaGFsbGVuZ2VJZCkpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgICBjb25zdCB1c2VyQ2hhbGxlbmdlczogVXNlckNoYWxsZW5nZVtdID0gc25hcHNob3QuZG9jcy5tYXAoKGRvYzogRG9jdW1lbnREYXRhKSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgICByZXR1cm4gbmV3IFVzZXJDaGFsbGVuZ2UoZGF0YSk7XG4gICAgICB9KTtcbiAgICAgIGlmICh1c2VyQ2hhbGxlbmdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiB7IHVzZXJDaGFsbGVuZ2VzIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4geyB1c2VyQ2hhbGxlbmdlczogW10sIGVycm9yOiAnTm8gdXNlciBjaGFsbGVuZ2VzIGZvdW5kIGZvciB0aGlzIGNoYWxsZW5nZS4nIH07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgY2hhbGxlbmdlcyBieSBjaGFsbGVuZ2VJZDonLCBlcnJvcik7XG4gICAgICByZXR1cm4geyB1c2VyQ2hhbGxlbmdlczogW10sIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyB9O1xuICAgIH1cbiAgfVxuICBcbiAgLyoqXG4gICAqIEZldGNoZXMgd29ya291dCBzdW1tYXJpZXMgZm9yIGEgc3BlY2lmaWMgZGF0ZS5cbiAgICogQHBhcmFtIGRhdGUgLSBUaGUgZGF0ZSBmb3Igd2hpY2ggd29ya291dCBzdW1tYXJpZXMgYXJlIGJlaW5nIGZldGNoZWQuXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSByZXNvbHZpbmcgdG8gYW4gYXJyYXkgb2Ygd29ya291dCBzdW1tYXJpZXMuXG4gICAqIEB0aHJvd3MgSWYgbm8gdXNlciBpcyBzaWduZWQgaW4gb3IgaWYgdGhlIEZpcmVzdG9yZSBxdWVyeSBmYWlscy5cbiAgICovXG4gIGFzeW5jIGZldGNoV29ya291dFN1bW1hcmllcyhkYXRlOiBEYXRlKTogUHJvbWlzZTxXb3Jrb3V0U3VtbWFyeVtdPiB7XG4gICAgY29uc3QgY3VycmVudFVzZXIgPSB1c2VyU2VydmljZS5ub25VSUN1cnJlbnRVc2VyO1xuICAgIGlmICghY3VycmVudFVzZXI/LmlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgfVxuXG4gICAgLy8gRm9ybWF0IHRoZSBkYXRlIHRvIG1hdGNoIHRoZSBmb3JtYXQgaW4gRmlyZXN0b3JlICgnTU0tZGQteXl5eScpXG4gICAgY29uc3QgZm9ybWF0dGVkRGF0ZSA9IGZvcm1hdChkYXRlLCAnTU0tZGQteXl5eScpO1xuXG4gICAgLy8gUmVmZXJlbmNlIHRvIHRoZSB1c2VyJ3Mgd29ya291dFN1bW1hcmllcyBzdWJjb2xsZWN0aW9uXG4gICAgY29uc3Qgc3VtbWFyaWVzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgY3VycmVudFVzZXIuaWQsICd3b3Jrb3V0U3VtbWFyaWVzJyk7XG5cbiAgICAvLyBDcmVhdGUgYSBxdWVyeSB0byBmaWx0ZXIgZG9jdW1lbnRzIGJ5IHRoZSBzcGVjaWZpZWQgZGF0ZVxuICAgIGNvbnN0IHEgPSBxdWVyeShzdW1tYXJpZXNSZWYsIHdoZXJlKCdkYXRlJywgJz09JywgZm9ybWF0dGVkRGF0ZSkpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcblxuICAgICAgLy8gTWFwIHRoZSBkb2N1bWVudHMgdG8gYW4gYXJyYXkgb2YgV29ya291dFN1bW1hcnkgb2JqZWN0c1xuICAgICAgcmV0dXJuIHNuYXBzaG90LmRvY3MubWFwKChkb2M6IERvY3VtZW50RGF0YSk6IFdvcmtvdXRTdW1tYXJ5ID0+ICh7XG4gICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgIC4uLmRvYy5kYXRhKCksXG4gICAgICB9KSk7XG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgZmlyZXN0b3JlRXJyb3IgPSBlcnJvciBhcyBGaXJlc3RvcmVFcnJvcjtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHdvcmtvdXQgc3VtbWFyaWVzOicsIGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZldGNoQWxsV29ya291dFN1bW1hcmllcygpOiBQcm9taXNlPFdvcmtvdXRTdW1tYXJ5W10+IHtcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IHVzZXJTZXJ2aWNlLm5vblVJQ3VycmVudFVzZXI7XG4gICAgaWYgKCFjdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBpcyBzaWduZWQgaW4nKTtcbiAgICB9XG4gIFxuICAgIC8vIFJlZmVyZW5jZSB0byB0aGUgdXNlcidzIHdvcmtvdXRTdW1tYXJpZXMgc3ViY29sbGVjdGlvblxuICAgIGNvbnN0IHN1bW1hcmllc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycsIGN1cnJlbnRVc2VyLmlkLCAnd29ya291dFN1bW1hcnknKTtcbiAgXG4gICAgLy8gUXVlcnkgdG8gcmV0cmlldmUgYWxsIHdvcmtvdXQgc3VtbWFyaWVzLCBzb3J0ZWQgYnkgYGNyZWF0ZWRBdGAgaW4gYXNjZW5kaW5nIG9yZGVyXG4gICAgY29uc3QgcSA9IHF1ZXJ5KHN1bW1hcmllc1JlZiwgb3JkZXJCeSgnY3JlYXRlZEF0JywgJ2FzYycpKTsgLy8gQWRqdXN0IGZpZWxkIG5hbWUgYmFzZWQgb24geW91ciBzY2hlbWFcbiAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgXG4gICAgICAvLyBNYXAgdGhlIGRvY3VtZW50cyB0byBhbiBhcnJheSBvZiBXb3Jrb3V0U3VtbWFyeSBvYmplY3RzXG4gICAgICByZXR1cm4gc25hcHNob3QuZG9jcy5tYXAoKGRvYzogRG9jdW1lbnREYXRhKTogV29ya291dFN1bW1hcnkgPT4gKHtcbiAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgLi4uZG9jLmRhdGEoKSxcbiAgICAgIH0pKTtcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBmaXJlc3RvcmVFcnJvciA9IGVycm9yIGFzIEZpcmVzdG9yZUVycm9yO1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYWxsIHdvcmtvdXQgc3VtbWFyaWVzOicsIGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGZpcmVzdG9yZUVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gKiBGZXRjaCB1c2VyIGNoYWxsZW5nZXMgYnkgdXNlcklkLlxuICogQHBhcmFtIHVzZXJJZCBUaGUgSUQgb2YgdGhlIHVzZXIgdG8gZmV0Y2ggY2hhbGxlbmdlcyBmb3IuXG4gKiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIHRvIGFuIGFycmF5IG9mIHVzZXIgY2hhbGxlbmdlcy5cbiAqIEB0aHJvd3MgSWYgdGhlIEZpcmVzdG9yZSBxdWVyeSBmYWlscy5cbiAqL1xuYXN5bmMgZmV0Y2hVc2VyQ2hhbGxlbmdlc0J5VXNlcklkKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyQ2hhbGxlbmdlW10+IHtcbiAgY29uc3QgdXNlckNoYWxsZW5nZXNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlci1jaGFsbGVuZ2UnKTtcbiAgY29uc3QgcSA9IHF1ZXJ5KHVzZXJDaGFsbGVuZ2VzUmVmLCB3aGVyZSgndXNlcklkJywgJz09JywgdXNlcklkKSk7XG5cbiAgdHJ5IHtcbiAgICAvLyBjb25zb2xlLmxvZyhgRmV0Y2hpbmcgY2hhbGxlbmdlcyBmb3IgdXNlciBJRDogJHt1c2VySWR9YCk7XG5cbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG5cbiAgICAvLyBjb25zb2xlLmxvZyhgVG90YWwgY2hhbGxlbmdlcyBmZXRjaGVkOiAke3NuYXBzaG90LmRvY3MubGVuZ3RofWApO1xuXG4gICAgY29uc3QgdXNlckNoYWxsZW5nZXMgPSBzbmFwc2hvdC5kb2NzLm1hcCgoZG9jOiBEb2N1bWVudERhdGEpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgLy8gY29uc29sZS5sb2coYFByb2Nlc3NpbmcgY2hhbGxlbmdlIHdpdGggSUQ6ICR7ZG9jLmlkfWAsIGRhdGEpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kYXRhLFxuICAgICAgICBjaGFsbGVuZ2U6IGRhdGEuY2hhbGxlbmdlXG4gICAgICAgICAgPyBuZXcgQ2hhbGxlbmdlKHtcbiAgICAgICAgICAgICAgaWQ6IGRhdGEuY2hhbGxlbmdlLmlkLFxuICAgICAgICAgICAgICB0aXRsZTogZGF0YS5jaGFsbGVuZ2UudGl0bGUsXG4gICAgICAgICAgICAgIHN1YnRpdGxlOiBkYXRhLmNoYWxsZW5nZS5zdWJ0aXRsZSxcbiAgICAgICAgICAgICAgcGFydGljaXBhbnRzOiBkYXRhLmNoYWxsZW5nZS5wYXJ0aWNpcGFudHMgfHwgW10sXG4gICAgICAgICAgICAgIHN0YXR1czogZGF0YS5jaGFsbGVuZ2Uuc3RhdHVzIGFzIENoYWxsZW5nZVN0YXR1cyxcbiAgICAgICAgICAgICAgc3RhcnREYXRlOiBkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgZW5kRGF0ZTogZGF0YS5jaGFsbGVuZ2UuZW5kRGF0ZSA/IG5ldyBEYXRlKGRhdGEuY2hhbGxlbmdlLmVuZERhdGUpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgY3JlYXRlZEF0OiBkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS5jcmVhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgdXBkYXRlZEF0OiBkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQpIDogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgaW50cm9WaWRlb3M6IGRhdGEuY2hhbGxlbmdlLmludHJvVmlkZW9zIHx8IFtdLFxuICAgICAgICAgICAgICBvd25lcklkOiBkYXRhLmNoYWxsZW5nZS5vd25lcklkIHx8IFtdXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICBjcmVhdGVkQXQ6IGNvbnZlcnRUaW1lc3RhbXAoZGF0YS5jcmVhdGVkQXQpLFxuICAgICAgICB1cGRhdGVkQXQ6IGNvbnZlcnRUaW1lc3RhbXAoZGF0YS51cGRhdGVkQXQpLFxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8vIGNvbnNvbGUubG9nKCdBbGwgY2hhbGxlbmdlcyBhZnRlciBwcm9jZXNzaW5nOicsIEpTT04uc3RyaW5naWZ5KHVzZXJDaGFsbGVuZ2VzLCBudWxsLCAyKSk7XG5cbiAgICByZXR1cm4gdXNlckNoYWxsZW5nZXM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBjaGFsbGVuZ2VzIGJ5IHVzZXJJZDonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuYXN5bmMgZmV0Y2hDb2xsZWN0aW9uV2l0aFN3ZWF0TGlzdHMoY29sbGVjdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPHsgY29sbGVjdGlvbjogYW55LCBzd2VhdExpc3RzOiBXb3Jrb3V0W10gfT4ge1xuICB0cnkge1xuICAgIC8vIEZldGNoIHRoZSBjb2xsZWN0aW9uXG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IHRoaXMuZ2V0Q29sbGVjdGlvbkJ5SWQoY29sbGVjdGlvbklkKTtcblxuICAgIC8vIEZldGNoIHN3ZWF0IGxpc3RzICh3b3Jrb3V0cylcbiAgICBjb25zdCBzd2VhdExpc3RzOiBXb3Jrb3V0W10gPSBbXTtcbiAgICBcbiAgICAvLyBBc3N1bWluZyBjb2xsZWN0aW9uIGhhcyBzd2VhdGxpc3RJZHMgd2l0aCBhdXRob3IgYW5kIHdvcmtvdXQgSURzXG4gICAgZm9yIChjb25zdCBzd2VhdGxpc3RJZGVudGlmaWVyIG9mIGNvbGxlY3Rpb24uc3dlYXRsaXN0SWRzIHx8IFtdKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBbd29ya291dF0gPSBhd2FpdCB0aGlzLmZldGNoU2F2ZWRXb3Jrb3V0KFxuICAgICAgICAgIHN3ZWF0bGlzdElkZW50aWZpZXIuc3dlYXRsaXN0QXV0aG9ySWQsIFxuICAgICAgICAgIHN3ZWF0bGlzdElkZW50aWZpZXIuaWRcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh3b3Jrb3V0KSB7XG4gICAgICAgICAgc3dlYXRMaXN0cy5wdXNoKHdvcmtvdXQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmZXRjaGluZyB3b3Jrb3V0ICR7c3dlYXRsaXN0SWRlbnRpZmllci5pZH06YCwgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IGNvbGxlY3Rpb24sIHN3ZWF0TGlzdHMgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjb2xsZWN0aW9uIHdpdGggc3dlYXQgbGlzdHM6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmFzeW5jIGZldGNoU2F2ZWRXb3Jrb3V0KHVzZXJJZDogc3RyaW5nLCB3b3Jrb3V0SWQ6IHN0cmluZyk6IFByb21pc2U8W1dvcmtvdXQgfCBudWxsLCBFeGVyY2lzZUxvZ1tdIHwgbnVsbF0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB3b3Jrb3V0UmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VySWQsICdNeUNyZWF0ZWRXb3Jrb3V0cycsIHdvcmtvdXRJZCk7XG4gICAgY29uc3Qgd29ya291dFNuYXAgPSBhd2FpdCBnZXREb2Mod29ya291dFJlZik7XG4gICAgXG4gICAgaWYgKCF3b3Jrb3V0U25hcC5leGlzdHMoKSkge1xuICAgICAgcmV0dXJuIFtudWxsLCBudWxsXTtcbiAgICB9XG5cbiAgICBjb25zdCB3b3Jrb3V0RGF0YSA9IHdvcmtvdXRTbmFwLmRhdGEoKTtcbiAgICBjb25zb2xlLmxvZyhcIjEuIFJhdyB3b3Jrb3V0IGRhdGEgZnJvbSBEQjpcIiwgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgZXhlcmNpc2VzOiB3b3Jrb3V0RGF0YS5leGVyY2lzZXM/Lm1hcCgoZXg6IGFueSkgPT4gKHtcbiAgICAgICAgbmFtZTogZXguZXhlcmNpc2UubmFtZSxcbiAgICAgICAgY2F0ZWdvcnk6IGV4LmV4ZXJjaXNlLmNhdGVnb3J5XG4gICAgICB9KSlcbiAgICB9LCBudWxsLCAyKSk7XG5cbiAgICBjb25zdCBleGVyY2lzZXNXaXRoVmlkZW9zID0gYXdhaXQgdGhpcy5mZXRjaEFuZE1hcEV4ZXJjaXNlc1dpdGhWaWRlb3MoKTtcblxuICAgIC8vIE1hcCB0aGUgZXhlcmNpc2VzIHdoaWxlIHByZXNlcnZpbmcgb3JpZ2luYWwgZGF0YVxuICAgIGNvbnN0IG1hcHBlZEV4ZXJjaXNlcyA9ICh3b3Jrb3V0RGF0YS5leGVyY2lzZXMgfHwgW10pLm1hcCgoZXhlcmNpc2VSZWY6IGFueSkgPT4ge1xuICAgICAgLy8gRmluZCBtYXRjaGluZyBleGVyY2lzZSBqdXN0IGZvciBpdHMgdmlkZW9zXG4gICAgICBjb25zdCBleGVyY2lzZU5hbWVMb3dlciA9IGV4ZXJjaXNlUmVmLmV4ZXJjaXNlPy5uYW1lPy50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICAgIGNvbnN0IG1hdGNoaW5nRXhlcmNpc2UgPSBleGVyY2lzZXNXaXRoVmlkZW9zLmZpbmQoXG4gICAgICAgIGV4ID0+IGV4Lm5hbWUudG9Mb3dlckNhc2UoKS50cmltKCkgPT09IGV4ZXJjaXNlTmFtZUxvd2VyXG4gICAgICApO1xuXG4gICAgICAvLyBDcmVhdGUgbmV3IEV4ZXJjaXNlIHVzaW5nIG9yaWdpbmFsIGRhdGEgYnV0IGFkZCB2aWRlb3MgZnJvbSBtYXRjaGluZyBleGVyY2lzZVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZXhlcmNpc2VSZWYsXG4gICAgICAgIGV4ZXJjaXNlOiBuZXcgRXhlcmNpc2Uoe1xuICAgICAgICAgIC4uLmV4ZXJjaXNlUmVmLmV4ZXJjaXNlLFxuICAgICAgICAgIHZpZGVvczogbWF0Y2hpbmdFeGVyY2lzZT8udmlkZW9zIHx8IFtdLFxuICAgICAgICAgIC8vIEV4cGxpY2l0bHkgcHJlc2VydmUgdGhlIG9yaWdpbmFsIGNhdGVnb3J5XG4gICAgICAgICAgY2F0ZWdvcnk6IGV4ZXJjaXNlUmVmLmV4ZXJjaXNlLmNhdGVnb3J5XG4gICAgICAgIH0pXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgd29ya291dERhdGEuZXhlcmNpc2VzID0gbWFwcGVkRXhlcmNpc2VzO1xuICAgIGNvbnN0IHdvcmtvdXQgPSBuZXcgV29ya291dCh7XG4gICAgICBpZDogd29ya291dElkLFxuICAgICAgLi4ud29ya291dERhdGFcbiAgICB9KTtcblxuICAgXG4gICAgLy8gU2ltaWxhcmx5IGZvciBsb2dzLCBwcmVzZXJ2ZSBvcmlnaW5hbCBleGVyY2lzZSBkYXRhXG4gICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24od29ya291dFJlZiwgJ2xvZ3MnKTtcbiAgICBjb25zdCBsb2dzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGxvZ3NSZWYpO1xuXG4gICBcbiAgICBjb25zdCBsb2dzOiBFeGVyY2lzZUxvZ1tdID0gbG9nc1NuYXBzaG90LmRvY3MubWFwKGxvZ0RvYyA9PiB7XG4gICAgICBjb25zdCBsb2dEYXRhID0gbG9nRG9jLmRhdGEoKTtcbiAgICAgIGNvbnN0IG1hdGNoaW5nRXhlcmNpc2UgPSBleGVyY2lzZXNXaXRoVmlkZW9zLmZpbmQoZXggPT4gZXgubmFtZSA9PT0gbG9nRGF0YS5leGVyY2lzZS5uYW1lKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coXCJSYXcgbG9nRGF0YTpcIiwgbG9nRGF0YSwgbnVsbCwgMik7XG4gICAgICB2YXIgZXhlcmNpc2VXaXRoVmlkZW8gPSBuZXcgRXhlcmNpc2Uoe1xuICAgICAgICAuLi5sb2dEYXRhLmV4ZXJjaXNlLFxuICAgICAgICB2aWRlb3M6IG1hdGNoaW5nRXhlcmNpc2U/LnZpZGVvcyB8fCBbXVxuICAgICAgfSlcblxuICAgICAgY29uc29sZS5sb2coXCJFeGVyY2lzZSB3aXRoIHZpZGVvOlwiLCBleGVyY2lzZVdpdGhWaWRlbywgbnVsbCwgMik7XG5cbiAgICAgIHZhciBleExvZyA9IG5ldyBFeGVyY2lzZUxvZyh7XG4gICAgICAgIGlkOiBsb2dEb2MuaWQsXG4gICAgICAgIHdvcmtvdXRJZDogd29ya291dElkLFxuICAgICAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICAgICAgZXhlcmNpc2U6IGV4ZXJjaXNlV2l0aFZpZGVvLFxuICAgICAgICBsb2dzOiBsb2dEYXRhLmxvZ3MgfHwgW10sXG4gICAgICAgIGZlZWRiYWNrOiBsb2dEYXRhLmZlZWRiYWNrIHx8ICcnLFxuICAgICAgICBub3RlOiBsb2dEYXRhLm5vdGUgfHwgJycsXG4gICAgICAgIHJlY29tbWVuZGVkV2VpZ2h0OiBsb2dEYXRhLnJlY29tbWVuZGVkV2VpZ2h0IHx8ICdjYWxjdWxhdGluZy4uLicsXG4gICAgICAgIGlzU3BsaXQ6IGxvZ0RhdGEuaXNTcGxpdCB8fCBmYWxzZSxcbiAgICAgICAgaXNCb2R5V2VpZ2h0OiBsb2dEYXRhLmlzQm9keVdlaWdodCB8fCBmYWxzZSxcbiAgICAgICAgbG9nU3VibWl0dGVkOiBsb2dEYXRhLmxvZ1N1Ym1pdHRlZCB8fCBmYWxzZSxcbiAgICAgICAgbG9nSXNFZGl0aW5nOiBsb2dEYXRhLmxvZ0lzRWRpdGluZyB8fCBmYWxzZSxcbiAgICAgICAgaXNDb21wbGV0ZWQ6IGxvZ0RhdGEuaXNDb21wbGV0ZWQgfHwgZmFsc2UsXG4gICAgICAgIG9yZGVyOiBsb2dEYXRhLm9yZGVyIHx8IG51bGwsXG4gICAgICAgIGNvbXBsZXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGxvZ0RhdGEuY29tcGxldGVkQXQpLFxuICAgICAgICBjcmVhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAobG9nRGF0YS5jcmVhdGVkQXQpLFxuICAgICAgICB1cGRhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAobG9nRGF0YS51cGRhdGVkQXQpXG4gICAgICB9KTtcblxuICAgICAgY29uc29sZS5sb2coXCJFeGVyY2lzZSBsb2c6XCIsIGV4TG9nLCBudWxsLCAyKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIGV4TG9nXG4gICAgfSk7XG5cblxuICAgIHdvcmtvdXQubG9ncyA9IGxvZ3M7XG4gICAgcmV0dXJuIFt3b3Jrb3V0LCBsb2dzXTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzYXZlZCB3b3Jrb3V0OicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIEZldGNoIHVzZXIgY2hhbGxlbmdlcyBieSBjaGFsbGVuZ2VJZC5cbiAqIEBwYXJhbSBjaGFsbGVuZ2VJZCBUaGUgSUQgb2YgdGhlIGNoYWxsZW5nZSB0byBmZXRjaCBhc3NvY2lhdGVkIHVzZXIgY2hhbGxlbmdlcyBmb3IuXG4gKiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIHRvIGFuIGFycmF5IG9mIHVzZXIgY2hhbGxlbmdlcy5cbiAqIEB0aHJvd3MgSWYgdGhlIEZpcmVzdG9yZSBxdWVyeSBmYWlscy5cbiAqL1xuYXN5bmMgZmV0Y2hVc2VyQ2hhbGxlbmdlc0J5Q2hhbGxlbmdlSWQoY2hhbGxlbmdlSWQ6IHN0cmluZyk6IFByb21pc2U8VXNlckNoYWxsZW5nZVtdPiB7XG4gIGNvbnN0IHVzZXJDaGFsbGVuZ2VzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXItY2hhbGxlbmdlJyk7XG4gIGNvbnN0IHEgPSBxdWVyeSh1c2VyQ2hhbGxlbmdlc1JlZiwgd2hlcmUoJ2NoYWxsZW5nZUlkJywgJz09JywgY2hhbGxlbmdlSWQpKTtcblxuICB0cnkge1xuICAgIC8vIGNvbnNvbGUubG9nKGBGZXRjaGluZyB1c2VyIGNoYWxsZW5nZXMgZm9yIGNoYWxsZW5nZSBJRDogJHtjaGFsbGVuZ2VJZH1gKTtcblxuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcblxuICAgIC8vIGNvbnNvbGUubG9nKGBUb3RhbCB1c2VyIGNoYWxsZW5nZXMgZmV0Y2hlZDogJHtzbmFwc2hvdC5kb2NzLmxlbmd0aH1gKTtcblxuICAgIGNvbnN0IHVzZXJDaGFsbGVuZ2VzID0gc25hcHNob3QuZG9jcy5tYXAoKGRvYzogRG9jdW1lbnREYXRhKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGBQcm9jZXNzaW5nIHVzZXIgY2hhbGxlbmdlIHdpdGggSUQ6ICR7ZG9jLmlkfWAsIGRhdGEpO1xuXG4gICAgICAvLyAtLS0gSW5zdGFudGlhdGUgVXNlckNoYWxsZW5nZSBoZXJlIC0tLSBcbiAgICAgIHJldHVybiBuZXcgVXNlckNoYWxsZW5nZSh7IFxuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kYXRhIFxuICAgICAgfSk7XG4gICAgICAvLyAtLS0gRW5kIEluc3RhbnRpYXRpb24gLS0tXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZygnQWxsIHVzZXIgY2hhbGxlbmdlcyBhZnRlciBwcm9jZXNzaW5nOicsIEpTT04uc3RyaW5naWZ5KHVzZXJDaGFsbGVuZ2VzLCBudWxsLCAyKSk7XG5cbiAgICByZXR1cm4gdXNlckNoYWxsZW5nZXM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBjaGFsbGVuZ2VzIGJ5IGNoYWxsZW5nZUlkOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5hc3luYyBnZXRDb2xsZWN0aW9uQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxTd2VhdGxpc3RDb2xsZWN0aW9uPiB7XG4gIGNvbnNvbGUubG9nKFwiRmV0Y2hpbmcgY29sbGVjdGlvbiB3aXRoIGlkOlwiLCBpZCk7XG4gIHRyeSB7XG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGRiLCBcInN3ZWF0bGlzdC1jb2xsZWN0aW9uXCIsIGlkKTtcbiAgICBjb25zdCBkb2NTbmFwID0gYXdhaXQgZ2V0RG9jKGRvY1JlZik7XG4gICAgaWYgKGRvY1NuYXAuZXhpc3RzKCkpIHtcbiAgICAgIGNvbnN0IGNvbGxlY3Rpb25EYXRhID0gZG9jU25hcC5kYXRhKCk7XG4gICAgICBjb25zdCBjdXJyZW50U3dlYXRsaXN0SWRzRGF0YSA9IGNvbGxlY3Rpb25EYXRhLnN3ZWF0bGlzdElkcyB8fCBbXTtcbiAgICAgIC8vIEluc3RhbnRpYXRlIFN3ZWF0bGlzdElkZW50aWZpZXJzIGZyb20gdGhlIHJhdyBkYXRhXG4gICAgICBjb25zdCBjdXJyZW50U3dlYXRsaXN0SWRzOiBTd2VhdGxpc3RJZGVudGlmaWVyc1tdID0gY3VycmVudFN3ZWF0bGlzdElkc0RhdGEubWFwKChkYXRhOiBhbnkpID0+IG5ldyBTd2VhdGxpc3RJZGVudGlmaWVycyhkYXRhKSk7XG4gICAgICBjb25zb2xlLmxvZygnQ3VycmVudCBzd2VhdGxpc3RJZHMgKGluc3RhbnRpYXRlZCk6JywgY3VycmVudFN3ZWF0bGlzdElkcyk7XG5cbiAgICAgIHJldHVybiBuZXcgU3dlYXRsaXN0Q29sbGVjdGlvbih7XG4gICAgICAgIGlkOiBkb2NTbmFwLmlkLFxuICAgICAgICAuLi5jb2xsZWN0aW9uRGF0YVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbGxlY3Rpb24gbm90IGZvdW5kXCIpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBjb2xsZWN0aW9uIGJ5IElEOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gSW4gV29ya291dFNlcnZpY2UgY2xhc3NcbmFzeW5jIGdldENvbGxlY3Rpb25zQnlJZHMoY29sbGVjdGlvbklkczogc3RyaW5nW10pOiBQcm9taXNlPFN3ZWF0bGlzdENvbGxlY3Rpb25bXT4ge1xuICB0cnkge1xuICAgIC8vIFVzZSBQcm9taXNlLmFsbCB0byBmZXRjaCBhbGwgY29sbGVjdGlvbnMgaW4gcGFyYWxsZWxcbiAgICBjb25zdCBjb2xsZWN0aW9ucyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgY29sbGVjdGlvbklkcy5tYXAoYXN5bmMgKGlkKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZG9jUmVmID0gZG9jKGRiLCBcInN3ZWF0bGlzdC1jb2xsZWN0aW9uXCIsIGlkKTtcbiAgICAgICAgICBjb25zdCBkb2NTbmFwID0gYXdhaXQgZ2V0RG9jKGRvY1JlZik7XG4gICAgICAgICAgaWYgKGRvY1NuYXAuZXhpc3RzKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3dlYXRsaXN0Q29sbGVjdGlvbih7XG4gICAgICAgICAgICAgIGlkOiBkb2NTbmFwLmlkLFxuICAgICAgICAgICAgICAuLi5kb2NTbmFwLmRhdGEoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZldGNoaW5nIGNvbGxlY3Rpb24gJHtpZH06YCwgZXJyb3IpO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICk7XG5cbiAgICAvLyBGaWx0ZXIgb3V0IGFueSBudWxsIHZhbHVlcyBmcm9tIGZhaWxlZCBmZXRjaGVzXG4gICAgcmV0dXJuIGNvbGxlY3Rpb25zLmZpbHRlcigoY29sbGVjdGlvbik6IGNvbGxlY3Rpb24gaXMgU3dlYXRsaXN0Q29sbGVjdGlvbiA9PiBjb2xsZWN0aW9uICE9PSBudWxsKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgY29sbGVjdGlvbnM6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4gIFxuYXN5bmMgZmV0Y2hDb2xsZWN0aW9ucyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8U3dlYXRsaXN0Q29sbGVjdGlvbltdPiB7XG4gIGlmICghdXNlcklkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIElEIGlzIHJlcXVpcmVkJyk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGNvbGxlY3Rpb25zUmVmID0gZnNDb2xsZWN0aW9uKGRiLCBcInN3ZWF0bGlzdC1jb2xsZWN0aW9uXCIpO1xuXG4gICAgLy8gUXVlcnkgZm9yIHJlY29yZHMgd2hlcmUgb3duZXJJZCBpcyBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIHRoZSB1c2VySWQuXG4gICAgY29uc3QgcUFycmF5ID0gcXVlcnkoY29sbGVjdGlvbnNSZWYsIHdoZXJlKFwib3duZXJJZFwiLCBcImFycmF5LWNvbnRhaW5zXCIsIHVzZXJJZCkpO1xuICAgIGNvbnN0IHNuYXBzaG90QXJyYXkgPSBhd2FpdCBnZXREb2NzKHFBcnJheSk7XG4gICAgY29uc3QgY29sbGVjdGlvbnNGcm9tQXJyYXk6IFN3ZWF0bGlzdENvbGxlY3Rpb25bXSA9IHNuYXBzaG90QXJyYXkuZG9jcy5tYXAoKGRvYzogUXVlcnlEb2N1bWVudFNuYXBzaG90PERvY3VtZW50RGF0YT4pID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSB7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfTtcbiAgICAgIHJldHVybiBuZXcgU3dlYXRsaXN0Q29sbGVjdGlvbihkYXRhKTtcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKFwiVGhlIGFycmF5IGNvbGxlY3Rpb25zXCIsIGNvbGxlY3Rpb25zRnJvbUFycmF5KTtcblxuICAgIC8vIFF1ZXJ5IGZvciByZWNvcmRzIHdoZXJlIG93bmVySWQgaXMgYSBzdHJpbmcgZXF1YWwgdG8gdGhlIHVzZXJJZC5cbiAgICBjb25zdCBxU3RyaW5nID0gcXVlcnkoY29sbGVjdGlvbnNSZWYsIHdoZXJlKFwib3duZXJJZFwiLCBcIj09XCIsIHVzZXJJZCkpO1xuICAgIGNvbnN0IHNuYXBzaG90U3RyaW5nID0gYXdhaXQgZ2V0RG9jcyhxU3RyaW5nKTtcbiAgICBjb25zdCBjb2xsZWN0aW9uc0Zyb21TdHJpbmc6IFN3ZWF0bGlzdENvbGxlY3Rpb25bXSA9IHNuYXBzaG90U3RyaW5nLmRvY3MubWFwKChkb2M6IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdDxEb2N1bWVudERhdGE+KSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0geyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH07XG4gICAgICByZXR1cm4gbmV3IFN3ZWF0bGlzdENvbGxlY3Rpb24oZGF0YSk7XG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZyhcIlRoZSBzdHJpbmcgY29sbGVjdGlvbnNcIiwgY29sbGVjdGlvbnNGcm9tU3RyaW5nKTtcblxuXG4gICAgLy8gQ29tYmluZSBib3RoIGFycmF5cyBhbmQgcmVtb3ZlIGR1cGxpY2F0ZXMgKGlmIGFueSkgYmFzZWQgb24gdGhlIGNvbGxlY3Rpb24gaWQuXG4gICAgY29uc3QgY29tYmluZWQgPSBbLi4uY29sbGVjdGlvbnNGcm9tQXJyYXksIC4uLmNvbGxlY3Rpb25zRnJvbVN0cmluZ107XG4gICAgY29uc3QgdW5pcXVlQ29sbGVjdGlvbnMgPSBuZXcgTWFwPHN0cmluZywgU3dlYXRsaXN0Q29sbGVjdGlvbj4oKTtcbiAgICBjb21iaW5lZC5mb3JFYWNoKGNvbGxlY3Rpb24gPT4ge1xuICAgICAgdW5pcXVlQ29sbGVjdGlvbnMuc2V0KGNvbGxlY3Rpb24uaWQsIGNvbGxlY3Rpb24pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIEFycmF5LmZyb20odW5pcXVlQ29sbGVjdGlvbnMudmFsdWVzKCkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBzd2VhdGxpc3RzOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuXG5cbiAgICAvKipcbiAgICogRmV0Y2ggdXNlciBjaGFsbGVuZ2VzIGJ5IHVzZXJJZCBhbmQgZmlsdGVyIGZvciBhY3RpdmUgY2hhbGxlbmdlcy5cbiAgICogQHJldHVybnMgQSBwcm9taXNlIHJlc29sdmluZyB0byBhbiBhcnJheSBvZiBhY3RpdmUgY2hhbGxlbmdlcy5cbiAgICogQHRocm93cyBJZiBubyB1c2VyIGlzIHNpZ25lZCBpbiBvciBpZiB0aGUgRmlyZXN0b3JlIHF1ZXJ5IGZhaWxzLlxuICAgKi9cbiAgICBhc3luYyBmZXRjaEFjdGl2ZUNoYWxsZW5nZXMoKTogUHJvbWlzZTxVc2VyQ2hhbGxlbmdlW10+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlclNlcnZpY2Uubm9uVUlDdXJyZW50VXNlcjtcbiAgICAgIGlmICghY3VycmVudFVzZXI/LmlkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBpcyBzaWduZWQgaW4nKTtcbiAgICAgIH1cbiAgICBcbiAgICAgIGNvbnN0IHVzZXJDaGFsbGVuZ2VzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXItY2hhbGxlbmdlJyk7XG4gICAgICBjb25zdCBxID0gcXVlcnkodXNlckNoYWxsZW5nZXNSZWYsIHdoZXJlKCd1c2VySWQnLCAnPT0nLCBjdXJyZW50VXNlci5pZCkpO1xuICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coYEZldGNoaW5nIGNoYWxsZW5nZXMgZm9yIHVzZXIgSUQ6ICR7Y3VycmVudFVzZXIuaWR9YCk7XG4gICAgXG4gICAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICBcbiAgICAgICAgLy8gY29uc29sZS5sb2coYFRvdGFsIGNoYWxsZW5nZXMgZmV0Y2hlZDogJHtzbmFwc2hvdC5kb2NzLmxlbmd0aH1gKTtcbiAgICBcbiAgICAgICAgY29uc3QgYWxsQ2hhbGxlbmdlcyA9IHNuYXBzaG90LmRvY3MubWFwKChkb2M6IERvY3VtZW50RGF0YSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBQcm9jZXNzaW5nIGNoYWxsZW5nZSB3aXRoIElEOiAke2RvYy5pZH1gLCBkYXRhKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBVc2UgdGhlIENoYWxsZW5nZSBjb25zdHJ1Y3RvciB0byBwYXJzZSB0aGUgY2hhbGxlbmdlIGRhdGFcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImRhdGUgYmVmb3JlIGZvcm1hdDogXCIgKyBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY2hhbGxlbmdlLnN0YXJ0RGF0ZSkpO1xuXG4gICAgICAgICAgY29uc3QgY2hhbGxlbmdlID0gZGF0YS5jaGFsbGVuZ2VcbiAgICAgICAgICAgID8gbmV3IENoYWxsZW5nZSh7XG4gICAgICAgICAgICAgICAgaWQ6IGRhdGEuY2hhbGxlbmdlLmlkLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBkYXRhLmNoYWxsZW5nZS50aXRsZSxcbiAgICAgICAgICAgICAgICBzdWJ0aXRsZTogZGF0YS5jaGFsbGVuZ2Uuc3VidGl0bGUsXG4gICAgICAgICAgICAgICAgcGFydGljaXBhbnRzOiBkYXRhLmNoYWxsZW5nZS5wYXJ0aWNpcGFudHMgfHwgW10sXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBkYXRhLmNoYWxsZW5nZS5zdGF0dXMgYXMgQ2hhbGxlbmdlU3RhdHVzLFxuICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZTogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUpLFxuICAgICAgICAgICAgICAgIGVuZERhdGU6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5jaGFsbGVuZ2UuZW5kRGF0ZSksXG4gICAgICAgICAgICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY2hhbGxlbmdlLmNyZWF0ZWRBdCksXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY2hhbGxlbmdlLnVwZGF0ZWRBdCksXG4gICAgICAgICAgICAgICAgaW50cm9WaWRlb3M6IGRhdGEuY2hhbGxlbmdlLmludHJvVmlkZW9zIHx8IFtdLFxuICAgICAgICAgICAgICAgIG93bmVySWQ6IGRhdGEuY2hhbGxlbmdlLm93bmVySWQgfHwgW11cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICAuLi5kYXRhLFxuICAgICAgICAgICAgY2hhbGxlbmdlLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY3JlYXRlZEF0KSxcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLnVwZGF0ZWRBdCksXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdBbGwgY2hhbGxlbmdlcyBhZnRlciBwcm9jZXNzaW5nOicsIEpTT04uc3RyaW5naWZ5KGFsbENoYWxsZW5nZXMsIG51bGwsIDIpKTtcbiAgICBcbiAgICAgICAgLy8gRmlsdGVyIGZvciBhY3RpdmUgY2hhbGxlbmdlcyAoZW5kRGF0ZSA+IGN1cnJlbnQgZGF0ZSlcbiAgICAgICAgY29uc3QgYWN0aXZlQ2hhbGxlbmdlcyA9IGFsbENoYWxsZW5nZXMuZmlsdGVyKHVzZXJDaGFsbGVuZ2UgPT4ge1xuICAgICAgICAgIGNvbnN0IGVuZERhdGUgPSB1c2VyQ2hhbGxlbmdlLmNoYWxsZW5nZT8uZW5kRGF0ZTtcbiAgICBcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcbiAgICAgICAgICAvLyAgIGBFdmFsdWF0aW5nIGNoYWxsZW5nZSBJRDogJHt1c2VyQ2hhbGxlbmdlLmlkfSwgRW5kIERhdGU6ICR7ZW5kRGF0ZX0sIEN1cnJlbnQgRGF0ZTogJHtuZXcgRGF0ZSgpfWBcbiAgICAgICAgICAvLyApO1xuICAgIFxuICAgICAgICAgIHJldHVybiBlbmREYXRlICYmIGVuZERhdGUgPiBuZXcgRGF0ZSgpO1xuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgLy8gY29uc29sZS5sb2coYFRvdGFsIGFjdGl2ZSBjaGFsbGVuZ2VzOiAke2FjdGl2ZUNoYWxsZW5nZXMubGVuZ3RofWAsIGFjdGl2ZUNoYWxsZW5nZXMpO1xuICAgIFxuICAgICAgICByZXR1cm4gYWN0aXZlQ2hhbGxlbmdlcztcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFjdGl2ZSBjaGFsbGVuZ2VzOicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgfVxuICAgIFxuXG4gIC8qKlxuICAgKiBGZXRjaCB1c2VyIGNoYWxsZW5nZXMgYnkgdXNlcklkLlxuICAgKiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIHRvIGFuIGFycmF5IG9mIGNoYWxsZW5nZXMuXG4gICAqIEB0aHJvd3MgSWYgbm8gdXNlciBpcyBzaWduZWQgaW4gb3IgaWYgdGhlIEZpcmVzdG9yZSBxdWVyeSBmYWlscy5cbiAgICovXG4gIGFzeW5jIGZldGNoVXNlckNoYWxsZW5nZXMoKTogUHJvbWlzZTxVc2VyQ2hhbGxlbmdlW10+IHtcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IHVzZXJTZXJ2aWNlLm5vblVJQ3VycmVudFVzZXI7XG4gICAgaWYgKCFjdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBpcyBzaWduZWQgaW4nKTtcbiAgICB9XG5cbiAgICAvLyBSZWZlcmVuY2UgdG8gdGhlIHVzZXItY2hhbGxlbmdlIGNvbGxlY3Rpb25cbiAgICBjb25zdCB1c2VyQ2hhbGxlbmdlc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VyLWNoYWxsZW5nZScpO1xuXG4gICAgLy8gUXVlcnkgY2hhbGxlbmdlcyB3aGVyZSB1c2VySWQgbWF0Y2hlcyB0aGUgY3VycmVudCB1c2VyJ3MgSURcbiAgICBjb25zdCBxID0gcXVlcnkodXNlckNoYWxsZW5nZXNSZWYsIHdoZXJlKCd1c2VySWQnLCAnPT0nLCBjdXJyZW50VXNlci5pZCkpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcblxuICAgICAgLy8gTWFwIGRvY3VtZW50cyB0byBhbiBhcnJheSBvZiBDaGFsbGVuZ2Ugb2JqZWN0c1xuICAgICAgcmV0dXJuIHNuYXBzaG90LmRvY3MubWFwKChkb2M6IERvY3VtZW50RGF0YSkgPT4gbmV3IFVzZXJDaGFsbGVuZ2Uoe1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kb2MuZGF0YSgpLFxuICAgICAgfSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyIGNoYWxsZW5nZXM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggdXNlciBjaGFsbGVuZ2VzJyk7XG4gICAgfVxuICB9XG4gIFxuICAvKipcbiAgICogRmV0Y2ggYWxsIHVzZXIgY2hhbGxlbmdlcyBmcm9tIHRoZSBkYXRhYmFzZSwgb3JkZXJlZCBieSBjcmVhdGlvbiBkYXRlXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSByZXNvbHZpbmcgdG8gYW4gYXJyYXkgb2YgYWxsIHVzZXIgY2hhbGxlbmdlc1xuICAgKiBAdGhyb3dzIElmIHRoZSBGaXJlc3RvcmUgcXVlcnkgZmFpbHNcbiAgICovXG4gIGFzeW5jIGZldGNoQWxsVXNlckNoYWxsZW5nZXMoKTogUHJvbWlzZTxVc2VyQ2hhbGxlbmdlW10+IHtcbiAgICB0cnkge1xuICAgICAgLy8gUmVmZXJlbmNlIHRvIHRoZSB1c2VyLWNoYWxsZW5nZSBjb2xsZWN0aW9uXG4gICAgICBjb25zdCB1c2VyQ2hhbGxlbmdlc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VyLWNoYWxsZW5nZScpO1xuICAgICAgXG4gICAgICAvLyBRdWVyeSBhbGwgY2hhbGxlbmdlcyBvcmRlcmVkIGJ5IGNyZWF0aW9uIGRhdGUgKG5ld2VzdCBmaXJzdClcbiAgICAgIGNvbnN0IHEgPSBxdWVyeSh1c2VyQ2hhbGxlbmdlc1JlZiwgb3JkZXJCeSgnY3JlYXRlZEF0JywgJ2Rlc2MnKSk7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGBMb2FkZWQgJHtzbmFwc2hvdC5kb2NzLmxlbmd0aH0gdXNlciBjaGFsbGVuZ2VzYCk7XG4gICAgICBcbiAgICAgIC8vIFByb2Nlc3MgYW5kIG1hcCBkb2N1bWVudHMgdG8gYW4gYXJyYXkgb2YgVXNlckNoYWxsZW5nZSBvYmplY3RzXG4gICAgICBjb25zdCB1c2VyQ2hhbGxlbmdlcyA9IHNuYXBzaG90LmRvY3MubWFwKChkb2M6IERvY3VtZW50RGF0YSkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFByZS1wcm9jZXNzIGNoYWxsZW5nZSBkYXRlcyBpZiB0aGV5IGV4aXN0XG4gICAgICAgICAgaWYgKGRhdGEuY2hhbGxlbmdlKSB7XG4gICAgICAgICAgICAvLyBFbnN1cmUgdGhlIGRhdGVzIGFyZSBwcm9wZXJseSBjb252ZXJ0ZWRcbiAgICAgICAgICAgIGlmIChkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUpIHtcbiAgICAgICAgICAgICAgZGF0YS5jaGFsbGVuZ2Uuc3RhcnREYXRlID0gY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNoYWxsZW5nZS5zdGFydERhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEuY2hhbGxlbmdlLmVuZERhdGUpIHtcbiAgICAgICAgICAgICAgZGF0YS5jaGFsbGVuZ2UuZW5kRGF0ZSA9IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5jaGFsbGVuZ2UuZW5kRGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YS5jaGFsbGVuZ2UuY3JlYXRlZEF0KSB7XG4gICAgICAgICAgICAgIGRhdGEuY2hhbGxlbmdlLmNyZWF0ZWRBdCA9IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5jaGFsbGVuZ2UuY3JlYXRlZEF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQpIHtcbiAgICAgICAgICAgICAgZGF0YS5jaGFsbGVuZ2UudXBkYXRlZEF0ID0gY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNoYWxsZW5nZS51cGRhdGVkQXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gbmV3IFVzZXJDaGFsbGVuZ2Uoe1xuICAgICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgIC4uLmRhdGFcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcHJvY2Vzc2luZyB1c2VyIGNoYWxsZW5nZSBkb2N1bWVudCAke2RvYy5pZH06YCwgZXJyKTtcbiAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gU2tpcCBkb2N1bWVudHMgdGhhdCBmYWlsIHRvIHByb2Nlc3NcbiAgICAgICAgfVxuICAgICAgfSkuZmlsdGVyKEJvb2xlYW4pOyAvLyBSZW1vdmUgbnVsbCBlbnRyaWVzXG4gICAgICBcbiAgICAgIHJldHVybiB1c2VyQ2hhbGxlbmdlcyBhcyBVc2VyQ2hhbGxlbmdlW107XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGFsbCB1c2VyIGNoYWxsZW5nZXM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggYWxsIHVzZXIgY2hhbGxlbmdlcycpO1xuICAgIH1cbiAgfVxuICBcbiAgLy91cGRhdGUgdGhlIHdvcmtvdXQgc3VtbWFyeSxcbiAgYXN5bmMgdXBkYXRlV29ya291dFN1bW1hcnkoe1xuICAgIHVzZXJJZCxcbiAgICB3b3Jrb3V0SWQsXG4gICAgc3VtbWFyeVxuICB9OiB7XG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgd29ya291dElkOiBzdHJpbmcsXG4gICAgc3VtbWFyeTogV29ya291dFN1bW1hcnlcbiAgfSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghdXNlcklkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgSUQgcHJvdmlkZWQnKTtcbiAgICB9XG4gIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdW1tYXJ5UmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VySWQsICd3b3Jrb3V0U3VtbWFyeScsIHN1bW1hcnkuaWQpO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIHVwZGF0ZWRBdCB0aW1lc3RhbXBcbiAgICAgIHN1bW1hcnkudXBkYXRlZEF0ID0gbmV3IERhdGUoKTtcblxuICAgICAgLy8gVXNlIHRoZSB0b0RpY3Rpb25hcnkgbWV0aG9kIHRvIGNvbnZlcnQgdG8gRmlyZXN0b3JlIGZvcm1hdFxuICAgICAgY29uc3Qgc3VtbWFyeURhdGEgPSBzdW1tYXJ5LnRvRGljdGlvbmFyeSgpO1xuXG4gICAgICBjb25zb2xlLmxvZygnVXBkYXRpbmcgd29ya291dCBzdW1tYXJ5OicsIHtcbiAgICAgICAgcGF0aDogYHVzZXJzLyR7dXNlcklkfS93b3Jrb3V0U3VtbWFyeS8ke3N1bW1hcnkuaWR9YCxcbiAgICAgICAgZGF0YTogc3VtbWFyeURhdGFcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBzZXREb2Moc3VtbWFyeVJlZiwgc3VtbWFyeURhdGEsIHsgbWVyZ2U6IHRydWUgfSk7XG4gICAgICBjb25zb2xlLmxvZygnV29ya291dCBzdW1tYXJ5IGRvY3VtZW50IHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHdvcmtvdXQgc3VtbWFyeTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVXb3Jrb3V0TG9ncyh7XG4gICAgdXNlcklkLFxuICAgIHdvcmtvdXRJZCwgXG4gICAgbG9nc1xuICB9OiB7XG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgd29ya291dElkOiBzdHJpbmcsIFxuICAgIGxvZ3M6IEV4ZXJjaXNlTG9nW11cbiAgfSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB3b3Jrb3V0UmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VySWQsICd3b3Jrb3V0U2Vzc2lvbnMnLCB3b3Jrb3V0SWQpO1xuICAgICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24od29ya291dFJlZiwgJ2xvZ3MnKTtcbiAgICAgIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XG4gICAgICBcbiAgICAgIGxvZ3MuZm9yRWFjaChsb2cgPT4ge1xuICAgICAgICBjb25zdCBsb2dEb2NSZWYgPSBkb2MobG9nc1JlZiwgbG9nLmlkKTtcbiAgICAgICAgYmF0Y2gudXBkYXRlKGxvZ0RvY1JlZiwge1xuICAgICAgICAgIC4uLmxvZy50b0RpY3Rpb25hcnkoKVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICBcbiAgICAgIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB3b3Jrb3V0IGxvZ3M6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gVGhlIGNhbmNlbFdvcmtvdXQgbWV0aG9kIOKAkyBpdCBkZWxldGVzIHRoZSB3b3Jrb3V0IHNlc3Npb24gYW5kIHN1bW1hcnkgKGlmIGFueSksXG4vLyBjbGVhbnMgdXAgdGhlIGxvY2FsIHN0YXRlLCBhbmQgbG9ncyB0aGUgY2FuY2VsbGF0aW9uLlxuYXN5bmMgY2FuY2VsV29ya291dCh3b3Jrb3V0OiBXb3Jrb3V0IHwgbnVsbCwgd29ya291dFN1bW1hcnk6IFdvcmtvdXRTdW1tYXJ5IHwgbnVsbCk6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoIXVzZXJTZXJ2aWNlLm5vblVJQ3VycmVudFVzZXI/LmlkIHx8ICF3b3Jrb3V0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlciBub3QgYXV0aGVudGljYXRlZC5cIik7XG4gIH1cblxuICB0cnkgeyAgICBcbiAgICBhd2FpdCB0aGlzLmRlbGV0ZVdvcmtvdXRTZXNzaW9uKHdvcmtvdXQuaWQpO1xuICAgIGlmICh3b3Jrb3V0U3VtbWFyeSkge1xuICAgICAgYXdhaXQgdGhpcy5kZWxldGVXb3Jrb3V0U3VtbWFyeSh3b3Jrb3V0U3VtbWFyeS5pZCk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuY2xlYW5VcFdvcmtvdXRJblByb2dyZXNzKCk7XG4gICAgY29uc29sZS5sb2coXCJXb3Jrb3V0IGNhbmNlbGVkIGFuZCBjbGVhbmVkIHVwIHN1Y2Nlc3NmdWxseS5cIik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNhbmNlbGluZyB3b3Jrb3V0OlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cbiAgXG4vLyBEZWxldGVzIGEgd29ya291dCBzZXNzaW9uIGRvY3VtZW50IGFuZCBhbGwgaXRzIHN1YmNvbGxlY3Rpb24gXCJsb2dzXCJcbmFzeW5jIGRlbGV0ZVdvcmtvdXRTZXNzaW9uKHdvcmtvdXRJZDogc3RyaW5nIHwgbnVsbCk6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoIXVzZXJTZXJ2aWNlLm5vblVJQ3VycmVudFVzZXI/LmlkIHx8ICF3b3Jrb3V0SWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2VyIG5vdCBhdXRoZW50aWNhdGVkLlwiKTtcbiAgfVxuICBjb25zdCB1c2VySWQgPSB1c2VyU2VydmljZS5ub25VSUN1cnJlbnRVc2VyLmlkO1xuICBjb25zdCB3b3Jrb3V0UmVmID0gZG9jKGRiLCBcInVzZXJzXCIsIHVzZXJJZCwgXCJ3b3Jrb3V0U2Vzc2lvbnNcIiwgd29ya291dElkKTtcbiAgXG4gIHRyeSB7XG4gICAgLy8gRGVsZXRlIGFsbCBsb2dzIGluIHRoZSBzdWJjb2xsZWN0aW9uXG4gICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24od29ya291dFJlZiwgXCJsb2dzXCIpO1xuICAgIGNvbnN0IGxvZ3NTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MobG9nc1JlZik7XG4gICAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcbiAgICBcbiAgICBsb2dzU25hcHNob3QuZG9jcy5mb3JFYWNoKChsb2dEb2MpID0+IHtcbiAgICAgIGJhdGNoLmRlbGV0ZShsb2dEb2MucmVmKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBEZWxldGUgdGhlIG1haW4gd29ya291dCBkb2N1bWVudFxuICAgIGJhdGNoLmRlbGV0ZSh3b3Jrb3V0UmVmKTtcbiAgICBcbiAgICBhd2FpdCBiYXRjaC5jb21taXQoKTtcbiAgICBjb25zb2xlLmxvZyhcIldvcmtvdXQgc2Vzc2lvbiBhbmQgbG9ncyBkZWxldGVkIHN1Y2Nlc3NmdWxseS5cIik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGRlbGV0aW5nIHdvcmtvdXQgc2Vzc2lvbjpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbiAgLy8gRGVsZXRlcyB0aGUgd29ya291dCBzdW1tYXJ5IGRvY3VtZW50LlxuICBhc3luYyBkZWxldGVXb3Jrb3V0U3VtbWFyeSh3b3Jrb3V0U3VtbWFyeUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXdvcmtvdXRTdW1tYXJ5SWQgfHwgIXVzZXJTZXJ2aWNlLm5vblVJQ3VycmVudFVzZXI/LmlkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdW1tYXJ5UmVmID0gZG9jKGRiLCBcInVzZXJzXCIsIHVzZXJTZXJ2aWNlLm5vblVJQ3VycmVudFVzZXIuaWQsIFwid29ya291dFN1bW1hcnlcIiwgd29ya291dFN1bW1hcnlJZCk7XG4gICAgICBhd2FpdCBkZWxldGVEb2Moc3VtbWFyeVJlZik7XG4gICAgICBjb25zb2xlLmxvZyhcIldvcmtvdXQgc3VtbWFyeSBkZWxldGVkIHN1Y2Nlc3NmdWxseS5cIik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZWxldGluZyB3b3Jrb3V0IHN1bW1hcnk6XCIsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIENsZWFuIHVwIGxvY2FsIHN0b3JhZ2UgYW5kIGluLW1lbW9yeSB3b3Jrb3V0IHN0YXRlLlxuICAgIGNsZWFuVXBXb3Jrb3V0SW5Qcm9ncmVzcygpOiB2b2lkIHtcbiAgICAgIHN0b3JlLmRpc3BhdGNoKHJlc2V0V29ya291dFN0YXRlKCkpO1xuICAgIH1cbiAgICAgIFxuICBcbiAgLyoqXG4gICAqIEZldGNoIHRoZSB3b3Jrb3V0IHNlc3Npb24gZnJvbSBGaXJlc3RvcmUsIHJldHVybmluZyB7IHdvcmtvdXQsIGxvZ3MgfS5cbiAgICogQ2hlY2tzIGZpcnN0IGZvciBhIFF1ZXVlZFVwIHNlc3Npb24sIHRoZW4gZm9yIEluUHJvZ3Jlc3MuXG4gICAqL1xuICBhc3luYyBmZXRjaEN1cnJlbnRXb3Jrb3V0U2Vzc2lvbih1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8e1xuICAgIHdvcmtvdXQ6IFdvcmtvdXQgfCBudWxsO1xuICAgIGxvZ3M6IEV4ZXJjaXNlTG9nW10gfCBudWxsO1xuICAgfT4ge1xuICAgIGlmICghdXNlcklkKSB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgSUQgcHJvdmlkZWQnKTtcbiAgIFxuICAgIGNvbnN0IGV4ZXJjaXNlU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZXMnKSk7XG4gICAgY29uc3QgdmlkZW9TbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlVmlkZW9zJykpO1xuICAgXG4gICAgY29uc3QgZXhlcmNpc2VWaWRlb3MgPSB2aWRlb1NuYXBzaG90LmRvY3MubWFwKChkb2MpID0+IFxuICAgICAgbmV3IEV4ZXJjaXNlVmlkZW8oe1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kb2MuZGF0YSgpXG4gICAgICB9KVxuICAgICk7XG4gICBcbiAgICBjb25zdCBleGVyY2lzZXNXaXRoVmlkZW9zID0gZXhlcmNpc2VTbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4ge1xuICAgICAgY29uc3QgZXhlcmNpc2UgPSBuZXcgRXhlcmNpc2Uoe1xuICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAuLi5kb2MuZGF0YSgpXG4gICAgICB9KTtcbiAgIFxuICAgICAgY29uc3QgbWF0Y2hpbmdWaWRlb3MgPSBleGVyY2lzZVZpZGVvcy5maWx0ZXIoXG4gICAgICAgICh2aWRlbykgPT4gdmlkZW8uZXhlcmNpc2UudG9Mb3dlckNhc2UoKSA9PT0gZXhlcmNpc2UubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICApO1xuICAgXG4gICAgICByZXR1cm4gbmV3IEV4ZXJjaXNlKHtcbiAgICAgICAgLi4uZXhlcmNpc2UsXG4gICAgICAgIHZpZGVvczogbWF0Y2hpbmdWaWRlb3NcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgXG4gICAgY29uc3Qgd29ya291dFNlc3Npb25zUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgdXNlcklkLCAnd29ya291dFNlc3Npb25zJyk7XG4gICBcbiAgICBsZXQgcSA9IHF1ZXJ5KHdvcmtvdXRTZXNzaW9uc1JlZiwgd2hlcmUoJ3N0YXR1cycsICc9PScsIFdvcmtvdXRTdGF0dXMuUXVldWVkVXApKTtcbiAgICBsZXQgc25hcCA9IGF3YWl0IGdldERvY3MocSk7XG4gICBcbiAgICBpZiAoIXNuYXAuZW1wdHkpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NXb3Jrb3V0U2Vzc2lvbkRvY3VtZW50KHNuYXAuZG9jc1swXSwgZXhlcmNpc2VzV2l0aFZpZGVvcyk7XG4gICAgfVxuICAgXG4gICAgcSA9IHF1ZXJ5KHdvcmtvdXRTZXNzaW9uc1JlZiwgd2hlcmUoJ3N0YXR1cycsICc9PScsIFdvcmtvdXRTdGF0dXMuSW5Qcm9ncmVzcykpO1xuICAgIHNuYXAgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgXG4gICAgaWYgKCFzbmFwLmVtcHR5KSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9jZXNzV29ya291dFNlc3Npb25Eb2N1bWVudChzbmFwLmRvY3NbMF0sIGV4ZXJjaXNlc1dpdGhWaWRlb3MpO1xuICAgIH1cbiAgIFxuICAgIHJldHVybiB7IHdvcmtvdXQ6IG51bGwsIGxvZ3M6IG51bGwgfTtcbiAgIH1cblxuICBwcml2YXRlIGFzeW5jIGZldGNoQW5kTWFwRXhlcmNpc2VzV2l0aFZpZGVvcygpOiBQcm9taXNlPEV4ZXJjaXNlW10+IHtcbiAgICB0cnkge1xuICAgICAgLy8gY29uc29sZS5sb2coJ1N0YXJ0aW5nIGZldGNoQW5kTWFwRXhlcmNpc2VzV2l0aFZpZGVvcycpO1xuICBcbiAgICAgIC8vIDEuIEZldGNoIGFsbCBleGVyY2lzZXMgXG4gICAgICBjb25zdCBleGVyY2lzZVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VzJykpO1xuICAgICAgY29uc3QgZXhlcmNpc2VzID0gZXhlcmNpc2VTbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PiBcbiAgICAgICAgbmV3IEV4ZXJjaXNlKHtcbiAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgIC4uLmRvYy5kYXRhKClcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhgRmV0Y2hlZCAke2V4ZXJjaXNlcy5sZW5ndGh9IGV4ZXJjaXNlc2ApO1xuICBcbiAgICAgIC8vIDIuIEZldGNoIGFsbCB2aWRlb3NcbiAgICAgIGNvbnN0IHZpZGVvU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZGIsICdleGVyY2lzZVZpZGVvcycpKTtcbiAgICAgIGNvbnN0IGV4ZXJjaXNlVmlkZW9zID0gdmlkZW9TbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PiBcbiAgICAgICAgbmV3IEV4ZXJjaXNlVmlkZW8oe1xuICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgLi4uZG9jLmRhdGEoKVxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGBGZXRjaGVkICR7ZXhlcmNpc2VWaWRlb3MubGVuZ3RofSBleGVyY2lzZSB2aWRlb3NgKTtcbiAgXG4gICAgICAvLyAzLiBNYXAgdmlkZW9zIHRvIGV4ZXJjaXNlc1xuICAgICAgY29uc3QgZXhlcmNpc2VzV2l0aFZpZGVvcyA9IGV4ZXJjaXNlcy5tYXAoZXhlcmNpc2UgPT4ge1xuICAgICAgICBjb25zdCBtYXRjaGluZ1ZpZGVvcyA9IGV4ZXJjaXNlVmlkZW9zLmZpbHRlcihcbiAgICAgICAgICAodmlkZW8pID0+IHZpZGVvLmV4ZXJjaXNlLnRvTG93ZXJDYXNlKCkgPT09IGV4ZXJjaXNlLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICApO1xuICAgICAgIFxuICAgICAgICByZXR1cm4gbmV3IEV4ZXJjaXNlKHtcbiAgICAgICAgICAuLi5leGVyY2lzZSxcbiAgICAgICAgICB2aWRlb3M6IG1hdGNoaW5nVmlkZW9zXG4gICAgICAgIH0pO1xuICAgICAgIH0pO1xuICBcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdGaW5pc2hlZCBtYXBwaW5nIGV4ZXJjaXNlcyB3aXRoIHZpZGVvcycpO1xuICAgICAgLy8gY29uc29sZS5sb2coYFRvdGFsIGV4ZXJjaXNlcyB3aXRoIHZpZGVvczogJHtleGVyY2lzZXNXaXRoVmlkZW9zLmxlbmd0aH1gKTtcbiAgICAgICAgXG4gICAgICByZXR1cm4gZXhlcmNpc2VzV2l0aFZpZGVvcztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYW5kIG1hcHBpbmcgZXhlcmNpc2VzIHdpdGggdmlkZW9zOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgdG8gYnVpbGQgdGhlIFdvcmtvdXQgb2JqZWN0ICsgYW55IGxvZ3MgZnJvbSB0aGUgc25hcHNob3QuXG4gICAqL1xuICBhc3luYyBmZXRjaEFsbFdvcmtvdXRTZXNzaW9ucyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8e1xuICAgIHdvcmtvdXQ6IFdvcmtvdXQgfCBudWxsO1xuICAgIGxvZ3M6IEV4ZXJjaXNlTG9nW10gfCBudWxsO1xuICAgfVtdPiB7XG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBJRCBwcm92aWRlZCcpO1xuICAgIH1cbiAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBleGVyY2lzZVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhjb2xsZWN0aW9uKGRiLCAnZXhlcmNpc2VzJykpO1xuICAgICAgY29uc3QgZXhlcmNpc2VzID0gZXhlcmNpc2VTbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PiBcbiAgICAgICAgbmV3IEV4ZXJjaXNlKHtcbiAgICAgICAgICBpZDogZG9jLmlkLFxuICAgICAgICAgIC4uLmRvYy5kYXRhKClcbiAgICAgICAgfSlcbiAgICAgICk7XG4gIFxuICAgICAgY29uc3QgdmlkZW9TbmFwc2hvdCA9IGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgJ2V4ZXJjaXNlVmlkZW9zJykpO1xuICAgICAgY29uc3QgZXhlcmNpc2VWaWRlb3MgPSB2aWRlb1NuYXBzaG90LmRvY3MubWFwKChkb2MpID0+IFxuICAgICAgICBuZXcgRXhlcmNpc2VWaWRlbyh7XG4gICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAuLi5kb2MuZGF0YSgpXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgXG4gICAgICBjb25zdCBleGVyY2lzZXNXaXRoVmlkZW9zID0gZXhlcmNpc2VzLm1hcChleGVyY2lzZSA9PiB7XG4gICAgICAgIGNvbnN0IG1hdGNoaW5nVmlkZW9zID0gZXhlcmNpc2VWaWRlb3MuZmlsdGVyKFxuICAgICAgICAgICh2aWRlbykgPT4gdmlkZW8uZXhlcmNpc2UudG9Mb3dlckNhc2UoKSA9PT0gZXhlcmNpc2UubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICk7XG4gICBcbiAgICAgICAgcmV0dXJuIG5ldyBFeGVyY2lzZSh7XG4gICAgICAgICAgLi4uZXhlcmNpc2UsXG4gICAgICAgICAgdmlkZW9zOiBtYXRjaGluZ1ZpZGVvc1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgXG4gICAgICBjb25zdCB3b3Jrb3V0U2Vzc2lvbnNSZWYgPSBjb2xsZWN0aW9uKGRiLCAndXNlcnMnLCB1c2VySWQsICd3b3Jrb3V0U2Vzc2lvbnMnKTtcbiAgICAgIGNvbnN0IHNuYXAgPSBhd2FpdCBnZXREb2NzKHdvcmtvdXRTZXNzaW9uc1JlZik7XG4gICBcbiAgICAgIGlmIChzbmFwLmVtcHR5KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdObyB3b3Jrb3V0IHNlc3Npb25zIGZvdW5kIGZvciB1c2VyJyk7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgIFxuICAgICAgY29uc3Qgc2Vzc2lvbnMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgc25hcC5kb2NzLm1hcChhc3luYyAoZG9jKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc2Vzc2lvbkRhdGEgPSBhd2FpdCB0aGlzLnByb2Nlc3NXb3Jrb3V0U2Vzc2lvbkRvY3VtZW50KFxuICAgICAgICAgICAgZG9jLCBcbiAgICAgICAgICAgIGV4ZXJjaXNlc1dpdGhWaWRlb3NcbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChzZXNzaW9uRGF0YS5sb2dzKSB7XG4gICAgICAgICAgICBzZXNzaW9uRGF0YS5sb2dzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgY29uc3Qgb3JkZXJBID0gYS5vcmRlciA/PyAwO1xuICAgICAgICAgICAgICBjb25zdCBvcmRlckIgPSBiLm9yZGVyID8/IDA7XG4gICAgICAgICAgICAgIHJldHVybiBvcmRlckEgLSBvcmRlckI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICBcbiAgICAgICAgICByZXR1cm4gc2Vzc2lvbkRhdGE7XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgXG4gICAgICByZXR1cm4gc2Vzc2lvbnM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHdvcmtvdXQgc2Vzc2lvbnM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgfVxuXG4gICAvLyBBZGQgdGhlIHVwZGF0ZVVzZXJDaGFsbGVuZ2UgbWV0aG9kXG4gIGFzeW5jIHVwZGF0ZVVzZXJDaGFsbGVuZ2UoY2hhbGxlbmdlOiBVc2VyQ2hhbGxlbmdlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF1c2VyU2VydmljZS5ub25VSUN1cnJlbnRVc2VyPy5pZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHNhZmVndWFyZCBjaGVjayBmb3IgSURcbiAgICBpZiAoIWNoYWxsZW5nZS5pZCkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgdXNlciBjaGFsbGVuZ2U6IFByb3ZpZGVkIFVzZXJDaGFsbGVuZ2UgaGFzIG5vIElELicsIGNoYWxsZW5nZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCB1cGRhdGUgVXNlckNoYWxsZW5nZSB3aXRob3V0IGEgdmFsaWQgSUQuJyk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY2hhbGxlbmdlUmVmID0gZG9jKGRiLCAndXNlci1jaGFsbGVuZ2UnLCBjaGFsbGVuZ2UuaWQpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIlt1cGRhdGVVc2VyQ2hhbGxlbmdlXSBDaGFsbGVuZ2UgdG8gdXBkYXRlOlwiLCBjaGFsbGVuZ2UpO1xuICAgICAgICBcbiAgICAgICAgLy8gLS0tIENvbnZlcnQgVXNlckNoYWxsZW5nZSBpbnN0YW5jZSB0byBhIHBsYWluIG9iamVjdCAtLS0gXG4gICAgICAgIC8vIEFzc3VtaW5nIFVzZXJDaGFsbGVuZ2UgaGFzIGEgdG9EaWN0aW9uYXJ5IG1ldGhvZCB0aGF0IGhhbmRsZXMgbmVzdGVkIG9iamVjdHNcbiAgICAgICAgY29uc3QgY2hhbGxlbmdlRGF0YSA9IGNoYWxsZW5nZS50b0RpY3Rpb25hcnkoKTsgXG4gICAgICAgIGNvbnNvbGUubG9nKFwiW3VwZGF0ZVVzZXJDaGFsbGVuZ2VdIENoYWxsZW5nZSBkYXRhOlwiLCBjaGFsbGVuZ2VEYXRhKTtcblxuICAgICAgICAvLyAtLS0gQWRkL292ZXJ3cml0ZSB0aGUgdXBkYXRlIHRpbWVzdGFtcCB1c2luZyBVbml4IHRpbWVzdGFtcCAtLS1cbiAgICAgICAgY2hhbGxlbmdlRGF0YS51cGRhdGVkQXQgPSBkYXRlVG9Vbml4VGltZXN0YW1wKG5ldyBEYXRlKCkpO1xuICAgICAgICBcbiAgICAgICAgLy8gT3B0aW9uYWwgZGVidWdnaW5nIGxvZ1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIlt1cGRhdGVVc2VyQ2hhbGxlbmdlXSBEYXRhIGJlaW5nIHNlbnQgdG8gc2V0RG9jOlwiLCBjaGFsbGVuZ2VEYXRhKTtcblxuICAgICAgICAvLyAtLS0gRGV0YWlsZWQgTG9nIEJlZm9yZSBTYXZlIC0tLVxuICAgICAgICBjb25zb2xlLmxvZyhcIlt1cGRhdGVVc2VyQ2hhbGxlbmdlXSBUeXBlIG9mIGNoYWxsZW5nZURhdGEuY2hhbGxlbmdlOlwiLCB0eXBlb2YgY2hhbGxlbmdlRGF0YS5jaGFsbGVuZ2UpO1xuICAgICAgICBpZiAoY2hhbGxlbmdlRGF0YS5jaGFsbGVuZ2UgJiYgY2hhbGxlbmdlRGF0YS5jaGFsbGVuZ2UuY29uc3RydWN0b3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW3VwZGF0ZVVzZXJDaGFsbGVuZ2VdIENvbnN0cnVjdG9yIG5hbWUgb2YgY2hhbGxlbmdlRGF0YS5jaGFsbGVuZ2U6XCIsIGNoYWxsZW5nZURhdGEuY2hhbGxlbmdlLmNvbnN0cnVjdG9yLm5hbWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGNoYWxsZW5nZURhdGEuY2hhbGxlbmdlID09PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlt1cGRhdGVVc2VyQ2hhbGxlbmdlXSBjaGFsbGVuZ2VEYXRhLmNoYWxsZW5nZSBpcyBudWxsLlwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW3VwZGF0ZVVzZXJDaGFsbGVuZ2VdIGNoYWxsZW5nZURhdGEuY2hhbGxlbmdlIGhhcyBubyBjb25zdHJ1Y3RvciBvciBpcyB1bmRlZmluZWQvcHJpbWl0aXZlLlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBbHNvIGxvZyBzdHJpbmdpZmllZCB2ZXJzaW9uIHRvIHNlZSB0aGUgc3RydWN0dXJlIEZpcmVzdG9yZSBsaWtlbHkgZ2V0c1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJbdXBkYXRlVXNlckNoYWxsZW5nZV0gRnVsbCBjaGFsbGVuZ2VEYXRhIG9iamVjdCAoc3RyaW5naWZpZWQpOlwiLCBKU09OLnN0cmluZ2lmeShjaGFsbGVuZ2VEYXRhLCBudWxsLCAyKSk7IFxuICAgICAgICB9IGNhdGNoIChzdHJpbmdpZnlFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlt1cGRhdGVVc2VyQ2hhbGxlbmdlXSBFcnJvciBzdHJpbmdpZnlpbmcgY2hhbGxlbmdlRGF0YTpcIiwgc3RyaW5naWZ5RXJyb3IpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJbdXBkYXRlVXNlckNoYWxsZW5nZV0gY2hhbGxlbmdlRGF0YSBvYmplY3QgKHJhdyk6XCIsIGNoYWxsZW5nZURhdGEpOyAvLyBMb2cgcmF3IG9iamVjdCBpZiBzdHJpbmdpZnkgZmFpbHNcbiAgICAgICAgfVxuICAgICAgICAvLyAtLS0gRW5kIERldGFpbGVkIExvZyAtLS1cblxuICAgICAgICBhd2FpdCBzZXREb2MoY2hhbGxlbmdlUmVmLCBjaGFsbGVuZ2VEYXRhLCB7IG1lcmdlOiB0cnVlIH0pO1xuICAgICAgICBjb25zb2xlLmxvZygnVXNlciBjaGFsbGVuZ2UgdXBkYXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB1c2VyIGNoYWxsZW5nZTonLCBlcnJvcik7XG4gICAgICAgIC8vIENvbnNpZGVyIGxvZ2dpbmcgdGhlIGRhdGEgdGhhdCBjYXVzZWQgdGhlIGVycm9yXG4gICAgICAgIC8vIGNvbnNvbGUuZXJyb3IoJ0RhdGEgdGhhdCBjYXVzZWQgZXJyb3I6JywgY2hhbGxlbmdlRGF0YSlcbiAgICAgICAgdGhyb3cgZXJyb3I7IC8vIFJlLXRocm93IG9yaWdpbmFsIGVycm9yXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ29sbGVjdGlvbihjb2xsZWN0aW9uOiBTd2VhdGxpc3RDb2xsZWN0aW9uKTogUHJvbWlzZTxTd2VhdGxpc3RDb2xsZWN0aW9uPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbGxSZWYgPSBmc0NvbGxlY3Rpb24oZGIsIFwic3dlYXRsaXN0LWNvbGxlY3Rpb25cIik7XG4gIFxuICAgICAgLy8gSWYgY29sbGVjdGlvbi5pZCBpcyBlbXB0eSwgZ2VuZXJhdGUgYSBuZXcgZG9jIElEIGFuZCBhc3NpZ24gaXQuXG4gICAgICBpZiAoIWNvbGxlY3Rpb24uaWQgfHwgY29sbGVjdGlvbi5pZC50cmltKCkgPT09IFwiXCIpIHtcbiAgICAgICAgY29uc3QgbmV3RG9jUmVmID0gZG9jKGNvbGxSZWYpO1xuICAgICAgICBjb2xsZWN0aW9uLmlkID0gbmV3RG9jUmVmLmlkO1xuICAgICAgfVxuICBcbiAgICAgIC8vIEVuc3VyZSB0aGUgY2hhbGxlbmdlIGlkIG1hdGNoZXMgdGhlIGNvbGxlY3Rpb24gaWQuXG4gICAgICBpZiAoY29sbGVjdGlvbi5jaGFsbGVuZ2UpIHtcbiAgICAgICAgY29sbGVjdGlvbi5jaGFsbGVuZ2UuaWQgPSBjb2xsZWN0aW9uLmlkO1xuICAgICAgfVxuICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgdXBkYXRlZEF0IGZpZWxkLlxuICAgICAgY29sbGVjdGlvbi51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpO1xuICBcbiAgICAgIC8vIFNhdmUgdGhlIGNvbGxlY3Rpb24gdG8gRmlyZXN0b3JlLlxuICAgICAgYXdhaXQgc2V0RG9jKGRvYyhjb2xsUmVmLCBjb2xsZWN0aW9uLmlkKSwgY29sbGVjdGlvbi50b0RpY3Rpb25hcnkoKSk7XG4gICAgICBjb25zb2xlLmxvZyhcIkNvbGxlY3Rpb24gdXBkYXRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICByZXR1cm4gY29sbGVjdGlvbjtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIGNvbGxlY3Rpb24gZG9jdW1lbnQ6XCIsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIHdoaWxlIHVwZGF0aW5nIHRoZSBjb2xsZWN0aW9uXCIpO1xuICAgIH1cbiAgfVxuICBcbiAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzV29ya291dFNlc3Npb25Eb2N1bWVudChcbiAgICB3b3Jrb3V0RG9jOiBRdWVyeURvY3VtZW50U25hcHNob3Q8RG9jdW1lbnREYXRhPixcbiAgICBleGVyY2lzZXNXaXRoVmlkZW9zOiBFeGVyY2lzZVtdXG4gICk6IFByb21pc2U8eyB3b3Jrb3V0OiBXb3Jrb3V0OyBsb2dzOiBFeGVyY2lzZUxvZ1tdIH0+IHtcbiAgICBjb25zdCBkYXRhID0gd29ya291dERvYy5kYXRhKCk7XG5cbiAgICAvLyBNYXAgZXhlcmNpc2VzIHdpdGggdGhlaXIgZnVsbCBkYXRhIGFuZCB2aWRlb3NcbiAgICBjb25zdCBtYXBwZWRFeGVyY2lzZXMgPSAoZGF0YS5leGVyY2lzZXMgfHwgW10pLm1hcCgoZXhlcmNpc2VSZWY6IGFueSkgPT4ge1xuICAgICAgLy8gRmluZCBtYXRjaGluZyBleGVyY2lzZSBqdXN0IGZvciBpdHMgdmlkZW9zXG4gICAgICBjb25zdCBleGVyY2lzZU5hbWVMb3dlciA9IGV4ZXJjaXNlUmVmLmV4ZXJjaXNlPy5uYW1lPy50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICAgIGNvbnN0IG1hdGNoaW5nRXhlcmNpc2UgPSBleGVyY2lzZXNXaXRoVmlkZW9zLmZpbmQoXG4gICAgICAgIGV4ID0+IGV4Lm5hbWUudG9Mb3dlckNhc2UoKS50cmltKCkgPT09IGV4ZXJjaXNlTmFtZUxvd2VyXG4gICAgICApO1xuXG4gICAgICAvLyBDcmVhdGUgbmV3IEV4ZXJjaXNlIHVzaW5nIG9yaWdpbmFsIGRhdGEgYnV0IGFkZCB2aWRlb3MgZnJvbSBtYXRjaGluZyBleGVyY2lzZVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZXhlcmNpc2VSZWYsXG4gICAgICAgIGV4ZXJjaXNlOiBuZXcgRXhlcmNpc2Uoe1xuICAgICAgICAgIC4uLmV4ZXJjaXNlUmVmLmV4ZXJjaXNlLFxuICAgICAgICAgIHZpZGVvczogbWF0Y2hpbmdFeGVyY2lzZT8udmlkZW9zIHx8IFtdLFxuICAgICAgICAgIC8vIEV4cGxpY2l0bHkgcHJlc2VydmUgdGhlIG9yaWdpbmFsIGNhdGVnb3J5XG4gICAgICAgICAgY2F0ZWdvcnk6IGV4ZXJjaXNlUmVmLmV4ZXJjaXNlLmNhdGVnb3J5XG4gICAgICAgIH0pXG4gICAgICB9O1xuICAgIH0pO1xuICBcblxuICAgIC8vIENyZWF0ZSB0aGUgd29ya291dCB3aXRoIG1hcHBlZCBleGVyY2lzZXNcbiAgICBjb25zdCB3b3Jrb3V0ID0gbmV3IFdvcmtvdXQoe1xuICAgICAgaWQ6IHdvcmtvdXREb2MuaWQsXG4gICAgICByb3VuZFdvcmtvdXRJZDogZGF0YS5yb3VuZFdvcmtvdXRJZCB8fCAnJyxcbiAgICAgIGV4ZXJjaXNlczogbWFwcGVkRXhlcmNpc2VzLFxuICAgICAgdGl0bGU6IGRhdGEudGl0bGUgfHwgJycsXG4gICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgIGR1cmF0aW9uOiBkYXRhLmR1cmF0aW9uIHx8IDAsXG4gICAgICB1c2VBdXRob3JDb250ZW50OiBkYXRhLnVzZUF1dGhvckNvbnRlbnQgfHwgZmFsc2UsXG4gICAgICBpc0NvbXBsZXRlZDogZGF0YS5pc0NvbXBsZXRlZCB8fCBmYWxzZSxcbiAgICAgIHdvcmtvdXRTdGF0dXM6IGRhdGEud29ya291dFN0YXR1cyB8fCBXb3Jrb3V0U3RhdHVzLkFyY2hpdmVkLFxuICAgICAgYXV0aG9yOiBkYXRhLmF1dGhvciB8fCAnJyxcbiAgICAgIGNyZWF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNyZWF0ZWRBdCksXG4gICAgICB1cGRhdGVkQXQ6IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS51cGRhdGVkQXQpLFxuICAgICAgc3RhcnRUaW1lOiBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuc3RhcnRUaW1lKSxcbiAgICAgIGNvbGxlY3Rpb25JZDogZGF0YS5jb2xsZWN0aW9uSWQsXG4gICAgICBjaGFsbGVuZ2U6IGRhdGEuY2hhbGxlbmdlLFxuICAgICAgbG9nczogKGRhdGEubG9ncyB8fCBbXSkubWFwKChsb2dEYXRhOiBhbnkpID0+IHtcbiAgICAgICAgLy8gTWFwIGxvZ3Mgd2l0aCBmdWxsIGV4ZXJjaXNlc1xuICAgICAgICBjb25zdCBleGVyY2lzZU5hbWVMb3dlciA9IGxvZ0RhdGEuZXhlcmNpc2U/Lm5hbWU/LnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgICAgICBjb25zdCBmdWxsRXhlcmNpc2UgPSBleGVyY2lzZXNXaXRoVmlkZW9zLmZpbmQoXG4gICAgICAgICAgZXggPT4gZXgubmFtZS50b0xvd2VyQ2FzZSgpLnRyaW0oKSA9PT0gZXhlcmNpc2VOYW1lTG93ZXJcbiAgICAgICAgKTtcbiAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ubG9nRGF0YSxcbiAgICAgICAgICBleGVyY2lzZTogZnVsbEV4ZXJjaXNlIHx8IGxvZ0RhdGEuZXhlcmNpc2VcbiAgICAgICAgfTtcbiAgICAgIH0pLFxuICAgICAgd29ya291dFJhdGluZzogZGF0YS53b3Jrb3V0UmF0aW5nLFxuICAgICAgb3JkZXI6IGRhdGEub3JkZXIsXG4gICAgICB6b25lOiBkYXRhLnpvbmUgfHwgQm9keVpvbmUuRnVsbEJvZHlcbiAgICB9KTtcbiAgXG4gICAgLy8gRmV0Y2ggbG9ncyBmcm9tIHN1YmNvbGxlY3Rpb25cbiAgICBjb25zdCBsb2dzUmVmID0gY29sbGVjdGlvbih3b3Jrb3V0RG9jLnJlZiwgJ2xvZ3MnKTtcbiAgICBjb25zdCBsb2dzU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGxvZ3NSZWYpO1xuICAgIFxuICAgIGNvbnN0IGxvZ3M6IEV4ZXJjaXNlTG9nW10gPSBsb2dzU25hcHNob3QuZG9jcy5tYXAobG9nRG9jID0+IHtcbiAgICAgIGNvbnN0IGxvZ0RhdGEgPSBsb2dEb2MuZGF0YSgpO1xuICAgICAgXG4gICAgICAvLyBGaW5kIHRoZSBjb3JyZXNwb25kaW5nIG1hcHBlZCBleGVyY2lzZSB0aGF0IHdlIGFscmVhZHkgcHJvY2Vzc2VkXG4gICAgICBjb25zdCBtYXRjaGluZ01hcHBlZEV4ZXJjaXNlID0gbWFwcGVkRXhlcmNpc2VzLmZpbmQoXG4gICAgICAgIChleDogRXhlcmNpc2VSZWZlcmVuY2UpID0+IGV4LmV4ZXJjaXNlLm5hbWUudG9Mb3dlckNhc2UoKS50cmltKCkgPT09IGxvZ0RhdGEuZXhlcmNpc2U/Lm5hbWU/LnRvTG93ZXJDYXNlKCkudHJpbSgpXG4gICAgICApO1xuXG4gICAgICBjb25zdCBwcmVwYXJlZExvZ0RhdGEgPSB7XG4gICAgICAgIC4uLmxvZ0RhdGEsXG4gICAgICAgIGlkOiBsb2dEb2MuaWQsXG4gICAgICAgIHdvcmtvdXRJZDogd29ya291dC5pZCxcbiAgICAgICAgLy8gVXNlIHRoZSBleGVyY2lzZSBmcm9tIG91ciBtYXBwZWQgZXhlcmNpc2VzIHdoaWNoIGFscmVhZHkgaGFzIHRoZSBjb3JyZWN0IGNhdGVnb3J5IGFuZCB2aWRlb3NcbiAgICAgICAgZXhlcmNpc2U6IG1hdGNoaW5nTWFwcGVkRXhlcmNpc2U/LmV4ZXJjaXNlIHx8IGxvZ0RhdGEuZXhlcmNpc2UsXG4gICAgICAgIGNyZWF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChsb2dEYXRhLmNyZWF0ZWRBdCksXG4gICAgICAgIHVwZGF0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChsb2dEYXRhLnVwZGF0ZWRBdClcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBuZXcgRXhlcmNpc2VMb2cocHJlcGFyZWRMb2dEYXRhKTtcbiAgICB9KTtcbiAgXG4gICAgcmV0dXJuIHsgd29ya291dCwgbG9ncyB9O1xuICB9XG5cbiAgYXN5bmMgc2F2ZVdvcmtvdXRTZXNzaW9uKHtcbiAgICB1c2VySWQsXG4gICAgd29ya291dCxcbiAgICBsb2dzXG4gIH06IHtcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICB3b3Jrb3V0OiBXb3Jrb3V0LFxuICAgIGxvZ3M6IEV4ZXJjaXNlTG9nW11cbiAgfSk6IFByb21pc2U8eyB3b3Jrb3V0OiBXb3Jrb3V0IHwgbnVsbDsgbG9nczogRXhlcmNpc2VMb2dbXSB9PiB7XG4gICAgaWYgKCF1c2VySWQpIHRocm93IG5ldyBFcnJvcignTm8gdXNlciBJRCBwcm92aWRlZCcpO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vICoqKiBTVEFSVDogQ2xlYW51cCBleGlzdGluZyBRdWV1ZWRVcCBzZXNzaW9ucyAqKipcbiAgICAgIGNvbnN0IHNlc3Npb25zUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgdXNlcklkLCAnd29ya291dFNlc3Npb25zJyk7XG4gICAgICBjb25zdCBxID0gcXVlcnkoc2Vzc2lvbnNSZWYsIHdoZXJlKCd3b3Jrb3V0U3RhdHVzJywgJz09JywgV29ya291dFN0YXR1cy5RdWV1ZWRVcCkpO1xuICAgICAgY29uc3QgcXVldWVkU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuXG4gICAgICBpZiAoIXF1ZXVlZFNuYXBzaG90LmVtcHR5KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbV29ya291dFNlcnZpY2VdIEZvdW5kICR7cXVldWVkU25hcHNob3Quc2l6ZX0gZXhpc3RpbmcgUXVldWVkVXAgc2Vzc2lvbihzKSBmb3IgdXNlciAke3VzZXJJZH0uIENsZWFuaW5nIHVwLi4uYCk7XG4gICAgICAgIGNvbnN0IGRlbGV0ZUJhdGNoID0gd3JpdGVCYXRjaChkYik7XG4gICAgICAgIFxuICAgICAgICAvLyBVc2UgUHJvbWlzZS5hbGwgdG8gaGFuZGxlIGFzeW5jaHJvbm91cyBsb2cgZmV0Y2hpbmcgZm9yIGFsbCBzZXNzaW9uc1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChxdWV1ZWRTbmFwc2hvdC5kb2NzLm1hcChhc3luYyAoc2Vzc2lvbkRvYykgPT4ge1xuICAgICAgICAgIC8vIERlbGV0ZSBsb2dzIHN1YmNvbGxlY3Rpb24gZmlyc3RcbiAgICAgICAgICBjb25zdCBsb2dzVG9EZWxldGVSZWYgPSBjb2xsZWN0aW9uKHNlc3Npb25Eb2MucmVmLCAnbG9ncycpO1xuICAgICAgICAgIGNvbnN0IGxvZ3NUb0RlbGV0ZVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhsb2dzVG9EZWxldGVSZWYpO1xuICAgICAgICAgIGxvZ3NUb0RlbGV0ZVNuYXBzaG90LmZvckVhY2gobG9nRG9jID0+IHtcbiAgICAgICAgICAgIGRlbGV0ZUJhdGNoLmRlbGV0ZShsb2dEb2MucmVmKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvLyBUaGVuIGRlbGV0ZSB0aGUgc2Vzc2lvbiBkb2MgaXRzZWxmXG4gICAgICAgICAgZGVsZXRlQmF0Y2guZGVsZXRlKHNlc3Npb25Eb2MucmVmKTtcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGF3YWl0IGRlbGV0ZUJhdGNoLmNvbW1pdCgpO1xuICAgICAgICBjb25zb2xlLmxvZyhgW1dvcmtvdXRTZXJ2aWNlXSBGaW5pc2hlZCBjbGVhbmluZyB1cCBleGlzdGluZyBRdWV1ZWRVcCBzZXNzaW9ucy5gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbV29ya291dFNlcnZpY2VdIE5vIGV4aXN0aW5nIFF1ZXVlZFVwIHNlc3Npb25zIGZvdW5kIGZvciB1c2VyICR7dXNlcklkfS5gKTtcbiAgICAgIH1cbiAgICAgIC8vICoqKiBFTkQ6IENsZWFudXAgZXhpc3RpbmcgUXVldWVkVXAgc2Vzc2lvbnMgKioqXG5cbiAgICAgIGNvbnNvbGUubG9nKCdJbmNvbWluZyBsb2dzOicsIGxvZ3MubWFwKGxvZyA9PiAoe1xuICAgICAgICBuYW1lOiBsb2cuZXhlcmNpc2UubmFtZSxcbiAgICAgICAgY2F0ZWdvcnk6IGxvZy5leGVyY2lzZS5jYXRlZ29yeSxcbiAgICAgICAgb3JpZ2luYWxUeXBlOiBsb2cuZXhlcmNpc2UuY2F0ZWdvcnk/LnR5cGVcbiAgICAgIH0pKSk7XG5cbiAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgIFxuICAgICAgY29uc3QgY2xlYW5Xb3Jrb3V0ID0gbmV3IFdvcmtvdXQoe1xuICAgICAgICAuLi53b3Jrb3V0LFxuICAgICAgICAvLyBHZW5lcmF0ZSBhIE5FVyBJRCBmb3IgdGhlIHNlc3Npb24gZG9jdW1lbnQgaXRzZWxmXG4gICAgICAgIGlkOiBkb2Moc2Vzc2lvbnNSZWYpLmlkLCAvLyBHZW5lcmF0ZSBJRCBoZXJlXG4gICAgICAgIHJvdW5kV29ya291dElkOiBgJHt3b3Jrb3V0LmlkfS0ke2N1cnJlbnREYXRlLmdldFRpbWUoKX1gLFxuICAgICAgICB3b3Jrb3V0U3RhdHVzOiBXb3Jrb3V0U3RhdHVzLlF1ZXVlZFVwLFxuICAgICAgICBjcmVhdGVkQXQ6IGN1cnJlbnREYXRlLFxuICAgICAgICB1cGRhdGVkQXQ6IGN1cnJlbnREYXRlLFxuICAgICAgICBzdGFydFRpbWU6IGN1cnJlbnREYXRlLFxuICAgICAgICBsb2dzOiBbXSAvLyBMb2dzIHN0b3JlZCBpbiBzdWJjb2xsZWN0aW9uXG4gICAgICB9KTtcblxuICAgICAgLy8gVXNlIHRoZSBnZW5lcmF0ZWQgSUQgZm9yIHRoZSBkb2N1bWVudCByZWZlcmVuY2VcbiAgICAgIGNvbnN0IHdvcmtvdXRTZXNzaW9uUmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VySWQsICd3b3Jrb3V0U2Vzc2lvbnMnLCBjbGVhbldvcmtvdXQuaWQpO1xuICAgICAgYXdhaXQgc2V0RG9jKHdvcmtvdXRTZXNzaW9uUmVmLCBjbGVhbldvcmtvdXQudG9EaWN0aW9uYXJ5KCkpO1xuXG4gICAgICBjb25zdCBsb2dzUmVmID0gY29sbGVjdGlvbih3b3Jrb3V0U2Vzc2lvblJlZiwgJ2xvZ3MnKTtcbiAgICAgIGNvbnN0IGxvZ0JhdGNoID0gd3JpdGVCYXRjaChkYik7XG4gICAgICBjb25zdCB1cGRhdGVkTG9nc1dpdGhOZXdJZHM6IEV4ZXJjaXNlTG9nW10gPSBbXTsgLy8gQXJyYXkgdG8gaG9sZCBsb2dzIHdpdGggdXBkYXRlZCBJRHNcblxuICAgICAgbG9ncy5mb3JFYWNoKChsb2csIGluZGV4KSA9PiB7XG4gICAgICAgIC8vIEdlbmVyYXRlIGEgdW5pcXVlIElEIGZvciB0aGUgbG9nIGRvY3VtZW50IHdpdGhpbiB0aGUgc3ViY29sbGVjdGlvblxuICAgICAgICBjb25zdCBsb2dEb2NSZWYgPSBkb2MobG9nc1JlZik7XG4gICAgICAgIGNvbnN0IG5ld0xvZ0lkID0gbG9nRG9jUmVmLmlkOyAvLyBVc2UgRmlyZXN0b3JlIGdlbmVyYXRlZCBJRFxuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBsb2cgaW5zdGFuY2UncyBJRFxuICAgICAgICBjb25zdCB1cGRhdGVkTG9nID0gbmV3IEV4ZXJjaXNlTG9nKHsgLi4ubG9nLCBpZDogbmV3TG9nSWQgfSk7XG4gICAgICAgIHVwZGF0ZWRMb2dzV2l0aE5ld0lkcy5wdXNoKHVwZGF0ZWRMb2cpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGBQcm9jZXNzaW5nIGxvZyAke2luZGV4fSAoTmV3IElEOiAke25ld0xvZ0lkfSk6YCwge1xuICAgICAgICAgIG5hbWU6IHVwZGF0ZWRMb2cuZXhlcmNpc2UubmFtZSxcbiAgICAgICAgICBvcmlnaW5hbENhdGVnb3J5OiB1cGRhdGVkTG9nLmV4ZXJjaXNlLmNhdGVnb3J5LFxuICAgICAgICAgIG9yaWdpbmFsVHlwZTogdXBkYXRlZExvZy5leGVyY2lzZS5jYXRlZ29yeT8udHlwZVxuICAgICAgICB9KTtcblxuICAgICAgICBsb2dCYXRjaC5zZXQobG9nRG9jUmVmLCB7XG4gICAgICAgICAgLi4udXBkYXRlZExvZy50b0RpY3Rpb25hcnkoKSxcbiAgICAgICAgICB3b3Jrb3V0SWQ6IGNsZWFuV29ya291dC5pZCwgLy8gVXNlIHRoZSBuZXcgd29ya291dCBzZXNzaW9uIElEXG4gICAgICAgICAgb3JkZXI6IGluZGV4LFxuICAgICAgICAgIGxvZ1N1Ym1pdHRlZDogZmFsc2UsXG4gICAgICAgICAgaXNDb21wbGV0ZWQ6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfSk7IFxuXG4gICAgICBhd2FpdCBsb2dCYXRjaC5jb21taXQoKTtcbiAgICAgIFxuICAgICAgLy8gUmV0dXJuIHRoZSB3b3Jrb3V0IEFORCB0aGUgbG9ncyB3aXRoIHRoZWlyIG5ldyBGaXJlc3RvcmUgZG9jdW1lbnQgSURzXG4gICAgICByZXR1cm4geyB3b3Jrb3V0OiBjbGVhbldvcmtvdXQsIGxvZ3M6IHVwZGF0ZWRMb2dzV2l0aE5ld0lkcyB9OyBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHdvcmtvdXQgc2Vzc2lvbjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhhbXBsZSBcImpvaW4gY2hhbGxlbmdlXCIgbWV0aG9kIHVzaW5nIHRoZSBjbGllbnQgU0RLIChubyBhZG1pbiBwcml2aWxlZ2VzKS5cbiAgICogVGhpcyBjcmVhdGVzIGEgZG9jIGluIGB1c2VyLWNoYWxsZW5nZWAgd2l0aCB0aGUgdXNlcklkLCBjaGFsbGVuZ2VJZCwgZXRjLlxuICAgKi9cbiAgYXN5bmMgam9pbkNoYWxsZW5nZSh7XG4gICAgdXNlcm5hbWUsXG4gICAgY2hhbGxlbmdlSWRcbiAgfToge1xuICAgIHVzZXJuYW1lOiBzdHJpbmc7XG4gICAgY2hhbGxlbmdlSWQ6IHN0cmluZztcbiAgfSk6IFByb21pc2U8YW55PiB7XG4gICAgLy8gMSkgTWFrZSBzdXJlIHdlIGhhdmUgYSBzaWduZWQtaW4gdXNlclxuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlclNlcnZpY2Uubm9uVUlDdXJyZW50VXNlcjtcbiAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgaXMgc2lnbmVkIGluJyk7XG4gICAgfVxuXG4gICAgLy8gMikgRmluZCB0aGUgdXNlciBkb2MgYnkgdXNlcm5hbWVcbiAgICBjb25zdCB1c2Vyc1JlZiA9IGNvbGxlY3Rpb24oZGIsICd1c2VycycpO1xuICAgIGNvbnN0IHVzZXJRdWVyeSA9IHF1ZXJ5KHVzZXJzUmVmLCB3aGVyZSgndXNlcm5hbWUnLCAnPT0nLCB1c2VybmFtZSkpO1xuICAgIGNvbnN0IHVzZXJTbmFwc2hvdCA9IGF3YWl0IGdldERvY3ModXNlclF1ZXJ5KTtcblxuICAgIGlmICh1c2VyU25hcHNob3QuZW1wdHkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBub3QgZm91bmQnKTtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyRG9jID0gdXNlclNuYXBzaG90LmRvY3NbMF07XG4gICAgY29uc3QgdXNlckRhdGEgPSB1c2VyRG9jLmRhdGEoKTtcbiAgICBjb25zdCB1c2VySWQgPSB1c2VyRG9jLmlkO1xuXG4gICAgLy8gMykgQ2hlY2sgaWYgdGhlIGNoYWxsZW5nZSBkb2MgZXhpc3RzXG4gICAgY29uc3QgY2hhbGxlbmdlUmVmID0gZG9jKGRiLCAnc3dlYXRsaXN0LWNvbGxlY3Rpb24nLCBjaGFsbGVuZ2VJZCk7XG4gICAgY29uc3QgY2hhbGxlbmdlU25hcCA9IGF3YWl0IGdldERvYyhjaGFsbGVuZ2VSZWYpO1xuXG4gICAgaWYgKCFjaGFsbGVuZ2VTbmFwLmV4aXN0cygpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NoYWxsZW5nZSBub3QgZm91bmQnKTtcbiAgICB9XG5cbiAgICBjb25zdCBjaGFsbGVuZ2UgPSBjaGFsbGVuZ2VTbmFwLmRhdGEoKTtcblxuICAgIC8vIEN1cnJlbnQgdGltZSBhcyBEYXRlIG9iamVjdHMgdG8gYmUgdXNlZCBpbiBvdXIgYXBwIGxvZ2ljXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBcbiAgICAvLyA0KSBCdWlsZCBuZXcgdXNlci1jaGFsbGVuZ2UgZG9jdW1lbnRcbiAgICBjb25zdCB1c2VyQ2hhbGxlbmdlSWQgPSBgJHtjaGFsbGVuZ2VJZH0tJHt1c2VySWR9LSR7RGF0ZS5ub3coKX1gO1xuICAgIGNvbnN0IHVzZXJDaGFsbGVuZ2VEYXRhID0ge1xuICAgICAgaWQ6IHVzZXJDaGFsbGVuZ2VJZCxcbiAgICAgIGNoYWxsZW5nZTogY2hhbGxlbmdlLFxuICAgICAgY2hhbGxlbmdlSWQsXG4gICAgICB1c2VySWQsXG4gICAgICBmY21Ub2tlbjogdXNlckRhdGEuZmNtVG9rZW4gfHwgJycsXG4gICAgICBwcm9maWxlSW1hZ2U6IHVzZXJEYXRhLnByb2ZpbGVJbWFnZSB8fCB7fSxcbiAgICAgIHByb2dyZXNzOiAwLFxuICAgICAgY29tcGxldGVkV29ya291dHM6IFtdLFxuICAgICAgaXNDb21wbGV0ZWQ6IGZhbHNlLFxuICAgICAgdWlkOiB1c2VySWQsXG4gICAgICBsb2NhdGlvbjogdXNlckRhdGEubG9jYXRpb24gfHwgbnVsbCxcbiAgICAgIGNpdHk6ICcnLFxuICAgICAgY291bnRyeTogJycsXG4gICAgICB0aW1lem9uZTogJycsXG4gICAgICB1c2VybmFtZSxcbiAgICAgIC8vIFN0b3JlIGRhdGVzIGFzIFVuaXggdGltZXN0YW1wcyAoc2Vjb25kcyBzaW5jZSBlcG9jaCkgZm9yIGNvbnNpc3RlbmN5IHdpdGggaU9TXG4gICAgICBqb2luRGF0ZTogZGF0ZVRvVW5peFRpbWVzdGFtcChub3cpLFxuICAgICAgY3JlYXRlZEF0OiBkYXRlVG9Vbml4VGltZXN0YW1wKG5vdyksXG4gICAgICB1cGRhdGVkQXQ6IGRhdGVUb1VuaXhUaW1lc3RhbXAobm93KSxcbiAgICAgIHB1bHNlUG9pbnRzOiB7XG4gICAgICAgIGJhc2VDb21wbGV0aW9uOiAwLFxuICAgICAgICBmaXJzdENvbXBsZXRpb246IDAsXG4gICAgICAgIHN0cmVha0JvbnVzOiAwLFxuICAgICAgICBjaGVja0luQm9udXM6IDAsXG4gICAgICAgIGVmZm9ydFJhdGluZzogMCxcbiAgICAgICAgY2hhdFBhcnRpY2lwYXRpb246IDAsXG4gICAgICAgIGxvY2F0aW9uQ2hlY2tpbjogMCxcbiAgICAgICAgY29udGVudEVuZ2FnZW1lbnQ6IDAsXG4gICAgICAgIGVuY291cmFnZW1lbnRTZW50OiAwLFxuICAgICAgICBlbmNvdXJhZ2VtZW50UmVjZWl2ZWQ6IDBcbiAgICAgIH0sXG4gICAgICBjdXJyZW50U3RyZWFrOiAwLFxuICAgICAgZW5jb3VyYWdlZFVzZXJzOiBbXSxcbiAgICAgIGVuY291cmFnZWRCeVVzZXJzOiBbXSxcbiAgICAgIGNoZWNrSW5zOiBbXVxuICAgIH07XG5cbiAgICAvLyA1KSBTdG9yZSB1c2VyLWNoYWxsZW5nZSBkb2NcbiAgICBhd2FpdCBzZXREb2MoZG9jKGRiLCAndXNlci1jaGFsbGVuZ2UnLCB1c2VyQ2hhbGxlbmdlSWQpLCB1c2VyQ2hhbGxlbmdlRGF0YSk7XG4gICAgXG4gICAgLy8gUmV0dXJuIHRoZSBjcmVhdGVkIGRhdGEgZm9yIGxvZ2dpbmcvZGVidWdnaW5nIHB1cnBvc2VzXG4gICAgcmV0dXJuIHVzZXJDaGFsbGVuZ2VEYXRhO1xuICB9XG5cbiAgYXN5bmMgZmV0Y2hVc2VyQ2hhbGxlbmdlQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyQ2hhbGxlbmdlIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkb2NSZWYgPSBkb2MoZGIsICd1c2VyLWNoYWxsZW5nZScsIGlkKTtcbiAgICAgIGNvbnN0IGRvY1NuYXAgPSBhd2FpdCBnZXREb2MoZG9jUmVmKTtcbiAgICAgIFxuICAgICAgaWYgKCFkb2NTbmFwLmV4aXN0cygpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IFVzZXJDaGFsbGVuZ2Uoe1xuICAgICAgICBpZDogZG9jU25hcC5pZCxcbiAgICAgICAgLi4uZG9jU25hcC5kYXRhKClcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyIGNoYWxsZW5nZSBieSBJRDonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlcyBhIHVzZXIgY2hhbGxlbmdlIGJ5IElEXG4gICAqIEBwYXJhbSBpZCBUaGUgSUQgb2YgdGhlIHVzZXIgY2hhbGxlbmdlIHRvIGRlbGV0ZVxuICAgKiBAcmV0dXJucyBBIHByb21pc2UgcmVzb2x2aW5nIHRvIGEgc3VjY2VzcyBmbGFnIGFuZCBtZXNzYWdlXG4gICAqL1xuICBhc3luYyBkZWxldGVVc2VyQ2hhbGxlbmdlKGlkOiBzdHJpbmcpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nIH0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFpZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCB1c2VyIGNoYWxsZW5nZSBJRFwiXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIEZpcnN0IGZldGNoIHRvIGVuc3VyZSBpdCBleGlzdHNcbiAgICAgIGNvbnN0IGNoYWxsZW5nZVJlZiA9IGRvYyhkYiwgJ3VzZXItY2hhbGxlbmdlJywgaWQpO1xuICAgICAgY29uc3QgY2hhbGxlbmdlU25hcCA9IGF3YWl0IGdldERvYyhjaGFsbGVuZ2VSZWYpO1xuICAgICAgXG4gICAgICBpZiAoIWNoYWxsZW5nZVNuYXAuZXhpc3RzKCkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBcIlVzZXIgY2hhbGxlbmdlIG5vdCBmb3VuZFwiXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIERlbGV0ZSB0aGUgZG9jdW1lbnRcbiAgICAgIGF3YWl0IGRlbGV0ZURvYyhjaGFsbGVuZ2VSZWYpO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiBcIlVzZXIgY2hhbGxlbmdlIHN1Y2Nlc3NmdWxseSBkZWxldGVkXCJcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIHVzZXIgY2hhbGxlbmdlOicsIGVycm9yKTtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQnO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6IGBGYWlsZWQgdG8gZGVsZXRlOiAke2Vycm9yTWVzc2FnZX1gXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0IG5vblVJQ3VycmVudFVzZXIoKTogVXNlciB8IG51bGwge1xuICAgIHJldHVybiB1c2VyU2VydmljZS5ub25VSUN1cnJlbnRVc2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoZXMgYWxsIFN3ZWF0bGlzdENvbGxlY3Rpb25zIHRoYXQgY29udGFpbiBhIGNoYWxsZW5nZSBvYmplY3QuXG4gICAqIEludGVuZGVkIGZvciBhZG1pbiBwdXJwb3Nlcy5cbiAgICogQHJldHVybnMge1Byb21pc2U8U3dlYXRsaXN0Q29sbGVjdGlvbltdPn0gQXJyYXkgb2YgY29sbGVjdGlvbnMgd2l0aCBjaGFsbGVuZ2VzLlxuICAgKi9cbiAgYXN5bmMgZmV0Y2hBbGxBZG1pbkNvbGxlY3Rpb25zKCk6IFByb21pc2U8U3dlYXRsaXN0Q29sbGVjdGlvbltdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbGxlY3Rpb25zUmVmID0gY29sbGVjdGlvbihkYiwgJ3N3ZWF0bGlzdC1jb2xsZWN0aW9uJyk7XG4gICAgICBcbiAgICAgIC8vIFF1ZXJ5IGZvciBkb2N1bWVudHMgd2hlcmUgdGhlICdjaGFsbGVuZ2UnIGZpZWxkIGV4aXN0cyBhbmQgaXMgbm90IG51bGwuXG4gICAgICAvLyBGaXJlc3RvcmUgZG9lc24ndCBkaXJlY3RseSBzdXBwb3J0IFwiZXhpc3RzXCIsIGJ1dCB3ZSBjYW4gcXVlcnkgZm9yIGEga25vd24gc3ViZmllbGRcbiAgICAgIC8vIG9yIGZpbHRlciBvdXQgbnVsbHMgbGF0ZXIuIEEgc2ltcGxlciBhcHByb2FjaCBpcyB0byBmZXRjaCBhbGwgYW5kIGZpbHRlciBjbGllbnQtc2lkZSBpZiBuZWVkZWQsXG4gICAgICAvLyBvciBxdWVyeSBmb3IgYSBtYW5kYXRvcnkgZmllbGQgd2l0aGluIGNoYWxsZW5nZSBsaWtlICdzdGF0dXMnLlxuICAgICAgLy8gTGV0J3MgcXVlcnkgZm9yIGNoYWxsZW5nZS5zdGF0dXMgZXhpc3RzIGluZGlyZWN0bHkgYnkgb3JkZXJpbmcgYnkgaXQgYW5kIGZpbHRlcmluZyBub24tbnVsbCBsYXRlclxuICAgICAgLy8gT3Igc2ltcGx5IGZldGNoIGFsbCBjb2xsZWN0aW9ucyBhbmQgZmlsdGVyLlxuICAgICAgLy8gTGV0J3MgZmV0Y2ggYWxsIGFuZCBmaWx0ZXIgZm9yIHNpbXBsaWNpdHkgYW5kIHJvYnVzdG5lc3MgYWdhaW5zdCBtaXNzaW5nIG9wdGlvbmFsIGZpZWxkcy5cblxuICAgICAgLy8gRmV0Y2ggYWxsIGRvY3VtZW50cyBpbiB0aGUgY29sbGVjdGlvblxuICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHF1ZXJ5KGNvbGxlY3Rpb25zUmVmLCBvcmRlckJ5KCdjcmVhdGVkQXQnLCAnZGVzYycpKSk7IC8vIE9yZGVyIGJ5IGNyZWF0aW9uXG5cbiAgICAgIGNvbnN0IGNvbGxlY3Rpb25zID0gc25hcHNob3QuZG9jc1xuICAgICAgICAubWFwKGRvYyA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgICAgICAgLy8gT25seSBpbmNsdWRlIGlmIHRoZSBjaGFsbGVuZ2Ugb2JqZWN0IGV4aXN0cyBhbmQgaXMgbm90IGVtcHR5L251bGxcbiAgICAgICAgICAgIGlmIChkYXRhLmNoYWxsZW5nZSAmJiB0eXBlb2YgZGF0YS5jaGFsbGVuZ2UgPT09ICdvYmplY3QnICYmIE9iamVjdC5rZXlzKGRhdGEuY2hhbGxlbmdlKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHJldHVybiBuZXcgU3dlYXRsaXN0Q29sbGVjdGlvbih7XG4gICAgICAgICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgICAgICAuLi5kYXRhXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH0gY2F0Y2gobWFwRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIG1hcHBpbmcgU3dlYXRsaXN0Q29sbGVjdGlvbiB3aXRoIGlkICR7ZG9jLmlkfTpgLCBtYXBFcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5maWx0ZXIoKGNvbGxlY3Rpb24pOiBjb2xsZWN0aW9uIGlzIFN3ZWF0bGlzdENvbGxlY3Rpb24gPT4gY29sbGVjdGlvbiAhPT0gbnVsbCk7IC8vIEZpbHRlciBvdXQgbnVsbHNcblxuICAgICAgY29uc29sZS5sb2coYEZldGNoZWQgJHtjb2xsZWN0aW9ucy5sZW5ndGh9IGNvbGxlY3Rpb25zIHdpdGggY2hhbGxlbmdlcyBmb3IgYWRtaW4gdmlldy5gKTtcbiAgICAgIHJldHVybiBjb2xsZWN0aW9ucztcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhbGwgYWRtaW4gY29sbGVjdGlvbnM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIFtdOyAvLyBSZXR1cm4gZW1wdHkgYXJyYXkgb24gZXJyb3JcbiAgICB9XG4gIH1cblxuICAvLyAtLS0gU2hhcmUgTGluayBHZW5lcmF0aW9uIC0tLSBcbiAgYXN5bmMgZ2VuZXJhdGVTaGFyZWFibGVSb3VuZExpbmsoY29sbGVjdGlvbkRhdGE6IFN3ZWF0bGlzdENvbGxlY3Rpb24sIGN1cnJlbnRVc2VyOiBVc2VyKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgaWYgKCFjdXJyZW50VXNlciB8fCAhY29sbGVjdGlvbkRhdGEgfHwgIWNvbGxlY3Rpb25EYXRhLmlkKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiTWlzc2luZyB1c2VyIG9yIGNvbGxlY3Rpb24gZGF0YSBmb3IgbGluayBnZW5lcmF0aW9uLlwiKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbGxlY3Rpb25JZCA9IGNvbGxlY3Rpb25EYXRhLmlkO1xuICAgIGNvbnN0IHVzZXJJZCA9IGN1cnJlbnRVc2VyLmlkO1xuICAgIC8vIFVzZSBmaXJzdCBvd25lciBhcyBkZWZhdWx0IGhvc3QgSUQgaWYgbm8gc3BlY2lmaWMgcmVmZXJyYWwgbG9naWMgeWV0XG4gICAgY29uc3QgaG9zdElkID0gY29sbGVjdGlvbkRhdGEub3duZXJJZD8uWzBdIHx8IHVzZXJJZDsgXG5cbiAgICBjb25zdCBpc1BhaWQgPSBjb2xsZWN0aW9uRGF0YS5jaGFsbGVuZ2U/LnByaWNpbmdJbmZvPy5pc0VuYWJsZWQgPz8gZmFsc2U7XG5cbiAgICAvLyAtLS0gQ29uc3RydWN0IEJhc2UgRmFsbGJhY2sgVVJMIC0tLSAoVXNlZCBmb3IgYm90aCBwYWlkIGFuZCBmcmVlIGxpbmtzKVxuICAgIGNvbnN0IGZhbGxiYWNrQmFzZVVSTCA9IGBodHRwczovL2ZpdHdpdGhwdWxzZS5haS9yb3VuZC1pbnZpdGF0aW9uLyR7Y29sbGVjdGlvbklkfWA7XG4gICAgY29uc3QgZmFsbGJhY2tQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgIGlkOiBob3N0SWQsXG4gICAgICBzaGFyZWRCeTogdXNlcklkXG4gICAgfSk7XG4gICAgY29uc3QgZmFsbGJhY2tVUkxTdHJpbmcgPSBgJHtmYWxsYmFja0Jhc2VVUkx9PyR7ZmFsbGJhY2tQYXJhbXMudG9TdHJpbmcoKX1gO1xuXG4gICAgLy8gLS0tIFBhaWQgUm91bmQ6IFJldHVybiBEaXJlY3QgV2ViIEZhbGxiYWNrIC0tLSBcbiAgICBpZiAoaXNQYWlkKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIlJvdW5kIGlzIHBhaWQuIEdlbmVyYXRpbmcgZGlyZWN0IHdlYiBmYWxsYmFjayBsaW5rLlwiKTtcbiAgICAgIHJldHVybiBmYWxsYmFja1VSTFN0cmluZztcbiAgICB9XG5cbiAgICAvLyAtLS0gRnJlZSBSb3VuZDogR2VuZXJhdGUgQXBwc0ZseWVyIE9uZUxpbmsgLS0tIFxuICAgIGNvbnNvbGUubG9nKFwiUm91bmQgaXMgZnJlZS4gR2VuZXJhdGluZyBBcHBzRmx5ZXIgT25lTGluay5cIik7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG9uZUxpbmtTdWJkb21haW4gPSBcImZpdHdpdGhwdWxzZS5vbmVsaW5rLm1lXCI7IC8vIFlvdXIgT25lTGluayBzdWJkb21haW5cbiAgICAgIGNvbnN0IG9uZUxpbmtJRCA9IFwieWZmRFwiOyAvLyBZb3VyIE9uZUxpbmsgVGVtcGxhdGUgSURcbiAgICAgIGNvbnN0IG9uZUxpbmtCYXNlVVJMID0gYGh0dHBzOi8vJHtvbmVMaW5rU3ViZG9tYWlufS8ke29uZUxpbmtJRH1gO1xuICAgICAgXG4gICAgICAvLyBVUkwtZW5jb2RlIHRoZSBmYWxsYmFjayBVUkwgZm9yIHRoZSBhZl9yIHBhcmFtZXRlciB2YWx1ZVxuICAgICAgY29uc3QgZW5jb2RlZEZhbGxiYWNrVVJMID0gZW5jb2RlVVJJQ29tcG9uZW50KGZhbGxiYWNrVVJMU3RyaW5nKTtcblxuICAgICAgLy8gRGVmaW5lIHBhcmFtZXRlcnNcbiAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICBwaWQ6IFwidXNlcl9zaGFyZVwiLCAvLyBNZWRpYSBTb3VyY2VcbiAgICAgICAgYzogXCJyb3VuZF9zaGFyZVwiLCAvLyBDYW1wYWlnblxuICAgICAgICBhZl9yZWZlcnJlcl9jdXN0b21lcl9pZDogdXNlcklkLCAvLyBSZWZlcnJlciBJRFxuICAgICAgICAvLyAtLS0gQ3VzdG9tIERlZXAgTGluayBQYXJhbXMgLS0tIFxuICAgICAgICBkZWVwX2xpbmtfdmFsdWU6IFwicm91bmRcIiwgXG4gICAgICAgIHJvdW5kSWQ6IGNvbGxlY3Rpb25JZCxcbiAgICAgICAgaWQ6IGhvc3RJZCwgLy8gT3JpZ2luYWwgSG9zdCBJRFxuICAgICAgICBzaGFyZWRCeTogdXNlcklkLCAvLyBVc2VyIHdobyBzaGFyZWRcbiAgICAgICAgLy8gLS0tIEZhbGxiYWNrIFJlZGlyZWN0IC0tLSBcbiAgICAgICAgYWZfcjogZW5jb2RlZEZhbGxiYWNrVVJMXG4gICAgICB9KTtcblxuICAgICAgLy8gLS0tIFNvY2lhbCBQcmV2aWV3IChPcGVuIEdyYXBoKSBQYXJhbXMgLS0tIFxuICAgICAgY29uc3QgY2hhbGxlbmdlVGl0bGUgPSBjb2xsZWN0aW9uRGF0YS5jaGFsbGVuZ2U/LnRpdGxlIHx8IGNvbGxlY3Rpb25EYXRhLnRpdGxlIHx8ICdQdWxzZSBDaGFsbGVuZ2UnO1xuICAgICAgY29uc3Qgc3RhcnREYXRlID0gY29sbGVjdGlvbkRhdGEuY2hhbGxlbmdlPy5zdGFydERhdGUgPyBuZXcgRGF0ZShjb2xsZWN0aW9uRGF0YS5jaGFsbGVuZ2Uuc3RhcnREYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoKSA6ICcnO1xuICAgICAgY29uc3QgZW5kRGF0ZSA9IGNvbGxlY3Rpb25EYXRhLmNoYWxsZW5nZT8uZW5kRGF0ZSA/IG5ldyBEYXRlKGNvbGxlY3Rpb25EYXRhLmNoYWxsZW5nZS5lbmREYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoKSA6ICcnO1xuICAgICAgY29uc3QgZGF0ZVJhbmdlID0gc3RhcnREYXRlICYmIGVuZERhdGUgPyBgJHtzdGFydERhdGV9IC0gJHtlbmREYXRlfWAgOiAnQ2hlY2sgaXQgb3V0ISc7XG4gICAgICBjb25zdCBwcmV2aWV3VGl0bGUgPSBjaGFsbGVuZ2VUaXRsZTtcbiAgICAgIGNvbnN0IHByZXZpZXdEZXNjcmlwdGlvbiA9IGBKb2luIG1lIGluIHRoaXMgZml0bmVzcyBjaGFsbGVuZ2Ugb24gUHVsc2UhIPCfj4vvuI/igI3imYLvuI8gJHtkYXRlUmFuZ2V9YDtcbiAgICAgIGNvbnN0IHByZXZpZXdJbWFnZVVSTCA9IFwiaHR0cHM6Ly9maXR3aXRocHVsc2UuYWkvcm91bmQtcHJldmlldy5wbmdcIjsgLy8gVXNlIHlvdXIgYWN0dWFsIHByZXZpZXcgaW1hZ2UgVVJMXG5cbiAgICAgIHBhcmFtcy5zZXQoXCJhZl9vZ190aXRsZVwiLCBwcmV2aWV3VGl0bGUpO1xuICAgICAgcGFyYW1zLnNldChcImFmX29nX2Rlc2NyaXB0aW9uXCIsIHByZXZpZXdEZXNjcmlwdGlvbik7XG4gICAgICBwYXJhbXMuc2V0KFwiYWZfb2dfaW1hZ2VcIiwgcHJldmlld0ltYWdlVVJMKTtcblxuICAgICAgY29uc3QgZmluYWxVUkwgPSBgJHtvbmVMaW5rQmFzZVVSTH0/JHtwYXJhbXMudG9TdHJpbmcoKX1gO1xuICAgICAgY29uc29sZS5sb2coXCJHZW5lcmF0ZWQgQXBwc0ZseWVyIE9uZUxpbms6IFwiLCBmaW5hbFVSTCk7XG4gICAgICByZXR1cm4gZmluYWxVUkw7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdlbmVyYXRpbmcgQXBwc0ZseWVyIE9uZUxpbms6XCIsIGVycm9yKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiRmFsbGluZyBiYWNrIHRvIHNpbXBsZSB3ZWIgVVJMIGR1ZSB0byBPbmVMaW5rIGdlbmVyYXRpb24gZXJyb3IuXCIpXG4gICAgICAvLyBGYWxsYmFjayB0byB0aGUgc2ltcGxlciB3ZWIgVVJMIGlmIE9uZUxpbmsgZ2VuZXJhdGlvbiBmYWlsc1xuICAgICAgcmV0dXJuIGZhbGxiYWNrVVJMU3RyaW5nOyBcbiAgICB9XG4gIH1cbiAgLy8gLS0tIEVuZCBTaGFyZSBMaW5rIEdlbmVyYXRpb24gLS0tXG5cbiAgLy8gLS0tIFJlbW92ZSBTd2VhdGxpc3QgZnJvbSBDb2xsZWN0aW9uIC0tLSBcbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBzcGVjaWZpYyBzd2VhdGxpc3QgKHN0YWNrKSBmcm9tIGEgc3dlYXRsaXN0IGNvbGxlY3Rpb24gKHJvdW5kKS5cbiAgICogQHBhcmFtIGNvbGxlY3Rpb25JZCBUaGUgSUQgb2YgdGhlIFN3ZWF0bGlzdENvbGxlY3Rpb24gZG9jdW1lbnQuXG4gICAqIEBwYXJhbSBzd2VhdGxpc3RJZCBUaGUgSUQgb2YgdGhlIHN3ZWF0bGlzdCB0byByZW1vdmUgZnJvbSB0aGUgJ3N3ZWF0bGlzdElkcycgYXJyYXkuXG4gICAqL1xuICBhc3luYyByZW1vdmVTdGFja0Zyb21Sb3VuZChjb2xsZWN0aW9uSWQ6IHN0cmluZywgc3dlYXRsaXN0SWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghY29sbGVjdGlvbklkIHx8ICFzd2VhdGxpc3RJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb2xsZWN0aW9uIElEIGFuZCBTd2VhdGxpc3QgSUQgYXJlIHJlcXVpcmVkLicpO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbGxlY3Rpb25SZWYgPSBkb2MoZGIsICdzd2VhdGxpc3QtY29sbGVjdGlvbicsIGNvbGxlY3Rpb25JZCk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coYEF0dGVtcHRpbmcgdG8gcmVtb3ZlIHN3ZWF0bGlzdCAke3N3ZWF0bGlzdElkfSBmcm9tIGNvbGxlY3Rpb24gJHtjb2xsZWN0aW9uSWR9YCk7XG4gICAgICBcbiAgICAgIC8vIEdldCB0aGUgY3VycmVudCBkb2N1bWVudCBkYXRhXG4gICAgICBjb25zdCBkb2NTbmFwID0gYXdhaXQgZ2V0RG9jKGNvbGxlY3Rpb25SZWYpO1xuXG4gICAgICBpZiAoIWRvY1NuYXAuZXhpc3RzKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTd2VhdGxpc3QgQ29sbGVjdGlvbiB3aXRoIElEICR7Y29sbGVjdGlvbklkfSBub3QgZm91bmQuYCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvbGxlY3Rpb25EYXRhID0gZG9jU25hcC5kYXRhKCk7XG4gICAgICBjb25zdCBjdXJyZW50U3dlYXRsaXN0SWRzRGF0YSA9IGNvbGxlY3Rpb25EYXRhLnN3ZWF0bGlzdElkcyB8fCBbXTtcbiAgICAgIC8vIEluc3RhbnRpYXRlIFN3ZWF0bGlzdElkZW50aWZpZXJzIGZyb20gdGhlIHJhdyBkYXRhXG4gICAgICBjb25zdCBjdXJyZW50U3dlYXRsaXN0SWRzOiBTd2VhdGxpc3RJZGVudGlmaWVyc1tdID0gY3VycmVudFN3ZWF0bGlzdElkc0RhdGEubWFwKChkYXRhOiBhbnkpID0+IG5ldyBTd2VhdGxpc3RJZGVudGlmaWVycyhkYXRhKSk7XG4gICAgICBjb25zb2xlLmxvZygnQ3VycmVudCBzd2VhdGxpc3RJZHMgKGluc3RhbnRpYXRlZCk6JywgY3VycmVudFN3ZWF0bGlzdElkcyk7XG5cbiAgICAgIC8vIEZpbHRlciBvdXQgdGhlIHN3ZWF0bGlzdCB0byBiZSByZW1vdmVkXG4gICAgICBjb25zdCB1cGRhdGVkU3dlYXRsaXN0SWRzID0gY3VycmVudFN3ZWF0bGlzdElkcy5maWx0ZXIoc3dlYXRsaXN0ID0+IHN3ZWF0bGlzdC5pZCAhPT0gc3dlYXRsaXN0SWQpO1xuICAgICAgY29uc29sZS5sb2coJ1VwZGF0ZWQgc3dlYXRsaXN0SWRzOicsIHVwZGF0ZWRTd2VhdGxpc3RJZHMpO1xuXG4gICAgICBpZiAodXBkYXRlZFN3ZWF0bGlzdElkcy5sZW5ndGggPT09IGN1cnJlbnRTd2VhdGxpc3RJZHMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgU3dlYXRsaXN0IHdpdGggSUQgJHtzd2VhdGxpc3RJZH0gbm90IGZvdW5kIHdpdGhpbiB0aGUgY29sbGVjdGlvbiAke2NvbGxlY3Rpb25JZH0uIE5vIHVwZGF0ZSBwZXJmb3JtZWQuYCk7XG4gICAgICAgIC8vIE9wdGlvbmFsbHkgdGhyb3cgYW4gZXJyb3Igb3IganVzdCByZXR1cm4gaWYgeW91IGNvbnNpZGVyIHRoaXMgYW4gaXNzdWVcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKGBTd2VhdGxpc3Qgd2l0aCBJRCAke3N3ZWF0bGlzdElkfSBub3QgZm91bmQgd2l0aGluIHRoZSBjb2xsZWN0aW9uLmApO1xuICAgICAgICByZXR1cm47IFxuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgdGhlIGRvY3VtZW50IHdpdGggdGhlIGZpbHRlcmVkIGFycmF5XG4gICAgICBhd2FpdCB1cGRhdGVEb2MoY29sbGVjdGlvblJlZiwge1xuICAgICAgICBzd2VhdGxpc3RJZHM6IHVwZGF0ZWRTd2VhdGxpc3RJZHMubWFwKHNsID0+IHNsLnRvRGljdGlvbmFyeSgpKSwgLy8gRW5zdXJlIG9iamVjdHMgYXJlIHBsYWluIGZvciBGaXJlc3RvcmVcbiAgICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSAvLyBVcGRhdGUgdGhlIHRpbWVzdGFtcFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKGBTdWNjZXNzZnVsbHkgcmVtb3ZlZCBzd2VhdGxpc3QgJHtzd2VhdGxpc3RJZH0gZnJvbSBjb2xsZWN0aW9uICR7Y29sbGVjdGlvbklkfWApO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHJlbW92aW5nIHN3ZWF0bGlzdCAke3N3ZWF0bGlzdElkfSBmcm9tIGNvbGxlY3Rpb24gJHtjb2xsZWN0aW9uSWR9OmAsIGVycm9yKTtcbiAgICAgIC8vIFJlLXRocm93IHRoZSBlcnJvciB0byBiZSBjYXVnaHQgYnkgdGhlIGNhbGxpbmcgZnVuY3Rpb25cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuICAvLyAtLS0gRW5kIFJlbW92ZSBTd2VhdGxpc3QgLS0tIFxuXG4gIC8vIC0tLSBDbGVhciBBbGwgU3dlYXRsaXN0cyBmcm9tIENvbGxlY3Rpb24gLS0tIFxuICAvKipcbiAgICogUmVtb3ZlcyBBTEwgc3dlYXRsaXN0cyAoc3RhY2tzKSBmcm9tIGEgc3dlYXRsaXN0IGNvbGxlY3Rpb24gKHJvdW5kKSBieSBzZXR0aW5nIHN3ZWF0bGlzdElkcyB0byBbXS5cbiAgICogQHBhcmFtIGNvbGxlY3Rpb25JZCBUaGUgSUQgb2YgdGhlIFN3ZWF0bGlzdENvbGxlY3Rpb24gZG9jdW1lbnQuXG4gICAqL1xuICBhc3luYyBjbGVhckFsbFN0YWNrc0Zyb21Sb3VuZChjb2xsZWN0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICghY29sbGVjdGlvbklkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbGxlY3Rpb24gSUQgaXMgcmVxdWlyZWQuJyk7XG4gICAgfVxuXG4gICAgY29uc3QgY29sbGVjdGlvblJlZiA9IGRvYyhkYiwgJ3N3ZWF0bGlzdC1jb2xsZWN0aW9uJywgY29sbGVjdGlvbklkKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhgQXR0ZW1wdGluZyB0byBjbGVhciBhbGwgc3dlYXRsaXN0cyBmcm9tIGNvbGxlY3Rpb24gJHtjb2xsZWN0aW9uSWR9YCk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBkb2N1bWVudCBleGlzdHMgYmVmb3JlIHVwZGF0aW5nXG4gICAgICBjb25zdCBkb2NTbmFwID0gYXdhaXQgZ2V0RG9jKGNvbGxlY3Rpb25SZWYpO1xuICAgICAgaWYgKCFkb2NTbmFwLmV4aXN0cygpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgU3dlYXRsaXN0IENvbGxlY3Rpb24gd2l0aCBJRCAke2NvbGxlY3Rpb25JZH0gbm90IGZvdW5kLmApO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgdGhlIGRvY3VtZW50LCBzZXR0aW5nIHN3ZWF0bGlzdElkcyB0byBhbiBlbXB0eSBhcnJheVxuICAgICAgYXdhaXQgdXBkYXRlRG9jKGNvbGxlY3Rpb25SZWYsIHtcbiAgICAgICAgc3dlYXRsaXN0SWRzOiBbXSwgLy8gU2V0IHRvIGVtcHR5IGFycmF5XG4gICAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCkgLy8gVXBkYXRlIHRoZSB0aW1lc3RhbXBcbiAgICAgIH0pO1xuXG4gICAgICBjb25zb2xlLmxvZyhgU3VjY2Vzc2Z1bGx5IGNsZWFyZWQgYWxsIHN3ZWF0bGlzdHMgZnJvbSBjb2xsZWN0aW9uICR7Y29sbGVjdGlvbklkfWApO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGNsZWFyaW5nIHN3ZWF0bGlzdHMgZnJvbSBjb2xsZWN0aW9uICR7Y29sbGVjdGlvbklkfTpgLCBlcnJvcik7XG4gICAgICAvLyBSZS10aHJvdyB0aGUgZXJyb3IgdG8gYmUgY2F1Z2h0IGJ5IHRoZSBjYWxsaW5nIGZ1bmN0aW9uXG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbiAgLy8gLS0tIEVuZCBDbGVhciBBbGwgU3dlYXRsaXN0cyAtLS1cblxuICAvLyAtLS0gVXBkYXRlIENoYWxsZW5nZSBTdGF0dXMgLS0tIFxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgc3RhdHVzIG9mIHRoZSBjaGFsbGVuZ2UgbmVzdGVkIHdpdGhpbiBhIFN3ZWF0bGlzdENvbGxlY3Rpb24uXG4gICAqIEBwYXJhbSBjb2xsZWN0aW9uSWQgVGhlIElEIG9mIHRoZSBTd2VhdGxpc3RDb2xsZWN0aW9uIGRvY3VtZW50LlxuICAgKiBAcGFyYW0gbmV3U3RhdHVzIFRoZSBuZXcgc3RhdHVzIHRvIHNldCBmb3IgdGhlIGNoYWxsZW5nZS5cbiAgICovXG4gIGFzeW5jIHVwZGF0ZUNoYWxsZW5nZVN0YXR1cyhjb2xsZWN0aW9uSWQ6IHN0cmluZywgbmV3U3RhdHVzOiBDaGFsbGVuZ2VTdGF0dXMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIWNvbGxlY3Rpb25JZCB8fCAhbmV3U3RhdHVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbGxlY3Rpb24gSUQgYW5kIG5ldyBzdGF0dXMgYXJlIHJlcXVpcmVkLicpO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIHRoZSBzdGF0dXMgdmFsdWUgaWYgbmVjZXNzYXJ5IChlbnN1cmUgaXQncyBvbmUgb2YgdGhlIGFsbG93ZWQgQ2hhbGxlbmdlU3RhdHVzIGVudW0gdmFsdWVzKVxuICAgIGNvbnN0IHZhbGlkU3RhdHVzZXMgPSBPYmplY3QudmFsdWVzKENoYWxsZW5nZVN0YXR1cyk7XG4gICAgaWYgKCF2YWxpZFN0YXR1c2VzLmluY2x1ZGVzKG5ld1N0YXR1cykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjaGFsbGVuZ2Ugc3RhdHVzIHByb3ZpZGVkOiAke25ld1N0YXR1c31gKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb2xsZWN0aW9uUmVmID0gZG9jKGRiLCAnc3dlYXRsaXN0LWNvbGxlY3Rpb24nLCBjb2xsZWN0aW9uSWQpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKGBBdHRlbXB0aW5nIHRvIHVwZGF0ZSBjaGFsbGVuZ2Ugc3RhdHVzIHRvICcke25ld1N0YXR1c30nIGZvciBjb2xsZWN0aW9uICR7Y29sbGVjdGlvbklkfWApO1xuXG4gICAgICAvLyBDaGVjayBpZiB0aGUgZG9jdW1lbnQgZXhpc3RzIGJlZm9yZSB1cGRhdGluZ1xuICAgICAgY29uc3QgZG9jU25hcCA9IGF3YWl0IGdldERvYyhjb2xsZWN0aW9uUmVmKTtcbiAgICAgIGlmICghZG9jU25hcC5leGlzdHMoKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFN3ZWF0bGlzdCBDb2xsZWN0aW9uIHdpdGggSUQgJHtjb2xsZWN0aW9uSWR9IG5vdCBmb3VuZC5gKTtcbiAgICAgIH1cblxuICAgICAgLy8gUHJlcGFyZSB0aGUgdXBkYXRlIGRhdGEgdXNpbmcgZG90IG5vdGF0aW9uIGZvciBuZXN0ZWQgZmllbGRcbiAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7XG4gICAgICAgICdjaGFsbGVuZ2Uuc3RhdHVzJzogbmV3U3RhdHVzLFxuICAgICAgICAnY2hhbGxlbmdlLnVwZGF0ZWRBdCc6IHNlcnZlclRpbWVzdGFtcCgpLCAvLyBVcGRhdGUgdGhlIGNoYWxsZW5nZSdzIHRpbWVzdGFtcFxuICAgICAgICAndXBkYXRlZEF0Jzogc2VydmVyVGltZXN0YW1wKCkgLy8gQWxzbyB1cGRhdGUgdGhlIGNvbGxlY3Rpb24ncyB0aW1lc3RhbXBcbiAgICAgIH07XG5cbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhjb2xsZWN0aW9uUmVmLCB1cGRhdGVEYXRhKTtcblxuICAgICAgY29uc29sZS5sb2coYFN1Y2Nlc3NmdWxseSB1cGRhdGVkIGNoYWxsZW5nZSBzdGF0dXMgdG8gJyR7bmV3U3RhdHVzfScgZm9yIGNvbGxlY3Rpb24gJHtjb2xsZWN0aW9uSWR9YCk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgdXBkYXRpbmcgY2hhbGxlbmdlIHN0YXR1cyBmb3IgY29sbGVjdGlvbiAke2NvbGxlY3Rpb25JZH06YCwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7IC8vIFJlLXRocm93XG4gICAgfVxuICB9XG4gIC8vIC0tLSBFbmQgVXBkYXRlIENoYWxsZW5nZSBTdGF0dXMgLS0tXG5cbiAgLy8gLS0tIEJhdGNoIFVwZGF0ZSBVc2VyIENoYWxsZW5nZSBTdGF0dXMgLS0tIFxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgc3RhdHVzIHdpdGhpbiB0aGUgbmVzdGVkIGNoYWxsZW5nZSBvYmplY3QgZm9yIGFsbCBVc2VyQ2hhbGxlbmdlXG4gICAqIGRvY3VtZW50cyBhc3NvY2lhdGVkIHdpdGggYSBnaXZlbiBjaGFsbGVuZ2UgSUQuXG4gICAqXG4gICAqIEBwYXJhbSBjaGFsbGVuZ2VJZCBUaGUgSUQgb2YgdGhlIG1haW4gY2hhbGxlbmdlIChlcXVpdmFsZW50IHRvIGNvbGxlY3Rpb25JZCkuXG4gICAqIEBwYXJhbSBuZXdTdGF0dXMgVGhlIG5ldyBzdGF0dXMgdG8gc2V0LlxuICAgKi9cbiAgYXN5bmMgdXBkYXRlU3RhdHVzRm9yQWxsVXNlckNoYWxsZW5nZXMoY2hhbGxlbmdlSWQ6IHN0cmluZywgbmV3U3RhdHVzOiBDaGFsbGVuZ2VTdGF0dXMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIWNoYWxsZW5nZUlkIHx8ICFuZXdTdGF0dXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2hhbGxlbmdlIElEIGFuZCBuZXcgc3RhdHVzIGFyZSByZXF1aXJlZCBmb3IgYmF0Y2ggdXBkYXRlLicpO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZXJDaGFsbGVuZ2VzUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXItY2hhbGxlbmdlJyk7XG4gICAgY29uc3QgcSA9IHF1ZXJ5KHVzZXJDaGFsbGVuZ2VzUmVmLCB3aGVyZSgnY2hhbGxlbmdlSWQnLCAnPT0nLCBjaGFsbGVuZ2VJZCkpO1xuXG4gICAgY29uc29sZS5sb2coYFN0YXJ0aW5nIGJhdGNoIHVwZGF0ZSBmb3IgdXNlciBjaGFsbGVuZ2VzIHN0YXR1cyB0byAnJHtuZXdTdGF0dXN9JyBmb3IgY2hhbGxlbmdlIElEOiAke2NoYWxsZW5nZUlkfWApO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcblxuICAgICAgaWYgKHNuYXBzaG90LmVtcHR5KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBObyB1c2VyIGNoYWxsZW5nZXMgZm91bmQgZm9yIGNoYWxsZW5nZSBJRCAke2NoYWxsZW5nZUlkfS4gTm8gYmF0Y2ggdXBkYXRlIG5lZWRlZC5gKTtcbiAgICAgICAgcmV0dXJuOyAvLyBOb3RoaW5nIHRvIHVwZGF0ZVxuICAgICAgfVxuXG4gICAgICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xuICAgICAgY29uc3Qgbm93VGltZXN0YW1wID0gc2VydmVyVGltZXN0YW1wKCk7IC8vIFVzZSBzZXJ2ZXIgdGltZXN0YW1wIGZvciBjb25zaXN0ZW5jeVxuXG4gICAgICBzbmFwc2hvdC5mb3JFYWNoKGRvYyA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGAgLSBBZGRpbmcgdXBkYXRlIGZvciB1c2VyLWNoYWxsZW5nZTogJHtkb2MuaWR9YCk7XG4gICAgICAgIGJhdGNoLnVwZGF0ZShkb2MucmVmLCB7XG4gICAgICAgICAgJ2NoYWxsZW5nZS5zdGF0dXMnOiBuZXdTdGF0dXMsXG4gICAgICAgICAgJ2NoYWxsZW5nZS51cGRhdGVkQXQnOiBub3dUaW1lc3RhbXAsIC8vIFVwZGF0ZSBuZXN0ZWQgY2hhbGxlbmdlIHRpbWVzdGFtcFxuICAgICAgICAgICd1cGRhdGVkQXQnOiBub3dUaW1lc3RhbXAgLy8gQWxzbyB1cGRhdGUgdXNlci1jaGFsbGVuZ2UgdGltZXN0YW1wXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xuICAgICAgY29uc29sZS5sb2coYFN1Y2Nlc3NmdWxseSBjb21taXR0ZWQgYmF0Y2ggdXBkYXRlIGZvciAke3NuYXBzaG90LnNpemV9IHVzZXIgY2hhbGxlbmdlcy5gKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBkdXJpbmcgYmF0Y2ggdXBkYXRlIG9mIHVzZXIgY2hhbGxlbmdlcyBmb3IgY2hhbGxlbmdlIElEICR7Y2hhbGxlbmdlSWR9OmAsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yOyAvLyBSZS10aHJvd1xuICAgIH1cbiAgfVxuICAvLyAtLS0gRW5kIEJhdGNoIFVwZGF0ZSBVc2VyIENoYWxsZW5nZSBTdGF0dXMgLS0tXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSB0ZXN0IHdvcmtvdXQgc2Vzc2lvbiBmb3IgYSBzcGVjaWZpYyB1c2VyXG4gICAqIFRoaXMgaXMgdXNlZCBleGNsdXNpdmVseSBmb3IgdGVzdGluZyB3b3Jrb3V0IHN0YXJ0IG5vdGlmaWNhdGlvbnMgaW4gdGhlIGFkbWluIHBhbmVsXG4gICAqIFxuICAgKiBAcGFyYW0gdXNlcklkIFRoZSBJRCBvZiB0aGUgdXNlciB0byBjcmVhdGUgdGhlIHRlc3Qgc2Vzc2lvbiBmb3JcbiAgICogQHBhcmFtIHNlc3Npb25EYXRhIFRoZSB3b3Jrb3V0IHNlc3Npb24gZGF0YSB0byB1c2VcbiAgICogQHJldHVybnMgVGhlIElEIG9mIHRoZSBjcmVhdGVkIHNlc3Npb25cbiAgICovXG4gIGFzeW5jIGNyZWF0ZVRlc3RXb3Jrb3V0U2Vzc2lvbih1c2VySWQ6IHN0cmluZywgc2Vzc2lvbkRhdGE6IGFueSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghdXNlcklkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBJRCBpcyByZXF1aXJlZCcpO1xuICAgICAgfVxuXG4gICAgICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBJRCBmb3IgdGhlIHdvcmtvdXQgc2Vzc2lvblxuICAgICAgY29uc3Qgc2Vzc2lvbklkID0gZG9jKGNvbGxlY3Rpb24oZGIsICd3b3Jrb3V0LXNlc3Npb25zJykpLmlkO1xuICAgICAgXG4gICAgICAvLyBQcmVwYXJlIHRoZSBkYXRhIHdpdGggdGhlIHN0YXR1cyB0aGF0IHdpbGwgdHJpZ2dlciB0aGUgbm90aWZpY2F0aW9uXG4gICAgICBjb25zdCB0ZXN0RGF0YSA9IHtcbiAgICAgICAgLi4uc2Vzc2lvbkRhdGEsXG4gICAgICAgIGlkOiBzZXNzaW9uSWQsXG4gICAgICAgIGNyZWF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXG4gICAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKClcbiAgICAgIH07XG5cbiAgICAgIC8vIENyZWF0ZSBhIHNlc3Npb24gZG9jIGluIGJvdGggdGhlIHVzZXIncyBzdWJjb2xsZWN0aW9uIGFuZCB0aGUgcm9vdCBjb2xsZWN0aW9uXG4gICAgICAvLyAxLiBGaXJzdCBpbiB1c2VyJ3Mgc3ViY29sbGVjdGlvblxuICAgICAgY29uc3QgdXNlclNlc3Npb25SZWYgPSBkb2MoZGIsICd1c2VycycsIHVzZXJJZCwgJ3dvcmtvdXRTZXNzaW9ucycsIHNlc3Npb25JZCk7XG4gICAgICBhd2FpdCBzZXREb2ModXNlclNlc3Npb25SZWYsIHRlc3REYXRhKTtcbiAgICAgIFxuICAgICAgLy8gMi4gQWxzbyBjcmVhdGUgaW4gdGhlIHJvb3QgY29sbGVjdGlvbiAodGhpcyBub3JtYWxseSBoYXBwZW5zIHZpYSBDbG91ZCBGdW5jdGlvbilcbiAgICAgIC8vIEJ1dCB3ZSdsbCBkbyBpdCBkaXJlY3RseSB0byBlbnN1cmUgaXQncyBhdmFpbGFibGUgaW1tZWRpYXRlbHlcbiAgICAgIGNvbnN0IHJvb3RTZXNzaW9uUmVmID0gZG9jKGRiLCAnd29ya291dC1zZXNzaW9ucycsIHNlc3Npb25JZCk7XG4gICAgICBhd2FpdCBzZXREb2Mocm9vdFNlc3Npb25SZWYsIHtcbiAgICAgICAgLi4udGVzdERhdGEsXG4gICAgICAgIHVzZXJJZCAvLyBNYWtlIHN1cmUgdXNlcklkIGlzIGluY2x1ZGVkIGluIHRoZSByb290IGNvbGxlY3Rpb25cbiAgICAgIH0pO1xuXG4gICAgICBjb25zb2xlLmxvZyhgQ3JlYXRlZCB0ZXN0IHdvcmtvdXQgc2Vzc2lvbiB3aXRoIElEICR7c2Vzc2lvbklkfSBmb3IgdXNlciAke3VzZXJJZH1gKTtcbiAgICAgIHJldHVybiBzZXNzaW9uSWQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHRlc3Qgd29ya291dCBzZXNzaW9uOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIGEgdGVzdCB3b3Jrb3V0IHNlc3Npb25cbiAgICogVGhpcyBpcyB1c2VkIHRvIGNsZWFuIHVwIGFmdGVyIHRlc3Rpbmcgd29ya291dCBzdGFydCBub3RpZmljYXRpb25zXG4gICAqIFxuICAgKiBAcGFyYW0gdXNlcklkIFRoZSBJRCBvZiB0aGUgdXNlciB3aG8gb3ducyB0aGUgc2Vzc2lvblxuICAgKiBAcGFyYW0gc2Vzc2lvbklkIFRoZSBJRCBvZiB0aGUgc2Vzc2lvbiB0byBkZWxldGVcbiAgICovXG4gIGFzeW5jIGRlbGV0ZVRlc3RXb3Jrb3V0U2Vzc2lvbih1c2VySWQ6IHN0cmluZywgc2Vzc2lvbklkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCF1c2VySWQgfHwgIXNlc3Npb25JZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgSUQgYW5kIFNlc3Npb24gSUQgYXJlIHJlcXVpcmVkJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVzZXJTZXNzaW9uUmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VySWQsICd3b3Jrb3V0U2Vzc2lvbnMnLCBzZXNzaW9uSWQpO1xuICAgICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24odXNlclNlc3Npb25SZWYsICdsb2dzJyk7XG5cbiAgICAgIC8vIERlbGV0ZSBhbGwgbG9ncyBpbiB0aGUgc3ViY29sbGVjdGlvblxuICAgICAgY29uc3QgbG9nc1NuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhsb2dzUmVmKTtcbiAgICAgIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XG4gICAgICBsb2dzU25hcHNob3QuZG9jcy5mb3JFYWNoKChsb2dEb2MpID0+IHtcbiAgICAgICAgYmF0Y2guZGVsZXRlKGxvZ0RvYy5yZWYpO1xuICAgICAgfSk7XG4gICAgICBhd2FpdCBiYXRjaC5jb21taXQoKTsgLy8gQ29tbWl0IGRlbGV0aW9uIG9mIGxvZ3MgZmlyc3RcblxuICAgICAgLy8gVGhlbiBkZWxldGUgdGhlIG1haW4gc2Vzc2lvbiBkb2N1bWVudCBmcm9tIHVzZXIncyBzdWJjb2xsZWN0aW9uXG4gICAgICBhd2FpdCBkZWxldGVEb2ModXNlclNlc3Npb25SZWYpO1xuICAgICAgXG4gICAgICAvLyBBbmQgZGVsZXRlIGZyb20gcm9vdCBjb2xsZWN0aW9uIGlmIGl0IGV4aXN0cyB0aGVyZVxuICAgICAgY29uc3Qgcm9vdFNlc3Npb25SZWYgPSBkb2MoZGIsICd3b3Jrb3V0LXNlc3Npb25zJywgc2Vzc2lvbklkKTtcbiAgICAgIGNvbnN0IHJvb3RTZXNzaW9uU25hcCA9IGF3YWl0IGdldERvYyhyb290U2Vzc2lvblJlZik7XG4gICAgICBpZiAocm9vdFNlc3Npb25TbmFwLmV4aXN0cygpKSB7XG4gICAgICAgIGF3YWl0IGRlbGV0ZURvYyhyb290U2Vzc2lvblJlZik7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKGBEZWxldGVkIHRlc3Qgd29ya291dCBzZXNzaW9uICR7c2Vzc2lvbklkfSBmb3IgdXNlciAke3VzZXJJZH1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgdGVzdCB3b3Jrb3V0IHNlc3Npb246JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBmdWxsIHRlc3Qgd29ya291dCBzZXNzaW9uIGluY2x1ZGluZyBpdHMgZXhlcmNpc2UgbG9ncy5cbiAgICogQHBhcmFtIHVzZXJJZCBUaGUgSUQgb2YgdGhlIHVzZXIgKHBhcnRpY2lwYW50KS5cbiAgICogQHBhcmFtIHdvcmtvdXRUZW1wbGF0ZSBUaGUgV29ya291dCBvYmplY3QgdG8gdXNlIGFzIGEgdGVtcGxhdGUuXG4gICAqIEBwYXJhbSB0ZW1wbGF0ZUxvZ3MgVGhlIGFycmF5IG9mIEV4ZXJjaXNlTG9nIG9iamVjdHMgZnJvbSB0aGUgdGVtcGxhdGUuXG4gICAqIEBwYXJhbSBjaGFsbGVuZ2VJZCBUaGUgSUQgb2YgdGhlIGNoYWxsZW5nZSB0aGlzIHRlc3Qgc2Vzc2lvbiBpcyBhc3NvY2lhdGVkIHdpdGggKG9wdGlvbmFsKS5cbiAgICogQHBhcmFtIHN3ZWF0bGlzdElkIFRoZSBJRCBvZiB0aGUgc3dlYXRsaXN0ICh3b3Jrb3V0IHRlbXBsYXRlKSB0aGlzIHNlc3Npb24gaXMgYmFzZWQgb24gKG9wdGlvbmFsKS5cbiAgICogQHJldHVybnMgVGhlIElEIG9mIHRoZSBjcmVhdGVkIHNlc3Npb24gYW5kIHRoZSBjcmVhdGVkIEV4ZXJjaXNlTG9nIG9iamVjdHMuXG4gICAqL1xuICBhc3luYyBjcmVhdGVGdWxsVGVzdFdvcmtvdXRTZXNzaW9uKFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIHdvcmtvdXRUZW1wbGF0ZTogV29ya291dCxcbiAgICB0ZW1wbGF0ZUxvZ3M6IEV4ZXJjaXNlTG9nW10sXG4gICAgY2hhbGxlbmdlSWQ6IHN0cmluZyB8IG51bGwsXG4gICAgc3dlYXRsaXN0SWQ6IHN0cmluZyB8IG51bGxcbiAgKTogUHJvbWlzZTx7IHNlc3Npb25JZDogc3RyaW5nOyBjcmVhdGVkTG9nT2JqZWN0czogRXhlcmNpc2VMb2dbXSB9PiB7XG4gICAgaWYgKCF1c2VySWQpIHRocm93IG5ldyBFcnJvcignVXNlciBJRCBpcyByZXF1aXJlZCBmb3IgY3JlYXRpbmcgYSB0ZXN0IHNlc3Npb24uJyk7XG4gICAgaWYgKCF3b3Jrb3V0VGVtcGxhdGUpIHRocm93IG5ldyBFcnJvcignV29ya291dCB0ZW1wbGF0ZSBpcyByZXF1aXJlZC4nKTtcblxuICAgIGNvbnN0IHNlc3Npb25zUmVmID0gY29sbGVjdGlvbihkYiwgJ3VzZXJzJywgdXNlcklkLCAnd29ya291dFNlc3Npb25zJyk7XG4gICAgY29uc3QgbmV3U2Vzc2lvbklkID0gZG9jKHNlc3Npb25zUmVmKS5pZDsgLy8gR2VuZXJhdGUgSUQgZm9yIHRoZSBuZXcgc2Vzc2lvblxuXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcblxuICAgIGNvbnN0IHNlc3Npb25EYXRhID0gbmV3IFdvcmtvdXRTZXNzaW9uKHtcbiAgICAgIGlkOiBuZXdTZXNzaW9uSWQsXG4gICAgICB1c2VySWQ6IHVzZXJJZCwgLy8gV29ya291dFNlc3Npb24gbmVlZHMgdXNlcklkXG4gICAgICB3b3Jrb3V0VGVtcGxhdGVJZDogd29ya291dFRlbXBsYXRlLmlkLCAvLyBMaW5rIHRvIHRoZSBXb3Jrb3V0IHRlbXBsYXRlXG4gICAgICBjaGFsbGVuZ2VJZDogY2hhbGxlbmdlSWQsIC8vIFBhc3MgdGhlIHNwZWNpZmljIGNoYWxsZW5nZUlkIGZvciB0aGlzIHNlc3Npb25cbiAgICAgIHJvdW5kV29ya291dElkOiBgJHt3b3Jrb3V0VGVtcGxhdGUuaWR9LSR7bm93LmdldFRpbWUoKX1gLFxuICAgICAgdGl0bGU6IHdvcmtvdXRUZW1wbGF0ZS50aXRsZSB8fCAnVGVzdCBTaW11bGF0aW9uIFdvcmtvdXQnLFxuICAgICAgZGVzY3JpcHRpb246IHdvcmtvdXRUZW1wbGF0ZS5kZXNjcmlwdGlvbiwgLy8gT3B0aW9uYWwsIGNhbiBiZSBmcm9tIHRlbXBsYXRlXG4gICAgICBhdXRob3I6IHdvcmtvdXRUZW1wbGF0ZS5hdXRob3IsIC8vIEVuc3VyZSB0aGlzIGlzIHBhc3NlZFxuICAgICAgLy8gRXhlcmNpc2VzIGFyZSB0eXBpY2FsbHkgbm90IGRpcmVjdGx5IG9uIHRoZSBzZXNzaW9uIGRvY3VtZW50IGlmIGxvZ3MgcmVmZXJlbmNlIGEgdGVtcGxhdGUuXG4gICAgICAvLyBMb2dzIHdpbGwgYmUgY3JlYXRlZCBpbiB0aGUgc3ViY29sbGVjdGlvbi5cbiAgICAgIHdvcmtvdXRTdGF0dXM6IFdvcmtvdXRTdGF0dXMuSW5Qcm9ncmVzcyxcbiAgICAgIHN0YXJ0VGltZTogbm93LFxuICAgICAgY3JlYXRlZEF0OiBub3csXG4gICAgICB1cGRhdGVkQXQ6IG5vdyxcbiAgICB9KTtcblxuICAgIC8vIExvZyB0aGUgcmVsZXZhbnQgcGFydHMgb2Ygc2Vzc2lvbkRhdGEgKHdoaWNoIGlzIG5vdyBhIFdvcmtvdXRTZXNzaW9uIGluc3RhbmNlKVxuICAgIGNvbnNvbGUubG9nKCdbV29ya291dFNlcnZpY2UgY3JlYXRlRnVsbFRlc3RXb3Jrb3V0U2Vzc2lvbl0gU2Vzc2lvbiBkYXRhIGJlaW5nIHdyaXR0ZW4gKFdvcmtvdXRTZXNzaW9uIGluc3RhbmNlKTonLCBKU09OLnN0cmluZ2lmeSh7IGlkOiBzZXNzaW9uRGF0YS5pZCwgdXNlcklkOiBzZXNzaW9uRGF0YS51c2VySWQsIHdvcmtvdXRUZW1wbGF0ZUlkOiBzZXNzaW9uRGF0YS53b3Jrb3V0VGVtcGxhdGVJZCwgY2hhbGxlbmdlSWQ6IHNlc3Npb25EYXRhLmNoYWxsZW5nZUlkLCB3b3Jrb3V0U3RhdHVzOiBzZXNzaW9uRGF0YS53b3Jrb3V0U3RhdHVzLCBhdXRob3I6IHNlc3Npb25EYXRhLmF1dGhvciwgdGl0bGU6IHNlc3Npb25EYXRhLnRpdGxlIH0sIG51bGwsIDIpKTsgLy8gREVCVUcgTE9HXG5cbiAgICBjb25zdCB3b3Jrb3V0U2Vzc2lvblJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdXNlcklkLCAnd29ya291dFNlc3Npb25zJywgbmV3U2Vzc2lvbklkKTtcbiAgICBhd2FpdCBzZXREb2Mod29ya291dFNlc3Npb25SZWYsIHNlc3Npb25EYXRhLnRvRGljdGlvbmFyeSgpKTtcblxuICAgIC8vIEFsc28gY3JlYXRlIGluIHJvb3QgYHdvcmtvdXQtc2Vzc2lvbnNgIGZvciBjb25zaXN0ZW5jeSBpZiB5b3VyIGZ1bmN0aW9ucyBleHBlY3QgaXRcbiAgICBjb25zdCByb290U2Vzc2lvblJlZiA9IGRvYyhkYiwgJ3dvcmtvdXQtc2Vzc2lvbnMnLCBuZXdTZXNzaW9uSWQpO1xuICAgIGF3YWl0IHNldERvYyhyb290U2Vzc2lvblJlZiwgeyAuLi5zZXNzaW9uRGF0YS50b0RpY3Rpb25hcnkoKSwgdXNlcklkIH0pO1xuXG5cbiAgICBjb25zdCBsb2dzU3ViY29sbGVjdGlvblJlZiA9IGNvbGxlY3Rpb24od29ya291dFNlc3Npb25SZWYsICdsb2dzJyk7XG4gICAgY29uc3QgY3JlYXRlZExvZ09iamVjdHM6IEV4ZXJjaXNlTG9nW10gPSBbXTtcbiAgICBjb25zdCBsb2dCYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZW1wbGF0ZUxvZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHRlbXBsYXRlTG9nID0gdGVtcGxhdGVMb2dzW2ldO1xuICAgICAgY29uc3QgbmV3TG9nRG9jUmVmID0gZG9jKGxvZ3NTdWJjb2xsZWN0aW9uUmVmKTsgLy8gQXV0by1nZW5lcmF0ZSBJRCBmb3IgZWFjaCBsb2dcbiAgICAgIFxuICAgICAgY29uc3QgbmV3TG9nID0gbmV3IEV4ZXJjaXNlTG9nKHtcbiAgICAgICAgLi4udGVtcGxhdGVMb2csIC8vIFNwcmVhZCBmaWVsZHMgZnJvbSB0ZW1wbGF0ZSBsb2dcbiAgICAgICAgaWQ6IG5ld0xvZ0RvY1JlZi5pZCwgLy8gQXNzaWduIG5ldyBGaXJlc3RvcmUtZ2VuZXJhdGVkIElEXG4gICAgICAgIHdvcmtvdXRJZDogbmV3U2Vzc2lvbklkLCAvLyBMaW5rIHRvIHRoZSBuZXcgc2Vzc2lvblxuICAgICAgICB1c2VySWQ6IHVzZXJJZCwgLy8gUGFydGljaXBhbnQncyBJRFxuICAgICAgICBsb2dTdWJtaXR0ZWQ6IGZhbHNlLFxuICAgICAgICBpc0NvbXBsZXRlZDogZmFsc2UsXG4gICAgICAgIGNvbXBsZXRlZEF0OiBudWxsLCAvLyBOb3QgY29tcGxldGVkIHlldFxuICAgICAgICBjcmVhdGVkQXQ6IG5vdyxcbiAgICAgICAgdXBkYXRlZEF0OiBub3csXG4gICAgICAgIG9yZGVyOiB0ZW1wbGF0ZUxvZy5vcmRlciAhPT0gdW5kZWZpbmVkICYmIHRlbXBsYXRlTG9nLm9yZGVyICE9PSBudWxsID8gdGVtcGxhdGVMb2cub3JkZXIgOiBpLCAvLyBFbnN1cmUgb3JkZXJcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBsb2dCYXRjaC5zZXQobmV3TG9nRG9jUmVmLCBuZXdMb2cudG9EaWN0aW9uYXJ5KCkpO1xuICAgICAgY3JlYXRlZExvZ09iamVjdHMucHVzaChuZXdMb2cpO1xuICAgIH1cblxuICAgIGF3YWl0IGxvZ0JhdGNoLmNvbW1pdCgpO1xuXG4gICAgY29uc29sZS5sb2coYENyZWF0ZWQgZnVsbCB0ZXN0IHdvcmtvdXQgc2Vzc2lvbiAke25ld1Nlc3Npb25JZH0gZm9yIHVzZXIgJHt1c2VySWR9IHdpdGggJHtjcmVhdGVkTG9nT2JqZWN0cy5sZW5ndGh9IGxvZ3MuYCk7XG4gICAgcmV0dXJuIHsgc2Vzc2lvbklkOiBuZXdTZXNzaW9uSWQsIGNyZWF0ZWRMb2dPYmplY3RzIH07XG4gIH1cblxuICAvKipcbiAgICogU2ltdWxhdGVzIHVwZGF0aW5nIGFuIGV4ZXJjaXNlIGxvZywgZS5nLiwgbWFya2luZyBpdCBhcyBjb21wbGV0ZS5cbiAgICogQHBhcmFtIHVzZXJJZCBUaGUgSUQgb2YgdGhlIHVzZXIuXG4gICAqIEBwYXJhbSBzZXNzaW9uSWQgVGhlIElEIG9mIHRoZSB3b3Jrb3V0IHNlc3Npb24uXG4gICAqIEBwYXJhbSBsb2dJZCBUaGUgSUQgb2YgdGhlIGV4ZXJjaXNlIGxvZyB0byB1cGRhdGUuXG4gICAqIEBwYXJhbSB1cGRhdGVzIEEgcGFydGlhbCBFeGVyY2lzZUxvZyBvYmplY3Qgd2l0aCBmaWVsZHMgdG8gdXBkYXRlLlxuICAgKi9cbiAgYXN5bmMgc2ltdWxhdGVVcGRhdGVFeGVyY2lzZUxvZyhcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICBsb2dJZDogc3RyaW5nLFxuICAgIHVwZGF0ZXM6IFBhcnRpYWw8RXhlcmNpc2VMb2c+IC8vIEFsbG93IHVwZGF0aW5nIHNwZWNpZmljIGZpZWxkc1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXVzZXJJZCB8fCAhc2Vzc2lvbklkIHx8ICFsb2dJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIElELCBTZXNzaW9uIElELCBhbmQgTG9nIElEIGFyZSByZXF1aXJlZC4nKTtcbiAgICB9XG4gICAgY29uc3QgbG9nUmVmID0gZG9jKGRiLCAndXNlcnMnLCB1c2VySWQsICd3b3Jrb3V0U2Vzc2lvbnMnLCBzZXNzaW9uSWQsICdsb2dzJywgbG9nSWQpO1xuICAgIFxuICAgIC8vIEVuc3VyZSBkYXRlcyBhcmUgY29udmVydGVkIGNvcnJlY3RseSBpZiBwcmVzZW50IGluIHVwZGF0ZXNcbiAgICBjb25zdCBmaXJlc3RvcmVVcGRhdGVzOiBhbnkgPSB7IC4uLnVwZGF0ZXMgfTtcbiAgICBpZiAodXBkYXRlcy5jb21wbGV0ZWRBdCkge1xuICAgICAgZmlyZXN0b3JlVXBkYXRlcy5jb21wbGV0ZWRBdCA9IGRhdGVUb1VuaXhUaW1lc3RhbXAodXBkYXRlcy5jb21wbGV0ZWRBdCBhcyBEYXRlKTtcbiAgICB9XG4gICAgaWYgKHVwZGF0ZXMudXBkYXRlZEF0KSB7XG4gICAgICBmaXJlc3RvcmVVcGRhdGVzLnVwZGF0ZWRBdCA9IGRhdGVUb1VuaXhUaW1lc3RhbXAodXBkYXRlcy51cGRhdGVkQXQgYXMgRGF0ZSk7XG4gICAgfVxuICAgICBpZiAodXBkYXRlcy5jcmVhdGVkQXQgJiYgISh1cGRhdGVzLmNyZWF0ZWRBdCBpbnN0YW5jZW9mIERhdGUpKSB7XG4gICAgICAvLyBUaGlzIGNhc2Ugc2hvdWxkIGlkZWFsbHkgbm90IGhhcHBlbiBpZiB1cGRhdGVzLmNyZWF0ZWRBdCBpcyBhbHdheXMgYSBEYXRlXG4gICAgICBmaXJlc3RvcmVVcGRhdGVzLmNyZWF0ZWRBdCA9IGRhdGVUb1VuaXhUaW1lc3RhbXAobmV3IERhdGUodXBkYXRlcy5jcmVhdGVkQXQgYXMgYW55KSk7XG4gICAgfSBlbHNlIGlmICh1cGRhdGVzLmNyZWF0ZWRBdCkge1xuICAgICAgIGZpcmVzdG9yZVVwZGF0ZXMuY3JlYXRlZEF0ID0gZGF0ZVRvVW5peFRpbWVzdGFtcCh1cGRhdGVzLmNyZWF0ZWRBdCBhcyBEYXRlKTtcbiAgICB9XG5cblxuICAgIC8vIFdlIGRvbid0IHdhbnQgdG8gdXBkYXRlIHRoZSBleGVyY2lzZSBvYmplY3QgaXRzZWxmLCBvbmx5IGxvZyBwcm9wZXJ0aWVzXG4gICAgaWYgKGZpcmVzdG9yZVVwZGF0ZXMuZXhlcmNpc2UpIHtcbiAgICAgIGRlbGV0ZSBmaXJlc3RvcmVVcGRhdGVzLmV4ZXJjaXNlO1xuICAgIH1cbiAgICAvLyBXZSBkb24ndCB3YW50IHRvIHVwZGF0ZSB0aGUgbG9ncyBhcnJheSAoUmVwc0FuZFdlaWdodExvZykgaXRzZWxmLCBvbmx5IGxvZyBwcm9wZXJ0aWVzXG4gICAgaWYgKGZpcmVzdG9yZVVwZGF0ZXMubG9ncykge1xuICAgICAgICBkZWxldGUgZmlyZXN0b3JlVXBkYXRlcy5sb2dzO1xuICAgIH1cblxuXG4gICAgYXdhaXQgdXBkYXRlRG9jKGxvZ1JlZiwgZmlyZXN0b3JlVXBkYXRlcyk7XG4gICAgY29uc29sZS5sb2coYFNpbXVsYXRlZCB1cGRhdGUgZm9yIGxvZyAke2xvZ0lkfSBpbiBzZXNzaW9uICR7c2Vzc2lvbklkfS5gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaW11bGF0ZXMgdXBkYXRpbmcgYSB3b3Jrb3V0IHNlc3Npb24sIGUuZy4sIG1hcmtpbmcgaXQgYXMgY29tcGxldGUuXG4gICAqIEBwYXJhbSB1c2VySWQgVGhlIElEIG9mIHRoZSB1c2VyLlxuICAgKiBAcGFyYW0gc2Vzc2lvbklkIFRoZSBJRCBvZiB0aGUgd29ya291dCBzZXNzaW9uIHRvIHVwZGF0ZS5cbiAgICogQHBhcmFtIHVwZGF0ZXMgQSBwYXJ0aWFsIFdvcmtvdXQgb2JqZWN0IHdpdGggZmllbGRzIHRvIHVwZGF0ZS5cbiAgICovXG4gIGFzeW5jIHNpbXVsYXRlVXBkYXRlV29ya291dFNlc3Npb24oXG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgc2Vzc2lvbklkOiBzdHJpbmcsXG4gICAgdXBkYXRlczogUGFydGlhbDxXb3Jrb3V0U2Vzc2lvbj4gLy8gQ2hhbmdlZCBmcm9tIFBhcnRpYWw8V29ya291dD4gdG8gUGFydGlhbDxXb3Jrb3V0U2Vzc2lvbj5cbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF1c2VySWQgfHwgIXNlc3Npb25JZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIElEIGFuZCBTZXNzaW9uIElEIGFyZSByZXF1aXJlZC4nKTtcbiAgICB9XG4gICAgY29uc3Qgc2Vzc2lvblJlZiA9IGRvYyhkYiwgJ3VzZXJzJywgdXNlcklkLCAnd29ya291dFNlc3Npb25zJywgc2Vzc2lvbklkKTtcbiAgICBcbiAgICBjb25zdCBmaXJlc3RvcmVVcGRhdGVzOiBhbnkgPSB7IC4uLnVwZGF0ZXMgfTtcbiAgICAvLyBDb252ZXJ0IGRhdGVzIGlmIHRoZXkgYXJlIHByZXNlbnRcbiAgICBpZiAodXBkYXRlcy5zdGFydFRpbWUpIHtcbiAgICAgIGZpcmVzdG9yZVVwZGF0ZXMuc3RhcnRUaW1lID0gZGF0ZVRvVW5peFRpbWVzdGFtcCh1cGRhdGVzLnN0YXJ0VGltZSBhcyBEYXRlKTtcbiAgICB9XG4gICAgLy8gZW5kVGltZSBpcyBub3QgYSBzdGFuZGFyZCBwcm9wZXJ0eSBvZiBXb3Jrb3V0U2Vzc2lvbiwgYnV0IGlmIHVzZWQsIGVuc3VyZSBpdCdzIGhhbmRsZWQuXG4gICAgLy8gSWYgZW5kVGltZSBjb21lcyBmcm9tIGEgY3VzdG9tIHBhcnQgb2YgJ3VwZGF0ZXMnLCBpdCBtaWdodCBuZWVkIHNwZWNpZmljIGhhbmRsaW5nLlxuICAgIC8vIEZvciBub3csIGFzc3VtaW5nIGlmIGl0IGV4aXN0cyBpbiAndXBkYXRlcycsIGl0IHNob3VsZCBiZSBjb252ZXJ0ZWQuXG4gICAgaWYgKCh1cGRhdGVzIGFzIGFueSkuZW5kVGltZSkgeyBcbiAgICAgIGZpcmVzdG9yZVVwZGF0ZXMuZW5kVGltZSA9IGRhdGVUb1VuaXhUaW1lc3RhbXAoKHVwZGF0ZXMgYXMgYW55KS5lbmRUaW1lIGFzIERhdGUpO1xuICAgIH1cbiAgICBpZiAodXBkYXRlcy51cGRhdGVkQXQpIHtcbiAgICAgIGZpcmVzdG9yZVVwZGF0ZXMudXBkYXRlZEF0ID0gZGF0ZVRvVW5peFRpbWVzdGFtcCh1cGRhdGVzLnVwZGF0ZWRBdCBhcyBEYXRlKTtcbiAgICB9XG4gICAgaWYgKHVwZGF0ZXMuY3JlYXRlZEF0ICYmICEodXBkYXRlcy5jcmVhdGVkQXQgaW5zdGFuY2VvZiBEYXRlKSkge1xuICAgICAgICBmaXJlc3RvcmVVcGRhdGVzLmNyZWF0ZWRBdCA9IGRhdGVUb1VuaXhUaW1lc3RhbXAobmV3IERhdGUodXBkYXRlcy5jcmVhdGVkQXQgYXMgYW55KSk7XG4gICAgfSBlbHNlIGlmICh1cGRhdGVzLmNyZWF0ZWRBdCkge1xuICAgICAgICBmaXJlc3RvcmVVcGRhdGVzLmNyZWF0ZWRBdCA9IGRhdGVUb1VuaXhUaW1lc3RhbXAodXBkYXRlcy5jcmVhdGVkQXQgYXMgRGF0ZSk7XG4gICAgfVxuXG5cbiAgICAvLyBBdm9pZCBvdmVyd3JpdGluZyBlbnRpcmUgbmVzdGVkIG9iamVjdHMgaWYgb25seSBwYXJ0aWFsIHVwZGF0ZXMgYXJlIGludGVuZGVkXG4gICAgLy8gRm9yIHNpbXBsaWNpdHkgaGVyZSwgd2UgYXNzdW1lIGRpcmVjdCBmaWVsZCB1cGRhdGVzIGFyZSBmaW5lLlxuICAgIC8vIElmICdleGVyY2lzZXMnIG9yICdsb2dzJyAodGhlIHN1YmNvbGxlY3Rpb24gcGxhY2Vob2xkZXIgb24gV29ya291dCBtb2RlbCkgYXJlIGluIHVwZGF0ZXMsIHJlbW92ZSB0aGVtXG4gICAgLy8gYXMgdGhleSBhcmUgaGFuZGxlZCBkaWZmZXJlbnRseSBvciBhcmUgcGFydCBvZiB0aGUgdGVtcGxhdGUuXG4gICAgaWYgKGZpcmVzdG9yZVVwZGF0ZXMuZXhlcmNpc2VzKSBkZWxldGUgZmlyZXN0b3JlVXBkYXRlcy5leGVyY2lzZXM7XG4gICAgaWYgKGZpcmVzdG9yZVVwZGF0ZXMubG9ncykgZGVsZXRlIGZpcmVzdG9yZVVwZGF0ZXMubG9ncztcblxuXG4gICAgYXdhaXQgdXBkYXRlRG9jKHNlc3Npb25SZWYsIGZpcmVzdG9yZVVwZGF0ZXMpO1xuXG4gICAgLy8gQWxzbyB1cGRhdGUgdGhlIHJvb3QgY29sbGVjdGlvbiBkb2N1bWVudCBpZiBpdCBleGlzdHNcbiAgICAgY29uc3Qgcm9vdFNlc3Npb25SZWYgPSBkb2MoZGIsICd3b3Jrb3V0LXNlc3Npb25zJywgc2Vzc2lvbklkKTtcbiAgICAgY29uc3Qgcm9vdFNlc3Npb25TbmFwID0gYXdhaXQgZ2V0RG9jKHJvb3RTZXNzaW9uUmVmKTtcbiAgICAgaWYgKHJvb3RTZXNzaW9uU25hcC5leGlzdHMoKSkge1xuICAgICAgIGF3YWl0IHVwZGF0ZURvYyhyb290U2Vzc2lvblJlZiwgZmlyZXN0b3JlVXBkYXRlcyk7XG4gICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGBTaW11bGF0ZWQgdXBkYXRlIGZvciB3b3Jrb3V0IHNlc3Npb24gJHtzZXNzaW9uSWR9LmApO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoZXMgdGhlIGRldGFpbHMgb2YgYSBzcGVjaWZpYyB3b3Jrb3V0IChzdGFjaykgZnJvbSB0aGUgJ3N0YWNrcycgY29sbGVjdGlvbi5cbiAgICogQHBhcmFtIHN0YWNrSWQgVGhlIElEIG9mIHRoZSB3b3Jrb3V0L3N0YWNrIHRvIGZldGNoLlxuICAgKiBAcmV0dXJucyBBIFByb21pc2UgcmVzb2x2aW5nIHRvIHRoZSBXb3Jrb3V0IG9iamVjdCBvciBudWxsIGlmIG5vdCBmb3VuZC5cbiAgICovXG4gIGFzeW5jIGZldGNoU3RhY2tXb3Jrb3V0RGV0YWlscyhzdGFja0lkOiBzdHJpbmcpOiBQcm9taXNlPFdvcmtvdXQgfCBudWxsPiB7XG4gICAgaWYgKCFzdGFja0lkKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdmZXRjaFN0YWNrV29ya291dERldGFpbHM6IHN0YWNrSWQgaXMgcmVxdWlyZWQnKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RhY2tEb2NSZWYgPSBkb2MoZGIsICdzdGFja3MnLCBzdGFja0lkKTtcbiAgICAgIGNvbnN0IHN0YWNrRG9jU25hcCA9IGF3YWl0IGdldERvYyhzdGFja0RvY1JlZik7XG5cbiAgICAgIGlmICghc3RhY2tEb2NTbmFwLmV4aXN0cygpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgZmV0Y2hTdGFja1dvcmtvdXREZXRhaWxzOiBObyBzdGFjayBmb3VuZCB3aXRoIElEICR7c3RhY2tJZH1gKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHN0YWNrRGF0YSA9IHN0YWNrRG9jU25hcC5kYXRhKCk7XG4gICAgICBcbiAgICAgIC8vIENvbnN0cnVjdCBhIGJhc2UgV29ya291dCBvYmplY3RcbiAgICAgIGxldCB3b3Jrb3V0ID0gbmV3IFdvcmtvdXQoe1xuICAgICAgICBpZDogc3RhY2tEb2NTbmFwLmlkLFxuICAgICAgICAuLi5zdGFja0RhdGEsXG4gICAgICB9KTtcblxuICAgICAgLy8gRW5yaWNoIGV4ZXJjaXNlcyB3aXRoIHZpZGVvc1xuICAgICAgLy8gVGhpcyBhc3N1bWVzIGZldGNoVmlkZW9zRm9yV29ya291dCBjYW4gY29ycmVjdGx5IHBvcHVsYXRlIHZpZGVvcyBiYXNlZCBvbiBleGVyY2lzZSBuYW1lc1xuICAgICAgLy8gYW5kIHRoYXQgd29ya291dC5leGVyY2lzZXMgYXJlIGFscmVhZHkgaW4gRXhlcmNpc2VSZWZlcmVuY2UgZm9ybWF0IG9yIGNvbXBhdGlibGVcbiAgICAgIHdvcmtvdXQgPSBhd2FpdCB0aGlzLmZldGNoVmlkZW9zRm9yV29ya291dCh3b3Jrb3V0KTtcblxuICAgICAgcmV0dXJuIHdvcmtvdXQ7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmV0Y2hpbmcgc3RhY2sgd29ya291dCBkZXRhaWxzIGZvciBJRCAke3N0YWNrSWR9OmAsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yOyAvLyBSZS10aHJvdyB0aGUgZXJyb3IgdG8gYmUgaGFuZGxlZCBieSB0aGUgY2FsbGVyXG4gICAgfVxuICB9XG5cbn1cblxuZXhwb3J0IGNvbnN0IHdvcmtvdXRTZXJ2aWNlID0gbmV3IFdvcmtvdXRTZXJ2aWNlKCk7Il0sIm5hbWVzIjpbImNvbGxlY3Rpb24iLCJkb2MiLCJnZXREb2NzIiwiZ2V0RG9jIiwidXBkYXRlRG9jIiwicXVlcnkiLCJ3aGVyZSIsIm9yZGVyQnkiLCJmc0NvbGxlY3Rpb24iLCJzZXREb2MiLCJkZWxldGVEb2MiLCJ3cml0ZUJhdGNoIiwiZGIiLCJ1c2VyU2VydmljZSIsIkV4ZXJjaXNlTG9nIiwiRXhlcmNpc2VDYXRlZ29yeSIsIkV4ZXJjaXNlIiwiRXhlcmNpc2VWaWRlbyIsIkV4ZXJjaXNlUmVmZXJlbmNlIiwiZXhlcmNpc2VTZXJ2aWNlIiwiVXNlciIsIldvcmtvdXQiLCJXb3Jrb3V0U3VtbWFyeSIsIkJvZHlab25lIiwiUmVwc0FuZFdlaWdodExvZyIsIldvcmtvdXRTZXNzaW9uIiwiV29ya291dFN0YXR1cyIsIlN3ZWF0bGlzdENvbGxlY3Rpb24iLCJTd2VhdGxpc3RJZGVudGlmaWVycyIsImZvcm1hdCIsImNvbnZlcnRUaW1lc3RhbXAiLCJzZXJ2ZXJUaW1lc3RhbXAiLCJjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wIiwiQ2hhbGxlbmdlIiwiQ2hhbGxlbmdlU3RhdHVzIiwiVXNlckNoYWxsZW5nZSIsInN0b3JlIiwic2V0Q3VycmVudFdvcmtvdXQiLCJzZXRDdXJyZW50RXhlcmNpc2VMb2dzIiwicmVzZXRXb3Jrb3V0U3RhdGUiLCJzZXRXb3Jrb3V0U3VtbWFyeSIsImRhdGVUb1VuaXhUaW1lc3RhbXAiLCJXb3Jrb3V0U2VydmljZSIsImN1cnJlbnRXb3Jrb3V0Iiwid29ya291dERhdGEiLCJnZXRTdGF0ZSIsIndvcmtvdXQiLCJkaXNwYXRjaCIsImN1cnJlbnRXb3Jrb3V0TG9ncyIsImxvZ3NEYXRhIiwiY3VycmVudEV4ZXJjaXNlTG9ncyIsIm1hcCIsImxvZyIsImxvZ3MiLCJjdXJyZW50V29ya291dFN1bW1hcnkiLCJzdW1tYXJ5RGF0YSIsIndvcmtvdXRTdW1tYXJ5IiwiZ2VuZXJhdGVJZCIsImlkIiwiZmV0Y2hXb3Jrb3V0U3VtbWFyeSIsInVzZXJJZCIsIndvcmtvdXRJZCIsInN1bW1hcnlJZCIsImNvbnNvbGUiLCJzdW1tYXJ5UmVmIiwic3VtbWFyeURvYyIsImV4aXN0cyIsImRhdGEiLCJlcnJvciIsImZvcm1hdFdvcmtvdXRBbmRJbml0aWFsaXplTG9ncyIsImV4ZXJjaXNlRGV0YWlscyIsIndvcmtvdXRBdXRob3IiLCJ3b3JrSWQiLCJleGVyY2lzZVJlZmVyZW5jZXMiLCJleGVyY2lzZUxvZ3MiLCJ2YWxpZEV4ZXJjaXNlRGV0YWlscyIsImZpbHRlciIsImRldGFpbCIsImV4ZXJjaXNlIiwiZm9yRWFjaCIsImluZGV4IiwiY2F0ZWdvcnkiLCJ0eXBlIiwiZGV0YWlscyIsInNldHMiLCJyZXBzIiwid2VpZ2h0Iiwic2NyZWVuVGltZSIsInNlbGVjdGVkVmlkZW8iLCJkdXJhdGlvbiIsImJwbSIsImNhbG9yaWVzIiwiZXhlcmNpc2VJbnN0YW5jZSIsIndlaWdodFRyYWluaW5nIiwiY2FyZGlvIiwiZXhlcmNpc2VJbnN0YW5jZUNsYXNzIiwiZXhlcmNpc2VSZWYiLCJncm91cElkIiwicHVzaCIsInNldHNMb2dzIiwiQXJyYXkiLCJmcm9tIiwibGVuZ3RoIiwicGFyc2VJbnQiLCJleGVyY2lzZUxvZ0lkIiwiZ2VuZXJhdGVFeGVyY2lzZUxvZ0lEIiwibm9uVUlDdXJyZW50VXNlciIsImZlZWRiYWNrIiwibm90ZSIsIm5vdGVzIiwiaXNTcGxpdCIsImxvZ1N1Ym1pdHRlZCIsImxvZ0lzRWRpdGluZyIsImlzQ29tcGxldGVkIiwib3JkZXIiLCJjcmVhdGVkQXQiLCJEYXRlIiwidXBkYXRlZEF0IiwiY29tcGxldGVkQXQiLCJuZXdXb3Jrb3V0Iiwicm91bmRXb3Jrb3V0SWQiLCJleGVyY2lzZXMiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwid29ya291dFJhdGluZyIsInVzZUF1dGhvckNvbnRlbnQiLCJ3b3Jrb3V0U3RhdHVzIiwiYXV0aG9yIiwiem9uZSIsImRldGVybWluZVdvcmtvdXRab25lIiwiZmV0Y2hSYW5kb21UcmVuZGluZ1N0YWNrcyIsInN0YWNrc1JlZiIsInNuYXBzaG90IiwiZW1wdHkiLCJkb2N1bWVudHMiLCJkb2NzIiwic2h1ZmZsZWREb2NzIiwic29ydCIsIk1hdGgiLCJyYW5kb20iLCJyYW5kb21TdGFja3MiLCJzbGljZSIsIndvcmtvdXRzV2l0aFZpZGVvcyIsIlByb21pc2UiLCJhbGwiLCJmZXRjaFZpZGVvc0ZvcldvcmtvdXQiLCJmZXRjaExpdmVSb3VuZHMiLCJub3ciLCJjb2xsZWN0aW9uc1JlZiIsInEiLCJjb2xsZWN0aW9ucyIsImNvaG9ydEF1dGhvciIsImNoYWxsZW5nZSIsImlzQXJyYXkiLCJvd25lcklkIiwic29tZSIsImluY2x1ZGVzIiwiZXhlcmNpc2VzV2l0aFZpZGVvcyIsImZldGNoQW5kTWFwRXhlcmNpc2VzV2l0aFZpZGVvcyIsInVwZGF0ZWRFeGVyY2lzZXMiLCJleGVyY2lzZU5hbWUiLCJuYW1lIiwidG9Mb3dlckNhc2UiLCJ0cmltIiwibWF0Y2hpbmdFeGVyY2lzZSIsImZpbmQiLCJleCIsInZpZGVvcyIsImZldGNoUmFuZG9tVHJlbmRpbmdTdGFja3NGYWxsYmFjayIsIndvcmtvdXRzIiwiZ2V0QWxsU3dlYXRsaXN0cyIsInNodWZmbGVkV29ya291dHMiLCJnZXRVc2VyQnlJZCIsInVzZXJEb2MiLCJFcnJvciIsInJldmVydEF1dGhvckZvcm1hdCIsImF1dGhvcklkIiwid29ya291dFJlZiIsInVwZGF0ZVdvcmtvdXQiLCJ0b0RpY3Rpb25hcnkiLCJtZXJnZSIsImJhdGNoIiwibG9nc1JlZiIsImxvZ1JlZiIsInNldCIsImNvbW1pdCIsImZldGNoQ3VycmVudFdvcmtvdXQiLCJzZXNzaW9uIiwiZmV0Y2hDdXJyZW50V29ya291dFNlc3Npb24iLCJ3b3Jrb3V0c1JlZiIsIndvcmtvdXRzU25hcHNob3QiLCJ3b3Jrb3V0RG9jIiwibWFwcGVkRXhlcmNpc2VzIiwiZnVsbEV4ZXJjaXNlIiwiY29sbGVjdGlvbklkIiwic3RhcnRUaW1lIiwidW5kZWZpbmVkIiwibG9nc1NuYXBzaG90IiwibG9nRG9jIiwiZmlyZXN0b3JlRXJyb3IiLCJtZXNzYWdlIiwiZ2V0VXNlckNoYWxsZW5nZXNCeUNoYWxsZW5nZUlkIiwiY2hhbGxlbmdlSWQiLCJ1c2VyQ2hhbGxlbmdlc1JlZiIsInVzZXJDaGFsbGVuZ2VzIiwiZmV0Y2hXb3Jrb3V0U3VtbWFyaWVzIiwiZGF0ZSIsImN1cnJlbnRVc2VyIiwiZm9ybWF0dGVkRGF0ZSIsInN1bW1hcmllc1JlZiIsImZldGNoQWxsV29ya291dFN1bW1hcmllcyIsImZldGNoVXNlckNoYWxsZW5nZXNCeVVzZXJJZCIsInN1YnRpdGxlIiwicGFydGljaXBhbnRzIiwic3RhdHVzIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsImludHJvVmlkZW9zIiwiZmV0Y2hDb2xsZWN0aW9uV2l0aFN3ZWF0TGlzdHMiLCJnZXRDb2xsZWN0aW9uQnlJZCIsInN3ZWF0TGlzdHMiLCJzd2VhdGxpc3RJZGVudGlmaWVyIiwic3dlYXRsaXN0SWRzIiwiZmV0Y2hTYXZlZFdvcmtvdXQiLCJzd2VhdGxpc3RBdXRob3JJZCIsIndvcmtvdXRTbmFwIiwiSlNPTiIsInN0cmluZ2lmeSIsImV4ZXJjaXNlTmFtZUxvd2VyIiwibG9nRGF0YSIsImV4ZXJjaXNlV2l0aFZpZGVvIiwiZXhMb2ciLCJyZWNvbW1lbmRlZFdlaWdodCIsImlzQm9keVdlaWdodCIsImZldGNoVXNlckNoYWxsZW5nZXNCeUNoYWxsZW5nZUlkIiwiZG9jUmVmIiwiZG9jU25hcCIsImNvbGxlY3Rpb25EYXRhIiwiY3VycmVudFN3ZWF0bGlzdElkc0RhdGEiLCJjdXJyZW50U3dlYXRsaXN0SWRzIiwiZ2V0Q29sbGVjdGlvbnNCeUlkcyIsImNvbGxlY3Rpb25JZHMiLCJmZXRjaENvbGxlY3Rpb25zIiwicUFycmF5Iiwic25hcHNob3RBcnJheSIsImNvbGxlY3Rpb25zRnJvbUFycmF5IiwicVN0cmluZyIsInNuYXBzaG90U3RyaW5nIiwiY29sbGVjdGlvbnNGcm9tU3RyaW5nIiwiY29tYmluZWQiLCJ1bmlxdWVDb2xsZWN0aW9ucyIsIk1hcCIsInZhbHVlcyIsImZldGNoQWN0aXZlQ2hhbGxlbmdlcyIsImFsbENoYWxsZW5nZXMiLCJhY3RpdmVDaGFsbGVuZ2VzIiwidXNlckNoYWxsZW5nZSIsImZldGNoVXNlckNoYWxsZW5nZXMiLCJmZXRjaEFsbFVzZXJDaGFsbGVuZ2VzIiwiZXJyIiwiQm9vbGVhbiIsInVwZGF0ZVdvcmtvdXRTdW1tYXJ5Iiwic3VtbWFyeSIsInBhdGgiLCJ1cGRhdGVXb3Jrb3V0TG9ncyIsImxvZ0RvY1JlZiIsInVwZGF0ZSIsImNhbmNlbFdvcmtvdXQiLCJkZWxldGVXb3Jrb3V0U2Vzc2lvbiIsImRlbGV0ZVdvcmtvdXRTdW1tYXJ5IiwiY2xlYW5VcFdvcmtvdXRJblByb2dyZXNzIiwiZGVsZXRlIiwicmVmIiwid29ya291dFN1bW1hcnlJZCIsImV4ZXJjaXNlU25hcHNob3QiLCJ2aWRlb1NuYXBzaG90IiwiZXhlcmNpc2VWaWRlb3MiLCJtYXRjaGluZ1ZpZGVvcyIsInZpZGVvIiwid29ya291dFNlc3Npb25zUmVmIiwiUXVldWVkVXAiLCJzbmFwIiwicHJvY2Vzc1dvcmtvdXRTZXNzaW9uRG9jdW1lbnQiLCJJblByb2dyZXNzIiwiZmV0Y2hBbGxXb3Jrb3V0U2Vzc2lvbnMiLCJzZXNzaW9ucyIsInNlc3Npb25EYXRhIiwiYSIsImIiLCJvcmRlckEiLCJvcmRlckIiLCJ1cGRhdGVVc2VyQ2hhbGxlbmdlIiwiY2hhbGxlbmdlUmVmIiwiY2hhbGxlbmdlRGF0YSIsImNvbnN0cnVjdG9yIiwic3RyaW5naWZ5RXJyb3IiLCJ1cGRhdGVDb2xsZWN0aW9uIiwiY29sbFJlZiIsIm5ld0RvY1JlZiIsIkFyY2hpdmVkIiwiRnVsbEJvZHkiLCJtYXRjaGluZ01hcHBlZEV4ZXJjaXNlIiwicHJlcGFyZWRMb2dEYXRhIiwic2F2ZVdvcmtvdXRTZXNzaW9uIiwic2Vzc2lvbnNSZWYiLCJxdWV1ZWRTbmFwc2hvdCIsInNpemUiLCJkZWxldGVCYXRjaCIsInNlc3Npb25Eb2MiLCJsb2dzVG9EZWxldGVSZWYiLCJsb2dzVG9EZWxldGVTbmFwc2hvdCIsIm9yaWdpbmFsVHlwZSIsImN1cnJlbnREYXRlIiwiY2xlYW5Xb3Jrb3V0IiwiZ2V0VGltZSIsIndvcmtvdXRTZXNzaW9uUmVmIiwibG9nQmF0Y2giLCJ1cGRhdGVkTG9nc1dpdGhOZXdJZHMiLCJuZXdMb2dJZCIsInVwZGF0ZWRMb2ciLCJvcmlnaW5hbENhdGVnb3J5Iiwiam9pbkNoYWxsZW5nZSIsInVzZXJuYW1lIiwidXNlcnNSZWYiLCJ1c2VyUXVlcnkiLCJ1c2VyU25hcHNob3QiLCJ1c2VyRGF0YSIsImNoYWxsZW5nZVNuYXAiLCJ1c2VyQ2hhbGxlbmdlSWQiLCJ1c2VyQ2hhbGxlbmdlRGF0YSIsImZjbVRva2VuIiwicHJvZmlsZUltYWdlIiwicHJvZ3Jlc3MiLCJjb21wbGV0ZWRXb3Jrb3V0cyIsInVpZCIsImxvY2F0aW9uIiwiY2l0eSIsImNvdW50cnkiLCJ0aW1lem9uZSIsImpvaW5EYXRlIiwicHVsc2VQb2ludHMiLCJiYXNlQ29tcGxldGlvbiIsImZpcnN0Q29tcGxldGlvbiIsInN0cmVha0JvbnVzIiwiY2hlY2tJbkJvbnVzIiwiZWZmb3J0UmF0aW5nIiwiY2hhdFBhcnRpY2lwYXRpb24iLCJsb2NhdGlvbkNoZWNraW4iLCJjb250ZW50RW5nYWdlbWVudCIsImVuY291cmFnZW1lbnRTZW50IiwiZW5jb3VyYWdlbWVudFJlY2VpdmVkIiwiY3VycmVudFN0cmVhayIsImVuY291cmFnZWRVc2VycyIsImVuY291cmFnZWRCeVVzZXJzIiwiY2hlY2tJbnMiLCJmZXRjaFVzZXJDaGFsbGVuZ2VCeUlkIiwiZGVsZXRlVXNlckNoYWxsZW5nZSIsInN1Y2Nlc3MiLCJlcnJvck1lc3NhZ2UiLCJmZXRjaEFsbEFkbWluQ29sbGVjdGlvbnMiLCJPYmplY3QiLCJrZXlzIiwibWFwRXJyb3IiLCJnZW5lcmF0ZVNoYXJlYWJsZVJvdW5kTGluayIsImhvc3RJZCIsImlzUGFpZCIsInByaWNpbmdJbmZvIiwiaXNFbmFibGVkIiwiZmFsbGJhY2tCYXNlVVJMIiwiZmFsbGJhY2tQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJzaGFyZWRCeSIsImZhbGxiYWNrVVJMU3RyaW5nIiwidG9TdHJpbmciLCJvbmVMaW5rU3ViZG9tYWluIiwib25lTGlua0lEIiwib25lTGlua0Jhc2VVUkwiLCJlbmNvZGVkRmFsbGJhY2tVUkwiLCJlbmNvZGVVUklDb21wb25lbnQiLCJwYXJhbXMiLCJwaWQiLCJjIiwiYWZfcmVmZXJyZXJfY3VzdG9tZXJfaWQiLCJkZWVwX2xpbmtfdmFsdWUiLCJyb3VuZElkIiwiYWZfciIsImNoYWxsZW5nZVRpdGxlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwiZGF0ZVJhbmdlIiwicHJldmlld1RpdGxlIiwicHJldmlld0Rlc2NyaXB0aW9uIiwicHJldmlld0ltYWdlVVJMIiwiZmluYWxVUkwiLCJyZW1vdmVTdGFja0Zyb21Sb3VuZCIsInN3ZWF0bGlzdElkIiwiY29sbGVjdGlvblJlZiIsInVwZGF0ZWRTd2VhdGxpc3RJZHMiLCJzd2VhdGxpc3QiLCJ3YXJuIiwic2wiLCJjbGVhckFsbFN0YWNrc0Zyb21Sb3VuZCIsInVwZGF0ZUNoYWxsZW5nZVN0YXR1cyIsIm5ld1N0YXR1cyIsInZhbGlkU3RhdHVzZXMiLCJ1cGRhdGVEYXRhIiwidXBkYXRlU3RhdHVzRm9yQWxsVXNlckNoYWxsZW5nZXMiLCJub3dUaW1lc3RhbXAiLCJjcmVhdGVUZXN0V29ya291dFNlc3Npb24iLCJzZXNzaW9uSWQiLCJ0ZXN0RGF0YSIsInVzZXJTZXNzaW9uUmVmIiwicm9vdFNlc3Npb25SZWYiLCJkZWxldGVUZXN0V29ya291dFNlc3Npb24iLCJyb290U2Vzc2lvblNuYXAiLCJjcmVhdGVGdWxsVGVzdFdvcmtvdXRTZXNzaW9uIiwid29ya291dFRlbXBsYXRlIiwidGVtcGxhdGVMb2dzIiwibmV3U2Vzc2lvbklkIiwid29ya291dFRlbXBsYXRlSWQiLCJsb2dzU3ViY29sbGVjdGlvblJlZiIsImNyZWF0ZWRMb2dPYmplY3RzIiwiaSIsInRlbXBsYXRlTG9nIiwibmV3TG9nRG9jUmVmIiwibmV3TG9nIiwic2ltdWxhdGVVcGRhdGVFeGVyY2lzZUxvZyIsImxvZ0lkIiwidXBkYXRlcyIsImZpcmVzdG9yZVVwZGF0ZXMiLCJzaW11bGF0ZVVwZGF0ZVdvcmtvdXRTZXNzaW9uIiwic2Vzc2lvblJlZiIsImVuZFRpbWUiLCJmZXRjaFN0YWNrV29ya291dERldGFpbHMiLCJzdGFja0lkIiwic3RhY2tEb2NSZWYiLCJzdGFja0RvY1NuYXAiLCJzdGFja0RhdGEiLCJ3b3Jrb3V0U2VydmljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/api/firebase/workout/service.ts\n");

/***/ }),

/***/ "./src/api/firebase/workout/types.ts":
/*!*******************************************!*\
  !*** ./src/api/firebase/workout/types.ts ***!
  \*******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BodyZone: () => (/* binding */ BodyZone),\n/* harmony export */   Challenge: () => (/* binding */ Challenge),\n/* harmony export */   ChallengeStatus: () => (/* binding */ ChallengeStatus),\n/* harmony export */   CheckIn: () => (/* binding */ CheckIn),\n/* harmony export */   Encouragement: () => (/* binding */ Encouragement),\n/* harmony export */   IntroVideo: () => (/* binding */ IntroVideo),\n/* harmony export */   PricingInfo: () => (/* binding */ PricingInfo),\n/* harmony export */   PulsePoints: () => (/* binding */ PulsePoints),\n/* harmony export */   ReferralChain: () => (/* binding */ ReferralChain),\n/* harmony export */   RepsAndWeightLog: () => (/* binding */ RepsAndWeightLog),\n/* harmony export */   SweatlistCollection: () => (/* binding */ SweatlistCollection),\n/* harmony export */   SweatlistIdentifiers: () => (/* binding */ SweatlistIdentifiers),\n/* harmony export */   SweatlistType: () => (/* binding */ SweatlistType),\n/* harmony export */   UserChallenge: () => (/* binding */ UserChallenge),\n/* harmony export */   Workout: () => (/* binding */ Workout),\n/* harmony export */   WorkoutRating: () => (/* binding */ WorkoutRating),\n/* harmony export */   WorkoutSession: () => (/* binding */ WorkoutSession),\n/* harmony export */   WorkoutStatus: () => (/* binding */ WorkoutStatus),\n/* harmony export */   WorkoutSummary: () => (/* binding */ WorkoutSummary),\n/* harmony export */   WorkoutType: () => (/* binding */ WorkoutType)\n/* harmony export */ });\n/* harmony import */ var _exercise_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../exercise/types */ \"./src/api/firebase/exercise/types.ts\");\n/* harmony import */ var _utils_formatDate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils/formatDate */ \"./src/utils/formatDate.ts\");\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../user */ \"./src/api/firebase/user/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_exercise_types__WEBPACK_IMPORTED_MODULE_0__, _user__WEBPACK_IMPORTED_MODULE_2__]);\n([_exercise_types__WEBPACK_IMPORTED_MODULE_0__, _user__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n// Helper function to safely convert string to BodyPart enum\nfunction stringToBodyPart(bodyPartString) {\n    // Map the string value to an enum value, case insensitive\n    const normalizedString = bodyPartString.toLowerCase();\n    // Check if the string matches any enum value\n    for (const [key, value] of Object.entries(_exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart)){\n        if (value.toLowerCase() === normalizedString) {\n            return value;\n        }\n    }\n    // Default fallback\n    console.warn(`Unknown body part: \"${bodyPartString}\", defaulting to Fullbody`);\n    return _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Fullbody;\n}\nclass CheckIn {\n    constructor(data){\n        this.id = data.id || \"\";\n        this.userId = data.userId || \"\";\n        this.workoutId = data.workoutId || \"\";\n        this.photoUrl = data.photoUrl || \"\";\n        this.videoUrl = data.videoUrl || \"\";\n        // If createdAt is a Unix timestamp in seconds, convert it to a Date\n        this.createdAt = data.createdAt ? typeof data.createdAt === \"number\" ? new Date(data.createdAt * 1000) : new Date(data.createdAt) : new Date();\n    }\n    toDictionary() {\n        return {\n            id: this.id,\n            userId: this.userId,\n            workoutId: this.workoutId,\n            photoUrl: this.photoUrl,\n            videoUrl: this.videoUrl,\n            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(this.createdAt)\n        };\n    }\n}\nvar WorkoutStatus;\n(function(WorkoutStatus) {\n    WorkoutStatus[\"QueuedUp\"] = \"queuedUp\";\n    WorkoutStatus[\"InProgress\"] = \"inProgress\";\n    WorkoutStatus[\"Complete\"] = \"complete\";\n    WorkoutStatus[\"Archived\"] = \"archived\";\n})(WorkoutStatus || (WorkoutStatus = {}));\nvar WorkoutType;\n(function(WorkoutType) {\n    WorkoutType[\"UpperBody\"] = \"Upper Body\";\n    WorkoutType[\"LowerBody\"] = \"Lower Body\";\n    WorkoutType[\"Core\"] = \"Core\";\n    WorkoutType[\"FullBody\"] = \"Full Body\";\n})(WorkoutType || (WorkoutType = {}));\nvar WorkoutRating;\n(function(WorkoutRating) {\n    WorkoutRating[\"TooHard\"] = \"Too Hard\";\n    WorkoutRating[\"TooEasy\"] = \"Too Easy\";\n    WorkoutRating[\"JustRight\"] = \"Just Right\";\n})(WorkoutRating || (WorkoutRating = {}));\nvar BodyZone;\n(function(BodyZone) {\n    BodyZone[\"LowerBody\"] = \"Lower Body\";\n    BodyZone[\"UpperBody\"] = \"Upper Body\";\n    BodyZone[\"FullBody\"] = \"Full Body\";\n    BodyZone[\"Core\"] = \"Core\";\n})(BodyZone || (BodyZone = {}));\nclass RepsAndWeightLog {\n    constructor(data){\n        this.reps = data.reps || 0;\n        this.weight = data.weight || 0;\n        this.leftReps = data.leftReps || 0;\n        this.leftWeight = data.leftWeight || 0;\n        this.isSplit = data.isSplit || false;\n        this.isBodyWeight = data.isBodyWeight || false;\n        this.duration = data.duration || 0;\n        this.calories = data.calories || 0;\n        this.bpm = data.bpm || 0;\n    }\n    toDictionary() {\n        return {\n            reps: this.reps,\n            weight: this.weight,\n            leftReps: this.leftReps,\n            leftWeight: this.leftWeight,\n            isSplit: this.isSplit,\n            isBodyWeight: this.isBodyWeight,\n            duration: this.duration,\n            calories: this.calories,\n            bpm: this.bpm\n        };\n    }\n}\n// Workout TEMPLATE Class (Refactored)\nclass Workout {\n    constructor(data){\n        this.id = data.id || \"\";\n        this.collectionId = data.collectionId || null;\n        this.title = data.title || \"\";\n        this.description = data.description || \"\";\n        this.duration = data.duration || 0;\n        this.useAuthorContent = data.useAuthorContent || false;\n        this.workoutRating = data.workoutRating || null;\n        this.exercises = Array.isArray(data.exercises) ? data.exercises.map((exRefData)=>{\n            if (exRefData && exRefData.exercise) {\n                return new _exercise_types__WEBPACK_IMPORTED_MODULE_0__.ExerciseReference({\n                    exercise: new _exercise_types__WEBPACK_IMPORTED_MODULE_0__.Exercise(exRefData.exercise),\n                    groupId: exRefData.groupId,\n                    isCompleted: exRefData.isCompleted || false\n                });\n            }\n            return null;\n        }).filter((ref)=>ref !== null) : [];\n        this.logs = Array.isArray(data?.logs) ? data.logs.map((log)=>{\n            if (!log?.exercise || !Array.isArray(log?.sets)) return null;\n            return new _exercise_types__WEBPACK_IMPORTED_MODULE_0__.ExerciseLog({\n                exercise: new _exercise_types__WEBPACK_IMPORTED_MODULE_0__.Exercise(log.exercise),\n                sets: log.sets.map((set)=>new RepsAndWeightLog(set))\n            });\n        }).filter(Boolean) : [];\n        this.order = data.order !== undefined ? data.order : null;\n        this.author = typeof data.author === \"string\" ? data.author : data.author?.userId || \"\";\n        this.assignedDate = data.assignedDate ? (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.convertFirestoreTimestamp)(data.assignedDate) : null;\n        this.createdAt = data.createdAt ? (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.convertFirestoreTimestamp)(data.createdAt) : new Date();\n        this.updatedAt = data.updatedAt ? (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.convertFirestoreTimestamp)(data.updatedAt) : new Date();\n        this.zone = data.zone || Workout.determineWorkoutZone(this.exercises) || \"Full Body\";\n        this.estimatedDuration = data.estimatedDuration || Workout.estimatedDuration(this.exercises);\n        // Initialize merged properties\n        this.workoutTemplateId = data.workoutTemplateId;\n        this.challengeId = data.challengeId !== undefined ? data.challengeId : null;\n        this.roundWorkoutId = data.roundWorkoutId;\n        this.workoutStatus = data.workoutStatus;\n        this.startTime = data.startTime ? (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.convertFirestoreTimestamp)(data.startTime) : null;\n        this.endTime = data.endTime ? (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.convertFirestoreTimestamp)(data.endTime) : null;\n        this.isCompleted = data.isCompleted || false;\n    }\n    // Static methods like estimatedDuration and determineWorkoutZone remain largely the same,\n    // but would operate on ExerciseReference[] from the template.\n    static estimatedDuration(exercises) {\n        let totalTimeSeconds = 0;\n        let restTimeSeconds = 0;\n        let hasScreenTimeExercises = false;\n        for (const exerciseRef of exercises){\n            const exercise = exerciseRef.exercise;\n            const categoryDetails = exercise?.category?.details;\n            const screenTime = categoryDetails?.screenTime;\n            if (screenTime && screenTime > 0) {\n                totalTimeSeconds += screenTime;\n                hasScreenTimeExercises = true;\n            } else if (exercise?.category?.type === \"cardio\") {\n                const duration = categoryDetails?.duration || 0; // Cast for cardio details\n                totalTimeSeconds += duration * 60;\n            } else {\n                // Default for weight training without specific screen time\n                const sets = categoryDetails?.sets || 3; // Default sets\n                totalTimeSeconds += sets * (45 + 60); // 45s per set + 60s rest\n                restTimeSeconds += sets * 60;\n            }\n        }\n        if (!hasScreenTimeExercises && exercises.length > 0) {\n            totalTimeSeconds += 10 * 60; // 10 minutes warmup/cooldown\n        }\n        const totalSeconds = totalTimeSeconds; // Simplified, rest time already incorporated above for non-screentime\n        if (hasScreenTimeExercises) {\n            const minutes = totalSeconds / 60;\n            return Math.ceil(minutes * 10) / 10;\n        }\n        const totalMinutes = Math.round(totalSeconds / 60);\n        return Math.round(totalMinutes / 5) * 5;\n    }\n    static determineWorkoutZone(exercises) {\n        const bodyPartsInvolved = new Set();\n        for (const exerciseRef of exercises){\n            // Ensure exercise and primaryBodyParts exist\n            if (exerciseRef?.exercise?.primaryBodyParts) {\n                for (const bodyPartStr of exerciseRef.exercise.primaryBodyParts){\n                    if (bodyPartStr) bodyPartsInvolved.add(stringToBodyPart(bodyPartStr));\n                }\n            }\n        }\n        const upperBodyParts = new Set([\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Chest,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Shoulders,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Biceps,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Triceps,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Traps,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Lats,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Forearms,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Back,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Deltoids,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Rhomboids\n        ]);\n        const lowerBodyParts = new Set([\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Hamstrings,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Glutes,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Quadriceps,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Calves\n        ]);\n        const coreParts = new Set([\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Abs,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Lowerback\n        ]);\n        const hasCommonElements = (set1, set2)=>{\n            return Array.from(set1).some((item)=>set2.has(item));\n        };\n        const hasUpperBody = hasCommonElements(bodyPartsInvolved, upperBodyParts);\n        const hasLowerBody = hasCommonElements(bodyPartsInvolved, lowerBodyParts);\n        const hasCore = hasCommonElements(bodyPartsInvolved, coreParts);\n        if (hasUpperBody && hasLowerBody && hasCore || hasUpperBody && hasLowerBody) {\n            return \"Full Body\";\n        } else if (hasUpperBody && hasCore || hasUpperBody) {\n            return \"Upper Body\";\n        } else if (hasLowerBody && hasCore || hasLowerBody) {\n            return \"Lower Body\";\n        } else if (hasCore) {\n            return \"Core\";\n        } else {\n            return \"Full Body\"; // Default if no specific zone identified\n        }\n    }\n    get isTimedWorkout() {\n        if (!this.exercises) return false;\n        return this.exercises.some((exRef)=>{\n            const details = exRef.exercise?.category?.details;\n            if (details && \"screenTime\" in details) {\n                return details.screenTime > 0;\n            }\n            return false;\n        });\n    }\n    fetchPrimaryBodyParts() {\n        if (!this.exercises) return [];\n        return this.exercises.flatMap((exerciseRef)=>exerciseRef.exercise?.primaryBodyParts?.map((part)=>stringToBodyPart(part)) || []).filter((bp)=>bp !== undefined); // Filter out undefined if stringToBodyPart defaults\n    }\n    fetchSecondaryBodyParts() {\n        if (!this.exercises) return [];\n        return this.exercises.flatMap((exerciseRef)=>exerciseRef.exercise?.secondaryBodyParts?.map((part)=>stringToBodyPart(part)) || []).filter((bp)=>bp !== undefined);\n    }\n    toDictionary() {\n        const dict = {\n            id: this.id,\n            exercises: this.exercises.map((exRef)=>exRef.toDictionary()),\n            title: this.title,\n            description: this.description,\n            duration: this.duration,\n            useAuthorContent: this.useAuthorContent,\n            author: this.author,\n            zone: this.zone,\n            estimatedDuration: this.estimatedDuration,\n            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(this.createdAt),\n            updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(this.updatedAt),\n            isCompleted: this.isCompleted\n        };\n        if (this.collectionId && this.collectionId.length > 0) dict.collectionId = this.collectionId;\n        if (this.workoutRating) dict.workoutRating = this.workoutRating;\n        if (this.order !== null && this.order !== undefined) dict.order = this.order;\n        if (this.assignedDate) dict.assignedDate = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(this.assignedDate);\n        // Add merged properties to dictionary\n        if (this.workoutTemplateId) dict.workoutTemplateId = this.workoutTemplateId;\n        if (this.challengeId) dict.challengeId = this.challengeId;\n        if (this.roundWorkoutId) dict.roundWorkoutId = this.roundWorkoutId;\n        if (this.workoutStatus) dict.workoutStatus = this.workoutStatus;\n        if (this.startTime) dict.startTime = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(this.startTime);\n        if (this.endTime) dict.endTime = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(this.endTime);\n        return dict;\n    }\n}\n// New WorkoutSession Class\nclass WorkoutSession {\n    // Session specific derived properties (can be added if needed, e.g. actual duration)\n    constructor(data){\n        this.id = data.id || \"\";\n        this.userId = data.userId || \"\";\n        this.workoutTemplateId = data.workoutTemplateId || \"\";\n        this.challengeId = data.challengeId !== undefined ? data.challengeId : null;\n        this.roundWorkoutId = data.roundWorkoutId || \"\";\n        this.title = data.title || \"\";\n        this.description = data.description;\n        this.author = data.author; // author is optional\n        this.logs = data.logs || [];\n        this.workoutStatus = data.workoutStatus || \"queuedUp\";\n        this.startTime = data.startTime instanceof Date ? data.startTime : data.startTime ? new Date(data.startTime) : null;\n        this.endTime = data.endTime instanceof Date ? data.endTime : data.endTime ? new Date(data.endTime) : null;\n        this.isCompleted = data.isCompleted || false;\n        this.createdAt = data.createdAt instanceof Date ? data.createdAt : data.createdAt ? new Date(data.createdAt) : new Date();\n        this.updatedAt = data.updatedAt instanceof Date ? data.updatedAt : data.updatedAt ? new Date(data.updatedAt) : new Date();\n    }\n    toDictionary() {\n        const dict = {\n            id: this.id,\n            userId: this.userId,\n            workoutTemplateId: this.workoutTemplateId,\n            challengeId: this.challengeId,\n            roundWorkoutId: this.roundWorkoutId,\n            title: this.title,\n            // Optional fields are handled by their presence or absence\n            ...this.description && {\n                description: this.description\n            },\n            ...this.author && {\n                author: this.author\n            },\n            workoutStatus: this.workoutStatus,\n            startTime: this.startTime,\n            endTime: this.endTime,\n            isCompleted: this.isCompleted,\n            createdAt: this.createdAt,\n            updatedAt: this.updatedAt\n        };\n        return dict;\n    }\n}\nclass WorkoutSummary {\n    constructor(data){\n        this.duration = 0 // Changed to number to match iOS\n        ;\n        this.id = data.id || \"\";\n        this.workoutId = data.workoutId || \"\";\n        this.userId = data.userId || \"\";\n        this.roundWorkoutId = data.roundWorkoutId || \"\";\n        this.exercises = Array.isArray(data.exercises) ? data.exercises.map((ex)=>new _exercise_types__WEBPACK_IMPORTED_MODULE_0__.ExerciseLog(ex)) : [];\n        this.bodyParts = Array.isArray(data.bodyParts) ? data.bodyParts : [];\n        this.secondaryBodyParts = Array.isArray(data.secondaryBodyParts) ? data.secondaryBodyParts : [];\n        this.workoutTitle = data.workoutTitle || \"\";\n        this.caloriesBurned = data.caloriesBurned || 0;\n        this.workoutRating = data.workoutRating;\n        this.exercisesCompleted = Array.isArray(data.exercisesCompleted) ? data.exercisesCompleted.map((ex)=>new _exercise_types__WEBPACK_IMPORTED_MODULE_0__.ExerciseLog(ex)) : [];\n        this.aiInsight = data.aiInsight || \"\";\n        this.recommendations = Array.isArray(data.recommendations) ? data.recommendations : [];\n        this.gifURLs = data.gifURLs;\n        this.recommendedWork = data.recommendedWork;\n        this.pulsePoints = data.pulsePoints ? new PulsePoints(data.pulsePoints) : new PulsePoints({});\n        this.isCompleted = data.isCompleted || false;\n        this.startTime = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.convertFirestoreTimestamp)(data.startTime);\n        this.createdAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.convertFirestoreTimestamp)(data.createdAt);\n        this.updatedAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.convertFirestoreTimestamp)(data.updatedAt);\n        // Handle completedAt similar to iOS\n        if (data.completedAt) {\n            const completedAtTimestamp = data.completedAt;\n            if (completedAtTimestamp === 0) {\n                // Set to 72 minutes from createdAt like in iOS\n                const completedDate = new Date(this.createdAt);\n                completedDate.setMinutes(completedDate.getMinutes() + 72);\n                this.completedAt = completedDate;\n            } else {\n                this.completedAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.convertFirestoreTimestamp)(data.completedAt);\n            }\n        } else {\n            this.completedAt = null;\n        }\n        this.duration = this.calculateDuration();\n    }\n    calculateDuration() {\n        if (!this.completedAt) return 0;\n        const durationInSeconds = (this.completedAt.getTime() - this.createdAt.getTime()) / 1000;\n        // Round to the nearest minute like in iOS\n        return Math.round((durationInSeconds + 30) / 60);\n    }\n    determineWorkoutType() {\n        // Create sets of body parts for each category\n        const upperBodyParts = new Set([\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Chest,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Shoulders,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Biceps,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Triceps,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Traps,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Lats,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Forearms\n        ]);\n        const lowerBodyParts = new Set([\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Hamstrings,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Glutes,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Quadriceps,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Calves\n        ]);\n        const coreParts = new Set([\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Abs,\n            _exercise_types__WEBPACK_IMPORTED_MODULE_0__.BodyPart.Lowerback\n        ]);\n        // Get all body parts involved in the workout\n        const bodyPartsInvolved = new Set();\n        this.exercises.forEach((log)=>{\n            log.exercise.primaryBodyParts.forEach((part)=>bodyPartsInvolved.add(stringToBodyPart(part)));\n        });\n        // Check which areas are targeted\n        const hasUpperBody = Array.from(bodyPartsInvolved).some((part)=>upperBodyParts.has(part));\n        const hasLowerBody = Array.from(bodyPartsInvolved).some((part)=>lowerBodyParts.has(part));\n        const hasCore = Array.from(bodyPartsInvolved).some((part)=>coreParts.has(part));\n        // Determine workout type using the same logic as iOS\n        if (hasUpperBody && hasLowerBody && hasCore || hasUpperBody && hasLowerBody) {\n            return \"Full Body\";\n        } else if (hasUpperBody && hasCore || hasUpperBody) {\n            return \"Upper Body\";\n        } else if (hasLowerBody && hasCore || hasLowerBody) {\n            return \"Lower Body\";\n        } else if (hasCore) {\n            return \"Core\";\n        }\n        return \"Full Body\"; // Default return like iOS\n    }\n    fetchTotalWeightLifted(user) {\n        return this.exercisesCompleted.reduce((total, exercise)=>{\n            return total + exercise.fetchTotalWeightLifted(user);\n        }, 0);\n    }\n    fetchTotalWorkScore(user, workoutId, workoutSummaries) {\n        return this.exercisesCompleted.reduce((total, exercise)=>{\n            if (exercise.logSubmitted) {\n                return total + exercise.calculateWorkScore(user, workoutId, workoutSummaries);\n            }\n            return total;\n        }, 0);\n    }\n    fetchPreviousWorkScore(user, workoutId, summaries) {\n        const currentWorkoutType = this.determineWorkoutType();\n        // Find the most recent matching summary\n        const matchingSummary = summaries.filter((s)=>s.determineWorkoutType() === currentWorkoutType).sort((a, b)=>b.createdAt.getTime() - a.createdAt.getTime()).find((s)=>s.workoutId !== this.workoutId);\n        if (matchingSummary) {\n            // Fix: Pass summaries as the third argument and use proper addition\n            return matchingSummary.exercisesCompleted.reduce((total, exercise)=>total + exercise.calculateWorkScore(user, workoutId, summaries), 0); // Start with 0 as initial value\n        }\n        return 0;\n    }\n    createTotalWorkString(user, workoutId, workoutSummaries) {\n        const totalWork = this.fetchTotalWorkScore(user, workoutId, workoutSummaries);\n        return totalWork.toString();\n    }\n    toDictionary() {\n        const dict = {\n            id: this.id,\n            workoutId: this.workoutId,\n            userId: this.userId,\n            roundWorkoutId: this.roundWorkoutId,\n            exercises: this.exercises.map((ex)=>ex.toDictionary()),\n            bodyParts: this.bodyParts,\n            secondaryBodyParts: this.secondaryBodyParts,\n            workoutTitle: this.workoutTitle,\n            caloriesBurned: this.caloriesBurned,\n            workoutRating: this.workoutRating?.toString() || \"\",\n            exercisesCompleted: this.exercisesCompleted.map((ex)=>ex.toDictionary()),\n            aiInsight: this.aiInsight,\n            recommendations: this.recommendations,\n            recommendedWork: this.recommendedWork || \"\",\n            pulsePoints: this.pulsePoints.toDictionary(),\n            isCompleted: this.isCompleted,\n            startTime: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(this.startTime),\n            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(this.createdAt),\n            updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(this.updatedAt),\n            completedAt: this.completedAt ? (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(this.completedAt) : 0\n        };\n        if (this.gifURLs) {\n            dict.gifURLs = this.gifURLs;\n        }\n        return dict;\n    }\n}\n// SweatlistIdentifiers type\nclass SweatlistIdentifiers {\n    constructor(data){\n        this.id = data.id || \"\";\n        this.sweatlistAuthorId = data.sweatlistAuthorId || \"\";\n        this.sweatlistName = data.sweatlistName || \"\";\n        this.order = data.order || 0;\n        this.isRest = data.isRest || false;\n    }\n    toDictionary() {\n        return {\n            id: this.id,\n            sweatlistAuthorId: this.sweatlistAuthorId,\n            sweatlistName: this.sweatlistName,\n            order: this.order,\n            isRest: this.isRest\n        };\n    }\n}\nvar SweatlistType;\n(function(SweatlistType) {\n    SweatlistType[\"Together\"] = \"together\";\n    SweatlistType[\"Locked\"] = \"locked\";\n})(SweatlistType || (SweatlistType = {}));\nclass ReferralChain {\n    constructor(data){\n        this.originalHostId = data.originalHostId || \"\";\n        this.sharedBy = data.sharedBy || \"\";\n    }\n    toDictionary() {\n        return {\n            originalHostId: this.originalHostId,\n            sharedBy: this.sharedBy\n        };\n    }\n    static fromFirestore(data) {\n        return new ReferralChain(data);\n    }\n}\n// Main SweatlistCollection interface\nclass SweatlistCollection {\n    constructor(data){\n        this.id = data.id;\n        this.title = data.title || \"\";\n        this.subtitle = data.subtitle || \"\";\n        this.pin = data.pin || null;\n        this.challenge = data.challenge ? new Challenge(data.challenge) : null;\n        this.sweatlistIds = (data.sweatlistIds || []).map((item)=>new SweatlistIdentifiers(item));\n        // If ownerId is not an array, wrap it in an array.\n        if (Array.isArray(data.ownerId)) {\n            this.ownerId = data.ownerId;\n        } else if (data.ownerId) {\n            this.ownerId = [\n                data.ownerId\n            ];\n        } else {\n            this.ownerId = [];\n        }\n        this.privacy = this.challenge ? \"together\" : \"locked\";\n        this.participants = (data.participants || []).map((participant)=>participant || \"\");\n        this.createdAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.convertFirestoreTimestamp)(data.createdAt);\n        this.updatedAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.convertFirestoreTimestamp)(data.updatedAt);\n    }\n    toDictionary() {\n        return {\n            id: this.id,\n            title: this.title,\n            subtitle: this.subtitle,\n            pin: this.pin,\n            challenge: this.challenge ? this.challenge.toDictionary() : null,\n            sweatlistIds: this.sweatlistIds.map((item)=>item.toDictionary()),\n            ownerId: this.ownerId,\n            privacy: this.privacy,\n            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(this.createdAt),\n            updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(this.updatedAt)\n        };\n    }\n    isPublished() {\n        if (!this.challenge) return false;\n        return this.challenge.status === \"published\";\n    }\n}\nclass ProfileImage {\n    constructor(data){\n        this.profileImageURL = data.profileImageURL || \"\";\n        this.thumbnailURL = data.thumbnailURL || \"\";\n    }\n    toDictionary() {\n        return {\n            profileImageURL: this.profileImageURL,\n            thumbnailURL: this.thumbnailURL || null\n        };\n    }\n    static fromFirestore(data) {\n        return new ProfileImage(data);\n    }\n}\nclass UserLocation {\n    constructor(data){\n        this.latitude = data.latitude || 0;\n        this.longitude = data.longitude || 0;\n    }\n    toDictionary() {\n        return {\n            latitude: this.latitude,\n            longitude: this.longitude\n        };\n    }\n    static fromFirestore(data) {\n        return new UserLocation(data);\n    }\n}\nclass PulsePoints {\n    constructor(data){\n        this.baseCompletion = data.baseCompletion ?? 0;\n        this.firstCompletion = data.firstCompletion ?? 0;\n        this.streakBonus = data.streakBonus ?? 0;\n        this.checkInBonus = data.checkInBonus ?? 0;\n        this.effortRating = data.effortRating ?? 0;\n        this.chatParticipation = data.chatParticipation ?? 0;\n        this.locationCheckin = data.locationCheckin ?? 0;\n        this.contentEngagement = data.contentEngagement ?? 0;\n        this.encouragementSent = data.encouragementSent ?? 0;\n        this.encouragementReceived = data.encouragementReceived ?? 0;\n        this.cumulativeStreakBonus = data.cumulativeStreakBonus ?? 0;\n        this.shareBonus = data.shareBonus ?? 0;\n        this.referralBonus = data.referralBonus ?? 0;\n        this.peerChallengeBonus = data.peerChallengeBonus ?? 0; // Initialize\n    }\n    get totalStackPoints() {\n        return this.baseCompletion + this.firstCompletion + this.streakBonus + this.checkInBonus + this.effortRating;\n    }\n    get totalCommunityPoints() {\n        return this.chatParticipation + this.locationCheckin + this.contentEngagement + this.encouragementSent + this.encouragementReceived;\n    }\n    get totalPoints() {\n        return this.totalStackPoints + this.totalCommunityPoints + this.cumulativeStreakBonus + this.shareBonus + this.referralBonus + (this.peerChallengeBonus || 0); // Include peerChallengeBonus\n    }\n    toDictionary() {\n        return {\n            baseCompletion: this.baseCompletion,\n            firstCompletion: this.firstCompletion,\n            streakBonus: this.streakBonus,\n            checkInBonus: this.checkInBonus,\n            effortRating: this.effortRating,\n            chatParticipation: this.chatParticipation,\n            locationCheckin: this.locationCheckin,\n            contentEngagement: this.contentEngagement,\n            encouragementSent: this.encouragementSent,\n            encouragementReceived: this.encouragementReceived,\n            cumulativeStreakBonus: this.cumulativeStreakBonus,\n            shareBonus: this.shareBonus,\n            referralBonus: this.referralBonus,\n            peerChallengeBonus: this.peerChallengeBonus || 0,\n            totalStackPoints: this.totalStackPoints,\n            totalCommunityPoints: this.totalCommunityPoints,\n            totalPoints: this.totalPoints\n        };\n    }\n}\nclass Encouragement {\n    constructor(data){\n        // If data is passed as already constructed ShortUser objects\n        if (data.fromUser instanceof _user__WEBPACK_IMPORTED_MODULE_2__.ShortUser && data.toUser instanceof _user__WEBPACK_IMPORTED_MODULE_2__.ShortUser) {\n            this.fromUser = data.fromUser;\n            this.toUser = data.toUser;\n            this.createdAt = data.createdAt instanceof Date ? data.createdAt : new Date();\n        } else {\n            const fromUserData = data.fromUser || {};\n            this.fromUser = new _user__WEBPACK_IMPORTED_MODULE_2__.ShortUser(fromUserData);\n            const toUserData = data.toUser || {};\n            this.toUser = new _user__WEBPACK_IMPORTED_MODULE_2__.ShortUser(toUserData);\n            this.createdAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.convertFirestoreTimestamp)(data.createdAt);\n        }\n    }\n    // Static method to create from separate parameters\n    static create(fromUser, toUser, createdAt) {\n        return new Encouragement({\n            fromUser,\n            toUser,\n            createdAt\n        });\n    }\n    // Convert to dictionary for Firestore\n    toDictionary() {\n        return {\n            fromUser: this.fromUser.toDictionary(),\n            toUser: this.toUser.toDictionary(),\n            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(this.createdAt)\n        };\n    }\n}\n// Types for user in challenge\nclass UserChallenge {\n    constructor(data){\n        this.id = data.id;\n        this.challenge = data.challenge ? new Challenge(data.challenge) : undefined;\n        this.challengeId = data.challengeId || \"\";\n        this.userId = data.userId || \"\";\n        this.fcmToken = data.fcmToken || \"\"; // Added\n        this.username = data.username || \"\";\n        this.profileImage = data.profileImage ? new ProfileImage(data.profileImage) : undefined;\n        this.progress = data.progress ?? 0;\n        this.referralChain = data.referralChain ? new ReferralChain(data.referralChain) : new ReferralChain({\n            originalHostId: \"\",\n            sharedBy: \"\"\n        });\n        this.completedWorkouts = Array.isArray(data.completedWorkouts) ? data.completedWorkouts.map((cw)=>({\n                id: cw.id || \"\",\n                workoutId: cw.workoutId || \"\",\n                completedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.convertFirestoreTimestamp)(cw.completedAt)\n            })).filter((cw)=>cw.workoutId !== \"\") // Filter out those where workoutId ended up empty\n         : [];\n        this.isCompleted = data.isCompleted ?? false;\n        this.uid = data.uid || \"\"; // Added\n        this.location = data.location ? new UserLocation(data.location) : undefined;\n        this.city = data.city || \"\";\n        this.country = data.country || \"\";\n        this.timezone = data.timezone || \"\";\n        this.joinDate = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.convertFirestoreTimestamp)(data.joinDate);\n        this.isCurrentlyActive = data.isCurrentlyActive ?? false; // Added\n        this.createdAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.convertFirestoreTimestamp)(data.createdAt);\n        this.updatedAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.convertFirestoreTimestamp)(data.updatedAt);\n        this.lastActive = data.lastActive ? (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.convertFirestoreTimestamp)(data.lastActive) : null; // Initialize the new property\n        this.pulsePoints = data.pulsePoints ? new PulsePoints(data.pulsePoints) : new PulsePoints({});\n        this.currentStreak = data.currentStreak ?? 0;\n        this.longestStreak = this.calculateLongestStreak(); // Added\n        this.encouragedUsers = Array.isArray(data.encouragedUsers) ? data.encouragedUsers.map((d)=>new Encouragement(d)) : [];\n        this.encouragedByUsers = Array.isArray(data.encouragedByUsers) ? data.encouragedByUsers.map((d)=>new Encouragement(d)) : [];\n        this.checkIns = Array.isArray(data.checkIns) ? data.checkIns.map((d)=>new CheckIn(d)) : [];\n        this.hasReceivedShareBonus = data.hasReceivedShareBonus ?? false;\n        this.ignoreNotifications = Array.isArray(data.ignoreNotifications) ? data.ignoreNotifications : [];\n        this.lastActiveRoundWorkoutId = data.lastActiveRoundWorkoutId || \"\"; // Initialize new property\n    }\n    // Add calculateLongestStreak method\n    calculateLongestStreak() {\n        if (!this.completedWorkouts.length) return 0;\n        let currentStreak = 1;\n        let maxStreak = 1;\n        const sortedWorkouts = [\n            ...this.completedWorkouts\n        ].sort((a, b)=>a.completedAt.getTime() - b.completedAt.getTime());\n        for(let i = 1; i < sortedWorkouts.length; i++){\n            const prevDate = new Date(sortedWorkouts[i - 1].completedAt);\n            const currDate = new Date(sortedWorkouts[i].completedAt);\n            if (this.isNextDay(prevDate, currDate)) {\n                currentStreak++;\n                maxStreak = Math.max(maxStreak, currentStreak);\n            } else if (!this.isSameDay(prevDate, currDate)) {\n                currentStreak = 1;\n            }\n        }\n        return maxStreak;\n    }\n    isNextDay(date1, date2) {\n        const nextDay = new Date(date1);\n        nextDay.setDate(nextDay.getDate() + 1);\n        return this.isSameDay(nextDay, date2);\n    }\n    isSameDay(date1, date2) {\n        return date1.getFullYear() === date2.getFullYear() && date1.getMonth() === date2.getMonth() && date1.getDate() === date2.getDate();\n    }\n    toDictionary() {\n        return {\n            challenge: this.challenge ? this.challenge.toDictionary() : null,\n            challengeId: this.challengeId,\n            userId: this.userId,\n            fcmToken: this.fcmToken,\n            username: this.username,\n            profileImage: this.profileImage ? this.profileImage.toDictionary() : null,\n            progress: this.progress,\n            referralChain: this.referralChain.toDictionary(),\n            completedWorkouts: this.completedWorkouts.map((workout)=>({\n                    ...workout,\n                    completedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(workout.completedAt)\n                })),\n            isCompleted: this.isCompleted,\n            uid: this.uid,\n            location: this.location ? this.location.toDictionary() : null,\n            city: this.city,\n            country: this.country,\n            timezone: this.timezone,\n            joinDate: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(this.joinDate),\n            isCurrentlyActive: this.isCurrentlyActive,\n            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(this.createdAt),\n            updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(this.updatedAt),\n            lastActive: this.lastActive ? (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(this.lastActive) : null,\n            pulsePoints: this.pulsePoints.toDictionary(),\n            currentStreak: this.currentStreak,\n            longestStreak: this.longestStreak,\n            encouragedUsers: this.encouragedUsers.map((user)=>user.toDictionary()),\n            encouragedByUsers: this.encouragedByUsers.map((user)=>user.toDictionary()),\n            checkIns: this.checkIns.map((checkIn)=>checkIn.toDictionary()),\n            hasReceivedShareBonus: this.hasReceivedShareBonus,\n            ignoreNotifications: this.ignoreNotifications,\n            lastActiveRoundWorkoutId: this.lastActiveRoundWorkoutId // Add new property to dictionary\n        };\n    }\n}\nvar ChallengeStatus;\n// Challenge status enum\n(function(ChallengeStatus) {\n    ChallengeStatus[\"Draft\"] = \"draft\";\n    ChallengeStatus[\"Published\"] = \"published\";\n    ChallengeStatus[\"Active\"] = \"active\";\n    ChallengeStatus[\"Completed\"] = \"completed\";\n    ChallengeStatus[\"Cancelled\"] = \"cancelled\";\n})(ChallengeStatus || (ChallengeStatus = {}));\nclass IntroVideo {\n    constructor(data){\n        this.id = data.id;\n        this.userId = data.userId;\n        this.videoUrl = data.videoUrl;\n    }\n    toDictionary() {\n        return {\n            id: this.id,\n            userId: this.userId,\n            videoUrl: this.videoUrl\n        };\n    }\n}\nclass Challenge {\n    constructor(data){\n        this.id = data.id;\n        this.title = data.title;\n        this.subtitle = data.subtitle;\n        this.participants = Array.isArray(data.participants) ? data.participants : [];\n        this.status = data.status || \"draft\";\n        this.introVideos = Array.isArray(data.introVideos) ? data.introVideos.map((videoData)=>new IntroVideo(videoData)) : [];\n        this.privacy = data.privacy || \"together\";\n        this.pin = data.pin;\n        this.startDate = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.convertFirestoreTimestamp)(data.startDate);\n        this.ownerId = data.ownerId;\n        this.endDate = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.convertFirestoreTimestamp)(data.endDate);\n        this.createdAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.convertFirestoreTimestamp)(data.createdAt);\n        this.updatedAt = (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.convertFirestoreTimestamp)(data.updatedAt);\n        this.originalId = data.originalId || data.id;\n        this.joinWindowEnds = data.joinWindowEnds || new Date(this.startDate.getTime() + 48 * 3600 * 1000);\n        this.minParticipants = data.minParticipants || 1;\n        this.maxParticipants = data.maxParticipants || 100;\n        this.allowLateJoins = data.allowLateJoins !== undefined ? data.allowLateJoins : true;\n        this.cohortAuthor = data.cohortAuthor || [];\n        this.pricingInfo = new PricingInfo(data.pricingInfo);\n        // Calculate duration and end status after initializing dates\n        this.durationInDays = this.calculateDurationInDays();\n        this.isChallengeEnded = new Date() > this.endDate;\n        if (this.isChallengeEnded) {\n            this.status = \"completed\";\n        }\n    }\n    toDictionary() {\n        return {\n            id: this.id,\n            title: this.title,\n            subtitle: this.subtitle,\n            participants: this.participants.map((participant)=>({\n                    id: participant.id,\n                    challengeId: participant.challengeId,\n                    userId: participant.userId,\n                    username: participant.username,\n                    profileImage: participant.profileImage,\n                    progress: participant.progress,\n                    completedWorkouts: participant.completedWorkouts,\n                    isCompleted: participant.isCompleted,\n                    location: participant.location,\n                    city: participant.city,\n                    country: participant.country,\n                    timezone: participant.timezone,\n                    joinDate: participant.joinDate,\n                    createdAt: participant.createdAt,\n                    updatedAt: participant.updatedAt,\n                    pulsePoints: participant.pulsePoints,\n                    currentStreak: participant.currentStreak,\n                    encouragedUsers: participant.encouragedUsers,\n                    encouragedByUsers: participant.encouragedByUsers,\n                    checkIns: participant.checkIns\n                })),\n            status: this.status,\n            pin: this.pin ?? null,\n            startDate: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(this.startDate),\n            endDate: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(this.endDate),\n            createdAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(this.createdAt),\n            updatedAt: (0,_utils_formatDate__WEBPACK_IMPORTED_MODULE_1__.dateToUnixTimestamp)(this.updatedAt),\n            durationInDays: this.durationInDays,\n            introVideos: this.introVideos.map((video)=>video.toDictionary()),\n            pricingInfo: this.pricingInfo.toDictionary(),\n            cohortAuthor: this.cohortAuthor,\n            isChallengeEnded: this.isChallengeEnded\n        };\n    }\n    /**\n   * Calculates the duration in days between the startDate and endDate.\n   * @returns The number of days between the two dates.\n   */ calculateDurationInDays() {\n        const start = this.startDate?.valueOf();\n        const end = this.endDate?.valueOf();\n        if (!start || !end || isNaN(start) || isNaN(end)) {\n            throw new Error(\"Invalid startDate or endDate\");\n        }\n        const durationInMilliseconds = end - start;\n        return Math.ceil(durationInMilliseconds / (1000 * 60 * 60 * 24));\n    }\n    static toFirestoreObject(obj) {\n        if (obj === null || typeof obj !== \"object\") {\n            return obj;\n        }\n        if (obj instanceof Date) {\n            return obj;\n        }\n        if (Array.isArray(obj)) {\n            return obj.map((item)=>this.toFirestoreObject(item));\n        }\n        if (obj instanceof Challenge) {\n            return {\n                id: obj.id,\n                title: obj.title,\n                subtitle: obj.subtitle,\n                participants: obj.participants,\n                status: obj.status,\n                startDate: obj.startDate,\n                endDate: obj.endDate,\n                createdAt: obj.createdAt,\n                updatedAt: obj.updatedAt,\n                introVideos: obj.introVideos.map((video)=>({\n                        id: video.id,\n                        userId: video.userId,\n                        videoUrl: video.videoUrl\n                    })),\n                pricingInfo: obj.pricingInfo.toDictionary(),\n                cohortAuthor: obj.cohortAuthor,\n                durationInDays: obj.durationInDays,\n                isChallengeEnded: obj.isChallengeEnded\n            };\n        }\n        const plainObject = {};\n        for(const key in obj){\n            if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                plainObject[key] = this.toFirestoreObject(obj[key]);\n            }\n        }\n        return plainObject;\n    }\n}\n\nclass PricingInfo {\n    constructor(data = {}){\n        this.isEnabled = data.isEnabled ?? false;\n        this.amount = data.amount ?? 0.0;\n        this.currency = data.currency ?? \"USD\";\n    }\n    toDictionary() {\n        return {\n            isEnabled: this.isEnabled,\n            amount: this.amount,\n            currency: this.currency\n        };\n    }\n    static fromDictionary(dict) {\n        return new PricingInfo(dict || {});\n    }\n}\n // ----------------------------------------------------------------------\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TytSLFNBQVMsQ0FBQ0MsY0FBYyxDQUFDQyxJQUFJLENBQUNKLEtBQUsvUixNQUFNO2dCQUNsRGdTLFdBQVcsQ0FBQ2hTLElBQUksR0FBRyxJQUFJLENBQUM4UixpQkFBaUIsQ0FBQ0MsR0FBRyxDQUFDL1IsSUFBSTtZQUNwRDtRQUNGO1FBQ0EsT0FBT2dTO0lBQ1Q7QUFDRjtBQWlCcUQ7QUFFOUMsTUFBTWI7SUFLWDNRLFlBQVlDLE9BQVksQ0FBQyxDQUFDLENBQUU7UUFDMUIsSUFBSSxDQUFDMlIsU0FBUyxHQUFHM1IsS0FBSzJSLFNBQVMsSUFBSTtRQUNuQyxJQUFJLENBQUNDLE1BQU0sR0FBRzVSLEtBQUs0UixNQUFNLElBQUk7UUFDN0IsSUFBSSxDQUFDQyxRQUFRLEdBQUc3UixLQUFLNlIsUUFBUSxJQUFJO0lBQ25DO0lBRUFyUixlQUFvQjtRQUNsQixPQUFPO1lBQ0xtUixXQUFXLElBQUksQ0FBQ0EsU0FBUztZQUN6QkMsUUFBUSxJQUFJLENBQUNBLE1BQU07WUFDbkJDLFVBQVUsSUFBSSxDQUFDQSxRQUFRO1FBQ3pCO0lBQ0Y7SUFFQSxPQUFPQyxlQUFlMUssSUFBUyxFQUFlO1FBQzVDLE9BQU8sSUFBSXNKLFlBQVl0SixRQUFRLENBQUM7SUFDbEM7QUFDRjtDQTBEQSx5RUFBeUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1hcHAvLi9zcmMvYXBpL2ZpcmViYXNlL3dvcmtvdXQvdHlwZXMudHM/YmQyNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFeGVyY2lzZSwgRXhlcmNpc2VSZWZlcmVuY2UsIEV4ZXJjaXNlTG9nLCBFeGVyY2lzZUF1dGhvciwgQm9keVBhcnQgfSBmcm9tICcuLi9leGVyY2lzZS90eXBlcyc7XG5pbXBvcnQgeyBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wLCBkYXRlVG9Vbml4VGltZXN0YW1wIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvZm9ybWF0RGF0ZSc7XG5pbXBvcnQgeyB3b3Jrb3V0U2VydmljZSB9IGZyb20gJy4uL3dvcmtvdXQvc2VydmljZSc7XG5pbXBvcnQgeyBTaG9ydFVzZXIsIFVzZXIgfSBmcm9tICcuLi91c2VyJztcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHNhZmVseSBjb252ZXJ0IHN0cmluZyB0byBCb2R5UGFydCBlbnVtXG5mdW5jdGlvbiBzdHJpbmdUb0JvZHlQYXJ0KGJvZHlQYXJ0U3RyaW5nOiBzdHJpbmcpOiBCb2R5UGFydCB7XG4gIC8vIE1hcCB0aGUgc3RyaW5nIHZhbHVlIHRvIGFuIGVudW0gdmFsdWUsIGNhc2UgaW5zZW5zaXRpdmVcbiAgY29uc3Qgbm9ybWFsaXplZFN0cmluZyA9IGJvZHlQYXJ0U3RyaW5nLnRvTG93ZXJDYXNlKCk7XG4gIFxuICAvLyBDaGVjayBpZiB0aGUgc3RyaW5nIG1hdGNoZXMgYW55IGVudW0gdmFsdWVcbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQm9keVBhcnQpKSB7XG4gICAgaWYgKHZhbHVlLnRvTG93ZXJDYXNlKCkgPT09IG5vcm1hbGl6ZWRTdHJpbmcpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIERlZmF1bHQgZmFsbGJhY2tcbiAgY29uc29sZS53YXJuKGBVbmtub3duIGJvZHkgcGFydDogXCIke2JvZHlQYXJ0U3RyaW5nfVwiLCBkZWZhdWx0aW5nIHRvIEZ1bGxib2R5YCk7XG4gIHJldHVybiBCb2R5UGFydC5GdWxsYm9keTtcbn1cblxuZXhwb3J0IGNsYXNzIENoZWNrSW4ge1xuICBpZDogc3RyaW5nO1xuICB1c2VySWQ6IHN0cmluZztcbiAgd29ya291dElkOiBzdHJpbmc7XG4gIHBob3RvVXJsOiBzdHJpbmc7XG4gIHZpZGVvVXJsOiBzdHJpbmc7XG4gIGNyZWF0ZWRBdDogRGF0ZTtcblxuICBjb25zdHJ1Y3RvcihkYXRhOiBhbnkpIHtcbiAgICB0aGlzLmlkID0gZGF0YS5pZCB8fCAnJztcbiAgICB0aGlzLnVzZXJJZCA9IGRhdGEudXNlcklkIHx8ICcnO1xuICAgIHRoaXMud29ya291dElkID0gZGF0YS53b3Jrb3V0SWQgfHwgJyc7XG4gICAgdGhpcy5waG90b1VybCA9IGRhdGEucGhvdG9VcmwgfHwgJyc7XG4gICAgdGhpcy52aWRlb1VybCA9IGRhdGEudmlkZW9VcmwgfHwgJyc7XG4gICAgLy8gSWYgY3JlYXRlZEF0IGlzIGEgVW5peCB0aW1lc3RhbXAgaW4gc2Vjb25kcywgY29udmVydCBpdCB0byBhIERhdGVcbiAgICB0aGlzLmNyZWF0ZWRBdCA9IGRhdGEuY3JlYXRlZEF0XG4gICAgICA/ICh0eXBlb2YgZGF0YS5jcmVhdGVkQXQgPT09ICdudW1iZXInXG4gICAgICAgICAgPyBuZXcgRGF0ZShkYXRhLmNyZWF0ZWRBdCAqIDEwMDApXG4gICAgICAgICAgOiBuZXcgRGF0ZShkYXRhLmNyZWF0ZWRBdCkpXG4gICAgICA6IG5ldyBEYXRlKCk7XG4gIH1cblxuICB0b0RpY3Rpb25hcnkoKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgdXNlcklkOiB0aGlzLnVzZXJJZCxcbiAgICAgIHdvcmtvdXRJZDogdGhpcy53b3Jrb3V0SWQsXG4gICAgICBwaG90b1VybDogdGhpcy5waG90b1VybCxcbiAgICAgIHZpZGVvVXJsOiB0aGlzLnZpZGVvVXJsLFxuICAgICAgY3JlYXRlZEF0OiBkYXRlVG9Vbml4VGltZXN0YW1wKHRoaXMuY3JlYXRlZEF0KVxuICAgIH07XG4gIH1cbn1cblxuLy8gc3JjL3R5cGVzL1dvcmtvdXRUeXBlcy50c1xuZXhwb3J0IGVudW0gV29ya291dFN0YXR1cyB7XG4gIFF1ZXVlZFVwID0gJ3F1ZXVlZFVwJyxcbiAgSW5Qcm9ncmVzcyA9ICdpblByb2dyZXNzJyxcbiAgQ29tcGxldGUgPSAnY29tcGxldGUnLFxuICBBcmNoaXZlZCA9ICdhcmNoaXZlZCdcbn1cblxuZXhwb3J0IGVudW0gV29ya291dFR5cGUge1xuICBVcHBlckJvZHkgPSAnVXBwZXIgQm9keScsXG4gIExvd2VyQm9keSA9ICdMb3dlciBCb2R5JyxcbiAgQ29yZSA9ICdDb3JlJyxcbiAgRnVsbEJvZHkgPSAnRnVsbCBCb2R5J1xufVxuXG4vLyBzcmMvdHlwZXMvV29ya291dFR5cGVzLnRzXG5leHBvcnQgZW51bSBXb3Jrb3V0UmF0aW5nIHtcbiAgVG9vSGFyZCA9ICdUb28gSGFyZCcsXG4gIFRvb0Vhc3kgPSAnVG9vIEVhc3knLFxuICBKdXN0UmlnaHQgPSAnSnVzdCBSaWdodCdcbn1cblxuXG5leHBvcnQgZW51bSBCb2R5Wm9uZSB7XG4gIExvd2VyQm9keSA9IFwiTG93ZXIgQm9keVwiLFxuICBVcHBlckJvZHkgPSBcIlVwcGVyIEJvZHlcIixcbiAgRnVsbEJvZHkgPSBcIkZ1bGwgQm9keVwiLFxuICBDb3JlID0gXCJDb3JlXCJcblxufVxuICBcbmV4cG9ydCBjbGFzcyBSZXBzQW5kV2VpZ2h0TG9nIHtcbiAgcmVwczogbnVtYmVyO1xuICB3ZWlnaHQ6IG51bWJlcjtcbiAgbGVmdFJlcHM6IG51bWJlcjtcbiAgbGVmdFdlaWdodDogbnVtYmVyO1xuICBpc1NwbGl0OiBib29sZWFuO1xuICBpc0JvZHlXZWlnaHQ6IGJvb2xlYW47XG4gIGR1cmF0aW9uOiBudW1iZXI7XG4gIGNhbG9yaWVzOiBudW1iZXI7XG4gIGJwbTogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGRhdGE6IGFueSkge1xuICAgIHRoaXMucmVwcyA9IGRhdGEucmVwcyB8fCAwO1xuICAgIHRoaXMud2VpZ2h0ID0gZGF0YS53ZWlnaHQgfHwgMDtcbiAgICB0aGlzLmxlZnRSZXBzID0gZGF0YS5sZWZ0UmVwcyB8fCAwO1xuICAgIHRoaXMubGVmdFdlaWdodCA9IGRhdGEubGVmdFdlaWdodCB8fCAwO1xuICAgIHRoaXMuaXNTcGxpdCA9IGRhdGEuaXNTcGxpdCB8fCBmYWxzZTtcbiAgICB0aGlzLmlzQm9keVdlaWdodCA9IGRhdGEuaXNCb2R5V2VpZ2h0IHx8IGZhbHNlO1xuICAgIHRoaXMuZHVyYXRpb24gPSBkYXRhLmR1cmF0aW9uIHx8IDA7XG4gICAgdGhpcy5jYWxvcmllcyA9IGRhdGEuY2Fsb3JpZXMgfHwgMDtcbiAgICB0aGlzLmJwbSA9IGRhdGEuYnBtIHx8IDA7XG4gIH1cblxuICB0b0RpY3Rpb25hcnkoKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlcHM6IHRoaXMucmVwcyxcbiAgICAgIHdlaWdodDogdGhpcy53ZWlnaHQsXG4gICAgICBsZWZ0UmVwczogdGhpcy5sZWZ0UmVwcyxcbiAgICAgIGxlZnRXZWlnaHQ6IHRoaXMubGVmdFdlaWdodCxcbiAgICAgIGlzU3BsaXQ6IHRoaXMuaXNTcGxpdCxcbiAgICAgIGlzQm9keVdlaWdodDogdGhpcy5pc0JvZHlXZWlnaHQsXG4gICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbixcbiAgICAgIGNhbG9yaWVzOiB0aGlzLmNhbG9yaWVzLFxuICAgICAgYnBtOiB0aGlzLmJwbVxuICAgIH07XG4gIH1cbn1cblxuLy8gV29ya291dCBURU1QTEFURSBDbGFzcyAoUmVmYWN0b3JlZClcbmV4cG9ydCBjbGFzcyBXb3Jrb3V0IHtcbiAgaWQ6IHN0cmluZzsgLy8gVGVtcGxhdGUgSURcbiAgY29sbGVjdGlvbklkPzogc3RyaW5nW10gfCBudWxsOyAvLyBXaGljaCBjb2xsZWN0aW9ucy9yb3VuZHMgdGhpcyB0ZW1wbGF0ZSBjYW4gYmUgcGFydCBvZlxuICBleGVyY2lzZXM6IEV4ZXJjaXNlUmVmZXJlbmNlW107XG4gIGxvZ3M/OiBFeGVyY2lzZUxvZ1tdIHwgbnVsbDtcbiAgdGl0bGU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgZHVyYXRpb246IG51bWJlcjsgLy8gRXN0aW1hdGVkIGR1cmF0aW9uIG9mIHRoZSB0ZW1wbGF0ZVxuICB3b3Jrb3V0UmF0aW5nPzogV29ya291dFJhdGluZyB8IG51bGw7IC8vIERlZmF1bHQgcmF0aW5nL2RpZmZpY3VsdHkgb2YgdGhlIHRlbXBsYXRlXG4gIHVzZUF1dGhvckNvbnRlbnQ6IGJvb2xlYW47XG4gIG9yZGVyPzogbnVtYmVyIHwgbnVsbDsgLy8gT3JkZXIgd2l0aGluIGEgY29sbGVjdGlvbiBpZiBwYXJ0IG9mIGEgc2VxdWVuY2VcbiAgYXV0aG9yOiBzdHJpbmc7IC8vIEF1dGhvciBvZiB0aGUgdGVtcGxhdGUgKHVzZXJJZClcbiAgYXNzaWduZWREYXRlPzogRGF0ZSB8IG51bGw7IFxuICBjcmVhdGVkQXQ6IERhdGU7IC8vIFRlbXBsYXRlIGNyZWF0aW9uIGRhdGVcbiAgdXBkYXRlZEF0OiBEYXRlOyAvLyBUZW1wbGF0ZSBsYXN0IHVwZGF0ZSBkYXRlXG4gIHpvbmU6IEJvZHlab25lO1xuICBlc3RpbWF0ZWREdXJhdGlvbjogbnVtYmVyO1xuXG4gIC8vIFByb3BlcnRpZXMgZnJvbSBXb3Jrb3V0U2Vzc2lvbiBtZXJnZWQgYmFja1xuICB3b3Jrb3V0VGVtcGxhdGVJZD86IHN0cmluZzsgXG4gIGNoYWxsZW5nZUlkPzogc3RyaW5nIHwgbnVsbDsgXG4gIHJvdW5kV29ya291dElkPzogc3RyaW5nOyBcbiAgd29ya291dFN0YXR1cz86IFdvcmtvdXRTdGF0dXM7IFxuICBzdGFydFRpbWU/OiBEYXRlIHwgbnVsbDsgXG4gIGVuZFRpbWU/OiBEYXRlIHwgbnVsbDsgXG4gIGlzQ29tcGxldGVkPzogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3RvcihkYXRhOiBhbnkpIHtcbiAgICB0aGlzLmlkID0gZGF0YS5pZCB8fCAnJztcbiAgICB0aGlzLmNvbGxlY3Rpb25JZCA9IGRhdGEuY29sbGVjdGlvbklkIHx8IG51bGw7XG4gICAgdGhpcy50aXRsZSA9IGRhdGEudGl0bGUgfHwgJyc7XG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRhdGEuZGVzY3JpcHRpb24gfHwgJyc7XG4gICAgdGhpcy5kdXJhdGlvbiA9IGRhdGEuZHVyYXRpb24gfHwgMDtcbiAgICB0aGlzLnVzZUF1dGhvckNvbnRlbnQgPSBkYXRhLnVzZUF1dGhvckNvbnRlbnQgfHwgZmFsc2U7XG4gICAgdGhpcy53b3Jrb3V0UmF0aW5nID0gZGF0YS53b3Jrb3V0UmF0aW5nIHx8IG51bGw7XG4gICAgXG4gICAgdGhpcy5leGVyY2lzZXMgPSBBcnJheS5pc0FycmF5KGRhdGEuZXhlcmNpc2VzKVxuICAgICAgPyBkYXRhLmV4ZXJjaXNlcy5tYXAoKGV4UmVmRGF0YTogYW55KSA9PiB7XG4gICAgICAgICAgaWYgKGV4UmVmRGF0YSAmJiBleFJlZkRhdGEuZXhlcmNpc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRXhlcmNpc2VSZWZlcmVuY2Uoe1xuICAgICAgICAgICAgICBleGVyY2lzZTogbmV3IEV4ZXJjaXNlKGV4UmVmRGF0YS5leGVyY2lzZSksXG4gICAgICAgICAgICAgIGdyb3VwSWQ6IGV4UmVmRGF0YS5ncm91cElkLFxuICAgICAgICAgICAgICBpc0NvbXBsZXRlZDogZXhSZWZEYXRhLmlzQ29tcGxldGVkIHx8IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBudWxsOyBcbiAgICAgICAgfSkuZmlsdGVyKChyZWY6IEV4ZXJjaXNlUmVmZXJlbmNlIHwgbnVsbCk6IHJlZiBpcyBFeGVyY2lzZVJlZmVyZW5jZSA9PiByZWYgIT09IG51bGwpXG4gICAgICA6IFtdO1xuICAgIHRoaXMubG9ncyA9IEFycmF5LmlzQXJyYXkoZGF0YT8ubG9ncylcbiAgICAgID8gZGF0YS5sb2dzLm1hcCgobG9nOiBhbnkpID0+IHtcbiAgICAgICAgICBpZiAoIWxvZz8uZXhlcmNpc2UgfHwgIUFycmF5LmlzQXJyYXkobG9nPy5zZXRzKSkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgcmV0dXJuIG5ldyBFeGVyY2lzZUxvZyh7XG4gICAgICAgICAgICBleGVyY2lzZTogbmV3IEV4ZXJjaXNlKGxvZy5leGVyY2lzZSksXG4gICAgICAgICAgICBzZXRzOiBsb2cuc2V0cy5tYXAoKHNldDogYW55KSA9PiBuZXcgUmVwc0FuZFdlaWdodExvZyhzZXQpKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KS5maWx0ZXIoQm9vbGVhbilcbiAgICAgIDogW107XG5cbiAgICB0aGlzLm9yZGVyID0gZGF0YS5vcmRlciAhPT0gdW5kZWZpbmVkID8gZGF0YS5vcmRlciA6IG51bGw7XG4gICAgdGhpcy5hdXRob3IgPSB0eXBlb2YgZGF0YS5hdXRob3IgPT09ICdzdHJpbmcnID8gZGF0YS5hdXRob3IgOiAoZGF0YS5hdXRob3I/LnVzZXJJZCB8fCAnJyk7XG4gICAgdGhpcy5hc3NpZ25lZERhdGUgPSBkYXRhLmFzc2lnbmVkRGF0ZSA/IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5hc3NpZ25lZERhdGUpIDogbnVsbDtcbiAgICB0aGlzLmNyZWF0ZWRBdCA9IGRhdGEuY3JlYXRlZEF0ID8gY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNyZWF0ZWRBdCkgOiBuZXcgRGF0ZSgpO1xuICAgIHRoaXMudXBkYXRlZEF0ID0gZGF0YS51cGRhdGVkQXQgPyBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEudXBkYXRlZEF0KSA6IG5ldyBEYXRlKCk7XG4gICAgXG4gICAgdGhpcy56b25lID0gZGF0YS56b25lIHx8IFdvcmtvdXQuZGV0ZXJtaW5lV29ya291dFpvbmUodGhpcy5leGVyY2lzZXMpIHx8IEJvZHlab25lLkZ1bGxCb2R5O1xuICAgIHRoaXMuZXN0aW1hdGVkRHVyYXRpb24gPSBkYXRhLmVzdGltYXRlZER1cmF0aW9uIHx8IFdvcmtvdXQuZXN0aW1hdGVkRHVyYXRpb24odGhpcy5leGVyY2lzZXMpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBtZXJnZWQgcHJvcGVydGllc1xuICAgIHRoaXMud29ya291dFRlbXBsYXRlSWQgPSBkYXRhLndvcmtvdXRUZW1wbGF0ZUlkO1xuICAgIHRoaXMuY2hhbGxlbmdlSWQgPSBkYXRhLmNoYWxsZW5nZUlkICE9PSB1bmRlZmluZWQgPyBkYXRhLmNoYWxsZW5nZUlkIDogbnVsbDtcbiAgICB0aGlzLnJvdW5kV29ya291dElkID0gZGF0YS5yb3VuZFdvcmtvdXRJZDtcbiAgICB0aGlzLndvcmtvdXRTdGF0dXMgPSBkYXRhLndvcmtvdXRTdGF0dXM7XG4gICAgdGhpcy5zdGFydFRpbWUgPSBkYXRhLnN0YXJ0VGltZSA/IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5zdGFydFRpbWUpIDogbnVsbDtcbiAgICB0aGlzLmVuZFRpbWUgPSBkYXRhLmVuZFRpbWUgPyBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuZW5kVGltZSkgOiBudWxsO1xuICAgIHRoaXMuaXNDb21wbGV0ZWQgPSBkYXRhLmlzQ29tcGxldGVkIHx8IGZhbHNlO1xuICB9XG5cbiAgLy8gU3RhdGljIG1ldGhvZHMgbGlrZSBlc3RpbWF0ZWREdXJhdGlvbiBhbmQgZGV0ZXJtaW5lV29ya291dFpvbmUgcmVtYWluIGxhcmdlbHkgdGhlIHNhbWUsXG4gIC8vIGJ1dCB3b3VsZCBvcGVyYXRlIG9uIEV4ZXJjaXNlUmVmZXJlbmNlW10gZnJvbSB0aGUgdGVtcGxhdGUuXG4gIHN0YXRpYyBlc3RpbWF0ZWREdXJhdGlvbihleGVyY2lzZXM6IEV4ZXJjaXNlUmVmZXJlbmNlW10pOiBudW1iZXIge1xuICAgIGxldCB0b3RhbFRpbWVTZWNvbmRzID0gMDtcbiAgICBsZXQgcmVzdFRpbWVTZWNvbmRzID0gMDtcbiAgICBsZXQgaGFzU2NyZWVuVGltZUV4ZXJjaXNlcyA9IGZhbHNlO1xuXG4gICAgZm9yIChjb25zdCBleGVyY2lzZVJlZiBvZiBleGVyY2lzZXMpIHtcbiAgICAgIGNvbnN0IGV4ZXJjaXNlID0gZXhlcmNpc2VSZWYuZXhlcmNpc2U7XG4gICAgICBjb25zdCBjYXRlZ29yeURldGFpbHMgPSBleGVyY2lzZT8uY2F0ZWdvcnk/LmRldGFpbHM7XG4gICAgICBjb25zdCBzY3JlZW5UaW1lID0gY2F0ZWdvcnlEZXRhaWxzPy5zY3JlZW5UaW1lO1xuXG4gICAgICBpZiAoc2NyZWVuVGltZSAmJiBzY3JlZW5UaW1lID4gMCkge1xuICAgICAgICB0b3RhbFRpbWVTZWNvbmRzICs9IHNjcmVlblRpbWU7XG4gICAgICAgIGhhc1NjcmVlblRpbWVFeGVyY2lzZXMgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChleGVyY2lzZT8uY2F0ZWdvcnk/LnR5cGUgPT09ICdjYXJkaW8nKSB7XG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gKGNhdGVnb3J5RGV0YWlscyBhcyBhbnkpPy5kdXJhdGlvbiB8fCAwOyAvLyBDYXN0IGZvciBjYXJkaW8gZGV0YWlsc1xuICAgICAgICB0b3RhbFRpbWVTZWNvbmRzICs9IGR1cmF0aW9uICogNjA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBEZWZhdWx0IGZvciB3ZWlnaHQgdHJhaW5pbmcgd2l0aG91dCBzcGVjaWZpYyBzY3JlZW4gdGltZVxuICAgICAgICBjb25zdCBzZXRzID0gKGNhdGVnb3J5RGV0YWlscyBhcyBhbnkpPy5zZXRzIHx8IDM7IC8vIERlZmF1bHQgc2V0c1xuICAgICAgICB0b3RhbFRpbWVTZWNvbmRzICs9IHNldHMgKiAoNDUgKyA2MCk7IC8vIDQ1cyBwZXIgc2V0ICsgNjBzIHJlc3RcbiAgICAgICAgcmVzdFRpbWVTZWNvbmRzICs9IHNldHMgKiA2MDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWhhc1NjcmVlblRpbWVFeGVyY2lzZXMgJiYgZXhlcmNpc2VzLmxlbmd0aCA+IDApIHsgLy8gQWRkIHdhcm11cC9jb29sZG93biBpZiBub3QgcHVyZWx5IHRpbWVkIGFuZCBoYXMgZXhlcmNpc2VzXG4gICAgICB0b3RhbFRpbWVTZWNvbmRzICs9IDEwICogNjA7IC8vIDEwIG1pbnV0ZXMgd2FybXVwL2Nvb2xkb3duXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHRvdGFsU2Vjb25kcyA9IHRvdGFsVGltZVNlY29uZHM7IC8vIFNpbXBsaWZpZWQsIHJlc3QgdGltZSBhbHJlYWR5IGluY29ycG9yYXRlZCBhYm92ZSBmb3Igbm9uLXNjcmVlbnRpbWVcblxuICAgIGlmIChoYXNTY3JlZW5UaW1lRXhlcmNpc2VzKSB7XG4gICAgICBjb25zdCBtaW51dGVzID0gdG90YWxTZWNvbmRzIC8gNjA7XG4gICAgICByZXR1cm4gTWF0aC5jZWlsKG1pbnV0ZXMgKiAxMCkgLyAxMDsgXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHRvdGFsTWludXRlcyA9IE1hdGgucm91bmQodG90YWxTZWNvbmRzIC8gNjApO1xuICAgIHJldHVybiBNYXRoLnJvdW5kKHRvdGFsTWludXRlcyAvIDUpICogNTtcbiAgfVxuXG4gIHN0YXRpYyBkZXRlcm1pbmVXb3Jrb3V0Wm9uZShleGVyY2lzZXM6IEV4ZXJjaXNlUmVmZXJlbmNlW10pOiBCb2R5Wm9uZSB7XG4gICAgY29uc3QgYm9keVBhcnRzSW52b2x2ZWQgPSBuZXcgU2V0PEJvZHlQYXJ0PigpO1xuXG4gICAgZm9yIChjb25zdCBleGVyY2lzZVJlZiBvZiBleGVyY2lzZXMpIHtcbiAgICAgIC8vIEVuc3VyZSBleGVyY2lzZSBhbmQgcHJpbWFyeUJvZHlQYXJ0cyBleGlzdFxuICAgICAgaWYgKGV4ZXJjaXNlUmVmPy5leGVyY2lzZT8ucHJpbWFyeUJvZHlQYXJ0cykge1xuICAgICAgICBmb3IgKGNvbnN0IGJvZHlQYXJ0U3RyIG9mIGV4ZXJjaXNlUmVmLmV4ZXJjaXNlLnByaW1hcnlCb2R5UGFydHMpIHtcbiAgICAgICAgICAgaWYoYm9keVBhcnRTdHIpIGJvZHlQYXJ0c0ludm9sdmVkLmFkZChzdHJpbmdUb0JvZHlQYXJ0KGJvZHlQYXJ0U3RyKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB1cHBlckJvZHlQYXJ0cyA9IG5ldyBTZXQoW0JvZHlQYXJ0LkNoZXN0LCBCb2R5UGFydC5TaG91bGRlcnMsIEJvZHlQYXJ0LkJpY2VwcywgQm9keVBhcnQuVHJpY2VwcywgQm9keVBhcnQuVHJhcHMsIEJvZHlQYXJ0LkxhdHMsIEJvZHlQYXJ0LkZvcmVhcm1zLCBCb2R5UGFydC5CYWNrLCBCb2R5UGFydC5EZWx0b2lkcywgQm9keVBhcnQuUmhvbWJvaWRzXSk7XG4gICAgY29uc3QgbG93ZXJCb2R5UGFydHMgPSBuZXcgU2V0KFtCb2R5UGFydC5IYW1zdHJpbmdzLCBCb2R5UGFydC5HbHV0ZXMsIEJvZHlQYXJ0LlF1YWRyaWNlcHMsIEJvZHlQYXJ0LkNhbHZlc10pO1xuICAgIGNvbnN0IGNvcmVQYXJ0cyA9IG5ldyBTZXQoW0JvZHlQYXJ0LkFicywgQm9keVBhcnQuTG93ZXJiYWNrXSk7XG5cbiAgICBjb25zdCBoYXNDb21tb25FbGVtZW50cyA9IChzZXQxOiBTZXQ8Qm9keVBhcnQ+LCBzZXQyOiBTZXQ8Qm9keVBhcnQ+KTogYm9vbGVhbiA9PiB7XG4gICAgICByZXR1cm4gQXJyYXkuZnJvbShzZXQxKS5zb21lKChpdGVtKSA9PiBzZXQyLmhhcyhpdGVtKSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGhhc1VwcGVyQm9keSA9IGhhc0NvbW1vbkVsZW1lbnRzKGJvZHlQYXJ0c0ludm9sdmVkLCB1cHBlckJvZHlQYXJ0cyk7XG4gICAgY29uc3QgaGFzTG93ZXJCb2R5ID0gaGFzQ29tbW9uRWxlbWVudHMoYm9keVBhcnRzSW52b2x2ZWQsIGxvd2VyQm9keVBhcnRzKTtcbiAgICBjb25zdCBoYXNDb3JlID0gaGFzQ29tbW9uRWxlbWVudHMoYm9keVBhcnRzSW52b2x2ZWQsIGNvcmVQYXJ0cyk7XG5cbiAgICBpZiAoKGhhc1VwcGVyQm9keSAmJiBoYXNMb3dlckJvZHkgJiYgaGFzQ29yZSkgfHwgKGhhc1VwcGVyQm9keSAmJiBoYXNMb3dlckJvZHkpKSB7XG4gICAgICByZXR1cm4gQm9keVpvbmUuRnVsbEJvZHk7XG4gICAgfSBlbHNlIGlmIChoYXNVcHBlckJvZHkgJiYgaGFzQ29yZSB8fCBoYXNVcHBlckJvZHkpIHtcbiAgICAgIHJldHVybiBCb2R5Wm9uZS5VcHBlckJvZHk7XG4gICAgfSBlbHNlIGlmIChoYXNMb3dlckJvZHkgJiYgaGFzQ29yZSB8fCBoYXNMb3dlckJvZHkpIHtcbiAgICAgIHJldHVybiBCb2R5Wm9uZS5Mb3dlckJvZHk7XG4gICAgfSBlbHNlIGlmIChoYXNDb3JlKSB7XG4gICAgICByZXR1cm4gQm9keVpvbmUuQ29yZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIEJvZHlab25lLkZ1bGxCb2R5OyAvLyBEZWZhdWx0IGlmIG5vIHNwZWNpZmljIHpvbmUgaWRlbnRpZmllZFxuICAgIH1cbiAgfVxuICBcbiAgZ2V0IGlzVGltZWRXb3Jrb3V0KCk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5leGVyY2lzZXMpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdGhpcy5leGVyY2lzZXMuc29tZShleFJlZiA9PiB7XG4gICAgICBjb25zdCBkZXRhaWxzID0gZXhSZWYuZXhlcmNpc2U/LmNhdGVnb3J5Py5kZXRhaWxzO1xuICAgICAgaWYgKGRldGFpbHMgJiYgJ3NjcmVlblRpbWUnIGluIGRldGFpbHMpIHtcbiAgICAgICAgcmV0dXJuIChkZXRhaWxzIGFzIGFueSkuc2NyZWVuVGltZSA+IDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gIH1cblxuICBmZXRjaFByaW1hcnlCb2R5UGFydHMoKTogQm9keVBhcnRbXSB7XG4gICAgaWYgKCF0aGlzLmV4ZXJjaXNlcykgcmV0dXJuIFtdO1xuICAgIHJldHVybiB0aGlzLmV4ZXJjaXNlcy5mbGF0TWFwKGV4ZXJjaXNlUmVmID0+IFxuICAgICAgZXhlcmNpc2VSZWYuZXhlcmNpc2U/LnByaW1hcnlCb2R5UGFydHM/Lm1hcChwYXJ0ID0+IHN0cmluZ1RvQm9keVBhcnQocGFydCBhcyBzdHJpbmcpKSB8fCBbXVxuICAgICkuZmlsdGVyKGJwID0+IGJwICE9PSB1bmRlZmluZWQpOyAvLyBGaWx0ZXIgb3V0IHVuZGVmaW5lZCBpZiBzdHJpbmdUb0JvZHlQYXJ0IGRlZmF1bHRzXG4gIH1cblxuICBmZXRjaFNlY29uZGFyeUJvZHlQYXJ0cygpOiBCb2R5UGFydFtdIHtcbiAgICBpZiAoIXRoaXMuZXhlcmNpc2VzKSByZXR1cm4gW107XG4gICAgcmV0dXJuIHRoaXMuZXhlcmNpc2VzLmZsYXRNYXAoZXhlcmNpc2VSZWYgPT4gXG4gICAgICBleGVyY2lzZVJlZi5leGVyY2lzZT8uc2Vjb25kYXJ5Qm9keVBhcnRzPy5tYXAocGFydCA9PiBzdHJpbmdUb0JvZHlQYXJ0KHBhcnQgYXMgc3RyaW5nKSkgfHwgW11cbiAgICApLmZpbHRlcihicCA9PiBicCAhPT0gdW5kZWZpbmVkKTtcbiAgfVxuXG4gIHRvRGljdGlvbmFyeSgpOiB7IFtrZXk6IHN0cmluZ106IGFueSB9IHtcbiAgICBjb25zdCBkaWN0OiB7IFtrZXk6IHN0cmluZ106IGFueSB9ID0ge1xuICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICBleGVyY2lzZXM6IHRoaXMuZXhlcmNpc2VzLm1hcChleFJlZiA9PiBleFJlZi50b0RpY3Rpb25hcnkoKSksXG4gICAgICB0aXRsZTogdGhpcy50aXRsZSxcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLFxuICAgICAgZHVyYXRpb246IHRoaXMuZHVyYXRpb24sXG4gICAgICB1c2VBdXRob3JDb250ZW50OiB0aGlzLnVzZUF1dGhvckNvbnRlbnQsXG4gICAgICBhdXRob3I6IHRoaXMuYXV0aG9yLFxuICAgICAgem9uZTogdGhpcy56b25lLFxuICAgICAgZXN0aW1hdGVkRHVyYXRpb246IHRoaXMuZXN0aW1hdGVkRHVyYXRpb24sXG4gICAgICBjcmVhdGVkQXQ6IGRhdGVUb1VuaXhUaW1lc3RhbXAodGhpcy5jcmVhdGVkQXQpLFxuICAgICAgdXBkYXRlZEF0OiBkYXRlVG9Vbml4VGltZXN0YW1wKHRoaXMudXBkYXRlZEF0KSxcbiAgICAgIGlzQ29tcGxldGVkOiB0aGlzLmlzQ29tcGxldGVkLCAvLyBNZXJnZWQgcHJvcGVydHlcbiAgICB9O1xuICAgIGlmICh0aGlzLmNvbGxlY3Rpb25JZCAmJiB0aGlzLmNvbGxlY3Rpb25JZC5sZW5ndGggPiAwKSBkaWN0LmNvbGxlY3Rpb25JZCA9IHRoaXMuY29sbGVjdGlvbklkO1xuICAgIGlmICh0aGlzLndvcmtvdXRSYXRpbmcpIGRpY3Qud29ya291dFJhdGluZyA9IHRoaXMud29ya291dFJhdGluZztcbiAgICBpZiAodGhpcy5vcmRlciAhPT0gbnVsbCAmJiB0aGlzLm9yZGVyICE9PSB1bmRlZmluZWQpIGRpY3Qub3JkZXIgPSB0aGlzLm9yZGVyO1xuICAgIGlmICh0aGlzLmFzc2lnbmVkRGF0ZSkgZGljdC5hc3NpZ25lZERhdGUgPSBkYXRlVG9Vbml4VGltZXN0YW1wKHRoaXMuYXNzaWduZWREYXRlKTtcblxuICAgIC8vIEFkZCBtZXJnZWQgcHJvcGVydGllcyB0byBkaWN0aW9uYXJ5XG4gICAgaWYgKHRoaXMud29ya291dFRlbXBsYXRlSWQpIGRpY3Qud29ya291dFRlbXBsYXRlSWQgPSB0aGlzLndvcmtvdXRUZW1wbGF0ZUlkO1xuICAgIGlmICh0aGlzLmNoYWxsZW5nZUlkKSBkaWN0LmNoYWxsZW5nZUlkID0gdGhpcy5jaGFsbGVuZ2VJZDtcbiAgICBpZiAodGhpcy5yb3VuZFdvcmtvdXRJZCkgZGljdC5yb3VuZFdvcmtvdXRJZCA9IHRoaXMucm91bmRXb3Jrb3V0SWQ7XG4gICAgaWYgKHRoaXMud29ya291dFN0YXR1cykgZGljdC53b3Jrb3V0U3RhdHVzID0gdGhpcy53b3Jrb3V0U3RhdHVzO1xuICAgIGlmICh0aGlzLnN0YXJ0VGltZSkgZGljdC5zdGFydFRpbWUgPSBkYXRlVG9Vbml4VGltZXN0YW1wKHRoaXMuc3RhcnRUaW1lKTtcbiAgICBpZiAodGhpcy5lbmRUaW1lKSBkaWN0LmVuZFRpbWUgPSBkYXRlVG9Vbml4VGltZXN0YW1wKHRoaXMuZW5kVGltZSk7XG4gICAgXG4gICAgcmV0dXJuIGRpY3Q7XG4gIH1cbn1cblxuLy8gTmV3IFdvcmtvdXRTZXNzaW9uIENsYXNzXG5leHBvcnQgY2xhc3MgV29ya291dFNlc3Npb24ge1xuICBpZDogc3RyaW5nOyAvLyBTZXNzaW9uIElEXG4gIHVzZXJJZDogc3RyaW5nO1xuICB3b3Jrb3V0VGVtcGxhdGVJZDogc3RyaW5nOyAvLyBJRCBvZiB0aGUgV29ya291dCAodGVtcGxhdGUpIHRoaXMgc2Vzc2lvbiBpcyBhbiBpbnN0YW5jZSBvZlxuICBjaGFsbGVuZ2VJZD86IHN0cmluZyB8IG51bGw7IC8vIFNpbmd1bGFyIGNoYWxsZW5nZSBJRCB0aGlzIHNlc3Npb24gcGVydGFpbnMgdG9cbiAgcm91bmRXb3Jrb3V0SWQ6IHN0cmluZzsgLy8gZS5nLiwgdGVtcGxhdGVJZC10aW1lc3RhbXBcbiAgdGl0bGU6IHN0cmluZzsgLy8gQ2FuIGJlIGNvcGllZCBmcm9tIHRlbXBsYXRlXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nOyAvLyBDYW4gYmUgY29waWVkIGZyb20gdGVtcGxhdGVcbiAgYXV0aG9yPzogc3RyaW5nOyAvLyBJRCBvZiB0aGUgYXV0aG9yIG9mIHRoZSB3b3Jrb3V0IHRlbXBsYXRlXG4gIC8vIEV4ZXJjaXNlcyBhcmUgcGFydCBvZiB0aGUgdGVtcGxhdGUsIG5vdCBkaXJlY3RseSBvbiBzZXNzaW9uLiBMb2dzIHdpbGwgcmVmZXIgdG8gdGVtcGxhdGUncyBleGVyY2lzZXMuXG4gIC8vIGxvZ3MgYXJlIHN0b3JlZCBpbiBhIHN1YmNvbGxlY3Rpb24sIHNvIG5vdCBkaXJlY3RseSBvbiB0aGlzIG9iamVjdCBmb3IgRmlyZXN0b3JlLlxuICAvLyBIb3dldmVyLCB3ZSBtaWdodCBsb2FkIHRoZW0gaW50byBhbiBpbnN0YW5jZSBwcm9wZXJ0eSBmb3IgcnVudGltZSB1c2UuXG4gIGxvZ3M/OiBFeGVyY2lzZUxvZ1tdOyBcbiAgd29ya291dFN0YXR1czogV29ya291dFN0YXR1cztcbiAgc3RhcnRUaW1lPzogRGF0ZSB8IG51bGw7XG4gIGVuZFRpbWU/OiBEYXRlIHwgbnVsbDtcbiAgaXNDb21wbGV0ZWQ6IGJvb2xlYW47XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbiAgdXBkYXRlZEF0OiBEYXRlO1xuICAvLyBTZXNzaW9uIHNwZWNpZmljIGRlcml2ZWQgcHJvcGVydGllcyAoY2FuIGJlIGFkZGVkIGlmIG5lZWRlZCwgZS5nLiBhY3R1YWwgZHVyYXRpb24pXG5cbiAgY29uc3RydWN0b3IoZGF0YTogUGFydGlhbDxXb3Jrb3V0U2Vzc2lvbj4pIHtcbiAgICB0aGlzLmlkID0gZGF0YS5pZCB8fCAnJztcbiAgICB0aGlzLnVzZXJJZCA9IGRhdGEudXNlcklkIHx8ICcnO1xuICAgIHRoaXMud29ya291dFRlbXBsYXRlSWQgPSBkYXRhLndvcmtvdXRUZW1wbGF0ZUlkIHx8ICcnO1xuICAgIHRoaXMuY2hhbGxlbmdlSWQgPSBkYXRhLmNoYWxsZW5nZUlkICE9PSB1bmRlZmluZWQgPyBkYXRhLmNoYWxsZW5nZUlkIDogbnVsbDtcbiAgICB0aGlzLnJvdW5kV29ya291dElkID0gZGF0YS5yb3VuZFdvcmtvdXRJZCB8fCAnJztcbiAgICB0aGlzLnRpdGxlID0gZGF0YS50aXRsZSB8fCAnJztcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGF0YS5kZXNjcmlwdGlvbjtcbiAgICB0aGlzLmF1dGhvciA9IGRhdGEuYXV0aG9yOyAvLyBhdXRob3IgaXMgb3B0aW9uYWxcbiAgICB0aGlzLmxvZ3MgPSBkYXRhLmxvZ3MgfHwgW107XG4gICAgdGhpcy53b3Jrb3V0U3RhdHVzID0gZGF0YS53b3Jrb3V0U3RhdHVzIHx8IFdvcmtvdXRTdGF0dXMuUXVldWVkVXA7XG4gICAgdGhpcy5zdGFydFRpbWUgPSBkYXRhLnN0YXJ0VGltZSBpbnN0YW5jZW9mIERhdGUgPyBkYXRhLnN0YXJ0VGltZSA6IGRhdGEuc3RhcnRUaW1lID8gbmV3IERhdGUoZGF0YS5zdGFydFRpbWUpIDogbnVsbDtcbiAgICB0aGlzLmVuZFRpbWUgPSBkYXRhLmVuZFRpbWUgaW5zdGFuY2VvZiBEYXRlID8gZGF0YS5lbmRUaW1lIDogZGF0YS5lbmRUaW1lID8gbmV3IERhdGUoZGF0YS5lbmRUaW1lKSA6IG51bGw7XG4gICAgdGhpcy5pc0NvbXBsZXRlZCA9IGRhdGEuaXNDb21wbGV0ZWQgfHwgZmFsc2U7XG4gICAgdGhpcy5jcmVhdGVkQXQgPSBkYXRhLmNyZWF0ZWRBdCBpbnN0YW5jZW9mIERhdGUgPyBkYXRhLmNyZWF0ZWRBdCA6IGRhdGEuY3JlYXRlZEF0ID8gbmV3IERhdGUoZGF0YS5jcmVhdGVkQXQpIDogbmV3IERhdGUoKTtcbiAgICB0aGlzLnVwZGF0ZWRBdCA9IGRhdGEudXBkYXRlZEF0IGluc3RhbmNlb2YgRGF0ZSA/IGRhdGEudXBkYXRlZEF0IDogZGF0YS51cGRhdGVkQXQgPyBuZXcgRGF0ZShkYXRhLnVwZGF0ZWRBdCkgOiBuZXcgRGF0ZSgpO1xuICB9XG5cbiAgdG9EaWN0aW9uYXJ5KCk6IE9taXQ8V29ya291dFNlc3Npb24sICd0b0RpY3Rpb25hcnknIHwgJ2xvZ3MnIHwgJ2NvbnN0cnVjdG9yJz4ge1xuICAgIGNvbnN0IGRpY3Q6IE9taXQ8V29ya291dFNlc3Npb24sICd0b0RpY3Rpb25hcnknIHwgJ2xvZ3MnIHwgJ2NvbnN0cnVjdG9yJz4gPSB7XG4gICAgICBpZDogdGhpcy5pZCxcbiAgICAgIHVzZXJJZDogdGhpcy51c2VySWQsXG4gICAgICB3b3Jrb3V0VGVtcGxhdGVJZDogdGhpcy53b3Jrb3V0VGVtcGxhdGVJZCxcbiAgICAgIGNoYWxsZW5nZUlkOiB0aGlzLmNoYWxsZW5nZUlkLFxuICAgICAgcm91bmRXb3Jrb3V0SWQ6IHRoaXMucm91bmRXb3Jrb3V0SWQsXG4gICAgICB0aXRsZTogdGhpcy50aXRsZSxcbiAgICAgIC8vIE9wdGlvbmFsIGZpZWxkcyBhcmUgaGFuZGxlZCBieSB0aGVpciBwcmVzZW5jZSBvciBhYnNlbmNlXG4gICAgICAuLi4odGhpcy5kZXNjcmlwdGlvbiAmJiB7IGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uIH0pLFxuICAgICAgLi4uKHRoaXMuYXV0aG9yICYmIHsgYXV0aG9yOiB0aGlzLmF1dGhvciB9KSxcbiAgICAgIHdvcmtvdXRTdGF0dXM6IHRoaXMud29ya291dFN0YXR1cyxcbiAgICAgIHN0YXJ0VGltZTogdGhpcy5zdGFydFRpbWUsXG4gICAgICBlbmRUaW1lOiB0aGlzLmVuZFRpbWUsXG4gICAgICBpc0NvbXBsZXRlZDogdGhpcy5pc0NvbXBsZXRlZCxcbiAgICAgIGNyZWF0ZWRBdDogdGhpcy5jcmVhdGVkQXQsXG4gICAgICB1cGRhdGVkQXQ6IHRoaXMudXBkYXRlZEF0LFxuICAgIH07XG4gICAgcmV0dXJuIGRpY3Q7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFdvcmtvdXRTdW1tYXJ5IHtcbiAgaWQ6IHN0cmluZztcbiAgd29ya291dElkOiBzdHJpbmc7XG4gIHVzZXJJZDogc3RyaW5nO1xuICByb3VuZFdvcmtvdXRJZDogc3RyaW5nO1xuICBleGVyY2lzZXM6IEV4ZXJjaXNlTG9nW107XG4gIGJvZHlQYXJ0czogQm9keVBhcnRbXTtcbiAgc2Vjb25kYXJ5Qm9keVBhcnRzOiBCb2R5UGFydFtdO1xuICB3b3Jrb3V0VGl0bGU6IHN0cmluZztcbiAgY2Fsb3JpZXNCdXJuZWQ6IG51bWJlcjtcbiAgd29ya291dFJhdGluZz86IFdvcmtvdXRSYXRpbmcgfCBudWxsO1xuICBleGVyY2lzZXNDb21wbGV0ZWQ6IEV4ZXJjaXNlTG9nW107XG4gIGFpSW5zaWdodDogc3RyaW5nO1xuICByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdO1xuICBnaWZVUkxzPzogc3RyaW5nW107XG4gIHJlY29tbWVuZGVkV29yaz86IG51bWJlcjtcbiAgcHVsc2VQb2ludHM6IFB1bHNlUG9pbnRzO1xuICBpc0NvbXBsZXRlZDogYm9vbGVhbjtcbiAgc3RhcnRUaW1lOiBEYXRlO1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIHVwZGF0ZWRBdDogRGF0ZTtcbiAgY29tcGxldGVkQXQ/OiBEYXRlIHwgbnVsbDtcbiAgZHVyYXRpb246IG51bWJlciA9IDA7ICAvLyBDaGFuZ2VkIHRvIG51bWJlciB0byBtYXRjaCBpT1NcblxuICBjb25zdHJ1Y3RvcihkYXRhOiBhbnkpIHtcbiAgICAgIHRoaXMuaWQgPSBkYXRhLmlkIHx8ICcnO1xuICAgICAgdGhpcy53b3Jrb3V0SWQgPSBkYXRhLndvcmtvdXRJZCB8fCAnJztcbiAgICAgIHRoaXMudXNlcklkID0gZGF0YS51c2VySWQgfHwgJyc7XG4gICAgICB0aGlzLnJvdW5kV29ya291dElkID0gZGF0YS5yb3VuZFdvcmtvdXRJZCB8fCAnJztcbiAgICAgIHRoaXMuZXhlcmNpc2VzID0gQXJyYXkuaXNBcnJheShkYXRhLmV4ZXJjaXNlcykgXG4gICAgICAgICAgPyBkYXRhLmV4ZXJjaXNlcy5tYXAoKGV4OiBhbnkpID0+IG5ldyBFeGVyY2lzZUxvZyhleCkpXG4gICAgICAgICAgOiBbXTtcbiAgICAgIHRoaXMuYm9keVBhcnRzID0gQXJyYXkuaXNBcnJheShkYXRhLmJvZHlQYXJ0cylcbiAgICAgICAgICA/IGRhdGEuYm9keVBhcnRzXG4gICAgICAgICAgOiBbXTtcbiAgICAgIHRoaXMuc2Vjb25kYXJ5Qm9keVBhcnRzID0gQXJyYXkuaXNBcnJheShkYXRhLnNlY29uZGFyeUJvZHlQYXJ0cylcbiAgICAgICAgICA/IGRhdGEuc2Vjb25kYXJ5Qm9keVBhcnRzXG4gICAgICAgICAgOiBbXTtcbiAgICAgIHRoaXMud29ya291dFRpdGxlID0gZGF0YS53b3Jrb3V0VGl0bGUgfHwgJyc7XG4gICAgICB0aGlzLmNhbG9yaWVzQnVybmVkID0gZGF0YS5jYWxvcmllc0J1cm5lZCB8fCAwO1xuICAgICAgdGhpcy53b3Jrb3V0UmF0aW5nID0gZGF0YS53b3Jrb3V0UmF0aW5nO1xuICAgICAgdGhpcy5leGVyY2lzZXNDb21wbGV0ZWQgPSBBcnJheS5pc0FycmF5KGRhdGEuZXhlcmNpc2VzQ29tcGxldGVkKVxuICAgICAgICAgID8gZGF0YS5leGVyY2lzZXNDb21wbGV0ZWQubWFwKChleDogYW55KSA9PiBuZXcgRXhlcmNpc2VMb2coZXgpKVxuICAgICAgICAgIDogW107XG4gICAgICB0aGlzLmFpSW5zaWdodCA9IGRhdGEuYWlJbnNpZ2h0IHx8ICcnO1xuICAgICAgdGhpcy5yZWNvbW1lbmRhdGlvbnMgPSBBcnJheS5pc0FycmF5KGRhdGEucmVjb21tZW5kYXRpb25zKVxuICAgICAgICAgID8gZGF0YS5yZWNvbW1lbmRhdGlvbnNcbiAgICAgICAgICA6IFtdO1xuICAgICAgdGhpcy5naWZVUkxzID0gZGF0YS5naWZVUkxzO1xuICAgICAgdGhpcy5yZWNvbW1lbmRlZFdvcmsgPSBkYXRhLnJlY29tbWVuZGVkV29yaztcbiAgICAgIHRoaXMucHVsc2VQb2ludHMgPSBkYXRhLnB1bHNlUG9pbnRzID8gbmV3IFB1bHNlUG9pbnRzKGRhdGEucHVsc2VQb2ludHMpIDogbmV3IFB1bHNlUG9pbnRzKHt9KTtcbiAgICAgIHRoaXMuaXNDb21wbGV0ZWQgPSBkYXRhLmlzQ29tcGxldGVkIHx8IGZhbHNlO1xuICAgICAgdGhpcy5zdGFydFRpbWUgPSBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuc3RhcnRUaW1lKTtcbiAgICAgIHRoaXMuY3JlYXRlZEF0ID0gY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNyZWF0ZWRBdCk7XG4gICAgICB0aGlzLnVwZGF0ZWRBdCA9IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS51cGRhdGVkQXQpO1xuICAgICAgXG4gICAgICAvLyBIYW5kbGUgY29tcGxldGVkQXQgc2ltaWxhciB0byBpT1NcbiAgICAgIGlmIChkYXRhLmNvbXBsZXRlZEF0KSB7XG4gICAgICAgICAgY29uc3QgY29tcGxldGVkQXRUaW1lc3RhbXAgPSBkYXRhLmNvbXBsZXRlZEF0O1xuICAgICAgICAgIGlmIChjb21wbGV0ZWRBdFRpbWVzdGFtcCA9PT0gMCkge1xuICAgICAgICAgICAgICAvLyBTZXQgdG8gNzIgbWludXRlcyBmcm9tIGNyZWF0ZWRBdCBsaWtlIGluIGlPU1xuICAgICAgICAgICAgICBjb25zdCBjb21wbGV0ZWREYXRlID0gbmV3IERhdGUodGhpcy5jcmVhdGVkQXQpO1xuICAgICAgICAgICAgICBjb21wbGV0ZWREYXRlLnNldE1pbnV0ZXMoY29tcGxldGVkRGF0ZS5nZXRNaW51dGVzKCkgKyA3Mik7XG4gICAgICAgICAgICAgIHRoaXMuY29tcGxldGVkQXQgPSBjb21wbGV0ZWREYXRlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuY29tcGxldGVkQXQgPSBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY29tcGxldGVkQXQpO1xuICAgICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5jb21wbGV0ZWRBdCA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZHVyYXRpb24gPSB0aGlzLmNhbGN1bGF0ZUR1cmF0aW9uKCk7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZUR1cmF0aW9uKCk6IG51bWJlciB7XG4gICAgICBpZiAoIXRoaXMuY29tcGxldGVkQXQpIHJldHVybiAwO1xuICAgICAgY29uc3QgZHVyYXRpb25JblNlY29uZHMgPSAodGhpcy5jb21wbGV0ZWRBdC5nZXRUaW1lKCkgLSB0aGlzLmNyZWF0ZWRBdC5nZXRUaW1lKCkpIC8gMTAwMDtcbiAgICAgIC8vIFJvdW5kIHRvIHRoZSBuZWFyZXN0IG1pbnV0ZSBsaWtlIGluIGlPU1xuICAgICAgcmV0dXJuIE1hdGgucm91bmQoKGR1cmF0aW9uSW5TZWNvbmRzICsgMzApIC8gNjApO1xuICB9XG5cbiAgZGV0ZXJtaW5lV29ya291dFR5cGUoKTogc3RyaW5nIHtcbiAgICAgIC8vIENyZWF0ZSBzZXRzIG9mIGJvZHkgcGFydHMgZm9yIGVhY2ggY2F0ZWdvcnlcbiAgICAgIGNvbnN0IHVwcGVyQm9keVBhcnRzID0gbmV3IFNldChbXG4gICAgICAgICAgQm9keVBhcnQuQ2hlc3QsXG4gICAgICAgICAgQm9keVBhcnQuU2hvdWxkZXJzLFxuICAgICAgICAgIEJvZHlQYXJ0LkJpY2VwcyxcbiAgICAgICAgICBCb2R5UGFydC5UcmljZXBzLFxuICAgICAgICAgIEJvZHlQYXJ0LlRyYXBzLFxuICAgICAgICAgIEJvZHlQYXJ0LkxhdHMsXG4gICAgICAgICAgQm9keVBhcnQuRm9yZWFybXNcbiAgICAgIF0pO1xuICAgICAgY29uc3QgbG93ZXJCb2R5UGFydHMgPSBuZXcgU2V0KFtcbiAgICAgICAgICBCb2R5UGFydC5IYW1zdHJpbmdzLFxuICAgICAgICAgIEJvZHlQYXJ0LkdsdXRlcyxcbiAgICAgICAgICBCb2R5UGFydC5RdWFkcmljZXBzLFxuICAgICAgICAgIEJvZHlQYXJ0LkNhbHZlc1xuICAgICAgXSk7XG4gICAgICBjb25zdCBjb3JlUGFydHMgPSBuZXcgU2V0KFtcbiAgICAgICAgICBCb2R5UGFydC5BYnMsXG4gICAgICAgICAgQm9keVBhcnQuTG93ZXJiYWNrXG4gICAgICBdKTtcblxuICAgICAgLy8gR2V0IGFsbCBib2R5IHBhcnRzIGludm9sdmVkIGluIHRoZSB3b3Jrb3V0XG4gICAgICBjb25zdCBib2R5UGFydHNJbnZvbHZlZCA9IG5ldyBTZXQ8Qm9keVBhcnQ+KCk7XG4gICAgICB0aGlzLmV4ZXJjaXNlcy5mb3JFYWNoKGxvZyA9PiB7XG4gICAgICAgICAgbG9nLmV4ZXJjaXNlLnByaW1hcnlCb2R5UGFydHMuZm9yRWFjaChwYXJ0ID0+IGJvZHlQYXJ0c0ludm9sdmVkLmFkZChzdHJpbmdUb0JvZHlQYXJ0KHBhcnQpKSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2hlY2sgd2hpY2ggYXJlYXMgYXJlIHRhcmdldGVkXG4gICAgICBjb25zdCBoYXNVcHBlckJvZHkgPSBBcnJheS5mcm9tKGJvZHlQYXJ0c0ludm9sdmVkKS5zb21lKHBhcnQgPT4gdXBwZXJCb2R5UGFydHMuaGFzKHBhcnQpKTtcbiAgICAgIGNvbnN0IGhhc0xvd2VyQm9keSA9IEFycmF5LmZyb20oYm9keVBhcnRzSW52b2x2ZWQpLnNvbWUocGFydCA9PiBsb3dlckJvZHlQYXJ0cy5oYXMocGFydCkpO1xuICAgICAgY29uc3QgaGFzQ29yZSA9IEFycmF5LmZyb20oYm9keVBhcnRzSW52b2x2ZWQpLnNvbWUocGFydCA9PiBjb3JlUGFydHMuaGFzKHBhcnQpKTtcblxuICAgICAgLy8gRGV0ZXJtaW5lIHdvcmtvdXQgdHlwZSB1c2luZyB0aGUgc2FtZSBsb2dpYyBhcyBpT1NcbiAgICAgIGlmICgoaGFzVXBwZXJCb2R5ICYmIGhhc0xvd2VyQm9keSAmJiBoYXNDb3JlKSB8fCAoaGFzVXBwZXJCb2R5ICYmIGhhc0xvd2VyQm9keSkpIHtcbiAgICAgICAgICByZXR1cm4gV29ya291dFR5cGUuRnVsbEJvZHk7XG4gICAgICB9IGVsc2UgaWYgKGhhc1VwcGVyQm9keSAmJiBoYXNDb3JlIHx8IGhhc1VwcGVyQm9keSkge1xuICAgICAgICAgIHJldHVybiBXb3Jrb3V0VHlwZS5VcHBlckJvZHk7XG4gICAgICB9IGVsc2UgaWYgKGhhc0xvd2VyQm9keSAmJiBoYXNDb3JlIHx8IGhhc0xvd2VyQm9keSkge1xuICAgICAgICAgIHJldHVybiBXb3Jrb3V0VHlwZS5Mb3dlckJvZHk7XG4gICAgICB9IGVsc2UgaWYgKGhhc0NvcmUpIHtcbiAgICAgICAgICByZXR1cm4gV29ya291dFR5cGUuQ29yZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBXb3Jrb3V0VHlwZS5GdWxsQm9keTsgIC8vIERlZmF1bHQgcmV0dXJuIGxpa2UgaU9TXG4gIH1cblxuICBmZXRjaFRvdGFsV2VpZ2h0TGlmdGVkKHVzZXI6IFVzZXIpOiBudW1iZXIge1xuICAgICAgcmV0dXJuIHRoaXMuZXhlcmNpc2VzQ29tcGxldGVkLnJlZHVjZSgodG90YWwsIGV4ZXJjaXNlKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHRvdGFsICsgZXhlcmNpc2UuZmV0Y2hUb3RhbFdlaWdodExpZnRlZCh1c2VyKTtcbiAgICAgIH0sIDApO1xuICB9XG5cbiAgZmV0Y2hUb3RhbFdvcmtTY29yZSh1c2VyOiBVc2VyLCB3b3Jrb3V0SWQ6IHN0cmluZyB8IG51bGwsIHdvcmtvdXRTdW1tYXJpZXM6IFdvcmtvdXRTdW1tYXJ5W10pOiBudW1iZXIge1xuICAgICAgcmV0dXJuIHRoaXMuZXhlcmNpc2VzQ29tcGxldGVkLnJlZHVjZSgodG90YWwsIGV4ZXJjaXNlKSA9PiB7XG4gICAgICAgICAgaWYgKGV4ZXJjaXNlLmxvZ1N1Ym1pdHRlZCkge1xuICAgICAgICAgICAgICByZXR1cm4gdG90YWwgKyBleGVyY2lzZS5jYWxjdWxhdGVXb3JrU2NvcmUodXNlciwgd29ya291dElkLCB3b3Jrb3V0U3VtbWFyaWVzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRvdGFsO1xuICAgICAgfSwgMCk7XG4gIH1cblxuICBmZXRjaFByZXZpb3VzV29ya1Njb3JlKHVzZXI6IFVzZXIsIHdvcmtvdXRJZDogc3RyaW5nIHwgbnVsbCwgc3VtbWFyaWVzOiBXb3Jrb3V0U3VtbWFyeVtdKTogbnVtYmVyIHtcbiAgICBjb25zdCBjdXJyZW50V29ya291dFR5cGUgPSB0aGlzLmRldGVybWluZVdvcmtvdXRUeXBlKCk7XG4gICAgXG4gICAgLy8gRmluZCB0aGUgbW9zdCByZWNlbnQgbWF0Y2hpbmcgc3VtbWFyeVxuICAgIGNvbnN0IG1hdGNoaW5nU3VtbWFyeSA9IHN1bW1hcmllc1xuICAgICAgICAuZmlsdGVyKHMgPT4gcy5kZXRlcm1pbmVXb3Jrb3V0VHlwZSgpID09PSBjdXJyZW50V29ya291dFR5cGUpXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmNyZWF0ZWRBdC5nZXRUaW1lKCkgLSBhLmNyZWF0ZWRBdC5nZXRUaW1lKCkpXG4gICAgICAgIC5maW5kKHMgPT4gcy53b3Jrb3V0SWQgIT09IHRoaXMud29ya291dElkKTtcblxuICAgIGlmIChtYXRjaGluZ1N1bW1hcnkpIHtcbiAgICAgICAgLy8gRml4OiBQYXNzIHN1bW1hcmllcyBhcyB0aGUgdGhpcmQgYXJndW1lbnQgYW5kIHVzZSBwcm9wZXIgYWRkaXRpb25cbiAgICAgICAgcmV0dXJuIG1hdGNoaW5nU3VtbWFyeS5leGVyY2lzZXNDb21wbGV0ZWQucmVkdWNlKCh0b3RhbCwgZXhlcmNpc2UpID0+IFxuICAgICAgICAgICAgdG90YWwgKyBleGVyY2lzZS5jYWxjdWxhdGVXb3JrU2NvcmUodXNlciwgd29ya291dElkLCBzdW1tYXJpZXMpLCAwKTsgLy8gU3RhcnQgd2l0aCAwIGFzIGluaXRpYWwgdmFsdWVcbiAgICB9XG5cbiAgICByZXR1cm4gMDtcbn1cblxuICBjcmVhdGVUb3RhbFdvcmtTdHJpbmcodXNlcjogVXNlciwgd29ya291dElkOiBzdHJpbmcsIHdvcmtvdXRTdW1tYXJpZXM6IFdvcmtvdXRTdW1tYXJ5W10pOiBzdHJpbmcge1xuICAgICAgY29uc3QgdG90YWxXb3JrID0gdGhpcy5mZXRjaFRvdGFsV29ya1Njb3JlKHVzZXIsIHdvcmtvdXRJZCwgd29ya291dFN1bW1hcmllcyk7XG4gICAgICByZXR1cm4gdG90YWxXb3JrLnRvU3RyaW5nKCk7XG4gIH1cblxuICB0b0RpY3Rpb25hcnkoKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSB7XG4gICAgICBjb25zdCBkaWN0OiB7IFtrZXk6IHN0cmluZ106IGFueSB9ID0ge1xuICAgICAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgICAgIHdvcmtvdXRJZDogdGhpcy53b3Jrb3V0SWQsXG4gICAgICAgICAgdXNlcklkOiB0aGlzLnVzZXJJZCxcbiAgICAgICAgICByb3VuZFdvcmtvdXRJZDogdGhpcy5yb3VuZFdvcmtvdXRJZCxcbiAgICAgICAgICBleGVyY2lzZXM6IHRoaXMuZXhlcmNpc2VzLm1hcChleCA9PiBleC50b0RpY3Rpb25hcnkoKSksXG4gICAgICAgICAgYm9keVBhcnRzOiB0aGlzLmJvZHlQYXJ0cyxcbiAgICAgICAgICBzZWNvbmRhcnlCb2R5UGFydHM6IHRoaXMuc2Vjb25kYXJ5Qm9keVBhcnRzLFxuICAgICAgICAgIHdvcmtvdXRUaXRsZTogdGhpcy53b3Jrb3V0VGl0bGUsXG4gICAgICAgICAgY2Fsb3JpZXNCdXJuZWQ6IHRoaXMuY2Fsb3JpZXNCdXJuZWQsXG4gICAgICAgICAgd29ya291dFJhdGluZzogdGhpcy53b3Jrb3V0UmF0aW5nPy50b1N0cmluZygpIHx8ICcnLFxuICAgICAgICAgIGV4ZXJjaXNlc0NvbXBsZXRlZDogdGhpcy5leGVyY2lzZXNDb21wbGV0ZWQubWFwKGV4ID0+IGV4LnRvRGljdGlvbmFyeSgpKSxcbiAgICAgICAgICBhaUluc2lnaHQ6IHRoaXMuYWlJbnNpZ2h0LFxuICAgICAgICAgIHJlY29tbWVuZGF0aW9uczogdGhpcy5yZWNvbW1lbmRhdGlvbnMsXG4gICAgICAgICAgcmVjb21tZW5kZWRXb3JrOiB0aGlzLnJlY29tbWVuZGVkV29yayB8fCAnJyxcbiAgICAgICAgICBwdWxzZVBvaW50czogdGhpcy5wdWxzZVBvaW50cy50b0RpY3Rpb25hcnkoKSxcbiAgICAgICAgICBpc0NvbXBsZXRlZDogdGhpcy5pc0NvbXBsZXRlZCxcbiAgICAgICAgICBzdGFydFRpbWU6IGRhdGVUb1VuaXhUaW1lc3RhbXAodGhpcy5zdGFydFRpbWUpLFxuICAgICAgICAgIGNyZWF0ZWRBdDogZGF0ZVRvVW5peFRpbWVzdGFtcCh0aGlzLmNyZWF0ZWRBdCksXG4gICAgICAgICAgdXBkYXRlZEF0OiBkYXRlVG9Vbml4VGltZXN0YW1wKHRoaXMudXBkYXRlZEF0KSxcbiAgICAgICAgICBjb21wbGV0ZWRBdDogdGhpcy5jb21wbGV0ZWRBdCA/IGRhdGVUb1VuaXhUaW1lc3RhbXAodGhpcy5jb21wbGV0ZWRBdCkgOiAwXG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5naWZVUkxzKSB7XG4gICAgICAgICAgZGljdC5naWZVUkxzID0gdGhpcy5naWZVUkxzO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGljdDtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdvcmtvdXRTZXJ2aWNlIHtcbiAgZmV0Y2hDdXJyZW50V29ya291dDogKCkgPT4gUHJvbWlzZTxXb3Jrb3V0IHwgbnVsbD47XG4gIGdlbmVyYXRlV29ya291dDogKGJvZHlQYXJ0czogQm9keVpvbmVbXSkgPT4gUHJvbWlzZTxXb3Jrb3V0PjtcbiAgc3RhcnRXb3Jrb3V0OiAod29ya291dElkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD47XG4gIGNhbmNlbFdvcmtvdXQ6ICh3b3Jrb3V0SWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgY29tcGxldGVXb3Jrb3V0OiAod29ya291dElkOiBzdHJpbmcsIHJhdGluZz86IFdvcmtvdXRSYXRpbmcpID0+IFByb21pc2U8dm9pZD47XG4gIGZldGNoQ3VycmVudFdvcmtvdXRTZXNzaW9uOiAoKSA9PiBQcm9taXNlPHtcbiAgICB3b3Jrb3V0OiBXb3Jrb3V0IHwgbnVsbDtcbiAgICBsb2dzOiBFeGVyY2lzZUxvZ1tdIHwgbnVsbDtcbiAgfT47XG4gIHN3YXBXb3Jrb3V0OiAob2xkV29ya291dElkOiBzdHJpbmcsIG5ld0JvZHlQYXJ0czogQm9keVpvbmVbXSkgPT4gUHJvbWlzZTxXb3Jrb3V0PjtcbiAgdXBkYXRlV29ya291dFN0YXR1czogKHdvcmtvdXRJZDogc3RyaW5nLCBzdGF0dXM6IFdvcmtvdXRTdGF0dXMpID0+IFByb21pc2U8dm9pZD47XG4gIGxvZ0V4ZXJjaXNlOiAod29ya291dElkOiBzdHJpbmcsIGV4ZXJjaXNlTG9nOiBFeGVyY2lzZUxvZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgZ2V0V29ya291dExvZ3M6ICh3b3Jrb3V0SWQ6IHN0cmluZykgPT4gUHJvbWlzZTxFeGVyY2lzZUxvZ1tdPjtcbiAgY2FuY2VsQ3VycmVudFdvcmtvdXQ6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIGdldEN1cnJlbnRXb3Jrb3V0U3RhdHVzOiAoKSA9PiBQcm9taXNlPFdvcmtvdXRTdGF0dXM+O1xuICBzYXZlV29ya291dDogKHdvcmtvdXQ6IFdvcmtvdXQpID0+IFByb21pc2U8dm9pZD47XG59XG5cbi8vIFN3ZWF0bGlzdElkZW50aWZpZXJzIHR5cGVcbmV4cG9ydCBjbGFzcyBTd2VhdGxpc3RJZGVudGlmaWVycyB7XG4gIGlkOiBzdHJpbmc7XG4gIHN3ZWF0bGlzdEF1dGhvcklkOiBzdHJpbmc7XG4gIHN3ZWF0bGlzdE5hbWU6IHN0cmluZztcbiAgb3JkZXI6IG51bWJlcjtcbiAgaXNSZXN0PzogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3RvcihkYXRhOiBhbnkpIHtcbiAgICB0aGlzLmlkID0gZGF0YS5pZCB8fCAnJztcbiAgICB0aGlzLnN3ZWF0bGlzdEF1dGhvcklkID0gZGF0YS5zd2VhdGxpc3RBdXRob3JJZCB8fCAnJztcbiAgICB0aGlzLnN3ZWF0bGlzdE5hbWUgPSBkYXRhLnN3ZWF0bGlzdE5hbWUgfHwgJyc7XG4gICAgdGhpcy5vcmRlciA9IGRhdGEub3JkZXIgfHwgMDtcbiAgICB0aGlzLmlzUmVzdCA9IGRhdGEuaXNSZXN0IHx8IGZhbHNlO1xuICB9XG5cbiAgdG9EaWN0aW9uYXJ5KCk6IHsgW2tleTogc3RyaW5nXTogYW55IH0ge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogdGhpcy5pZCxcbiAgICAgIHN3ZWF0bGlzdEF1dGhvcklkOiB0aGlzLnN3ZWF0bGlzdEF1dGhvcklkLFxuICAgICAgc3dlYXRsaXN0TmFtZTogdGhpcy5zd2VhdGxpc3ROYW1lLFxuICAgICAgb3JkZXI6IHRoaXMub3JkZXIsXG4gICAgICBpc1Jlc3Q6IHRoaXMuaXNSZXN0XG4gICAgfTtcbiAgfVxufVxuXG4vLyBFbnVtIGZvciBzd2VhdGxpc3QgdHlwZSBtYXRjaGluZyBTd2lmdCBpbXBsZW1lbnRhdGlvblxuZXhwb3J0IGVudW0gU3dlYXRsaXN0VHlwZSB7XG4gIFRvZ2V0aGVyID0gJ3RvZ2V0aGVyJyxcbiAgTG9ja2VkID0gJ2xvY2tlZCdcbn1cblxuZXhwb3J0IGNsYXNzIFJlZmVycmFsQ2hhaW4ge1xuICBvcmlnaW5hbEhvc3RJZDogc3RyaW5nO1xuICBzaGFyZWRCeTogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKGRhdGE6IGFueSkge1xuICAgIHRoaXMub3JpZ2luYWxIb3N0SWQgPSBkYXRhLm9yaWdpbmFsSG9zdElkIHx8ICcnO1xuICAgIHRoaXMuc2hhcmVkQnkgPSBkYXRhLnNoYXJlZEJ5IHx8ICcnO1xuICB9XG5cbiAgdG9EaWN0aW9uYXJ5KCk6IGFueSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9yaWdpbmFsSG9zdElkOiB0aGlzLm9yaWdpbmFsSG9zdElkLFxuICAgICAgc2hhcmVkQnk6IHRoaXMuc2hhcmVkQnksXG4gICAgfTtcbiAgfVxuXG4gIHN0YXRpYyBmcm9tRmlyZXN0b3JlKGRhdGE6IGFueSk6IFJlZmVycmFsQ2hhaW4ge1xuICAgIHJldHVybiBuZXcgUmVmZXJyYWxDaGFpbihkYXRhKTtcbiAgfVxufVxuXG5cbi8vIE1haW4gU3dlYXRsaXN0Q29sbGVjdGlvbiBpbnRlcmZhY2VcbmV4cG9ydCBjbGFzcyBTd2VhdGxpc3RDb2xsZWN0aW9uIHtcbiAgaWQ6IHN0cmluZztcbiAgdGl0bGU6IHN0cmluZztcbiAgc3VidGl0bGU6IHN0cmluZztcbiAgcGluOiBzdHJpbmcgfCBudWxsO1xuICBjaGFsbGVuZ2U/OiBDaGFsbGVuZ2UgfCBudWxsO1xuICBwdWJsaXNoZWRTdGF0dXM/OiBib29sZWFuO1xuICBwYXJ0aWNpcGFudHM6IHN0cmluZ1tdO1xuICBzd2VhdGxpc3RJZHM6IFN3ZWF0bGlzdElkZW50aWZpZXJzW107XG4gIG93bmVySWQ6IHN0cmluZ1tdOyAvLyBVcGRhdGVkIHRvIGJlIGFuIGFycmF5XG4gIHByaXZhY3k6IFN3ZWF0bGlzdFR5cGU7XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbiAgdXBkYXRlZEF0OiBEYXRlO1xuXG4gIGNvbnN0cnVjdG9yKGRhdGE6IGFueSkge1xuICAgIHRoaXMuaWQgPSBkYXRhLmlkO1xuICAgIHRoaXMudGl0bGUgPSBkYXRhLnRpdGxlIHx8ICcnO1xuICAgIHRoaXMuc3VidGl0bGUgPSBkYXRhLnN1YnRpdGxlIHx8ICcnO1xuICAgIHRoaXMucGluID0gZGF0YS5waW4gfHwgbnVsbDtcbiAgICB0aGlzLmNoYWxsZW5nZSA9IGRhdGEuY2hhbGxlbmdlID8gbmV3IENoYWxsZW5nZShkYXRhLmNoYWxsZW5nZSkgOiBudWxsO1xuICAgIFxuICAgIHRoaXMuc3dlYXRsaXN0SWRzID0gKGRhdGEuc3dlYXRsaXN0SWRzIHx8IFtdKS5tYXAoKGl0ZW06IGFueSkgPT4gXG4gICAgICBuZXcgU3dlYXRsaXN0SWRlbnRpZmllcnMoaXRlbSlcbiAgICApO1xuICAgIC8vIElmIG93bmVySWQgaXMgbm90IGFuIGFycmF5LCB3cmFwIGl0IGluIGFuIGFycmF5LlxuICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEub3duZXJJZCkpIHtcbiAgICAgIHRoaXMub3duZXJJZCA9IGRhdGEub3duZXJJZDtcbiAgICB9IGVsc2UgaWYgKGRhdGEub3duZXJJZCkge1xuICAgICAgdGhpcy5vd25lcklkID0gW2RhdGEub3duZXJJZF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub3duZXJJZCA9IFtdO1xuICAgIH1cbiAgICB0aGlzLnByaXZhY3kgPSB0aGlzLmNoYWxsZW5nZSA/IFN3ZWF0bGlzdFR5cGUuVG9nZXRoZXIgOiBTd2VhdGxpc3RUeXBlLkxvY2tlZDtcbiAgICB0aGlzLnBhcnRpY2lwYW50cyA9IChkYXRhLnBhcnRpY2lwYW50cyB8fCBbXSkubWFwKChwYXJ0aWNpcGFudDogYW55KSA9PiBwYXJ0aWNpcGFudCB8fCAnJyk7XG4gICAgdGhpcy5jcmVhdGVkQXQgPSBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY3JlYXRlZEF0KTtcbiAgICB0aGlzLnVwZGF0ZWRBdCA9IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS51cGRhdGVkQXQpO1xuICB9XG5cbiAgdG9EaWN0aW9uYXJ5KCk6IGFueSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgdGl0bGU6IHRoaXMudGl0bGUsXG4gICAgICBzdWJ0aXRsZTogdGhpcy5zdWJ0aXRsZSxcbiAgICAgIHBpbjogdGhpcy5waW4sXG4gICAgICBjaGFsbGVuZ2U6IHRoaXMuY2hhbGxlbmdlID8gdGhpcy5jaGFsbGVuZ2UudG9EaWN0aW9uYXJ5KCkgOiBudWxsLFxuICAgICAgc3dlYXRsaXN0SWRzOiB0aGlzLnN3ZWF0bGlzdElkcy5tYXAoaXRlbSA9PiBpdGVtLnRvRGljdGlvbmFyeSgpKSwgXG4gICAgICBvd25lcklkOiB0aGlzLm93bmVySWQsIC8vIFVwZGF0ZWQgdG8gYmUgYW4gYXJyYXlcbiAgICAgIHByaXZhY3k6IHRoaXMucHJpdmFjeSxcbiAgICAgIGNyZWF0ZWRBdDogZGF0ZVRvVW5peFRpbWVzdGFtcCh0aGlzLmNyZWF0ZWRBdCksXG4gICAgICB1cGRhdGVkQXQ6IGRhdGVUb1VuaXhUaW1lc3RhbXAodGhpcy51cGRhdGVkQXQpXG4gICAgfTtcbiAgfVxuXG4gIGlzUHVibGlzaGVkKCk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5jaGFsbGVuZ2UpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdGhpcy5jaGFsbGVuZ2Uuc3RhdHVzID09PSBDaGFsbGVuZ2VTdGF0dXMuUHVibGlzaGVkO1xuICB9XG59XG5cbmNsYXNzIFByb2ZpbGVJbWFnZSB7XG4gIHByb2ZpbGVJbWFnZVVSTDogc3RyaW5nO1xuICB0aHVtYm5haWxVUkw/OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoZGF0YTogYW55KSB7XG4gICAgdGhpcy5wcm9maWxlSW1hZ2VVUkwgPSBkYXRhLnByb2ZpbGVJbWFnZVVSTCB8fCAnJztcbiAgICB0aGlzLnRodW1ibmFpbFVSTCA9IGRhdGEudGh1bWJuYWlsVVJMIHx8ICcnO1xuICB9XG5cbiAgdG9EaWN0aW9uYXJ5KCk6IGFueSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb2ZpbGVJbWFnZVVSTDogdGhpcy5wcm9maWxlSW1hZ2VVUkwsXG4gICAgICB0aHVtYm5haWxVUkw6IHRoaXMudGh1bWJuYWlsVVJMIHx8IG51bGwsXG4gICAgfTtcbiAgfVxuXG4gIHN0YXRpYyBmcm9tRmlyZXN0b3JlKGRhdGE6IGFueSk6IFByb2ZpbGVJbWFnZSB7XG4gICAgcmV0dXJuIG5ldyBQcm9maWxlSW1hZ2UoZGF0YSk7XG4gIH1cbn1cblxuY2xhc3MgVXNlckxvY2F0aW9uIHtcbiAgbGF0aXR1ZGU6IG51bWJlcjtcbiAgbG9uZ2l0dWRlOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoZGF0YTogYW55KSB7XG4gICAgdGhpcy5sYXRpdHVkZSA9IGRhdGEubGF0aXR1ZGUgfHwgMDtcbiAgICB0aGlzLmxvbmdpdHVkZSA9IGRhdGEubG9uZ2l0dWRlIHx8IDA7XG4gIH1cblxuICB0b0RpY3Rpb25hcnkoKTogYW55IHtcbiAgICByZXR1cm4ge1xuICAgICAgbGF0aXR1ZGU6IHRoaXMubGF0aXR1ZGUsXG4gICAgICBsb25naXR1ZGU6IHRoaXMubG9uZ2l0dWRlLFxuICAgIH07XG4gIH1cblxuICBzdGF0aWMgZnJvbUZpcmVzdG9yZShkYXRhOiBhbnkpOiBVc2VyTG9jYXRpb24ge1xuICAgIHJldHVybiBuZXcgVXNlckxvY2F0aW9uKGRhdGEpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQdWxzZVBvaW50cyB7XG4gIGJhc2VDb21wbGV0aW9uOiBudW1iZXI7ICAgICAgLy8gZS5nLiAxMDAgcG9pbnRzXG4gIGZpcnN0Q29tcGxldGlvbjogbnVtYmVyOyAgICAgLy8gZS5nLiA1MCBwb2ludHNcbiAgc3RyZWFrQm9udXM6IG51bWJlcjsgICAgICAgICAvLyBlLmcuIDI1IHBvaW50cyBwZXIgZGF5XG4gIGNoZWNrSW5Cb251czogbnVtYmVyOyAgICAgICAgLy8gZS5nLiAyNSBwb2ludHNcbiAgZWZmb3J0UmF0aW5nOiBudW1iZXI7ICAgICAgICAvLyBlLmcuIDEwIHBvaW50c1xuICBjaGF0UGFydGljaXBhdGlvbjogbnVtYmVyOyAgIC8vIGUuZy4gMjUgcG9pbnRzXG4gIGxvY2F0aW9uQ2hlY2tpbjogbnVtYmVyOyAgICAgLy8gZS5nLiAyNSBwb2ludHNcbiAgY29udGVudEVuZ2FnZW1lbnQ6IG51bWJlcjsgICAvLyBlLmcuIDEwIHBvaW50cyBwZXIgaW50ZXJhY3Rpb25cbiAgZW5jb3VyYWdlbWVudFNlbnQ6IG51bWJlcjsgICAvLyBlLmcuIDE1IHBvaW50cyBwZXIgdW5pcXVlIHVzZXJcbiAgZW5jb3VyYWdlbWVudFJlY2VpdmVkOiBudW1iZXI7IC8vIGUuZy4gMTAgcG9pbnRzIHBlciB1bmlxdWUgdXNlclxuICBjdW11bGF0aXZlU3RyZWFrQm9udXM6IG51bWJlcjtcbiAgc2hhcmVCb251czogbnVtYmVyO1xuICByZWZlcnJhbEJvbnVzOiBudW1iZXI7XG4gIHBlZXJDaGFsbGVuZ2VCb251cz86IG51bWJlcjsgLy8gQWRkZWQgZm9yIGNhbGxvdXQgcmVzcG9uc2UgcG9pbnRzXG5cbiAgY29uc3RydWN0b3IoZGF0YTogYW55KSB7XG4gICAgdGhpcy5iYXNlQ29tcGxldGlvbiA9IGRhdGEuYmFzZUNvbXBsZXRpb24gPz8gMDtcbiAgICB0aGlzLmZpcnN0Q29tcGxldGlvbiA9IGRhdGEuZmlyc3RDb21wbGV0aW9uID8/IDA7XG4gICAgdGhpcy5zdHJlYWtCb251cyA9IGRhdGEuc3RyZWFrQm9udXMgPz8gMDtcbiAgICB0aGlzLmNoZWNrSW5Cb251cyA9IGRhdGEuY2hlY2tJbkJvbnVzID8/IDA7XG4gICAgdGhpcy5lZmZvcnRSYXRpbmcgPSBkYXRhLmVmZm9ydFJhdGluZyA/PyAwO1xuICAgIHRoaXMuY2hhdFBhcnRpY2lwYXRpb24gPSBkYXRhLmNoYXRQYXJ0aWNpcGF0aW9uID8/IDA7XG4gICAgdGhpcy5sb2NhdGlvbkNoZWNraW4gPSBkYXRhLmxvY2F0aW9uQ2hlY2tpbiA/PyAwO1xuICAgIHRoaXMuY29udGVudEVuZ2FnZW1lbnQgPSBkYXRhLmNvbnRlbnRFbmdhZ2VtZW50ID8/IDA7XG4gICAgdGhpcy5lbmNvdXJhZ2VtZW50U2VudCA9IGRhdGEuZW5jb3VyYWdlbWVudFNlbnQgPz8gMDtcbiAgICB0aGlzLmVuY291cmFnZW1lbnRSZWNlaXZlZCA9IGRhdGEuZW5jb3VyYWdlbWVudFJlY2VpdmVkID8/IDA7XG4gICAgdGhpcy5jdW11bGF0aXZlU3RyZWFrQm9udXMgPSBkYXRhLmN1bXVsYXRpdmVTdHJlYWtCb251cyA/PyAwO1xuICAgIHRoaXMuc2hhcmVCb251cyA9IGRhdGEuc2hhcmVCb251cyA/PyAwO1xuICAgIHRoaXMucmVmZXJyYWxCb251cyA9IGRhdGEucmVmZXJyYWxCb251cyA/PyAwO1xuICAgIHRoaXMucGVlckNoYWxsZW5nZUJvbnVzID0gZGF0YS5wZWVyQ2hhbGxlbmdlQm9udXMgPz8gMDsgLy8gSW5pdGlhbGl6ZVxuICB9XG5cbiAgZ2V0IHRvdGFsU3RhY2tQb2ludHMoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5iYXNlQ29tcGxldGlvbiArXG4gICAgICB0aGlzLmZpcnN0Q29tcGxldGlvbiArXG4gICAgICB0aGlzLnN0cmVha0JvbnVzICtcbiAgICAgIHRoaXMuY2hlY2tJbkJvbnVzICtcbiAgICAgIHRoaXMuZWZmb3J0UmF0aW5nXG4gICAgKTtcbiAgfVxuXG4gIGdldCB0b3RhbENvbW11bml0eVBvaW50cygpOiBudW1iZXIge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLmNoYXRQYXJ0aWNpcGF0aW9uICtcbiAgICAgIHRoaXMubG9jYXRpb25DaGVja2luICtcbiAgICAgIHRoaXMuY29udGVudEVuZ2FnZW1lbnQgK1xuICAgICAgdGhpcy5lbmNvdXJhZ2VtZW50U2VudCArXG4gICAgICB0aGlzLmVuY291cmFnZW1lbnRSZWNlaXZlZFxuICAgICk7XG4gIH1cblxuICBnZXQgdG90YWxQb2ludHMoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy50b3RhbFN0YWNrUG9pbnRzICsgdGhpcy50b3RhbENvbW11bml0eVBvaW50cyArIHRoaXMuY3VtdWxhdGl2ZVN0cmVha0JvbnVzICsgdGhpcy5zaGFyZUJvbnVzICsgdGhpcy5yZWZlcnJhbEJvbnVzICsgKHRoaXMucGVlckNoYWxsZW5nZUJvbnVzIHx8IDApOyAvLyBJbmNsdWRlIHBlZXJDaGFsbGVuZ2VCb251c1xuICB9XG5cbiAgdG9EaWN0aW9uYXJ5KCk6IGFueSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGJhc2VDb21wbGV0aW9uOiB0aGlzLmJhc2VDb21wbGV0aW9uLFxuICAgICAgZmlyc3RDb21wbGV0aW9uOiB0aGlzLmZpcnN0Q29tcGxldGlvbixcbiAgICAgIHN0cmVha0JvbnVzOiB0aGlzLnN0cmVha0JvbnVzLFxuICAgICAgY2hlY2tJbkJvbnVzOiB0aGlzLmNoZWNrSW5Cb251cyxcbiAgICAgIGVmZm9ydFJhdGluZzogdGhpcy5lZmZvcnRSYXRpbmcsXG4gICAgICBjaGF0UGFydGljaXBhdGlvbjogdGhpcy5jaGF0UGFydGljaXBhdGlvbixcbiAgICAgIGxvY2F0aW9uQ2hlY2tpbjogdGhpcy5sb2NhdGlvbkNoZWNraW4sXG4gICAgICBjb250ZW50RW5nYWdlbWVudDogdGhpcy5jb250ZW50RW5nYWdlbWVudCxcbiAgICAgIGVuY291cmFnZW1lbnRTZW50OiB0aGlzLmVuY291cmFnZW1lbnRTZW50LFxuICAgICAgZW5jb3VyYWdlbWVudFJlY2VpdmVkOiB0aGlzLmVuY291cmFnZW1lbnRSZWNlaXZlZCxcbiAgICAgIGN1bXVsYXRpdmVTdHJlYWtCb251czogdGhpcy5jdW11bGF0aXZlU3RyZWFrQm9udXMsXG4gICAgICBzaGFyZUJvbnVzOiB0aGlzLnNoYXJlQm9udXMsXG4gICAgICByZWZlcnJhbEJvbnVzOiB0aGlzLnJlZmVycmFsQm9udXMsXG4gICAgICBwZWVyQ2hhbGxlbmdlQm9udXM6IHRoaXMucGVlckNoYWxsZW5nZUJvbnVzIHx8IDAsIC8vIEFkZCB0byBkaWN0aW9uYXJ5XG4gICAgICB0b3RhbFN0YWNrUG9pbnRzOiB0aGlzLnRvdGFsU3RhY2tQb2ludHMsXG4gICAgICB0b3RhbENvbW11bml0eVBvaW50czogdGhpcy50b3RhbENvbW11bml0eVBvaW50cyxcbiAgICAgIHRvdGFsUG9pbnRzOiB0aGlzLnRvdGFsUG9pbnRzLFxuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEVuY291cmFnZW1lbnQge1xuICBmcm9tVXNlcjogU2hvcnRVc2VyO1xuICB0b1VzZXI6IFNob3J0VXNlcjtcbiAgY3JlYXRlZEF0OiBEYXRlO1xuIFxuICBjb25zdHJ1Y3RvcihkYXRhOiBhbnkpIHtcbiAgICAvLyBJZiBkYXRhIGlzIHBhc3NlZCBhcyBhbHJlYWR5IGNvbnN0cnVjdGVkIFNob3J0VXNlciBvYmplY3RzXG4gICAgaWYgKGRhdGEuZnJvbVVzZXIgaW5zdGFuY2VvZiBTaG9ydFVzZXIgJiYgZGF0YS50b1VzZXIgaW5zdGFuY2VvZiBTaG9ydFVzZXIpIHtcbiAgICAgIHRoaXMuZnJvbVVzZXIgPSBkYXRhLmZyb21Vc2VyO1xuICAgICAgdGhpcy50b1VzZXIgPSBkYXRhLnRvVXNlcjtcbiAgICAgIHRoaXMuY3JlYXRlZEF0ID0gZGF0YS5jcmVhdGVkQXQgaW5zdGFuY2VvZiBEYXRlID8gZGF0YS5jcmVhdGVkQXQgOiBuZXcgRGF0ZSgpO1xuICAgIH0gXG4gICAgLy8gSWYgZGF0YSBpcyBjb21pbmcgZnJvbSBGaXJlc3RvcmUvZGljdGlvbmFyeVxuICAgIGVsc2Uge1xuICAgICAgY29uc3QgZnJvbVVzZXJEYXRhID0gZGF0YS5mcm9tVXNlciB8fCB7fTtcbiAgICAgIHRoaXMuZnJvbVVzZXIgPSBuZXcgU2hvcnRVc2VyKGZyb21Vc2VyRGF0YSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHRvVXNlckRhdGEgPSBkYXRhLnRvVXNlciB8fCB7fTtcbiAgICAgIHRoaXMudG9Vc2VyID0gbmV3IFNob3J0VXNlcih0b1VzZXJEYXRhKTtcbiAgICAgIFxuICAgICAgdGhpcy5jcmVhdGVkQXQgPSBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuY3JlYXRlZEF0KTtcbiAgICB9XG4gIH1cbiBcbiAgLy8gU3RhdGljIG1ldGhvZCB0byBjcmVhdGUgZnJvbSBzZXBhcmF0ZSBwYXJhbWV0ZXJzXG4gIHN0YXRpYyBjcmVhdGUoZnJvbVVzZXI6IFNob3J0VXNlciwgdG9Vc2VyOiBTaG9ydFVzZXIsIGNyZWF0ZWRBdDogRGF0ZSk6IEVuY291cmFnZW1lbnQge1xuICAgIHJldHVybiBuZXcgRW5jb3VyYWdlbWVudCh7XG4gICAgICBmcm9tVXNlcixcbiAgICAgIHRvVXNlciwgXG4gICAgICBjcmVhdGVkQXRcbiAgICB9KTtcbiAgfVxuIFxuICAvLyBDb252ZXJ0IHRvIGRpY3Rpb25hcnkgZm9yIEZpcmVzdG9yZVxuICB0b0RpY3Rpb25hcnkoKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGZyb21Vc2VyOiB0aGlzLmZyb21Vc2VyLnRvRGljdGlvbmFyeSgpLFxuICAgICAgdG9Vc2VyOiB0aGlzLnRvVXNlci50b0RpY3Rpb25hcnkoKSxcbiAgICAgIGNyZWF0ZWRBdDogZGF0ZVRvVW5peFRpbWVzdGFtcCh0aGlzLmNyZWF0ZWRBdClcbiAgICB9O1xuICB9XG4gfVxuXG4vLyBUeXBlcyBmb3IgdXNlciBpbiBjaGFsbGVuZ2VcbmNsYXNzIFVzZXJDaGFsbGVuZ2Uge1xuICBpZDogc3RyaW5nO1xuICBjaGFsbGVuZ2U/OiBDaGFsbGVuZ2U7XG4gIGNoYWxsZW5nZUlkOiBzdHJpbmc7XG4gIHVzZXJJZDogc3RyaW5nO1xuICBmY21Ub2tlbjogc3RyaW5nOyAgICAgICAgICAvLyBBZGRlZFxuICB1c2VybmFtZTogc3RyaW5nO1xuICBwcm9maWxlSW1hZ2U/OiBQcm9maWxlSW1hZ2U7XG4gIHByb2dyZXNzOiBudW1iZXI7XG4gIHJlZmVycmFsQ2hhaW46IFJlZmVycmFsQ2hhaW47ICAvLyBDaGFuZ2VkIGZyb20gcmVmZXJyYWxDaGFpbnMgdG8gbWF0Y2ggaU9TXG4gIGNvbXBsZXRlZFdvcmtvdXRzOiB7IGlkOiBzdHJpbmc7IHdvcmtvdXRJZDogc3RyaW5nOyBjb21wbGV0ZWRBdDogRGF0ZSB9W107XG4gIGlzQ29tcGxldGVkOiBib29sZWFuO1xuICB1aWQ6IHN0cmluZzsgICAgICAgICAgICAgICAvLyBBZGRlZFxuICBsb2NhdGlvbj86IFVzZXJMb2NhdGlvbjtcbiAgY2l0eTogc3RyaW5nO1xuICBjb3VudHJ5Pzogc3RyaW5nO1xuICB0aW1lem9uZT86IHN0cmluZztcbiAgam9pbkRhdGU6IERhdGU7XG4gIGlzQ3VycmVudGx5QWN0aXZlOiBib29sZWFuOyAgLy8gQWRkZWRcbiAgY3JlYXRlZEF0OiBEYXRlO1xuICB1cGRhdGVkQXQ6IERhdGU7XG4gIGxhc3RBY3RpdmU/OiBEYXRlIHwgbnVsbDsgICAvLyBOZXcgcHJvcGVydHkgZm9yIHRyYWNraW5nIGxhc3QgYWN0aXZpdHlcbiAgcHVsc2VQb2ludHM6IFB1bHNlUG9pbnRzO1xuICBjdXJyZW50U3RyZWFrOiBudW1iZXI7XG4gIGxvbmdlc3RTdHJlYWs6IG51bWJlcjsgICAgICAvLyBBZGRlZFxuICBlbmNvdXJhZ2VkVXNlcnM6IEVuY291cmFnZW1lbnRbXTsgIC8vIENoYW5nZWQgZnJvbSBzdHJpbmdbXSB0byBFbmNvdXJhZ2VtZW50W11cbiAgZW5jb3VyYWdlZEJ5VXNlcnM6IEVuY291cmFnZW1lbnRbXTsgIC8vIENoYW5nZWQgZnJvbSBzdHJpbmdbXSB0byBFbmNvdXJhZ2VtZW50W11cbiAgY2hlY2tJbnM6IENoZWNrSW5bXTtcbiAgaGFzUmVjZWl2ZWRTaGFyZUJvbnVzOiBib29sZWFuO1xuICBpZ25vcmVOb3RpZmljYXRpb25zOiBzdHJpbmdbXTtcbiAgbGFzdEFjdGl2ZVJvdW5kV29ya291dElkOiBzdHJpbmc7IC8vIE5ldyBwcm9wZXJ0eSBmb3IgbGFzdCBhY3RpdmUgcm91bmQgd29ya291dCBJRFxuXG4gIGNvbnN0cnVjdG9yKGRhdGE6IGFueSkge1xuICAgIHRoaXMuaWQgPSBkYXRhLmlkO1xuICAgIHRoaXMuY2hhbGxlbmdlID0gZGF0YS5jaGFsbGVuZ2UgPyBuZXcgQ2hhbGxlbmdlKGRhdGEuY2hhbGxlbmdlKSA6IHVuZGVmaW5lZDtcbiAgICB0aGlzLmNoYWxsZW5nZUlkID0gZGF0YS5jaGFsbGVuZ2VJZCB8fCAnJztcbiAgICB0aGlzLnVzZXJJZCA9IGRhdGEudXNlcklkIHx8ICcnO1xuICAgIHRoaXMuZmNtVG9rZW4gPSBkYXRhLmZjbVRva2VuIHx8ICcnOyAgLy8gQWRkZWRcbiAgICB0aGlzLnVzZXJuYW1lID0gZGF0YS51c2VybmFtZSB8fCAnJztcbiAgICB0aGlzLnByb2ZpbGVJbWFnZSA9IGRhdGEucHJvZmlsZUltYWdlID8gbmV3IFByb2ZpbGVJbWFnZShkYXRhLnByb2ZpbGVJbWFnZSkgOiB1bmRlZmluZWQ7XG4gICAgdGhpcy5wcm9ncmVzcyA9IGRhdGEucHJvZ3Jlc3MgPz8gMDtcbiAgICB0aGlzLnJlZmVycmFsQ2hhaW4gPSBkYXRhLnJlZmVycmFsQ2hhaW4gPyBuZXcgUmVmZXJyYWxDaGFpbihkYXRhLnJlZmVycmFsQ2hhaW4pIDogbmV3IFJlZmVycmFsQ2hhaW4oeyBvcmlnaW5hbEhvc3RJZDogJycsIHNoYXJlZEJ5OiAnJyB9KTtcbiAgICB0aGlzLmNvbXBsZXRlZFdvcmtvdXRzID0gQXJyYXkuaXNBcnJheShkYXRhLmNvbXBsZXRlZFdvcmtvdXRzKVxuICAgICAgPyBkYXRhLmNvbXBsZXRlZFdvcmtvdXRzXG4gICAgICAgICAgLm1hcCgoY3c6IGFueSkgPT4gKHtcbiAgICAgICAgICAgIGlkOiBjdy5pZCB8fCAnJyxcbiAgICAgICAgICAgIHdvcmtvdXRJZDogY3cud29ya291dElkIHx8ICcnLCAvLyBFbnN1cmUgd29ya291dElkIGlzIGEgc3RyaW5nLCBkZWZhdWx0IHRvIGVtcHR5XG4gICAgICAgICAgICBjb21wbGV0ZWRBdDogY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChjdy5jb21wbGV0ZWRBdCksIC8vIEhhbmRsZSBwb3RlbnRpYWwgbnVsbC91bmRlZmluZWQgdGltZXN0YW1wXG4gICAgICAgICAgfSkpXG4gICAgICAgICAgLmZpbHRlcigoY3c6IHsgaWQ6IHN0cmluZzsgd29ya291dElkOiBzdHJpbmc7IGNvbXBsZXRlZEF0OiBEYXRlIH0pID0+IGN3LndvcmtvdXRJZCAhPT0gJycpIC8vIEZpbHRlciBvdXQgdGhvc2Ugd2hlcmUgd29ya291dElkIGVuZGVkIHVwIGVtcHR5XG4gICAgICA6IFtdO1xuICAgIHRoaXMuaXNDb21wbGV0ZWQgPSBkYXRhLmlzQ29tcGxldGVkID8/IGZhbHNlO1xuICAgIHRoaXMudWlkID0gZGF0YS51aWQgfHwgJyc7ICAvLyBBZGRlZFxuICAgIHRoaXMubG9jYXRpb24gPSBkYXRhLmxvY2F0aW9uID8gbmV3IFVzZXJMb2NhdGlvbihkYXRhLmxvY2F0aW9uKSA6IHVuZGVmaW5lZDtcbiAgICB0aGlzLmNpdHkgPSBkYXRhLmNpdHkgfHwgJyc7XG4gICAgdGhpcy5jb3VudHJ5ID0gZGF0YS5jb3VudHJ5IHx8ICcnO1xuICAgIHRoaXMudGltZXpvbmUgPSBkYXRhLnRpbWV6b25lIHx8ICcnO1xuICAgIHRoaXMuam9pbkRhdGUgPSBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuam9pbkRhdGUpO1xuICAgIHRoaXMuaXNDdXJyZW50bHlBY3RpdmUgPSBkYXRhLmlzQ3VycmVudGx5QWN0aXZlID8/IGZhbHNlOyAgLy8gQWRkZWRcbiAgICB0aGlzLmNyZWF0ZWRBdCA9IGNvbnZlcnRGaXJlc3RvcmVUaW1lc3RhbXAoZGF0YS5jcmVhdGVkQXQpO1xuICAgIHRoaXMudXBkYXRlZEF0ID0gY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLnVwZGF0ZWRBdCk7XG4gICAgdGhpcy5sYXN0QWN0aXZlID0gZGF0YS5sYXN0QWN0aXZlID8gY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmxhc3RBY3RpdmUpIDogbnVsbDsgIC8vIEluaXRpYWxpemUgdGhlIG5ldyBwcm9wZXJ0eVxuICAgIHRoaXMucHVsc2VQb2ludHMgPSBkYXRhLnB1bHNlUG9pbnRzID8gbmV3IFB1bHNlUG9pbnRzKGRhdGEucHVsc2VQb2ludHMpIDogbmV3IFB1bHNlUG9pbnRzKHt9KTtcbiAgICB0aGlzLmN1cnJlbnRTdHJlYWsgPSBkYXRhLmN1cnJlbnRTdHJlYWsgPz8gMDtcbiAgICB0aGlzLmxvbmdlc3RTdHJlYWsgPSB0aGlzLmNhbGN1bGF0ZUxvbmdlc3RTdHJlYWsoKTsgIC8vIEFkZGVkXG4gICAgdGhpcy5lbmNvdXJhZ2VkVXNlcnMgPSBBcnJheS5pc0FycmF5KGRhdGEuZW5jb3VyYWdlZFVzZXJzKVxuICAgICAgPyBkYXRhLmVuY291cmFnZWRVc2Vycy5tYXAoKGQ6IGFueSkgPT4gbmV3IEVuY291cmFnZW1lbnQoZCkpXG4gICAgICA6IFtdO1xuICAgIHRoaXMuZW5jb3VyYWdlZEJ5VXNlcnMgPSBBcnJheS5pc0FycmF5KGRhdGEuZW5jb3VyYWdlZEJ5VXNlcnMpXG4gICAgICA/IGRhdGEuZW5jb3VyYWdlZEJ5VXNlcnMubWFwKChkOiBhbnkpID0+IG5ldyBFbmNvdXJhZ2VtZW50KGQpKVxuICAgICAgOiBbXTtcbiAgICB0aGlzLmNoZWNrSW5zID0gQXJyYXkuaXNBcnJheShkYXRhLmNoZWNrSW5zKVxuICAgICAgPyBkYXRhLmNoZWNrSW5zLm1hcCgoZDogYW55KSA9PiBuZXcgQ2hlY2tJbihkKSlcbiAgICAgIDogW107XG4gICAgdGhpcy5oYXNSZWNlaXZlZFNoYXJlQm9udXMgPSBkYXRhLmhhc1JlY2VpdmVkU2hhcmVCb251cyA/PyBmYWxzZTtcbiAgICB0aGlzLmlnbm9yZU5vdGlmaWNhdGlvbnMgPSBBcnJheS5pc0FycmF5KGRhdGEuaWdub3JlTm90aWZpY2F0aW9ucykgPyBkYXRhLmlnbm9yZU5vdGlmaWNhdGlvbnMgOiBbXTtcbiAgICB0aGlzLmxhc3RBY3RpdmVSb3VuZFdvcmtvdXRJZCA9IGRhdGEubGFzdEFjdGl2ZVJvdW5kV29ya291dElkIHx8ICcnOyAvLyBJbml0aWFsaXplIG5ldyBwcm9wZXJ0eVxuICB9XG5cbiAgLy8gQWRkIGNhbGN1bGF0ZUxvbmdlc3RTdHJlYWsgbWV0aG9kXG4gIHByaXZhdGUgY2FsY3VsYXRlTG9uZ2VzdFN0cmVhaygpOiBudW1iZXIge1xuICAgIGlmICghdGhpcy5jb21wbGV0ZWRXb3Jrb3V0cy5sZW5ndGgpIHJldHVybiAwO1xuXG4gICAgbGV0IGN1cnJlbnRTdHJlYWsgPSAxO1xuICAgIGxldCBtYXhTdHJlYWsgPSAxO1xuICAgIGNvbnN0IHNvcnRlZFdvcmtvdXRzID0gWy4uLnRoaXMuY29tcGxldGVkV29ya291dHNdLnNvcnQoXG4gICAgICAoYSwgYikgPT4gYS5jb21wbGV0ZWRBdC5nZXRUaW1lKCkgLSBiLmNvbXBsZXRlZEF0LmdldFRpbWUoKVxuICAgICk7XG5cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNvcnRlZFdvcmtvdXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBwcmV2RGF0ZSA9IG5ldyBEYXRlKHNvcnRlZFdvcmtvdXRzW2kgLSAxXS5jb21wbGV0ZWRBdCk7XG4gICAgICBjb25zdCBjdXJyRGF0ZSA9IG5ldyBEYXRlKHNvcnRlZFdvcmtvdXRzW2ldLmNvbXBsZXRlZEF0KTtcbiAgICAgIFxuICAgICAgaWYgKHRoaXMuaXNOZXh0RGF5KHByZXZEYXRlLCBjdXJyRGF0ZSkpIHtcbiAgICAgICAgY3VycmVudFN0cmVhaysrO1xuICAgICAgICBtYXhTdHJlYWsgPSBNYXRoLm1heChtYXhTdHJlYWssIGN1cnJlbnRTdHJlYWspO1xuICAgICAgfSBlbHNlIGlmICghdGhpcy5pc1NhbWVEYXkocHJldkRhdGUsIGN1cnJEYXRlKSkge1xuICAgICAgICBjdXJyZW50U3RyZWFrID0gMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbWF4U3RyZWFrO1xuICB9XG5cbiAgcHJpdmF0ZSBpc05leHREYXkoZGF0ZTE6IERhdGUsIGRhdGUyOiBEYXRlKTogYm9vbGVhbiB7XG4gICAgY29uc3QgbmV4dERheSA9IG5ldyBEYXRlKGRhdGUxKTtcbiAgICBuZXh0RGF5LnNldERhdGUobmV4dERheS5nZXREYXRlKCkgKyAxKTtcbiAgICByZXR1cm4gdGhpcy5pc1NhbWVEYXkobmV4dERheSwgZGF0ZTIpO1xuICB9XG5cbiAgcHJpdmF0ZSBpc1NhbWVEYXkoZGF0ZTE6IERhdGUsIGRhdGUyOiBEYXRlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIGRhdGUxLmdldEZ1bGxZZWFyKCkgPT09IGRhdGUyLmdldEZ1bGxZZWFyKCkgJiZcbiAgICAgIGRhdGUxLmdldE1vbnRoKCkgPT09IGRhdGUyLmdldE1vbnRoKCkgJiZcbiAgICAgIGRhdGUxLmdldERhdGUoKSA9PT0gZGF0ZTIuZ2V0RGF0ZSgpXG4gICAgKTtcbiAgfVxuXG4gIHRvRGljdGlvbmFyeSgpOiBhbnkge1xuICAgIHJldHVybiB7XG4gICAgICBjaGFsbGVuZ2U6IHRoaXMuY2hhbGxlbmdlID8gdGhpcy5jaGFsbGVuZ2UudG9EaWN0aW9uYXJ5KCkgOiBudWxsLFxuICAgICAgY2hhbGxlbmdlSWQ6IHRoaXMuY2hhbGxlbmdlSWQsXG4gICAgICB1c2VySWQ6IHRoaXMudXNlcklkLFxuICAgICAgZmNtVG9rZW46IHRoaXMuZmNtVG9rZW4sICAvLyBBZGRlZFxuICAgICAgdXNlcm5hbWU6IHRoaXMudXNlcm5hbWUsXG4gICAgICBwcm9maWxlSW1hZ2U6IHRoaXMucHJvZmlsZUltYWdlID8gdGhpcy5wcm9maWxlSW1hZ2UudG9EaWN0aW9uYXJ5KCkgOiBudWxsLFxuICAgICAgcHJvZ3Jlc3M6IHRoaXMucHJvZ3Jlc3MsXG4gICAgICByZWZlcnJhbENoYWluOiB0aGlzLnJlZmVycmFsQ2hhaW4udG9EaWN0aW9uYXJ5KCksICAvLyBDaGFuZ2VkIGZyb20gcmVmZXJyYWxDaGFpbnNcbiAgICAgIGNvbXBsZXRlZFdvcmtvdXRzOiB0aGlzLmNvbXBsZXRlZFdvcmtvdXRzLm1hcCh3b3Jrb3V0ID0+ICh7XG4gICAgICAgIC4uLndvcmtvdXQsXG4gICAgICAgIGNvbXBsZXRlZEF0OiBkYXRlVG9Vbml4VGltZXN0YW1wKHdvcmtvdXQuY29tcGxldGVkQXQpXG4gICAgICB9KSksXG4gICAgICBpc0NvbXBsZXRlZDogdGhpcy5pc0NvbXBsZXRlZCxcbiAgICAgIHVpZDogdGhpcy51aWQsICAvLyBBZGRlZFxuICAgICAgbG9jYXRpb246IHRoaXMubG9jYXRpb24gPyB0aGlzLmxvY2F0aW9uLnRvRGljdGlvbmFyeSgpIDogbnVsbCxcbiAgICAgIGNpdHk6IHRoaXMuY2l0eSxcbiAgICAgIGNvdW50cnk6IHRoaXMuY291bnRyeSxcbiAgICAgIHRpbWV6b25lOiB0aGlzLnRpbWV6b25lLFxuICAgICAgam9pbkRhdGU6IGRhdGVUb1VuaXhUaW1lc3RhbXAodGhpcy5qb2luRGF0ZSksXG4gICAgICBpc0N1cnJlbnRseUFjdGl2ZTogdGhpcy5pc0N1cnJlbnRseUFjdGl2ZSwgIC8vIEFkZGVkXG4gICAgICBjcmVhdGVkQXQ6IGRhdGVUb1VuaXhUaW1lc3RhbXAodGhpcy5jcmVhdGVkQXQpLFxuICAgICAgdXBkYXRlZEF0OiBkYXRlVG9Vbml4VGltZXN0YW1wKHRoaXMudXBkYXRlZEF0KSxcbiAgICAgIGxhc3RBY3RpdmU6IHRoaXMubGFzdEFjdGl2ZSA/IGRhdGVUb1VuaXhUaW1lc3RhbXAodGhpcy5sYXN0QWN0aXZlKSA6IG51bGwsICAvLyBJbmNsdWRlIGxhc3RBY3RpdmUgaW4gc2VyaWFsaXphdGlvblxuICAgICAgcHVsc2VQb2ludHM6IHRoaXMucHVsc2VQb2ludHMudG9EaWN0aW9uYXJ5KCksXG4gICAgICBjdXJyZW50U3RyZWFrOiB0aGlzLmN1cnJlbnRTdHJlYWssXG4gICAgICBsb25nZXN0U3RyZWFrOiB0aGlzLmxvbmdlc3RTdHJlYWssICAvLyBBZGRlZFxuICAgICAgZW5jb3VyYWdlZFVzZXJzOiB0aGlzLmVuY291cmFnZWRVc2Vycy5tYXAodXNlciA9PiB1c2VyLnRvRGljdGlvbmFyeSgpKSxcbiAgICAgIGVuY291cmFnZWRCeVVzZXJzOiB0aGlzLmVuY291cmFnZWRCeVVzZXJzLm1hcCh1c2VyID0+IHVzZXIudG9EaWN0aW9uYXJ5KCkpLFxuICAgICAgY2hlY2tJbnM6IHRoaXMuY2hlY2tJbnMubWFwKGNoZWNrSW4gPT4gY2hlY2tJbi50b0RpY3Rpb25hcnkoKSksXG4gICAgICBoYXNSZWNlaXZlZFNoYXJlQm9udXM6IHRoaXMuaGFzUmVjZWl2ZWRTaGFyZUJvbnVzLFxuICAgICAgaWdub3JlTm90aWZpY2F0aW9uczogdGhpcy5pZ25vcmVOb3RpZmljYXRpb25zLFxuICAgICAgbGFzdEFjdGl2ZVJvdW5kV29ya291dElkOiB0aGlzLmxhc3RBY3RpdmVSb3VuZFdvcmtvdXRJZCAvLyBBZGQgbmV3IHByb3BlcnR5IHRvIGRpY3Rpb25hcnlcbiAgICB9O1xuICB9XG59XG5cbi8vIENoYWxsZW5nZSBzdGF0dXMgZW51bVxuZW51bSBDaGFsbGVuZ2VTdGF0dXMge1xuICBEcmFmdCA9ICdkcmFmdCcsXG4gIFB1Ymxpc2hlZCA9ICdwdWJsaXNoZWQnLFxuICBBY3RpdmUgPSAnYWN0aXZlJyxcbiAgQ29tcGxldGVkID0gJ2NvbXBsZXRlZCcsXG4gIENhbmNlbGxlZCA9ICdjYW5jZWxsZWQnXG59XG5leHBvcnQgaW50ZXJmYWNlIEludHJvVmlkZW8ge1xuICBpZDogc3RyaW5nO1xuICB1c2VySWQ6IHN0cmluZztcbiAgdmlkZW9Vcmw6IHN0cmluZztcbiAgdG9EaWN0aW9uYXJ5KCk6IGFueTtcbn1cblxuZXhwb3J0IGNsYXNzIEludHJvVmlkZW8gaW1wbGVtZW50cyBJbnRyb1ZpZGVvIHtcbiAgaWQ6IHN0cmluZztcbiAgdXNlcklkOiBzdHJpbmc7XG4gIHZpZGVvVXJsOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoZGF0YTogeyBpZDogc3RyaW5nOyB1c2VySWQ6IHN0cmluZzsgdmlkZW9Vcmw6IHN0cmluZzsgfSkge1xuICAgIHRoaXMuaWQgPSBkYXRhLmlkO1xuICAgIHRoaXMudXNlcklkID0gZGF0YS51c2VySWQ7XG4gICAgdGhpcy52aWRlb1VybCA9IGRhdGEudmlkZW9Vcmw7XG4gIH1cblxuICB0b0RpY3Rpb25hcnkoKTogYW55IHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICB1c2VySWQ6IHRoaXMudXNlcklkLFxuICAgICAgdmlkZW9Vcmw6IHRoaXMudmlkZW9VcmxcbiAgICB9O1xuICB9XG59XG5cbmNsYXNzIENoYWxsZW5nZSB7XG4gIGlkOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHN1YnRpdGxlOiBzdHJpbmc7XG4gIHBhcnRpY2lwYW50czogVXNlckNoYWxsZW5nZVtdO1xuICBzdGF0dXM6IENoYWxsZW5nZVN0YXR1cztcbiAgaW50cm9WaWRlb3M6IEludHJvVmlkZW9bXTtcbiAgcHJpdmFjeTogU3dlYXRsaXN0VHlwZTtcbiAgcGluPzogc3RyaW5nO1xuICBzdGFydERhdGU6IERhdGU7XG4gIG93bmVySWQ6IHN0cmluZ1tdO1xuICBlbmREYXRlOiBEYXRlO1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIHVwZGF0ZWRBdDogRGF0ZTtcbiAgXG4gIC8vIENvaG9ydC1yZWxhdGVkIHByb3BlcnRpZXNcbiAgb3JpZ2luYWxJZDogc3RyaW5nO1xuICBqb2luV2luZG93RW5kczogRGF0ZTtcbiAgbWluUGFydGljaXBhbnRzOiBudW1iZXI7XG4gIG1heFBhcnRpY2lwYW50czogbnVtYmVyO1xuICBhbGxvd0xhdGVKb2luczogYm9vbGVhbjtcbiAgY29ob3J0QXV0aG9yOiBzdHJpbmdbXTtcbiAgcHJpY2luZ0luZm86IFByaWNpbmdJbmZvO1xuICBcbiAgLy8gQ29tcHV0ZWQgcHJvcGVydHlcbiAgZHVyYXRpb25JbkRheXM6IG51bWJlcjtcbiAgaXNDaGFsbGVuZ2VFbmRlZDogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3RvcihkYXRhOiB7XG4gICAgaWQ6IHN0cmluZztcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIHN1YnRpdGxlOiBzdHJpbmc7XG4gICAgcGFydGljaXBhbnRzPzogVXNlckNoYWxsZW5nZVtdO1xuICAgIHN0YXR1cz86IENoYWxsZW5nZVN0YXR1cztcbiAgICBpbnRyb1ZpZGVvcz86IEludHJvVmlkZW9bXTtcbiAgICBwcml2YWN5PzogU3dlYXRsaXN0VHlwZTtcbiAgICBwaW4/OiBzdHJpbmc7XG4gICAgc3RhcnREYXRlOiBEYXRlO1xuICAgIG93bmVySWQ6IHN0cmluZ1tdO1xuICAgIGVuZERhdGU6IERhdGU7XG4gICAgY3JlYXRlZEF0OiBEYXRlO1xuICAgIHVwZGF0ZWRBdDogRGF0ZTtcbiAgICBvcmlnaW5hbElkPzogc3RyaW5nO1xuICAgIGpvaW5XaW5kb3dFbmRzPzogRGF0ZTtcbiAgICBtaW5QYXJ0aWNpcGFudHM/OiBudW1iZXI7XG4gICAgbWF4UGFydGljaXBhbnRzPzogbnVtYmVyO1xuICAgIGFsbG93TGF0ZUpvaW5zPzogYm9vbGVhbjtcbiAgICBjb2hvcnRBdXRob3I/OiBzdHJpbmdbXTtcbiAgICBwcmljaW5nSW5mbz86IFByaWNpbmdJbmZvO1xuICB9KSB7XG4gICAgdGhpcy5pZCA9IGRhdGEuaWQ7XG4gICAgdGhpcy50aXRsZSA9IGRhdGEudGl0bGU7XG4gICAgdGhpcy5zdWJ0aXRsZSA9IGRhdGEuc3VidGl0bGU7XG4gICAgdGhpcy5wYXJ0aWNpcGFudHMgPSBBcnJheS5pc0FycmF5KGRhdGEucGFydGljaXBhbnRzKSA/IGRhdGEucGFydGljaXBhbnRzIDogW107ICAgIFxuICAgIHRoaXMuc3RhdHVzID0gZGF0YS5zdGF0dXMgfHwgQ2hhbGxlbmdlU3RhdHVzLkRyYWZ0O1xuICAgIHRoaXMuaW50cm9WaWRlb3MgPSBBcnJheS5pc0FycmF5KGRhdGEuaW50cm9WaWRlb3MpIFxuICAgICAgPyBkYXRhLmludHJvVmlkZW9zLm1hcCh2aWRlb0RhdGEgPT4gbmV3IEludHJvVmlkZW8odmlkZW9EYXRhKSkgXG4gICAgICA6IFtdO1xuICAgIHRoaXMucHJpdmFjeSA9IGRhdGEucHJpdmFjeSB8fCBTd2VhdGxpc3RUeXBlLlRvZ2V0aGVyO1xuICAgIHRoaXMucGluID0gZGF0YS5waW47XG4gICAgdGhpcy5zdGFydERhdGUgPSBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEuc3RhcnREYXRlKTtcbiAgICB0aGlzLm93bmVySWQgPSBkYXRhLm93bmVySWQ7XG4gICAgdGhpcy5lbmREYXRlID0gY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmVuZERhdGUpO1xuICAgIHRoaXMuY3JlYXRlZEF0ID0gY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcChkYXRhLmNyZWF0ZWRBdCk7XG4gICAgdGhpcy51cGRhdGVkQXQgPSBjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wKGRhdGEudXBkYXRlZEF0KTtcbiAgICBcbiAgICB0aGlzLm9yaWdpbmFsSWQgPSBkYXRhLm9yaWdpbmFsSWQgfHwgZGF0YS5pZDtcbiAgICB0aGlzLmpvaW5XaW5kb3dFbmRzID0gZGF0YS5qb2luV2luZG93RW5kcyB8fCBuZXcgRGF0ZSh0aGlzLnN0YXJ0RGF0ZS5nZXRUaW1lKCkgKyAoNDggKiAzNjAwICogMTAwMCkpO1xuICAgIHRoaXMubWluUGFydGljaXBhbnRzID0gZGF0YS5taW5QYXJ0aWNpcGFudHMgfHwgMTtcbiAgICB0aGlzLm1heFBhcnRpY2lwYW50cyA9IGRhdGEubWF4UGFydGljaXBhbnRzIHx8IDEwMDtcbiAgICB0aGlzLmFsbG93TGF0ZUpvaW5zID0gZGF0YS5hbGxvd0xhdGVKb2lucyAhPT0gdW5kZWZpbmVkID8gZGF0YS5hbGxvd0xhdGVKb2lucyA6IHRydWU7XG4gICAgdGhpcy5jb2hvcnRBdXRob3IgPSBkYXRhLmNvaG9ydEF1dGhvciB8fCBbXTtcbiAgICB0aGlzLnByaWNpbmdJbmZvID0gbmV3IFByaWNpbmdJbmZvKGRhdGEucHJpY2luZ0luZm8pO1xuXG4gICAgLy8gQ2FsY3VsYXRlIGR1cmF0aW9uIGFuZCBlbmQgc3RhdHVzIGFmdGVyIGluaXRpYWxpemluZyBkYXRlc1xuICAgIHRoaXMuZHVyYXRpb25JbkRheXMgPSB0aGlzLmNhbGN1bGF0ZUR1cmF0aW9uSW5EYXlzKCk7XG4gICAgdGhpcy5pc0NoYWxsZW5nZUVuZGVkID0gbmV3IERhdGUoKSA+IHRoaXMuZW5kRGF0ZTtcbiAgICBcbiAgICBpZiAodGhpcy5pc0NoYWxsZW5nZUVuZGVkKSB7XG4gICAgICB0aGlzLnN0YXR1cyA9IENoYWxsZW5nZVN0YXR1cy5Db21wbGV0ZWQ7XG4gICAgfVxuICB9XG5cbiAgdG9EaWN0aW9uYXJ5KCk6IGFueSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgdGl0bGU6IHRoaXMudGl0bGUsXG4gICAgICBzdWJ0aXRsZTogdGhpcy5zdWJ0aXRsZSxcbiAgICAgIHBhcnRpY2lwYW50czogdGhpcy5wYXJ0aWNpcGFudHMubWFwKHBhcnRpY2lwYW50ID0+ICh7XG4gICAgICAgIGlkOiBwYXJ0aWNpcGFudC5pZCxcbiAgICAgICAgY2hhbGxlbmdlSWQ6IHBhcnRpY2lwYW50LmNoYWxsZW5nZUlkLFxuICAgICAgICB1c2VySWQ6IHBhcnRpY2lwYW50LnVzZXJJZCxcbiAgICAgICAgdXNlcm5hbWU6IHBhcnRpY2lwYW50LnVzZXJuYW1lLFxuICAgICAgICBwcm9maWxlSW1hZ2U6IHBhcnRpY2lwYW50LnByb2ZpbGVJbWFnZSxcbiAgICAgICAgcHJvZ3Jlc3M6IHBhcnRpY2lwYW50LnByb2dyZXNzLFxuICAgICAgICBjb21wbGV0ZWRXb3Jrb3V0czogcGFydGljaXBhbnQuY29tcGxldGVkV29ya291dHMsXG4gICAgICAgIGlzQ29tcGxldGVkOiBwYXJ0aWNpcGFudC5pc0NvbXBsZXRlZCxcbiAgICAgICAgbG9jYXRpb246IHBhcnRpY2lwYW50LmxvY2F0aW9uLFxuICAgICAgICBjaXR5OiBwYXJ0aWNpcGFudC5jaXR5LFxuICAgICAgICBjb3VudHJ5OiBwYXJ0aWNpcGFudC5jb3VudHJ5LFxuICAgICAgICB0aW1lem9uZTogcGFydGljaXBhbnQudGltZXpvbmUsXG4gICAgICAgIGpvaW5EYXRlOiBwYXJ0aWNpcGFudC5qb2luRGF0ZSxcbiAgICAgICAgY3JlYXRlZEF0OiBwYXJ0aWNpcGFudC5jcmVhdGVkQXQsXG4gICAgICAgIHVwZGF0ZWRBdDogcGFydGljaXBhbnQudXBkYXRlZEF0LFxuICAgICAgICBwdWxzZVBvaW50czogcGFydGljaXBhbnQucHVsc2VQb2ludHMsXG4gICAgICAgIGN1cnJlbnRTdHJlYWs6IHBhcnRpY2lwYW50LmN1cnJlbnRTdHJlYWssXG4gICAgICAgIGVuY291cmFnZWRVc2VyczogcGFydGljaXBhbnQuZW5jb3VyYWdlZFVzZXJzLFxuICAgICAgICBlbmNvdXJhZ2VkQnlVc2VyczogcGFydGljaXBhbnQuZW5jb3VyYWdlZEJ5VXNlcnMsXG4gICAgICAgIGNoZWNrSW5zOiBwYXJ0aWNpcGFudC5jaGVja0luc1xuICAgICAgfSkpLFxuICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcbiAgICAgIHBpbjogdGhpcy5waW4gPz8gbnVsbCxcbiAgICAgIHN0YXJ0RGF0ZTogZGF0ZVRvVW5peFRpbWVzdGFtcCh0aGlzLnN0YXJ0RGF0ZSksXG4gICAgICBlbmREYXRlOiBkYXRlVG9Vbml4VGltZXN0YW1wKHRoaXMuZW5kRGF0ZSksXG4gICAgICBjcmVhdGVkQXQ6IGRhdGVUb1VuaXhUaW1lc3RhbXAodGhpcy5jcmVhdGVkQXQpLFxuICAgICAgdXBkYXRlZEF0OiBkYXRlVG9Vbml4VGltZXN0YW1wKHRoaXMudXBkYXRlZEF0KSxcbiAgICAgIGR1cmF0aW9uSW5EYXlzOiB0aGlzLmR1cmF0aW9uSW5EYXlzLFxuICAgICAgaW50cm9WaWRlb3M6IHRoaXMuaW50cm9WaWRlb3MubWFwKHZpZGVvID0+IHZpZGVvLnRvRGljdGlvbmFyeSgpKSxcbiAgICAgIHByaWNpbmdJbmZvOiB0aGlzLnByaWNpbmdJbmZvLnRvRGljdGlvbmFyeSgpLFxuICAgICAgY29ob3J0QXV0aG9yOiB0aGlzLmNvaG9ydEF1dGhvcixcbiAgICAgIGlzQ2hhbGxlbmdlRW5kZWQ6IHRoaXMuaXNDaGFsbGVuZ2VFbmRlZCxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgdGhlIGR1cmF0aW9uIGluIGRheXMgYmV0d2VlbiB0aGUgc3RhcnREYXRlIGFuZCBlbmREYXRlLlxuICAgKiBAcmV0dXJucyBUaGUgbnVtYmVyIG9mIGRheXMgYmV0d2VlbiB0aGUgdHdvIGRhdGVzLlxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVEdXJhdGlvbkluRGF5cygpOiBudW1iZXIge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5zdGFydERhdGU/LnZhbHVlT2YoKTtcbiAgICBjb25zdCBlbmQgPSB0aGlzLmVuZERhdGU/LnZhbHVlT2YoKTtcblxuICAgIGlmICghc3RhcnQgfHwgIWVuZCB8fCBpc05hTihzdGFydCkgfHwgaXNOYU4oZW5kKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0YXJ0RGF0ZSBvciBlbmREYXRlJyk7XG4gICAgfVxuXG4gICAgY29uc3QgZHVyYXRpb25Jbk1pbGxpc2Vjb25kcyA9IGVuZCAtIHN0YXJ0O1xuICAgIHJldHVybiBNYXRoLmNlaWwoZHVyYXRpb25Jbk1pbGxpc2Vjb25kcyAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XG4gIH1cblxuICBzdGF0aWMgdG9GaXJlc3RvcmVPYmplY3Qob2JqOiBhbnkpOiBhbnkge1xuICAgIGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuXG4gICAgaWYgKG9iaiBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgcmV0dXJuIG9iai5tYXAoaXRlbSA9PiB0aGlzLnRvRmlyZXN0b3JlT2JqZWN0KGl0ZW0pKTtcbiAgICB9XG5cbiAgICBpZiAob2JqIGluc3RhbmNlb2YgQ2hhbGxlbmdlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogb2JqLmlkLFxuICAgICAgICB0aXRsZTogb2JqLnRpdGxlLFxuICAgICAgICBzdWJ0aXRsZTogb2JqLnN1YnRpdGxlLFxuICAgICAgICBwYXJ0aWNpcGFudHM6IG9iai5wYXJ0aWNpcGFudHMsXG4gICAgICAgIHN0YXR1czogb2JqLnN0YXR1cyxcbiAgICAgICAgc3RhcnREYXRlOiBvYmouc3RhcnREYXRlLFxuICAgICAgICBlbmREYXRlOiBvYmouZW5kRGF0ZSxcbiAgICAgICAgY3JlYXRlZEF0OiBvYmouY3JlYXRlZEF0LFxuICAgICAgICB1cGRhdGVkQXQ6IG9iai51cGRhdGVkQXQsXG4gICAgICAgIGludHJvVmlkZW9zOiBvYmouaW50cm9WaWRlb3MubWFwKHZpZGVvID0+ICh7XG4gICAgICAgICAgaWQ6IHZpZGVvLmlkLFxuICAgICAgICAgIHVzZXJJZDogdmlkZW8udXNlcklkLFxuICAgICAgICAgIHZpZGVvVXJsOiB2aWRlby52aWRlb1VybFxuICAgICAgICB9KSksXG4gICAgICAgIHByaWNpbmdJbmZvOiBvYmoucHJpY2luZ0luZm8udG9EaWN0aW9uYXJ5KCksXG4gICAgICAgIGNvaG9ydEF1dGhvcjogb2JqLmNvaG9ydEF1dGhvcixcbiAgICAgICAgZHVyYXRpb25JbkRheXM6IG9iai5kdXJhdGlvbkluRGF5cyxcbiAgICAgICAgaXNDaGFsbGVuZ2VFbmRlZDogb2JqLmlzQ2hhbGxlbmdlRW5kZWQsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IHBsYWluT2JqZWN0OiB7IFtrZXk6IHN0cmluZ106IGFueSB9ID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICBwbGFpbk9iamVjdFtrZXldID0gdGhpcy50b0ZpcmVzdG9yZU9iamVjdChvYmpba2V5XSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwbGFpbk9iamVjdDtcbiAgfVxufVxuXG5cbi8vIFByb3BzIGludGVyZmFjZSBmb3IgdGhlIGNvbXBvbmVudFxuaW50ZXJmYWNlIENoYWxsZW5nZUludml0YXRpb25Qcm9wcyB7XG4gIGNoYWxsZW5nZTogQ2hhbGxlbmdlO1xuICBvbkNsb3NlOiAoKSA9PiB2b2lkO1xuICBvbkpvaW5DaGFsbGVuZ2U6IChjaGFsbGVuZ2U6IGFueSkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgdHRjbGlkPzogc3RyaW5nO1xufVxuXG5leHBvcnQgdHlwZSB7XG4gIFByb2ZpbGVJbWFnZSxcbiAgVXNlckxvY2F0aW9uLFxuICBDaGFsbGVuZ2VJbnZpdGF0aW9uUHJvcHNcbn07XG5cbmV4cG9ydCB7IENoYWxsZW5nZVN0YXR1cywgQ2hhbGxlbmdlLCBVc2VyQ2hhbGxlbmdlIH07XG5cbmV4cG9ydCBjbGFzcyBQcmljaW5nSW5mbyB7XG4gIGlzRW5hYmxlZDogYm9vbGVhbjtcbiAgYW1vdW50OiBudW1iZXI7XG4gIGN1cnJlbmN5OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoZGF0YTogYW55ID0ge30pIHtcbiAgICB0aGlzLmlzRW5hYmxlZCA9IGRhdGEuaXNFbmFibGVkID8/IGZhbHNlO1xuICAgIHRoaXMuYW1vdW50ID0gZGF0YS5hbW91bnQgPz8gMC4wO1xuICAgIHRoaXMuY3VycmVuY3kgPSBkYXRhLmN1cnJlbmN5ID8/IFwiVVNEXCI7XG4gIH1cblxuICB0b0RpY3Rpb25hcnkoKTogYW55IHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNFbmFibGVkOiB0aGlzLmlzRW5hYmxlZCxcbiAgICAgIGFtb3VudDogdGhpcy5hbW91bnQsXG4gICAgICBjdXJyZW5jeTogdGhpcy5jdXJyZW5jeVxuICAgIH07XG4gIH1cblxuICBzdGF0aWMgZnJvbURpY3Rpb25hcnkoZGljdDogYW55KTogUHJpY2luZ0luZm8ge1xuICAgIHJldHVybiBuZXcgUHJpY2luZ0luZm8oZGljdCB8fCB7fSk7XG4gIH1cbn1cblxuLy8gTkVXIFRZUEVTIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFRoZXNlIGludGVyZmFjZXMgbWlycm9yIHRoZSBTd2lmdCBzdHJ1Y3RzIGBFeGVyY2lzZVdlZWtseVN0YXRzYCBhbmQgYFdlZWtseVdvcmtvdXREYXRhYFxuLy8gdXNlZCBvbiBpT1MgZm9yIHRoZSByb3VuZCB3cmFw4oCRdXAgYW5hbHl0aWNzLiBUaGV5IHdpbGwgYmUgY29uc3VtZWQgYnkgdGhlXG4vLyB3ZWIgYFJvdW5kV3JhcHVwYCBwYWdlIHRvIHJlbmRlciB3ZWVr4oCRb3ZlcuKAkXdlZWsgY2hhcnRzIGFuZCBkZXRhaWxlZFxuLy8gZXhlcmNpc2Ugc3RhdGlzdGljcy5cblxuLyoqXG4gKiBBZ2dyZWdhdGUgc3RhdHMgZm9yIGEgc2luZ2xlIGV4ZXJjaXNlIChwZXIgd2VlaylcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBFeGVyY2lzZVdlZWtseVN0YXRzIHtcbiAgLyoqIFVuaXF1ZSBpZGVudGlmaWVyICovXG4gIGlkOiBzdHJpbmc7XG4gIC8qKiBQbGFpbiBuYW1lIG9mIHRoZSBleGVyY2lzZSAqL1xuICBleGVyY2lzZU5hbWU6IHN0cmluZztcbiAgLyoqIFByaW1hcnkgbXVzY2xlIGdyb3VwIG5hbWUgKGh1bWFuIHJlYWRhYmxlIOKAkyBlLmcuIFwiQ2hlc3RcIikgKi9cbiAgbXVzY2xlR3JvdXA6IHN0cmluZztcbiAgLyoqIFRvdGFsIHdlaWdodCBsaWZ0ZWQgZm9yIHRoaXMgZXhlcmNpc2UgaW4gdGhlIGdpdmVuIHdlZWsgKi9cbiAgdG90YWxXZWlnaHQ6IG51bWJlcjtcbiAgLyoqIFRvdGFsIHJlcGV0aXRpb25zIHBlcmZvcm1lZCBmb3IgdGhpcyBleGVyY2lzZSBpbiB0aGUgZ2l2ZW4gd2VlayAqL1xuICB0b3RhbFJlcHM6IG51bWJlcjtcbiAgLyoqIENvbnZlbmllbmNlIOKAkyB0b3RhbFdlaWdodCAvIHRvdGFsUmVwcyAoTmFO4oCRc2FmZSkgKi9cbiAgYXZlcmFnZUxvYWRQZXJSZXA6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBDb25zb2xpZGF0ZWQgd29ya291dCBzdGF0aXN0aWNzIGZvciBhIHNpbmdsZSBjYWxlbmRhciB3ZWVrXG4gKiAoU3VuZGF5IOKAkyBTYXR1cmRheSkgd2l0aGluIGEgY2hhbGxlbmdlL3JvdW5kLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFdlZWtseVdvcmtvdXREYXRhIHtcbiAgLyoqICBJU08gc3RyaW5nIHJlcHJlc2VudGluZyB3ZWVrIHN0YXJ0ICgwMDowMDowMCBvZiBTdW5kYXkpICovXG4gIHdlZWtTdGFydERhdGU6IERhdGU7XG4gIC8qKiAgSVNPIHN0cmluZyByZXByZXNlbnRpbmcgd2VlayBlbmQgKDIzOjU5OjU5IG9mIFNhdHVyZGF5KSAqL1xuICB3ZWVrRW5kRGF0ZTogRGF0ZTtcbiAgLyoqIE51bWJlciBvZiBzZXRzIHBlcmZvcm1lZCAqL1xuICB0b3RhbFNldHM6IG51bWJlcjtcbiAgLyoqIE51bWJlciBvZiByZXBzIHBlcmZvcm1lZCAqL1xuICB0b3RhbFJlcHM6IG51bWJlcjtcbiAgLyoqIEFnZ3JlZ2F0ZSB2b2x1bWUgPSDOoyAod2VpZ2h0ICogcmVwcykgKi9cbiAgdG90YWxWb2x1bWU6IG51bWJlcjtcbiAgLyoqIEFnZ3JlZ2F0ZSB3ZWlnaHQgKHNhbWUgYXMgdG90YWxWb2x1bWUgZm9yIG5vdykgKi9cbiAgdG90YWxXZWlnaHQ6IG51bWJlcjtcbiAgLyoqIENvdW50cyBvZiBob3cgbWFueSB0aW1lcyBlYWNoIGV4ZXJjaXNlIGFwcGVhcnMgKi9cbiAgZXhlcmNpc2VDb3VudHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gIC8qKiBWb2x1bWUgZGlzdHJpYnV0aW9uIGJ5IG11c2NsZSBncm91cCDigJMgcmVwcyAqL1xuICBtdXNjbGVHcm91cFNldHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gIC8qKiBWb2x1bWUgZGlzdHJpYnV0aW9uIGJ5IG11c2NsZSBncm91cCDigJMgd2VpZ2h0ICovXG4gIG11c2NsZUdyb3VwV2VpZ2h0OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xuICAvKiogRGV0YWlsZWQgcGVy4oCRZXhlcmNpc2Ugc3RhdHMgKi9cbiAgZXhlcmNpc2VTdGF0czogRXhlcmNpc2VXZWVrbHlTdGF0c1tdO1xuXG4gIC8qKlxuICAgKiBDb252ZW5pZW5jZSBsYWJlbCDigJMgZXhhbXBsZSBcIkphbiAx4oCRN1wiLiBMZWZ0IGZvciBjb25zdW1lciB0byBjb21wdXRlIGlmIG5lZWRlZFxuICAgKiBidXQgaW5jbHVkZWQgaGVyZSBmb3IgcGFyaXR5IHdpdGggaU9TLlxuICAgKi9cbiAgd2Vla0xhYmVsPzogc3RyaW5nO1xufVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuIl0sIm5hbWVzIjpbIkV4ZXJjaXNlIiwiRXhlcmNpc2VSZWZlcmVuY2UiLCJFeGVyY2lzZUxvZyIsIkJvZHlQYXJ0IiwiY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcCIsImRhdGVUb1VuaXhUaW1lc3RhbXAiLCJTaG9ydFVzZXIiLCJzdHJpbmdUb0JvZHlQYXJ0IiwiYm9keVBhcnRTdHJpbmciLCJub3JtYWxpemVkU3RyaW5nIiwidG9Mb3dlckNhc2UiLCJrZXkiLCJ2YWx1ZSIsIk9iamVjdCIsImVudHJpZXMiLCJjb25zb2xlIiwid2FybiIsIkZ1bGxib2R5IiwiQ2hlY2tJbiIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImlkIiwidXNlcklkIiwid29ya291dElkIiwicGhvdG9VcmwiLCJ2aWRlb1VybCIsImNyZWF0ZWRBdCIsIkRhdGUiLCJ0b0RpY3Rpb25hcnkiLCJXb3Jrb3V0U3RhdHVzIiwiV29ya291dFR5cGUiLCJXb3Jrb3V0UmF0aW5nIiwiQm9keVpvbmUiLCJSZXBzQW5kV2VpZ2h0TG9nIiwicmVwcyIsIndlaWdodCIsImxlZnRSZXBzIiwibGVmdFdlaWdodCIsImlzU3BsaXQiLCJpc0JvZHlXZWlnaHQiLCJkdXJhdGlvbiIsImNhbG9yaWVzIiwiYnBtIiwiV29ya291dCIsImNvbGxlY3Rpb25JZCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJ1c2VBdXRob3JDb250ZW50Iiwid29ya291dFJhdGluZyIsImV4ZXJjaXNlcyIsIkFycmF5IiwiaXNBcnJheSIsIm1hcCIsImV4UmVmRGF0YSIsImV4ZXJjaXNlIiwiZ3JvdXBJZCIsImlzQ29tcGxldGVkIiwiZmlsdGVyIiwicmVmIiwibG9ncyIsImxvZyIsInNldHMiLCJzZXQiLCJCb29sZWFuIiwib3JkZXIiLCJ1bmRlZmluZWQiLCJhdXRob3IiLCJhc3NpZ25lZERhdGUiLCJ1cGRhdGVkQXQiLCJ6b25lIiwiZGV0ZXJtaW5lV29ya291dFpvbmUiLCJlc3RpbWF0ZWREdXJhdGlvbiIsIndvcmtvdXRUZW1wbGF0ZUlkIiwiY2hhbGxlbmdlSWQiLCJyb3VuZFdvcmtvdXRJZCIsIndvcmtvdXRTdGF0dXMiLCJzdGFydFRpbWUiLCJlbmRUaW1lIiwidG90YWxUaW1lU2Vjb25kcyIsInJlc3RUaW1lU2Vjb25kcyIsImhhc1NjcmVlblRpbWVFeGVyY2lzZXMiLCJleGVyY2lzZVJlZiIsImNhdGVnb3J5RGV0YWlscyIsImNhdGVnb3J5IiwiZGV0YWlscyIsInNjcmVlblRpbWUiLCJ0eXBlIiwibGVuZ3RoIiwidG90YWxTZWNvbmRzIiwibWludXRlcyIsIk1hdGgiLCJjZWlsIiwidG90YWxNaW51dGVzIiwicm91bmQiLCJib2R5UGFydHNJbnZvbHZlZCIsIlNldCIsInByaW1hcnlCb2R5UGFydHMiLCJib2R5UGFydFN0ciIsImFkZCIsInVwcGVyQm9keVBhcnRzIiwiQ2hlc3QiLCJTaG91bGRlcnMiLCJCaWNlcHMiLCJUcmljZXBzIiwiVHJhcHMiLCJMYXRzIiwiRm9yZWFybXMiLCJCYWNrIiwiRGVsdG9pZHMiLCJSaG9tYm9pZHMiLCJsb3dlckJvZHlQYXJ0cyIsIkhhbXN0cmluZ3MiLCJHbHV0ZXMiLCJRdWFkcmljZXBzIiwiQ2FsdmVzIiwiY29yZVBhcnRzIiwiQWJzIiwiTG93ZXJiYWNrIiwiaGFzQ29tbW9uRWxlbWVudHMiLCJzZXQxIiwic2V0MiIsImZyb20iLCJzb21lIiwiaXRlbSIsImhhcyIsImhhc1VwcGVyQm9keSIsImhhc0xvd2VyQm9keSIsImhhc0NvcmUiLCJpc1RpbWVkV29ya291dCIsImV4UmVmIiwiZmV0Y2hQcmltYXJ5Qm9keVBhcnRzIiwiZmxhdE1hcCIsInBhcnQiLCJicCIsImZldGNoU2Vjb25kYXJ5Qm9keVBhcnRzIiwic2Vjb25kYXJ5Qm9keVBhcnRzIiwiZGljdCIsIldvcmtvdXRTZXNzaW9uIiwiV29ya291dFN1bW1hcnkiLCJleCIsImJvZHlQYXJ0cyIsIndvcmtvdXRUaXRsZSIsImNhbG9yaWVzQnVybmVkIiwiZXhlcmNpc2VzQ29tcGxldGVkIiwiYWlJbnNpZ2h0IiwicmVjb21tZW5kYXRpb25zIiwiZ2lmVVJMcyIsInJlY29tbWVuZGVkV29yayIsInB1bHNlUG9pbnRzIiwiUHVsc2VQb2ludHMiLCJjb21wbGV0ZWRBdCIsImNvbXBsZXRlZEF0VGltZXN0YW1wIiwiY29tcGxldGVkRGF0ZSIsInNldE1pbnV0ZXMiLCJnZXRNaW51dGVzIiwiY2FsY3VsYXRlRHVyYXRpb24iLCJkdXJhdGlvbkluU2Vjb25kcyIsImdldFRpbWUiLCJkZXRlcm1pbmVXb3Jrb3V0VHlwZSIsImZvckVhY2giLCJmZXRjaFRvdGFsV2VpZ2h0TGlmdGVkIiwidXNlciIsInJlZHVjZSIsInRvdGFsIiwiZmV0Y2hUb3RhbFdvcmtTY29yZSIsIndvcmtvdXRTdW1tYXJpZXMiLCJsb2dTdWJtaXR0ZWQiLCJjYWxjdWxhdGVXb3JrU2NvcmUiLCJmZXRjaFByZXZpb3VzV29ya1Njb3JlIiwic3VtbWFyaWVzIiwiY3VycmVudFdvcmtvdXRUeXBlIiwibWF0Y2hpbmdTdW1tYXJ5IiwicyIsInNvcnQiLCJhIiwiYiIsImZpbmQiLCJjcmVhdGVUb3RhbFdvcmtTdHJpbmciLCJ0b3RhbFdvcmsiLCJ0b1N0cmluZyIsIlN3ZWF0bGlzdElkZW50aWZpZXJzIiwic3dlYXRsaXN0QXV0aG9ySWQiLCJzd2VhdGxpc3ROYW1lIiwiaXNSZXN0IiwiU3dlYXRsaXN0VHlwZSIsIlJlZmVycmFsQ2hhaW4iLCJvcmlnaW5hbEhvc3RJZCIsInNoYXJlZEJ5IiwiZnJvbUZpcmVzdG9yZSIsIlN3ZWF0bGlzdENvbGxlY3Rpb24iLCJzdWJ0aXRsZSIsInBpbiIsImNoYWxsZW5nZSIsIkNoYWxsZW5nZSIsInN3ZWF0bGlzdElkcyIsIm93bmVySWQiLCJwcml2YWN5IiwicGFydGljaXBhbnRzIiwicGFydGljaXBhbnQiLCJpc1B1Ymxpc2hlZCIsInN0YXR1cyIsIlByb2ZpbGVJbWFnZSIsInByb2ZpbGVJbWFnZVVSTCIsInRodW1ibmFpbFVSTCIsIlVzZXJMb2NhdGlvbiIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiYmFzZUNvbXBsZXRpb24iLCJmaXJzdENvbXBsZXRpb24iLCJzdHJlYWtCb251cyIsImNoZWNrSW5Cb251cyIsImVmZm9ydFJhdGluZyIsImNoYXRQYXJ0aWNpcGF0aW9uIiwibG9jYXRpb25DaGVja2luIiwiY29udGVudEVuZ2FnZW1lbnQiLCJlbmNvdXJhZ2VtZW50U2VudCIsImVuY291cmFnZW1lbnRSZWNlaXZlZCIsImN1bXVsYXRpdmVTdHJlYWtCb251cyIsInNoYXJlQm9udXMiLCJyZWZlcnJhbEJvbnVzIiwicGVlckNoYWxsZW5nZUJvbnVzIiwidG90YWxTdGFja1BvaW50cyIsInRvdGFsQ29tbXVuaXR5UG9pbnRzIiwidG90YWxQb2ludHMiLCJFbmNvdXJhZ2VtZW50IiwiZnJvbVVzZXIiLCJ0b1VzZXIiLCJmcm9tVXNlckRhdGEiLCJ0b1VzZXJEYXRhIiwiY3JlYXRlIiwiVXNlckNoYWxsZW5nZSIsImZjbVRva2VuIiwidXNlcm5hbWUiLCJwcm9maWxlSW1hZ2UiLCJwcm9ncmVzcyIsInJlZmVycmFsQ2hhaW4iLCJjb21wbGV0ZWRXb3Jrb3V0cyIsImN3IiwidWlkIiwibG9jYXRpb24iLCJjaXR5IiwiY291bnRyeSIsInRpbWV6b25lIiwiam9pbkRhdGUiLCJpc0N1cnJlbnRseUFjdGl2ZSIsImxhc3RBY3RpdmUiLCJjdXJyZW50U3RyZWFrIiwibG9uZ2VzdFN0cmVhayIsImNhbGN1bGF0ZUxvbmdlc3RTdHJlYWsiLCJlbmNvdXJhZ2VkVXNlcnMiLCJkIiwiZW5jb3VyYWdlZEJ5VXNlcnMiLCJjaGVja0lucyIsImhhc1JlY2VpdmVkU2hhcmVCb251cyIsImlnbm9yZU5vdGlmaWNhdGlvbnMiLCJsYXN0QWN0aXZlUm91bmRXb3Jrb3V0SWQiLCJtYXhTdHJlYWsiLCJzb3J0ZWRXb3Jrb3V0cyIsImkiLCJwcmV2RGF0ZSIsImN1cnJEYXRlIiwiaXNOZXh0RGF5IiwibWF4IiwiaXNTYW1lRGF5IiwiZGF0ZTEiLCJkYXRlMiIsIm5leHREYXkiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJ3b3Jrb3V0IiwiY2hlY2tJbiIsIkNoYWxsZW5nZVN0YXR1cyIsIkludHJvVmlkZW8iLCJpbnRyb1ZpZGVvcyIsInZpZGVvRGF0YSIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJvcmlnaW5hbElkIiwiam9pbldpbmRvd0VuZHMiLCJtaW5QYXJ0aWNpcGFudHMiLCJtYXhQYXJ0aWNpcGFudHMiLCJhbGxvd0xhdGVKb2lucyIsImNvaG9ydEF1dGhvciIsInByaWNpbmdJbmZvIiwiUHJpY2luZ0luZm8iLCJkdXJhdGlvbkluRGF5cyIsImNhbGN1bGF0ZUR1cmF0aW9uSW5EYXlzIiwiaXNDaGFsbGVuZ2VFbmRlZCIsInZpZGVvIiwic3RhcnQiLCJ2YWx1ZU9mIiwiZW5kIiwiaXNOYU4iLCJFcnJvciIsImR1cmF0aW9uSW5NaWxsaXNlY29uZHMiLCJ0b0ZpcmVzdG9yZU9iamVjdCIsIm9iaiIsInBsYWluT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaXNFbmFibGVkIiwiYW1vdW50IiwiY3VycmVuY3kiLCJmcm9tRGljdGlvbmFyeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/api/firebase/workout/types.ts\n");

/***/ }),

/***/ "./src/components/AuthWrapper.tsx":
/*!****************************************!*\
  !*** ./src/components/AuthWrapper.tsx ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/router */ \"./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-redux */ \"react-redux\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! firebase/auth */ \"firebase/auth\");\n/* harmony import */ var _redux_userSlice__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../redux/userSlice */ \"./src/redux/userSlice.ts\");\n/* harmony import */ var _api_firebase_user__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../api/firebase/user */ \"./src/api/firebase/user/index.ts\");\n/* harmony import */ var _SignInModal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./SignInModal */ \"./src/components/SignInModal.tsx\");\n/* harmony import */ var _hooks_useUser__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../hooks/useUser */ \"./src/hooks/useUser.ts\");\n/* harmony import */ var _redux_tempRedirectSlice__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../redux/tempRedirectSlice */ \"./src/redux/tempRedirectSlice.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([react_redux__WEBPACK_IMPORTED_MODULE_3__, firebase_auth__WEBPACK_IMPORTED_MODULE_4__, _redux_userSlice__WEBPACK_IMPORTED_MODULE_5__, _api_firebase_user__WEBPACK_IMPORTED_MODULE_6__, _SignInModal__WEBPACK_IMPORTED_MODULE_7__, _hooks_useUser__WEBPACK_IMPORTED_MODULE_8__, _redux_tempRedirectSlice__WEBPACK_IMPORTED_MODULE_9__]);\n([react_redux__WEBPACK_IMPORTED_MODULE_3__, firebase_auth__WEBPACK_IMPORTED_MODULE_4__, _redux_userSlice__WEBPACK_IMPORTED_MODULE_5__, _api_firebase_user__WEBPACK_IMPORTED_MODULE_6__, _SignInModal__WEBPACK_IMPORTED_MODULE_7__, _hooks_useUser__WEBPACK_IMPORTED_MODULE_8__, _redux_tempRedirectSlice__WEBPACK_IMPORTED_MODULE_9__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n\n// Utility for shallow comparison\nfunction shallowEqual(objA, objB) {\n    if (objA === objB) return true;\n    if (!objA || !objB) return false;\n    const keysA = Object.keys(objA);\n    const keysB = Object.keys(objB);\n    if (keysA.length !== keysB.length) return false;\n    const ignoreKeys = [\n        \"createdAt\",\n        \"updatedAt\",\n        \"bodyWeight\",\n        \"macros\",\n        \"profileImage\"\n    ];\n    for (let key of keysA){\n        if (ignoreKeys.includes(key)) continue;\n        const valA = objA[key];\n        const valB = objB[key];\n        const areObjects = typeof valA === \"object\" && typeof valB === \"object\";\n        if (areObjects) {\n            if (JSON.stringify(valA) !== JSON.stringify(valB)) {\n                return false;\n            }\n        } else if (valA !== valB) {\n            return false;\n        }\n    }\n    return true;\n}\nconst AuthWrapper = ({ children })=>{\n    console.log(\"AuthWrapper component mounting...\");\n    const dispatch = (0,react_redux__WEBPACK_IMPORTED_MODULE_3__.useDispatch)();\n    const auth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_4__.getAuth)();\n    const [showSignInModal, setShowSignInModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const currentUser = (0,_hooks_useUser__WEBPACK_IMPORTED_MODULE_8__.useUser)();\n    const isLoading = (0,react_redux__WEBPACK_IMPORTED_MODULE_3__.useSelector)((state)=>state.user.loading);\n    const [authChecked, setAuthChecked] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const prevUserRef = react__WEBPACK_IMPORTED_MODULE_1___default().useRef(null);\n    console.log(\"AuthWrapper setup complete, before useEffect\");\n    // Add subscription routes to public routes\n    const publicRoutes = [\n        \"/about\",\n        \"/creator\",\n        \"/rounds\",\n        \"/privacyPolicy\",\n        \"/programming\",\n        \"/100trainers\",\n        \"/starter-pack\",\n        \"/stacks\",\n        \"/moves\",\n        \"/terms\",\n        \"/press\",\n        \"100Trainers\",\n        \"/subscribe\",\n        \"/download\",\n        \"/morning-mobility-challenge\",\n        \"review\",\n        \"/MoveAndFuelATL\" // Add subscription page\n    ].map((route)=>route?.toLowerCase());\n    const publicPathPatterns = [\n        \"/round-invitation\",\n        \"/profile\",\n        \"/challenge\",\n        \"/review\",\n        \"/programming\",\n        \"/press\",\n        \"/100trainers\",\n        \"/MoveAndFuelATL\"\n    ].map((pattern)=>pattern.toLowerCase());\n    const isPublicRoute = (path)=>{\n        const normalizedPath = path.toLowerCase();\n        return publicRoutes.includes(normalizedPath) || publicPathPatterns.some((pattern)=>normalizedPath.startsWith(pattern));\n    };\n    // Add debug useEffect to track currentUser changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        console.log(\"Current User State:\", {\n            user: currentUser,\n            subscription: currentUser?.subscriptionType,\n            isNull: currentUser === null,\n            timestamp: new Date().toISOString()\n        });\n    }, [\n        currentUser\n    ]);\n    // This is the main auth effect that should contain our logs\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        console.log(\"Auth effect starting...\", {\n            pathname: router.pathname,\n            hasCurrentUser: !!currentUser,\n            timestamp: new Date().toISOString()\n        });\n        try {\n            dispatch((0,_redux_userSlice__WEBPACK_IMPORTED_MODULE_5__.setLoading)(true));\n            const unsubscribe = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_4__.onAuthStateChanged)(auth, async (firebaseUser)=>{\n                console.log(\"Auth state changed:\", {\n                    hasFirebaseUser: !!firebaseUser,\n                    email: firebaseUser?.email,\n                    timestamp: new Date().toISOString()\n                });\n                try {\n                    if (firebaseUser) {\n                        const firestoreUser = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_6__.userService.fetchUserFromFirestore(firebaseUser.uid);\n                        console.log(\"Initial Firestore user:\", {\n                            userId: firestoreUser?.id,\n                            hasUsername: !!firestoreUser?.username,\n                            username: firestoreUser?.username || \"undefined\",\n                            registrationComplete: !!firestoreUser?.registrationComplete,\n                            subscription: firestoreUser?.subscriptionType,\n                            timestamp: new Date().toISOString()\n                        });\n                        const newUserDict = firestoreUser ? firestoreUser.toDictionary() : null;\n                        if (!shallowEqual(prevUserRef.current, newUserDict)) {\n                            console.warn(\"[AuthWrapper] shallowEqual failed. Dispatching setUser. Differences:\", {\n                                prev: prevUserRef.current,\n                                next: newUserDict,\n                                diffKeys: newUserDict ? Object.keys(newUserDict).filter((key)=>key !== \"createdAt\" && key !== \"updatedAt\" && (!prevUserRef.current || prevUserRef.current[key] !== newUserDict[key])) : [\n                                    \"prev was object, next is null\"\n                                ],\n                                timestamp: new Date().toISOString()\n                            });\n                            dispatch((0,_redux_userSlice__WEBPACK_IMPORTED_MODULE_5__.setUser)(newUserDict));\n                            prevUserRef.current = newUserDict;\n                        }\n                        _api_firebase_user__WEBPACK_IMPORTED_MODULE_6__.userService.nonUICurrentUser = firestoreUser;\n                        if (!isPublicRoute(router.pathname)) {\n                            if (firestoreUser && (!firestoreUser.username || firestoreUser.username === \"\")) {\n                                console.log(\"[AuthWrapper] User needs to complete registration - showing modal\");\n                                setShowSignInModal(true);\n                            } else if (firestoreUser?.subscriptionType === _api_firebase_user__WEBPACK_IMPORTED_MODULE_6__.SubscriptionType.unsubscribed) {\n                                console.log(`[AuthWrapper] User onboarded but unsubscribed on protected route (${router.pathname}). Redirecting to /subscribe.`);\n                                if (router.pathname.toLowerCase() !== \"/subscribe\") {\n                                    router.push(\"/subscribe\");\n                                }\n                                setShowSignInModal(false);\n                            } else {\n                                console.log(\"[AuthWrapper] User onboarded and subscribed. Hiding modal if shown.\");\n                                setShowSignInModal(false);\n                            }\n                        }\n                    } else {\n                        console.log(\"No firebase user, clearing state\");\n                        dispatch((0,_redux_userSlice__WEBPACK_IMPORTED_MODULE_5__.setUser)(null));\n                        _api_firebase_user__WEBPACK_IMPORTED_MODULE_6__.userService.nonUICurrentUser = null;\n                        if (!isPublicRoute(router.pathname)) {\n                            console.log(`[AuthWrapper] User not authenticated on protected route: ${router.asPath}. Setting redirect path and showing modal.`);\n                            dispatch((0,_redux_tempRedirectSlice__WEBPACK_IMPORTED_MODULE_9__.setLoginRedirectPath)(router.asPath));\n                            setShowSignInModal(true);\n                        }\n                    }\n                } catch (error) {\n                    console.error(\"Error in auth process:\", error);\n                    dispatch((0,_redux_userSlice__WEBPACK_IMPORTED_MODULE_5__.setUser)(null));\n                } finally{\n                    dispatch((0,_redux_userSlice__WEBPACK_IMPORTED_MODULE_5__.setLoading)(false));\n                    setAuthChecked(true);\n                }\n            });\n            return ()=>unsubscribe();\n        } catch (error) {\n            console.error(\"Auth wrapper error:\", error);\n            dispatch((0,_redux_userSlice__WEBPACK_IMPORTED_MODULE_5__.setLoading)(false));\n            setAuthChecked(true);\n        }\n    }, [\n        auth,\n        dispatch,\n        router.pathname,\n        router\n    ]);\n    const handleSignInSuccess = ()=>{\n    // Modal will auto-close based on Redux state\n    };\n    const handleSignInError = (error)=>{\n        console.error(\"Sign in error:\", error);\n    };\n    // Don't render anything until initial auth check is complete\n    if (!authChecked || isLoading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex items-center justify-center min-h-screen\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-zinc-900\"\n            }, void 0, false, {\n                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/AuthWrapper.tsx\",\n                lineNumber: 189,\n                columnNumber: 6\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/AuthWrapper.tsx\",\n            lineNumber: 188,\n            columnNumber: 11\n        }, undefined);\n    }\n    // Final Render\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            children,\n            showSignInModal && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_SignInModal__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                isVisible: showSignInModal,\n                onClose: ()=>{\n                    console.log(\"[AuthWrapper] Closing SignInModal\");\n                    setShowSignInModal(false);\n                },\n                // Pass necessary handlers\n                onSignInSuccess: handleSignInSuccess,\n                onSignInError: handleSignInError,\n                onRegistrationComplete: ()=>{\n                    console.log(\"[AuthWrapper] Registration complete from modal\");\n                    setShowSignInModal(false);\n                },\n                onQuizComplete: ()=>{\n                    console.log(\"[AuthWrapper] Quiz complete from modal\");\n                    setShowSignInModal(false);\n                }\n            }, void 0, false, {\n                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/AuthWrapper.tsx\",\n                lineNumber: 199,\n                columnNumber: 10\n            }, undefined)\n        ]\n    }, void 0, true);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AuthWrapper);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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V3JhcHBlci50c3g/YmRlYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJztcbmltcG9ydCB7IHVzZURpc3BhdGNoLCB1c2VTZWxlY3RvciB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCB7IG9uQXV0aFN0YXRlQ2hhbmdlZCwgZ2V0QXV0aCB9IGZyb20gJ2ZpcmViYXNlL2F1dGgnO1xuaW1wb3J0IHsgc2V0VXNlciwgc2V0TG9hZGluZyB9IGZyb20gJy4uL3JlZHV4L3VzZXJTbGljZSc7XG5pbXBvcnQgeyB1c2VyU2VydmljZSwgU3Vic2NyaXB0aW9uVHlwZSB9IGZyb20gJy4uL2FwaS9maXJlYmFzZS91c2VyJztcbmltcG9ydCBTaWduSW5Nb2RhbCBmcm9tICcuL1NpZ25Jbk1vZGFsJztcbmltcG9ydCB0eXBlIHsgUm9vdFN0YXRlIH0gZnJvbSAnLi4vcmVkdXgvc3RvcmUnO1xuaW1wb3J0IHsgdXNlVXNlciB9IGZyb20gJy4uL2hvb2tzL3VzZVVzZXInO1xuaW1wb3J0IHsgc2V0TG9naW5SZWRpcmVjdFBhdGggfSBmcm9tICcuLi9yZWR1eC90ZW1wUmVkaXJlY3RTbGljZSc7XG5cbmludGVyZmFjZSBBdXRoV3JhcHBlclByb3BzIHtcbiBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlO1xufVxuXG4vLyBVdGlsaXR5IGZvciBzaGFsbG93IGNvbXBhcmlzb25cbmZ1bmN0aW9uIHNoYWxsb3dFcXVhbChvYmpBOiBhbnksIG9iakI6IGFueSk6IGJvb2xlYW4ge1xuICBpZiAob2JqQSA9PT0gb2JqQikgcmV0dXJuIHRydWU7XG4gIGlmICghb2JqQSB8fCAhb2JqQikgcmV0dXJuIGZhbHNlO1xuXG4gIGNvbnN0IGtleXNBID0gT2JqZWN0LmtleXMob2JqQSk7XG4gIGNvbnN0IGtleXNCID0gT2JqZWN0LmtleXMob2JqQik7XG5cbiAgaWYgKGtleXNBLmxlbmd0aCAhPT0ga2V5c0IubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG5cbiAgY29uc3QgaWdub3JlS2V5cyA9IFsnY3JlYXRlZEF0JywgJ3VwZGF0ZWRBdCcsICdib2R5V2VpZ2h0JywgJ21hY3JvcycsICdwcm9maWxlSW1hZ2UnXTtcblxuICBmb3IgKGxldCBrZXkgb2Yga2V5c0EpIHtcbiAgICBpZiAoaWdub3JlS2V5cy5pbmNsdWRlcyhrZXkpKSBjb250aW51ZTtcblxuICAgIGNvbnN0IHZhbEEgPSBvYmpBW2tleV07XG4gICAgY29uc3QgdmFsQiA9IG9iakJba2V5XTtcblxuICAgIGNvbnN0IGFyZU9iamVjdHMgPSB0eXBlb2YgdmFsQSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbEIgPT09ICdvYmplY3QnO1xuXG4gICAgaWYgKGFyZU9iamVjdHMpIHtcbiAgICAgIGlmIChKU09OLnN0cmluZ2lmeSh2YWxBKSAhPT0gSlNPTi5zdHJpbmdpZnkodmFsQikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodmFsQSAhPT0gdmFsQikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuY29uc3QgQXV0aFdyYXBwZXI6IFJlYWN0LkZDPEF1dGhXcmFwcGVyUHJvcHM+ID0gKHsgY2hpbGRyZW4gfSkgPT4ge1xuICBjb25zb2xlLmxvZygnQXV0aFdyYXBwZXIgY29tcG9uZW50IG1vdW50aW5nLi4uJyk7XG5cbiAgY29uc3QgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpO1xuICBjb25zdCBhdXRoID0gZ2V0QXV0aCgpO1xuICBjb25zdCBbc2hvd1NpZ25Jbk1vZGFsLCBzZXRTaG93U2lnbkluTW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgXG4gIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlVXNlcigpO1xuICBjb25zdCBpc0xvYWRpbmcgPSB1c2VTZWxlY3Rvcigoc3RhdGU6IFJvb3RTdGF0ZSkgPT4gc3RhdGUudXNlci5sb2FkaW5nKTtcbiAgY29uc3QgW2F1dGhDaGVja2VkLCBzZXRBdXRoQ2hlY2tlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHByZXZVc2VyUmVmID0gUmVhY3QudXNlUmVmPGFueT4obnVsbCk7XG5cbiAgY29uc29sZS5sb2coJ0F1dGhXcmFwcGVyIHNldHVwIGNvbXBsZXRlLCBiZWZvcmUgdXNlRWZmZWN0Jyk7XG5cbiAgLy8gQWRkIHN1YnNjcmlwdGlvbiByb3V0ZXMgdG8gcHVibGljIHJvdXRlc1xuICBjb25zdCBwdWJsaWNSb3V0ZXMgPSBbXG4gICAgJy9hYm91dCcsICcvY3JlYXRvcicsICcvcm91bmRzJywgJy9wcml2YWN5UG9saWN5JywgJy9wcm9ncmFtbWluZycsICcvMTAwdHJhaW5lcnMnLCBcbiAgICAnL3N0YXJ0ZXItcGFjaycsICcvc3RhY2tzJywgJy9tb3ZlcycsICcvdGVybXMnLCAnL3ByZXNzJywgJzEwMFRyYWluZXJzJyxcbiAgICAnL3N1YnNjcmliZScsICcvZG93bmxvYWQnLCAnL21vcm5pbmctbW9iaWxpdHktY2hhbGxlbmdlJywgJ3JldmlldycsICcvTW92ZUFuZEZ1ZWxBVEwnIC8vIEFkZCBzdWJzY3JpcHRpb24gcGFnZVxuICBdLm1hcChyb3V0ZSA9PiByb3V0ZT8udG9Mb3dlckNhc2UoKSk7XG4gXG4gIGNvbnN0IHB1YmxpY1BhdGhQYXR0ZXJucyA9IFtcbiAgICAnL3JvdW5kLWludml0YXRpb24nLCAnL3Byb2ZpbGUnLCAnL2NoYWxsZW5nZScsICcvcmV2aWV3JywgJy9wcm9ncmFtbWluZycsICcvcHJlc3MnLCAnLzEwMHRyYWluZXJzJywgJy9Nb3ZlQW5kRnVlbEFUTCdcbiAgXS5tYXAocGF0dGVybiA9PiBwYXR0ZXJuLnRvTG93ZXJDYXNlKCkpO1xuIFxuICBjb25zdCBpc1B1YmxpY1JvdXRlID0gKHBhdGg6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gcGF0aC50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiBwdWJsaWNSb3V0ZXMuaW5jbHVkZXMobm9ybWFsaXplZFBhdGgpIHx8IFxuICAgICAgICAgICBwdWJsaWNQYXRoUGF0dGVybnMuc29tZShwYXR0ZXJuID0+IG5vcm1hbGl6ZWRQYXRoLnN0YXJ0c1dpdGgocGF0dGVybikpO1xuICB9O1xuIFxuICAgIC8vIEFkZCBkZWJ1ZyB1c2VFZmZlY3QgdG8gdHJhY2sgY3VycmVudFVzZXIgY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdDdXJyZW50IFVzZXIgU3RhdGU6Jywge1xuICAgICAgdXNlcjogY3VycmVudFVzZXIsXG4gICAgICBzdWJzY3JpcHRpb246IGN1cnJlbnRVc2VyPy5zdWJzY3JpcHRpb25UeXBlLFxuICAgICAgaXNOdWxsOiBjdXJyZW50VXNlciA9PT0gbnVsbCxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSk7XG5cbiAgfSwgW2N1cnJlbnRVc2VyXSk7XG4gICAgXG4gIC8vIFRoaXMgaXMgdGhlIG1haW4gYXV0aCBlZmZlY3QgdGhhdCBzaG91bGQgY29udGFpbiBvdXIgbG9nc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdBdXRoIGVmZmVjdCBzdGFydGluZy4uLicsIHtcbiAgICAgIHBhdGhuYW1lOiByb3V0ZXIucGF0aG5hbWUsXG4gICAgICBoYXNDdXJyZW50VXNlcjogISFjdXJyZW50VXNlcixcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSk7XG5cbiAgICB0cnkge1xuICAgICAgZGlzcGF0Y2goc2V0TG9hZGluZyh0cnVlKSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gb25BdXRoU3RhdGVDaGFuZ2VkKGF1dGgsIGFzeW5jIChmaXJlYmFzZVVzZXIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ0F1dGggc3RhdGUgY2hhbmdlZDonLCB7XG4gICAgICAgICAgaGFzRmlyZWJhc2VVc2VyOiAhIWZpcmViYXNlVXNlcixcbiAgICAgICAgICBlbWFpbDogZmlyZWJhc2VVc2VyPy5lbWFpbCxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmIChmaXJlYmFzZVVzZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpcmVzdG9yZVVzZXIgPSBhd2FpdCB1c2VyU2VydmljZS5mZXRjaFVzZXJGcm9tRmlyZXN0b3JlKGZpcmViYXNlVXNlci51aWQpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0luaXRpYWwgRmlyZXN0b3JlIHVzZXI6Jywge1xuICAgICAgICAgICAgICB1c2VySWQ6IGZpcmVzdG9yZVVzZXI/LmlkLFxuICAgICAgICAgICAgICBoYXNVc2VybmFtZTogISFmaXJlc3RvcmVVc2VyPy51c2VybmFtZSxcbiAgICAgICAgICAgICAgdXNlcm5hbWU6IGZpcmVzdG9yZVVzZXI/LnVzZXJuYW1lIHx8ICd1bmRlZmluZWQnLFxuICAgICAgICAgICAgICByZWdpc3RyYXRpb25Db21wbGV0ZTogISFmaXJlc3RvcmVVc2VyPy5yZWdpc3RyYXRpb25Db21wbGV0ZSxcbiAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uOiBmaXJlc3RvcmVVc2VyPy5zdWJzY3JpcHRpb25UeXBlLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IG5ld1VzZXJEaWN0ID0gZmlyZXN0b3JlVXNlciA/IGZpcmVzdG9yZVVzZXIudG9EaWN0aW9uYXJ5KCkgOiBudWxsO1xuICAgICAgICAgICAgaWYgKCFzaGFsbG93RXF1YWwocHJldlVzZXJSZWYuY3VycmVudCwgbmV3VXNlckRpY3QpKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybignW0F1dGhXcmFwcGVyXSBzaGFsbG93RXF1YWwgZmFpbGVkLiBEaXNwYXRjaGluZyBzZXRVc2VyLiBEaWZmZXJlbmNlczonLCB7XG4gICAgICAgICAgICAgICAgcHJldjogcHJldlVzZXJSZWYuY3VycmVudCxcbiAgICAgICAgICAgICAgICBuZXh0OiBuZXdVc2VyRGljdCxcbiAgICAgICAgICAgICAgICBkaWZmS2V5czogbmV3VXNlckRpY3QgPyBPYmplY3Qua2V5cyhuZXdVc2VyRGljdCkuZmlsdGVyKGtleSA9PiBcbiAgICAgICAgICAgICAgICAgIGtleSAhPT0gJ2NyZWF0ZWRBdCcgJiYga2V5ICE9PSAndXBkYXRlZEF0JyAmJiBcbiAgICAgICAgICAgICAgICAgICghcHJldlVzZXJSZWYuY3VycmVudCB8fCBwcmV2VXNlclJlZi5jdXJyZW50W2tleV0gIT09IG5ld1VzZXJEaWN0W2tleV0pXG4gICAgICAgICAgICAgICAgKSA6IFsncHJldiB3YXMgb2JqZWN0LCBuZXh0IGlzIG51bGwnXSxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgZGlzcGF0Y2goc2V0VXNlcihuZXdVc2VyRGljdCkpO1xuICAgICAgICAgICAgICBwcmV2VXNlclJlZi5jdXJyZW50ID0gbmV3VXNlckRpY3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1c2VyU2VydmljZS5ub25VSUN1cnJlbnRVc2VyID0gZmlyZXN0b3JlVXNlcjtcblxuICAgICAgICAgICAgaWYgKCFpc1B1YmxpY1JvdXRlKHJvdXRlci5wYXRobmFtZSkpIHtcbiAgICAgICAgICAgICAgaWYgKGZpcmVzdG9yZVVzZXIgJiYgKCFmaXJlc3RvcmVVc2VyLnVzZXJuYW1lIHx8IGZpcmVzdG9yZVVzZXIudXNlcm5hbWUgPT09ICcnKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQXV0aFdyYXBwZXJdIFVzZXIgbmVlZHMgdG8gY29tcGxldGUgcmVnaXN0cmF0aW9uIC0gc2hvd2luZyBtb2RhbCcpO1xuICAgICAgICAgICAgICAgIHNldFNob3dTaWduSW5Nb2RhbCh0cnVlKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChmaXJlc3RvcmVVc2VyPy5zdWJzY3JpcHRpb25UeXBlID09PSBTdWJzY3JpcHRpb25UeXBlLnVuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbQXV0aFdyYXBwZXJdIFVzZXIgb25ib2FyZGVkIGJ1dCB1bnN1YnNjcmliZWQgb24gcHJvdGVjdGVkIHJvdXRlICgke3JvdXRlci5wYXRobmFtZX0pLiBSZWRpcmVjdGluZyB0byAvc3Vic2NyaWJlLmApO1xuICAgICAgICAgICAgICAgIGlmIChyb3V0ZXIucGF0aG5hbWUudG9Mb3dlckNhc2UoKSAhPT0gJy9zdWJzY3JpYmUnKSB7XG4gICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCgnL3N1YnNjcmliZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXRTaG93U2lnbkluTW9kYWwoZmFsc2UpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQXV0aFdyYXBwZXJdIFVzZXIgb25ib2FyZGVkIGFuZCBzdWJzY3JpYmVkLiBIaWRpbmcgbW9kYWwgaWYgc2hvd24uJyk7XG4gICAgICAgICAgICAgICAgc2V0U2hvd1NpZ25Jbk1vZGFsKGZhbHNlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gZmlyZWJhc2UgdXNlciwgY2xlYXJpbmcgc3RhdGUnKTtcbiAgICAgICAgICAgIGRpc3BhdGNoKHNldFVzZXIobnVsbCkpO1xuICAgICAgICAgICAgdXNlclNlcnZpY2Uubm9uVUlDdXJyZW50VXNlciA9IG51bGw7XG4gICAgICAgICAgICBpZiAoIWlzUHVibGljUm91dGUocm91dGVyLnBhdGhuYW1lKSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW0F1dGhXcmFwcGVyXSBVc2VyIG5vdCBhdXRoZW50aWNhdGVkIG9uIHByb3RlY3RlZCByb3V0ZTogJHtyb3V0ZXIuYXNQYXRofS4gU2V0dGluZyByZWRpcmVjdCBwYXRoIGFuZCBzaG93aW5nIG1vZGFsLmApO1xuICAgICAgICAgICAgICBkaXNwYXRjaChzZXRMb2dpblJlZGlyZWN0UGF0aChyb3V0ZXIuYXNQYXRoKSk7XG4gICAgICAgICAgICAgIHNldFNob3dTaWduSW5Nb2RhbCh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gYXV0aCBwcm9jZXNzOicsIGVycm9yKTtcbiAgICAgICAgICBkaXNwYXRjaChzZXRVc2VyKG51bGwpKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBkaXNwYXRjaChzZXRMb2FkaW5nKGZhbHNlKSk7XG4gICAgICAgICAgc2V0QXV0aENoZWNrZWQodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gKCkgPT4gdW5zdWJzY3JpYmUoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignQXV0aCB3cmFwcGVyIGVycm9yOicsIGVycm9yKTtcbiAgICAgIGRpc3BhdGNoKHNldExvYWRpbmcoZmFsc2UpKTtcbiAgICAgIHNldEF1dGhDaGVja2VkKHRydWUpO1xuICAgIH1cbiAgfSwgW2F1dGgsIGRpc3BhdGNoLCByb3V0ZXIucGF0aG5hbWUsIHJvdXRlcl0pO1xuXG4gY29uc3QgaGFuZGxlU2lnbkluU3VjY2VzcyA9ICgpID0+IHtcbiAgIC8vIE1vZGFsIHdpbGwgYXV0by1jbG9zZSBiYXNlZCBvbiBSZWR1eCBzdGF0ZVxuIH07XG5cbiBjb25zdCBoYW5kbGVTaWduSW5FcnJvciA9IChlcnJvcjogRXJyb3IpID0+IHtcbiAgIGNvbnNvbGUuZXJyb3IoJ1NpZ24gaW4gZXJyb3I6JywgZXJyb3IpO1xuIH07XG5cbiAvLyBEb24ndCByZW5kZXIgYW55dGhpbmcgdW50aWwgaW5pdGlhbCBhdXRoIGNoZWNrIGlzIGNvbXBsZXRlXG4gaWYgKCFhdXRoQ2hlY2tlZCB8fCBpc0xvYWRpbmcpIHtcbiAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG1pbi1oLXNjcmVlblwiPlxuICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiByb3VuZGVkLWZ1bGwgaC0xMiB3LTEyIGJvcmRlci10LTIgYm9yZGVyLWItMiBib3JkZXItemluYy05MDBcIj48L2Rpdj5cbiAgIDwvZGl2PjtcbiB9XG5cbiAvLyBGaW5hbCBSZW5kZXJcbiByZXR1cm4gKFxuICAgPD5cbiAgICAge2NoaWxkcmVufVxuICAgICB7LyogUmVuZGVyIFNpZ25Jbk1vZGFsIG9ubHkgaWYgbmVlZGVkICh1bmF1dGhlbnRpY2F0ZWQgb24gcHJvdGVjdGVkIHJvdXRlLCBvciBvbmJvYXJkaW5nIGluY29tcGxldGUpICovfVxuICAgICB7c2hvd1NpZ25Jbk1vZGFsICYmIChcbiAgICAgICAgIDxTaWduSW5Nb2RhbFxuICAgICAgICAgICBpc1Zpc2libGU9e3Nob3dTaWduSW5Nb2RhbH0gLy8gQ29udHJvbGxlZCBieSBzdGF0ZVxuICAgICAgICAgICBvbkNsb3NlPXsoKSA9PiB7XG4gICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0F1dGhXcmFwcGVyXSBDbG9zaW5nIFNpZ25Jbk1vZGFsJyk7XG4gICAgICAgICAgICAgICBzZXRTaG93U2lnbkluTW9kYWwoZmFsc2UpO1xuICAgICAgICAgICB9fVxuICAgICAgICAgICAvLyBQYXNzIG5lY2Vzc2FyeSBoYW5kbGVyc1xuICAgICAgICAgICBvblNpZ25JblN1Y2Nlc3M9e2hhbmRsZVNpZ25JblN1Y2Nlc3N9IFxuICAgICAgICAgICBvblNpZ25JbkVycm9yPXtoYW5kbGVTaWduSW5FcnJvcn1cbiAgICAgICAgICAgb25SZWdpc3RyYXRpb25Db21wbGV0ZT17KCkgPT4geyAvLyBFbnN1cmUgdGhpcyBoaWRlcyBtb2RhbCB0b29cbiAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQXV0aFdyYXBwZXJdIFJlZ2lzdHJhdGlvbiBjb21wbGV0ZSBmcm9tIG1vZGFsJyk7XG4gICAgICAgICAgICAgICBzZXRTaG93U2lnbkluTW9kYWwoZmFsc2UpO1xuICAgICAgICAgICB9fVxuICAgICAgICAgICBvblF1aXpDb21wbGV0ZT17KCkgPT4geyAvLyBFbnN1cmUgdGhpcyBoaWRlcyBtb2RhbCB0b29cbiAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbQXV0aFdyYXBwZXJdIFF1aXogY29tcGxldGUgZnJvbSBtb2RhbCcpO1xuICAgICAgICAgICAgICAgc2V0U2hvd1NpZ25Jbk1vZGFsKGZhbHNlKTtcbiAgICAgICAgICAgfX1cbiAgICAgICAgICAgIC8vIEFkZCBhbnkgb3RoZXIgaGFuZGxlcnMgU2lnbkluTW9kYWwgZXhwZWN0cyB0aGF0IG1pZ2h0IHRyaWdnZXIgYSBjbG9zZS9zdGF0ZSBjaGFuZ2VcbiAgICAgICAgIC8+XG4gICAgICl9XG4gICA8Lz5cbiApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQXV0aFdyYXBwZXI7Il0sIm5hbWVzIjpbIlJlYWN0IiwidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJ1c2VSb3V0ZXIiLCJ1c2VEaXNwYXRjaCIsInVzZVNlbGVjdG9yIiwib25BdXRoU3RhdGVDaGFuZ2VkIiwiZ2V0QXV0aCIsInNldFVzZXIiLCJzZXRMb2FkaW5nIiwidXNlclNlcnZpY2UiLCJTdWJzY3JpcHRpb25UeXBlIiwiU2lnbkluTW9kYWwiLCJ1c2VVc2VyIiwic2V0TG9naW5SZWRpcmVjdFBhdGgiLCJzaGFsbG93RXF1YWwiLCJvYmpBIiwib2JqQiIsImtleXNBIiwiT2JqZWN0Iiwia2V5cyIsImtleXNCIiwibGVuZ3RoIiwiaWdub3JlS2V5cyIsImtleSIsImluY2x1ZGVzIiwidmFsQSIsInZhbEIiLCJhcmVPYmplY3RzIiwiSlNPTiIsInN0cmluZ2lmeSIsIkF1dGhXcmFwcGVyIiwiY2hpbGRyZW4iLCJjb25zb2xlIiwibG9nIiwiZGlzcGF0Y2giLCJhdXRoIiwic2hvd1NpZ25Jbk1vZGFsIiwic2V0U2hvd1NpZ25Jbk1vZGFsIiwicm91dGVyIiwiY3VycmVudFVzZXIiLCJpc0xvYWRpbmciLCJzdGF0ZSIsInVzZXIiLCJsb2FkaW5nIiwiYXV0aENoZWNrZWQiLCJzZXRBdXRoQ2hlY2tlZCIsInByZXZVc2VyUmVmIiwidXNlUmVmIiwicHVibGljUm91dGVzIiwibWFwIiwicm91dGUiLCJ0b0xvd2VyQ2FzZSIsInB1YmxpY1BhdGhQYXR0ZXJucyIsInBhdHRlcm4iLCJpc1B1YmxpY1JvdXRlIiwicGF0aCIsIm5vcm1hbGl6ZWRQYXRoIiwic29tZSIsInN0YXJ0c1dpdGgiLCJzdWJzY3JpcHRpb24iLCJzdWJzY3JpcHRpb25UeXBlIiwiaXNOdWxsIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwicGF0aG5hbWUiLCJoYXNDdXJyZW50VXNlciIsInVuc3Vic2NyaWJlIiwiZmlyZWJhc2VVc2VyIiwiaGFzRmlyZWJhc2VVc2VyIiwiZW1haWwiLCJmaXJlc3RvcmVVc2VyIiwiZmV0Y2hVc2VyRnJvbUZpcmVzdG9yZSIsInVpZCIsInVzZXJJZCIsImlkIiwiaGFzVXNlcm5hbWUiLCJ1c2VybmFtZSIsInJlZ2lzdHJhdGlvbkNvbXBsZXRlIiwibmV3VXNlckRpY3QiLCJ0b0RpY3Rpb25hcnkiLCJjdXJyZW50Iiwid2FybiIsInByZXYiLCJuZXh0IiwiZGlmZktleXMiLCJmaWx0ZXIiLCJub25VSUN1cnJlbnRVc2VyIiwidW5zdWJzY3JpYmVkIiwicHVzaCIsImFzUGF0aCIsImVycm9yIiwiaGFuZGxlU2lnbkluU3VjY2VzcyIsImhhbmRsZVNpZ25JbkVycm9yIiwiZGl2IiwiY2xhc3NOYW1lIiwiaXNWaXNpYmxlIiwib25DbG9zZSIsIm9uU2lnbkluU3VjY2VzcyIsIm9uU2lnbkluRXJyb3IiLCJvblJlZ2lzdHJhdGlvbkNvbXBsZXRlIiwib25RdWl6Q29tcGxldGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/AuthWrapper.tsx\n");

/***/ }),

/***/ "./src/components/ErrorBoundary.tsx":
/*!******************************************!*\
  !*** ./src/components/ErrorBoundary.tsx ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass ErrorBoundary extends react__WEBPACK_IMPORTED_MODULE_1__.Component {\n    static getDerivedStateFromError(error) {\n        // Update state so the next render will show the fallback UI.\n        return {\n            hasError: true,\n            error\n        };\n    }\n    componentDidCatch(error, errorInfo) {\n        // You can also log the error to an error reporting service\n        console.error(\"Uncaught error in ErrorBoundary:\", error, errorInfo);\n    // Example: logErrorToMyService(error, errorInfo);\n    }\n    render() {\n        if (this.state.hasError) {\n            // You can render any custom fallback UI\n            if (this.props.fallbackRender) {\n                return this.props.fallbackRender(this.state.error);\n            }\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    padding: \"20px\",\n                    textAlign: \"center\"\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                        children: \"Something went wrong.\"\n                    }, void 0, false, {\n                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/ErrorBoundary.tsx\",\n                        lineNumber: 38,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        children: \"We're sorry for the inconvenience. Please try refreshing the page, or contact support if the problem persists.\"\n                    }, void 0, false, {\n                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/ErrorBoundary.tsx\",\n                        lineNumber: 39,\n                        columnNumber: 11\n                    }, this),\n                     true && this.state.error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"pre\", {\n                        style: {\n                            marginTop: \"20px\",\n                            textAlign: \"left\",\n                            background: \"#f0f0f0\",\n                            padding: \"10px\",\n                            borderRadius: \"5px\"\n                        },\n                        children: this.state.error.toString()\n                    }, void 0, false, {\n                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/ErrorBoundary.tsx\",\n                        lineNumber: 42,\n                        columnNumber: 13\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/ErrorBoundary.tsx\",\n                lineNumber: 37,\n                columnNumber: 9\n            }, this);\n        }\n        return this.props.children;\n    }\n    constructor(...args){\n        super(...args);\n        this.state = {\n            hasError: false,\n            error: null\n        };\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ErrorBoundary);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9FcnJvckJvdW5kYXJ5LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBK0Q7QUFZL0QsTUFBTUUsc0JBQXNCRCw0Q0FBU0E7SUFNbkMsT0FBY0UseUJBQXlCQyxLQUFZLEVBQVM7UUFDMUQsNkRBQTZEO1FBQzdELE9BQU87WUFBRUMsVUFBVTtZQUFNRDtRQUFNO0lBQ2pDO0lBRU9FLGtCQUFrQkYsS0FBWSxFQUFFRyxTQUFvQixFQUFFO1FBQzNELDJEQUEyRDtRQUMzREMsUUFBUUosS0FBSyxDQUFDLG9DQUFvQ0EsT0FBT0c7SUFDekQsa0RBQWtEO0lBQ3BEO0lBRU9FLFNBQVM7UUFDZCxJQUFJLElBQUksQ0FBQ0MsS0FBSyxDQUFDTCxRQUFRLEVBQUU7WUFDdkIsd0NBQXdDO1lBQ3hDLElBQUksSUFBSSxDQUFDTSxLQUFLLENBQUNDLGNBQWMsRUFBRTtnQkFDN0IsT0FBTyxJQUFJLENBQUNELEtBQUssQ0FBQ0MsY0FBYyxDQUFDLElBQUksQ0FBQ0YsS0FBSyxDQUFDTixLQUFLO1lBQ25EO1lBQ0EscUJBQ0UsOERBQUNTO2dCQUFJQyxPQUFPO29CQUFFQyxTQUFTO29CQUFRQyxXQUFXO2dCQUFTOztrQ0FDakQsOERBQUNDO2tDQUFHOzs7Ozs7a0NBQ0osOERBQUNDO2tDQUFFOzs7Ozs7b0JBdENiLEtBd0NvQyxJQUFpQixJQUFJLENBQUNSLEtBQUssQ0FBQ04sS0FBSyxrQkFDekQsOERBQUNlO3dCQUFJTCxPQUFPOzRCQUFFTSxXQUFXOzRCQUFRSixXQUFXOzRCQUFRSyxZQUFZOzRCQUFXTixTQUFTOzRCQUFRTyxjQUFjO3dCQUFNO2tDQUM3RyxJQUFJLENBQUNaLEtBQUssQ0FBQ04sS0FBSyxDQUFDbUIsUUFBUTs7Ozs7Ozs7Ozs7O1FBS3BDO1FBRUEsT0FBTyxJQUFJLENBQUNaLEtBQUssQ0FBQ2EsUUFBUTtJQUM1Qjs7O2FBckNPZCxRQUFlO1lBQ3BCTCxVQUFVO1lBQ1ZELE9BQU87UUFDVDs7QUFtQ0Y7QUFFQSxpRUFBZUYsYUFBYUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL215LWFwcC8uL3NyYy9jb21wb25lbnRzL0Vycm9yQm91bmRhcnkudHN4P2Y2MGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCwgRXJyb3JJbmZvLCBSZWFjdE5vZGUgfSBmcm9tIFwicmVhY3RcIjtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgY2hpbGRyZW46IFJlYWN0Tm9kZTtcbiAgZmFsbGJhY2tSZW5kZXI/OiAoZXJyb3I6IEVycm9yKSA9PiBSZWFjdE5vZGU7XG59XG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIGhhc0Vycm9yOiBib29sZWFuO1xuICBlcnJvcjogRXJyb3IgfCBudWxsO1xufVxuXG5jbGFzcyBFcnJvckJvdW5kYXJ5IGV4dGVuZHMgQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xuICBwdWJsaWMgc3RhdGU6IFN0YXRlID0ge1xuICAgIGhhc0Vycm9yOiBmYWxzZSxcbiAgICBlcnJvcjogbnVsbCxcbiAgfTtcblxuICBwdWJsaWMgc3RhdGljIGdldERlcml2ZWRTdGF0ZUZyb21FcnJvcihlcnJvcjogRXJyb3IpOiBTdGF0ZSB7XG4gICAgLy8gVXBkYXRlIHN0YXRlIHNvIHRoZSBuZXh0IHJlbmRlciB3aWxsIHNob3cgdGhlIGZhbGxiYWNrIFVJLlxuICAgIHJldHVybiB7IGhhc0Vycm9yOiB0cnVlLCBlcnJvciB9O1xuICB9XG5cbiAgcHVibGljIGNvbXBvbmVudERpZENhdGNoKGVycm9yOiBFcnJvciwgZXJyb3JJbmZvOiBFcnJvckluZm8pIHtcbiAgICAvLyBZb3UgY2FuIGFsc28gbG9nIHRoZSBlcnJvciB0byBhbiBlcnJvciByZXBvcnRpbmcgc2VydmljZVxuICAgIGNvbnNvbGUuZXJyb3IoXCJVbmNhdWdodCBlcnJvciBpbiBFcnJvckJvdW5kYXJ5OlwiLCBlcnJvciwgZXJyb3JJbmZvKTtcbiAgICAvLyBFeGFtcGxlOiBsb2dFcnJvclRvTXlTZXJ2aWNlKGVycm9yLCBlcnJvckluZm8pO1xuICB9XG5cbiAgcHVibGljIHJlbmRlcigpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5oYXNFcnJvcikge1xuICAgICAgLy8gWW91IGNhbiByZW5kZXIgYW55IGN1c3RvbSBmYWxsYmFjayBVSVxuICAgICAgaWYgKHRoaXMucHJvcHMuZmFsbGJhY2tSZW5kZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuZmFsbGJhY2tSZW5kZXIodGhpcy5zdGF0ZS5lcnJvciEpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBzdHlsZT17eyBwYWRkaW5nOiAnMjBweCcsIHRleHRBbGlnbjogJ2NlbnRlcicgfX0+XG4gICAgICAgICAgPGgxPlNvbWV0aGluZyB3ZW50IHdyb25nLjwvaDE+XG4gICAgICAgICAgPHA+V2UncmUgc29ycnkgZm9yIHRoZSBpbmNvbnZlbmllbmNlLiBQbGVhc2UgdHJ5IHJlZnJlc2hpbmcgdGhlIHBhZ2UsIG9yIGNvbnRhY3Qgc3VwcG9ydCBpZiB0aGUgcHJvYmxlbSBwZXJzaXN0cy48L3A+XG4gICAgICAgICAgey8qIE9wdGlvbmFsbHkgZGlzcGxheSBlcnJvciBtZXNzYWdlIGluIGRldiBtb2RlICovfVxuICAgICAgICAgIHtwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyAmJiB0aGlzLnN0YXRlLmVycm9yICYmIChcbiAgICAgICAgICAgIDxwcmUgc3R5bGU9e3sgbWFyZ2luVG9wOiAnMjBweCcsIHRleHRBbGlnbjogJ2xlZnQnLCBiYWNrZ3JvdW5kOiAnI2YwZjBmMCcsIHBhZGRpbmc6ICcxMHB4JywgYm9yZGVyUmFkaXVzOiAnNXB4JyB9fT5cbiAgICAgICAgICAgICAge3RoaXMuc3RhdGUuZXJyb3IudG9TdHJpbmcoKX1cbiAgICAgICAgICAgIDwvcHJlPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wcm9wcy5jaGlsZHJlbjtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBFcnJvckJvdW5kYXJ5OyAiXSwibmFtZXMiOlsiUmVhY3QiLCJDb21wb25lbnQiLCJFcnJvckJvdW5kYXJ5IiwiZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yIiwiZXJyb3IiLCJoYXNFcnJvciIsImNvbXBvbmVudERpZENhdGNoIiwiZXJyb3JJbmZvIiwiY29uc29sZSIsInJlbmRlciIsInN0YXRlIiwicHJvcHMiLCJmYWxsYmFja1JlbmRlciIsImRpdiIsInN0eWxlIiwicGFkZGluZyIsInRleHRBbGlnbiIsImgxIiwicCIsInByZSIsIm1hcmdpblRvcCIsImJhY2tncm91bmQiLCJib3JkZXJSYWRpdXMiLCJ0b1N0cmluZyIsImNoaWxkcmVuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/ErrorBoundary.tsx\n");

/***/ }),

/***/ "./src/components/SignInModal.tsx":
/*!****************************************!*\
  !*** ./src/components/SignInModal.tsx ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/auth */ \"firebase/auth\");\n/* harmony import */ var _barrel_optimize_names_Camera_Eye_EyeOff_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! __barrel_optimize__?names=Camera,Eye,EyeOff,X!=!lucide-react */ \"__barrel_optimize__?names=Camera,Eye,EyeOff,X!=!./node_modules/lucide-react/dist/esm/lucide-react.js\");\n/* harmony import */ var _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../api/firebase/user */ \"./src/api/firebase/user/index.ts\");\n/* harmony import */ var _api_firebase_auth__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../api/firebase/auth */ \"./src/api/firebase/auth/index.ts\");\n/* harmony import */ var _api_firebase_config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../api/firebase/config */ \"./src/api/firebase/config.ts\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/router */ \"./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _api_firebase_storage_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../api/firebase/storage/service */ \"./src/api/firebase/storage/service.ts\");\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-redux */ \"react-redux\");\n/* harmony import */ var _redux_devModeSlice__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../redux/devModeSlice */ \"./src/redux/devModeSlice.ts\");\n/* harmony import */ var _hooks_useUser__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../hooks/useUser */ \"./src/hooks/useUser.ts\");\n/* harmony import */ var _redux_tempRedirectSlice__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../redux/tempRedirectSlice */ \"./src/redux/tempRedirectSlice.ts\");\n/* harmony import */ var _redux_toastSlice__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../redux/toastSlice */ \"./src/redux/toastSlice.ts\");\n/* harmony import */ var _api_firebase_workout_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../api/firebase/workout/service */ \"./src/api/firebase/workout/service.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_auth__WEBPACK_IMPORTED_MODULE_2__, _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__, _api_firebase_auth__WEBPACK_IMPORTED_MODULE_4__, _api_firebase_config__WEBPACK_IMPORTED_MODULE_5__, _api_firebase_storage_service__WEBPACK_IMPORTED_MODULE_7__, react_redux__WEBPACK_IMPORTED_MODULE_8__, _redux_devModeSlice__WEBPACK_IMPORTED_MODULE_9__, _hooks_useUser__WEBPACK_IMPORTED_MODULE_10__, _redux_tempRedirectSlice__WEBPACK_IMPORTED_MODULE_11__, _redux_toastSlice__WEBPACK_IMPORTED_MODULE_12__, _api_firebase_workout_service__WEBPACK_IMPORTED_MODULE_13__]);\n([firebase_auth__WEBPACK_IMPORTED_MODULE_2__, _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__, _api_firebase_auth__WEBPACK_IMPORTED_MODULE_4__, _api_firebase_config__WEBPACK_IMPORTED_MODULE_5__, _api_firebase_storage_service__WEBPACK_IMPORTED_MODULE_7__, react_redux__WEBPACK_IMPORTED_MODULE_8__, _redux_devModeSlice__WEBPACK_IMPORTED_MODULE_9__, _hooks_useUser__WEBPACK_IMPORTED_MODULE_10__, _redux_tempRedirectSlice__WEBPACK_IMPORTED_MODULE_11__, _redux_toastSlice__WEBPACK_IMPORTED_MODULE_12__, _api_firebase_workout_service__WEBPACK_IMPORTED_MODULE_13__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // Import clear actions\n // Import showToast\n // Import workout service\nconst DevModeToggle = ()=>{\n    const dispatch = (0,react_redux__WEBPACK_IMPORTED_MODULE_8__.useDispatch)();\n    const isDevelopment = (0,react_redux__WEBPACK_IMPORTED_MODULE_8__.useSelector)((state)=>state.devMode.isDevelopment);\n    const isLocalhost =  false && 0;\n    // On component mount, check if we should be in dev mode\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const savedMode = window.localStorage.getItem(\"devMode\") === \"true\";\n        if (savedMode !== isDevelopment) {\n            console.log(\"[DevMode] Initializing with saved mode:\", {\n                savedMode,\n                currentMode: isDevelopment,\n                isLocalhost,\n                timestamp: new Date().toISOString()\n            });\n            dispatch((0,_redux_devModeSlice__WEBPACK_IMPORTED_MODULE_9__.toggleDevMode)());\n            (0,_api_firebase_config__WEBPACK_IMPORTED_MODULE_5__.initializeFirebase)(savedMode);\n        }\n    }, []);\n    const handleToggle = ()=>{\n        const newMode = !isDevelopment;\n        console.log(\"[DevMode] Toggling mode:\", {\n            from: isDevelopment ? \"development\" : \"production\",\n            to: newMode ? \"development\" : \"production\",\n            isLocalhost,\n            source: isLocalhost ? \".env.local\" : newMode ? \"firebaseConfigs\" : \"Netlify\",\n            timestamp: new Date().toISOString()\n        });\n        window.localStorage.setItem(\"devMode\", String(newMode));\n        dispatch((0,_redux_devModeSlice__WEBPACK_IMPORTED_MODULE_9__.toggleDevMode)());\n        (0,_api_firebase_config__WEBPACK_IMPORTED_MODULE_5__.initializeFirebase)(newMode);\n        // Add a slight delay before reloading to ensure Firebase initialization completes\n        setTimeout(()=>{\n            window.location.reload();\n        }, 300);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n        onClick: handleToggle,\n        className: \"absolute top-4 left-4 px-2 py-1 rounded text-xs font-medium transition-colors flex items-center gap-2\",\n        style: {\n            background: isDevelopment ? \"#E0FE10\" : \"#3f3f46\",\n            color: isDevelopment ? \"black\" : \"white\"\n        },\n        title: `Using ${isDevelopment ? \"development\" : \"production\"} configuration from ${isLocalhost ? \".env.local\" : isDevelopment ? \"firebaseConfigs\" : \"Netlify\"}`,\n        children: [\n            isDevelopment ? \"\\uD83D\\uDD27 Dev\" : \"\\uD83D\\uDE80 Prod\",\n            isLocalhost ? \" (Local)\" : \"\"\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n        lineNumber: 84,\n        columnNumber: 5\n    }, undefined);\n};\nconst SignInModal = ({ isVisible, closable = false, onClose, onSignInSuccess, onSignInError, onSignUpSuccess, onSignUpError, onQuizComplete, onQuizSkipped, onRegistrationComplete })=>{\n    const [email, setEmail] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    console.log(\"[SignInModal] Component rendering or re-rendering.\"); // Simple render log\n    const [password, setPassword] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [confirmPassword, setConfirmPassword] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [username, setUsername] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [profileImage, setProfileImage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isSignUp, setIsSignUp] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [signUpStep, setSignUpStep] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"initial\");\n    const [isForgotPassword, setIsForgotPassword] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [resetEmailSent, setResetEmailSent] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showError, setShowError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isUsernameAvailable, setIsUsernameAvailable] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [activeProvider, setActiveProvider] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isImageUploading, setIsImageUploading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const currentUser = (0,_hooks_useUser__WEBPACK_IMPORTED_MODULE_10__.useUser)();\n    const dispatch = (0,react_redux__WEBPACK_IMPORTED_MODULE_8__.useDispatch)();\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_6__.useRouter)();\n    const [isIphone, setIsIphone] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Added state for password visibility\n    const [showPassword, setShowPassword] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showConfirmPassword, setShowConfirmPassword] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [errors, setErrors] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const { roundIdRedirect, loginRedirectPath } = (0,react_redux__WEBPACK_IMPORTED_MODULE_8__.useSelector)((state)=>state.tempRedirect);\n    // Detect if the user is on an iPhone\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (false) {}\n    }, []);\n    // Add effect to check if we need to show registration\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (currentUser) {\n            console.log(\"[SignInModal Onboarding Check Effect] Running. Current User:\", JSON.parse(JSON.stringify(currentUser)));\n            console.log(\"[SignInModal] Checking user onboarding status:\", {\n                userId: currentUser.id,\n                hasUsername: !!currentUser.username,\n                username: currentUser.username,\n                registrationComplete: !!currentUser.registrationComplete,\n                height: currentUser.height,\n                birthdate: currentUser.birthdate,\n                onboardingComplete: isOnboardingComplete(currentUser),\n                timestamp: new Date().toISOString()\n            });\n            const onboardingStatus = isOnboardingComplete(currentUser);\n            console.log(\"[SignInModal Onboarding Check Effect] isOnboardingComplete result:\", onboardingStatus);\n            if (!onboardingStatus) {\n                console.log(\"[SignInModal Onboarding Check Effect] Onboarding NOT complete. Checking fields...\");\n                const missing = [];\n                if (!currentUser.username) missing.push(\"username\");\n                if (!currentUser.height || !currentUser.height.feet) missing.push(\"height\");\n                if (!currentUser.birthdate) missing.push(\"birthdate\");\n                if (!currentUser.registrationComplete) missing.push(\"registrationComplete\");\n                console.log(\"[SignInModal] User missing onboarding fields:\", missing);\n                setIsSignUp(true); // Ensure we are in signup mode\n                // Only force the step if not already in the correct onboarding step\n                if (!currentUser.username) {\n                    // Only set back to profile if we aren't already trying to move forward\n                    if (signUpStep !== \"quiz-prompt\" && signUpStep !== \"quiz\") {\n                        console.log(\"[SignInModal Onboarding Check Effect] Setting step to profile (username missing and not already progressing)\");\n                        setSignUpStep(\"profile\");\n                    } else {\n                        console.log(\"[SignInModal Onboarding Check Effect] Username missing, but step is already quiz/quiz-prompt. Allowing progression.\", {\n                            currentStep: signUpStep\n                        });\n                    }\n                } else if (currentUser.username && signUpStep !== \"quiz\" && signUpStep !== \"quiz-prompt\") {\n                    console.log(\"[SignInModal Onboarding Check Effect] Setting step to quiz-prompt (username exists, onboarding incomplete)\");\n                    setSignUpStep(\"quiz-prompt\");\n                } else {\n                    console.log(\"[SignInModal Onboarding Check Effect] Conditions met, but not changing step from:\", signUpStep);\n                }\n            } else {\n                console.log(\"[SignInModal Onboarding Check Effect] Onboarding IS complete. User should be okay. Current step:\", signUpStep);\n            // Potentially add logic here if needed when onboarding IS complete upon check\n            }\n        } else {\n            // User signed out, reset form fields\n            console.log(\"[SignInModal] User signed out, resetting form state.\");\n            setEmail(\"\");\n            setPassword(\"\");\n            setConfirmPassword(\"\");\n            setError(null);\n            setErrors({});\n            setIsSignUp(false); // Reset to sign-in view\n            setSignUpStep(\"initial\"); // Reset step\n            setIsForgotPassword(false); // Reset forgot password state\n            setResetEmailSent(false);\n        }\n    }, [\n        currentUser\n    ]); // Dependency is currentUser\n    // Password validation states\n    const hasUppercase = /[A-Z]/.test(password);\n    const hasNumber = /\\d/.test(password);\n    const hasMinLength = password.length >= 8;\n    const passwordsMatch = password === confirmPassword;\n    // Quiz states\n    const [quizStep, setQuizStep] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [quizData, setQuizData] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        gender: null,\n        height: {\n            feet: 0,\n            inches: 0\n        },\n        weight: 0,\n        level: null,\n        goal: [],\n        birthdate: null\n    });\n    // --- NEW: Subscription check function ---\n    // After sign in/up, call this to fetch subscription data from Stripe (via your endpoint)\n    // and update the user document. If the user is unsubscribed, redirect to /subscribe.\n    const checkSubscriptionAndProceed = async (user)=>{\n        try {\n            console.log(\"[SignInModal] Checking subscription:\", {\n                email: user.email,\n                timestamp: new Date().toISOString()\n            });\n            const firestoreUser = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(user.uid);\n            if (firestoreUser) {\n                console.log(\"[SignInModal] User profile check:\", {\n                    hasUsername: !!firestoreUser.username,\n                    username: firestoreUser.username,\n                    subscriptionType: firestoreUser.subscriptionType,\n                    timestamp: new Date().toISOString()\n                });\n                // --- Onboarding completeness check ---\n                if (!isOnboardingComplete(firestoreUser)) {\n                    console.log(\"[SignInModal] User missing onboarding data, starting onboarding flow\");\n                    setIsSignUp(true);\n                    setSignUpStep(\"profile\");\n                    setIsLoading(false);\n                    return;\n                }\n                // --- End onboarding check ---\n                const betaUserHasAccess = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.getBetaUserAccess(firestoreUser.email, firestoreUser);\n                console.log(\"[SignInModal] Access check results:\", {\n                    betaAccess: betaUserHasAccess,\n                    subscriptionType: firestoreUser.subscriptionType,\n                    timestamp: new Date().toISOString()\n                });\n                // If user has beta access or valid subscription\n                if (betaUserHasAccess || firestoreUser.subscriptionType !== _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.SubscriptionType.unsubscribed) {\n                    console.log(\"[SignInModal] User has access, closing modal\");\n                    onSignInSuccess?.(user);\n                    onClose?.();\n                    return;\n                }\n                // If user is unsubscribed and not beta\n                if (firestoreUser.subscriptionType === _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.SubscriptionType.unsubscribed) {\n                    console.log(\"[SignInModal] Unsubscribed user, closing modal and redirecting\");\n                    onClose?.();\n                    router.push(\"/subscribe\");\n                    return;\n                }\n            }\n        } catch (err) {\n            console.error(\"[SignInModal] Error in subscription check:\", err);\n        }\n    };\n    const handleSocialAuth = async (provider)=>{\n        try {\n            console.log(`[SignInModal] Starting ${provider} auth:`, {\n                timestamp: new Date().toISOString()\n            });\n            setIsLoading(true);\n            setError(null);\n            setActiveProvider(provider);\n            if (provider === \"apple\") {\n                // Initialize Apple OAuth provider\n                const appleProvider = new firebase_auth__WEBPACK_IMPORTED_MODULE_2__.OAuthProvider(\"apple.com\");\n                appleProvider.addScope(\"email\");\n                appleProvider.addScope(\"name\");\n                try {\n                    // Sign in with popup\n                    const result = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.signInWithPopup)(_api_firebase_config__WEBPACK_IMPORTED_MODULE_5__.auth, appleProvider);\n                    const user = result.user;\n                    // Fetch or create user in Firestore\n                    let firestoreUser = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(user.uid);\n                    if (!firestoreUser) {\n                        firestoreUser = new _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.User(user.uid, {\n                            id: user.uid,\n                            email: user.email || \"\",\n                            displayName: user.displayName || \"\"\n                        });\n                        await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.updateUser(user.uid, firestoreUser);\n                    }\n                    _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.nonUICurrentUser = firestoreUser; // Use nonUICurrentUser\n                    // Check subscription status first\n                    if (firestoreUser.subscriptionType === _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.SubscriptionType.unsubscribed) {\n                        setSignUpStep(\"subscription\");\n                        return;\n                    }\n                    // Otherwise proceed with normal flow\n                    await checkSubscriptionAndProceed(user);\n                } catch (error) {\n                    console.error(\"Apple sign-in error:\", error);\n                    if (error instanceof Error) {\n                        setError(error.message);\n                        if (isSignUp) {\n                            onSignUpError?.(error);\n                        } else {\n                            onSignInError?.(error);\n                        }\n                    } else {\n                        const genericError = new Error(\"An unknown error occurred during Apple sign-in\");\n                        setError(genericError.message);\n                        if (isSignUp) {\n                            onSignUpError?.(genericError);\n                        } else {\n                            onSignInError?.(genericError);\n                        }\n                    }\n                }\n            } else if (provider === \"google\") {\n                const result = await _api_firebase_auth__WEBPACK_IMPORTED_MODULE_4__[\"default\"].signInWithGoogle();\n                const user = result.user;\n                // Strict email check\n                if (!user || !user.email) {\n                    console.error(\"[SignInModal] Google sign-in completed but no email was provided. Cannot create user.\");\n                    setError(\"Sign-in failed: Email address is required.\");\n                    setIsLoading(false);\n                    setActiveProvider(null);\n                    return; // Stop execution\n                }\n                console.log(\"Google Sign In - Initial User:\", user);\n                console.log(\"Google Sign In - Firebase User:\", {\n                    uid: user.uid,\n                    email: user.email,\n                    displayName: user.displayName,\n                    metadata: user.metadata,\n                    providerData: user.providerData\n                });\n                let firestoreUser = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(user.uid);\n                console.log(\"Google Sign In - Firestore User:\", firestoreUser);\n                if (firestoreUser) {\n                    // Log all user properties for debugging\n                    console.log(\"[SignInModal] Full Firestore user object after sign in:\", JSON.parse(JSON.stringify(firestoreUser)));\n                }\n                if (!firestoreUser) {\n                    // Email exists, proceed with creation\n                    console.log(\"[SignInModal] Creating new Firestore user after Google Sign-In\");\n                    firestoreUser = new _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.User(user.uid, {\n                        id: user.uid,\n                        email: user.email,\n                        displayName: user.displayName || \"\",\n                        registrationComplete: false,\n                        subscriptionType: _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.SubscriptionType.unsubscribed\n                    });\n                    await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.updateUser(user.uid, firestoreUser);\n                    console.log(\"Google Sign In - Created New User:\", firestoreUser);\n                } else if (!firestoreUser.email && user.email) {\n                    // If user exists but email is missing, update it\n                    console.log(\"[SignInModal] Firestore user missing email, updating with Firebase user email\");\n                    firestoreUser.email = user.email;\n                    await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.updateUser(user.uid, firestoreUser);\n                }\n                _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.nonUICurrentUser = firestoreUser; // Use nonUICurrentUser\n                console.log(\"Google Sign In - Current User Set:\", _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.nonUICurrentUser); // Use nonUICurrentUser\n                // Fix: Check if username is missing (using truthy check) instead of empty string comparison\n                console.log(\"Username check:\", {\n                    username: firestoreUser.username,\n                    isEmpty: !firestoreUser.username,\n                    typeOf: typeof firestoreUser.username\n                });\n                if (!firestoreUser.username) {\n                    console.log(\"Starting registration - username missing\");\n                    setIsSignUp(true);\n                    setSignUpStep(\"profile\");\n                    setIsLoading(false);\n                    return;\n                }\n                if (firestoreUser.subscriptionType === _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.SubscriptionType.unsubscribed) {\n                    console.log(\"User is unsubscribed, showing subscription step\");\n                    setSignUpStep(\"subscription\");\n                    return;\n                }\n                // --- Onboarding completeness check ---\n                if (!isOnboardingComplete(firestoreUser)) {\n                    console.log(\"[SignInModal] Google sign-in: User missing onboarding data, starting onboarding flow\");\n                    setIsSignUp(true);\n                    setSignUpStep(\"profile\");\n                    setIsLoading(false);\n                    return;\n                }\n                // --- End onboarding check ---\n                console.log(\"Checking Subs\");\n                await checkSubscriptionAndProceed(user);\n            }\n        } catch (error) {\n            // Keep your existing error handling\n            console.error(`[SignInModal] ${provider} auth error:`, error);\n            let errorMessage = \"An unexpected error occurred\";\n            if (error instanceof Error) {\n                // Handle specific Firebase Auth error codes\n                switch(error.code){\n                    case \"auth/popup-blocked\":\n                        errorMessage = \"Please enable popups for this site and try again\";\n                        break;\n                    case \"auth/popup-closed-by-user\":\n                        errorMessage = \"Sign-in cancelled. Please try again\";\n                        break;\n                    case \"auth/cancelled-popup-request\":\n                        errorMessage = \"Another sign-in attempt is already in progress\";\n                        break;\n                    case \"auth/account-exists-with-different-credential\":\n                        errorMessage = \"An account already exists with the same email address but different sign-in credentials. Please sign in using the original account method.\";\n                        break;\n                    case \"auth/network-request-failed\":\n                        errorMessage = \"Network error. Please check your internet connection and try again\";\n                        break;\n                    case \"auth/user-disabled\":\n                        errorMessage = \"This account has been disabled. Please contact support\";\n                        break;\n                    case \"auth/operation-not-allowed\":\n                        errorMessage = \"This sign-in method is not enabled. Please contact support\";\n                        break;\n                    default:\n                        errorMessage = error.message;\n                }\n                setError(errorMessage);\n                if (isSignUp) {\n                    onSignUpError?.(error);\n                } else {\n                    onSignInError?.(error);\n                }\n            } else {\n                setError(errorMessage);\n                const genericError = new Error(errorMessage);\n                if (isSignUp) {\n                    onSignUpError?.(genericError);\n                } else {\n                    onSignInError?.(genericError);\n                }\n            }\n        } finally{\n            setIsLoading(false);\n            setActiveProvider(null);\n        }\n    };\n    const addLog = (log)=>{\n        const currentLogs = JSON.parse(localStorage.getItem(\"authFlowLogs\") || \"[]\");\n        currentLogs.push(`[${new Date().toISOString()}] ${log}`);\n        localStorage.setItem(\"authFlowLogs\", JSON.stringify(currentLogs));\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const logs = localStorage.getItem(\"authFlowLogs\");\n        if (logs) {\n            console.log(\"Auth Flow Logs:\");\n            console.log(\"------------------------\");\n            JSON.parse(logs).forEach((log)=>console.log(log));\n            console.log(\"------------------------\");\n            localStorage.removeItem(\"authFlowLogs\");\n        }\n        let isMounted = true;\n        const handleRedirect = async ()=>{\n            addLog(\"Starting redirect handler\");\n            if (!isVisible) {\n                addLog(\"Modal not visible, skipping redirect handling\");\n                return;\n            }\n            const urlParams = new URLSearchParams(window.location.search);\n            const isRedirecting = urlParams.has(\"state\") || window.location.href.includes(\"__/auth/handler\");\n            addLog(`Redirect detected: ${isRedirecting}`);\n            addLog(`Current URL: ${window.location.href}`);\n            if (!isRedirecting) {\n                addLog(\"No redirect parameters detected, exiting redirect handler\");\n                return;\n            }\n            try {\n                setIsLoading(true);\n                addLog(\"Calling getRedirectResult...\");\n                const result = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.getRedirectResult)(_api_firebase_config__WEBPACK_IMPORTED_MODULE_5__.auth);\n                addLog(`getRedirectResult result: ${JSON.stringify(result)}`);\n                if (!result) {\n                    addLog(\"No result returned by getRedirectResult, checking pending redirect...\");\n                    const pendingResult = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.getRedirectResult)(_api_firebase_config__WEBPACK_IMPORTED_MODULE_5__.auth).catch((e)=>{\n                        addLog(`Pending redirect error: ${e.message}`);\n                        return null;\n                    });\n                    addLog(`Pending redirect result: ${JSON.stringify(pendingResult)}`);\n                    if (!pendingResult) {\n                        addLog(\"No pending redirect result, exiting handler\");\n                        return;\n                    }\n                }\n                if (!isMounted) {\n                    addLog(\"Component unmounted during redirect, exiting handler\");\n                    return;\n                }\n                const credential = result;\n                if (!credential || !credential.user) {\n                    throw new Error(\"No user credential found in redirect result\");\n                }\n                const { user } = credential;\n                addLog(`User info: providerId=${credential.providerId}, email=${user.email}, isNewUser=${user.metadata.creationTime === user.metadata.lastSignInTime}`);\n                const isAppleSignIn = credential.providerId === \"apple.com\" || user.providerData.some((provider)=>provider.providerId === \"apple.com\");\n                let firestoreUser = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(user.uid);\n                if (!firestoreUser && user.metadata.creationTime === user.metadata.lastSignInTime) {\n                    addLog(\"New user detected, creating Firestore document\");\n                    // CRITICAL CHECK: Ensure email exists before creating user\n                    if (!user.email) {\n                        console.error(\"[SignInModal] Redirect sign-in completed but no email was provided. Cannot create user.\");\n                        addLog(\"Redirect sign-in failed: Email address is required.\");\n                        setError(\"Sign-in failed: Email address is required.\");\n                        setIsLoading(false);\n                        setActiveProvider(null);\n                        return; // Stop execution\n                    }\n                    // Email exists, proceed with creation\n                    firestoreUser = new _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.User(user.uid, {\n                        id: user.uid,\n                        email: user.email,\n                        displayName: user.displayName || \"\"\n                    });\n                    await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.updateUser(user.uid, firestoreUser);\n                    addLog(`Created new Firestore user: ${firestoreUser.id}`);\n                } else if (firestoreUser) {\n                    // Check if username is missing - highest priority\n                    if (!firestoreUser.username) {\n                        setIsSignUp(true);\n                        setSignUpStep(\"profile\");\n                        addLog(\"User missing username, starting registration flow\");\n                        setIsLoading(false);\n                        return;\n                    }\n                    // Check subscription status\n                    if (firestoreUser.subscriptionType === _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.SubscriptionType.unsubscribed) {\n                        setSignUpStep(\"subscription\");\n                        addLog(\"User unsubscribed, showing subscription step\");\n                    } else if (user.metadata.creationTime === user.metadata.lastSignInTime) {\n                        onSignUpSuccess?.(user);\n                        addLog(\"New user signup successful\");\n                    } else {\n                        onSignInSuccess?.(user);\n                        addLog(\"Existing user signin successful\");\n                    }\n                }\n            } catch (error) {\n                addLog(`Redirect handler error: ${error instanceof Error ? error.message : error}`);\n                if (!isMounted) return;\n                setError(error instanceof Error ? error.message : \"Authentication failed\");\n                isSignUp ? onSignUpError?.(error) : onSignInError?.(error);\n            } finally{\n                if (isMounted) {\n                    setIsLoading(false);\n                    addLog(\"Redirect handler complete\");\n                }\n            }\n        };\n        handleRedirect();\n        return ()=>{\n            isMounted = false;\n        };\n    }, [\n        isVisible,\n        onSignInSuccess,\n        onSignUpSuccess,\n        onSignInError,\n        onSignUpError,\n        onClose\n    ]);\n    const handleSubmit = async (e)=>{\n        e.preventDefault();\n        console.log(\"[SignInModal] Form submission started:\", {\n            isSignUp,\n            signUpStep,\n            isInitialStep: signUpStep === \"initial\",\n            isPasswordStep: signUpStep === \"password\",\n            isProfileStep: signUpStep === \"profile\",\n            signUpStepType: typeof signUpStep,\n            currentEmail: email,\n            hasPassword: !!password,\n            passwordLength: password.length,\n            currentUser: _api_firebase_config__WEBPACK_IMPORTED_MODULE_5__.auth.currentUser?.email,\n            timestamp: new Date().toISOString()\n        });\n        if (signUpStep === \"profile\") {\n            try {\n                setIsLoading(true);\n                setError(null);\n                const userId = _api_firebase_config__WEBPACK_IMPORTED_MODULE_5__.auth.currentUser?.uid;\n                if (!userId) {\n                    throw new Error(\"No authenticated user found for profile update\");\n                }\n                // --- Fetch current data first --- \n                const currentUserData = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(userId);\n                if (!currentUserData) {\n                    throw new Error(\"Could not load current user data for profile update.\");\n                }\n                console.log(\"[SignInModal Profile Step] Fetched current user data before update\");\n                // --- End Fetch ---\n                // Email fallback: Ensure email is included\n                const currentEmail = currentUserData.email || _api_firebase_config__WEBPACK_IMPORTED_MODULE_5__.auth.currentUser?.email;\n                if (!currentEmail) {\n                    console.error(\"[SignInModal Registration Profile]: Email is missing, cannot complete registration.\");\n                    throw new Error(\"Email is missing, cannot complete registration.\");\n                }\n                // Prepare the updated user data, merging with fetched data\n                const updatedUser = new _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.User(userId, {\n                    ...currentUserData.toDictionary(),\n                    username: username,\n                    email: currentEmail,\n                    registrationComplete: true,\n                    updatedAt: new Date() // Update timestamp\n                });\n                console.log(\"[SignInModal Profile Step] Attempting to update user with:\", JSON.parse(JSON.stringify(updatedUser.toDictionary())));\n                await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.updateUser(userId, updatedUser);\n                console.log(\"[SignInModal Profile Step] User update successful. Moving to quiz prompt.\");\n                // Update local state immediately\n                _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.nonUICurrentUser = updatedUser;\n                // NEW: Check if we need to auto-join a challenge after profile completion\n                if (roundIdRedirect) {\n                    console.log(\"[SignInModal Profile Step] Profile complete with username. Found roundIdRedirect. Attempting auto-join:\", roundIdRedirect);\n                    // Check subscription status for auto-join decision\n                    if (updatedUser.subscriptionType !== _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.SubscriptionType.unsubscribed) {\n                        await autoJoinChallenge(roundIdRedirect); // Await the join attempt\n                        dispatch((0,_redux_tempRedirectSlice__WEBPACK_IMPORTED_MODULE_11__.clearRoundIdRedirect)()); // Clear the redirect ID after join attempt\n                        // Still continue to quiz-prompt regardless of join success/failure\n                        setSignUpStep(\"quiz-prompt\");\n                    } else {\n                        console.log(\"[SignInModal Profile Step] User is unsubscribed. Moving to quiz-prompt first, deferring join.\");\n                        // Set the next step but keep roundIdRedirect for later\n                        setSignUpStep(\"quiz-prompt\");\n                    }\n                } else {\n                    // Normal flow - no pending challenge join\n                    setSignUpStep(\"quiz-prompt\");\n                }\n            } catch (err) {\n                console.error(\"[SignInModal Profile Step] Error updating username:\", err);\n                setError(err instanceof Error ? err.message : \"An error occurred\");\n            } finally{\n                setIsLoading(false);\n            }\n            return; // Important: Stop handleSubmit execution after profile step\n        }\n        if (!isSignUp) {\n            try {\n                setIsLoading(true);\n                setError(null);\n                const result = await _api_firebase_auth__WEBPACK_IMPORTED_MODULE_4__[\"default\"].signInWithEmail(email, password);\n                const userDoc = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(result.user.uid);\n                _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.nonUICurrentUser = userDoc; // Use nonUICurrentUser\n                console.log(\"[SignInModal] User document:\", {\n                    hasUsername: !!userDoc?.username,\n                    subscriptionType: userDoc?.subscriptionType,\n                    timestamp: new Date().toISOString()\n                });\n                if (userDoc) {\n                    // Check if username is missing\n                    if (!userDoc.username) {\n                        console.log(\"[SignInModal] User missing username, starting registration\");\n                        setIsSignUp(true);\n                        setSignUpStep(\"profile\");\n                        setIsLoading(false);\n                        return;\n                    }\n                    const betaUserHasAccess = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.getBetaUserAccess(userDoc.email, userDoc);\n                    console.log(\"[SignInModal] Beta access check:\", {\n                        hasAccess: betaUserHasAccess,\n                        timestamp: new Date().toISOString()\n                    });\n                    if (betaUserHasAccess || userDoc.subscriptionType !== _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.SubscriptionType.unsubscribed) {\n                        console.log(\"[SignInModal] User has access, attempting to close modal\");\n                        handleSignInSuccess(result.user);\n                        return;\n                    }\n                    if (userDoc.subscriptionType === _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.SubscriptionType.unsubscribed) {\n                        console.log(\"[SignInModal] Unsubscribed user, redirecting\");\n                        onClose?.();\n                        router.push(\"/subscribe\");\n                        return;\n                    }\n                }\n            } catch (err) {\n                console.error(\"[SignInModal] Error during sign-in:\", err);\n                setError(err instanceof Error ? err.message : \"An error occurred\");\n                onSignInError?.(err instanceof Error ? err : new Error(\"An error occurred\"));\n            } finally{\n                setIsLoading(false);\n            }\n        } else {\n            try {\n                setIsLoading(true);\n                setError(null);\n                console.log(\"[SignInModal] In sign-up flow with step:\", {\n                    signUpStep,\n                    email,\n                    hasPassword: !!password,\n                    passwordLength: password ? password.length : 0,\n                    timestamp: new Date().toISOString()\n                });\n                // If we're at the initial step, just validate the email and move to password step\n                if (signUpStep === \"initial\") {\n                    console.log(\"[SignInModal] Moving from initial to password step:\", {\n                        email,\n                        timestamp: new Date().toISOString()\n                    });\n                    // Validate email\n                    if (!email) {\n                        setError(\"Please enter your email address\");\n                        setIsLoading(false);\n                        return;\n                    }\n                    // Move to password step\n                    setSignUpStep(\"password\");\n                    setShowError(false);\n                    setIsLoading(false);\n                    return;\n                }\n                // If we're at the password step, create the account with email and password\n                if (signUpStep === \"password\") {\n                    console.log(\"[SignInModal] Creating account with email/password:\", {\n                        email,\n                        passwordLength: password.length,\n                        timestamp: new Date().toISOString()\n                    });\n                    // Validate password\n                    if (!password) {\n                        setError(\"Please enter a password\");\n                        setIsLoading(false);\n                        return;\n                    }\n                    if (!hasUppercase || !hasNumber || !hasMinLength || !passwordsMatch) {\n                        setError(\"Please ensure your password meets all requirements\");\n                        setShowError(true);\n                        setIsLoading(false);\n                        return;\n                    }\n                    try {\n                        // Create the Firebase Auth user\n                        const { user } = await (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.createUserWithEmailAndPassword)(_api_firebase_config__WEBPACK_IMPORTED_MODULE_5__.auth, email, password);\n                        console.log(\"[SignInModal] Auth User created successfully:\", {\n                            uid: user.uid,\n                            email: user.email\n                        });\n                        if (user) {\n                            if (!user.email) {\n                                console.error(\"[SignInModal] Email/Password sign-up completed but no email was provided. This should not happen.\");\n                                setError(\"Sign-up failed: An unexpected error occurred (missing email).\");\n                                setIsLoading(false);\n                                return; // Stop execution\n                            }\n                            // Create a new local User object for Firestore\n                            const newUser = new _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.User(user.uid, {\n                                id: user.uid,\n                                email: user.email,\n                                subscriptionType: _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.SubscriptionType.unsubscribed,\n                                registrationComplete: false,\n                                createdAt: new Date(),\n                                updatedAt: new Date() // Add updatedAt\n                            });\n                            // *** IMMEDIATELY CREATE FIRESTORE DOC ***\n                            console.log(\"[SignInModal] Attempting to create initial Firestore document...\");\n                            try {\n                                await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.updateUser(user.uid, newUser);\n                                console.log(\"[SignInModal] Initial Firestore document created/updated successfully.\");\n                            } catch (firestoreError) {\n                                console.error(\"[SignInModal] FATAL: Failed to create initial Firestore document:\", firestoreError);\n                                // Handle this critical error appropriately\n                                setError(\"Failed to initialize user profile. Please try again or contact support.\");\n                                setIsLoading(false);\n                                return; // Stop execution if Firestore creation fails\n                            }\n                            // *** --- ***\n                            // Update local/Redux state - AuthWrapper will pick this up via onAuthStateChanged\n                            _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.nonUICurrentUser = newUser;\n                            console.log(\"[SignInModal] New user state set locally. AuthWrapper should take over.\");\n                            // No need to setSignUpStep here - AuthWrapper handles it\n                            setShowError(false);\n                        // Optional: Notify parent immediately if needed, though AuthWrapper's logic might suffice\n                        // onSignUpSuccess?.(user);\n                        }\n                    } catch (createUserError) {\n                        // ... (existing error handling, including email-already-in-use) ...\n                        console.error(\"[SignInModal] Error creating user:\", createUserError);\n                        // Specific handling for email-already-in-use\n                        if (createUserError.code === \"auth/email-already-in-use\") {\n                            setError(\"This email is already in use. Please sign in or use a different email.\");\n                            setSignUpStep(\"initial\"); // Go back to the email step\n                        } else {\n                            // Handle other errors generically\n                            setError(createUserError instanceof Error ? createUserError.message : \"Error creating account\");\n                        }\n                    // Keep loading spinner active on error? Maybe only set false on success?\n                    // setIsLoading(false); // Commented out - let finally handle it?\n                    } finally{\n                        // Reset loading state only if it hasn't been reset by a specific error case above\n                        // Or simply always reset it here? Let's always reset for simplicity for now.\n                        setIsLoading(false);\n                    }\n                }\n            } catch (err) {\n                const error = err;\n                console.error(\"Error during sign-up:\", error);\n                setError(error.message);\n                onSignUpError?.(error);\n            } finally{\n                setIsLoading(false);\n            }\n        }\n    };\n    // ** Auto Join Challenge Function **\n    const autoJoinChallenge = async (roundId)=>{\n        console.log(\"[SignInModal] autoJoinChallenge triggered for roundId:\", roundId);\n        const currentUser = _api_firebase_config__WEBPACK_IMPORTED_MODULE_5__.auth.currentUser;\n        if (!currentUser) {\n            console.error(\"[SignInModal] autoJoinChallenge: No authenticated user found.\");\n            dispatch((0,_redux_toastSlice__WEBPACK_IMPORTED_MODULE_12__.showToast)({\n                message: \"Authentication error, cannot join round.\",\n                type: \"error\"\n            }));\n            return;\n        }\n        if (!currentUser.email) {\n            console.error(\"[SignInModal] autoJoinChallenge: User email is missing.\");\n            dispatch((0,_redux_toastSlice__WEBPACK_IMPORTED_MODULE_12__.showToast)({\n                message: \"User email missing, cannot join round.\",\n                type: \"error\"\n            }));\n            return;\n        }\n        // ENHANCED VERIFICATION: Directly check for username in Firestore\n        try {\n            const firestoreUser = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(currentUser.uid);\n            if (!firestoreUser || !firestoreUser.username) {\n                console.error(\"[SignInModal] autoJoinChallenge: Username missing in Firestore document\");\n                dispatch((0,_redux_toastSlice__WEBPACK_IMPORTED_MODULE_12__.showToast)({\n                    message: \"Please complete your profile before joining this round.\",\n                    type: \"warning\"\n                }));\n                // Force profile completion flow\n                setIsSignUp(true);\n                setSignUpStep(\"profile\");\n                return;\n            }\n            // ** Check if user already joined this challenge **\n            console.log(`[SignInModal] autoJoinChallenge: Checking if user ${currentUser.uid} already joined challenge ${roundId}`);\n            const existingUserChallenges = await _api_firebase_workout_service__WEBPACK_IMPORTED_MODULE_13__.workoutService.fetchUserChallengesByUserId(currentUser.uid);\n            const alreadyJoined = existingUserChallenges.some((uc)=>uc.challengeId === roundId);\n            if (alreadyJoined) {\n                console.log(`[SignInModal] autoJoinChallenge: User ${currentUser.uid} already has a UserChallenge for round ${roundId}. Skipping join.`);\n                dispatch((0,_redux_toastSlice__WEBPACK_IMPORTED_MODULE_12__.showToast)({\n                    message: \"You are already a challenger for this round. Hop in the chat and talk some smack!\",\n                    type: \"info\",\n                    duration: 5000 // Longer duration\n                }));\n                return; // Stop execution\n            }\n            // **********************************************\n            // Fetch the full challenge/collection data using the ID\n            console.log(`[SignInModal] autoJoinChallenge: User not joined yet. Fetching collection for ID: ${roundId}`);\n            const collection = await _api_firebase_workout_service__WEBPACK_IMPORTED_MODULE_13__.workoutService.getCollectionById(roundId);\n            if (!collection || !collection.challenge) {\n                console.error(\"[SignInModal] autoJoinChallenge: Challenge/Collection not found for ID:\", roundId);\n                dispatch((0,_redux_toastSlice__WEBPACK_IMPORTED_MODULE_12__.showToast)({\n                    message: \"Challenge details not found.\",\n                    type: \"error\"\n                }));\n                return;\n            }\n            const challengeToJoin = collection.challenge; // Use the challenge object\n            // ENHANCED VERIFICATION: Use the Firestore username instead of relying on local state\n            const username = firestoreUser.username;\n            console.log(\"[SignInModal] autoJoinChallenge: Using verified username from Firestore:\", username);\n            console.log(\"[SignInModal] autoJoinChallenge: Calling workoutService.joinChallenge with:\", {\n                username,\n                challengeId: challengeToJoin.id\n            });\n            await _api_firebase_workout_service__WEBPACK_IMPORTED_MODULE_13__.workoutService.joinChallenge({\n                username,\n                challengeId: challengeToJoin.id\n            });\n            console.log(\"[SignInModal] autoJoinChallenge: Successfully joined challenge:\", challengeToJoin.id);\n            dispatch((0,_redux_toastSlice__WEBPACK_IMPORTED_MODULE_12__.showToast)({\n                message: \"Successfully joined challenge!\",\n                type: \"success\"\n            }));\n        } catch (error) {\n            console.error(\"[SignInModal] autoJoinChallenge: Error joining challenge:\", error);\n            const errorMessage = error instanceof Error ? error.message : \"Failed to automatically join challenge.\";\n            dispatch((0,_redux_toastSlice__WEBPACK_IMPORTED_MODULE_12__.showToast)({\n                message: errorMessage,\n                type: \"error\"\n            }));\n        }\n    };\n    const handleCompleteQuiz = async ()=>{\n        try {\n            setIsLoading(true);\n            setError(null);\n            const userId = _api_firebase_config__WEBPACK_IMPORTED_MODULE_5__.auth.currentUser?.uid;\n            if (!userId) throw new Error(\"No user found\");\n            console.log(\"[Quiz Debug - handleCompleteQuiz] State at start (local):\", JSON.parse(JSON.stringify(_api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.nonUICurrentUser)));\n            const refreshedUser = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(userId);\n            console.log(\"[Quiz Debug - handleCompleteQuiz] State after refresh from Firestore:\", JSON.parse(JSON.stringify(refreshedUser)));\n            onQuizComplete?.(); // Notify parent - Restore this line\n            if (!refreshedUser) {\n                throw new Error(\"User data missing after quiz completion.\");\n            }\n            // Enhanced verification - explicitly check for username\n            if (!refreshedUser.username) {\n                console.log(\"[SignInModal] handleCompleteQuiz: Username is missing after quiz. Forcing profile step.\");\n                setIsSignUp(true);\n                setSignUpStep(\"profile\");\n                setIsLoading(false);\n                // Keep roundIdRedirect preserved\n                return;\n            }\n            // ** Auto-join check **\n            if (roundIdRedirect) {\n                // Only auto-join if the user is subscribed AND has a username\n                if (refreshedUser.subscriptionType !== _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.SubscriptionType.unsubscribed) {\n                    console.log(`[SignInModal] handleCompleteQuiz: User is subscribed and has username. Attempting auto-join for round: ${roundIdRedirect}`);\n                    await autoJoinChallenge(roundIdRedirect); // Await the join process\n                    dispatch((0,_redux_tempRedirectSlice__WEBPACK_IMPORTED_MODULE_11__.clearRoundIdRedirect)()); // Clear the ID after attempting join\n                } else {\n                    console.log(`[SignInModal] handleCompleteQuiz: User is unsubscribed. Deferring auto-join for round: ${roundIdRedirect}`);\n                // Do NOT clear roundIdRedirect here - needed after subscription\n                }\n            }\n            // Determine next step *after* potential auto-join attempt or deferral\n            if (refreshedUser.subscriptionType === _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.SubscriptionType.unsubscribed) {\n                console.log(\"[SignInModal] Quiz complete. Unsubscribed. Redirecting to /subscribe\");\n                router.push(\"/subscribe\"); // Navigate directly if unsubscribed\n            } else {\n                console.log(\"[SignInModal] Quiz complete. Closing modal.\");\n                onClose?.(); // Close modal for subscribed users (no redirect needed)\n            }\n        } catch (err) {\n            // ... (existing catch block)\n            const error = err;\n            console.error(\"Error completing quiz and redirecting:\", error);\n            setError(error.message);\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    const renderSubscriptionStep = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center mb-8\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-2xl font-bold text-white font-['Thunder'] mb-2\",\n                            children: \"Join The Fitness Collective\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1025,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-zinc-400 text-sm mb-6\",\n                            children: \"Subscribe to unlock all premium features and join our fitness community.\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1028,\n                            columnNumber: 9\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1024,\n                    columnNumber: 7\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-6 mb-8\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center gap-3\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"w-5 h-5 flex-shrink-0 bg-[#E0FE10] rounded-full flex items-center justify-center\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-black text-sm\",\n                                        children: \"✓\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                        lineNumber: 1036,\n                                        columnNumber: 13\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1035,\n                                    columnNumber: 11\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-zinc-400\",\n                                    children: \"Access to Rounds - Train and compete with the community\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1038,\n                                    columnNumber: 11\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1034,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center gap-3\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"w-5 h-5 flex-shrink-0 bg-[#E0FE10] rounded-full flex items-center justify-center\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-black text-sm\",\n                                        children: \"✓\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                        lineNumber: 1042,\n                                        columnNumber: 13\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1041,\n                                    columnNumber: 11\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-zinc-400\",\n                                    children: \"AI-powered workout recommendations\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1044,\n                                    columnNumber: 11\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1040,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center gap-3\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"w-5 h-5 flex-shrink-0 bg-[#E0FE10] rounded-full flex items-center justify-center\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-black text-sm\",\n                                        children: \"✓\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                        lineNumber: 1048,\n                                        columnNumber: 13\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1047,\n                                    columnNumber: 11\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-zinc-400\",\n                                    children: \"Unlimited workout history and progress tracking\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1050,\n                                    columnNumber: 11\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1046,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center gap-3\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"w-5 h-5 flex-shrink-0 bg-[#E0FE10] rounded-full flex items-center justify-center\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-black text-sm\",\n                                        children: \"✓\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                        lineNumber: 1054,\n                                        columnNumber: 13\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1053,\n                                    columnNumber: 11\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-zinc-400\",\n                                    children: \"Access to trainer-created content and exercises\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1056,\n                                    columnNumber: 11\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1052,\n                            columnNumber: 9\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1033,\n                    columnNumber: 7\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"bg-zinc-800 p-6 rounded-xl\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-white text-2xl font-bold mb-1\",\n                                    children: \"$4.99/mo\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1062,\n                                    columnNumber: 11\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-zinc-400 text-sm mb-4\",\n                                    children: \"Flexible monthly plan\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1063,\n                                    columnNumber: 11\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: ()=>window.open(\"https://buy.stripe.com/9AQaFieX9bv26fSfYY\", \"_blank\"),\n                                    className: \"w-full bg-[#E0FE10] text-black py-2 rounded-lg font-semibold hover:bg-[#E0FE10]/90\",\n                                    children: \"Subscribe Monthly\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1064,\n                                    columnNumber: 11\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1061,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"bg-zinc-800 p-6 rounded-xl relative overflow-hidden\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"absolute -right-8 -top-8 bg-[#E0FE10] text-black text-xs font-bold py-1 px-8 rotate-45\",\n                                    children: \"BEST VALUE\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1073,\n                                    columnNumber: 11\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-white text-2xl font-bold mb-1\",\n                                    children: \"$39.99/yr\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1076,\n                                    columnNumber: 11\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-zinc-400 text-sm mb-4\",\n                                    children: \"Annual plan with 30-day free trial\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1077,\n                                    columnNumber: 11\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: ()=>window.open(\"https://buy.stripe.com/28obJm2an8iQdIk289\", \"_blank\"),\n                                    className: \"w-full bg-[#E0FE10] text-black py-2 rounded-lg font-semibold hover:bg-[#E0FE10]/90\",\n                                    children: \"Start Free Trial\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1078,\n                                    columnNumber: 11\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1072,\n                            columnNumber: 9\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1060,\n                    columnNumber: 7\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"text-zinc-500 text-xs text-center\",\n                    children: \"Cancel anytime. All subscriptions include unlimited access to all features.\"\n                }, void 0, false, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1087,\n                    columnNumber: 7\n                }, undefined)\n            ]\n        }, void 0, true);\n    const renderQuizPrompt = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center mb-8\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-2xl font-bold text-white font-['Thunder'] mb-2\",\n                            children: \"One Last Thing!\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1096,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-zinc-400 font-['HK Grotesk'] text-sm px-4\",\n                            children: \"Take our quick fitness quiz to help Pulse AI create more accurate workout and fitness creator recommendations.\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1099,\n                            columnNumber: 9\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1095,\n                    columnNumber: 7\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex flex-col gap-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: ()=>setSignUpStep(\"quiz\"),\n                            className: \"w-full bg-[#E0FE10] text-black font-semibold py-3 px-4 rounded-lg hover:bg-[#c8e60e] transition-colors font-['HK Grotesk']\",\n                            children: \"Take the Quiz\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1105,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: async ()=>{\n                                try {\n                                    setIsLoading(true);\n                                    setError(null);\n                                    // Call the callback provided by parent\n                                    onQuizSkipped?.();\n                                    const userId = _api_firebase_config__WEBPACK_IMPORTED_MODULE_5__.auth.currentUser?.uid;\n                                    if (!userId) throw new Error(\"No user found\");\n                                    // Fetch latest user data\n                                    const refreshedUser = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(userId);\n                                    if (!refreshedUser) {\n                                        throw new Error(\"User data missing after skipping quiz.\");\n                                    }\n                                    // Enhanced verification - explicitly check for username\n                                    if (!refreshedUser.username) {\n                                        console.log(\"[SignInModal] onQuizSkipped: Username is missing. Forcing profile step.\");\n                                        setIsSignUp(true);\n                                        setSignUpStep(\"profile\");\n                                        setIsLoading(false);\n                                        return;\n                                    }\n                                    // Handle auto-join challenge if needed\n                                    if (roundIdRedirect) {\n                                        if (refreshedUser.subscriptionType !== _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.SubscriptionType.unsubscribed) {\n                                            console.log(`[SignInModal] onQuizSkipped: User is subscribed and has username. Attempting auto-join for round: ${roundIdRedirect}`);\n                                            await autoJoinChallenge(roundIdRedirect);\n                                            dispatch((0,_redux_tempRedirectSlice__WEBPACK_IMPORTED_MODULE_11__.clearRoundIdRedirect)());\n                                        } else {\n                                            console.log(`[SignInModal] onQuizSkipped: User is unsubscribed. Deferring auto-join for round: ${roundIdRedirect}`);\n                                        }\n                                    }\n                                    // Handle next step based on subscription status\n                                    if (refreshedUser.subscriptionType === _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.SubscriptionType.unsubscribed) {\n                                        console.log(\"[SignInModal] Quiz skipped. Unsubscribed. Redirecting to /subscribe\");\n                                        router.push(\"/subscribe\");\n                                    } else {\n                                        console.log(\"[SignInModal] Quiz skipped. Closing modal.\");\n                                        onClose?.();\n                                    }\n                                } catch (err) {\n                                    const error = err;\n                                    console.error(\"Error handling quiz skip:\", error);\n                                    setError(error.message);\n                                } finally{\n                                    setIsLoading(false);\n                                }\n                            },\n                            className: \"w-full bg-zinc-800 text-white font-semibold py-3 px-4 rounded-lg hover:bg-zinc-700 transition-colors font-['HK Grotesk']\",\n                            children: \"Skip for Now\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1111,\n                            columnNumber: 9\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1104,\n                    columnNumber: 7\n                }, undefined)\n            ]\n        }, void 0, true);\n    const questions = [\n        // Gender Question\n        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"space-y-6\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-2xl font-bold text-white font-['Thunder'] mb-2\",\n                            children: \"How do you identify?\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1179,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-zinc-400 font-['HK Grotesk'] text-sm\",\n                            children: \"This helps when giving fitness recommendations and calculating metrics.\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1182,\n                            columnNumber: 9\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1178,\n                    columnNumber: 7\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-3\",\n                    children: [\n                        \"Man\",\n                        \"Woman\",\n                        \"I'd rather self describe\"\n                    ].map((option)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: async ()=>{\n                                let genderValue;\n                                // Convert option to proper Gender enum\n                                switch(option){\n                                    case \"Man\":\n                                        genderValue = _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.Gender.Man;\n                                        break;\n                                    case \"Woman\":\n                                        genderValue = _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.Gender.Woman;\n                                        break;\n                                    default:\n                                        genderValue = _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.Gender.SelfDescribe;\n                                }\n                                setQuizData({\n                                    ...quizData,\n                                    gender: option\n                                });\n                                const userId = _api_firebase_config__WEBPACK_IMPORTED_MODULE_5__.auth.currentUser?.uid;\n                                if (userId) {\n                                    try {\n                                        const currentUserData = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(userId);\n                                        if (currentUserData) {\n                                            currentUserData.gender = genderValue;\n                                            currentUserData.updatedAt = new Date();\n                                            await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.updateUser(userId, currentUserData); // Save the fetched and modified object\n                                            // --- NEW: Refresh user and update Redux ---\n                                            const refreshedUser = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(userId);\n                                            _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.nonUICurrentUser = refreshedUser; // Use nonUICurrentUser\n                                        } else {\n                                            console.error(\"[Quiz Debug - Gender Click] Could not fetch user data for update.\");\n                                        }\n                                    } catch (error) {\n                                        console.error(\"[Quiz Debug - Gender Click] Error fetching/updating user:\", error);\n                                    }\n                                }\n                                // Delay the step change slightly to potentially avoid state race conditions with parent component\n                                setTimeout(()=>{\n                                    setQuizStep(quizStep + 1);\n                                }, 50); // 50ms delay\n                            },\n                            className: `w-full p-4 rounded-lg border ${quizData.gender === option ? \"border-[#E0FE10] bg-[#E0FE10]/10\" : \"border-zinc-700 hover:border-[#E0FE10]\"} text-left text-white transition-colors`,\n                            children: option\n                        }, option, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1189,\n                            columnNumber: 11\n                        }, undefined))\n                }, void 0, false, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1187,\n                    columnNumber: 7\n                }, undefined)\n            ]\n        }, \"gender\", true, {\n            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n            lineNumber: 1177,\n            columnNumber: 5\n        }, undefined),\n        // Height Question\n        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"space-y-6\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-2xl font-bold text-white font-['Thunder'] mb-2\",\n                            children: \"What is your height?\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1247,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-zinc-400 font-['HK Grotesk'] text-sm\",\n                            children: \"Height helps recommendations and calculating metrics.\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1250,\n                            columnNumber: 9\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1246,\n                    columnNumber: 7\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex gap-4 items-end\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-1\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    className: \"block text-sm text-zinc-400 mb-2\",\n                                    children: \"Feet\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1257,\n                                    columnNumber: 11\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"number\",\n                                    value: quizData.height.feet || \"\",\n                                    onChange: async (e)=>{\n                                        const newFeet = Number(e.target.value);\n                                        const newHeight = {\n                                            ...quizData.height,\n                                            feet: newFeet\n                                        };\n                                        setQuizData({\n                                            ...quizData,\n                                            height: newHeight\n                                        });\n                                        const userId = _api_firebase_config__WEBPACK_IMPORTED_MODULE_5__.auth.currentUser?.uid;\n                                        if (userId) {\n                                            try {\n                                                const currentUserData = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(userId);\n                                                if (currentUserData) {\n                                                    currentUserData.height = newHeight;\n                                                    currentUserData.updatedAt = new Date();\n                                                    await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.updateUser(userId, currentUserData);\n                                                    // --- NEW: Refresh user and update Redux ---\n                                                    const refreshedUser = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(userId);\n                                                    _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.nonUICurrentUser = refreshedUser; // Use nonUICurrentUser\n                                                } else {\n                                                    console.error(\"[Quiz Debug - Height Feet Change] Could not fetch user data for update.\");\n                                                }\n                                            } catch (error) {\n                                                console.error(\"[Quiz Debug - Height Feet Change] Error fetching/updating user:\", error);\n                                            }\n                                        }\n                                    },\n                                    min: \"0\",\n                                    max: \"8\",\n                                    className: \"w-full bg-zinc-800 border border-zinc-600 rounded-lg p-3 text-white placeholder-zinc-400 focus:outline-none focus:border-[#E0FE10] focus:ring-1 focus:ring-[#E0FE10] transition-colors\",\n                                    placeholder: \"0\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1258,\n                                    columnNumber: 11\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1256,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-1\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    className: \"block text-sm text-zinc-400 mb-2\",\n                                    children: \"Inches\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1294,\n                                    columnNumber: 11\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"number\",\n                                    value: quizData.height.inches || \"\",\n                                    onChange: async (e)=>{\n                                        const newInches = Number(e.target.value);\n                                        const newHeight = {\n                                            ...quizData.height,\n                                            inches: newInches\n                                        };\n                                        setQuizData({\n                                            ...quizData,\n                                            height: newHeight\n                                        });\n                                        const userId = _api_firebase_config__WEBPACK_IMPORTED_MODULE_5__.auth.currentUser?.uid;\n                                        if (userId) {\n                                            try {\n                                                const currentUserData = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(userId);\n                                                if (currentUserData) {\n                                                    currentUserData.height = newHeight;\n                                                    currentUserData.updatedAt = new Date();\n                                                    await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.updateUser(userId, currentUserData);\n                                                    // --- NEW: Refresh user and update Redux ---\n                                                    const refreshedUser = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(userId);\n                                                    _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.nonUICurrentUser = refreshedUser; // Use nonUICurrentUser\n                                                } else {\n                                                    console.error(\"[Quiz Debug - Height Inches Change] Could not fetch user data for update.\");\n                                                }\n                                            } catch (error) {\n                                                console.error(\"[Quiz Debug - Height Inches Change] Error fetching/updating user:\", error);\n                                            }\n                                        }\n                                    },\n                                    min: \"0\",\n                                    max: \"11\",\n                                    className: \"w-full bg-zinc-800 border border-zinc-600 rounded-lg p-3 text-white placeholder-zinc-400 focus:outline-none focus:border-[#E0FE10] focus:ring-1 focus:ring-[#E0FE10] transition-colors\",\n                                    placeholder: \"0\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1295,\n                                    columnNumber: 11\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1293,\n                            columnNumber: 9\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1255,\n                    columnNumber: 7\n                }, undefined),\n                (quizData.height.feet > 8 || quizData.height.inches > 11) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"text-red-400 text-sm mt-2\",\n                    children: \"Please enter a valid height\"\n                }, void 0, false, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1332,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, \"height\", true, {\n            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n            lineNumber: 1245,\n            columnNumber: 5\n        }, undefined),\n        // Weight Question\n        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"space-y-6\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"text-2xl font-bold text-white font-['Thunder'] mb-2\",\n                        children: \"What's your current weight?\"\n                    }, void 0, false, {\n                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                        lineNumber: 1340,\n                        columnNumber: 9\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1339,\n                    columnNumber: 7\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex gap-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                            type: \"number\",\n                            value: quizData.weight || \"\",\n                            onChange: async (e)=>{\n                                const newWeight = Number(e.target.value);\n                                setQuizData({\n                                    ...quizData,\n                                    weight: newWeight\n                                });\n                                const userId = _api_firebase_config__WEBPACK_IMPORTED_MODULE_5__.auth.currentUser?.uid;\n                                if (userId) {\n                                    try {\n                                        const currentUserData = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(userId);\n                                        if (currentUserData) {\n                                            const newBodyWeight = new _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.BodyWeight({\n                                                oldWeight: currentUserData.bodyWeight.length > 0 ? currentUserData.bodyWeight[currentUserData.bodyWeight.length - 1].newWeight : 0,\n                                                newWeight: newWeight\n                                            });\n                                            currentUserData.bodyWeight = [\n                                                ...currentUserData.bodyWeight,\n                                                newBodyWeight\n                                            ];\n                                            currentUserData.updatedAt = new Date();\n                                            await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.updateUser(userId, currentUserData);\n                                            // --- NEW: Refresh user and update Redux ---\n                                            const refreshedUser = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(userId);\n                                            _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.nonUICurrentUser = refreshedUser; // Use nonUICurrentUser\n                                        } else {\n                                            console.error(\"[Quiz Debug - Weight Change] Could not fetch user data for update.\");\n                                        }\n                                    } catch (error) {\n                                        console.error(\"[Quiz Debug - Weight Change] Error fetching/updating user:\", error);\n                                    }\n                                }\n                            },\n                            className: \"w-full bg-zinc-800 border border-zinc-600 rounded-lg p-3 text-white\",\n                            placeholder: \"Enter weight in lbs\",\n                            min: \"0\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1346,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                            className: \"flex items-center text-zinc-400\",\n                            children: \"Lbs\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1384,\n                            columnNumber: 9\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1345,\n                    columnNumber: 7\n                }, undefined)\n            ]\n        }, \"weight\", true, {\n            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n            lineNumber: 1338,\n            columnNumber: 5\n        }, undefined),\n        // Gym Experience\n        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"space-y-6\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"text-2xl font-bold text-white font-['Thunder'] mb-2\",\n                        children: \"How well do you know your way around the gym?\"\n                    }, void 0, false, {\n                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                        lineNumber: 1390,\n                        columnNumber: 9\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1389,\n                    columnNumber: 7\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-3\",\n                    children: [\n                        \"Novice\",\n                        \"Intermediate\",\n                        \"Expert\"\n                    ].map((level)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: async ()=>{\n                                const levelMap = {\n                                    \"Novice\": _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.UserLevel.Novice,\n                                    \"Intermediate\": _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.UserLevel.Intermediate,\n                                    \"Expert\": _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.UserLevel.Expert\n                                };\n                                setQuizData({\n                                    ...quizData,\n                                    level: level\n                                });\n                                const userId = _api_firebase_config__WEBPACK_IMPORTED_MODULE_5__.auth.currentUser?.uid;\n                                if (userId) {\n                                    try {\n                                        const currentUserData = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(userId);\n                                        if (currentUserData) {\n                                            currentUserData.level = levelMap[level];\n                                            currentUserData.updatedAt = new Date();\n                                            await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.updateUser(userId, currentUserData);\n                                            // --- NEW: Refresh user and update Redux ---\n                                            const refreshedUser = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(userId);\n                                            _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.nonUICurrentUser = refreshedUser; // Use nonUICurrentUser\n                                        } else {\n                                            console.error(\"[Quiz Debug - Experience Click] Could not fetch user data for update.\");\n                                        }\n                                    } catch (error) {\n                                        console.error(\"[Quiz Debug - Experience Click] Error fetching/updating user:\", error);\n                                    }\n                                }\n                                setQuizStep(quizStep + 1);\n                            },\n                            className: `w-full p-4 rounded-lg border ${quizData.level === level ? \"border-[#E0FE10] bg-[#E0FE10]/10\" : \"border-zinc-700 hover:border-[#E0FE10]\"} text-left text-white transition-colors`,\n                            children: level\n                        }, level, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1397,\n                            columnNumber: 11\n                        }, undefined))\n                }, void 0, false, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1395,\n                    columnNumber: 7\n                }, undefined)\n            ]\n        }, \"experience\", true, {\n            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n            lineNumber: 1388,\n            columnNumber: 5\n        }, undefined),\n        // Fitness Goal\n        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"space-y-6\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-2xl font-bold text-white font-['Thunder'] mb-2\",\n                            children: \"What is your fitness goal?\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1443,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-zinc-400 font-['HK Grotesk'] text-sm\",\n                            children: \"Select all that apply\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1446,\n                            columnNumber: 9\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1442,\n                    columnNumber: 7\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-3\",\n                    children: [\n                        \"Lose weight\",\n                        \"Gain muscle mass\",\n                        \"Tone up\",\n                        \"General Fitness\"\n                    ].map((goal)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            type: \"button\",\n                            onClick: async ()=>{\n                                const goalsMap = {\n                                    \"Lose weight\": _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.WorkoutGoal.LoseWeight,\n                                    \"Gain muscle mass\": _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.WorkoutGoal.GainWeight,\n                                    \"Tone up\": _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.WorkoutGoal.ToneUp,\n                                    \"General Fitness\": _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.WorkoutGoal.GeneralFitness\n                                };\n                                // Determine updated goals\n                                const updatedGoals = quizData.goal.includes(goal) ? quizData.goal.filter((g)=>g !== goal) : [\n                                    ...quizData.goal,\n                                    goal\n                                ];\n                                setQuizData((prev)=>({\n                                        ...prev,\n                                        goal: updatedGoals\n                                    }));\n                                const userId = _api_firebase_config__WEBPACK_IMPORTED_MODULE_5__.auth.currentUser?.uid;\n                                if (userId) {\n                                    try {\n                                        const currentUserData = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(userId);\n                                        if (currentUserData) {\n                                            currentUserData.goal = updatedGoals.map((g)=>goalsMap[g]);\n                                            currentUserData.updatedAt = new Date();\n                                            await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.updateUser(userId, currentUserData);\n                                            // --- NEW: Refresh user and update Redux ---\n                                            const refreshedUser = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(userId);\n                                            _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.nonUICurrentUser = refreshedUser; // Use nonUICurrentUser\n                                        } else {\n                                            console.error(\"[Quiz Debug - Goal Click] Could not fetch user data for update.\");\n                                        }\n                                    } catch (error) {\n                                        console.error(\"[Quiz Debug - Goal Click] Error fetching/updating user:\", error);\n                                    }\n                                }\n                                // Only move to next step if at least one goal is selected\n                                if (updatedGoals.length > 0) {\n                                    setQuizStep(quizStep + 1);\n                                }\n                            },\n                            className: `w-full p-4 rounded-lg border ${quizData.goal.includes(goal) ? \"border-[#E0FE10] bg-[#E0FE10]/10\" : \"border-zinc-700 hover:border-[#E0FE10]\"} text-left text-white transition-colors relative`,\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    children: goal\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1504,\n                                    columnNumber: 13\n                                }, undefined),\n                                quizData.goal.includes(goal) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                    className: \"w-5 h-5 absolute right-4 top-1/2 transform -translate-y-1/2 text-[#E0FE10]\",\n                                    fill: \"none\",\n                                    viewBox: \"0 0 24 24\",\n                                    stroke: \"currentColor\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                        strokeLinecap: \"round\",\n                                        strokeLinejoin: \"round\",\n                                        strokeWidth: 2,\n                                        d: \"M5 13l4 4L19 7\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                        lineNumber: 1512,\n                                        columnNumber: 17\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1506,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, goal, true, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1453,\n                            columnNumber: 11\n                        }, undefined))\n                }, void 0, false, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1451,\n                    columnNumber: 7\n                }, undefined)\n            ]\n        }, \"goals\", true, {\n            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n            lineNumber: 1441,\n            columnNumber: 5\n        }, undefined),\n        // Birthdate\n        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"space-y-6\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-2xl font-bold text-white font-['Thunder'] mb-2\",\n                            children: \"When is your birthdate?\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1522,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-zinc-400 font-['HK Grotesk'] text-sm\",\n                            children: \"We ask for your age to ensure accurate fitness calculations.\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1525,\n                            columnNumber: 9\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1521,\n                    columnNumber: 7\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"grid grid-cols-3 gap-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                            className: \"bg-zinc-800 border border-zinc-600 rounded-lg p-3 text-white\",\n                            onChange: async (e)=>{\n                                const date = new Date(quizData.birthdate || new Date());\n                                date.setMonth(parseInt(e.target.value));\n                                setQuizData({\n                                    ...quizData,\n                                    birthdate: date\n                                });\n                                const userId = _api_firebase_config__WEBPACK_IMPORTED_MODULE_5__.auth.currentUser?.uid;\n                                if (userId) {\n                                    try {\n                                        const currentUserData = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(userId);\n                                        if (currentUserData) {\n                                            currentUserData.birthdate = date;\n                                            currentUserData.updatedAt = new Date();\n                                            await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.updateUser(userId, currentUserData);\n                                            // --- NEW: Refresh user and update Redux ---\n                                            const refreshedUser = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(userId);\n                                            _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.nonUICurrentUser = refreshedUser; // Use nonUICurrentUser\n                                        } else {\n                                            console.error(\"[Quiz Debug - Birthdate Month Change] Could not fetch user data for update.\");\n                                        }\n                                    } catch (error) {\n                                        console.error(\"[Quiz Debug - Birthdate Month Change] Error fetching/updating user:\", error);\n                                    }\n                                }\n                            },\n                            children: Array.from({\n                                length: 12\n                            }, (_, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                    value: i,\n                                    children: new Date(0, i).toLocaleString(\"default\", {\n                                        month: \"long\"\n                                    })\n                                }, i, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1560,\n                                    columnNumber: 13\n                                }, undefined))\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1531,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                            className: \"bg-zinc-800 border border-zinc-600 rounded-lg p-3 text-white\",\n                            onChange: async (e)=>{\n                                const date = new Date(quizData.birthdate || new Date());\n                                date.setDate(parseInt(e.target.value));\n                                setQuizData({\n                                    ...quizData,\n                                    birthdate: date\n                                });\n                                const userId = _api_firebase_config__WEBPACK_IMPORTED_MODULE_5__.auth.currentUser?.uid;\n                                if (userId) {\n                                    try {\n                                        const currentUserData = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(userId);\n                                        if (currentUserData) {\n                                            currentUserData.birthdate = date;\n                                            currentUserData.updatedAt = new Date();\n                                            await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.updateUser(userId, currentUserData);\n                                            // --- NEW: Refresh user and update Redux ---\n                                            const refreshedUser = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(userId);\n                                            _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.nonUICurrentUser = refreshedUser; // Use nonUICurrentUser\n                                        } else {\n                                            console.error(\"[Quiz Debug - Birthdate Day Change] Could not fetch user data for update.\");\n                                        }\n                                    } catch (error) {\n                                        console.error(\"[Quiz Debug - Birthdate Day Change] Error fetching/updating user:\", error);\n                                    }\n                                }\n                            },\n                            children: Array.from({\n                                length: 31\n                            }, (_, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                    value: i + 1,\n                                    children: i + 1\n                                }, i + 1, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1595,\n                                    columnNumber: 13\n                                }, undefined))\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1566,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                            className: \"bg-zinc-800 border border-zinc-600 rounded-lg p-3 text-white\",\n                            onChange: async (e)=>{\n                                const date = new Date(quizData.birthdate || new Date());\n                                date.setFullYear(parseInt(e.target.value));\n                                setQuizData({\n                                    ...quizData,\n                                    birthdate: date\n                                });\n                                const userId = _api_firebase_config__WEBPACK_IMPORTED_MODULE_5__.auth.currentUser?.uid;\n                                if (userId) {\n                                    try {\n                                        const currentUserData = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(userId);\n                                        if (currentUserData) {\n                                            currentUserData.birthdate = date;\n                                            currentUserData.updatedAt = new Date();\n                                            await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.updateUser(userId, currentUserData);\n                                            // --- NEW: Refresh user and update Redux ---\n                                            const refreshedUser = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(userId);\n                                            _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.nonUICurrentUser = refreshedUser; // Use nonUICurrentUser\n                                        } else {\n                                            console.error(\"[Quiz Debug - Birthdate Year Change] Could not fetch user data for update.\");\n                                        }\n                                    } catch (error) {\n                                        console.error(\"[Quiz Debug - Birthdate Year Change] Error fetching/updating user:\", error);\n                                    }\n                                }\n                            },\n                            children: Array.from({\n                                length: 100\n                            }, (_, i)=>{\n                                const year = new Date().getFullYear() - i;\n                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                    value: year,\n                                    children: year\n                                }, year, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1632,\n                                    columnNumber: 15\n                                }, undefined);\n                            })\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1601,\n                            columnNumber: 9\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1530,\n                    columnNumber: 7\n                }, undefined)\n            ]\n        }, \"birthdate\", true, {\n            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n            lineNumber: 1520,\n            columnNumber: 5\n        }, undefined)\n    ];\n    const renderQuizQuestion = ()=>{\n        return questions[quizStep];\n    };\n    const isLastQuizStep = ()=>quizStep === questions.length - 1;\n    const validateEmail = ()=>{\n        if (!email) {\n            setErrors({\n                email: \"Email is required\"\n            });\n            setShowError(true);\n            return false;\n        } else if (!/\\S+@\\S+\\.\\S+/.test(email)) {\n            setErrors({\n                email: \"Please enter a valid email address\"\n            });\n            setShowError(true);\n            return false;\n        }\n        return true;\n    };\n    const validatePassword = ()=>{\n        if (!hasUppercase || !hasNumber || !hasMinLength || !passwordsMatch) {\n            setShowError(true);\n            return false;\n        }\n        return true;\n    };\n    const validateUsername = ()=>{\n        if (!username) {\n            setErrors({\n                username: \"Username is required\"\n            });\n            setShowError(true);\n            return false;\n        }\n        return isUsernameAvailable;\n    };\n    const handleUsernameChange = (value)=>{\n        setUsername(value);\n        // Simulated username availability check\n        setIsUsernameAvailable(/^[a-zA-Z0-9_]{3,}$/.test(value));\n    };\n    const handleFileChange = async (e)=>{\n        const file = e.target.files?.[0];\n        if (file) {\n            try {\n                setIsImageUploading(true);\n                setProfileImage(file);\n                const uploadResult = await _api_firebase_storage_service__WEBPACK_IMPORTED_MODULE_7__.firebaseStorageService.uploadImage(file, _api_firebase_storage_service__WEBPACK_IMPORTED_MODULE_7__.UploadImageType.Profile);\n                console.log(\"Profile image uploaded successfully\", uploadResult);\n            } catch (error) {\n                console.error(\"Profile image upload failed\", error);\n                setError(\"Failed to upload profile image\");\n                setProfileImage(null);\n            } finally{\n                setIsImageUploading(false);\n            }\n        }\n    };\n    const renderProfileStep = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center mb-8\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-2xl font-bold text-white font-['Thunder'] mb-2\",\n                            children: \"Personalize your experience\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1710,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-zinc-400 font-['HK Grotesk'] text-sm\",\n                            children: \"Set a username and profile image\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1713,\n                            columnNumber: 9\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1709,\n                    columnNumber: 7\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-6\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex justify-center\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"relative\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"w-24 h-24 bg-zinc-800 rounded-full flex items-center justify-center overflow-hidden\",\n                                        children: profileImage ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                            src: URL.createObjectURL(profileImage),\n                                            alt: \"Profile Preview\",\n                                            className: \"w-full h-full object-cover\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 1724,\n                                            columnNumber: 17\n                                        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Camera_Eye_EyeOff_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__.Camera, {\n                                            size: 32,\n                                            className: \"text-zinc-500\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 1730,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                        lineNumber: 1722,\n                                        columnNumber: 13\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                        className: \"absolute bottom-0 right-0 w-8 h-8 bg-[#E0FE10] rounded-full flex items-center justify-center cursor-pointer\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Camera_Eye_EyeOff_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__.Camera, {\n                                                size: 16,\n                                                className: \"text-black\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                                lineNumber: 1734,\n                                                columnNumber: 15\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                type: \"file\",\n                                                accept: \"image/*\",\n                                                onChange: handleFileChange,\n                                                className: \"hidden\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                                lineNumber: 1735,\n                                                columnNumber: 15\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                        lineNumber: 1733,\n                                        columnNumber: 13\n                                    }, undefined),\n                                    isImageUploading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"loader border-t-transparent border-4 border-white rounded-full w-8 h-8 animate-spin\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 1741,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                        lineNumber: 1740,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                lineNumber: 1721,\n                                columnNumber: 11\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1720,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex items-center justify-between\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            className: \"block text-sm font-medium text-zinc-300 mb-2 font-['HK Grotesk']\",\n                                            children: \"Username\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 1750,\n                                            columnNumber: 13\n                                        }, undefined),\n                                        username && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: `text-xs ${isUsernameAvailable ? \"text-[#E0FE10]\" : \"text-red-400\"}`,\n                                            children: isUsernameAvailable ? \"username is available\" : \"username is not available\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 1754,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1749,\n                                    columnNumber: 11\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"text\",\n                                    value: username,\n                                    onChange: (e)=>handleUsernameChange(e.target.value),\n                                    className: `w-full bg-zinc-800 border rounded-lg p-3 text-white placeholder-zinc-400 focus:outline-none focus:border-[#E0FE10] focus:ring-1 focus:ring-[#E0FE10] transition-colors ${errors.username ? \"border-red-500\" : \"border-zinc-600\"}`,\n                                    placeholder: \"Choose a username\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1759,\n                                    columnNumber: 11\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1748,\n                            columnNumber: 9\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1718,\n                    columnNumber: 7\n                }, undefined)\n            ]\n        }, void 0, true);\n    const renderPasswordStep = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center mb-8\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-2xl font-bold text-white font-['Thunder'] mb-2\",\n                            children: \"Create password\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1776,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-zinc-400 font-['HK Grotesk'] text-sm\",\n                            children: \"Set a password for your account\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1779,\n                            columnNumber: 9\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1775,\n                    columnNumber: 7\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-6\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                \" \",\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    className: \"block text-sm font-medium text-zinc-300 mb-2 font-['HK Grotesk']\",\n                                    children: \"Password\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1787,\n                                    columnNumber: 11\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"relative\",\n                                    children: [\n                                        \" \",\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            type: showPassword ? \"text\" : \"password\",\n                                            value: password,\n                                            onChange: (e)=>{\n                                                setPassword(e.target.value);\n                                                setShowError(false);\n                                            },\n                                            className: \"w-full bg-zinc-800 border border-zinc-600 rounded-lg p-3 pr-10 text-white placeholder-zinc-400 focus:outline-none focus:border-[#E0FE10] focus:ring-1 focus:ring-[#E0FE10] transition-colors\",\n                                            placeholder: \"Create password\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 1791,\n                                            columnNumber: 13\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            type: \"button\",\n                                            onClick: ()=>setShowPassword(!showPassword),\n                                            className: \"absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5\" // Removed top-7\n                                            ,\n                                            \"aria-label\": showPassword ? \"Hide password\" : \"Show password\",\n                                            children: showPassword ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Camera_Eye_EyeOff_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__.EyeOff, {\n                                                className: \"h-5 w-5 text-zinc-400\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                                lineNumber: 1808,\n                                                columnNumber: 17\n                                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Camera_Eye_EyeOff_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__.Eye, {\n                                                className: \"h-5 w-5 text-zinc-400\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                                lineNumber: 1810,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 1801,\n                                            columnNumber: 13\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1790,\n                                    columnNumber: 11\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1786,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                \" \",\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    className: \"block text-sm font-medium text-zinc-300 mb-2 font-['HK Grotesk']\",\n                                    children: \"Confirm Password\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1818,\n                                    columnNumber: 11\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"relative\",\n                                    children: [\n                                        \" \",\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            type: showConfirmPassword ? \"text\" : \"password\",\n                                            value: confirmPassword,\n                                            onChange: (e)=>{\n                                                setConfirmPassword(e.target.value);\n                                                setShowError(false);\n                                            },\n                                            className: \"w-full bg-zinc-800 border border-zinc-600 rounded-lg p-3 pr-10 text-white placeholder-zinc-400 focus:outline-none focus:border-[#E0FE10] focus:ring-1 focus:ring-[#E0FE10] transition-colors\",\n                                            placeholder: \"Confirm password\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 1822,\n                                            columnNumber: 13\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            type: \"button\",\n                                            onClick: ()=>setShowConfirmPassword(!showConfirmPassword),\n                                            className: \"absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5\" // Removed top-7\n                                            ,\n                                            \"aria-label\": showConfirmPassword ? \"Hide password\" : \"Show password\",\n                                            children: showConfirmPassword ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Camera_Eye_EyeOff_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__.EyeOff, {\n                                                className: \"h-5 w-5 text-zinc-400\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                                lineNumber: 1839,\n                                                columnNumber: 17\n                                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Camera_Eye_EyeOff_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__.Eye, {\n                                                className: \"h-5 w-5 text-zinc-400\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                                lineNumber: 1841,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 1832,\n                                            columnNumber: 13\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1821,\n                                    columnNumber: 11\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1817,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"space-y-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex items-center gap-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: `w-4 h-4 rounded-full flex items-center justify-center ${hasUppercase ? \"bg-[#E0FE10]\" : \"bg-zinc-700\"}`,\n                                            children: hasUppercase && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                className: \"w-3 h-3 text-black\",\n                                                fill: \"none\",\n                                                viewBox: \"0 0 24 24\",\n                                                stroke: \"currentColor\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                    strokeLinecap: \"round\",\n                                                    strokeLinejoin: \"round\",\n                                                    strokeWidth: 2,\n                                                    d: \"M5 13l4 4L19 7\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                                    lineNumber: 1857,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                                lineNumber: 1856,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 1850,\n                                            columnNumber: 13\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: `text-sm ${hasUppercase ? \"text-[#E0FE10]\" : \"text-zinc-400\"}`,\n                                            children: \"1 uppercase\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 1861,\n                                            columnNumber: 13\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1849,\n                                    columnNumber: 11\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex items-center gap-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: `w-4 h-4 rounded-full flex items-center justify-center ${hasNumber ? \"bg-[#E0FE10]\" : \"bg-zinc-700\"}`,\n                                            children: hasNumber && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                className: \"w-3 h-3 text-black\",\n                                                fill: \"none\",\n                                                viewBox: \"0 0 24 24\",\n                                                stroke: \"currentColor\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                    strokeLinecap: \"round\",\n                                                    strokeLinejoin: \"round\",\n                                                    strokeWidth: 2,\n                                                    d: \"M5 13l4 4L19 7\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                                    lineNumber: 1874,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                                lineNumber: 1873,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 1867,\n                                            columnNumber: 13\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: `text-sm ${hasNumber ? \"text-[#E0FE10]\" : \"text-zinc-400\"}`,\n                                            children: \"1 number\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 1878,\n                                            columnNumber: 13\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1866,\n                                    columnNumber: 11\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex items-center gap-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: `w-4 h-4 rounded-full flex items-center justify-center ${hasMinLength ? \"bg-[#E0FE10]\" : \"bg-zinc-700\"}`,\n                                            children: hasMinLength && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                className: \"w-3 h-3 text-black\",\n                                                fill: \"none\",\n                                                viewBox: \"0 0 24 24\",\n                                                stroke: \"currentColor\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                    strokeLinecap: \"round\",\n                                                    strokeLinejoin: \"round\",\n                                                    strokeWidth: 2,\n                                                    d: \"M5 13l4 4L19 7\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                                    lineNumber: 1891,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                                lineNumber: 1890,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 1884,\n                                            columnNumber: 13\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: `text-sm ${hasMinLength ? \"text-[#E0FE10]\" : \"text-zinc-400\"}`,\n                                            children: \"8 characters\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 1895,\n                                            columnNumber: 13\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1883,\n                                    columnNumber: 11\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex items-center gap-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: `w-4 h-4 rounded-full flex items-center justify-center ${passwordsMatch && password ? \"bg-[#E0FE10]\" : \"bg-zinc-700\"}`,\n                                            children: passwordsMatch && password && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                                className: \"w-3 h-3 text-black\",\n                                                fill: \"none\",\n                                                viewBox: \"0 0 24 24\",\n                                                stroke: \"currentColor\",\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                    strokeLinecap: \"round\",\n                                                    strokeLinejoin: \"round\",\n                                                    strokeWidth: 2,\n                                                    d: \"M5 13l4 4L19 7\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                                    lineNumber: 1908,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            }, void 0, false, {\n                                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                                lineNumber: 1907,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 1901,\n                                            columnNumber: 13\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: `text-sm ${passwordsMatch && password ? \"text-[#E0FE10]\" : \"text-zinc-400\"}`,\n                                            children: \"Passwords match\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 1912,\n                                            columnNumber: 13\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1900,\n                                    columnNumber: 11\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1847,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            type: \"button\",\n                            onClick: ()=>setSignUpStep(\"initial\"),\n                            className: \"w-full text-center text-zinc-400 text-sm hover:text-white transition-colors mt-4\",\n                            children: \"Back\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1919,\n                            columnNumber: 9\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1784,\n                    columnNumber: 7\n                }, undefined)\n            ]\n        }, void 0, true);\n    const renderForgotPassword = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center mb-8 pt-4 sm:pt-0\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                            src: \"/pulse-logo-white.svg\",\n                            alt: \"Pulse Logo\",\n                            className: \"h-8 mx-auto mb-8\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1933,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-2xl font-bold text-white font-['Thunder'] mb-2\",\n                            children: resetEmailSent ? \"Check Your Email\" : \"Reset Your Password\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1934,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-zinc-400 font-['HK Grotesk'] text-sm\",\n                            children: resetEmailSent ? \"We've sent password reset instructions to your email\" : \"Enter your email address to receive reset instructions\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1937,\n                            columnNumber: 9\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1932,\n                    columnNumber: 7\n                }, undefined),\n                !resetEmailSent ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-6\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    className: \"block text-sm font-medium text-zinc-300 mb-2 font-['HK Grotesk']\",\n                                    children: \"Email\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1947,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"email\",\n                                    value: email,\n                                    onChange: (e)=>{\n                                        setEmail(e.target.value);\n                                        setShowError(false);\n                                    },\n                                    className: \"w-full bg-zinc-800 border border-zinc-600 rounded-lg p-3 text-white placeholder-zinc-400 focus:outline-none focus:border-[#E0FE10] focus:ring-1 focus:ring-[#E0FE10] transition-colors\",\n                                    placeholder: \"Enter your email\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1950,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1946,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex flex-col gap-4 mt-8\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    type: \"button\",\n                                    onClick: handleForgotPassword,\n                                    disabled: isLoading,\n                                    className: \"w-full bg-[#E0FE10] text-black font-semibold py-3 px-4 rounded-lg hover:bg-[#c8e60e] transition-colors font-['HK Grotesk'] disabled:opacity-50 disabled:cursor-not-allowed\",\n                                    children: isLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"loader border-t-transparent border-4 border-black rounded-full w-5 h-5 mx-auto animate-spin\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                        lineNumber: 1970,\n                                        columnNumber: 17\n                                    }, undefined) : \"Send Reset Instructions\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1963,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    type: \"button\",\n                                    onClick: ()=>{\n                                        setIsForgotPassword(false);\n                                        setResetEmailSent(false);\n                                    },\n                                    className: \"text-zinc-400 text-sm hover:text-white transition-colors\",\n                                    children: \"Back to Sign In\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 1976,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1962,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1945,\n                    columnNumber: 9\n                }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-6\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-zinc-300 text-center\",\n                            children: \"Please check your email and follow the instructions to reset your password.\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1990,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex flex-col gap-4 mt-8\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                type: \"button\",\n                                onClick: ()=>{\n                                    setIsForgotPassword(false);\n                                    setResetEmailSent(false);\n                                },\n                                className: \"w-full bg-[#E0FE10] text-black font-semibold py-3 px-4 rounded-lg hover:bg-[#c8e60e] transition-colors font-['HK Grotesk']\",\n                                children: \"Return to Sign In\"\n                            }, void 0, false, {\n                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                lineNumber: 1995,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 1994,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 1989,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true);\n    const renderInitialStep = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-center mb-8 pt-4 sm:pt-0\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                            src: \"/pulse-logo-white.svg\",\n                            alt: \"Pulse Logo\",\n                            className: \"h-8 mx-auto mb-8\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 2014,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-2xl font-bold text-white font-['Thunder'] mb-2\",\n                            children: isSignUp ? \"Join the Collective\" : \"Welcome Back!\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 2015,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-zinc-400 font-['HK Grotesk'] text-sm\",\n                            children: \"Beat Your Best, Share Your Victory\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 2018,\n                            columnNumber: 9\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 2013,\n                    columnNumber: 7\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex flex-col gap-4 mb-8\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            type: \"button\",\n                            onClick: ()=>{\n                                setActiveProvider(\"apple\"); // Track the active provider\n                                handleSocialAuth(\"apple\"); // Trigger the social auth\n                            },\n                            disabled: isLoading && activeProvider === \"apple\",\n                            className: `w-full bg-black text-white font-semibold py-3 px-4 rounded-lg transition-colors font-['HK Grotesk'] border border-zinc-700 flex items-center justify-center gap-3 ${isLoading && activeProvider === \"apple\" ? \"opacity-50 cursor-not-allowed\" : \"hover:bg-zinc-800\"}`,\n                            children: isLoading && activeProvider === \"apple\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"loader border-t-transparent border-4 border-white rounded-full w-5 h-5 animate-spin\"\n                            }, void 0, false, {\n                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                lineNumber: 2036,\n                                columnNumber: 13\n                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                        src: \"/apple-logo.svg\",\n                                        alt: \"Apple\",\n                                        className: \"w-5 h-5\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                        lineNumber: 2039,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    isSignUp ? \"Sign up with Apple\" : \"Sign in with Apple\"\n                                ]\n                            }, void 0, true)\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 2024,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            type: \"button\",\n                            onClick: ()=>handleSocialAuth(\"google\"),\n                            disabled: isLoading,\n                            className: `w-full bg-white text-black font-semibold py-3 px-4 rounded-lg hover:bg-gray-100 transition-colors font-['HK Grotesk'] flex items-center justify-center gap-3 ${isLoading ? \"cursor-not-allowed opacity-50\" : \"\"}`,\n                            children: isLoading && activeProvider === \"google\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"loader border-t-transparent border-4 border-black rounded-full w-5 h-5 animate-spin\"\n                            }, void 0, false, {\n                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                lineNumber: 2054,\n                                columnNumber: 13\n                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                        src: \"/google-logo.svg\",\n                                        alt: \"Google\",\n                                        className: \"w-5 h-5\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                        lineNumber: 2057,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    isSignUp ? \"Sign up with Google\" : \"Sign in with Google\"\n                                ]\n                            }, void 0, true)\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 2045,\n                            columnNumber: 9\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"relative\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"absolute inset-0 flex items-center\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"w-full border-t border-zinc-700\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 2065,\n                                    columnNumber: 13\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                lineNumber: 2064,\n                                columnNumber: 11\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 2063,\n                            columnNumber: 9\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 2023,\n                    columnNumber: 7\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-6\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    className: \"block text-sm font-medium text-zinc-300 mb-2 font-['HK Grotesk']\",\n                                    children: \"Email\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 2076,\n                                    columnNumber: 11\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"email\",\n                                    value: email,\n                                    onChange: (e)=>{\n                                        setEmail(e.target.value);\n                                        setShowError(false);\n                                    },\n                                    className: `w-full bg-zinc-800 border rounded-lg p-3 text-white placeholder-zinc-400 focus:outline-none focus:border-[#E0FE10] focus:ring-1 focus:ring-[#E0FE10] transition-colors ${errors.email ? \"border-red-500\" : \"border-zinc-600\"}`,\n                                    placeholder: \"Enter your email\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 2079,\n                                    columnNumber: 11\n                                }, undefined),\n                                showError && errors.email && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-red-400 text-sm mt-2\",\n                                    children: errors.email\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 2092,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 2075,\n                            columnNumber: 9\n                        }, undefined),\n                        !isSignUp && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex justify-between items-center mb-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                            className: \"block text-sm font-medium text-zinc-300 font-['HK Grotesk']\",\n                                            children: \"Password\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 2099,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            type: \"button\",\n                                            onClick: ()=>setIsForgotPassword(true),\n                                            className: \"text-[#E0FE10] text-sm hover:underline\",\n                                            children: \"Forgot your password?\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 2102,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 2098,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"relative\",\n                                    children: [\n                                        \" \",\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            type: showPassword ? \"text\" : \"password\",\n                                            value: password,\n                                            onChange: (e)=>{\n                                                setPassword(e.target.value);\n                                                setShowError(false);\n                                            },\n                                            className: \"w-full bg-zinc-800 border border-zinc-600 rounded-lg p-3 pr-10 text-white placeholder-zinc-400 focus:outline-none focus:border-[#E0FE10] focus:ring-1 focus:ring-[#E0FE10] transition-colors\" // Added pr-10\n                                            ,\n                                            placeholder: \"Enter your password\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 2111,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            type: \"button\",\n                                            onClick: ()=>setShowPassword(!showPassword),\n                                            className: \"absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5\" // Removed inline style\n                                            ,\n                                            \"aria-label\": showPassword ? \"Hide password\" : \"Show password\",\n                                            children: showPassword ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Camera_Eye_EyeOff_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__.EyeOff, {\n                                                className: \"h-5 w-5 text-zinc-400\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                                lineNumber: 2128,\n                                                columnNumber: 19\n                                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Camera_Eye_EyeOff_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__.Eye, {\n                                                className: \"h-5 w-5 text-zinc-400\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                                lineNumber: 2130,\n                                                columnNumber: 19\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 2121,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 2110,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 2097,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 2074,\n                    columnNumber: 7\n                }, undefined)\n            ]\n        }, void 0, true);\n    const renderQuizNavigation = ()=>{\n        if (signUpStep !== \"quiz\") return null;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"mt-8 flex gap-4\",\n            children: [\n                quizStep > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                    type: \"button\",\n                    onClick: ()=>setQuizStep(quizStep - 1),\n                    className: \"flex-1 bg-zinc-800 text-white font-semibold py-3 px-4 rounded-lg hover:bg-zinc-700 transition-colors font-['HK Grotesk']\",\n                    children: \"Back\"\n                }, void 0, false, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 2146,\n                    columnNumber: 11\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                    type: \"button\",\n                    onClick: ()=>{\n                        if (isLastQuizStep()) {\n                            handleCompleteQuiz();\n                        } else {\n                            setQuizStep(quizStep + 1);\n                        }\n                    },\n                    disabled: !isCurrentStepValid(),\n                    className: \"flex-1 bg-[#E0FE10] text-black font-semibold py-3 px-4 rounded-lg hover:bg-[#c8e60e] transition-colors font-['HK Grotesk'] disabled:opacity-50 disabled:cursor-not-allowed\",\n                    children: isLastQuizStep() ? \"Complete quiz\" : \"Next\"\n                }, void 0, false, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 2154,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n            lineNumber: 2144,\n            columnNumber: 7\n        }, undefined);\n    };\n    // Validation for quiz steps\n    const isCurrentStepValid = ()=>{\n        switch(quizStep){\n            case 0:\n                return !!quizData.gender;\n            case 1:\n                return quizData.height.feet > 0 && quizData.height.feet <= 8 && quizData.height.inches >= 0 && quizData.height.inches <= 11;\n            case 2:\n                return quizData.weight > 0;\n            case 3:\n                return !!quizData.level;\n            case 4:\n                return quizData.goal.length > 0;\n            case 5:\n                return !!quizData.birthdate;\n            default:\n                return false;\n        }\n    };\n    const renderCurrentStep = ()=>{\n        if (isForgotPassword) {\n            return renderForgotPassword();\n        }\n        if (isSignUp) {\n            switch(signUpStep){\n                case \"password\":\n                    return renderPasswordStep();\n                case \"profile\":\n                    return renderProfileStep();\n                case \"quiz-prompt\":\n                    return renderQuizPrompt();\n                case \"quiz\":\n                    return renderQuizQuestion();\n                case \"subscription\":\n                    return renderSubscriptionStep();\n                default:\n                    return renderInitialStep();\n            }\n        }\n        if (signUpStep === \"subscription\") {\n            return renderSubscriptionStep();\n        }\n        return renderInitialStep();\n    };\n    const toggleMode = ()=>{\n        setIsSignUp(!isSignUp);\n        setSignUpStep(\"initial\");\n        setErrors({});\n        setShowError(false);\n        setPassword(\"\");\n        setConfirmPassword(\"\");\n        setUsername(\"\");\n        setProfileImage(null);\n    };\n    // Add debug logging for props\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        console.log(\"[SignInModal] Props state:\", {\n            isVisible,\n            closable,\n            hasOnClose: !!onClose,\n            timestamp: new Date().toISOString()\n        });\n    }, [\n        isVisible,\n        closable,\n        onClose\n    ]);\n    // Add debug logging for signup step changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        console.log(\"[SignInModal] Sign-up step changed:\", {\n            signUpStep,\n            isSignUp,\n            timestamp: new Date().toISOString()\n        });\n    }, [\n        signUpStep,\n        isSignUp\n    ]);\n    // Make sure the modal is actually visible\n    if (!isVisible) {\n        console.log(\"[SignInModal] Modal not visible, not rendering\");\n        return null;\n    }\n    const handleForgotPassword = async (e)=>{\n        e.preventDefault();\n        setIsLoading(true);\n        setError(null);\n        console.log(\"[SignInModal] Forgot password request initiated for:\", email);\n        try {\n            if (!email) {\n                setError(\"Please enter your email address\");\n                setIsLoading(false);\n                return;\n            }\n            await _api_firebase_auth__WEBPACK_IMPORTED_MODULE_4__[\"default\"].resetPassword(email);\n            setResetEmailSent(true);\n            console.log(\"[SignInModal] Password reset email sent successfully to:\", email);\n        } catch (err) {\n            console.error(\"[SignInModal] Error sending password reset email:\", err);\n            setError(err instanceof Error ? err.message : \"An error occurred\");\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    const handleSignInSuccess = async (user)=>{\n        const queryRedirectUrl = router.query.redirect;\n        try {\n            const userDoc = await _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.userService.fetchUserFromFirestore(user.uid);\n            // Enhanced username check with more detailed logging\n            if (!userDoc) {\n                console.error(\"[SignInModal] handleSignInSuccess: User document not found in Firestore\");\n                setError(\"User profile could not be loaded. Please try again.\");\n                return;\n            }\n            // Explicit missing username check - prioritize this before subscription check\n            if (!userDoc.username) {\n                console.log(\"[SignInModal] handleSignInSuccess: User has no username. Forcing profile completion step.\");\n                setIsSignUp(true);\n                setSignUpStep(\"profile\");\n                setIsLoading(false);\n                // *** Important: Do NOT clear roundIdRedirect here so it can be used after profile completion ***\n                return;\n            }\n            // *** Explicit Subscription Check ***\n            if (userDoc.subscriptionType === _api_firebase_user__WEBPACK_IMPORTED_MODULE_3__.SubscriptionType.unsubscribed) {\n                console.log(\"[SignInModal] handleSignInSuccess: User is unsubscribed. Redirecting to /subscribe.\");\n                // Preserve roundIdRedirect if it exists for post-subscription flow\n                if (roundIdRedirect) {\n                    console.log(`[SignInModal] handleSignInSuccess: Unsubscribed user came from round invite (${roundIdRedirect}). Redirecting to subscribe, state preserved.`);\n                }\n                router.push(\"/subscribe\");\n                // Return EARLY to prevent other redirect/close logic\n                return;\n            }\n            // *** End Explicit Subscription Check ***\n            // ** Auto-join check (User is guaranteed to be subscribed AND have username here) ** \n            if (roundIdRedirect) {\n                console.log(`[SignInModal] handleSignInSuccess: Attempting auto-join for round: ${roundIdRedirect}`);\n                await autoJoinChallenge(roundIdRedirect);\n                dispatch((0,_redux_tempRedirectSlice__WEBPACK_IMPORTED_MODULE_11__.clearRoundIdRedirect)());\n                console.log(\"[SignInModal] Sign in success after auto-join. Closing modal.\");\n                onClose?.();\n                return; // Return after handling\n            } else if (loginRedirectPath) {\n                // User accessed protected route directly (and is subscribed)\n                console.log(`[SignInModal] Sign in success. Found loginRedirectPath. Closing modal. Path: ${loginRedirectPath}`);\n                dispatch((0,_redux_tempRedirectSlice__WEBPACK_IMPORTED_MODULE_11__.clearLoginRedirectPath)());\n                onClose?.();\n                return; // Return after handling\n            } else if (queryRedirectUrl) {\n                // Legacy fallback (and is subscribed)\n                console.log(`[SignInModal] Sign in success. Using query param redirect. Navigating to: ${queryRedirectUrl}`);\n                router.push(queryRedirectUrl);\n                // Return after handling (onClose might not be needed if navigating away)\n                return;\n            } else {\n                // Final fallback (and is subscribed)\n                console.log(\"[SignInModal] Sign in success. No specific redirect. Closing modal.\");\n                onClose?.();\n            // No return needed here as it's the end of the function's try block\n            }\n        } catch (err) {\n            const error = err;\n            console.error(\"Error completing sign in:\", error);\n            setError(error.message);\n        // Handle error state appropriately - maybe don't close modal automatically\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    // --- iPhone App Download Banner ---\n    // This banner appears only if the user is on an iPhone\n    const iphoneBanner = isIphone && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"mb-4 p-3 bg-[#E0FE10] text-black rounded-lg flex items-center justify-between shadow font-semibold\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                children: \"Get the best experience! Download the Pulse iPhone app.\"\n            }, void 0, false, {\n                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                lineNumber: 2362,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                href: \"https://apps.apple.com/ca/app/pulse-community-workouts/id6451497729\",\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                className: \"ml-4 px-3 py-1 bg-black text-[#E0FE10] rounded hover:bg-zinc-800 transition-colors\",\n                children: \"Download\"\n            }, void 0, false, {\n                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                lineNumber: 2363,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n        lineNumber: 2361,\n        columnNumber: 5\n    }, undefined);\n    // ** Debug Log (placed before return) **\n    // if (isVisible) {\n    //     console.log('[SignInModal] Temp Redirect State Check (Render):', {\n    //       roundIdRedirect,\n    //       loginRedirectPath,\n    //       timestamp: new Date().toISOString()\n    //     });\n    // }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 flex items-center justify-center bg-black z-50 sm:p-6\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"bg-zinc-900 w-full h-full sm:h-auto sm:w-[480px] sm:rounded-xl p-6 sm:p-8 border-none sm:border sm:border-zinc-700 shadow-xl overflow-y-auto\",\n            children: [\n                window.location.hostname === \"localhost\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(DevModeToggle, {}, void 0, false, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 2386,\n                    columnNumber: 54\n                }, undefined),\n                iphoneBanner,\n                closable && onClose && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                    onClick: onClose,\n                    className: \"absolute top-4 right-4 text-zinc-400 hover:text-white transition-colors\",\n                    \"aria-label\": \"Close modal\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Camera_Eye_EyeOff_X_lucide_react__WEBPACK_IMPORTED_MODULE_14__.X, {\n                        size: 24\n                    }, void 0, false, {\n                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                        lineNumber: 2396,\n                        columnNumber: 13\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 2391,\n                    columnNumber: 11\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                    onSubmit: handleSubmit,\n                    className: \"space-y-6\",\n                    children: [\n                        error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"bg-red-500 text-white text-sm font-semibold p-3 rounded-lg\",\n                            children: error\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 2402,\n                            columnNumber: 13\n                        }, undefined),\n                        renderCurrentStep(),\n                        signUpStep !== \"quiz-prompt\" && signUpStep !== \"quiz\" && signUpStep !== \"subscription\" && !isForgotPassword && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex flex-col gap-4 mt-8\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                type: \"submit\",\n                                onClick: ()=>{\n                                    console.log(\"[SignInModal] Submit button clicked:\", {\n                                        isSignUp,\n                                        signUpStep,\n                                        email,\n                                        hasPassword: !!password,\n                                        passwordLength: password ? password.length : 0,\n                                        timestamp: new Date().toISOString()\n                                    });\n                                },\n                                className: \"w-full bg-[#E0FE10] text-black font-semibold py-3 px-4 rounded-lg hover:bg-[#c8e60e] transition-colors font-['HK Grotesk']\",\n                                children: isSignUp ? signUpStep === \"profile\" ? \"Complete\" : signUpStep === \"password\" ? \"Continue\" : \"Continue with Email\" : \"Sign In\"\n                            }, void 0, false, {\n                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                lineNumber: 2410,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 2409,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                    lineNumber: 2400,\n                    columnNumber: 9\n                }, undefined),\n                renderQuizNavigation(),\n                signUpStep === \"initial\" && !isForgotPassword && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mt-6 text-center\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-zinc-500 text-sm font-['HK Grotesk']\",\n                                children: [\n                                    isSignUp ? \"Already have an account? \" : \"Don't have an account? \",\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: toggleMode,\n                                        className: \"text-[#E0FE10] hover:text-[#c8e60e]\",\n                                        children: isSignUp ? \"Sign In\" : \"Sign Up\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                        lineNumber: 2443,\n                                        columnNumber: 17\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                lineNumber: 2441,\n                                columnNumber: 15\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 2440,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mt-8 pt-6 border-t border-zinc-700\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex flex-col sm:flex-row justify-center items-center gap-4 text-zinc-400 text-sm mb-6\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                            href: \"/about\",\n                                            className: \"hover:text-[#E0FE10] transition-colors\",\n                                            target: \"_blank\",\n                                            rel: \"noopener noreferrer\",\n                                            children: \"About Pulse\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 2451,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"hidden sm:block w-1 h-1 bg-zinc-700 rounded-full\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 2459,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                            href: \"/creator\",\n                                            className: \"hover:text-[#E0FE10] transition-colors\",\n                                            target: \"_blank\",\n                                            rel: \"noopener noreferrer\",\n                                            children: \"Creator Program\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 2460,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"hidden sm:block w-1 h-1 bg-zinc-700 rounded-full\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 2468,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                            href: \"/rounds\",\n                                            className: \"hover:text-[#E0FE10] transition-colors\",\n                                            target: \"_blank\",\n                                            rel: \"noopener noreferrer\",\n                                            children: \"Rounds Feature\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 2469,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 2450,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex flex-wrap justify-center items-center gap-4 text-zinc-500 text-xs mb-6\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                            href: \"/terms\",\n                                            className: \"hover:text-[#E0FE10] transition-colors\",\n                                            target: \"_blank\",\n                                            rel: \"noopener noreferrer\",\n                                            children: \"Terms & Conditions\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 2480,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"hidden sm:block w-1 h-1 bg-zinc-700 rounded-full\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 2488,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                            href: \"/privacyPolicy\",\n                                            className: \"hover:text-[#E0FE10] transition-colors\",\n                                            target: \"_blank\",\n                                            rel: \"noopener noreferrer\",\n                                            children: \"Privacy Policy\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 2489,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"hidden sm:block w-1 h-1 bg-zinc-700 rounded-full\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 2497,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: ()=>window.location.href = \"mailto:pulsefitnessapp@gmail.com\",\n                                            className: \"hover:text-[#E0FE10] transition-colors\",\n                                            children: \"Contact Us\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 2498,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 2479,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex justify-center gap-6 mb-6\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                            href: \"https://www.instagram.com/fitwithpulse/\",\n                                            target: \"_blank\",\n                                            rel: \"noopener noreferrer\",\n                                            className: \"text-zinc-400 hover:text-[#E0FE10] transition-colors\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                src: \"/instagram.svg\",\n                                                alt: \"Instagram\",\n                                                className: \"w-5 h-5\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                                lineNumber: 2513,\n                                                columnNumber: 19\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 2507,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                            href: \"https://twitter.com/fitwithpulse\",\n                                            target: \"_blank\",\n                                            rel: \"noopener noreferrer\",\n                                            className: \"text-zinc-400 hover:text-[#E0FE10] transition-colors\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                src: \"/twitter.svg\",\n                                                alt: \"Twitter\",\n                                                className: \"w-5 h-5\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                                lineNumber: 2521,\n                                                columnNumber: 19\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 2515,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                            href: \"https://www.youtube.com/@fitwithpulse\",\n                                            target: \"_blank\",\n                                            rel: \"noopener noreferrer\",\n                                            className: \"text-zinc-400 hover:text-[#E0FE10] transition-colors\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                                src: \"/youtube.svg\",\n                                                alt: \"Youtube\",\n                                                className: \"w-5 h-5\"\n                                            }, void 0, false, {\n                                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                                lineNumber: 2529,\n                                                columnNumber: 19\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                            lineNumber: 2523,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 2506,\n                                    columnNumber: 15\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-center text-zinc-500 text-xs\",\n                                    children: [\n                                        \"\\xa9 \",\n                                        new Date().getFullYear(),\n                                        \" Pulse. All rights reserved.\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                                    lineNumber: 2533,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n                            lineNumber: 2449,\n                            columnNumber: 13\n                        }, undefined)\n                    ]\n                }, void 0, true)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n            lineNumber: 2385,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/SignInModal.tsx\",\n        lineNumber: 2384,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SignInModal);\n// Utility to check if onboarding is complete\nfunction isOnboardingComplete(user) {\n    if (!user) return false; // Handle null user\n    // Check each required field safely\n    const hasUsername = !!user.username;\n    // Safely check height: must exist AND have feet > 0\n    const hasValidHeight = !!user.height && typeof user.height === \"object\" && user.height.feet > 0;\n    const hasBirthdate = !!user.birthdate;\n    const hasGender = !!user.gender;\n    const hasLevel = !!user.level;\n    const hasGoals = Array.isArray(user.goal) && user.goal.length > 0;\n    const isRegistrationMarkedComplete = !!user.registrationComplete;\n    return hasUsername && hasValidHeight && hasBirthdate && hasGender && hasLevel && hasGoals && isRegistrationMarkedComplete;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bU4sK0JBQStCLENBQUMsQ0FBQ3ZNLEtBQUt6QixvQkFBb0I7SUFFaEUsT0FDRUQsZUFDQTJOLGtCQUNBQyxnQkFDQUMsYUFDQUMsWUFDQUMsWUFDQUU7QUFFSiIsInNvdXJjZXMiOlsid2VicGFjazovL215LWFwcC8uL3NyYy9jb21wb25lbnRzL1NpZ25Jbk1vZGFsLnRzeD9iZmQ1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQge1xuICBnZXRSZWRpcmVjdFJlc3VsdCxcbiAgc2lnbkluV2l0aFJlZGlyZWN0LFxuICBzaWduSW5XaXRoUG9wdXAsXG4gIE9BdXRoUHJvdmlkZXIsXG4gIFVzZXJDcmVkZW50aWFsLFxuICBBdXRoRXJyb3IsXG4gIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZFxufSBmcm9tIFwiZmlyZWJhc2UvYXV0aFwiO1xuaW1wb3J0IHsgQ2FtZXJhLCBYLCBFeWUsIEV5ZU9mZiB9IGZyb20gXCJsdWNpZGUtcmVhY3RcIjtcbmltcG9ydCB7IEZpdG5lc3NHb2FsLCBRdWl6RGF0YSwgU2lnblVwU3RlcCB9IGZyb20gXCIuLi90eXBlcy9BdXRoVHlwZXNcIjtcbmltcG9ydCB7IEdlbmRlciwgV29ya291dEdvYWwsIH0gZnJvbSBcIi4uL2FwaS9maXJlYmFzZS91c2VyXCI7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb25UeXBlIH0gZnJvbSBcIi4uL2FwaS9maXJlYmFzZS91c2VyXCI7XG5pbXBvcnQgYXV0aFNlcnZpY2UsIHsgU2lnblVwRGF0YSB9IGZyb20gXCIuLi9hcGkvZmlyZWJhc2UvYXV0aFwiO1xuaW1wb3J0IHsgdXNlclNlcnZpY2UsIFVzZXIsIFVzZXJMZXZlbCwgQm9keVdlaWdodCB9IGZyb20gXCIuLi9hcGkvZmlyZWJhc2UvdXNlclwiO1xuaW1wb3J0IHsgYXV0aCB9IGZyb20gXCIuLi9hcGkvZmlyZWJhc2UvY29uZmlnXCI7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICduZXh0L3JvdXRlcic7XG5pbXBvcnQgeyBmaXJlYmFzZVN0b3JhZ2VTZXJ2aWNlLCBVcGxvYWRJbWFnZVR5cGUgfSBmcm9tICcuLi9hcGkvZmlyZWJhc2Uvc3RvcmFnZS9zZXJ2aWNlJztcblxuaW1wb3J0IHsgdXNlRGlzcGF0Y2gsIHVzZVNlbGVjdG9yIH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHsgUm9vdFN0YXRlIH0gZnJvbSAnLi4vcmVkdXgvc3RvcmUnO1xuaW1wb3J0IHsgdG9nZ2xlRGV2TW9kZSB9IGZyb20gJy4uL3JlZHV4L2Rldk1vZGVTbGljZSc7XG5pbXBvcnQgeyBpbml0aWFsaXplRmlyZWJhc2UgfSBmcm9tICcuLi9hcGkvZmlyZWJhc2UvY29uZmlnJztcbmltcG9ydCB7IHVzZVVzZXIgfSBmcm9tICcuLi9ob29rcy91c2VVc2VyJztcbmltcG9ydCB7IGNsZWFyUm91bmRJZFJlZGlyZWN0LCBjbGVhckxvZ2luUmVkaXJlY3RQYXRoIH0gZnJvbSAnLi4vcmVkdXgvdGVtcFJlZGlyZWN0U2xpY2UnOyAvLyBJbXBvcnQgY2xlYXIgYWN0aW9uc1xuaW1wb3J0IHsgc2hvd1RvYXN0IH0gZnJvbSAnLi4vcmVkdXgvdG9hc3RTbGljZSc7IC8vIEltcG9ydCBzaG93VG9hc3RcbmltcG9ydCB7IHdvcmtvdXRTZXJ2aWNlIH0gZnJvbSAnLi4vYXBpL2ZpcmViYXNlL3dvcmtvdXQvc2VydmljZSc7IC8vIEltcG9ydCB3b3Jrb3V0IHNlcnZpY2VcbmltcG9ydCB7IENoYWxsZW5nZSwgU3dlYXRsaXN0Q29sbGVjdGlvbiwgVXNlckNoYWxsZW5nZSB9IGZyb20gJy4uL2FwaS9maXJlYmFzZS93b3Jrb3V0L3R5cGVzJzsgLy8gSW1wb3J0IHdvcmtvdXQgdHlwZXNcblxuaW50ZXJmYWNlIFNpZ25Jbk1vZGFsUHJvcHMge1xuICBpc1Zpc2libGU6IGJvb2xlYW47XG4gIGNsb3NhYmxlPzogYm9vbGVhbjtcbiAgb25DbG9zZT86ICgpID0+IHZvaWQ7XG4gIG9uU2lnbkluU3VjY2Vzcz86ICh1c2VyOiBhbnkpID0+IHZvaWQ7XG4gIG9uU2lnbkluRXJyb3I/OiAoZXJyb3I6IEVycm9yKSA9PiB2b2lkO1xuICBvblNpZ25VcFN1Y2Nlc3M/OiAodXNlcjogYW55KSA9PiB2b2lkO1xuICBvblNpZ25VcEVycm9yPzogKGVycm9yOiBFcnJvcikgPT4gdm9pZDtcbiAgb25RdWl6Q29tcGxldGU/OiAoKSA9PiB2b2lkO1xuICBvblF1aXpTa2lwcGVkPzogKCkgPT4gdm9pZDtcbiAgb25SZWdpc3RyYXRpb25Db21wbGV0ZT86ICgpID0+IHZvaWQ7XG59XG5cbmNvbnN0IERldk1vZGVUb2dnbGU6IFJlYWN0LkZDID0gKCkgPT4ge1xuICBjb25zdCBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7XG4gIGNvbnN0IGlzRGV2ZWxvcG1lbnQgPSB1c2VTZWxlY3Rvcigoc3RhdGU6IFJvb3RTdGF0ZSkgPT4gc3RhdGUuZGV2TW9kZS5pc0RldmVsb3BtZW50KTtcbiAgY29uc3QgaXNMb2NhbGhvc3QgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnO1xuXG4gIC8vIE9uIGNvbXBvbmVudCBtb3VudCwgY2hlY2sgaWYgd2Ugc2hvdWxkIGJlIGluIGRldiBtb2RlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3Qgc2F2ZWRNb2RlID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkZXZNb2RlJykgPT09ICd0cnVlJztcbiAgICBpZiAoc2F2ZWRNb2RlICE9PSBpc0RldmVsb3BtZW50KSB7XG4gICAgICBjb25zb2xlLmxvZygnW0Rldk1vZGVdIEluaXRpYWxpemluZyB3aXRoIHNhdmVkIG1vZGU6Jywge1xuICAgICAgICBzYXZlZE1vZGUsXG4gICAgICAgIGN1cnJlbnRNb2RlOiBpc0RldmVsb3BtZW50LFxuICAgICAgICBpc0xvY2FsaG9zdCxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pO1xuICAgICAgZGlzcGF0Y2godG9nZ2xlRGV2TW9kZSgpKTtcbiAgICAgIGluaXRpYWxpemVGaXJlYmFzZShzYXZlZE1vZGUpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIGNvbnN0IGhhbmRsZVRvZ2dsZSA9ICgpID0+IHtcbiAgICBjb25zdCBuZXdNb2RlID0gIWlzRGV2ZWxvcG1lbnQ7XG4gICAgY29uc29sZS5sb2coJ1tEZXZNb2RlXSBUb2dnbGluZyBtb2RlOicsIHtcbiAgICAgIGZyb206IGlzRGV2ZWxvcG1lbnQgPyAnZGV2ZWxvcG1lbnQnIDogJ3Byb2R1Y3Rpb24nLFxuICAgICAgdG86IG5ld01vZGUgPyAnZGV2ZWxvcG1lbnQnIDogJ3Byb2R1Y3Rpb24nLFxuICAgICAgaXNMb2NhbGhvc3QsXG4gICAgICBzb3VyY2U6IGlzTG9jYWxob3N0ID8gJy5lbnYubG9jYWwnIDogKG5ld01vZGUgPyAnZmlyZWJhc2VDb25maWdzJyA6ICdOZXRsaWZ5JyksXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pO1xuICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGV2TW9kZScsIFN0cmluZyhuZXdNb2RlKSk7XG4gICAgZGlzcGF0Y2godG9nZ2xlRGV2TW9kZSgpKTtcbiAgICBpbml0aWFsaXplRmlyZWJhc2UobmV3TW9kZSk7XG4gICAgXG4gICAgLy8gQWRkIGEgc2xpZ2h0IGRlbGF5IGJlZm9yZSByZWxvYWRpbmcgdG8gZW5zdXJlIEZpcmViYXNlIGluaXRpYWxpemF0aW9uIGNvbXBsZXRlc1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgIH0sIDMwMCk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8YnV0dG9uXG4gICAgICBvbkNsaWNrPXtoYW5kbGVUb2dnbGV9XG4gICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtNCBsZWZ0LTQgcHgtMiBweS0xIHJvdW5kZWQgdGV4dC14cyBmb250LW1lZGl1bSB0cmFuc2l0aW9uLWNvbG9ycyBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiXG4gICAgICBzdHlsZT17e1xuICAgICAgICBiYWNrZ3JvdW5kOiBpc0RldmVsb3BtZW50ID8gJyNFMEZFMTAnIDogJyMzZjNmNDYnLFxuICAgICAgICBjb2xvcjogaXNEZXZlbG9wbWVudCA/ICdibGFjaycgOiAnd2hpdGUnXG4gICAgICB9fVxuICAgICAgdGl0bGU9e2BVc2luZyAke2lzRGV2ZWxvcG1lbnQgPyAnZGV2ZWxvcG1lbnQnIDogJ3Byb2R1Y3Rpb24nfSBjb25maWd1cmF0aW9uIGZyb20gJHtpc0xvY2FsaG9zdCA/ICcuZW52LmxvY2FsJyA6IChpc0RldmVsb3BtZW50ID8gJ2ZpcmViYXNlQ29uZmlncycgOiAnTmV0bGlmeScpfWB9XG4gICAgPlxuICAgICAge2lzRGV2ZWxvcG1lbnQgPyAn8J+UpyBEZXYnIDogJ/CfmoAgUHJvZCd9e2lzTG9jYWxob3N0ID8gJyAoTG9jYWwpJyA6ICcnfVxuICAgIDwvYnV0dG9uPlxuICApO1xufTtcblxuY29uc3QgU2lnbkluTW9kYWw6IFJlYWN0LkZDPFNpZ25Jbk1vZGFsUHJvcHM+ID0gKHtcbiAgaXNWaXNpYmxlLFxuICBjbG9zYWJsZSA9IGZhbHNlLFxuICBvbkNsb3NlLFxuICBvblNpZ25JblN1Y2Nlc3MsXG4gIG9uU2lnbkluRXJyb3IsXG4gIG9uU2lnblVwU3VjY2VzcyxcbiAgb25TaWduVXBFcnJvcixcbiAgb25RdWl6Q29tcGxldGUsXG4gIG9uUXVpelNraXBwZWQsXG4gIG9uUmVnaXN0cmF0aW9uQ29tcGxldGUsXG59KSA9PiB7XG4gIGNvbnN0IFtlbWFpbCwgc2V0RW1haWxdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnNvbGUubG9nKCdbU2lnbkluTW9kYWxdIENvbXBvbmVudCByZW5kZXJpbmcgb3IgcmUtcmVuZGVyaW5nLicpOyAvLyBTaW1wbGUgcmVuZGVyIGxvZ1xuICBjb25zdCBbcGFzc3dvcmQsIHNldFBhc3N3b3JkXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbY29uZmlybVBhc3N3b3JkLCBzZXRDb25maXJtUGFzc3dvcmRdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFt1c2VybmFtZSwgc2V0VXNlcm5hbWVdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtwcm9maWxlSW1hZ2UsIHNldFByb2ZpbGVJbWFnZV0gPSB1c2VTdGF0ZTxGaWxlIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc1NpZ25VcCwgc2V0SXNTaWduVXBdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2lnblVwU3RlcCwgc2V0U2lnblVwU3RlcF0gPSB1c2VTdGF0ZTxTaWduVXBTdGVwPihcImluaXRpYWxcIik7XG4gIGNvbnN0IFtpc0ZvcmdvdFBhc3N3b3JkLCBzZXRJc0ZvcmdvdFBhc3N3b3JkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Jlc2V0RW1haWxTZW50LCBzZXRSZXNldEVtYWlsU2VudF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93RXJyb3IsIHNldFNob3dFcnJvcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc1VzZXJuYW1lQXZhaWxhYmxlLCBzZXRJc1VzZXJuYW1lQXZhaWxhYmxlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2FjdGl2ZVByb3ZpZGVyLCBzZXRBY3RpdmVQcm92aWRlcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzSW1hZ2VVcGxvYWRpbmcsIHNldElzSW1hZ2VVcGxvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBjdXJyZW50VXNlciA9IHVzZVVzZXIoKTtcbiAgY29uc3QgZGlzcGF0Y2ggPSB1c2VEaXNwYXRjaCgpO1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3QgW2lzSXBob25lLCBzZXRJc0lwaG9uZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIC8vIEFkZGVkIHN0YXRlIGZvciBwYXNzd29yZCB2aXNpYmlsaXR5XG4gIGNvbnN0IFtzaG93UGFzc3dvcmQsIHNldFNob3dQYXNzd29yZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93Q29uZmlybVBhc3N3b3JkLCBzZXRTaG93Q29uZmlybVBhc3N3b3JkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Vycm9ycywgc2V0RXJyb3JzXSA9IHVzZVN0YXRlPHtcbiAgICBlbWFpbD86IHN0cmluZztcbiAgICBwYXNzd29yZD86IHN0cmluZztcbiAgICB1c2VybmFtZT86IHN0cmluZztcbiAgfT4oe30pO1xuICBjb25zdCB7IHJvdW5kSWRSZWRpcmVjdCwgbG9naW5SZWRpcmVjdFBhdGggfSA9IHVzZVNlbGVjdG9yKChzdGF0ZTogUm9vdFN0YXRlKSA9PiBzdGF0ZS50ZW1wUmVkaXJlY3QpO1xuXG4gIC8vIERldGVjdCBpZiB0aGUgdXNlciBpcyBvbiBhbiBpUGhvbmVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lm5hdmlnYXRvcikge1xuICAgICAgY29uc3QgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCB8fCB3aW5kb3cubmF2aWdhdG9yLnZlbmRvciB8fCAnJztcbiAgICAgIHNldElzSXBob25lKC9pUGhvbmUvaS50ZXN0KHVhKSk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgLy8gQWRkIGVmZmVjdCB0byBjaGVjayBpZiB3ZSBuZWVkIHRvIHNob3cgcmVnaXN0cmF0aW9uXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGN1cnJlbnRVc2VyKSB7XG4gICAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsIE9uYm9hcmRpbmcgQ2hlY2sgRWZmZWN0XSBSdW5uaW5nLiBDdXJyZW50IFVzZXI6JywgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjdXJyZW50VXNlcikpKTtcblxuICAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbF0gQ2hlY2tpbmcgdXNlciBvbmJvYXJkaW5nIHN0YXR1czonLCB7XG4gICAgICAgIHVzZXJJZDogY3VycmVudFVzZXIuaWQsXG4gICAgICAgIGhhc1VzZXJuYW1lOiAhIWN1cnJlbnRVc2VyLnVzZXJuYW1lLFxuICAgICAgICB1c2VybmFtZTogY3VycmVudFVzZXIudXNlcm5hbWUsXG4gICAgICAgIHJlZ2lzdHJhdGlvbkNvbXBsZXRlOiAhIWN1cnJlbnRVc2VyLnJlZ2lzdHJhdGlvbkNvbXBsZXRlLFxuICAgICAgICBoZWlnaHQ6IGN1cnJlbnRVc2VyLmhlaWdodCxcbiAgICAgICAgYmlydGhkYXRlOiBjdXJyZW50VXNlci5iaXJ0aGRhdGUsXG4gICAgICAgIG9uYm9hcmRpbmdDb21wbGV0ZTogaXNPbmJvYXJkaW5nQ29tcGxldGUoY3VycmVudFVzZXIpLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG9uYm9hcmRpbmdTdGF0dXMgPSBpc09uYm9hcmRpbmdDb21wbGV0ZShjdXJyZW50VXNlcik7XG4gICAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsIE9uYm9hcmRpbmcgQ2hlY2sgRWZmZWN0XSBpc09uYm9hcmRpbmdDb21wbGV0ZSByZXN1bHQ6Jywgb25ib2FyZGluZ1N0YXR1cyk7XG5cbiAgICAgIGlmICghb25ib2FyZGluZ1N0YXR1cykge1xuICAgICAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsIE9uYm9hcmRpbmcgQ2hlY2sgRWZmZWN0XSBPbmJvYXJkaW5nIE5PVCBjb21wbGV0ZS4gQ2hlY2tpbmcgZmllbGRzLi4uJyk7XG5cbiAgICAgICAgY29uc3QgbWlzc2luZyA9IFtdO1xuICAgICAgICBpZiAoIWN1cnJlbnRVc2VyLnVzZXJuYW1lKSBtaXNzaW5nLnB1c2goJ3VzZXJuYW1lJyk7XG4gICAgICAgIGlmICghY3VycmVudFVzZXIuaGVpZ2h0IHx8ICFjdXJyZW50VXNlci5oZWlnaHQuZmVldCkgbWlzc2luZy5wdXNoKCdoZWlnaHQnKTtcbiAgICAgICAgaWYgKCFjdXJyZW50VXNlci5iaXJ0aGRhdGUpIG1pc3NpbmcucHVzaCgnYmlydGhkYXRlJyk7XG4gICAgICAgIGlmICghY3VycmVudFVzZXIucmVnaXN0cmF0aW9uQ29tcGxldGUpIG1pc3NpbmcucHVzaCgncmVnaXN0cmF0aW9uQ29tcGxldGUnKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbF0gVXNlciBtaXNzaW5nIG9uYm9hcmRpbmcgZmllbGRzOicsIG1pc3NpbmcpO1xuXG4gICAgICAgIHNldElzU2lnblVwKHRydWUpOyAvLyBFbnN1cmUgd2UgYXJlIGluIHNpZ251cCBtb2RlXG5cbiAgICAgICAgLy8gT25seSBmb3JjZSB0aGUgc3RlcCBpZiBub3QgYWxyZWFkeSBpbiB0aGUgY29ycmVjdCBvbmJvYXJkaW5nIHN0ZXBcbiAgICAgICAgaWYgKCFjdXJyZW50VXNlci51c2VybmFtZSkgeyAvLyBIaWdoZXN0IHByaW9yaXR5IGlzIHVzZXJuYW1lXG4gICAgICAgICAgLy8gT25seSBzZXQgYmFjayB0byBwcm9maWxlIGlmIHdlIGFyZW4ndCBhbHJlYWR5IHRyeWluZyB0byBtb3ZlIGZvcndhcmRcbiAgICAgICAgICBpZiAoc2lnblVwU3RlcCAhPT0gJ3F1aXotcHJvbXB0JyAmJiBzaWduVXBTdGVwICE9PSAncXVpeicpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2lnbkluTW9kYWwgT25ib2FyZGluZyBDaGVjayBFZmZlY3RdIFNldHRpbmcgc3RlcCB0byBwcm9maWxlICh1c2VybmFtZSBtaXNzaW5nIGFuZCBub3QgYWxyZWFkeSBwcm9ncmVzc2luZyknKTtcbiAgICAgICAgICAgIHNldFNpZ25VcFN0ZXAoJ3Byb2ZpbGUnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbCBPbmJvYXJkaW5nIENoZWNrIEVmZmVjdF0gVXNlcm5hbWUgbWlzc2luZywgYnV0IHN0ZXAgaXMgYWxyZWFkeSBxdWl6L3F1aXotcHJvbXB0LiBBbGxvd2luZyBwcm9ncmVzc2lvbi4nLCB7IGN1cnJlbnRTdGVwOiBzaWduVXBTdGVwIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBjdXJyZW50VXNlci51c2VybmFtZSAmJlxuICAgICAgICAgIHNpZ25VcFN0ZXAgIT09ICdxdWl6JyAmJlxuICAgICAgICAgIHNpZ25VcFN0ZXAgIT09ICdxdWl6LXByb21wdCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbCBPbmJvYXJkaW5nIENoZWNrIEVmZmVjdF0gU2V0dGluZyBzdGVwIHRvIHF1aXotcHJvbXB0ICh1c2VybmFtZSBleGlzdHMsIG9uYm9hcmRpbmcgaW5jb21wbGV0ZSknKTtcbiAgICAgICAgICBzZXRTaWduVXBTdGVwKCdxdWl6LXByb21wdCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2lnbkluTW9kYWwgT25ib2FyZGluZyBDaGVjayBFZmZlY3RdIENvbmRpdGlvbnMgbWV0LCBidXQgbm90IGNoYW5naW5nIHN0ZXAgZnJvbTonLCBzaWduVXBTdGVwKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbCBPbmJvYXJkaW5nIENoZWNrIEVmZmVjdF0gT25ib2FyZGluZyBJUyBjb21wbGV0ZS4gVXNlciBzaG91bGQgYmUgb2theS4gQ3VycmVudCBzdGVwOicsIHNpZ25VcFN0ZXApO1xuICAgICAgICAvLyBQb3RlbnRpYWxseSBhZGQgbG9naWMgaGVyZSBpZiBuZWVkZWQgd2hlbiBvbmJvYXJkaW5nIElTIGNvbXBsZXRlIHVwb24gY2hlY2tcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVXNlciBzaWduZWQgb3V0LCByZXNldCBmb3JtIGZpZWxkc1xuICAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbF0gVXNlciBzaWduZWQgb3V0LCByZXNldHRpbmcgZm9ybSBzdGF0ZS4nKTtcbiAgICAgIHNldEVtYWlsKFwiXCIpO1xuICAgICAgc2V0UGFzc3dvcmQoXCJcIik7XG4gICAgICBzZXRDb25maXJtUGFzc3dvcmQoXCJcIik7XG4gICAgICBzZXRFcnJvcihudWxsKTtcbiAgICAgIHNldEVycm9ycyh7fSk7XG4gICAgICBzZXRJc1NpZ25VcChmYWxzZSk7IC8vIFJlc2V0IHRvIHNpZ24taW4gdmlld1xuICAgICAgc2V0U2lnblVwU3RlcCgnaW5pdGlhbCcpOyAvLyBSZXNldCBzdGVwXG4gICAgICBzZXRJc0ZvcmdvdFBhc3N3b3JkKGZhbHNlKTsgLy8gUmVzZXQgZm9yZ290IHBhc3N3b3JkIHN0YXRlXG4gICAgICBzZXRSZXNldEVtYWlsU2VudChmYWxzZSk7XG4gICAgfVxuICB9LCBbY3VycmVudFVzZXJdKTsgLy8gRGVwZW5kZW5jeSBpcyBjdXJyZW50VXNlclxuXG4gIC8vIFBhc3N3b3JkIHZhbGlkYXRpb24gc3RhdGVzXG4gIGNvbnN0IGhhc1VwcGVyY2FzZSA9IC9bQS1aXS8udGVzdChwYXNzd29yZCk7XG4gIGNvbnN0IGhhc051bWJlciA9IC9cXGQvLnRlc3QocGFzc3dvcmQpO1xuICBjb25zdCBoYXNNaW5MZW5ndGggPSBwYXNzd29yZC5sZW5ndGggPj0gODtcbiAgY29uc3QgcGFzc3dvcmRzTWF0Y2ggPSBwYXNzd29yZCA9PT0gY29uZmlybVBhc3N3b3JkO1xuXG4gIC8vIFF1aXogc3RhdGVzXG4gIGNvbnN0IFtxdWl6U3RlcCwgc2V0UXVpelN0ZXBdID0gdXNlU3RhdGU8bnVtYmVyPigwKTtcbiAgY29uc3QgW3F1aXpEYXRhLCBzZXRRdWl6RGF0YV0gPSB1c2VTdGF0ZTxRdWl6RGF0YT4oe1xuICAgIGdlbmRlcjogbnVsbCxcbiAgICBoZWlnaHQ6IHsgZmVldDogMCwgaW5jaGVzOiAwIH0sXG4gICAgd2VpZ2h0OiAwLFxuICAgIGxldmVsOiBudWxsLFxuICAgIGdvYWw6IFtdLFxuICAgIGJpcnRoZGF0ZTogbnVsbCxcbiAgfSk7XG5cbiAgLy8gLS0tIE5FVzogU3Vic2NyaXB0aW9uIGNoZWNrIGZ1bmN0aW9uIC0tLVxuICAvLyBBZnRlciBzaWduIGluL3VwLCBjYWxsIHRoaXMgdG8gZmV0Y2ggc3Vic2NyaXB0aW9uIGRhdGEgZnJvbSBTdHJpcGUgKHZpYSB5b3VyIGVuZHBvaW50KVxuICAvLyBhbmQgdXBkYXRlIHRoZSB1c2VyIGRvY3VtZW50LiBJZiB0aGUgdXNlciBpcyB1bnN1YnNjcmliZWQsIHJlZGlyZWN0IHRvIC9zdWJzY3JpYmUuXG4gIGNvbnN0IGNoZWNrU3Vic2NyaXB0aW9uQW5kUHJvY2VlZCA9IGFzeW5jICh1c2VyOiBhbnkpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbF0gQ2hlY2tpbmcgc3Vic2NyaXB0aW9uOicsIHtcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZmlyZXN0b3JlVXNlciA9IGF3YWl0IHVzZXJTZXJ2aWNlLmZldGNoVXNlckZyb21GaXJlc3RvcmUodXNlci51aWQpO1xuICAgICAgXG4gICAgICBpZiAoZmlyZXN0b3JlVXNlcikge1xuICAgICAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsXSBVc2VyIHByb2ZpbGUgY2hlY2s6Jywge1xuICAgICAgICAgIGhhc1VzZXJuYW1lOiAhIWZpcmVzdG9yZVVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgdXNlcm5hbWU6IGZpcmVzdG9yZVVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgc3Vic2NyaXB0aW9uVHlwZTogZmlyZXN0b3JlVXNlci5zdWJzY3JpcHRpb25UeXBlLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIC0tLSBPbmJvYXJkaW5nIGNvbXBsZXRlbmVzcyBjaGVjayAtLS1cbiAgICAgICAgaWYgKCFpc09uYm9hcmRpbmdDb21wbGV0ZShmaXJlc3RvcmVVc2VyKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2lnbkluTW9kYWxdIFVzZXIgbWlzc2luZyBvbmJvYXJkaW5nIGRhdGEsIHN0YXJ0aW5nIG9uYm9hcmRpbmcgZmxvdycpO1xuICAgICAgICAgIHNldElzU2lnblVwKHRydWUpO1xuICAgICAgICAgIHNldFNpZ25VcFN0ZXAoJ3Byb2ZpbGUnKTtcbiAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyAtLS0gRW5kIG9uYm9hcmRpbmcgY2hlY2sgLS0tXG5cbiAgICAgICAgY29uc3QgYmV0YVVzZXJIYXNBY2Nlc3MgPSBhd2FpdCB1c2VyU2VydmljZS5nZXRCZXRhVXNlckFjY2VzcyhmaXJlc3RvcmVVc2VyLmVtYWlsLCBmaXJlc3RvcmVVc2VyKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbF0gQWNjZXNzIGNoZWNrIHJlc3VsdHM6Jywge1xuICAgICAgICAgIGJldGFBY2Nlc3M6IGJldGFVc2VySGFzQWNjZXNzLFxuICAgICAgICAgIHN1YnNjcmlwdGlvblR5cGU6IGZpcmVzdG9yZVVzZXIuc3Vic2NyaXB0aW9uVHlwZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBJZiB1c2VyIGhhcyBiZXRhIGFjY2VzcyBvciB2YWxpZCBzdWJzY3JpcHRpb25cbiAgICAgICAgaWYgKGJldGFVc2VySGFzQWNjZXNzIHx8IGZpcmVzdG9yZVVzZXIuc3Vic2NyaXB0aW9uVHlwZSAhPT0gU3Vic2NyaXB0aW9uVHlwZS51bnN1YnNjcmliZWQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsXSBVc2VyIGhhcyBhY2Nlc3MsIGNsb3NpbmcgbW9kYWwnKTtcbiAgICAgICAgICBvblNpZ25JblN1Y2Nlc3M/Lih1c2VyKTtcbiAgICAgICAgICBvbkNsb3NlPy4oKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB1c2VyIGlzIHVuc3Vic2NyaWJlZCBhbmQgbm90IGJldGFcbiAgICAgICAgaWYgKGZpcmVzdG9yZVVzZXIuc3Vic2NyaXB0aW9uVHlwZSA9PT0gU3Vic2NyaXB0aW9uVHlwZS51bnN1YnNjcmliZWQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsXSBVbnN1YnNjcmliZWQgdXNlciwgY2xvc2luZyBtb2RhbCBhbmQgcmVkaXJlY3RpbmcnKTtcbiAgICAgICAgICBvbkNsb3NlPy4oKTtcbiAgICAgICAgICByb3V0ZXIucHVzaCgnL3N1YnNjcmliZScpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcihcIltTaWduSW5Nb2RhbF0gRXJyb3IgaW4gc3Vic2NyaXB0aW9uIGNoZWNrOlwiLCBlcnIpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVTb2NpYWxBdXRoID0gYXN5bmMgKHByb3ZpZGVyOiBcImdvb2dsZVwiIHwgXCJhcHBsZVwiKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKGBbU2lnbkluTW9kYWxdIFN0YXJ0aW5nICR7cHJvdmlkZXJ9IGF1dGg6YCwge1xuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHNldElzTG9hZGluZyh0cnVlKTtcbiAgICAgIHNldEVycm9yKG51bGwpO1xuICAgICAgc2V0QWN0aXZlUHJvdmlkZXIocHJvdmlkZXIpO1xuICAgXG4gICAgICBpZiAocHJvdmlkZXIgPT09IFwiYXBwbGVcIikge1xuICAgICAgICAvLyBJbml0aWFsaXplIEFwcGxlIE9BdXRoIHByb3ZpZGVyXG4gICAgICAgIGNvbnN0IGFwcGxlUHJvdmlkZXIgPSBuZXcgT0F1dGhQcm92aWRlcihcImFwcGxlLmNvbVwiKTtcbiAgICAgICAgYXBwbGVQcm92aWRlci5hZGRTY29wZShcImVtYWlsXCIpO1xuICAgICAgICBhcHBsZVByb3ZpZGVyLmFkZFNjb3BlKFwibmFtZVwiKTtcbiAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFNpZ24gaW4gd2l0aCBwb3B1cFxuICAgICAgICAgIGNvbnN0IHJlc3VsdDogVXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgYXBwbGVQcm92aWRlcik7XG4gICAgICAgICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xuICAgICAgICAgIC8vIEZldGNoIG9yIGNyZWF0ZSB1c2VyIGluIEZpcmVzdG9yZVxuICAgICAgICAgIGxldCBmaXJlc3RvcmVVc2VyID0gYXdhaXQgdXNlclNlcnZpY2UuZmV0Y2hVc2VyRnJvbUZpcmVzdG9yZSh1c2VyLnVpZCk7XG4gICAgICAgICAgaWYgKCFmaXJlc3RvcmVVc2VyKSB7XG4gICAgICAgICAgICBmaXJlc3RvcmVVc2VyID0gbmV3IFVzZXIodXNlci51aWQsIHtcbiAgICAgICAgICAgICAgaWQ6IHVzZXIudWlkLFxuICAgICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCB8fCBcIlwiLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogdXNlci5kaXNwbGF5TmFtZSB8fCBcIlwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCB1c2VyU2VydmljZS51cGRhdGVVc2VyKHVzZXIudWlkLCBmaXJlc3RvcmVVc2VyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgdXNlclNlcnZpY2Uubm9uVUlDdXJyZW50VXNlciA9IGZpcmVzdG9yZVVzZXI7IC8vIFVzZSBub25VSUN1cnJlbnRVc2VyXG4gICBcbiAgICAgICAgICAvLyBDaGVjayBzdWJzY3JpcHRpb24gc3RhdHVzIGZpcnN0XG4gICAgICAgICAgaWYgKGZpcmVzdG9yZVVzZXIuc3Vic2NyaXB0aW9uVHlwZSA9PT0gU3Vic2NyaXB0aW9uVHlwZS51bnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHNldFNpZ25VcFN0ZXAoJ3N1YnNjcmlwdGlvbicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBPdGhlcndpc2UgcHJvY2VlZCB3aXRoIG5vcm1hbCBmbG93XG4gICAgICAgICAgYXdhaXQgY2hlY2tTdWJzY3JpcHRpb25BbmRQcm9jZWVkKHVzZXIpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJBcHBsZSBzaWduLWluIGVycm9yOlwiLCBlcnJvcik7XG4gICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgIHNldEVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgaWYgKGlzU2lnblVwKSB7XG4gICAgICAgICAgICAgIG9uU2lnblVwRXJyb3I/LihlcnJvcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBvblNpZ25JbkVycm9yPy4oZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBnZW5lcmljRXJyb3IgPSBuZXcgRXJyb3IoXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIGR1cmluZyBBcHBsZSBzaWduLWluXCIpO1xuICAgICAgICAgICAgc2V0RXJyb3IoZ2VuZXJpY0Vycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgaWYgKGlzU2lnblVwKSB7XG4gICAgICAgICAgICAgIG9uU2lnblVwRXJyb3I/LihnZW5lcmljRXJyb3IpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgb25TaWduSW5FcnJvcj8uKGdlbmVyaWNFcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHByb3ZpZGVyID09PSAnZ29vZ2xlJykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhdXRoU2VydmljZS5zaWduSW5XaXRoR29vZ2xlKCk7XG4gICAgICAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcbiAgICAgICAgLy8gU3RyaWN0IGVtYWlsIGNoZWNrXG4gICAgICAgIGlmICghdXNlciB8fCAhdXNlci5lbWFpbCkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTaWduSW5Nb2RhbF0gR29vZ2xlIHNpZ24taW4gY29tcGxldGVkIGJ1dCBubyBlbWFpbCB3YXMgcHJvdmlkZWQuIENhbm5vdCBjcmVhdGUgdXNlci4nKTtcbiAgICAgICAgICBzZXRFcnJvcignU2lnbi1pbiBmYWlsZWQ6IEVtYWlsIGFkZHJlc3MgaXMgcmVxdWlyZWQuJyk7XG4gICAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICBzZXRBY3RpdmVQcm92aWRlcihudWxsKTtcbiAgICAgICAgICByZXR1cm47IC8vIFN0b3AgZXhlY3V0aW9uXG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coJ0dvb2dsZSBTaWduIEluIC0gSW5pdGlhbCBVc2VyOicsIHVzZXIpO1xuICAgICAgICBjb25zb2xlLmxvZygnR29vZ2xlIFNpZ24gSW4gLSBGaXJlYmFzZSBVc2VyOicsIHtcbiAgICAgICAgICB1aWQ6IHVzZXIudWlkLFxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgIGRpc3BsYXlOYW1lOiB1c2VyLmRpc3BsYXlOYW1lLFxuICAgICAgICAgIG1ldGFkYXRhOiB1c2VyLm1ldGFkYXRhLFxuICAgICAgICAgIHByb3ZpZGVyRGF0YTogdXNlci5wcm92aWRlckRhdGFcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBmaXJlc3RvcmVVc2VyID0gYXdhaXQgdXNlclNlcnZpY2UuZmV0Y2hVc2VyRnJvbUZpcmVzdG9yZSh1c2VyLnVpZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdHb29nbGUgU2lnbiBJbiAtIEZpcmVzdG9yZSBVc2VyOicsIGZpcmVzdG9yZVVzZXIpO1xuICAgICAgICBpZiAoZmlyZXN0b3JlVXNlcikge1xuICAgICAgICAgIC8vIExvZyBhbGwgdXNlciBwcm9wZXJ0aWVzIGZvciBkZWJ1Z2dpbmdcbiAgICAgICAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsXSBGdWxsIEZpcmVzdG9yZSB1c2VyIG9iamVjdCBhZnRlciBzaWduIGluOicsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZmlyZXN0b3JlVXNlcikpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZpcmVzdG9yZVVzZXIpIHtcbiAgICAgICAgICAvLyBFbWFpbCBleGlzdHMsIHByb2NlZWQgd2l0aCBjcmVhdGlvblxuICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2lnbkluTW9kYWxdIENyZWF0aW5nIG5ldyBGaXJlc3RvcmUgdXNlciBhZnRlciBHb29nbGUgU2lnbi1JbicpO1xuICAgICAgICAgIGZpcmVzdG9yZVVzZXIgPSBuZXcgVXNlcih1c2VyLnVpZCwge1xuICAgICAgICAgICAgaWQ6IHVzZXIudWlkLFxuICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogdXNlci5kaXNwbGF5TmFtZSB8fCBcIlwiLFxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uQ29tcGxldGU6IGZhbHNlLFxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uVHlwZTogU3Vic2NyaXB0aW9uVHlwZS51bnN1YnNjcmliZWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBhd2FpdCB1c2VyU2VydmljZS51cGRhdGVVc2VyKHVzZXIudWlkLCBmaXJlc3RvcmVVc2VyKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnR29vZ2xlIFNpZ24gSW4gLSBDcmVhdGVkIE5ldyBVc2VyOicsIGZpcmVzdG9yZVVzZXIpO1xuICAgICAgICB9IGVsc2UgaWYgKCFmaXJlc3RvcmVVc2VyLmVtYWlsICYmIHVzZXIuZW1haWwpIHtcbiAgICAgICAgICAvLyBJZiB1c2VyIGV4aXN0cyBidXQgZW1haWwgaXMgbWlzc2luZywgdXBkYXRlIGl0XG4gICAgICAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbF0gRmlyZXN0b3JlIHVzZXIgbWlzc2luZyBlbWFpbCwgdXBkYXRpbmcgd2l0aCBGaXJlYmFzZSB1c2VyIGVtYWlsJyk7XG4gICAgICAgICAgZmlyZXN0b3JlVXNlci5lbWFpbCA9IHVzZXIuZW1haWw7XG4gICAgICAgICAgYXdhaXQgdXNlclNlcnZpY2UudXBkYXRlVXNlcih1c2VyLnVpZCwgZmlyZXN0b3JlVXNlcik7XG4gICAgICAgIH1cbiAgICAgICAgdXNlclNlcnZpY2Uubm9uVUlDdXJyZW50VXNlciA9IGZpcmVzdG9yZVVzZXI7IC8vIFVzZSBub25VSUN1cnJlbnRVc2VyXG4gICAgICAgIGNvbnNvbGUubG9nKCdHb29nbGUgU2lnbiBJbiAtIEN1cnJlbnQgVXNlciBTZXQ6JywgdXNlclNlcnZpY2Uubm9uVUlDdXJyZW50VXNlcik7IC8vIFVzZSBub25VSUN1cnJlbnRVc2VyXG4gICAgICAgIC8vIEZpeDogQ2hlY2sgaWYgdXNlcm5hbWUgaXMgbWlzc2luZyAodXNpbmcgdHJ1dGh5IGNoZWNrKSBpbnN0ZWFkIG9mIGVtcHR5IHN0cmluZyBjb21wYXJpc29uXG4gICAgICAgIGNvbnNvbGUubG9nKFwiVXNlcm5hbWUgY2hlY2s6XCIsIHtcbiAgICAgICAgICB1c2VybmFtZTogZmlyZXN0b3JlVXNlci51c2VybmFtZSxcbiAgICAgICAgICBpc0VtcHR5OiAhZmlyZXN0b3JlVXNlci51c2VybmFtZSxcbiAgICAgICAgICB0eXBlT2Y6IHR5cGVvZiBmaXJlc3RvcmVVc2VyLnVzZXJuYW1lXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIWZpcmVzdG9yZVVzZXIudXNlcm5hbWUpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlN0YXJ0aW5nIHJlZ2lzdHJhdGlvbiAtIHVzZXJuYW1lIG1pc3NpbmdcIik7XG4gICAgICAgICAgc2V0SXNTaWduVXAodHJ1ZSk7XG4gICAgICAgICAgc2V0U2lnblVwU3RlcChcInByb2ZpbGVcIik7XG4gICAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpcmVzdG9yZVVzZXIuc3Vic2NyaXB0aW9uVHlwZSA9PT0gU3Vic2NyaXB0aW9uVHlwZS51bnN1YnNjcmliZWQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzZXIgaXMgdW5zdWJzY3JpYmVkLCBzaG93aW5nIHN1YnNjcmlwdGlvbiBzdGVwXCIpO1xuICAgICAgICAgIHNldFNpZ25VcFN0ZXAoJ3N1YnNjcmlwdGlvbicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyAtLS0gT25ib2FyZGluZyBjb21wbGV0ZW5lc3MgY2hlY2sgLS0tXG4gICAgICAgIGlmICghaXNPbmJvYXJkaW5nQ29tcGxldGUoZmlyZXN0b3JlVXNlcikpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsXSBHb29nbGUgc2lnbi1pbjogVXNlciBtaXNzaW5nIG9uYm9hcmRpbmcgZGF0YSwgc3RhcnRpbmcgb25ib2FyZGluZyBmbG93Jyk7XG4gICAgICAgICAgc2V0SXNTaWduVXAodHJ1ZSk7XG4gICAgICAgICAgc2V0U2lnblVwU3RlcCgncHJvZmlsZScpO1xuICAgICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIC0tLSBFbmQgb25ib2FyZGluZyBjaGVjayAtLS1cbiAgICAgICAgY29uc29sZS5sb2coXCJDaGVja2luZyBTdWJzXCIpO1xuICAgICAgICBhd2FpdCBjaGVja1N1YnNjcmlwdGlvbkFuZFByb2NlZWQodXNlcik7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgIC8vIEtlZXAgeW91ciBleGlzdGluZyBlcnJvciBoYW5kbGluZ1xuICAgICAgY29uc29sZS5lcnJvcihgW1NpZ25Jbk1vZGFsXSAke3Byb3ZpZGVyfSBhdXRoIGVycm9yOmAsIGVycm9yKTtcbiAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSBcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWRcIjtcbiAgICAgIFxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgLy8gSGFuZGxlIHNwZWNpZmljIEZpcmViYXNlIEF1dGggZXJyb3IgY29kZXNcbiAgICAgICAgc3dpdGNoICgoZXJyb3IgYXMgYW55KS5jb2RlKSB7XG4gICAgICAgICAgY2FzZSAnYXV0aC9wb3B1cC1ibG9ja2VkJzpcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IFwiUGxlYXNlIGVuYWJsZSBwb3B1cHMgZm9yIHRoaXMgc2l0ZSBhbmQgdHJ5IGFnYWluXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdhdXRoL3BvcHVwLWNsb3NlZC1ieS11c2VyJzpcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IFwiU2lnbi1pbiBjYW5jZWxsZWQuIFBsZWFzZSB0cnkgYWdhaW5cIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2F1dGgvY2FuY2VsbGVkLXBvcHVwLXJlcXVlc3QnOlxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gXCJBbm90aGVyIHNpZ24taW4gYXR0ZW1wdCBpcyBhbHJlYWR5IGluIHByb2dyZXNzXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdhdXRoL2FjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWwnOlxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gXCJBbiBhY2NvdW50IGFscmVhZHkgZXhpc3RzIHdpdGggdGhlIHNhbWUgZW1haWwgYWRkcmVzcyBidXQgZGlmZmVyZW50IHNpZ24taW4gY3JlZGVudGlhbHMuIFBsZWFzZSBzaWduIGluIHVzaW5nIHRoZSBvcmlnaW5hbCBhY2NvdW50IG1ldGhvZC5cIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2F1dGgvbmV0d29yay1yZXF1ZXN0LWZhaWxlZCc6XG4gICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBcIk5ldHdvcmsgZXJyb3IuIFBsZWFzZSBjaGVjayB5b3VyIGludGVybmV0IGNvbm5lY3Rpb24gYW5kIHRyeSBhZ2FpblwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnYXV0aC91c2VyLWRpc2FibGVkJzpcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IFwiVGhpcyBhY2NvdW50IGhhcyBiZWVuIGRpc2FibGVkLiBQbGVhc2UgY29udGFjdCBzdXBwb3J0XCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdhdXRoL29wZXJhdGlvbi1ub3QtYWxsb3dlZCc6XG4gICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBcIlRoaXMgc2lnbi1pbiBtZXRob2QgaXMgbm90IGVuYWJsZWQuIFBsZWFzZSBjb250YWN0IHN1cHBvcnRcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBzZXRFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGlzU2lnblVwKSB7XG4gICAgICAgICAgb25TaWduVXBFcnJvcj8uKGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvblNpZ25JbkVycm9yPy4oZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgICAgICBjb25zdCBnZW5lcmljRXJyb3IgPSBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgaWYgKGlzU2lnblVwKSB7XG4gICAgICAgICAgb25TaWduVXBFcnJvcj8uKGdlbmVyaWNFcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb25TaWduSW5FcnJvcj8uKGdlbmVyaWNFcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgIHNldEFjdGl2ZVByb3ZpZGVyKG51bGwpO1xuICAgIH1cbiAgIH07XG5cbiAgY29uc3QgYWRkTG9nID0gKGxvZzogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgY3VycmVudExvZ3MgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiYXV0aEZsb3dMb2dzXCIpIHx8IFwiW11cIik7XG4gICAgY3VycmVudExvZ3MucHVzaChgWyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfV0gJHtsb2d9YCk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJhdXRoRmxvd0xvZ3NcIiwgSlNPTi5zdHJpbmdpZnkoY3VycmVudExvZ3MpKTtcbiAgfTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGxvZ3MgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImF1dGhGbG93TG9nc1wiKTtcbiAgICBpZiAobG9ncykge1xuICAgICAgY29uc29sZS5sb2coXCJBdXRoIEZsb3cgTG9nczpcIik7XG4gICAgICBjb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiKTtcbiAgICAgIEpTT04ucGFyc2UobG9ncykuZm9yRWFjaCgobG9nOiBzdHJpbmcpID0+IGNvbnNvbGUubG9nKGxvZykpO1xuICAgICAgY29uc29sZS5sb2coXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIik7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImF1dGhGbG93TG9nc1wiKTtcbiAgICB9XG4gICBcbiAgICBsZXQgaXNNb3VudGVkID0gdHJ1ZTtcbiAgIFxuICAgIGNvbnN0IGhhbmRsZVJlZGlyZWN0ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgYWRkTG9nKFwiU3RhcnRpbmcgcmVkaXJlY3QgaGFuZGxlclwiKTtcbiAgIFxuICAgICAgaWYgKCFpc1Zpc2libGUpIHtcbiAgICAgICAgYWRkTG9nKFwiTW9kYWwgbm90IHZpc2libGUsIHNraXBwaW5nIHJlZGlyZWN0IGhhbmRsaW5nXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICBcbiAgICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XG4gICAgICBjb25zdCBpc1JlZGlyZWN0aW5nID0gdXJsUGFyYW1zLmhhcyhcInN0YXRlXCIpIHx8IHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKFwiX18vYXV0aC9oYW5kbGVyXCIpO1xuICAgICAgYWRkTG9nKGBSZWRpcmVjdCBkZXRlY3RlZDogJHtpc1JlZGlyZWN0aW5nfWApO1xuICAgICAgYWRkTG9nKGBDdXJyZW50IFVSTDogJHt3aW5kb3cubG9jYXRpb24uaHJlZn1gKTtcbiAgIFxuICAgICAgaWYgKCFpc1JlZGlyZWN0aW5nKSB7XG4gICAgICAgIGFkZExvZyhcIk5vIHJlZGlyZWN0IHBhcmFtZXRlcnMgZGV0ZWN0ZWQsIGV4aXRpbmcgcmVkaXJlY3QgaGFuZGxlclwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgXG4gICAgICB0cnkge1xuICAgICAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XG4gICAgICAgIGFkZExvZyhcIkNhbGxpbmcgZ2V0UmVkaXJlY3RSZXN1bHQuLi5cIik7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xuICAgICAgICBhZGRMb2coYGdldFJlZGlyZWN0UmVzdWx0IHJlc3VsdDogJHtKU09OLnN0cmluZ2lmeShyZXN1bHQpfWApO1xuICAgXG4gICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgYWRkTG9nKFwiTm8gcmVzdWx0IHJldHVybmVkIGJ5IGdldFJlZGlyZWN0UmVzdWx0LCBjaGVja2luZyBwZW5kaW5nIHJlZGlyZWN0Li4uXCIpO1xuICAgICAgICAgIGNvbnN0IHBlbmRpbmdSZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgYWRkTG9nKGBQZW5kaW5nIHJlZGlyZWN0IGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGFkZExvZyhgUGVuZGluZyByZWRpcmVjdCByZXN1bHQ6ICR7SlNPTi5zdHJpbmdpZnkocGVuZGluZ1Jlc3VsdCl9YCk7XG4gICBcbiAgICAgICAgICBpZiAoIXBlbmRpbmdSZXN1bHQpIHtcbiAgICAgICAgICAgIGFkZExvZyhcIk5vIHBlbmRpbmcgcmVkaXJlY3QgcmVzdWx0LCBleGl0aW5nIGhhbmRsZXJcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICBcbiAgICAgICAgaWYgKCFpc01vdW50ZWQpIHtcbiAgICAgICAgICBhZGRMb2coXCJDb21wb25lbnQgdW5tb3VudGVkIGR1cmluZyByZWRpcmVjdCwgZXhpdGluZyBoYW5kbGVyXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgXG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWwgPSByZXN1bHQgYXMgVXNlckNyZWRlbnRpYWw7XG4gICAgICAgIGlmICghY3JlZGVudGlhbCB8fCAhY3JlZGVudGlhbC51c2VyKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdXNlciBjcmVkZW50aWFsIGZvdW5kIGluIHJlZGlyZWN0IHJlc3VsdFwiKTtcbiAgICAgICAgfVxuICAgXG4gICAgICAgIGNvbnN0IHsgdXNlciB9ID0gY3JlZGVudGlhbDtcbiAgICAgICAgYWRkTG9nKGBVc2VyIGluZm86IHByb3ZpZGVySWQ9JHtjcmVkZW50aWFsLnByb3ZpZGVySWR9LCBlbWFpbD0ke3VzZXIuZW1haWx9LCBpc05ld1VzZXI9JHt1c2VyLm1ldGFkYXRhLmNyZWF0aW9uVGltZSA9PT0gdXNlci5tZXRhZGF0YS5sYXN0U2lnbkluVGltZX1gKTtcbiAgIFxuICAgICAgICBjb25zdCBpc0FwcGxlU2lnbkluID0gY3JlZGVudGlhbC5wcm92aWRlcklkID09PSBcImFwcGxlLmNvbVwiIHx8IHVzZXIucHJvdmlkZXJEYXRhLnNvbWUoKHByb3ZpZGVyKSA9PiBwcm92aWRlci5wcm92aWRlcklkID09PSBcImFwcGxlLmNvbVwiKTtcbiAgICAgICAgbGV0IGZpcmVzdG9yZVVzZXIgPSBhd2FpdCB1c2VyU2VydmljZS5mZXRjaFVzZXJGcm9tRmlyZXN0b3JlKHVzZXIudWlkKTtcbiAgIFxuICAgICAgICBpZiAoIWZpcmVzdG9yZVVzZXIgJiYgdXNlci5tZXRhZGF0YS5jcmVhdGlvblRpbWUgPT09IHVzZXIubWV0YWRhdGEubGFzdFNpZ25JblRpbWUpIHtcbiAgICAgICAgICBhZGRMb2coXCJOZXcgdXNlciBkZXRlY3RlZCwgY3JlYXRpbmcgRmlyZXN0b3JlIGRvY3VtZW50XCIpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENSSVRJQ0FMIENIRUNLOiBFbnN1cmUgZW1haWwgZXhpc3RzIGJlZm9yZSBjcmVhdGluZyB1c2VyXG4gICAgICAgICAgaWYgKCF1c2VyLmVtYWlsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbU2lnbkluTW9kYWxdIFJlZGlyZWN0IHNpZ24taW4gY29tcGxldGVkIGJ1dCBubyBlbWFpbCB3YXMgcHJvdmlkZWQuIENhbm5vdCBjcmVhdGUgdXNlci4nKTtcbiAgICAgICAgICAgIGFkZExvZyhcIlJlZGlyZWN0IHNpZ24taW4gZmFpbGVkOiBFbWFpbCBhZGRyZXNzIGlzIHJlcXVpcmVkLlwiKTtcbiAgICAgICAgICAgIHNldEVycm9yKCdTaWduLWluIGZhaWxlZDogRW1haWwgYWRkcmVzcyBpcyByZXF1aXJlZC4nKTtcbiAgICAgICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICBzZXRBY3RpdmVQcm92aWRlcihudWxsKTtcbiAgICAgICAgICAgIHJldHVybjsgLy8gU3RvcCBleGVjdXRpb25cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRW1haWwgZXhpc3RzLCBwcm9jZWVkIHdpdGggY3JlYXRpb25cbiAgICAgICAgICBmaXJlc3RvcmVVc2VyID0gbmV3IFVzZXIodXNlci51aWQsIHtcbiAgICAgICAgICAgIGlkOiB1c2VyLnVpZCxcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IHVzZXIuZGlzcGxheU5hbWUgfHwgXCJcIixcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBhd2FpdCB1c2VyU2VydmljZS51cGRhdGVVc2VyKHVzZXIudWlkLCBmaXJlc3RvcmVVc2VyKTtcbiAgICAgICAgICBhZGRMb2coYENyZWF0ZWQgbmV3IEZpcmVzdG9yZSB1c2VyOiAke2ZpcmVzdG9yZVVzZXIuaWR9YCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZmlyZXN0b3JlVXNlcikge1xuICAgICAgICAgIC8vIENoZWNrIGlmIHVzZXJuYW1lIGlzIG1pc3NpbmcgLSBoaWdoZXN0IHByaW9yaXR5XG4gICAgICAgICAgaWYgKCFmaXJlc3RvcmVVc2VyLnVzZXJuYW1lKSB7XG4gICAgICAgICAgICBzZXRJc1NpZ25VcCh0cnVlKTtcbiAgICAgICAgICAgIHNldFNpZ25VcFN0ZXAoJ3Byb2ZpbGUnKTtcbiAgICAgICAgICAgIGFkZExvZyhcIlVzZXIgbWlzc2luZyB1c2VybmFtZSwgc3RhcnRpbmcgcmVnaXN0cmF0aW9uIGZsb3dcIik7XG4gICAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDaGVjayBzdWJzY3JpcHRpb24gc3RhdHVzXG4gICAgICAgICAgaWYgKGZpcmVzdG9yZVVzZXIuc3Vic2NyaXB0aW9uVHlwZSA9PT0gU3Vic2NyaXB0aW9uVHlwZS51bnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHNldFNpZ25VcFN0ZXAoJ3N1YnNjcmlwdGlvbicpO1xuICAgICAgICAgICAgYWRkTG9nKFwiVXNlciB1bnN1YnNjcmliZWQsIHNob3dpbmcgc3Vic2NyaXB0aW9uIHN0ZXBcIik7XG4gICAgICAgICAgfSBlbHNlIGlmICh1c2VyLm1ldGFkYXRhLmNyZWF0aW9uVGltZSA9PT0gdXNlci5tZXRhZGF0YS5sYXN0U2lnbkluVGltZSkge1xuICAgICAgICAgICAgb25TaWduVXBTdWNjZXNzPy4odXNlcik7XG4gICAgICAgICAgICBhZGRMb2coXCJOZXcgdXNlciBzaWdudXAgc3VjY2Vzc2Z1bFwiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb25TaWduSW5TdWNjZXNzPy4odXNlcik7XG4gICAgICAgICAgICBhZGRMb2coXCJFeGlzdGluZyB1c2VyIHNpZ25pbiBzdWNjZXNzZnVsXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgYWRkTG9nKGBSZWRpcmVjdCBoYW5kbGVyIGVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogZXJyb3J9YCk7XG4gICAgICAgIGlmICghaXNNb3VudGVkKSByZXR1cm47XG4gICBcbiAgICAgICAgc2V0RXJyb3IoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIkF1dGhlbnRpY2F0aW9uIGZhaWxlZFwiKTtcbiAgICAgICAgaXNTaWduVXAgPyBvblNpZ25VcEVycm9yPy4oZXJyb3IgYXMgRXJyb3IpIDogb25TaWduSW5FcnJvcj8uKGVycm9yIGFzIEVycm9yKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChpc01vdW50ZWQpIHtcbiAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgIGFkZExvZyhcIlJlZGlyZWN0IGhhbmRsZXIgY29tcGxldGVcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgXG4gICAgaGFuZGxlUmVkaXJlY3QoKTtcbiAgIFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpc01vdW50ZWQgPSBmYWxzZTtcbiAgICB9O1xuICAgfSwgW2lzVmlzaWJsZSwgb25TaWduSW5TdWNjZXNzLCBvblNpZ25VcFN1Y2Nlc3MsIG9uU2lnbkluRXJyb3IsIG9uU2lnblVwRXJyb3IsIG9uQ2xvc2VdKTtcblxuICAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsXSBGb3JtIHN1Ym1pc3Npb24gc3RhcnRlZDonLCB7XG4gICAgICBpc1NpZ25VcCxcbiAgICAgIHNpZ25VcFN0ZXAsXG4gICAgICBpc0luaXRpYWxTdGVwOiBzaWduVXBTdGVwID09PSBcImluaXRpYWxcIixcbiAgICAgIGlzUGFzc3dvcmRTdGVwOiBzaWduVXBTdGVwID09PSBcInBhc3N3b3JkXCIsXG4gICAgICBpc1Byb2ZpbGVTdGVwOiBzaWduVXBTdGVwID09PSBcInByb2ZpbGVcIixcbiAgICAgIHNpZ25VcFN0ZXBUeXBlOiB0eXBlb2Ygc2lnblVwU3RlcCxcbiAgICAgIGN1cnJlbnRFbWFpbDogZW1haWwsXG4gICAgICBoYXNQYXNzd29yZDogISFwYXNzd29yZCxcbiAgICAgIHBhc3N3b3JkTGVuZ3RoOiBwYXNzd29yZC5sZW5ndGgsXG4gICAgICBjdXJyZW50VXNlcjogYXV0aC5jdXJyZW50VXNlcj8uZW1haWwsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pO1xuICBcbiAgICBpZiAoc2lnblVwU3RlcCA9PT0gXCJwcm9maWxlXCIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHNldElzTG9hZGluZyh0cnVlKTtcbiAgICAgICAgc2V0RXJyb3IobnVsbCk7XG4gICAgICAgIGNvbnN0IHVzZXJJZCA9IGF1dGguY3VycmVudFVzZXI/LnVpZDtcbiAgICAgICAgaWYgKCF1c2VySWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBhdXRoZW50aWNhdGVkIHVzZXIgZm91bmQgZm9yIHByb2ZpbGUgdXBkYXRlXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIEZldGNoIGN1cnJlbnQgZGF0YSBmaXJzdCAtLS0gXG4gICAgICAgIGNvbnN0IGN1cnJlbnRVc2VyRGF0YSA9IGF3YWl0IHVzZXJTZXJ2aWNlLmZldGNoVXNlckZyb21GaXJlc3RvcmUodXNlcklkKTtcbiAgICAgICAgaWYgKCFjdXJyZW50VXNlckRhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBsb2FkIGN1cnJlbnQgdXNlciBkYXRhIGZvciBwcm9maWxlIHVwZGF0ZS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbCBQcm9maWxlIFN0ZXBdIEZldGNoZWQgY3VycmVudCB1c2VyIGRhdGEgYmVmb3JlIHVwZGF0ZScpO1xuICAgICAgICAvLyAtLS0gRW5kIEZldGNoIC0tLVxuXG4gICAgICAgIC8vIEVtYWlsIGZhbGxiYWNrOiBFbnN1cmUgZW1haWwgaXMgaW5jbHVkZWRcbiAgICAgICAgY29uc3QgY3VycmVudEVtYWlsID0gY3VycmVudFVzZXJEYXRhLmVtYWlsIHx8IGF1dGguY3VycmVudFVzZXI/LmVtYWlsO1xuICAgICAgICBpZiAoIWN1cnJlbnRFbWFpbCkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTaWduSW5Nb2RhbCBSZWdpc3RyYXRpb24gUHJvZmlsZV06IEVtYWlsIGlzIG1pc3NpbmcsIGNhbm5vdCBjb21wbGV0ZSByZWdpc3RyYXRpb24uJyk7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRW1haWwgaXMgbWlzc2luZywgY2Fubm90IGNvbXBsZXRlIHJlZ2lzdHJhdGlvbi5cIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQcmVwYXJlIHRoZSB1cGRhdGVkIHVzZXIgZGF0YSwgbWVyZ2luZyB3aXRoIGZldGNoZWQgZGF0YVxuICAgICAgICBjb25zdCB1cGRhdGVkVXNlciA9IG5ldyBVc2VyKHVzZXJJZCwge1xuICAgICAgICAgIC4uLmN1cnJlbnRVc2VyRGF0YS50b0RpY3Rpb25hcnkoKSwgLy8gQmFzZSBvbiBmZXRjaGVkIGRhdGFcbiAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsICAgICAgICAgICAgICAgIC8vIEFkZCBuZXcgdXNlcm5hbWVcbiAgICAgICAgICBlbWFpbDogY3VycmVudEVtYWlsLCAgICAgICAgICAgICAgIC8vIEVuc3VyZSBlbWFpbCBpcyBwcmVzZW50XG4gICAgICAgICAgcmVnaXN0cmF0aW9uQ29tcGxldGU6IHRydWUsICAgICAgLy8gTWFyayByZWdpc3RyYXRpb24gY29tcGxldGVcbiAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aW1lc3RhbXBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbCBQcm9maWxlIFN0ZXBdIEF0dGVtcHRpbmcgdG8gdXBkYXRlIHVzZXIgd2l0aDonLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHVwZGF0ZWRVc2VyLnRvRGljdGlvbmFyeSgpKSkpO1xuICAgICAgICBhd2FpdCB1c2VyU2VydmljZS51cGRhdGVVc2VyKHVzZXJJZCwgdXBkYXRlZFVzZXIpO1xuICAgICAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsIFByb2ZpbGUgU3RlcF0gVXNlciB1cGRhdGUgc3VjY2Vzc2Z1bC4gTW92aW5nIHRvIHF1aXogcHJvbXB0LicpO1xuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIGxvY2FsIHN0YXRlIGltbWVkaWF0ZWx5XG4gICAgICAgIHVzZXJTZXJ2aWNlLm5vblVJQ3VycmVudFVzZXIgPSB1cGRhdGVkVXNlcjtcbiAgICAgICAgXG4gICAgICAgIC8vIE5FVzogQ2hlY2sgaWYgd2UgbmVlZCB0byBhdXRvLWpvaW4gYSBjaGFsbGVuZ2UgYWZ0ZXIgcHJvZmlsZSBjb21wbGV0aW9uXG4gICAgICAgIGlmIChyb3VuZElkUmVkaXJlY3QpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsIFByb2ZpbGUgU3RlcF0gUHJvZmlsZSBjb21wbGV0ZSB3aXRoIHVzZXJuYW1lLiBGb3VuZCByb3VuZElkUmVkaXJlY3QuIEF0dGVtcHRpbmcgYXV0by1qb2luOicsIHJvdW5kSWRSZWRpcmVjdCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2hlY2sgc3Vic2NyaXB0aW9uIHN0YXR1cyBmb3IgYXV0by1qb2luIGRlY2lzaW9uXG4gICAgICAgICAgaWYgKHVwZGF0ZWRVc2VyLnN1YnNjcmlwdGlvblR5cGUgIT09IFN1YnNjcmlwdGlvblR5cGUudW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICBhd2FpdCBhdXRvSm9pbkNoYWxsZW5nZShyb3VuZElkUmVkaXJlY3QpOyAvLyBBd2FpdCB0aGUgam9pbiBhdHRlbXB0XG4gICAgICAgICAgICBkaXNwYXRjaChjbGVhclJvdW5kSWRSZWRpcmVjdCgpKTsgLy8gQ2xlYXIgdGhlIHJlZGlyZWN0IElEIGFmdGVyIGpvaW4gYXR0ZW1wdFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTdGlsbCBjb250aW51ZSB0byBxdWl6LXByb21wdCByZWdhcmRsZXNzIG9mIGpvaW4gc3VjY2Vzcy9mYWlsdXJlXG4gICAgICAgICAgICBzZXRTaWduVXBTdGVwKFwicXVpei1wcm9tcHRcIik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2lnbkluTW9kYWwgUHJvZmlsZSBTdGVwXSBVc2VyIGlzIHVuc3Vic2NyaWJlZC4gTW92aW5nIHRvIHF1aXotcHJvbXB0IGZpcnN0LCBkZWZlcnJpbmcgam9pbi4nKTtcbiAgICAgICAgICAgIC8vIFNldCB0aGUgbmV4dCBzdGVwIGJ1dCBrZWVwIHJvdW5kSWRSZWRpcmVjdCBmb3IgbGF0ZXJcbiAgICAgICAgICAgIHNldFNpZ25VcFN0ZXAoXCJxdWl6LXByb21wdFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTm9ybWFsIGZsb3cgLSBubyBwZW5kaW5nIGNoYWxsZW5nZSBqb2luXG4gICAgICAgICAgc2V0U2lnblVwU3RlcChcInF1aXotcHJvbXB0XCIpO1xuICAgICAgICB9XG5cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiW1NpZ25Jbk1vZGFsIFByb2ZpbGUgU3RlcF0gRXJyb3IgdXBkYXRpbmcgdXNlcm5hbWU6XCIsIGVycik7XG4gICAgICAgIHNldEVycm9yKGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnQW4gZXJyb3Igb2NjdXJyZWQnKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICB9XG4gICAgICByZXR1cm47IC8vIEltcG9ydGFudDogU3RvcCBoYW5kbGVTdWJtaXQgZXhlY3V0aW9uIGFmdGVyIHByb2ZpbGUgc3RlcFxuICAgIH1cblxuICAgIGlmICghaXNTaWduVXApIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHNldElzTG9hZGluZyh0cnVlKTtcbiAgICAgICAgc2V0RXJyb3IobnVsbCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhdXRoU2VydmljZS5zaWduSW5XaXRoRW1haWwoZW1haWwsIHBhc3N3b3JkKTtcbiAgICAgICAgY29uc3QgdXNlckRvYyA9IGF3YWl0IHVzZXJTZXJ2aWNlLmZldGNoVXNlckZyb21GaXJlc3RvcmUocmVzdWx0LnVzZXIudWlkKTtcbiAgICAgICAgdXNlclNlcnZpY2Uubm9uVUlDdXJyZW50VXNlciA9IHVzZXJEb2M7IC8vIFVzZSBub25VSUN1cnJlbnRVc2VyXG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbF0gVXNlciBkb2N1bWVudDonLCB7XG4gICAgICAgICAgaGFzVXNlcm5hbWU6ICEhdXNlckRvYz8udXNlcm5hbWUsXG4gICAgICAgICAgc3Vic2NyaXB0aW9uVHlwZTogdXNlckRvYz8uc3Vic2NyaXB0aW9uVHlwZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodXNlckRvYykge1xuICAgICAgICAgIC8vIENoZWNrIGlmIHVzZXJuYW1lIGlzIG1pc3NpbmdcbiAgICAgICAgICBpZiAoIXVzZXJEb2MudXNlcm5hbWUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2lnbkluTW9kYWxdIFVzZXIgbWlzc2luZyB1c2VybmFtZSwgc3RhcnRpbmcgcmVnaXN0cmF0aW9uJyk7XG4gICAgICAgICAgICBzZXRJc1NpZ25VcCh0cnVlKTtcbiAgICAgICAgICAgIHNldFNpZ25VcFN0ZXAoJ3Byb2ZpbGUnKTtcbiAgICAgICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgYmV0YVVzZXJIYXNBY2Nlc3MgPSBhd2FpdCB1c2VyU2VydmljZS5nZXRCZXRhVXNlckFjY2Vzcyh1c2VyRG9jLmVtYWlsLCB1c2VyRG9jKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsXSBCZXRhIGFjY2VzcyBjaGVjazonLCB7XG4gICAgICAgICAgICBoYXNBY2Nlc3M6IGJldGFVc2VySGFzQWNjZXNzLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChiZXRhVXNlckhhc0FjY2VzcyB8fCB1c2VyRG9jLnN1YnNjcmlwdGlvblR5cGUgIT09IFN1YnNjcmlwdGlvblR5cGUudW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsXSBVc2VyIGhhcyBhY2Nlc3MsIGF0dGVtcHRpbmcgdG8gY2xvc2UgbW9kYWwnKTtcbiAgICAgICAgICAgIGhhbmRsZVNpZ25JblN1Y2Nlc3MocmVzdWx0LnVzZXIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh1c2VyRG9jLnN1YnNjcmlwdGlvblR5cGUgPT09IFN1YnNjcmlwdGlvblR5cGUudW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsXSBVbnN1YnNjcmliZWQgdXNlciwgcmVkaXJlY3RpbmcnKTtcbiAgICAgICAgICAgIG9uQ2xvc2U/LigpO1xuICAgICAgICAgICAgcm91dGVyLnB1c2goJy9zdWJzY3JpYmUnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiW1NpZ25Jbk1vZGFsXSBFcnJvciBkdXJpbmcgc2lnbi1pbjpcIiwgZXJyKTtcbiAgICAgICAgc2V0RXJyb3IoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdBbiBlcnJvciBvY2N1cnJlZCcpO1xuICAgICAgICBvblNpZ25JbkVycm9yPy4oZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIgOiBuZXcgRXJyb3IoJ0FuIGVycm9yIG9jY3VycmVkJykpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuICAgICAgICBzZXRFcnJvcihudWxsKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKCdbU2lnbkluTW9kYWxdIEluIHNpZ24tdXAgZmxvdyB3aXRoIHN0ZXA6Jywge1xuICAgICAgICAgIHNpZ25VcFN0ZXAsXG4gICAgICAgICAgZW1haWwsXG4gICAgICAgICAgaGFzUGFzc3dvcmQ6ICEhcGFzc3dvcmQsXG4gICAgICAgICAgcGFzc3dvcmRMZW5ndGg6IHBhc3N3b3JkID8gcGFzc3dvcmQubGVuZ3RoIDogMCxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIElmIHdlJ3JlIGF0IHRoZSBpbml0aWFsIHN0ZXAsIGp1c3QgdmFsaWRhdGUgdGhlIGVtYWlsIGFuZCBtb3ZlIHRvIHBhc3N3b3JkIHN0ZXBcbiAgICAgICAgaWYgKHNpZ25VcFN0ZXAgPT09IFwiaW5pdGlhbFwiKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbF0gTW92aW5nIGZyb20gaW5pdGlhbCB0byBwYXNzd29yZCBzdGVwOicsIHtcbiAgICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBWYWxpZGF0ZSBlbWFpbFxuICAgICAgICAgIGlmICghZW1haWwpIHtcbiAgICAgICAgICAgIHNldEVycm9yKFwiUGxlYXNlIGVudGVyIHlvdXIgZW1haWwgYWRkcmVzc1wiKTtcbiAgICAgICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIE1vdmUgdG8gcGFzc3dvcmQgc3RlcFxuICAgICAgICAgIHNldFNpZ25VcFN0ZXAoXCJwYXNzd29yZFwiKTtcbiAgICAgICAgICBzZXRTaG93RXJyb3IoZmFsc2UpO1xuICAgICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBJZiB3ZSdyZSBhdCB0aGUgcGFzc3dvcmQgc3RlcCwgY3JlYXRlIHRoZSBhY2NvdW50IHdpdGggZW1haWwgYW5kIHBhc3N3b3JkXG4gICAgICAgIGlmIChzaWduVXBTdGVwID09PSBcInBhc3N3b3JkXCIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsXSBDcmVhdGluZyBhY2NvdW50IHdpdGggZW1haWwvcGFzc3dvcmQ6Jywge1xuICAgICAgICAgICAgZW1haWwsXG4gICAgICAgICAgICBwYXNzd29yZExlbmd0aDogcGFzc3dvcmQubGVuZ3RoLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBWYWxpZGF0ZSBwYXNzd29yZFxuICAgICAgICAgIGlmICghcGFzc3dvcmQpIHtcbiAgICAgICAgICAgIHNldEVycm9yKFwiUGxlYXNlIGVudGVyIGEgcGFzc3dvcmRcIik7XG4gICAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoIWhhc1VwcGVyY2FzZSB8fCAhaGFzTnVtYmVyIHx8ICFoYXNNaW5MZW5ndGggfHwgIXBhc3N3b3Jkc01hdGNoKSB7XG4gICAgICAgICAgICBzZXRFcnJvcihcIlBsZWFzZSBlbnN1cmUgeW91ciBwYXNzd29yZCBtZWV0cyBhbGwgcmVxdWlyZW1lbnRzXCIpO1xuICAgICAgICAgICAgc2V0U2hvd0Vycm9yKHRydWUpO1xuICAgICAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgRmlyZWJhc2UgQXV0aCB1c2VyXG4gICAgICAgICAgICBjb25zdCB7IHVzZXIgfSA9IGF3YWl0IGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbF0gQXV0aCBVc2VyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5OicsIHsgdWlkOiB1c2VyLnVpZCwgZW1haWw6IHVzZXIuZW1haWwgfSk7XG5cbiAgICAgICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICAgIGlmICghdXNlci5lbWFpbCkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW1NpZ25Jbk1vZGFsXSBFbWFpbC9QYXNzd29yZCBzaWduLXVwIGNvbXBsZXRlZCBidXQgbm8gZW1haWwgd2FzIHByb3ZpZGVkLiBUaGlzIHNob3VsZCBub3QgaGFwcGVuLicpO1xuICAgICAgICAgICAgICAgICAgc2V0RXJyb3IoJ1NpZ24tdXAgZmFpbGVkOiBBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkIChtaXNzaW5nIGVtYWlsKS4nKTtcbiAgICAgICAgICAgICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICByZXR1cm47IC8vIFN0b3AgZXhlY3V0aW9uXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgbG9jYWwgVXNlciBvYmplY3QgZm9yIEZpcmVzdG9yZVxuICAgICAgICAgICAgICBjb25zdCBuZXdVc2VyID0gbmV3IFVzZXIodXNlci51aWQsIHtcbiAgICAgICAgICAgICAgICBpZDogdXNlci51aWQsXG4gICAgICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uVHlwZTogU3Vic2NyaXB0aW9uVHlwZS51bnN1YnNjcmliZWQsIC8vIERlZmF1bHQgZm9yIG5ldyB1c2VyXG4gICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uQ29tcGxldGU6IGZhbHNlLCAvLyBFeHBsaWNpdGx5IGZhbHNlIGluaXRpYWxseVxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSwgLy8gQWRkIGNyZWF0ZWRBdFxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSAgLy8gQWRkIHVwZGF0ZWRBdFxuICAgICAgICAgICAgICAgIC8vIE90aGVyIGZpZWxkcyB3aWxsIGJlIGRlZmF1bHQvbnVsbFxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAvLyAqKiogSU1NRURJQVRFTFkgQ1JFQVRFIEZJUkVTVE9SRSBET0MgKioqXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2lnbkluTW9kYWxdIEF0dGVtcHRpbmcgdG8gY3JlYXRlIGluaXRpYWwgRmlyZXN0b3JlIGRvY3VtZW50Li4uJyk7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICBhd2FpdCB1c2VyU2VydmljZS51cGRhdGVVc2VyKHVzZXIudWlkLCBuZXdVc2VyKTtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2lnbkluTW9kYWxdIEluaXRpYWwgRmlyZXN0b3JlIGRvY3VtZW50IGNyZWF0ZWQvdXBkYXRlZCBzdWNjZXNzZnVsbHkuJyk7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGZpcmVzdG9yZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbU2lnbkluTW9kYWxdIEZBVEFMOiBGYWlsZWQgdG8gY3JlYXRlIGluaXRpYWwgRmlyZXN0b3JlIGRvY3VtZW50OicsIGZpcmVzdG9yZUVycm9yKTtcbiAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSB0aGlzIGNyaXRpY2FsIGVycm9yIGFwcHJvcHJpYXRlbHlcbiAgICAgICAgICAgICAgICAgIHNldEVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSB1c2VyIHByb2ZpbGUuIFBsZWFzZSB0cnkgYWdhaW4gb3IgY29udGFjdCBzdXBwb3J0LicpO1xuICAgICAgICAgICAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gU3RvcCBleGVjdXRpb24gaWYgRmlyZXN0b3JlIGNyZWF0aW9uIGZhaWxzXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy8gKioqIC0tLSAqKipcblxuICAgICAgICAgICAgICAvLyBVcGRhdGUgbG9jYWwvUmVkdXggc3RhdGUgLSBBdXRoV3JhcHBlciB3aWxsIHBpY2sgdGhpcyB1cCB2aWEgb25BdXRoU3RhdGVDaGFuZ2VkXG4gICAgICAgICAgICAgIHVzZXJTZXJ2aWNlLm5vblVJQ3VycmVudFVzZXIgPSBuZXdVc2VyO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsXSBOZXcgdXNlciBzdGF0ZSBzZXQgbG9jYWxseS4gQXV0aFdyYXBwZXIgc2hvdWxkIHRha2Ugb3Zlci4nKTtcblxuICAgICAgICAgICAgICAvLyBObyBuZWVkIHRvIHNldFNpZ25VcFN0ZXAgaGVyZSAtIEF1dGhXcmFwcGVyIGhhbmRsZXMgaXRcblxuICAgICAgICAgICAgICBzZXRTaG93RXJyb3IoZmFsc2UpO1xuXG4gICAgICAgICAgICAgIC8vIE9wdGlvbmFsOiBOb3RpZnkgcGFyZW50IGltbWVkaWF0ZWx5IGlmIG5lZWRlZCwgdGhvdWdoIEF1dGhXcmFwcGVyJ3MgbG9naWMgbWlnaHQgc3VmZmljZVxuICAgICAgICAgICAgICAvLyBvblNpZ25VcFN1Y2Nlc3M/Lih1c2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChjcmVhdGVVc2VyRXJyb3I6IGFueSkge1xuICAgICAgICAgICAgICAvLyAuLi4gKGV4aXN0aW5nIGVycm9yIGhhbmRsaW5nLCBpbmNsdWRpbmcgZW1haWwtYWxyZWFkeS1pbi11c2UpIC4uLlxuICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIltTaWduSW5Nb2RhbF0gRXJyb3IgY3JlYXRpbmcgdXNlcjpcIiwgY3JlYXRlVXNlckVycm9yKTtcbiAgICAgICAgICAgICAgLy8gU3BlY2lmaWMgaGFuZGxpbmcgZm9yIGVtYWlsLWFscmVhZHktaW4tdXNlXG4gICAgICAgICAgICAgIGlmIChjcmVhdGVVc2VyRXJyb3IuY29kZSA9PT0gJ2F1dGgvZW1haWwtYWxyZWFkeS1pbi11c2UnKSB7XG4gICAgICAgICAgICAgICAgICBzZXRFcnJvcignVGhpcyBlbWFpbCBpcyBhbHJlYWR5IGluIHVzZS4gUGxlYXNlIHNpZ24gaW4gb3IgdXNlIGEgZGlmZmVyZW50IGVtYWlsLicpO1xuICAgICAgICAgICAgICAgICAgc2V0U2lnblVwU3RlcCgnaW5pdGlhbCcpOyAvLyBHbyBiYWNrIHRvIHRoZSBlbWFpbCBzdGVwXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgb3RoZXIgZXJyb3JzIGdlbmVyaWNhbGx5XG4gICAgICAgICAgICAgICAgICBzZXRFcnJvcihjcmVhdGVVc2VyRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGNyZWF0ZVVzZXJFcnJvci5tZXNzYWdlIDogJ0Vycm9yIGNyZWF0aW5nIGFjY291bnQnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIC8vIEtlZXAgbG9hZGluZyBzcGlubmVyIGFjdGl2ZSBvbiBlcnJvcj8gTWF5YmUgb25seSBzZXQgZmFsc2Ugb24gc3VjY2Vzcz9cbiAgICAgICAgICAgICAvLyBzZXRJc0xvYWRpbmcoZmFsc2UpOyAvLyBDb21tZW50ZWQgb3V0IC0gbGV0IGZpbmFsbHkgaGFuZGxlIGl0P1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgIC8vIFJlc2V0IGxvYWRpbmcgc3RhdGUgb25seSBpZiBpdCBoYXNuJ3QgYmVlbiByZXNldCBieSBhIHNwZWNpZmljIGVycm9yIGNhc2UgYWJvdmVcbiAgICAgICAgICAgICAgLy8gT3Igc2ltcGx5IGFsd2F5cyByZXNldCBpdCBoZXJlPyBMZXQncyBhbHdheXMgcmVzZXQgZm9yIHNpbXBsaWNpdHkgZm9yIG5vdy5cbiAgICAgICAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTsgXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBlcnIgYXMgRXJyb3I7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkdXJpbmcgc2lnbi11cDpcIiwgZXJyb3IpO1xuICAgICAgICBzZXRFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgb25TaWduVXBFcnJvcj8uKGVycm9yKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vICoqIEF1dG8gSm9pbiBDaGFsbGVuZ2UgRnVuY3Rpb24gKipcbiAgY29uc3QgYXV0b0pvaW5DaGFsbGVuZ2UgPSBhc3luYyAocm91bmRJZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbF0gYXV0b0pvaW5DaGFsbGVuZ2UgdHJpZ2dlcmVkIGZvciByb3VuZElkOicsIHJvdW5kSWQpO1xuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gYXV0aC5jdXJyZW50VXNlcjtcbiAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbU2lnbkluTW9kYWxdIGF1dG9Kb2luQ2hhbGxlbmdlOiBObyBhdXRoZW50aWNhdGVkIHVzZXIgZm91bmQuJyk7XG4gICAgICBkaXNwYXRjaChzaG93VG9hc3QoeyBtZXNzYWdlOiAnQXV0aGVudGljYXRpb24gZXJyb3IsIGNhbm5vdCBqb2luIHJvdW5kLicsIHR5cGU6ICdlcnJvcicgfSkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWN1cnJlbnRVc2VyLmVtYWlsKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTaWduSW5Nb2RhbF0gYXV0b0pvaW5DaGFsbGVuZ2U6IFVzZXIgZW1haWwgaXMgbWlzc2luZy4nKTtcbiAgICAgICAgZGlzcGF0Y2goc2hvd1RvYXN0KHsgbWVzc2FnZTogJ1VzZXIgZW1haWwgbWlzc2luZywgY2Fubm90IGpvaW4gcm91bmQuJywgdHlwZTogJ2Vycm9yJyB9KSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBFTkhBTkNFRCBWRVJJRklDQVRJT046IERpcmVjdGx5IGNoZWNrIGZvciB1c2VybmFtZSBpbiBGaXJlc3RvcmVcbiAgICB0cnkge1xuICAgICAgY29uc3QgZmlyZXN0b3JlVXNlciA9IGF3YWl0IHVzZXJTZXJ2aWNlLmZldGNoVXNlckZyb21GaXJlc3RvcmUoY3VycmVudFVzZXIudWlkKTtcbiAgICAgIGlmICghZmlyZXN0b3JlVXNlciB8fCAhZmlyZXN0b3JlVXNlci51c2VybmFtZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbU2lnbkluTW9kYWxdIGF1dG9Kb2luQ2hhbGxlbmdlOiBVc2VybmFtZSBtaXNzaW5nIGluIEZpcmVzdG9yZSBkb2N1bWVudCcpO1xuICAgICAgICBkaXNwYXRjaChzaG93VG9hc3QoeyBtZXNzYWdlOiAnUGxlYXNlIGNvbXBsZXRlIHlvdXIgcHJvZmlsZSBiZWZvcmUgam9pbmluZyB0aGlzIHJvdW5kLicsIHR5cGU6ICd3YXJuaW5nJyB9KSk7XG4gICAgICAgIFxuICAgICAgICAvLyBGb3JjZSBwcm9maWxlIGNvbXBsZXRpb24gZmxvd1xuICAgICAgICBzZXRJc1NpZ25VcCh0cnVlKTtcbiAgICAgICAgc2V0U2lnblVwU3RlcCgncHJvZmlsZScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vICoqIENoZWNrIGlmIHVzZXIgYWxyZWFkeSBqb2luZWQgdGhpcyBjaGFsbGVuZ2UgKipcbiAgICAgIGNvbnNvbGUubG9nKGBbU2lnbkluTW9kYWxdIGF1dG9Kb2luQ2hhbGxlbmdlOiBDaGVja2luZyBpZiB1c2VyICR7Y3VycmVudFVzZXIudWlkfSBhbHJlYWR5IGpvaW5lZCBjaGFsbGVuZ2UgJHtyb3VuZElkfWApO1xuICAgICAgY29uc3QgZXhpc3RpbmdVc2VyQ2hhbGxlbmdlcyA9IGF3YWl0IHdvcmtvdXRTZXJ2aWNlLmZldGNoVXNlckNoYWxsZW5nZXNCeVVzZXJJZChjdXJyZW50VXNlci51aWQpO1xuICAgICAgY29uc3QgYWxyZWFkeUpvaW5lZCA9IGV4aXN0aW5nVXNlckNoYWxsZW5nZXMuc29tZSh1YyA9PiB1Yy5jaGFsbGVuZ2VJZCA9PT0gcm91bmRJZCk7XG5cbiAgICAgIGlmIChhbHJlYWR5Sm9pbmVkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbU2lnbkluTW9kYWxdIGF1dG9Kb2luQ2hhbGxlbmdlOiBVc2VyICR7Y3VycmVudFVzZXIudWlkfSBhbHJlYWR5IGhhcyBhIFVzZXJDaGFsbGVuZ2UgZm9yIHJvdW5kICR7cm91bmRJZH0uIFNraXBwaW5nIGpvaW4uYCk7XG4gICAgICAgIGRpc3BhdGNoKHNob3dUb2FzdCh7IFxuICAgICAgICAgIG1lc3NhZ2U6ICdZb3UgYXJlIGFscmVhZHkgYSBjaGFsbGVuZ2VyIGZvciB0aGlzIHJvdW5kLiBIb3AgaW4gdGhlIGNoYXQgYW5kIHRhbGsgc29tZSBzbWFjayEnLCBcbiAgICAgICAgICB0eXBlOiAnaW5mbycsIC8vIFVzZSBpbmZvIHR5cGUgZm9yIHRoaXMgbWVzc2FnZVxuICAgICAgICAgIGR1cmF0aW9uOiA1MDAwIC8vIExvbmdlciBkdXJhdGlvblxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybjsgLy8gU3RvcCBleGVjdXRpb25cbiAgICAgIH1cbiAgICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuICAgICAgLy8gRmV0Y2ggdGhlIGZ1bGwgY2hhbGxlbmdlL2NvbGxlY3Rpb24gZGF0YSB1c2luZyB0aGUgSURcbiAgICAgIGNvbnNvbGUubG9nKGBbU2lnbkluTW9kYWxdIGF1dG9Kb2luQ2hhbGxlbmdlOiBVc2VyIG5vdCBqb2luZWQgeWV0LiBGZXRjaGluZyBjb2xsZWN0aW9uIGZvciBJRDogJHtyb3VuZElkfWApO1xuICAgICAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IHdvcmtvdXRTZXJ2aWNlLmdldENvbGxlY3Rpb25CeUlkKHJvdW5kSWQpO1xuICAgICAgaWYgKCFjb2xsZWN0aW9uIHx8ICFjb2xsZWN0aW9uLmNoYWxsZW5nZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbU2lnbkluTW9kYWxdIGF1dG9Kb2luQ2hhbGxlbmdlOiBDaGFsbGVuZ2UvQ29sbGVjdGlvbiBub3QgZm91bmQgZm9yIElEOicsIHJvdW5kSWQpO1xuICAgICAgICBkaXNwYXRjaChzaG93VG9hc3QoeyBtZXNzYWdlOiAnQ2hhbGxlbmdlIGRldGFpbHMgbm90IGZvdW5kLicsIHR5cGU6ICdlcnJvcicgfSkpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNoYWxsZW5nZVRvSm9pbiA9IGNvbGxlY3Rpb24uY2hhbGxlbmdlIGFzIENoYWxsZW5nZTsgLy8gVXNlIHRoZSBjaGFsbGVuZ2Ugb2JqZWN0XG5cbiAgICAgIC8vIEVOSEFOQ0VEIFZFUklGSUNBVElPTjogVXNlIHRoZSBGaXJlc3RvcmUgdXNlcm5hbWUgaW5zdGVhZCBvZiByZWx5aW5nIG9uIGxvY2FsIHN0YXRlXG4gICAgICBjb25zdCB1c2VybmFtZSA9IGZpcmVzdG9yZVVzZXIudXNlcm5hbWU7XG4gICAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsXSBhdXRvSm9pbkNoYWxsZW5nZTogVXNpbmcgdmVyaWZpZWQgdXNlcm5hbWUgZnJvbSBGaXJlc3RvcmU6JywgdXNlcm5hbWUpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsXSBhdXRvSm9pbkNoYWxsZW5nZTogQ2FsbGluZyB3b3Jrb3V0U2VydmljZS5qb2luQ2hhbGxlbmdlIHdpdGg6JywgeyB1c2VybmFtZSwgY2hhbGxlbmdlSWQ6IGNoYWxsZW5nZVRvSm9pbi5pZCB9KTtcbiAgICAgIGF3YWl0IHdvcmtvdXRTZXJ2aWNlLmpvaW5DaGFsbGVuZ2UoeyB1c2VybmFtZSwgY2hhbGxlbmdlSWQ6IGNoYWxsZW5nZVRvSm9pbi5pZCB9KTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbF0gYXV0b0pvaW5DaGFsbGVuZ2U6IFN1Y2Nlc3NmdWxseSBqb2luZWQgY2hhbGxlbmdlOicsIGNoYWxsZW5nZVRvSm9pbi5pZCk7XG4gICAgICBkaXNwYXRjaChzaG93VG9hc3QoeyBtZXNzYWdlOiAnU3VjY2Vzc2Z1bGx5IGpvaW5lZCBjaGFsbGVuZ2UhJywgdHlwZTogJ3N1Y2Nlc3MnIH0pKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbU2lnbkluTW9kYWxdIGF1dG9Kb2luQ2hhbGxlbmdlOiBFcnJvciBqb2luaW5nIGNoYWxsZW5nZTonLCBlcnJvcik7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gYXV0b21hdGljYWxseSBqb2luIGNoYWxsZW5nZS4nO1xuICAgICAgZGlzcGF0Y2goc2hvd1RvYXN0KHsgbWVzc2FnZTogZXJyb3JNZXNzYWdlLCB0eXBlOiAnZXJyb3InIH0pKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ29tcGxldGVRdWl6ID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XG4gICAgICBzZXRFcnJvcihudWxsKTtcblxuICAgICAgY29uc3QgdXNlcklkID0gYXV0aC5jdXJyZW50VXNlcj8udWlkO1xuICAgICAgaWYgKCF1c2VySWQpIHRocm93IG5ldyBFcnJvcihcIk5vIHVzZXIgZm91bmRcIik7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdbUXVpeiBEZWJ1ZyAtIGhhbmRsZUNvbXBsZXRlUXVpel0gU3RhdGUgYXQgc3RhcnQgKGxvY2FsKTonLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHVzZXJTZXJ2aWNlLm5vblVJQ3VycmVudFVzZXIpKSk7XG5cbiAgICAgIGNvbnN0IHJlZnJlc2hlZFVzZXIgPSBhd2FpdCB1c2VyU2VydmljZS5mZXRjaFVzZXJGcm9tRmlyZXN0b3JlKHVzZXJJZCk7XG4gICAgICBjb25zb2xlLmxvZygnW1F1aXogRGVidWcgLSBoYW5kbGVDb21wbGV0ZVF1aXpdIFN0YXRlIGFmdGVyIHJlZnJlc2ggZnJvbSBGaXJlc3RvcmU6JywgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZWZyZXNoZWRVc2VyKSkpO1xuICAgICAgb25RdWl6Q29tcGxldGU/LigpOyAvLyBOb3RpZnkgcGFyZW50IC0gUmVzdG9yZSB0aGlzIGxpbmVcblxuICAgICAgaWYgKCFyZWZyZXNoZWRVc2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXIgZGF0YSBtaXNzaW5nIGFmdGVyIHF1aXogY29tcGxldGlvbi5cIik7XG4gICAgICB9XG5cbiAgICAgIC8vIEVuaGFuY2VkIHZlcmlmaWNhdGlvbiAtIGV4cGxpY2l0bHkgY2hlY2sgZm9yIHVzZXJuYW1lXG4gICAgICBpZiAoIXJlZnJlc2hlZFVzZXIudXNlcm5hbWUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbF0gaGFuZGxlQ29tcGxldGVRdWl6OiBVc2VybmFtZSBpcyBtaXNzaW5nIGFmdGVyIHF1aXouIEZvcmNpbmcgcHJvZmlsZSBzdGVwLicpO1xuICAgICAgICBzZXRJc1NpZ25VcCh0cnVlKTtcbiAgICAgICAgc2V0U2lnblVwU3RlcCgncHJvZmlsZScpO1xuICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAvLyBLZWVwIHJvdW5kSWRSZWRpcmVjdCBwcmVzZXJ2ZWRcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyAqKiBBdXRvLWpvaW4gY2hlY2sgKipcbiAgICAgIGlmIChyb3VuZElkUmVkaXJlY3QpIHtcbiAgICAgICAgLy8gT25seSBhdXRvLWpvaW4gaWYgdGhlIHVzZXIgaXMgc3Vic2NyaWJlZCBBTkQgaGFzIGEgdXNlcm5hbWVcbiAgICAgICAgaWYgKHJlZnJlc2hlZFVzZXIuc3Vic2NyaXB0aW9uVHlwZSAhPT0gU3Vic2NyaXB0aW9uVHlwZS51bnN1YnNjcmliZWQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW1NpZ25Jbk1vZGFsXSBoYW5kbGVDb21wbGV0ZVF1aXo6IFVzZXIgaXMgc3Vic2NyaWJlZCBhbmQgaGFzIHVzZXJuYW1lLiBBdHRlbXB0aW5nIGF1dG8tam9pbiBmb3Igcm91bmQ6ICR7cm91bmRJZFJlZGlyZWN0fWApO1xuICAgICAgICAgIGF3YWl0IGF1dG9Kb2luQ2hhbGxlbmdlKHJvdW5kSWRSZWRpcmVjdCk7IC8vIEF3YWl0IHRoZSBqb2luIHByb2Nlc3NcbiAgICAgICAgICBkaXNwYXRjaChjbGVhclJvdW5kSWRSZWRpcmVjdCgpKTsgLy8gQ2xlYXIgdGhlIElEIGFmdGVyIGF0dGVtcHRpbmcgam9pblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBbU2lnbkluTW9kYWxdIGhhbmRsZUNvbXBsZXRlUXVpejogVXNlciBpcyB1bnN1YnNjcmliZWQuIERlZmVycmluZyBhdXRvLWpvaW4gZm9yIHJvdW5kOiAke3JvdW5kSWRSZWRpcmVjdH1gKTtcbiAgICAgICAgICAvLyBEbyBOT1QgY2xlYXIgcm91bmRJZFJlZGlyZWN0IGhlcmUgLSBuZWVkZWQgYWZ0ZXIgc3Vic2NyaXB0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRGV0ZXJtaW5lIG5leHQgc3RlcCAqYWZ0ZXIqIHBvdGVudGlhbCBhdXRvLWpvaW4gYXR0ZW1wdCBvciBkZWZlcnJhbFxuICAgICAgaWYgKHJlZnJlc2hlZFVzZXIuc3Vic2NyaXB0aW9uVHlwZSA9PT0gU3Vic2NyaXB0aW9uVHlwZS51bnN1YnNjcmliZWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbF0gUXVpeiBjb21wbGV0ZS4gVW5zdWJzY3JpYmVkLiBSZWRpcmVjdGluZyB0byAvc3Vic2NyaWJlJyk7XG4gICAgICAgIHJvdXRlci5wdXNoKCcvc3Vic2NyaWJlJyk7IC8vIE5hdmlnYXRlIGRpcmVjdGx5IGlmIHVuc3Vic2NyaWJlZFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbF0gUXVpeiBjb21wbGV0ZS4gQ2xvc2luZyBtb2RhbC4nKTtcbiAgICAgICAgb25DbG9zZT8uKCk7IC8vIENsb3NlIG1vZGFsIGZvciBzdWJzY3JpYmVkIHVzZXJzIChubyByZWRpcmVjdCBuZWVkZWQpXG4gICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAvLyAuLi4gKGV4aXN0aW5nIGNhdGNoIGJsb2NrKVxuICAgICAgIGNvbnN0IGVycm9yID0gZXJyIGFzIEVycm9yO1xuICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjb21wbGV0aW5nIHF1aXogYW5kIHJlZGlyZWN0aW5nOlwiLCBlcnJvcik7XG4gICAgICAgc2V0RXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCByZW5kZXJTdWJzY3JpcHRpb25TdGVwID0gKCkgPT4gKFxuICAgIDw+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIG1iLThcIj5cbiAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LXdoaXRlIGZvbnQtWydUaHVuZGVyJ10gbWItMlwiPlxuICAgICAgICAgIEpvaW4gVGhlIEZpdG5lc3MgQ29sbGVjdGl2ZVxuICAgICAgICA8L2gyPlxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXppbmMtNDAwIHRleHQtc20gbWItNlwiPlxuICAgICAgICAgIFN1YnNjcmliZSB0byB1bmxvY2sgYWxsIHByZW1pdW0gZmVhdHVyZXMgYW5kIGpvaW4gb3VyIGZpdG5lc3MgY29tbXVuaXR5LlxuICAgICAgICA8L3A+XG4gICAgICA8L2Rpdj5cbiAgXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNiBtYi04XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNSBoLTUgZmxleC1zaHJpbmstMCBiZy1bI0UwRkUxMF0gcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWJsYWNrIHRleHQtc21cIj7inJM8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC16aW5jLTQwMFwiPkFjY2VzcyB0byBSb3VuZHMgLSBUcmFpbiBhbmQgY29tcGV0ZSB3aXRoIHRoZSBjb21tdW5pdHk8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTUgaC01IGZsZXgtc2hyaW5rLTAgYmctWyNFMEZFMTBdIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ibGFjayB0ZXh0LXNtXCI+4pyTPC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtemluYy00MDBcIj5BSS1wb3dlcmVkIHdvcmtvdXQgcmVjb21tZW5kYXRpb25zPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtM1wiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy01IGgtNSBmbGV4LXNocmluay0wIGJnLVsjRTBGRTEwXSByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtYmxhY2sgdGV4dC1zbVwiPuKckzwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXppbmMtNDAwXCI+VW5saW1pdGVkIHdvcmtvdXQgaGlzdG9yeSBhbmQgcHJvZ3Jlc3MgdHJhY2tpbmc8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTUgaC01IGZsZXgtc2hyaW5rLTAgYmctWyNFMEZFMTBdIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ibGFjayB0ZXh0LXNtXCI+4pyTPC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtemluYy00MDBcIj5BY2Nlc3MgdG8gdHJhaW5lci1jcmVhdGVkIGNvbnRlbnQgYW5kIGV4ZXJjaXNlczwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgc206Z3JpZC1jb2xzLTIgZ2FwLTQgbWItNlwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXppbmMtODAwIHAtNiByb3VuZGVkLXhsXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlIHRleHQtMnhsIGZvbnQtYm9sZCBtYi0xXCI+JDQuOTkvbW88L2Rpdj5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXppbmMtNDAwIHRleHQtc20gbWItNFwiPkZsZXhpYmxlIG1vbnRobHkgcGxhbjwvcD5cbiAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gd2luZG93Lm9wZW4oJ2h0dHBzOi8vYnV5LnN0cmlwZS5jb20vOUFRYUZpZVg5YnYyNmZTZllZJywgJ19ibGFuaycpfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLVsjRTBGRTEwXSB0ZXh0LWJsYWNrIHB5LTIgcm91bmRlZC1sZyBmb250LXNlbWlib2xkIGhvdmVyOmJnLVsjRTBGRTEwXS85MFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgU3Vic2NyaWJlIE1vbnRobHlcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gIFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXppbmMtODAwIHAtNiByb3VuZGVkLXhsIHJlbGF0aXZlIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgLXJpZ2h0LTggLXRvcC04IGJnLVsjRTBGRTEwXSB0ZXh0LWJsYWNrIHRleHQteHMgZm9udC1ib2xkIHB5LTEgcHgtOCByb3RhdGUtNDVcIj5cbiAgICAgICAgICAgIEJFU1QgVkFMVUVcbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtd2hpdGUgdGV4dC0yeGwgZm9udC1ib2xkIG1iLTFcIj4kMzkuOTkveXI8L2Rpdj5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXppbmMtNDAwIHRleHQtc20gbWItNFwiPkFubnVhbCBwbGFuIHdpdGggMzAtZGF5IGZyZWUgdHJpYWw8L3A+XG4gICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHdpbmRvdy5vcGVuKCdodHRwczovL2J1eS5zdHJpcGUuY29tLzI4b2JKbTJhbjhpUWRJazI4OScsICdfYmxhbmsnKX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy1bI0UwRkUxMF0gdGV4dC1ibGFjayBweS0yIHJvdW5kZWQtbGcgZm9udC1zZW1pYm9sZCBob3ZlcjpiZy1bI0UwRkUxMF0vOTBcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIFN0YXJ0IEZyZWUgVHJpYWxcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgXG4gICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXppbmMtNTAwIHRleHQteHMgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgQ2FuY2VsIGFueXRpbWUuIEFsbCBzdWJzY3JpcHRpb25zIGluY2x1ZGUgdW5saW1pdGVkIGFjY2VzcyB0byBhbGwgZmVhdHVyZXMuXG4gICAgICA8L3A+XG4gICAgPC8+XG4gICk7XG5cbiAgY29uc3QgcmVuZGVyUXVpelByb21wdCA9ICgpID0+IChcbiAgICA8PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBtYi04XCI+XG4gICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC13aGl0ZSBmb250LVsnVGh1bmRlciddIG1iLTJcIj5cbiAgICAgICAgICBPbmUgTGFzdCBUaGluZyFcbiAgICAgICAgPC9oMj5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC16aW5jLTQwMCBmb250LVsnSEsgR3JvdGVzayddIHRleHQtc20gcHgtNFwiPlxuICAgICAgICAgIFRha2Ugb3VyIHF1aWNrIGZpdG5lc3MgcXVpeiB0byBoZWxwIFB1bHNlIEFJIGNyZWF0ZSBtb3JlIGFjY3VyYXRlIHdvcmtvdXQgYW5kIGZpdG5lc3MgY3JlYXRvciByZWNvbW1lbmRhdGlvbnMuXG4gICAgICAgIDwvcD5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgZ2FwLTRcIj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNpZ25VcFN0ZXAoXCJxdWl6XCIpfVxuICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy1bI0UwRkUxMF0gdGV4dC1ibGFjayBmb250LXNlbWlib2xkIHB5LTMgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLVsjYzhlNjBlXSB0cmFuc2l0aW9uLWNvbG9ycyBmb250LVsnSEsgR3JvdGVzayddXCJcbiAgICAgICAgPlxuICAgICAgICAgIFRha2UgdGhlIFF1aXpcbiAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBvbkNsaWNrPXthc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XG4gICAgICAgICAgICAgIHNldEVycm9yKG51bGwpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQ2FsbCB0aGUgY2FsbGJhY2sgcHJvdmlkZWQgYnkgcGFyZW50XG4gICAgICAgICAgICAgIG9uUXVpelNraXBwZWQ/LigpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgY29uc3QgdXNlcklkID0gYXV0aC5jdXJyZW50VXNlcj8udWlkO1xuICAgICAgICAgICAgICBpZiAoIXVzZXJJZCkgdGhyb3cgbmV3IEVycm9yKFwiTm8gdXNlciBmb3VuZFwiKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIEZldGNoIGxhdGVzdCB1c2VyIGRhdGFcbiAgICAgICAgICAgICAgY29uc3QgcmVmcmVzaGVkVXNlciA9IGF3YWl0IHVzZXJTZXJ2aWNlLmZldGNoVXNlckZyb21GaXJlc3RvcmUodXNlcklkKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmICghcmVmcmVzaGVkVXNlcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXIgZGF0YSBtaXNzaW5nIGFmdGVyIHNraXBwaW5nIHF1aXouXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBFbmhhbmNlZCB2ZXJpZmljYXRpb24gLSBleHBsaWNpdGx5IGNoZWNrIGZvciB1c2VybmFtZVxuICAgICAgICAgICAgICBpZiAoIXJlZnJlc2hlZFVzZXIudXNlcm5hbWUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsXSBvblF1aXpTa2lwcGVkOiBVc2VybmFtZSBpcyBtaXNzaW5nLiBGb3JjaW5nIHByb2ZpbGUgc3RlcC4nKTtcbiAgICAgICAgICAgICAgICBzZXRJc1NpZ25VcCh0cnVlKTtcbiAgICAgICAgICAgICAgICBzZXRTaWduVXBTdGVwKCdwcm9maWxlJyk7XG4gICAgICAgICAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIEhhbmRsZSBhdXRvLWpvaW4gY2hhbGxlbmdlIGlmIG5lZWRlZFxuICAgICAgICAgICAgICBpZiAocm91bmRJZFJlZGlyZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlZnJlc2hlZFVzZXIuc3Vic2NyaXB0aW9uVHlwZSAhPT0gU3Vic2NyaXB0aW9uVHlwZS51bnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbU2lnbkluTW9kYWxdIG9uUXVpelNraXBwZWQ6IFVzZXIgaXMgc3Vic2NyaWJlZCBhbmQgaGFzIHVzZXJuYW1lLiBBdHRlbXB0aW5nIGF1dG8tam9pbiBmb3Igcm91bmQ6ICR7cm91bmRJZFJlZGlyZWN0fWApO1xuICAgICAgICAgICAgICAgICAgYXdhaXQgYXV0b0pvaW5DaGFsbGVuZ2Uocm91bmRJZFJlZGlyZWN0KTtcbiAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKGNsZWFyUm91bmRJZFJlZGlyZWN0KCkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW1NpZ25Jbk1vZGFsXSBvblF1aXpTa2lwcGVkOiBVc2VyIGlzIHVuc3Vic2NyaWJlZC4gRGVmZXJyaW5nIGF1dG8tam9pbiBmb3Igcm91bmQ6ICR7cm91bmRJZFJlZGlyZWN0fWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gSGFuZGxlIG5leHQgc3RlcCBiYXNlZCBvbiBzdWJzY3JpcHRpb24gc3RhdHVzXG4gICAgICAgICAgICAgIGlmIChyZWZyZXNoZWRVc2VyLnN1YnNjcmlwdGlvblR5cGUgPT09IFN1YnNjcmlwdGlvblR5cGUudW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbF0gUXVpeiBza2lwcGVkLiBVbnN1YnNjcmliZWQuIFJlZGlyZWN0aW5nIHRvIC9zdWJzY3JpYmUnKTtcbiAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCgnL3N1YnNjcmliZScpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2lnbkluTW9kYWxdIFF1aXogc2tpcHBlZC4gQ2xvc2luZyBtb2RhbC4nKTtcbiAgICAgICAgICAgICAgICBvbkNsb3NlPy4oKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IGVyciBhcyBFcnJvcjtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGhhbmRsaW5nIHF1aXogc2tpcDpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICBzZXRFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfX1cbiAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctemluYy04MDAgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHB5LTMgcHgtNCByb3VuZGVkLWxnIGhvdmVyOmJnLXppbmMtNzAwIHRyYW5zaXRpb24tY29sb3JzIGZvbnQtWydISyBHcm90ZXNrJ11cIlxuICAgICAgICA+XG4gICAgICAgICAgU2tpcCBmb3IgTm93XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC8+XG4gICk7XG5cbiAgY29uc3QgcXVlc3Rpb25zID0gW1xuICAgIC8vIEdlbmRlciBRdWVzdGlvblxuICAgIDxkaXYga2V5PVwiZ2VuZGVyXCIgY2xhc3NOYW1lPVwic3BhY2UteS02XCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+XG4gICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC13aGl0ZSBmb250LVsnVGh1bmRlciddIG1iLTJcIj5cbiAgICAgICAgICBIb3cgZG8geW91IGlkZW50aWZ5P1xuICAgICAgICA8L2gyPlxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXppbmMtNDAwIGZvbnQtWydISyBHcm90ZXNrJ10gdGV4dC1zbVwiPlxuICAgICAgICAgIFRoaXMgaGVscHMgd2hlbiBnaXZpbmcgZml0bmVzcyByZWNvbW1lbmRhdGlvbnMgYW5kIGNhbGN1bGF0aW5nIG1ldHJpY3MuXG4gICAgICAgIDwvcD5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktM1wiPlxuICAgICAgICB7W1wiTWFuXCIsIFwiV29tYW5cIiwgXCJJJ2QgcmF0aGVyIHNlbGYgZGVzY3JpYmVcIl0ubWFwKChvcHRpb24pID0+IChcbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBrZXk9e29wdGlvbn1cbiAgICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgbGV0IGdlbmRlclZhbHVlOiBHZW5kZXI7XG5cbiAgICAgICAgICAgICAgLy8gQ29udmVydCBvcHRpb24gdG8gcHJvcGVyIEdlbmRlciBlbnVtXG4gICAgICAgICAgICAgIHN3aXRjaChvcHRpb24pIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiTWFuXCI6XG4gICAgICAgICAgICAgICAgICBnZW5kZXJWYWx1ZSA9IEdlbmRlci5NYW47XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiV29tYW5cIjpcbiAgICAgICAgICAgICAgICAgIGdlbmRlclZhbHVlID0gR2VuZGVyLldvbWFuO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgIGdlbmRlclZhbHVlID0gR2VuZGVyLlNlbGZEZXNjcmliZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHNldFF1aXpEYXRhKHsgLi4ucXVpekRhdGEsIGdlbmRlcjogb3B0aW9uIGFzIGFueSB9KTtcblxuICAgICAgICAgICAgICBjb25zdCB1c2VySWQgPSBhdXRoLmN1cnJlbnRVc2VyPy51aWQ7XG4gICAgICAgICAgICAgIGlmICh1c2VySWQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFVzZXJEYXRhID0gYXdhaXQgdXNlclNlcnZpY2UuZmV0Y2hVc2VyRnJvbUZpcmVzdG9yZSh1c2VySWQpO1xuICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRVc2VyRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VXNlckRhdGEuZ2VuZGVyID0gZ2VuZGVyVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyRGF0YS51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB1c2VyU2VydmljZS51cGRhdGVVc2VyKHVzZXJJZCwgY3VycmVudFVzZXJEYXRhKTsgLy8gU2F2ZSB0aGUgZmV0Y2hlZCBhbmQgbW9kaWZpZWQgb2JqZWN0XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIE5FVzogUmVmcmVzaCB1c2VyIGFuZCB1cGRhdGUgUmVkdXggLS0tXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZnJlc2hlZFVzZXIgPSBhd2FpdCB1c2VyU2VydmljZS5mZXRjaFVzZXJGcm9tRmlyZXN0b3JlKHVzZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJTZXJ2aWNlLm5vblVJQ3VycmVudFVzZXIgPSByZWZyZXNoZWRVc2VyOyAvLyBVc2Ugbm9uVUlDdXJyZW50VXNlclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbUXVpeiBEZWJ1ZyAtIEdlbmRlciBDbGlja10gQ291bGQgbm90IGZldGNoIHVzZXIgZGF0YSBmb3IgdXBkYXRlLlwiKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIltRdWl6IERlYnVnIC0gR2VuZGVyIENsaWNrXSBFcnJvciBmZXRjaGluZy91cGRhdGluZyB1c2VyOlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gRGVsYXkgdGhlIHN0ZXAgY2hhbmdlIHNsaWdodGx5IHRvIHBvdGVudGlhbGx5IGF2b2lkIHN0YXRlIHJhY2UgY29uZGl0aW9ucyB3aXRoIHBhcmVudCBjb21wb25lbnRcbiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0UXVpelN0ZXAocXVpelN0ZXAgKyAxKTtcbiAgICAgICAgICAgICAgfSwgNTApOyAvLyA1MG1zIGRlbGF5XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy1mdWxsIHAtNCByb3VuZGVkLWxnIGJvcmRlciAke1xuICAgICAgICAgICAgICBxdWl6RGF0YS5nZW5kZXIgPT09IG9wdGlvblxuICAgICAgICAgICAgICAgID8gXCJib3JkZXItWyNFMEZFMTBdIGJnLVsjRTBGRTEwXS8xMFwiXG4gICAgICAgICAgICAgICAgOiBcImJvcmRlci16aW5jLTcwMCBob3Zlcjpib3JkZXItWyNFMEZFMTBdXCJcbiAgICAgICAgICAgIH0gdGV4dC1sZWZ0IHRleHQtd2hpdGUgdHJhbnNpdGlvbi1jb2xvcnNgfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtvcHRpb259XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICkpfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+LFxuICAgIC8vIEhlaWdodCBRdWVzdGlvblxuICAgIDxkaXYga2V5PVwiaGVpZ2h0XCIgY2xhc3NOYW1lPVwic3BhY2UteS02XCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+XG4gICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC13aGl0ZSBmb250LVsnVGh1bmRlciddIG1iLTJcIj5cbiAgICAgICAgICBXaGF0IGlzIHlvdXIgaGVpZ2h0P1xuICAgICAgICA8L2gyPlxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXppbmMtNDAwIGZvbnQtWydISyBHcm90ZXNrJ10gdGV4dC1zbVwiPlxuICAgICAgICAgIEhlaWdodCBoZWxwcyByZWNvbW1lbmRhdGlvbnMgYW5kIGNhbGN1bGF0aW5nIG1ldHJpY3MuXG4gICAgICAgIDwvcD5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTQgaXRlbXMtZW5kXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xXCI+XG4gICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtc20gdGV4dC16aW5jLTQwMCBtYi0yXCI+RmVldDwvbGFiZWw+XG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICAgIHZhbHVlPXtxdWl6RGF0YS5oZWlnaHQuZmVldCB8fCBcIlwifVxuICAgICAgICAgICAgb25DaGFuZ2U9e2FzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IG5ld0ZlZXQgPSBOdW1iZXIoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICBjb25zdCBuZXdIZWlnaHQgPSB7IC4uLnF1aXpEYXRhLmhlaWdodCwgZmVldDogbmV3RmVldCB9O1xuICAgICAgICAgICAgICBzZXRRdWl6RGF0YSh7IC4uLnF1aXpEYXRhLCBoZWlnaHQ6IG5ld0hlaWdodCB9KTtcblxuICAgICAgICAgICAgICBjb25zdCB1c2VySWQgPSBhdXRoLmN1cnJlbnRVc2VyPy51aWQ7XG4gICAgICAgICAgICAgIGlmICh1c2VySWQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFVzZXJEYXRhID0gYXdhaXQgdXNlclNlcnZpY2UuZmV0Y2hVc2VyRnJvbUZpcmVzdG9yZSh1c2VySWQpO1xuICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRVc2VyRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VXNlckRhdGEuaGVpZ2h0ID0gbmV3SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VXNlckRhdGEudXBkYXRlZEF0ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdXNlclNlcnZpY2UudXBkYXRlVXNlcih1c2VySWQsIGN1cnJlbnRVc2VyRGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIE5FVzogUmVmcmVzaCB1c2VyIGFuZCB1cGRhdGUgUmVkdXggLS0tXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZnJlc2hlZFVzZXIgPSBhd2FpdCB1c2VyU2VydmljZS5mZXRjaFVzZXJGcm9tRmlyZXN0b3JlKHVzZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJTZXJ2aWNlLm5vblVJQ3VycmVudFVzZXIgPSByZWZyZXNoZWRVc2VyOyAvLyBVc2Ugbm9uVUlDdXJyZW50VXNlclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbUXVpeiBEZWJ1ZyAtIEhlaWdodCBGZWV0IENoYW5nZV0gQ291bGQgbm90IGZldGNoIHVzZXIgZGF0YSBmb3IgdXBkYXRlLlwiKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIltRdWl6IERlYnVnIC0gSGVpZ2h0IEZlZXQgQ2hhbmdlXSBFcnJvciBmZXRjaGluZy91cGRhdGluZyB1c2VyOlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgbWluPVwiMFwiXG4gICAgICAgICAgICBtYXg9XCI4XCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy16aW5jLTgwMCBib3JkZXIgYm9yZGVyLXppbmMtNjAwIHJvdW5kZWQtbGcgcC0zIHRleHQtd2hpdGUgcGxhY2Vob2xkZXItemluYy00MDAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1bI0UwRkUxMF0gZm9jdXM6cmluZy0xIGZvY3VzOnJpbmctWyNFMEZFMTBdIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiMFwiXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTFcIj5cbiAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSB0ZXh0LXppbmMtNDAwIG1iLTJcIj5JbmNoZXM8L2xhYmVsPlxuICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXG4gICAgICAgICAgICB2YWx1ZT17cXVpekRhdGEuaGVpZ2h0LmluY2hlcyB8fCBcIlwifVxuICAgICAgICAgICAgb25DaGFuZ2U9e2FzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IG5ld0luY2hlcyA9IE51bWJlcihlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgIGNvbnN0IG5ld0hlaWdodCA9IHsgLi4ucXVpekRhdGEuaGVpZ2h0LCBpbmNoZXM6IG5ld0luY2hlcyB9O1xuICAgICAgICAgICAgICBzZXRRdWl6RGF0YSh7IC4uLnF1aXpEYXRhLCBoZWlnaHQ6IG5ld0hlaWdodCB9KTtcblxuICAgICAgICAgICAgICBjb25zdCB1c2VySWQgPSBhdXRoLmN1cnJlbnRVc2VyPy51aWQ7XG4gICAgICAgICAgICAgIGlmICh1c2VySWQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFVzZXJEYXRhID0gYXdhaXQgdXNlclNlcnZpY2UuZmV0Y2hVc2VyRnJvbUZpcmVzdG9yZSh1c2VySWQpO1xuICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRVc2VyRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VXNlckRhdGEuaGVpZ2h0ID0gbmV3SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VXNlckRhdGEudXBkYXRlZEF0ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdXNlclNlcnZpY2UudXBkYXRlVXNlcih1c2VySWQsIGN1cnJlbnRVc2VyRGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIE5FVzogUmVmcmVzaCB1c2VyIGFuZCB1cGRhdGUgUmVkdXggLS0tXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZnJlc2hlZFVzZXIgPSBhd2FpdCB1c2VyU2VydmljZS5mZXRjaFVzZXJGcm9tRmlyZXN0b3JlKHVzZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJTZXJ2aWNlLm5vblVJQ3VycmVudFVzZXIgPSByZWZyZXNoZWRVc2VyOyAvLyBVc2Ugbm9uVUlDdXJyZW50VXNlclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbUXVpeiBEZWJ1ZyAtIEhlaWdodCBJbmNoZXMgQ2hhbmdlXSBDb3VsZCBub3QgZmV0Y2ggdXNlciBkYXRhIGZvciB1cGRhdGUuXCIpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiW1F1aXogRGVidWcgLSBIZWlnaHQgSW5jaGVzIENoYW5nZV0gRXJyb3IgZmV0Y2hpbmcvdXBkYXRpbmcgdXNlcjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIG1pbj1cIjBcIlxuICAgICAgICAgICAgbWF4PVwiMTFcIlxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLXppbmMtODAwIGJvcmRlciBib3JkZXItemluYy02MDAgcm91bmRlZC1sZyBwLTMgdGV4dC13aGl0ZSBwbGFjZWhvbGRlci16aW5jLTQwMCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6Ym9yZGVyLVsjRTBGRTEwXSBmb2N1czpyaW5nLTEgZm9jdXM6cmluZy1bI0UwRkUxMF0gdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIwXCJcbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7KHF1aXpEYXRhLmhlaWdodC5mZWV0ID4gOCB8fCBxdWl6RGF0YS5oZWlnaHQuaW5jaGVzID4gMTEpICYmIChcbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1yZWQtNDAwIHRleHQtc20gbXQtMlwiPlxuICAgICAgICAgIFBsZWFzZSBlbnRlciBhIHZhbGlkIGhlaWdodFxuICAgICAgICA8L3A+XG4gICAgICApfVxuICAgIDwvZGl2PixcbiAgICAvLyBXZWlnaHQgUXVlc3Rpb25cbiAgICA8ZGl2IGtleT1cIndlaWdodFwiIGNsYXNzTmFtZT1cInNwYWNlLXktNlwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtd2hpdGUgZm9udC1bJ1RodW5kZXInXSBtYi0yXCI+XG4gICAgICAgICAgV2hhdCdzIHlvdXIgY3VycmVudCB3ZWlnaHQ/XG4gICAgICAgIDwvaDI+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGdhcC00XCI+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxuICAgICAgICAgIHZhbHVlPXtxdWl6RGF0YS53ZWlnaHQgfHwgXCJcIn1cbiAgICAgICAgICBvbkNoYW5nZT17YXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1dlaWdodCA9IE51bWJlcihlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICBzZXRRdWl6RGF0YSh7IC4uLnF1aXpEYXRhLCB3ZWlnaHQ6IG5ld1dlaWdodCB9KTtcblxuICAgICAgICAgICAgY29uc3QgdXNlcklkID0gYXV0aC5jdXJyZW50VXNlcj8udWlkO1xuICAgICAgICAgICAgaWYgKHVzZXJJZCkge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRVc2VyRGF0YSA9IGF3YWl0IHVzZXJTZXJ2aWNlLmZldGNoVXNlckZyb21GaXJlc3RvcmUodXNlcklkKTtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFVzZXJEYXRhKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBuZXdCb2R5V2VpZ2h0ID0gbmV3IEJvZHlXZWlnaHQoe1xuICAgICAgICAgICAgICAgICAgICBvbGRXZWlnaHQ6IGN1cnJlbnRVc2VyRGF0YS5ib2R5V2VpZ2h0Lmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgICA/IGN1cnJlbnRVc2VyRGF0YS5ib2R5V2VpZ2h0W2N1cnJlbnRVc2VyRGF0YS5ib2R5V2VpZ2h0Lmxlbmd0aCAtIDFdLm5ld1dlaWdodFxuICAgICAgICAgICAgICAgICAgICAgIDogMCxcbiAgICAgICAgICAgICAgICAgICAgbmV3V2VpZ2h0OiBuZXdXZWlnaHRcbiAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICBjdXJyZW50VXNlckRhdGEuYm9keVdlaWdodCA9IFsuLi5jdXJyZW50VXNlckRhdGEuYm9keVdlaWdodCwgbmV3Qm9keVdlaWdodF07XG4gICAgICAgICAgICAgICAgICBjdXJyZW50VXNlckRhdGEudXBkYXRlZEF0ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgIGF3YWl0IHVzZXJTZXJ2aWNlLnVwZGF0ZVVzZXIodXNlcklkLCBjdXJyZW50VXNlckRhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAvLyAtLS0gTkVXOiBSZWZyZXNoIHVzZXIgYW5kIHVwZGF0ZSBSZWR1eCAtLS1cbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZnJlc2hlZFVzZXIgPSBhd2FpdCB1c2VyU2VydmljZS5mZXRjaFVzZXJGcm9tRmlyZXN0b3JlKHVzZXJJZCk7XG4gICAgICAgICAgICAgICAgICB1c2VyU2VydmljZS5ub25VSUN1cnJlbnRVc2VyID0gcmVmcmVzaGVkVXNlcjsgLy8gVXNlIG5vblVJQ3VycmVudFVzZXJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbUXVpeiBEZWJ1ZyAtIFdlaWdodCBDaGFuZ2VdIENvdWxkIG5vdCBmZXRjaCB1c2VyIGRhdGEgZm9yIHVwZGF0ZS5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbUXVpeiBEZWJ1ZyAtIFdlaWdodCBDaGFuZ2VdIEVycm9yIGZldGNoaW5nL3VwZGF0aW5nIHVzZXI6XCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH19XG4gICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLXppbmMtODAwIGJvcmRlciBib3JkZXItemluYy02MDAgcm91bmRlZC1sZyBwLTMgdGV4dC13aGl0ZVwiXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJFbnRlciB3ZWlnaHQgaW4gbGJzXCJcbiAgICAgICAgICBtaW49XCIwXCJcbiAgICAgICAgLz5cbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgdGV4dC16aW5jLTQwMFwiPkxiczwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PixcbiAgICAvLyBHeW0gRXhwZXJpZW5jZVxuICAgIDxkaXYga2V5PVwiZXhwZXJpZW5jZVwiIGNsYXNzTmFtZT1cInNwYWNlLXktNlwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtd2hpdGUgZm9udC1bJ1RodW5kZXInXSBtYi0yXCI+XG4gICAgICAgICAgSG93IHdlbGwgZG8geW91IGtub3cgeW91ciB3YXkgYXJvdW5kIHRoZSBneW0/XG4gICAgICAgIDwvaDI+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTNcIj5cbiAgICAgICAge1tcIk5vdmljZVwiLCBcIkludGVybWVkaWF0ZVwiLCBcIkV4cGVydFwiXS5tYXAoKGxldmVsKSA9PiAoXG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAga2V5PXtsZXZlbH1cbiAgICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgbGV2ZWxNYXAgPSB7XG4gICAgICAgICAgICAgICAgXCJOb3ZpY2VcIjogVXNlckxldmVsLk5vdmljZSxcbiAgICAgICAgICAgICAgICBcIkludGVybWVkaWF0ZVwiOiBVc2VyTGV2ZWwuSW50ZXJtZWRpYXRlLFxuICAgICAgICAgICAgICAgIFwiRXhwZXJ0XCI6IFVzZXJMZXZlbC5FeHBlcnRcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICBzZXRRdWl6RGF0YSh7IC4uLnF1aXpEYXRhLCBsZXZlbDogbGV2ZWwgYXMgYW55IH0pO1xuXG4gICAgICAgICAgICAgIGNvbnN0IHVzZXJJZCA9IGF1dGguY3VycmVudFVzZXI/LnVpZDtcbiAgICAgICAgICAgICAgaWYgKHVzZXJJZCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VXNlckRhdGEgPSBhd2FpdCB1c2VyU2VydmljZS5mZXRjaFVzZXJGcm9tRmlyZXN0b3JlKHVzZXJJZCk7XG4gICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFVzZXJEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyRGF0YS5sZXZlbCA9IGxldmVsTWFwW2xldmVsIGFzIGtleW9mIHR5cGVvZiBsZXZlbE1hcF07XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyRGF0YS51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB1c2VyU2VydmljZS51cGRhdGVVc2VyKHVzZXJJZCwgY3VycmVudFVzZXJEYXRhKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyAtLS0gTkVXOiBSZWZyZXNoIHVzZXIgYW5kIHVwZGF0ZSBSZWR1eCAtLS1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVmcmVzaGVkVXNlciA9IGF3YWl0IHVzZXJTZXJ2aWNlLmZldGNoVXNlckZyb21GaXJlc3RvcmUodXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgdXNlclNlcnZpY2Uubm9uVUlDdXJyZW50VXNlciA9IHJlZnJlc2hlZFVzZXI7IC8vIFVzZSBub25VSUN1cnJlbnRVc2VyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiW1F1aXogRGVidWcgLSBFeHBlcmllbmNlIENsaWNrXSBDb3VsZCBub3QgZmV0Y2ggdXNlciBkYXRhIGZvciB1cGRhdGUuXCIpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiW1F1aXogRGVidWcgLSBFeHBlcmllbmNlIENsaWNrXSBFcnJvciBmZXRjaGluZy91cGRhdGluZyB1c2VyOlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNldFF1aXpTdGVwKHF1aXpTdGVwICsgMSk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy1mdWxsIHAtNCByb3VuZGVkLWxnIGJvcmRlciAke1xuICAgICAgICAgICAgICBxdWl6RGF0YS5sZXZlbCA9PT0gbGV2ZWxcbiAgICAgICAgICAgICAgICA/IFwiYm9yZGVyLVsjRTBGRTEwXSBiZy1bI0UwRkUxMF0vMTBcIlxuICAgICAgICAgICAgICAgIDogXCJib3JkZXItemluYy03MDAgaG92ZXI6Ym9yZGVyLVsjRTBGRTEwXVwiXG4gICAgICAgICAgICB9IHRleHQtbGVmdCB0ZXh0LXdoaXRlIHRyYW5zaXRpb24tY29sb3JzYH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7bGV2ZWx9XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICkpfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+LFxuICAgIC8vIEZpdG5lc3MgR29hbFxuICAgIDxkaXYga2V5PVwiZ29hbHNcIiBjbGFzc05hbWU9XCJzcGFjZS15LTZcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LXdoaXRlIGZvbnQtWydUaHVuZGVyJ10gbWItMlwiPlxuICAgICAgICAgIFdoYXQgaXMgeW91ciBmaXRuZXNzIGdvYWw/XG4gICAgICAgIDwvaDI+XG4gICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtemluYy00MDAgZm9udC1bJ0hLIEdyb3Rlc2snXSB0ZXh0LXNtXCI+XG4gICAgICAgICAgU2VsZWN0IGFsbCB0aGF0IGFwcGx5XG4gICAgICAgIDwvcD5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktM1wiPlxuICAgICAgICB7KFtcIkxvc2Ugd2VpZ2h0XCIsIFwiR2FpbiBtdXNjbGUgbWFzc1wiLCBcIlRvbmUgdXBcIiwgXCJHZW5lcmFsIEZpdG5lc3NcIl0gYXMgRml0bmVzc0dvYWxbXSkubWFwKChnb2FsKSA9PiAoXG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBrZXk9e2dvYWx9XG4gICAgICAgICAgICBvbkNsaWNrPXthc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGdvYWxzTWFwID0ge1xuICAgICAgICAgICAgICAgIFwiTG9zZSB3ZWlnaHRcIjogV29ya291dEdvYWwuTG9zZVdlaWdodCxcbiAgICAgICAgICAgICAgICBcIkdhaW4gbXVzY2xlIG1hc3NcIjogV29ya291dEdvYWwuR2FpbldlaWdodCxcbiAgICAgICAgICAgICAgICBcIlRvbmUgdXBcIjogV29ya291dEdvYWwuVG9uZVVwLFxuICAgICAgICAgICAgICAgIFwiR2VuZXJhbCBGaXRuZXNzXCI6IFdvcmtvdXRHb2FsLkdlbmVyYWxGaXRuZXNzXG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHVwZGF0ZWQgZ29hbHNcbiAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZEdvYWxzID0gcXVpekRhdGEuZ29hbC5pbmNsdWRlcyhnb2FsKVxuICAgICAgICAgICAgICAgID8gcXVpekRhdGEuZ29hbC5maWx0ZXIoKGcpID0+IGcgIT09IGdvYWwpXG4gICAgICAgICAgICAgICAgOiBbLi4ucXVpekRhdGEuZ29hbCwgZ29hbF07XG5cbiAgICAgICAgICAgICAgc2V0UXVpekRhdGEoKHByZXY6IFF1aXpEYXRhKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgICAgICAgZ29hbDogdXBkYXRlZEdvYWxzLFxuICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgY29uc3QgdXNlcklkID0gYXV0aC5jdXJyZW50VXNlcj8udWlkO1xuICAgICAgICAgICAgICBpZiAodXNlcklkKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRVc2VyRGF0YSA9IGF3YWl0IHVzZXJTZXJ2aWNlLmZldGNoVXNlckZyb21GaXJlc3RvcmUodXNlcklkKTtcbiAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VXNlckRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXJEYXRhLmdvYWwgPSB1cGRhdGVkR29hbHMubWFwKGcgPT4gZ29hbHNNYXBbZ10pO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VXNlckRhdGEudXBkYXRlZEF0ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdXNlclNlcnZpY2UudXBkYXRlVXNlcih1c2VySWQsIGN1cnJlbnRVc2VyRGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIE5FVzogUmVmcmVzaCB1c2VyIGFuZCB1cGRhdGUgUmVkdXggLS0tXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZnJlc2hlZFVzZXIgPSBhd2FpdCB1c2VyU2VydmljZS5mZXRjaFVzZXJGcm9tRmlyZXN0b3JlKHVzZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJTZXJ2aWNlLm5vblVJQ3VycmVudFVzZXIgPSByZWZyZXNoZWRVc2VyOyAvLyBVc2Ugbm9uVUlDdXJyZW50VXNlclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIltRdWl6IERlYnVnIC0gR29hbCBDbGlja10gQ291bGQgbm90IGZldGNoIHVzZXIgZGF0YSBmb3IgdXBkYXRlLlwiKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIltRdWl6IERlYnVnIC0gR29hbCBDbGlja10gRXJyb3IgZmV0Y2hpbmcvdXBkYXRpbmcgdXNlcjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvLyBPbmx5IG1vdmUgdG8gbmV4dCBzdGVwIGlmIGF0IGxlYXN0IG9uZSBnb2FsIGlzIHNlbGVjdGVkXG4gICAgICAgICAgICAgIGlmICh1cGRhdGVkR29hbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHNldFF1aXpTdGVwKHF1aXpTdGVwICsgMSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBjbGFzc05hbWU9e2B3LWZ1bGwgcC00IHJvdW5kZWQtbGcgYm9yZGVyICR7XG4gICAgICAgICAgICAgIHF1aXpEYXRhLmdvYWwuaW5jbHVkZXMoZ29hbClcbiAgICAgICAgICAgICAgICA/IFwiYm9yZGVyLVsjRTBGRTEwXSBiZy1bI0UwRkUxMF0vMTBcIlxuICAgICAgICAgICAgICAgIDogXCJib3JkZXItemluYy03MDAgaG92ZXI6Ym9yZGVyLVsjRTBGRTEwXVwiXG4gICAgICAgICAgICB9IHRleHQtbGVmdCB0ZXh0LXdoaXRlIHRyYW5zaXRpb24tY29sb3JzIHJlbGF0aXZlYH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c3Bhbj57Z29hbH08L3NwYW4+XG4gICAgICAgICAgICB7cXVpekRhdGEuZ29hbC5pbmNsdWRlcyhnb2FsKSAmJiAoXG4gICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTUgaC01IGFic29sdXRlIHJpZ2h0LTQgdG9wLTEvMiB0cmFuc2Zvcm0gLXRyYW5zbGF0ZS15LTEvMiB0ZXh0LVsjRTBGRTEwXVwiXG4gICAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIlxuICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIlxuICAgICAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNNSAxM2w0IDRMMTkgN1wiIC8+XG4gICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgKSl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj4sXG4gICAgLy8gQmlydGhkYXRlXG4gICAgPGRpdiBrZXk9XCJiaXJ0aGRhdGVcIiBjbGFzc05hbWU9XCJzcGFjZS15LTZcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LXdoaXRlIGZvbnQtWydUaHVuZGVyJ10gbWItMlwiPlxuICAgICAgICAgIFdoZW4gaXMgeW91ciBiaXJ0aGRhdGU/XG4gICAgICAgIDwvaDI+XG4gICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtemluYy00MDAgZm9udC1bJ0hLIEdyb3Rlc2snXSB0ZXh0LXNtXCI+XG4gICAgICAgICAgV2UgYXNrIGZvciB5b3VyIGFnZSB0byBlbnN1cmUgYWNjdXJhdGUgZml0bmVzcyBjYWxjdWxhdGlvbnMuXG4gICAgICAgIDwvcD5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTMgZ2FwLTRcIj5cbiAgICAgICAgPHNlbGVjdFxuICAgICAgICAgIGNsYXNzTmFtZT1cImJnLXppbmMtODAwIGJvcmRlciBib3JkZXItemluYy02MDAgcm91bmRlZC1sZyBwLTMgdGV4dC13aGl0ZVwiXG4gICAgICAgICAgb25DaGFuZ2U9e2FzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUocXVpekRhdGEuYmlydGhkYXRlIHx8IG5ldyBEYXRlKCkpO1xuICAgICAgICAgICAgZGF0ZS5zZXRNb250aChwYXJzZUludChlLnRhcmdldC52YWx1ZSkpO1xuICAgICAgICAgICAgc2V0UXVpekRhdGEoeyAuLi5xdWl6RGF0YSwgYmlydGhkYXRlOiBkYXRlIH0pO1xuXG4gICAgICAgICAgICBjb25zdCB1c2VySWQgPSBhdXRoLmN1cnJlbnRVc2VyPy51aWQ7XG4gICAgICAgICAgICBpZiAodXNlcklkKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFVzZXJEYXRhID0gYXdhaXQgdXNlclNlcnZpY2UuZmV0Y2hVc2VyRnJvbUZpcmVzdG9yZSh1c2VySWQpO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VXNlckRhdGEpIHtcbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyRGF0YS5iaXJ0aGRhdGUgPSBkYXRlO1xuICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXJEYXRhLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICBhd2FpdCB1c2VyU2VydmljZS51cGRhdGVVc2VyKHVzZXJJZCwgY3VycmVudFVzZXJEYXRhKTtcblxuICAgICAgICAgICAgICAgICAgLy8gLS0tIE5FVzogUmVmcmVzaCB1c2VyIGFuZCB1cGRhdGUgUmVkdXggLS0tXG4gICAgICAgICAgICAgICAgICBjb25zdCByZWZyZXNoZWRVc2VyID0gYXdhaXQgdXNlclNlcnZpY2UuZmV0Y2hVc2VyRnJvbUZpcmVzdG9yZSh1c2VySWQpO1xuICAgICAgICAgICAgICAgICAgdXNlclNlcnZpY2Uubm9uVUlDdXJyZW50VXNlciA9IHJlZnJlc2hlZFVzZXI7IC8vIFVzZSBub25VSUN1cnJlbnRVc2VyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbUXVpeiBEZWJ1ZyAtIEJpcnRoZGF0ZSBNb250aCBDaGFuZ2VdIENvdWxkIG5vdCBmZXRjaCB1c2VyIGRhdGEgZm9yIHVwZGF0ZS5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbUXVpeiBEZWJ1ZyAtIEJpcnRoZGF0ZSBNb250aCBDaGFuZ2VdIEVycm9yIGZldGNoaW5nL3VwZGF0aW5nIHVzZXI6XCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICB7QXJyYXkuZnJvbSh7IGxlbmd0aDogMTIgfSwgKF8sIGkpID0+IChcbiAgICAgICAgICAgIDxvcHRpb24ga2V5PXtpfSB2YWx1ZT17aX0+XG4gICAgICAgICAgICAgIHtuZXcgRGF0ZSgwLCBpKS50b0xvY2FsZVN0cmluZyhcImRlZmF1bHRcIiwgeyBtb250aDogXCJsb25nXCIgfSl9XG4gICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9zZWxlY3Q+XG5cbiAgICAgICAgPHNlbGVjdFxuICAgICAgICAgIGNsYXNzTmFtZT1cImJnLXppbmMtODAwIGJvcmRlciBib3JkZXItemluYy02MDAgcm91bmRlZC1sZyBwLTMgdGV4dC13aGl0ZVwiXG4gICAgICAgICAgb25DaGFuZ2U9e2FzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUocXVpekRhdGEuYmlydGhkYXRlIHx8IG5ldyBEYXRlKCkpO1xuICAgICAgICAgICAgZGF0ZS5zZXREYXRlKHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKSk7XG4gICAgICAgICAgICBzZXRRdWl6RGF0YSh7IC4uLnF1aXpEYXRhLCBiaXJ0aGRhdGU6IGRhdGUgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHVzZXJJZCA9IGF1dGguY3VycmVudFVzZXI/LnVpZDtcbiAgICAgICAgICAgICBpZiAodXNlcklkKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFVzZXJEYXRhID0gYXdhaXQgdXNlclNlcnZpY2UuZmV0Y2hVc2VyRnJvbUZpcmVzdG9yZSh1c2VySWQpO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VXNlckRhdGEpIHtcbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyRGF0YS5iaXJ0aGRhdGUgPSBkYXRlO1xuICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXJEYXRhLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICBhd2FpdCB1c2VyU2VydmljZS51cGRhdGVVc2VyKHVzZXJJZCwgY3VycmVudFVzZXJEYXRhKTtcblxuICAgICAgICAgICAgICAgICAgLy8gLS0tIE5FVzogUmVmcmVzaCB1c2VyIGFuZCB1cGRhdGUgUmVkdXggLS0tXG4gICAgICAgICAgICAgICAgICBjb25zdCByZWZyZXNoZWRVc2VyID0gYXdhaXQgdXNlclNlcnZpY2UuZmV0Y2hVc2VyRnJvbUZpcmVzdG9yZSh1c2VySWQpO1xuICAgICAgICAgICAgICAgICAgdXNlclNlcnZpY2Uubm9uVUlDdXJyZW50VXNlciA9IHJlZnJlc2hlZFVzZXI7IC8vIFVzZSBub25VSUN1cnJlbnRVc2VyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbUXVpeiBEZWJ1ZyAtIEJpcnRoZGF0ZSBEYXkgQ2hhbmdlXSBDb3VsZCBub3QgZmV0Y2ggdXNlciBkYXRhIGZvciB1cGRhdGUuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiW1F1aXogRGVidWcgLSBCaXJ0aGRhdGUgRGF5IENoYW5nZV0gRXJyb3IgZmV0Y2hpbmcvdXBkYXRpbmcgdXNlcjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIHtBcnJheS5mcm9tKHsgbGVuZ3RoOiAzMSB9LCAoXywgaSkgPT4gKFxuICAgICAgICAgICAgPG9wdGlvbiBrZXk9e2kgKyAxfSB2YWx1ZT17aSArIDF9PlxuICAgICAgICAgICAgICB7aSArIDF9XG4gICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9zZWxlY3Q+XG5cbiAgICAgICAgPHNlbGVjdFxuICAgICAgICAgIGNsYXNzTmFtZT1cImJnLXppbmMtODAwIGJvcmRlciBib3JkZXItemluYy02MDAgcm91bmRlZC1sZyBwLTMgdGV4dC13aGl0ZVwiXG4gICAgICAgICAgb25DaGFuZ2U9e2FzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUocXVpekRhdGEuYmlydGhkYXRlIHx8IG5ldyBEYXRlKCkpO1xuICAgICAgICAgICAgZGF0ZS5zZXRGdWxsWWVhcihwYXJzZUludChlLnRhcmdldC52YWx1ZSkpO1xuICAgICAgICAgICAgc2V0UXVpekRhdGEoeyAuLi5xdWl6RGF0YSwgYmlydGhkYXRlOiBkYXRlIH0pO1xuXG4gICAgICAgICAgICBjb25zdCB1c2VySWQgPSBhdXRoLmN1cnJlbnRVc2VyPy51aWQ7XG4gICAgICAgICAgICBpZiAodXNlcklkKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFVzZXJEYXRhID0gYXdhaXQgdXNlclNlcnZpY2UuZmV0Y2hVc2VyRnJvbUZpcmVzdG9yZSh1c2VySWQpO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VXNlckRhdGEpIHtcbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyRGF0YS5iaXJ0aGRhdGUgPSBkYXRlO1xuICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXJEYXRhLnVwZGF0ZWRBdCA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICBhd2FpdCB1c2VyU2VydmljZS51cGRhdGVVc2VyKHVzZXJJZCwgY3VycmVudFVzZXJEYXRhKTtcblxuICAgICAgICAgICAgICAgICAgLy8gLS0tIE5FVzogUmVmcmVzaCB1c2VyIGFuZCB1cGRhdGUgUmVkdXggLS0tXG4gICAgICAgICAgICAgICAgICBjb25zdCByZWZyZXNoZWRVc2VyID0gYXdhaXQgdXNlclNlcnZpY2UuZmV0Y2hVc2VyRnJvbUZpcmVzdG9yZSh1c2VySWQpO1xuICAgICAgICAgICAgICAgICAgdXNlclNlcnZpY2Uubm9uVUlDdXJyZW50VXNlciA9IHJlZnJlc2hlZFVzZXI7IC8vIFVzZSBub25VSUN1cnJlbnRVc2VyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbUXVpeiBEZWJ1ZyAtIEJpcnRoZGF0ZSBZZWFyIENoYW5nZV0gQ291bGQgbm90IGZldGNoIHVzZXIgZGF0YSBmb3IgdXBkYXRlLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIltRdWl6IERlYnVnIC0gQmlydGhkYXRlIFllYXIgQ2hhbmdlXSBFcnJvciBmZXRjaGluZy91cGRhdGluZyB1c2VyOlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAge0FycmF5LmZyb20oeyBsZW5ndGg6IDEwMCB9LCAoXywgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSAtIGk7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8b3B0aW9uIGtleT17eWVhcn0gdmFsdWU9e3llYXJ9PlxuICAgICAgICAgICAgICAgIHt5ZWFyfVxuICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvc2VsZWN0PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+LFxuICBdO1xuXG4gIGNvbnN0IHJlbmRlclF1aXpRdWVzdGlvbiA9ICgpID0+IHtcbiAgICByZXR1cm4gcXVlc3Rpb25zW3F1aXpTdGVwXTtcbiAgfTtcblxuICBjb25zdCBpc0xhc3RRdWl6U3RlcCA9ICgpID0+IHF1aXpTdGVwID09PSBxdWVzdGlvbnMubGVuZ3RoIC0gMTtcblxuICBjb25zdCB2YWxpZGF0ZUVtYWlsID0gKCkgPT4ge1xuICAgIGlmICghZW1haWwpIHtcbiAgICAgIHNldEVycm9ycyh7IGVtYWlsOiBcIkVtYWlsIGlzIHJlcXVpcmVkXCIgfSk7XG4gICAgICBzZXRTaG93RXJyb3IodHJ1ZSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIGlmICghL1xcUytAXFxTK1xcLlxcUysvLnRlc3QoZW1haWwpKSB7XG4gICAgICBzZXRFcnJvcnMoeyBlbWFpbDogXCJQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzXCIgfSk7XG4gICAgICBzZXRTaG93RXJyb3IodHJ1ZSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIGNvbnN0IHZhbGlkYXRlUGFzc3dvcmQgPSAoKSA9PiB7XG4gICAgaWYgKCFoYXNVcHBlcmNhc2UgfHwgIWhhc051bWJlciB8fCAhaGFzTWluTGVuZ3RoIHx8ICFwYXNzd29yZHNNYXRjaCkge1xuICAgICAgc2V0U2hvd0Vycm9yKHRydWUpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICBjb25zdCB2YWxpZGF0ZVVzZXJuYW1lID0gKCkgPT4ge1xuICAgIGlmICghdXNlcm5hbWUpIHtcbiAgICAgIHNldEVycm9ycyh7IHVzZXJuYW1lOiBcIlVzZXJuYW1lIGlzIHJlcXVpcmVkXCIgfSk7XG4gICAgICBzZXRTaG93RXJyb3IodHJ1ZSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBpc1VzZXJuYW1lQXZhaWxhYmxlO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVVzZXJuYW1lQ2hhbmdlID0gKHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICBzZXRVc2VybmFtZSh2YWx1ZSk7XG4gICAgLy8gU2ltdWxhdGVkIHVzZXJuYW1lIGF2YWlsYWJpbGl0eSBjaGVja1xuICAgIHNldElzVXNlcm5hbWVBdmFpbGFibGUoL15bYS16QS1aMC05X117Myx9JC8udGVzdCh2YWx1ZSkpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUZpbGVDaGFuZ2UgPSBhc3luYyAoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXM/LlswXTtcbiAgICBpZiAoZmlsZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc2V0SXNJbWFnZVVwbG9hZGluZyh0cnVlKTtcbiAgICAgICAgc2V0UHJvZmlsZUltYWdlKGZpbGUpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdXBsb2FkUmVzdWx0ID0gYXdhaXQgZmlyZWJhc2VTdG9yYWdlU2VydmljZS51cGxvYWRJbWFnZShcbiAgICAgICAgICBmaWxlLCBcbiAgICAgICAgICBVcGxvYWRJbWFnZVR5cGUuUHJvZmlsZVxuICAgICAgICApO1xuICAgIFxuICAgICAgICBjb25zb2xlLmxvZygnUHJvZmlsZSBpbWFnZSB1cGxvYWRlZCBzdWNjZXNzZnVsbHknLCB1cGxvYWRSZXN1bHQpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignUHJvZmlsZSBpbWFnZSB1cGxvYWQgZmFpbGVkJywgZXJyb3IpO1xuICAgICAgICBzZXRFcnJvcignRmFpbGVkIHRvIHVwbG9hZCBwcm9maWxlIGltYWdlJyk7XG4gICAgICAgIHNldFByb2ZpbGVJbWFnZShudWxsKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHNldElzSW1hZ2VVcGxvYWRpbmcoZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjb25zdCByZW5kZXJQcm9maWxlU3RlcCA9ICgpID0+IChcbiAgICA8PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBtYi04XCI+XG4gICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC13aGl0ZSBmb250LVsnVGh1bmRlciddIG1iLTJcIj5cbiAgICAgICAgICBQZXJzb25hbGl6ZSB5b3VyIGV4cGVyaWVuY2VcbiAgICAgICAgPC9oMj5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC16aW5jLTQwMCBmb250LVsnSEsgR3JvdGVzayddIHRleHQtc21cIj5cbiAgICAgICAgICBTZXQgYSB1c2VybmFtZSBhbmQgcHJvZmlsZSBpbWFnZVxuICAgICAgICA8L3A+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTZcIj5cbiAgICAgICAgey8qIFByb2ZpbGUgSW1hZ2UgVXBsb2FkICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMjQgaC0yNCBiZy16aW5jLTgwMCByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgb3ZlcmZsb3ctaGlkZGVuXCI+XG4gICAgICAgICAgICAgIHtwcm9maWxlSW1hZ2UgPyAoXG4gICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgc3JjPXtVUkwuY3JlYXRlT2JqZWN0VVJMKHByb2ZpbGVJbWFnZSl9XG4gICAgICAgICAgICAgICAgICBhbHQ9XCJQcm9maWxlIFByZXZpZXdcIlxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBvYmplY3QtY292ZXJcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPENhbWVyYSBzaXplPXszMn0gY2xhc3NOYW1lPVwidGV4dC16aW5jLTUwMFwiIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJhYnNvbHV0ZSBib3R0b20tMCByaWdodC0wIHctOCBoLTggYmctWyNFMEZFMTBdIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBjdXJzb3ItcG9pbnRlclwiPlxuICAgICAgICAgICAgICA8Q2FtZXJhIHNpemU9ezE2fSBjbGFzc05hbWU9XCJ0ZXh0LWJsYWNrXCIgLz5cbiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgYWNjZXB0PVwiaW1hZ2UvKlwiIG9uQ2hhbmdlPXtoYW5kbGVGaWxlQ2hhbmdlfSBjbGFzc05hbWU9XCJoaWRkZW5cIiAvPlxuICAgICAgICAgICAgPC9sYWJlbD5cblxuICAgICAgICAgICAgey8qIFBMQUNFIExPQURJTkcgU1RBVEUgSEVSRSAqL31cbiAgICAgICAgICAgIHtpc0ltYWdlVXBsb2FkaW5nICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvYWRlciBib3JkZXItdC10cmFuc3BhcmVudCBib3JkZXItNCBib3JkZXItd2hpdGUgcm91bmRlZC1mdWxsIHctOCBoLTggYW5pbWF0ZS1zcGluXCI+PC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIFVzZXJuYW1lIElucHV0ICovfVxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LXppbmMtMzAwIG1iLTIgZm9udC1bJ0hLIEdyb3Rlc2snXVwiPlxuICAgICAgICAgICAgICBVc2VybmFtZVxuICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgIHt1c2VybmFtZSAmJiAoXG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17YHRleHQteHMgJHtpc1VzZXJuYW1lQXZhaWxhYmxlID8gXCJ0ZXh0LVsjRTBGRTEwXVwiIDogXCJ0ZXh0LXJlZC00MDBcIn1gfT5cbiAgICAgICAgICAgICAgICB7aXNVc2VybmFtZUF2YWlsYWJsZSA/IFwidXNlcm5hbWUgaXMgYXZhaWxhYmxlXCIgOiBcInVzZXJuYW1lIGlzIG5vdCBhdmFpbGFibGVcIn1cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgIHZhbHVlPXt1c2VybmFtZX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlVXNlcm5hbWVDaGFuZ2UoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy1mdWxsIGJnLXppbmMtODAwIGJvcmRlciByb3VuZGVkLWxnIHAtMyB0ZXh0LXdoaXRlIHBsYWNlaG9sZGVyLXppbmMtNDAwIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItWyNFMEZFMTBdIGZvY3VzOnJpbmctMSBmb2N1czpyaW5nLVsjRTBGRTEwXSB0cmFuc2l0aW9uLWNvbG9ycyAke1xuICAgICAgICAgICAgICBlcnJvcnMudXNlcm5hbWUgPyBcImJvcmRlci1yZWQtNTAwXCIgOiBcImJvcmRlci16aW5jLTYwMFwiXG4gICAgICAgICAgICB9YH1cbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQ2hvb3NlIGEgdXNlcm5hbWVcIlxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC8+XG4gICk7XG5cbiAgY29uc3QgcmVuZGVyUGFzc3dvcmRTdGVwID0gKCkgPT4gKFxuICAgIDw+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIG1iLThcIj5cbiAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LXdoaXRlIGZvbnQtWydUaHVuZGVyJ10gbWItMlwiPlxuICAgICAgICAgIENyZWF0ZSBwYXNzd29yZFxuICAgICAgICA8L2gyPlxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXppbmMtNDAwIGZvbnQtWydISyBHcm90ZXNrJ10gdGV4dC1zbVwiPlxuICAgICAgICAgIFNldCBhIHBhc3N3b3JkIGZvciB5b3VyIGFjY291bnRcbiAgICAgICAgPC9wPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS02XCI+XG4gICAgICAgIHsvKiBQYXNzd29yZCBJbnB1dCAqL31cbiAgICAgICAgPGRpdj4gey8qIENoYW5nZWQ6IE91dGVyIGRpdiBmb3IgbGFiZWwgKyBpbnB1dCBncm91cCAqL31cbiAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LXppbmMtMzAwIG1iLTIgZm9udC1bJ0hLIEdyb3Rlc2snXVwiPlxuICAgICAgICAgICAgUGFzc3dvcmRcbiAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj4gey8qIEFkZGVkOiBSZWxhdGl2ZSBjb250YWluZXIgZm9yIGlucHV0IGFuZCBidXR0b24gKi99XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT17c2hvd1Bhc3N3b3JkID8gXCJ0ZXh0XCIgOiBcInBhc3N3b3JkXCJ9XG4gICAgICAgICAgICAgIHZhbHVlPXtwYXNzd29yZH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0UGFzc3dvcmQoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICAgIHNldFNob3dFcnJvcihmYWxzZSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy16aW5jLTgwMCBib3JkZXIgYm9yZGVyLXppbmMtNjAwIHJvdW5kZWQtbGcgcC0zIHByLTEwIHRleHQtd2hpdGUgcGxhY2Vob2xkZXItemluYy00MDAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1bI0UwRkUxMF0gZm9jdXM6cmluZy0xIGZvY3VzOnJpbmctWyNFMEZFMTBdIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJDcmVhdGUgcGFzc3dvcmRcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNob3dQYXNzd29yZCghc2hvd1Bhc3N3b3JkKX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQteS0wIHJpZ2h0LTAgcHItMyBmbGV4IGl0ZW1zLWNlbnRlciB0ZXh0LXNtIGxlYWRpbmctNVwiIC8vIFJlbW92ZWQgdG9wLTdcbiAgICAgICAgICAgICAgYXJpYS1sYWJlbD17c2hvd1Bhc3N3b3JkID8gXCJIaWRlIHBhc3N3b3JkXCIgOiBcIlNob3cgcGFzc3dvcmRcIn1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge3Nob3dQYXNzd29yZCA/IChcbiAgICAgICAgICAgICAgICA8RXllT2ZmIGNsYXNzTmFtZT1cImgtNSB3LTUgdGV4dC16aW5jLTQwMFwiIC8+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPEV5ZSBjbGFzc05hbWU9XCJoLTUgdy01IHRleHQtemluYy00MDBcIiAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBDb25maXJtIFBhc3N3b3JkIElucHV0ICovfVxuICAgICAgICA8ZGl2PiB7LyogQ2hhbmdlZDogT3V0ZXIgZGl2IGZvciBsYWJlbCArIGlucHV0IGdyb3VwICovfVxuICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtemluYy0zMDAgbWItMiBmb250LVsnSEsgR3JvdGVzayddXCI+XG4gICAgICAgICAgICBDb25maXJtIFBhc3N3b3JkXG4gICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlXCI+IHsvKiBBZGRlZDogUmVsYXRpdmUgY29udGFpbmVyIGZvciBpbnB1dCBhbmQgYnV0dG9uICovfVxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIHR5cGU9e3Nob3dDb25maXJtUGFzc3dvcmQgPyBcInRleHRcIiA6IFwicGFzc3dvcmRcIn1cbiAgICAgICAgICAgICAgdmFsdWU9e2NvbmZpcm1QYXNzd29yZH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0Q29uZmlybVBhc3N3b3JkKGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICBzZXRTaG93RXJyb3IoZmFsc2UpO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctemluYy04MDAgYm9yZGVyIGJvcmRlci16aW5jLTYwMCByb3VuZGVkLWxnIHAtMyBwci0xMCB0ZXh0LXdoaXRlIHBsYWNlaG9sZGVyLXppbmMtNDAwIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItWyNFMEZFMTBdIGZvY3VzOnJpbmctMSBmb2N1czpyaW5nLVsjRTBGRTEwXSB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiQ29uZmlybSBwYXNzd29yZFwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd0NvbmZpcm1QYXNzd29yZCghc2hvd0NvbmZpcm1QYXNzd29yZCl9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LXktMCByaWdodC0wIHByLTMgZmxleCBpdGVtcy1jZW50ZXIgdGV4dC1zbSBsZWFkaW5nLTVcIiAvLyBSZW1vdmVkIHRvcC03XG4gICAgICAgICAgICAgIGFyaWEtbGFiZWw9e3Nob3dDb25maXJtUGFzc3dvcmQgPyBcIkhpZGUgcGFzc3dvcmRcIiA6IFwiU2hvdyBwYXNzd29yZFwifVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7c2hvd0NvbmZpcm1QYXNzd29yZCA/IChcbiAgICAgICAgICAgICAgICA8RXllT2ZmIGNsYXNzTmFtZT1cImgtNSB3LTUgdGV4dC16aW5jLTQwMFwiIC8+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPEV5ZSBjbGFzc05hbWU9XCJoLTUgdy01IHRleHQtemluYy00MDBcIiAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICAgICAgey8qIFBhc3N3b3JkIHJlcXVpcmVtZW50IGluZGljYXRvcnMuLi4gKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2B3LTQgaC00IHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciAke1xuICAgICAgICAgICAgICAgIGhhc1VwcGVyY2FzZSA/IFwiYmctWyNFMEZFMTBdXCIgOiBcImJnLXppbmMtNzAwXCJcbiAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtoYXNVcHBlcmNhc2UgJiYgKFxuICAgICAgICAgICAgICAgIDxzdmcgY2xhc3NOYW1lPVwidy0zIGgtMyB0ZXh0LWJsYWNrXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlV2lkdGg9ezJ9IGQ9XCJNNSAxM2w0IDRMMTkgN1wiIC8+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17YHRleHQtc20gJHtoYXNVcHBlcmNhc2UgPyBcInRleHQtWyNFMEZFMTBdXCIgOiBcInRleHQtemluYy00MDBcIn1gfT5cbiAgICAgICAgICAgICAgMSB1cHBlcmNhc2VcbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy00IGgtNCByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgJHtcbiAgICAgICAgICAgICAgICBoYXNOdW1iZXIgPyBcImJnLVsjRTBGRTEwXVwiIDogXCJiZy16aW5jLTcwMFwiXG4gICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7aGFzTnVtYmVyICYmIChcbiAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cInctMyBoLTMgdGV4dC1ibGFja1wiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTUgMTNsNCA0TDE5IDdcIiAvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2B0ZXh0LXNtICR7aGFzTnVtYmVyID8gXCJ0ZXh0LVsjRTBGRTEwXVwiIDogXCJ0ZXh0LXppbmMtNDAwXCJ9YH0+XG4gICAgICAgICAgICAgIDEgbnVtYmVyXG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YHctNCBoLTQgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyICR7XG4gICAgICAgICAgICAgICAgaGFzTWluTGVuZ3RoID8gXCJiZy1bI0UwRkUxMF1cIiA6IFwiYmctemluYy03MDBcIlxuICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge2hhc01pbkxlbmd0aCAmJiAoXG4gICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTMgaC0zIHRleHQtYmxhY2tcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk01IDEzbDQgNEwxOSA3XCIgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtgdGV4dC1zbSAke2hhc01pbkxlbmd0aCA/IFwidGV4dC1bI0UwRkUxMF1cIiA6IFwidGV4dC16aW5jLTQwMFwifWB9PlxuICAgICAgICAgICAgICA4IGNoYXJhY3RlcnNcbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy00IGgtNCByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgJHtcbiAgICAgICAgICAgICAgICBwYXNzd29yZHNNYXRjaCAmJiBwYXNzd29yZCA/IFwiYmctWyNFMEZFMTBdXCIgOiBcImJnLXppbmMtNzAwXCJcbiAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtwYXNzd29yZHNNYXRjaCAmJiBwYXNzd29yZCAmJiAoXG4gICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTMgaC0zIHRleHQtYmxhY2tcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk01IDEzbDQgNEwxOSA3XCIgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtgdGV4dC1zbSAke3Bhc3N3b3Jkc01hdGNoICYmIHBhc3N3b3JkID8gXCJ0ZXh0LVsjRTBGRTEwXVwiIDogXCJ0ZXh0LXppbmMtNDAwXCJ9YH0+XG4gICAgICAgICAgICAgIFBhc3N3b3JkcyBtYXRjaFxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogQWRkIGEgQmFjayBidXR0b24gKi99XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaWduVXBTdGVwKFwiaW5pdGlhbFwiKX0gLy8gR28gYmFjayB0byBlbWFpbCBlbnRyeVxuICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCB0ZXh0LWNlbnRlciB0ZXh0LXppbmMtNDAwIHRleHQtc20gaG92ZXI6dGV4dC13aGl0ZSB0cmFuc2l0aW9uLWNvbG9ycyBtdC00XCJcbiAgICAgICAgPlxuICAgICAgICAgIEJhY2tcbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8Lz5cbiAgKTtcblxuICBjb25zdCByZW5kZXJGb3Jnb3RQYXNzd29yZCA9ICgpID0+IChcbiAgICA8PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBtYi04IHB0LTQgc206cHQtMFwiPlxuICAgICAgICA8aW1nIHNyYz1cIi9wdWxzZS1sb2dvLXdoaXRlLnN2Z1wiIGFsdD1cIlB1bHNlIExvZ29cIiBjbGFzc05hbWU9XCJoLTggbXgtYXV0byBtYi04XCIgLz5cbiAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LXdoaXRlIGZvbnQtWydUaHVuZGVyJ10gbWItMlwiPlxuICAgICAgICAgIHtyZXNldEVtYWlsU2VudCA/IFwiQ2hlY2sgWW91ciBFbWFpbFwiIDogXCJSZXNldCBZb3VyIFBhc3N3b3JkXCJ9XG4gICAgICAgIDwvaDI+XG4gICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtemluYy00MDAgZm9udC1bJ0hLIEdyb3Rlc2snXSB0ZXh0LXNtXCI+XG4gICAgICAgICAge3Jlc2V0RW1haWxTZW50IFxuICAgICAgICAgICAgPyBcIldlJ3ZlIHNlbnQgcGFzc3dvcmQgcmVzZXQgaW5zdHJ1Y3Rpb25zIHRvIHlvdXIgZW1haWxcIiBcbiAgICAgICAgICAgIDogXCJFbnRlciB5b3VyIGVtYWlsIGFkZHJlc3MgdG8gcmVjZWl2ZSByZXNldCBpbnN0cnVjdGlvbnNcIn1cbiAgICAgICAgPC9wPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHshcmVzZXRFbWFpbFNlbnQgPyAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS02XCI+XG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtemluYy0zMDAgbWItMiBmb250LVsnSEsgR3JvdGVzayddXCI+XG4gICAgICAgICAgICAgIEVtYWlsXG4gICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIHR5cGU9XCJlbWFpbFwiXG4gICAgICAgICAgICAgIHZhbHVlPXtlbWFpbH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0RW1haWwoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICAgICAgICAgIHNldFNob3dFcnJvcihmYWxzZSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy16aW5jLTgwMCBib3JkZXIgYm9yZGVyLXppbmMtNjAwIHJvdW5kZWQtbGcgcC0zIHRleHQtd2hpdGUgcGxhY2Vob2xkZXItemluYy00MDAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1bI0UwRkUxMF0gZm9jdXM6cmluZy0xIGZvY3VzOnJpbmctWyNFMEZFMTBdIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJFbnRlciB5b3VyIGVtYWlsXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGdhcC00IG10LThcIj5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUZvcmdvdFBhc3N3b3JkfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17aXNMb2FkaW5nfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctWyNFMEZFMTBdIHRleHQtYmxhY2sgZm9udC1zZW1pYm9sZCBweS0zIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1bI2M4ZTYwZV0gdHJhbnNpdGlvbi1jb2xvcnMgZm9udC1bJ0hLIEdyb3Rlc2snXSBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtpc0xvYWRpbmcgPyAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2FkZXIgYm9yZGVyLXQtdHJhbnNwYXJlbnQgYm9yZGVyLTQgYm9yZGVyLWJsYWNrIHJvdW5kZWQtZnVsbCB3LTUgaC01IG14LWF1dG8gYW5pbWF0ZS1zcGluXCI+PC9kaXY+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgXCJTZW5kIFJlc2V0IEluc3RydWN0aW9uc1wiXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgIHNldElzRm9yZ290UGFzc3dvcmQoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHNldFJlc2V0RW1haWxTZW50KGZhbHNlKTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC16aW5jLTQwMCB0ZXh0LXNtIGhvdmVyOnRleHQtd2hpdGUgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBCYWNrIHRvIFNpZ24gSW5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICkgOiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS02XCI+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC16aW5jLTMwMCB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgUGxlYXNlIGNoZWNrIHlvdXIgZW1haWwgYW5kIGZvbGxvdyB0aGUgaW5zdHJ1Y3Rpb25zIHRvIHJlc2V0IHlvdXIgcGFzc3dvcmQuXG4gICAgICAgICAgPC9wPlxuICAgICAgICAgIFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBnYXAtNCBtdC04XCI+XG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0SXNGb3Jnb3RQYXNzd29yZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgc2V0UmVzZXRFbWFpbFNlbnQoZmFsc2UpO1xuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctWyNFMEZFMTBdIHRleHQtYmxhY2sgZm9udC1zZW1pYm9sZCBweS0zIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1bI2M4ZTYwZV0gdHJhbnNpdGlvbi1jb2xvcnMgZm9udC1bJ0hLIEdyb3Rlc2snXVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIFJldHVybiB0byBTaWduIEluXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuICAgIDwvPlxuICApO1xuICBcbiAgY29uc3QgcmVuZGVySW5pdGlhbFN0ZXAgPSAoKSA9PiAoXG4gICAgPD5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgbWItOCBwdC00IHNtOnB0LTBcIj5cbiAgICAgICAgPGltZyBzcmM9XCIvcHVsc2UtbG9nby13aGl0ZS5zdmdcIiBhbHQ9XCJQdWxzZSBMb2dvXCIgY2xhc3NOYW1lPVwiaC04IG14LWF1dG8gbWItOFwiIC8+XG4gICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC13aGl0ZSBmb250LVsnVGh1bmRlciddIG1iLTJcIj5cbiAgICAgICAgICB7aXNTaWduVXAgPyBcIkpvaW4gdGhlIENvbGxlY3RpdmVcIiA6IFwiV2VsY29tZSBCYWNrIVwifVxuICAgICAgICA8L2gyPlxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXppbmMtNDAwIGZvbnQtWydISyBHcm90ZXNrJ10gdGV4dC1zbVwiPlxuICAgICAgICAgIEJlYXQgWW91ciBCZXN0LCBTaGFyZSBZb3VyIFZpY3RvcnlcbiAgICAgICAgPC9wPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBnYXAtNCBtYi04XCI+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICBzZXRBY3RpdmVQcm92aWRlcihcImFwcGxlXCIpOyAvLyBUcmFjayB0aGUgYWN0aXZlIHByb3ZpZGVyXG4gICAgICAgICAgICBoYW5kbGVTb2NpYWxBdXRoKFwiYXBwbGVcIik7IC8vIFRyaWdnZXIgdGhlIHNvY2lhbCBhdXRoXG4gICAgICAgICAgfX1cbiAgICAgICAgICBkaXNhYmxlZD17aXNMb2FkaW5nICYmIGFjdGl2ZVByb3ZpZGVyID09PSBcImFwcGxlXCJ9IC8vIERpc2FibGUgaWYgbG9hZGluZyB3aXRoIHRoaXMgcHJvdmlkZXJcbiAgICAgICAgICBjbGFzc05hbWU9e2B3LWZ1bGwgYmctYmxhY2sgdGV4dC13aGl0ZSBmb250LXNlbWlib2xkIHB5LTMgcHgtNCByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIGZvbnQtWydISyBHcm90ZXNrJ10gYm9yZGVyIGJvcmRlci16aW5jLTcwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtMyAke1xuICAgICAgICAgICAgaXNMb2FkaW5nICYmIGFjdGl2ZVByb3ZpZGVyID09PSBcImFwcGxlXCIgPyBcIm9wYWNpdHktNTAgY3Vyc29yLW5vdC1hbGxvd2VkXCIgOiBcImhvdmVyOmJnLXppbmMtODAwXCJcbiAgICAgICAgICB9YH1cbiAgICAgICAgPlxuICAgICAgICAgIHtpc0xvYWRpbmcgJiYgYWN0aXZlUHJvdmlkZXIgPT09IFwiYXBwbGVcIiA/IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibG9hZGVyIGJvcmRlci10LXRyYW5zcGFyZW50IGJvcmRlci00IGJvcmRlci13aGl0ZSByb3VuZGVkLWZ1bGwgdy01IGgtNSBhbmltYXRlLXNwaW5cIj48L2Rpdj5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgPGltZyBzcmM9XCIvYXBwbGUtbG9nby5zdmdcIiBhbHQ9XCJBcHBsZVwiIGNsYXNzTmFtZT1cInctNSBoLTVcIiAvPlxuICAgICAgICAgICAgICB7aXNTaWduVXAgPyBcIlNpZ24gdXAgd2l0aCBBcHBsZVwiIDogXCJTaWduIGluIHdpdGggQXBwbGVcIn1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVTb2NpYWxBdXRoKFwiZ29vZ2xlXCIpfVxuICAgICAgICAgIGRpc2FibGVkPXtpc0xvYWRpbmd9XG4gICAgICAgICAgY2xhc3NOYW1lPXtgdy1mdWxsIGJnLXdoaXRlIHRleHQtYmxhY2sgZm9udC1zZW1pYm9sZCBweS0zIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1ncmF5LTEwMCB0cmFuc2l0aW9uLWNvbG9ycyBmb250LVsnSEsgR3JvdGVzayddIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0zICR7XG4gICAgICAgICAgICBpc0xvYWRpbmcgPyBcImN1cnNvci1ub3QtYWxsb3dlZCBvcGFjaXR5LTUwXCIgOiBcIlwiXG4gICAgICAgICAgfWB9XG4gICAgICAgID5cbiAgICAgICAgICB7aXNMb2FkaW5nICYmIGFjdGl2ZVByb3ZpZGVyID09PSBcImdvb2dsZVwiID8gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2FkZXIgYm9yZGVyLXQtdHJhbnNwYXJlbnQgYm9yZGVyLTQgYm9yZGVyLWJsYWNrIHJvdW5kZWQtZnVsbCB3LTUgaC01IGFuaW1hdGUtc3BpblwiPjwvZGl2PlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICA8aW1nIHNyYz1cIi9nb29nbGUtbG9nby5zdmdcIiBhbHQ9XCJHb29nbGVcIiBjbGFzc05hbWU9XCJ3LTUgaC01XCIgLz5cbiAgICAgICAgICAgICAge2lzU2lnblVwID8gXCJTaWduIHVwIHdpdGggR29vZ2xlXCIgOiBcIlNpZ24gaW4gd2l0aCBHb29nbGVcIn1cbiAgICAgICAgICAgIDwvPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LTAgZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGJvcmRlci10IGJvcmRlci16aW5jLTcwMFwiPjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHsvKiBVbmNvbW1lbnQgYmVsb3cgaWYgeW91IHdhbnQgYSBzZXBhcmF0b3IgdGV4dCAqL31cbiAgICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSBmbGV4IGp1c3RpZnktY2VudGVyIHRleHQtc21cIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInB4LTQgdGV4dC16aW5jLTQwMCBiZy16aW5jLTkwMFwiPm9yIGNvbnRpbnVlIHdpdGggZW1haWw8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+ICovfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNlwiPlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtemluYy0zMDAgbWItMiBmb250LVsnSEsgR3JvdGVzayddXCI+XG4gICAgICAgICAgICBFbWFpbFxuICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICB0eXBlPVwiZW1haWxcIlxuICAgICAgICAgICAgdmFsdWU9e2VtYWlsfVxuICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgIHNldEVtYWlsKGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgICAgc2V0U2hvd0Vycm9yKGZhbHNlKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBjbGFzc05hbWU9e2B3LWZ1bGwgYmctemluYy04MDAgYm9yZGVyIHJvdW5kZWQtbGcgcC0zIHRleHQtd2hpdGUgcGxhY2Vob2xkZXItemluYy00MDAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1bI0UwRkUxMF0gZm9jdXM6cmluZy0xIGZvY3VzOnJpbmctWyNFMEZFMTBdIHRyYW5zaXRpb24tY29sb3JzICR7XG4gICAgICAgICAgICAgIGVycm9ycy5lbWFpbCA/IFwiYm9yZGVyLXJlZC01MDBcIiA6IFwiYm9yZGVyLXppbmMtNjAwXCJcbiAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJFbnRlciB5b3VyIGVtYWlsXCJcbiAgICAgICAgICAvPlxuICAgICAgICAgIHtzaG93RXJyb3IgJiYgZXJyb3JzLmVtYWlsICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1yZWQtNDAwIHRleHQtc20gbXQtMlwiPntlcnJvcnMuZW1haWx9PC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgeyFpc1NpZ25VcCAmJiAoXG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLTJcIj5cbiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC16aW5jLTMwMCBmb250LVsnSEsgR3JvdGVzayddXCI+XG4gICAgICAgICAgICAgICAgUGFzc3dvcmRcbiAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRJc0ZvcmdvdFBhc3N3b3JkKHRydWUpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtWyNFMEZFMTBdIHRleHQtc20gaG92ZXI6dW5kZXJsaW5lXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIEZvcmdvdCB5b3VyIHBhc3N3b3JkP1xuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPiB7LyogQWRkZWQ6IFJlbGF0aXZlIGNvbnRhaW5lciBmb3IgaW5wdXQgYW5kIGJ1dHRvbiAqL31cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdHlwZT17c2hvd1Bhc3N3b3JkID8gXCJ0ZXh0XCIgOiBcInBhc3N3b3JkXCJ9IC8vIENoYW5nZWQgdG8gdXNlIHNob3dQYXNzd29yZCBzdGF0ZVxuICAgICAgICAgICAgICAgIHZhbHVlPXtwYXNzd29yZH1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldFBhc3N3b3JkKGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgIHNldFNob3dFcnJvcihmYWxzZSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctemluYy04MDAgYm9yZGVyIGJvcmRlci16aW5jLTYwMCByb3VuZGVkLWxnIHAtMyBwci0xMCB0ZXh0LXdoaXRlIHBsYWNlaG9sZGVyLXppbmMtNDAwIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItWyNFMEZFMTBdIGZvY3VzOnJpbmctMSBmb2N1czpyaW5nLVsjRTBGRTEwXSB0cmFuc2l0aW9uLWNvbG9yc1wiIC8vIEFkZGVkIHByLTEwXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJFbnRlciB5b3VyIHBhc3N3b3JkXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNob3dQYXNzd29yZCghc2hvd1Bhc3N3b3JkKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC15LTAgcmlnaHQtMCBwci0zIGZsZXggaXRlbXMtY2VudGVyIHRleHQtc20gbGVhZGluZy01XCIgLy8gUmVtb3ZlZCBpbmxpbmUgc3R5bGVcbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPXtzaG93UGFzc3dvcmQgPyBcIkhpZGUgcGFzc3dvcmRcIiA6IFwiU2hvdyBwYXNzd29yZFwifVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3Nob3dQYXNzd29yZCA/IChcbiAgICAgICAgICAgICAgICAgIDxFeWVPZmYgY2xhc3NOYW1lPVwiaC01IHctNSB0ZXh0LXppbmMtNDAwXCIgLz5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPEV5ZSBjbGFzc05hbWU9XCJoLTUgdy01IHRleHQtemluYy00MDBcIiAvPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICA8Lz5cbiAgKTtcblxuICBjb25zdCByZW5kZXJRdWl6TmF2aWdhdGlvbiA9ICgpID0+IHtcbiAgICBpZiAoc2lnblVwU3RlcCAhPT0gXCJxdWl6XCIpIHJldHVybiBudWxsO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtOCBmbGV4IGdhcC00XCI+XG4gICAgICAgIHtxdWl6U3RlcCA+IDAgJiYgKFxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0UXVpelN0ZXAocXVpelN0ZXAgLSAxKX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgtMSBiZy16aW5jLTgwMCB0ZXh0LXdoaXRlIGZvbnQtc2VtaWJvbGQgcHktMyBweC00IHJvdW5kZWQtbGcgaG92ZXI6YmctemluYy03MDAgdHJhbnNpdGlvbi1jb2xvcnMgZm9udC1bJ0hLIEdyb3Rlc2snXVwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgQmFja1xuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICApfVxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzTGFzdFF1aXpTdGVwKCkpIHtcbiAgICAgICAgICAgICAgaGFuZGxlQ29tcGxldGVRdWl6KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzZXRRdWl6U3RlcChxdWl6U3RlcCArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH19XG4gICAgICAgICAgZGlzYWJsZWQ9eyFpc0N1cnJlbnRTdGVwVmFsaWQoKX1cbiAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LTEgYmctWyNFMEZFMTBdIHRleHQtYmxhY2sgZm9udC1zZW1pYm9sZCBweS0zIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1bI2M4ZTYwZV0gdHJhbnNpdGlvbi1jb2xvcnMgZm9udC1bJ0hLIEdyb3Rlc2snXSBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiXG4gICAgICAgID5cbiAgICAgICAgICB7aXNMYXN0UXVpelN0ZXAoKSA/IFwiQ29tcGxldGUgcXVpelwiIDogXCJOZXh0XCJ9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfTtcblxuICAvLyBWYWxpZGF0aW9uIGZvciBxdWl6IHN0ZXBzXG4gIGNvbnN0IGlzQ3VycmVudFN0ZXBWYWxpZCA9ICgpID0+IHtcbiAgICBzd2l0Y2ggKHF1aXpTdGVwKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiAhIXF1aXpEYXRhLmdlbmRlcjtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBxdWl6RGF0YS5oZWlnaHQuZmVldCA+IDAgJiZcbiAgICAgICAgICBxdWl6RGF0YS5oZWlnaHQuZmVldCA8PSA4ICYmXG4gICAgICAgICAgcXVpekRhdGEuaGVpZ2h0LmluY2hlcyA+PSAwICYmXG4gICAgICAgICAgcXVpekRhdGEuaGVpZ2h0LmluY2hlcyA8PSAxMVxuICAgICAgICApO1xuICAgICAgY2FzZSAyOlxuICAgICAgICByZXR1cm4gcXVpekRhdGEud2VpZ2h0ID4gMDtcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgcmV0dXJuICEhcXVpekRhdGEubGV2ZWw7XG4gICAgICBjYXNlIDQ6XG4gICAgICAgIHJldHVybiBxdWl6RGF0YS5nb2FsLmxlbmd0aCA+IDA7XG4gICAgICBjYXNlIDU6XG4gICAgICAgIHJldHVybiAhIXF1aXpEYXRhLmJpcnRoZGF0ZTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcmVuZGVyQ3VycmVudFN0ZXAgPSAoKSA9PiB7XG4gICAgaWYgKGlzRm9yZ290UGFzc3dvcmQpIHtcbiAgICAgIHJldHVybiByZW5kZXJGb3Jnb3RQYXNzd29yZCgpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoaXNTaWduVXApIHtcbiAgICAgIHN3aXRjaCAoc2lnblVwU3RlcCkge1xuICAgICAgICBjYXNlIFwicGFzc3dvcmRcIjpcbiAgICAgICAgICByZXR1cm4gcmVuZGVyUGFzc3dvcmRTdGVwKCk7XG4gICAgICAgIGNhc2UgXCJwcm9maWxlXCI6XG4gICAgICAgICAgcmV0dXJuIHJlbmRlclByb2ZpbGVTdGVwKCk7XG4gICAgICAgIGNhc2UgXCJxdWl6LXByb21wdFwiOlxuICAgICAgICAgIHJldHVybiByZW5kZXJRdWl6UHJvbXB0KCk7XG4gICAgICAgIGNhc2UgXCJxdWl6XCI6XG4gICAgICAgICAgcmV0dXJuIHJlbmRlclF1aXpRdWVzdGlvbigpO1xuICAgICAgICBjYXNlIFwic3Vic2NyaXB0aW9uXCI6XG4gICAgICAgICAgcmV0dXJuIHJlbmRlclN1YnNjcmlwdGlvblN0ZXAoKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gcmVuZGVySW5pdGlhbFN0ZXAoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKHNpZ25VcFN0ZXAgPT09IFwic3Vic2NyaXB0aW9uXCIpIHtcbiAgICAgIHJldHVybiByZW5kZXJTdWJzY3JpcHRpb25TdGVwKCk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiByZW5kZXJJbml0aWFsU3RlcCgpO1xuICB9O1xuXG4gIGNvbnN0IHRvZ2dsZU1vZGUgPSAoKSA9PiB7XG4gICAgc2V0SXNTaWduVXAoIWlzU2lnblVwKTtcbiAgICBzZXRTaWduVXBTdGVwKFwiaW5pdGlhbFwiKTtcbiAgICBzZXRFcnJvcnMoe30pO1xuICAgIHNldFNob3dFcnJvcihmYWxzZSk7XG4gICAgc2V0UGFzc3dvcmQoXCJcIik7XG4gICAgc2V0Q29uZmlybVBhc3N3b3JkKFwiXCIpO1xuICAgIHNldFVzZXJuYW1lKFwiXCIpO1xuICAgIHNldFByb2ZpbGVJbWFnZShudWxsKTtcbiAgfTtcblxuICAvLyBBZGQgZGVidWcgbG9nZ2luZyBmb3IgcHJvcHNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsXSBQcm9wcyBzdGF0ZTonLCB7XG4gICAgICBpc1Zpc2libGUsXG4gICAgICBjbG9zYWJsZSxcbiAgICAgIGhhc09uQ2xvc2U6ICEhb25DbG9zZSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSk7XG4gIH0sIFtpc1Zpc2libGUsIGNsb3NhYmxlLCBvbkNsb3NlXSk7XG5cbiAgLy8gQWRkIGRlYnVnIGxvZ2dpbmcgZm9yIHNpZ251cCBzdGVwIGNoYW5nZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsXSBTaWduLXVwIHN0ZXAgY2hhbmdlZDonLCB7XG4gICAgICBzaWduVXBTdGVwLFxuICAgICAgaXNTaWduVXAsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH0pO1xuICB9LCBbc2lnblVwU3RlcCwgaXNTaWduVXBdKTtcblxuICAvLyBNYWtlIHN1cmUgdGhlIG1vZGFsIGlzIGFjdHVhbGx5IHZpc2libGVcbiAgaWYgKCFpc1Zpc2libGUpIHtcbiAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsXSBNb2RhbCBub3QgdmlzaWJsZSwgbm90IHJlbmRlcmluZycpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgaGFuZGxlRm9yZ290UGFzc3dvcmQgPSBhc3luYyAoZTogUmVhY3QuRm9ybUV2ZW50KSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHNldElzTG9hZGluZyh0cnVlKTtcbiAgICBzZXRFcnJvcihudWxsKTtcbiAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsXSBGb3Jnb3QgcGFzc3dvcmQgcmVxdWVzdCBpbml0aWF0ZWQgZm9yOicsIGVtYWlsKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgaWYgKCFlbWFpbCkge1xuICAgICAgICBzZXRFcnJvcihcIlBsZWFzZSBlbnRlciB5b3VyIGVtYWlsIGFkZHJlc3NcIik7XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgYXdhaXQgYXV0aFNlcnZpY2UucmVzZXRQYXNzd29yZChlbWFpbCk7XG4gICAgICBzZXRSZXNldEVtYWlsU2VudCh0cnVlKTtcbiAgICAgIGNvbnNvbGUubG9nKCdbU2lnbkluTW9kYWxdIFBhc3N3b3JkIHJlc2V0IGVtYWlsIHNlbnQgc3VjY2Vzc2Z1bGx5IHRvOicsIGVtYWlsKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJbU2lnbkluTW9kYWxdIEVycm9yIHNlbmRpbmcgcGFzc3dvcmQgcmVzZXQgZW1haWw6XCIsIGVycik7XG4gICAgICBzZXRFcnJvcihlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ0FuIGVycm9yIG9jY3VycmVkJyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVNpZ25JblN1Y2Nlc3MgPSBhc3luYyAodXNlcjogYW55KSA9PiB7XG4gICAgY29uc3QgcXVlcnlSZWRpcmVjdFVybCA9IHJvdXRlci5xdWVyeS5yZWRpcmVjdCBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlckRvYyA9IGF3YWl0IHVzZXJTZXJ2aWNlLmZldGNoVXNlckZyb21GaXJlc3RvcmUodXNlci51aWQpO1xuICAgICAgXG4gICAgICAvLyBFbmhhbmNlZCB1c2VybmFtZSBjaGVjayB3aXRoIG1vcmUgZGV0YWlsZWQgbG9nZ2luZ1xuICAgICAgaWYgKCF1c2VyRG9jKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTaWduSW5Nb2RhbF0gaGFuZGxlU2lnbkluU3VjY2VzczogVXNlciBkb2N1bWVudCBub3QgZm91bmQgaW4gRmlyZXN0b3JlJyk7XG4gICAgICAgIHNldEVycm9yKCdVc2VyIHByb2ZpbGUgY291bGQgbm90IGJlIGxvYWRlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBFeHBsaWNpdCBtaXNzaW5nIHVzZXJuYW1lIGNoZWNrIC0gcHJpb3JpdGl6ZSB0aGlzIGJlZm9yZSBzdWJzY3JpcHRpb24gY2hlY2tcbiAgICAgIGlmICghdXNlckRvYy51c2VybmFtZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsXSBoYW5kbGVTaWduSW5TdWNjZXNzOiBVc2VyIGhhcyBubyB1c2VybmFtZS4gRm9yY2luZyBwcm9maWxlIGNvbXBsZXRpb24gc3RlcC4nKTtcbiAgICAgICAgc2V0SXNTaWduVXAodHJ1ZSk7XG4gICAgICAgIHNldFNpZ25VcFN0ZXAoJ3Byb2ZpbGUnKTtcbiAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgLy8gKioqIEltcG9ydGFudDogRG8gTk9UIGNsZWFyIHJvdW5kSWRSZWRpcmVjdCBoZXJlIHNvIGl0IGNhbiBiZSB1c2VkIGFmdGVyIHByb2ZpbGUgY29tcGxldGlvbiAqKipcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyAqKiogRXhwbGljaXQgU3Vic2NyaXB0aW9uIENoZWNrICoqKlxuICAgICAgaWYgKHVzZXJEb2Muc3Vic2NyaXB0aW9uVHlwZSA9PT0gU3Vic2NyaXB0aW9uVHlwZS51bnN1YnNjcmliZWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbF0gaGFuZGxlU2lnbkluU3VjY2VzczogVXNlciBpcyB1bnN1YnNjcmliZWQuIFJlZGlyZWN0aW5nIHRvIC9zdWJzY3JpYmUuJyk7XG4gICAgICAgIC8vIFByZXNlcnZlIHJvdW5kSWRSZWRpcmVjdCBpZiBpdCBleGlzdHMgZm9yIHBvc3Qtc3Vic2NyaXB0aW9uIGZsb3dcbiAgICAgICAgaWYgKHJvdW5kSWRSZWRpcmVjdCkge1xuICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbU2lnbkluTW9kYWxdIGhhbmRsZVNpZ25JblN1Y2Nlc3M6IFVuc3Vic2NyaWJlZCB1c2VyIGNhbWUgZnJvbSByb3VuZCBpbnZpdGUgKCR7cm91bmRJZFJlZGlyZWN0fSkuIFJlZGlyZWN0aW5nIHRvIHN1YnNjcmliZSwgc3RhdGUgcHJlc2VydmVkLmApO1xuICAgICAgICB9XG4gICAgICAgIHJvdXRlci5wdXNoKCcvc3Vic2NyaWJlJyk7XG4gICAgICAgIC8vIFJldHVybiBFQVJMWSB0byBwcmV2ZW50IG90aGVyIHJlZGlyZWN0L2Nsb3NlIGxvZ2ljXG4gICAgICAgIHJldHVybjsgXG4gICAgICB9XG4gICAgICAvLyAqKiogRW5kIEV4cGxpY2l0IFN1YnNjcmlwdGlvbiBDaGVjayAqKipcblxuICAgICAgLy8gKiogQXV0by1qb2luIGNoZWNrIChVc2VyIGlzIGd1YXJhbnRlZWQgdG8gYmUgc3Vic2NyaWJlZCBBTkQgaGF2ZSB1c2VybmFtZSBoZXJlKSAqKiBcbiAgICAgIGlmIChyb3VuZElkUmVkaXJlY3QpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW1NpZ25Jbk1vZGFsXSBoYW5kbGVTaWduSW5TdWNjZXNzOiBBdHRlbXB0aW5nIGF1dG8tam9pbiBmb3Igcm91bmQ6ICR7cm91bmRJZFJlZGlyZWN0fWApO1xuICAgICAgICAgIGF3YWl0IGF1dG9Kb2luQ2hhbGxlbmdlKHJvdW5kSWRSZWRpcmVjdCk7IFxuICAgICAgICAgIGRpc3BhdGNoKGNsZWFyUm91bmRJZFJlZGlyZWN0KCkpOyBcbiAgICAgICAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsXSBTaWduIGluIHN1Y2Nlc3MgYWZ0ZXIgYXV0by1qb2luLiBDbG9zaW5nIG1vZGFsLicpO1xuICAgICAgICAgIG9uQ2xvc2U/LigpOyBcbiAgICAgICAgICByZXR1cm47IC8vIFJldHVybiBhZnRlciBoYW5kbGluZ1xuICAgICAgfSBlbHNlIGlmIChsb2dpblJlZGlyZWN0UGF0aCkge1xuICAgICAgICAvLyBVc2VyIGFjY2Vzc2VkIHByb3RlY3RlZCByb3V0ZSBkaXJlY3RseSAoYW5kIGlzIHN1YnNjcmliZWQpXG4gICAgICAgIGNvbnNvbGUubG9nKGBbU2lnbkluTW9kYWxdIFNpZ24gaW4gc3VjY2Vzcy4gRm91bmQgbG9naW5SZWRpcmVjdFBhdGguIENsb3NpbmcgbW9kYWwuIFBhdGg6ICR7bG9naW5SZWRpcmVjdFBhdGh9YCk7XG4gICAgICAgIGRpc3BhdGNoKGNsZWFyTG9naW5SZWRpcmVjdFBhdGgoKSk7IFxuICAgICAgICBvbkNsb3NlPy4oKTsgXG4gICAgICAgIHJldHVybjsgLy8gUmV0dXJuIGFmdGVyIGhhbmRsaW5nXG4gICAgICB9IGVsc2UgaWYgKHF1ZXJ5UmVkaXJlY3RVcmwpIHsgXG4gICAgICAgIC8vIExlZ2FjeSBmYWxsYmFjayAoYW5kIGlzIHN1YnNjcmliZWQpXG4gICAgICAgIGNvbnNvbGUubG9nKGBbU2lnbkluTW9kYWxdIFNpZ24gaW4gc3VjY2Vzcy4gVXNpbmcgcXVlcnkgcGFyYW0gcmVkaXJlY3QuIE5hdmlnYXRpbmcgdG86ICR7cXVlcnlSZWRpcmVjdFVybH1gKTtcbiAgICAgICAgcm91dGVyLnB1c2gocXVlcnlSZWRpcmVjdFVybCk7XG4gICAgICAgIC8vIFJldHVybiBhZnRlciBoYW5kbGluZyAob25DbG9zZSBtaWdodCBub3QgYmUgbmVlZGVkIGlmIG5hdmlnYXRpbmcgYXdheSlcbiAgICAgICAgcmV0dXJuOyBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZpbmFsIGZhbGxiYWNrIChhbmQgaXMgc3Vic2NyaWJlZClcbiAgICAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbF0gU2lnbiBpbiBzdWNjZXNzLiBObyBzcGVjaWZpYyByZWRpcmVjdC4gQ2xvc2luZyBtb2RhbC4nKTtcbiAgICAgICAgb25DbG9zZT8uKCk7IFxuICAgICAgICAvLyBObyByZXR1cm4gbmVlZGVkIGhlcmUgYXMgaXQncyB0aGUgZW5kIG9mIHRoZSBmdW5jdGlvbidzIHRyeSBibG9ja1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc3QgZXJyb3IgPSBlcnIgYXMgRXJyb3I7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY29tcGxldGluZyBzaWduIGluOlwiLCBlcnJvcik7XG4gICAgICBzZXRFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgICAvLyBIYW5kbGUgZXJyb3Igc3RhdGUgYXBwcm9wcmlhdGVseSAtIG1heWJlIGRvbid0IGNsb3NlIG1vZGFsIGF1dG9tYXRpY2FsbHlcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gLS0tIGlQaG9uZSBBcHAgRG93bmxvYWQgQmFubmVyIC0tLVxuICAvLyBUaGlzIGJhbm5lciBhcHBlYXJzIG9ubHkgaWYgdGhlIHVzZXIgaXMgb24gYW4gaVBob25lXG4gIGNvbnN0IGlwaG9uZUJhbm5lciA9IGlzSXBob25lICYmIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTQgcC0zIGJnLVsjRTBGRTEwXSB0ZXh0LWJsYWNrIHJvdW5kZWQtbGcgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHNoYWRvdyBmb250LXNlbWlib2xkXCI+XG4gICAgICA8c3Bhbj5HZXQgdGhlIGJlc3QgZXhwZXJpZW5jZSEgRG93bmxvYWQgdGhlIFB1bHNlIGlQaG9uZSBhcHAuPC9zcGFuPlxuICAgICAgPGFcbiAgICAgICAgaHJlZj1cImh0dHBzOi8vYXBwcy5hcHBsZS5jb20vY2EvYXBwL3B1bHNlLWNvbW11bml0eS13b3Jrb3V0cy9pZDY0NTE0OTc3MjlcIlxuICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxuICAgICAgICByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCJcbiAgICAgICAgY2xhc3NOYW1lPVwibWwtNCBweC0zIHB5LTEgYmctYmxhY2sgdGV4dC1bI0UwRkUxMF0gcm91bmRlZCBob3ZlcjpiZy16aW5jLTgwMCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICA+XG4gICAgICAgIERvd25sb2FkXG4gICAgICA8L2E+XG4gICAgPC9kaXY+XG4gICk7XG5cbiAgLy8gKiogRGVidWcgTG9nIChwbGFjZWQgYmVmb3JlIHJldHVybikgKipcbiAgLy8gaWYgKGlzVmlzaWJsZSkge1xuICAvLyAgICAgY29uc29sZS5sb2coJ1tTaWduSW5Nb2RhbF0gVGVtcCBSZWRpcmVjdCBTdGF0ZSBDaGVjayAoUmVuZGVyKTonLCB7XG4gIC8vICAgICAgIHJvdW5kSWRSZWRpcmVjdCxcbiAgLy8gICAgICAgbG9naW5SZWRpcmVjdFBhdGgsXG4gIC8vICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gIC8vICAgICB9KTtcbiAgLy8gfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLWJsYWNrIHotNTAgc206cC02XCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXppbmMtOTAwIHctZnVsbCBoLWZ1bGwgc206aC1hdXRvIHNtOnctWzQ4MHB4XSBzbTpyb3VuZGVkLXhsIHAtNiBzbTpwLTggYm9yZGVyLW5vbmUgc206Ym9yZGVyIHNtOmJvcmRlci16aW5jLTcwMCBzaGFkb3cteGwgb3ZlcmZsb3cteS1hdXRvXCI+XG4gICAgICAgIHt3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnICYmIDxEZXZNb2RlVG9nZ2xlIC8+fVxuICAgICAgICB7LyogaVBob25lIEFwcCBEb3dubG9hZCBCYW5uZXIgKi99XG4gICAgICAgIHtpcGhvbmVCYW5uZXJ9XG4gICAgICAgIFxuICAgICAgICB7Y2xvc2FibGUgJiYgb25DbG9zZSAmJiAoXG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17b25DbG9zZX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC00IHJpZ2h0LTQgdGV4dC16aW5jLTQwMCBob3Zlcjp0ZXh0LXdoaXRlIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgIGFyaWEtbGFiZWw9XCJDbG9zZSBtb2RhbFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFggc2l6ZT17MjR9IC8+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICl9XG5cbiAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0gY2xhc3NOYW1lPVwic3BhY2UteS02XCI+XG4gICAgICAgICAge2Vycm9yICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctcmVkLTUwMCB0ZXh0LXdoaXRlIHRleHQtc20gZm9udC1zZW1pYm9sZCBwLTMgcm91bmRlZC1sZ1wiPlxuICAgICAgICAgICAgICB7ZXJyb3J9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtyZW5kZXJDdXJyZW50U3RlcCgpfVxuXG4gICAgICAgICAge3NpZ25VcFN0ZXAgIT09IFwicXVpei1wcm9tcHRcIiAmJiBzaWduVXBTdGVwICE9PSBcInF1aXpcIiAmJiBzaWduVXBTdGVwICE9PSBcInN1YnNjcmlwdGlvblwiICYmICFpc0ZvcmdvdFBhc3N3b3JkICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBnYXAtNCBtdC04XCI+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1NpZ25Jbk1vZGFsXSBTdWJtaXQgYnV0dG9uIGNsaWNrZWQ6Jywge1xuICAgICAgICAgICAgICAgICAgICBpc1NpZ25VcCxcbiAgICAgICAgICAgICAgICAgICAgc2lnblVwU3RlcCxcbiAgICAgICAgICAgICAgICAgICAgZW1haWwsXG4gICAgICAgICAgICAgICAgICAgIGhhc1Bhc3N3b3JkOiAhIXBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICAgICBwYXNzd29yZExlbmd0aDogcGFzc3dvcmQgPyBwYXNzd29yZC5sZW5ndGggOiAwLFxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctWyNFMEZFMTBdIHRleHQtYmxhY2sgZm9udC1zZW1pYm9sZCBweS0zIHB4LTQgcm91bmRlZC1sZyBob3ZlcjpiZy1bI2M4ZTYwZV0gdHJhbnNpdGlvbi1jb2xvcnMgZm9udC1bJ0hLIEdyb3Rlc2snXVwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7aXNTaWduVXBcbiAgICAgICAgICAgICAgICAgID8gc2lnblVwU3RlcCA9PT0gXCJwcm9maWxlXCJcbiAgICAgICAgICAgICAgICAgICAgPyBcIkNvbXBsZXRlXCJcbiAgICAgICAgICAgICAgICAgICAgOiBzaWduVXBTdGVwID09PSBcInBhc3N3b3JkXCJcbiAgICAgICAgICAgICAgICAgICAgPyBcIkNvbnRpbnVlXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIkNvbnRpbnVlIHdpdGggRW1haWxcIlxuICAgICAgICAgICAgICAgICAgOiBcIlNpZ24gSW5cIn1cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Zvcm0+XG5cbiAgICAgICAge3JlbmRlclF1aXpOYXZpZ2F0aW9uKCl9XG5cbiAgICAgICAge3NpZ25VcFN0ZXAgPT09IFwiaW5pdGlhbFwiICYmICFpc0ZvcmdvdFBhc3N3b3JkICYmIChcbiAgICAgICAgICA8PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC02IHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtemluYy01MDAgdGV4dC1zbSBmb250LVsnSEsgR3JvdGVzayddXCI+XG4gICAgICAgICAgICAgICAge2lzU2lnblVwID8gXCJBbHJlYWR5IGhhdmUgYW4gYWNjb3VudD8gXCIgOiBcIkRvbid0IGhhdmUgYW4gYWNjb3VudD8gXCJ9XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXt0b2dnbGVNb2RlfSBjbGFzc05hbWU9XCJ0ZXh0LVsjRTBGRTEwXSBob3Zlcjp0ZXh0LVsjYzhlNjBlXVwiPlxuICAgICAgICAgICAgICAgICAge2lzU2lnblVwID8gXCJTaWduIEluXCIgOiBcIlNpZ24gVXBcIn1cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtOCBwdC02IGJvcmRlci10IGJvcmRlci16aW5jLTcwMFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgc206ZmxleC1yb3cganVzdGlmeS1jZW50ZXIgaXRlbXMtY2VudGVyIGdhcC00IHRleHQtemluYy00MDAgdGV4dC1zbSBtYi02XCI+XG4gICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgIGhyZWY9XCIvYWJvdXRcIlxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaG92ZXI6dGV4dC1bI0UwRkUxMF0gdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICAgICAgdGFyZ2V0PVwiX2JsYW5rXCJcbiAgICAgICAgICAgICAgICAgIHJlbD1cIm5vb3BlbmVyIG5vcmVmZXJyZXJcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIEFib3V0IFB1bHNlXG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGlkZGVuIHNtOmJsb2NrIHctMSBoLTEgYmctemluYy03MDAgcm91bmRlZC1mdWxsXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgIGhyZWY9XCIvY3JlYXRvclwiXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJob3Zlcjp0ZXh0LVsjRTBGRTEwXSB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxuICAgICAgICAgICAgICAgICAgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgQ3JlYXRvciBQcm9ncmFtXG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGlkZGVuIHNtOmJsb2NrIHctMSBoLTEgYmctemluYy03MDAgcm91bmRlZC1mdWxsXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgIGhyZWY9XCIvcm91bmRzXCJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImhvdmVyOnRleHQtWyNFMEZFMTBdIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgICAgIHRhcmdldD1cIl9ibGFua1wiXG4gICAgICAgICAgICAgICAgICByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBSb3VuZHMgRmVhdHVyZVxuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtd3JhcCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXIgZ2FwLTQgdGV4dC16aW5jLTUwMCB0ZXh0LXhzIG1iLTZcIj5cbiAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgaHJlZj1cIi90ZXJtc1wiXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJob3Zlcjp0ZXh0LVsjRTBGRTEwXSB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxuICAgICAgICAgICAgICAgICAgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgVGVybXMgJiBDb25kaXRpb25zXG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGlkZGVuIHNtOmJsb2NrIHctMSBoLTEgYmctemluYy03MDAgcm91bmRlZC1mdWxsXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgIGhyZWY9XCIvcHJpdmFjeVBvbGljeVwiXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJob3Zlcjp0ZXh0LVsjRTBGRTEwXSB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxuICAgICAgICAgICAgICAgICAgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgUHJpdmFjeSBQb2xpY3lcbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoaWRkZW4gc206YmxvY2sgdy0xIGgtMSBiZy16aW5jLTcwMCByb3VuZGVkLWZ1bGxcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiAod2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIm1haWx0bzpwdWxzZWZpdG5lc3NhcHBAZ21haWwuY29tXCIpfVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaG92ZXI6dGV4dC1bI0UwRkUxMF0gdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIENvbnRhY3QgVXNcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktY2VudGVyIGdhcC02IG1iLTZcIj5cbiAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgaHJlZj1cImh0dHBzOi8vd3d3Lmluc3RhZ3JhbS5jb20vZml0d2l0aHB1bHNlL1wiXG4gICAgICAgICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxuICAgICAgICAgICAgICAgICAgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXppbmMtNDAwIGhvdmVyOnRleHQtWyNFMEZFMTBdIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIi9pbnN0YWdyYW0uc3ZnXCIgYWx0PVwiSW5zdGFncmFtXCIgY2xhc3NOYW1lPVwidy01IGgtNVwiIC8+XG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICBocmVmPVwiaHR0cHM6Ly90d2l0dGVyLmNvbS9maXR3aXRocHVsc2VcIlxuICAgICAgICAgICAgICAgICAgdGFyZ2V0PVwiX2JsYW5rXCJcbiAgICAgICAgICAgICAgICAgIHJlbD1cIm5vb3BlbmVyIG5vcmVmZXJyZXJcIlxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC16aW5jLTQwMCBob3Zlcjp0ZXh0LVsjRTBGRTEwXSB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIvdHdpdHRlci5zdmdcIiBhbHQ9XCJUd2l0dGVyXCIgY2xhc3NOYW1lPVwidy01IGgtNVwiIC8+XG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICBocmVmPVwiaHR0cHM6Ly93d3cueW91dHViZS5jb20vQGZpdHdpdGhwdWxzZVwiXG4gICAgICAgICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxuICAgICAgICAgICAgICAgICAgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXppbmMtNDAwIGhvdmVyOnRleHQtWyNFMEZFMTBdIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIi95b3V0dWJlLnN2Z1wiIGFsdD1cIllvdXR1YmVcIiBjbGFzc05hbWU9XCJ3LTUgaC01XCIgLz5cbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgdGV4dC16aW5jLTUwMCB0ZXh0LXhzXCI+XG4gICAgICAgICAgICAgICAgwqkge25ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKX0gUHVsc2UuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC8+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFNpZ25Jbk1vZGFsO1xuXG4vLyBVdGlsaXR5IHRvIGNoZWNrIGlmIG9uYm9hcmRpbmcgaXMgY29tcGxldGVcbmZ1bmN0aW9uIGlzT25ib2FyZGluZ0NvbXBsZXRlKHVzZXI6IGFueSk6IGJvb2xlYW4geyAvLyBFeHBsaWNpdGx5IHJldHVybiBib29sZWFuXG4gIGlmICghdXNlcikgcmV0dXJuIGZhbHNlOyAvLyBIYW5kbGUgbnVsbCB1c2VyXG5cbiAgLy8gQ2hlY2sgZWFjaCByZXF1aXJlZCBmaWVsZCBzYWZlbHlcbiAgY29uc3QgaGFzVXNlcm5hbWUgPSAhIXVzZXIudXNlcm5hbWU7XG4gIC8vIFNhZmVseSBjaGVjayBoZWlnaHQ6IG11c3QgZXhpc3QgQU5EIGhhdmUgZmVldCA+IDBcbiAgY29uc3QgaGFzVmFsaWRIZWlnaHQgPSAhIXVzZXIuaGVpZ2h0ICYmIHR5cGVvZiB1c2VyLmhlaWdodCA9PT0gJ29iamVjdCcgJiYgdXNlci5oZWlnaHQuZmVldCA+IDA7XG4gIGNvbnN0IGhhc0JpcnRoZGF0ZSA9ICEhdXNlci5iaXJ0aGRhdGU7XG4gIGNvbnN0IGhhc0dlbmRlciA9ICEhdXNlci5nZW5kZXI7XG4gIGNvbnN0IGhhc0xldmVsID0gISF1c2VyLmxldmVsO1xuICBjb25zdCBoYXNHb2FscyA9IEFycmF5LmlzQXJyYXkodXNlci5nb2FsKSAmJiB1c2VyLmdvYWwubGVuZ3RoID4gMDtcbiAgY29uc3QgaXNSZWdpc3RyYXRpb25NYXJrZWRDb21wbGV0ZSA9ICEhdXNlci5yZWdpc3RyYXRpb25Db21wbGV0ZTtcblxuICByZXR1cm4gKFxuICAgIGhhc1VzZXJuYW1lICYmXG4gICAgaGFzVmFsaWRIZWlnaHQgJiZcbiAgICBoYXNCaXJ0aGRhdGUgJiZcbiAgICBoYXNHZW5kZXIgJiZcbiAgICBoYXNMZXZlbCAmJlxuICAgIGhhc0dvYWxzICYmXG4gICAgaXNSZWdpc3RyYXRpb25NYXJrZWRDb21wbGV0ZVxuICApO1xufVxuXG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsImdldFJlZGlyZWN0UmVzdWx0Iiwic2lnbkluV2l0aFBvcHVwIiwiT0F1dGhQcm92aWRlciIsImNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCIsIkNhbWVyYSIsIlgiLCJFeWUiLCJFeWVPZmYiLCJHZW5kZXIiLCJXb3Jrb3V0R29hbCIsIlN1YnNjcmlwdGlvblR5cGUiLCJhdXRoU2VydmljZSIsInVzZXJTZXJ2aWNlIiwiVXNlciIsIlVzZXJMZXZlbCIsIkJvZHlXZWlnaHQiLCJhdXRoIiwidXNlUm91dGVyIiwiZmlyZWJhc2VTdG9yYWdlU2VydmljZSIsIlVwbG9hZEltYWdlVHlwZSIsInVzZURpc3BhdGNoIiwidXNlU2VsZWN0b3IiLCJ0b2dnbGVEZXZNb2RlIiwiaW5pdGlhbGl6ZUZpcmViYXNlIiwidXNlVXNlciIsImNsZWFyUm91bmRJZFJlZGlyZWN0IiwiY2xlYXJMb2dpblJlZGlyZWN0UGF0aCIsInNob3dUb2FzdCIsIndvcmtvdXRTZXJ2aWNlIiwiRGV2TW9kZVRvZ2dsZSIsImRpc3BhdGNoIiwiaXNEZXZlbG9wbWVudCIsInN0YXRlIiwiZGV2TW9kZSIsImlzTG9jYWxob3N0Iiwid2luZG93IiwibG9jYXRpb24iLCJob3N0bmFtZSIsInNhdmVkTW9kZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJjb25zb2xlIiwibG9nIiwiY3VycmVudE1vZGUiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJoYW5kbGVUb2dnbGUiLCJuZXdNb2RlIiwiZnJvbSIsInRvIiwic291cmNlIiwic2V0SXRlbSIsIlN0cmluZyIsInNldFRpbWVvdXQiLCJyZWxvYWQiLCJidXR0b24iLCJvbkNsaWNrIiwiY2xhc3NOYW1lIiwic3R5bGUiLCJiYWNrZ3JvdW5kIiwiY29sb3IiLCJ0aXRsZSIsIlNpZ25Jbk1vZGFsIiwiaXNWaXNpYmxlIiwiY2xvc2FibGUiLCJvbkNsb3NlIiwib25TaWduSW5TdWNjZXNzIiwib25TaWduSW5FcnJvciIsIm9uU2lnblVwU3VjY2VzcyIsIm9uU2lnblVwRXJyb3IiLCJvblF1aXpDb21wbGV0ZSIsIm9uUXVpelNraXBwZWQiLCJvblJlZ2lzdHJhdGlvbkNvbXBsZXRlIiwiZW1haWwiLCJzZXRFbWFpbCIsInBhc3N3b3JkIiwic2V0UGFzc3dvcmQiLCJjb25maXJtUGFzc3dvcmQiLCJzZXRDb25maXJtUGFzc3dvcmQiLCJ1c2VybmFtZSIsInNldFVzZXJuYW1lIiwicHJvZmlsZUltYWdlIiwic2V0UHJvZmlsZUltYWdlIiwiaXNTaWduVXAiLCJzZXRJc1NpZ25VcCIsInNpZ25VcFN0ZXAiLCJzZXRTaWduVXBTdGVwIiwiaXNGb3Jnb3RQYXNzd29yZCIsInNldElzRm9yZ290UGFzc3dvcmQiLCJyZXNldEVtYWlsU2VudCIsInNldFJlc2V0RW1haWxTZW50Iiwic2hvd0Vycm9yIiwic2V0U2hvd0Vycm9yIiwiaXNVc2VybmFtZUF2YWlsYWJsZSIsInNldElzVXNlcm5hbWVBdmFpbGFibGUiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJlcnJvciIsInNldEVycm9yIiwiYWN0aXZlUHJvdmlkZXIiLCJzZXRBY3RpdmVQcm92aWRlciIsImlzSW1hZ2VVcGxvYWRpbmciLCJzZXRJc0ltYWdlVXBsb2FkaW5nIiwiY3VycmVudFVzZXIiLCJyb3V0ZXIiLCJpc0lwaG9uZSIsInNldElzSXBob25lIiwic2hvd1Bhc3N3b3JkIiwic2V0U2hvd1Bhc3N3b3JkIiwic2hvd0NvbmZpcm1QYXNzd29yZCIsInNldFNob3dDb25maXJtUGFzc3dvcmQiLCJlcnJvcnMiLCJzZXRFcnJvcnMiLCJyb3VuZElkUmVkaXJlY3QiLCJsb2dpblJlZGlyZWN0UGF0aCIsInRlbXBSZWRpcmVjdCIsIm5hdmlnYXRvciIsInVhIiwidXNlckFnZW50IiwidmVuZG9yIiwidGVzdCIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsInVzZXJJZCIsImlkIiwiaGFzVXNlcm5hbWUiLCJyZWdpc3RyYXRpb25Db21wbGV0ZSIsImhlaWdodCIsImJpcnRoZGF0ZSIsIm9uYm9hcmRpbmdDb21wbGV0ZSIsImlzT25ib2FyZGluZ0NvbXBsZXRlIiwib25ib2FyZGluZ1N0YXR1cyIsIm1pc3NpbmciLCJwdXNoIiwiZmVldCIsImN1cnJlbnRTdGVwIiwiaGFzVXBwZXJjYXNlIiwiaGFzTnVtYmVyIiwiaGFzTWluTGVuZ3RoIiwibGVuZ3RoIiwicGFzc3dvcmRzTWF0Y2giLCJxdWl6U3RlcCIsInNldFF1aXpTdGVwIiwicXVpekRhdGEiLCJzZXRRdWl6RGF0YSIsImdlbmRlciIsImluY2hlcyIsIndlaWdodCIsImxldmVsIiwiZ29hbCIsImNoZWNrU3Vic2NyaXB0aW9uQW5kUHJvY2VlZCIsInVzZXIiLCJmaXJlc3RvcmVVc2VyIiwiZmV0Y2hVc2VyRnJvbUZpcmVzdG9yZSIsInVpZCIsInN1YnNjcmlwdGlvblR5cGUiLCJiZXRhVXNlckhhc0FjY2VzcyIsImdldEJldGFVc2VyQWNjZXNzIiwiYmV0YUFjY2VzcyIsInVuc3Vic2NyaWJlZCIsImVyciIsImhhbmRsZVNvY2lhbEF1dGgiLCJwcm92aWRlciIsImFwcGxlUHJvdmlkZXIiLCJhZGRTY29wZSIsInJlc3VsdCIsImRpc3BsYXlOYW1lIiwidXBkYXRlVXNlciIsIm5vblVJQ3VycmVudFVzZXIiLCJFcnJvciIsIm1lc3NhZ2UiLCJnZW5lcmljRXJyb3IiLCJzaWduSW5XaXRoR29vZ2xlIiwibWV0YWRhdGEiLCJwcm92aWRlckRhdGEiLCJpc0VtcHR5IiwidHlwZU9mIiwiZXJyb3JNZXNzYWdlIiwiY29kZSIsImFkZExvZyIsImN1cnJlbnRMb2dzIiwibG9ncyIsImZvckVhY2giLCJyZW1vdmVJdGVtIiwiaXNNb3VudGVkIiwiaGFuZGxlUmVkaXJlY3QiLCJ1cmxQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJzZWFyY2giLCJpc1JlZGlyZWN0aW5nIiwiaGFzIiwiaHJlZiIsImluY2x1ZGVzIiwicGVuZGluZ1Jlc3VsdCIsImNhdGNoIiwiZSIsImNyZWRlbnRpYWwiLCJwcm92aWRlcklkIiwiY3JlYXRpb25UaW1lIiwibGFzdFNpZ25JblRpbWUiLCJpc0FwcGxlU2lnbkluIiwic29tZSIsImhhbmRsZVN1Ym1pdCIsInByZXZlbnREZWZhdWx0IiwiaXNJbml0aWFsU3RlcCIsImlzUGFzc3dvcmRTdGVwIiwiaXNQcm9maWxlU3RlcCIsInNpZ25VcFN0ZXBUeXBlIiwiY3VycmVudEVtYWlsIiwiaGFzUGFzc3dvcmQiLCJwYXNzd29yZExlbmd0aCIsImN1cnJlbnRVc2VyRGF0YSIsInVwZGF0ZWRVc2VyIiwidG9EaWN0aW9uYXJ5IiwidXBkYXRlZEF0IiwiYXV0b0pvaW5DaGFsbGVuZ2UiLCJzaWduSW5XaXRoRW1haWwiLCJ1c2VyRG9jIiwiaGFzQWNjZXNzIiwiaGFuZGxlU2lnbkluU3VjY2VzcyIsIm5ld1VzZXIiLCJjcmVhdGVkQXQiLCJmaXJlc3RvcmVFcnJvciIsImNyZWF0ZVVzZXJFcnJvciIsInJvdW5kSWQiLCJ0eXBlIiwiZXhpc3RpbmdVc2VyQ2hhbGxlbmdlcyIsImZldGNoVXNlckNoYWxsZW5nZXNCeVVzZXJJZCIsImFscmVhZHlKb2luZWQiLCJ1YyIsImNoYWxsZW5nZUlkIiwiZHVyYXRpb24iLCJjb2xsZWN0aW9uIiwiZ2V0Q29sbGVjdGlvbkJ5SWQiLCJjaGFsbGVuZ2UiLCJjaGFsbGVuZ2VUb0pvaW4iLCJqb2luQ2hhbGxlbmdlIiwiaGFuZGxlQ29tcGxldGVRdWl6IiwicmVmcmVzaGVkVXNlciIsInJlbmRlclN1YnNjcmlwdGlvblN0ZXAiLCJkaXYiLCJoMiIsInAiLCJzcGFuIiwib3BlbiIsInJlbmRlclF1aXpQcm9tcHQiLCJxdWVzdGlvbnMiLCJtYXAiLCJvcHRpb24iLCJnZW5kZXJWYWx1ZSIsIk1hbiIsIldvbWFuIiwiU2VsZkRlc2NyaWJlIiwibGFiZWwiLCJpbnB1dCIsInZhbHVlIiwib25DaGFuZ2UiLCJuZXdGZWV0IiwiTnVtYmVyIiwidGFyZ2V0IiwibmV3SGVpZ2h0IiwibWluIiwibWF4IiwicGxhY2Vob2xkZXIiLCJuZXdJbmNoZXMiLCJuZXdXZWlnaHQiLCJuZXdCb2R5V2VpZ2h0Iiwib2xkV2VpZ2h0IiwiYm9keVdlaWdodCIsImxldmVsTWFwIiwiTm92aWNlIiwiSW50ZXJtZWRpYXRlIiwiRXhwZXJ0IiwiZ29hbHNNYXAiLCJMb3NlV2VpZ2h0IiwiR2FpbldlaWdodCIsIlRvbmVVcCIsIkdlbmVyYWxGaXRuZXNzIiwidXBkYXRlZEdvYWxzIiwiZmlsdGVyIiwiZyIsInByZXYiLCJzdmciLCJmaWxsIiwidmlld0JveCIsInN0cm9rZSIsInBhdGgiLCJzdHJva2VMaW5lY2FwIiwic3Ryb2tlTGluZWpvaW4iLCJzdHJva2VXaWR0aCIsImQiLCJzZWxlY3QiLCJkYXRlIiwic2V0TW9udGgiLCJwYXJzZUludCIsIkFycmF5IiwiXyIsImkiLCJ0b0xvY2FsZVN0cmluZyIsIm1vbnRoIiwic2V0RGF0ZSIsInNldEZ1bGxZZWFyIiwieWVhciIsImdldEZ1bGxZZWFyIiwicmVuZGVyUXVpelF1ZXN0aW9uIiwiaXNMYXN0UXVpelN0ZXAiLCJ2YWxpZGF0ZUVtYWlsIiwidmFsaWRhdGVQYXNzd29yZCIsInZhbGlkYXRlVXNlcm5hbWUiLCJoYW5kbGVVc2VybmFtZUNoYW5nZSIsImhhbmRsZUZpbGVDaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJ1cGxvYWRSZXN1bHQiLCJ1cGxvYWRJbWFnZSIsIlByb2ZpbGUiLCJyZW5kZXJQcm9maWxlU3RlcCIsImltZyIsInNyYyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsImFsdCIsInNpemUiLCJhY2NlcHQiLCJyZW5kZXJQYXNzd29yZFN0ZXAiLCJhcmlhLWxhYmVsIiwicmVuZGVyRm9yZ290UGFzc3dvcmQiLCJoYW5kbGVGb3Jnb3RQYXNzd29yZCIsImRpc2FibGVkIiwicmVuZGVySW5pdGlhbFN0ZXAiLCJyZW5kZXJRdWl6TmF2aWdhdGlvbiIsImlzQ3VycmVudFN0ZXBWYWxpZCIsInJlbmRlckN1cnJlbnRTdGVwIiwidG9nZ2xlTW9kZSIsImhhc09uQ2xvc2UiLCJyZXNldFBhc3N3b3JkIiwicXVlcnlSZWRpcmVjdFVybCIsInF1ZXJ5IiwicmVkaXJlY3QiLCJpcGhvbmVCYW5uZXIiLCJhIiwicmVsIiwiZm9ybSIsIm9uU3VibWl0IiwiaGFzVmFsaWRIZWlnaHQiLCJoYXNCaXJ0aGRhdGUiLCJoYXNHZW5kZXIiLCJoYXNMZXZlbCIsImhhc0dvYWxzIiwiaXNBcnJheSIsImlzUmVnaXN0cmF0aW9uTWFya2VkQ29tcGxldGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/components/SignInModal.tsx\n");

/***/ }),

/***/ "./src/components/common/GlobalLoader.tsx":
/*!************************************************!*\
  !*** ./src/components/common/GlobalLoader.tsx ***!
  \************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-redux */ \"react-redux\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([react_redux__WEBPACK_IMPORTED_MODULE_2__]);\nreact_redux__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst GlobalLoader = ()=>{\n    const { isLoading, message } = (0,react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector)((state)=>state.loading);\n    if (!isLoading) {\n        return null;\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-black/70 backdrop-blur-sm\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                className: \"animate-spin h-10 w-10 text-[#DFFD10] mb-4\",\n                xmlns: \"http://www.w3.org/2000/svg\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"circle\", {\n                        className: \"opacity-25\",\n                        cx: \"12\",\n                        cy: \"12\",\n                        r: \"10\",\n                        stroke: \"currentColor\",\n                        strokeWidth: \"4\"\n                    }, void 0, false, {\n                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/common/GlobalLoader.tsx\",\n                        lineNumber: 21,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                        className: \"opacity-75\",\n                        fill: \"currentColor\",\n                        d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                    }, void 0, false, {\n                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/common/GlobalLoader.tsx\",\n                        lineNumber: 29,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/common/GlobalLoader.tsx\",\n                lineNumber: 15,\n                columnNumber: 7\n            }, undefined),\n            message && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                className: \"text-white text-lg font-medium animate-pulse\",\n                children: message\n            }, void 0, false, {\n                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/common/GlobalLoader.tsx\",\n                lineNumber: 38,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/common/GlobalLoader.tsx\",\n        lineNumber: 13,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (GlobalLoader);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jb21tb24vR2xvYmFsTG9hZGVyLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQTBCO0FBQ2dCO0FBRzFDLE1BQU1FLGVBQXlCO0lBQzdCLE1BQU0sRUFBRUMsU0FBUyxFQUFFQyxPQUFPLEVBQUUsR0FBR0gsd0RBQVdBLENBQUMsQ0FBQ0ksUUFBcUJBLE1BQU1DLE9BQU87SUFFOUUsSUFBSSxDQUFDSCxXQUFXO1FBQ2QsT0FBTztJQUNUO0lBRUEscUJBQ0UsOERBQUNJO1FBQUlDLFdBQVU7OzBCQUViLDhEQUFDQztnQkFDQ0QsV0FBVTtnQkFDVkUsT0FBTTtnQkFDTkMsTUFBSztnQkFDTEMsU0FBUTs7a0NBRVIsOERBQUNDO3dCQUNDTCxXQUFVO3dCQUNWTSxJQUFHO3dCQUNIQyxJQUFHO3dCQUNIQyxHQUFFO3dCQUNGQyxRQUFPO3dCQUNQQyxhQUFZOzs7Ozs7a0NBRWQsOERBQUNDO3dCQUNDWCxXQUFVO3dCQUNWRyxNQUFLO3dCQUNMUyxHQUFFOzs7Ozs7Ozs7Ozs7WUFLTGhCLHlCQUNDLDhEQUFDaUI7Z0JBQUViLFdBQVU7MEJBQ1ZKOzs7Ozs7Ozs7Ozs7QUFLWDtBQUVBLGlFQUFlRixZQUFZQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktYXBwLy4vc3JjL2NvbXBvbmVudHMvY29tbW9uL0dsb2JhbExvYWRlci50c3g/YTZiOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlU2VsZWN0b3IgfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgeyBSb290U3RhdGUgfSBmcm9tICcuLi8uLi9yZWR1eC9zdG9yZSc7IC8vIEFkanVzdCBwYXRoIGlmIG5lZWRlZFxuXG5jb25zdCBHbG9iYWxMb2FkZXI6IFJlYWN0LkZDID0gKCkgPT4ge1xuICBjb25zdCB7IGlzTG9hZGluZywgbWVzc2FnZSB9ID0gdXNlU2VsZWN0b3IoKHN0YXRlOiBSb290U3RhdGUpID0+IHN0YXRlLmxvYWRpbmcpO1xuXG4gIGlmICghaXNMb2FkaW5nKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCB6LVsxMDBdIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLWJsYWNrLzcwIGJhY2tkcm9wLWJsdXItc21cIj5cbiAgICAgIHsvKiBTcGlubmVyIFNWRyAqL31cbiAgICAgIDxzdmcgXG4gICAgICAgIGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiBoLTEwIHctMTAgdGV4dC1bI0RGRkQxMF0gbWItNFwiIFxuICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgXG4gICAgICAgIGZpbGw9XCJub25lXCIgXG4gICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIlxuICAgICAgPlxuICAgICAgICA8Y2lyY2xlIFxuICAgICAgICAgIGNsYXNzTmFtZT1cIm9wYWNpdHktMjVcIiBcbiAgICAgICAgICBjeD1cIjEyXCIgXG4gICAgICAgICAgY3k9XCIxMlwiIFxuICAgICAgICAgIHI9XCIxMFwiIFxuICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIFxuICAgICAgICAgIHN0cm9rZVdpZHRoPVwiNFwiXG4gICAgICAgID48L2NpcmNsZT5cbiAgICAgICAgPHBhdGggXG4gICAgICAgICAgY2xhc3NOYW1lPVwib3BhY2l0eS03NVwiIFxuICAgICAgICAgIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBcbiAgICAgICAgICBkPVwiTTQgMTJhOCA4IDAgMDE4LThWMEM1LjM3MyAwIDAgNS4zNzMgMCAxMmg0em0yIDUuMjkxQTcuOTYyIDcuOTYyIDAgMDE0IDEySDBjMCAzLjA0MiAxLjEzNSA1LjgyNCAzIDcuOTM4bDMtMi42NDd6XCJcbiAgICAgICAgPjwvcGF0aD5cbiAgICAgIDwvc3ZnPlxuICAgICAgXG4gICAgICB7LyogT3B0aW9uYWwgTG9hZGluZyBNZXNzYWdlICovfVxuICAgICAge21lc3NhZ2UgJiYgKFxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlIHRleHQtbGcgZm9udC1tZWRpdW0gYW5pbWF0ZS1wdWxzZVwiPlxuICAgICAgICAgIHttZXNzYWdlfVxuICAgICAgICA8L3A+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgR2xvYmFsTG9hZGVyOyAiXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTZWxlY3RvciIsIkdsb2JhbExvYWRlciIsImlzTG9hZGluZyIsIm1lc3NhZ2UiLCJzdGF0ZSIsImxvYWRpbmciLCJkaXYiLCJjbGFzc05hbWUiLCJzdmciLCJ4bWxucyIsImZpbGwiLCJ2aWV3Qm94IiwiY2lyY2xlIiwiY3giLCJjeSIsInIiLCJzdHJva2UiLCJzdHJva2VXaWR0aCIsInBhdGgiLCJkIiwicCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/common/GlobalLoader.tsx\n");

/***/ }),

/***/ "./src/components/common/Toast.tsx":
/*!*****************************************!*\
  !*** ./src/components/common/Toast.tsx ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-redux */ \"react-redux\");\n/* harmony import */ var _redux_toastSlice__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../redux/toastSlice */ \"./src/redux/toastSlice.ts\");\n/* harmony import */ var _barrel_optimize_names_AlertTriangle_Award_CheckCircle_Info_XCircle_lucide_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=AlertTriangle,Award,CheckCircle,Info,XCircle!=!lucide-react */ \"__barrel_optimize__?names=AlertTriangle,Award,CheckCircle,Info,XCircle!=!./node_modules/lucide-react/dist/esm/lucide-react.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([react_redux__WEBPACK_IMPORTED_MODULE_2__, _redux_toastSlice__WEBPACK_IMPORTED_MODULE_3__]);\n([react_redux__WEBPACK_IMPORTED_MODULE_2__, _redux_toastSlice__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n // Adjust path if needed\n\n// CSS for toast animation (similar to inactivityCheck.tsx)\nconst toastAnimation = `\n  @keyframes fadeInUp { 0% { opacity: 0; transform: translateY(20px) scale(0.95); } 100% { opacity: 1; transform: translateY(0) scale(1); } }\n  @keyframes fadeOutDown { 0% { opacity: 1; transform: translateY(0) scale(1); } 100% { opacity: 0; transform: translateY(20px) scale(0.95); } }\n  .animate-fade-in-up { animation: fadeInUp 0.3s ease-out forwards; }\n  .animate-fade-out-down { animation: fadeOutDown 0.3s ease-in forwards; }\n`;\nconst Toast = ()=>{\n    const dispatch = (0,react_redux__WEBPACK_IMPORTED_MODULE_2__.useDispatch)();\n    const { isVisible, message, type, duration } = (0,react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector)((state)=>state.toast);\n    const timeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Clear previous timeout if a new toast is shown before the old one hides\n        if (timeoutRef.current) {\n            clearTimeout(timeoutRef.current);\n            timeoutRef.current = null;\n        }\n        if (isVisible) {\n            // Set a timeout to hide the toast after the specified duration\n            timeoutRef.current = setTimeout(()=>{\n                dispatch((0,_redux_toastSlice__WEBPACK_IMPORTED_MODULE_3__.hideToast)());\n            }, duration);\n        }\n        // Cleanup timeout on component unmount or when isVisible changes\n        return ()=>{\n            if (timeoutRef.current) {\n                clearTimeout(timeoutRef.current);\n            }\n        };\n    }, [\n        isVisible,\n        duration,\n        dispatch\n    ]);\n    if (!isVisible) {\n        return null;\n    }\n    // Determine base background color and icon based on type\n    let baseBgColor = \"bg-gray-800\";\n    let baseTextColor = \"text-white\";\n    let IconComponent = _barrel_optimize_names_AlertTriangle_Award_CheckCircle_Info_XCircle_lucide_react__WEBPACK_IMPORTED_MODULE_4__.Info;\n    switch(type){\n        case \"success\":\n            baseBgColor = \"bg-green-600\";\n            IconComponent = _barrel_optimize_names_AlertTriangle_Award_CheckCircle_Info_XCircle_lucide_react__WEBPACK_IMPORTED_MODULE_4__.CheckCircle;\n            break;\n        case \"error\":\n            baseBgColor = \"bg-red-600\";\n            IconComponent = _barrel_optimize_names_AlertTriangle_Award_CheckCircle_Info_XCircle_lucide_react__WEBPACK_IMPORTED_MODULE_4__.XCircle;\n            break;\n        case \"warning\":\n            baseBgColor = \"bg-yellow-500\";\n            baseTextColor = \"text-black\";\n            IconComponent = _barrel_optimize_names_AlertTriangle_Award_CheckCircle_Info_XCircle_lucide_react__WEBPACK_IMPORTED_MODULE_4__.AlertTriangle;\n            break;\n        case \"award\":\n            baseBgColor = \"bg-gradient-to-br from-yellow-400 via-amber-500 to-yellow-600\";\n            baseTextColor = \"text-black\";\n            IconComponent = _barrel_optimize_names_AlertTriangle_Award_CheckCircle_Info_XCircle_lucide_react__WEBPACK_IMPORTED_MODULE_4__.Award;\n            break;\n        case \"info\":\n        default:\n            baseBgColor = \"bg-blue-600\";\n            IconComponent = _barrel_optimize_names_AlertTriangle_Award_CheckCircle_Info_XCircle_lucide_react__WEBPACK_IMPORTED_MODULE_4__.Info;\n            break;\n    }\n    // Determine positioning and final styles\n    const isAward = type === \"award\";\n    const positionClasses = isAward ? \"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2\" : \"bottom-4 right-4 md:bottom-8 md:right-8\";\n    const awardSpecificClasses = isAward ? \"border-2 border-yellow-300 text-black\" : baseTextColor;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"style\", {\n                children: toastAnimation\n            }, void 0, false, {\n                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/common/Toast.tsx\",\n                lineNumber: 89,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: `fixed z-[101] p-4 rounded-lg shadow-xl flex items-center gap-3 \n          ${positionClasses} \n          ${baseBgColor} \n          ${awardSpecificClasses} \n          animate-fade-in-up`,\n                role: \"alert\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(IconComponent, {\n                        className: `h-6 w-6 flex-shrink-0 ${isAward ? \"animate-pulse\" : \"\"}`\n                    }, void 0, false, {\n                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/common/Toast.tsx\",\n                        lineNumber: 98,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"text-sm font-medium\",\n                        children: message\n                    }, void 0, false, {\n                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/common/Toast.tsx\",\n                        lineNumber: 99,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>dispatch((0,_redux_toastSlice__WEBPACK_IMPORTED_MODULE_3__.hideToast)()),\n                        className: `ml-auto -mr-1 -my-1 p-1 rounded-md focus:outline-none focus:ring-2 focus:ring-white/50 \n            ${isAward ? \"hover:bg-black/10\" : \"hover:bg-black/20\"}`,\n                        \"aria-label\": \"Dismiss\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                            className: \"h-4 w-4\",\n                            fill: \"currentColor\",\n                            viewBox: \"0 0 20 20\",\n                            xmlns: \"http://www.w3.org/2000/svg\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                fillRule: \"evenodd\",\n                                d: \"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\",\n                                clipRule: \"evenodd\"\n                            }, void 0, false, {\n                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/common/Toast.tsx\",\n                                lineNumber: 106,\n                                columnNumber: 111\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/common/Toast.tsx\",\n                            lineNumber: 106,\n                            columnNumber: 11\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/common/Toast.tsx\",\n                        lineNumber: 100,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/components/common/Toast.tsx\",\n                lineNumber: 90,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Toast);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9jb21tb24vVG9hc3QudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFpRDtBQUNNO0FBRUosQ0FBQyx3QkFBd0I7QUFDSTtBQUVoRiwyREFBMkQ7QUFDM0QsTUFBTVcsaUJBQWlCLENBQUM7Ozs7O0FBS3hCLENBQUM7QUFFRCxNQUFNQyxRQUFrQjtJQUN0QixNQUFNQyxXQUFXVCx3REFBV0E7SUFDNUIsTUFBTSxFQUFFVSxTQUFTLEVBQUVDLE9BQU8sRUFBRUMsSUFBSSxFQUFFQyxRQUFRLEVBQUUsR0FBR2Qsd0RBQVdBLENBQUMsQ0FBQ2UsUUFBcUJBLE1BQU1DLEtBQUs7SUFDNUYsTUFBTUMsYUFBYWxCLDZDQUFNQSxDQUF3QjtJQUVqREQsZ0RBQVNBLENBQUM7UUFDUiwwRUFBMEU7UUFDMUUsSUFBSW1CLFdBQVdDLE9BQU8sRUFBRTtZQUN0QkMsYUFBYUYsV0FBV0MsT0FBTztZQUMvQkQsV0FBV0MsT0FBTyxHQUFHO1FBQ3ZCO1FBRUEsSUFBSVAsV0FBVztZQUNiLCtEQUErRDtZQUMvRE0sV0FBV0MsT0FBTyxHQUFHRSxXQUFXO2dCQUM5QlYsU0FBU1IsNERBQVNBO1lBQ3BCLEdBQUdZO1FBQ0w7UUFFQSxpRUFBaUU7UUFDakUsT0FBTztZQUNMLElBQUlHLFdBQVdDLE9BQU8sRUFBRTtnQkFDdEJDLGFBQWFGLFdBQVdDLE9BQU87WUFDakM7UUFDRjtJQUNGLEdBQUc7UUFBQ1A7UUFBV0c7UUFBVUo7S0FBUztJQUVsQyxJQUFJLENBQUNDLFdBQVc7UUFDZCxPQUFPO0lBQ1Q7SUFFQSx5REFBeUQ7SUFDekQsSUFBSVUsY0FBYztJQUNsQixJQUFJQyxnQkFBZ0I7SUFDcEIsSUFBSUMsZ0JBQWdCbEIsa0hBQUlBO0lBRXhCLE9BQVFRO1FBQ04sS0FBSztZQUNIUSxjQUFjO1lBQ2RFLGdCQUFnQnBCLHlIQUFXQTtZQUMzQjtRQUNGLEtBQUs7WUFDSGtCLGNBQWM7WUFDZEUsZ0JBQWdCbkIscUhBQU9BO1lBQ3ZCO1FBQ0YsS0FBSztZQUNIaUIsY0FBYztZQUNkQyxnQkFBZ0I7WUFDaEJDLGdCQUFnQmpCLDJIQUFhQTtZQUM3QjtRQUNGLEtBQUs7WUFDSGUsY0FBYztZQUNkQyxnQkFBZ0I7WUFDaEJDLGdCQUFnQmhCLG1IQUFLQTtZQUNyQjtRQUNGLEtBQUs7UUFDTDtZQUNFYyxjQUFjO1lBQ2RFLGdCQUFnQmxCLGtIQUFJQTtZQUNwQjtJQUNKO0lBRUEseUNBQXlDO0lBQ3pDLE1BQU1tQixVQUFVWCxTQUFTO0lBQ3pCLE1BQU1ZLGtCQUFrQkQsVUFDcEIsdURBQ0E7SUFFSixNQUFNRSx1QkFBdUJGLFVBQ3pCLDBDQUNBRjtJQUVKLHFCQUNFOzswQkFDRSw4REFBQ0s7MEJBQU9uQjs7Ozs7OzBCQUNSLDhEQUFDb0I7Z0JBQ0NDLFdBQVcsQ0FBQztVQUNWLEVBQUVKLGdCQUFnQjtVQUNsQixFQUFFSixZQUFZO1VBQ2QsRUFBRUsscUJBQXFCOzRCQUNMLENBQUM7Z0JBQ3JCSSxNQUFLOztrQ0FFTCw4REFBQ1A7d0JBQWNNLFdBQVcsQ0FBQyxzQkFBc0IsRUFBRUwsVUFBVSxrQkFBa0IsR0FBRyxDQUFDOzs7Ozs7a0NBQ25GLDhEQUFDTzt3QkFBS0YsV0FBVTtrQ0FBdUJqQjs7Ozs7O2tDQUN2Qyw4REFBQ29CO3dCQUNDQyxTQUFTLElBQU12QixTQUFTUiw0REFBU0E7d0JBQ2pDMkIsV0FBVyxDQUFDO1lBQ1YsRUFBRUwsVUFBVSxzQkFBc0Isb0JBQW9CLENBQUM7d0JBQ3pEVSxjQUFXO2tDQUVYLDRFQUFDQzs0QkFBSU4sV0FBVTs0QkFBVU8sTUFBSzs0QkFBZUMsU0FBUTs0QkFBWUMsT0FBTTtzQ0FBNkIsNEVBQUNDO2dDQUFLQyxVQUFTO2dDQUFVQyxHQUFFO2dDQUFxTUMsVUFBUzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBS3ZWO0FBRUEsaUVBQWVqQyxLQUFLQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktYXBwLy4vc3JjL2NvbXBvbmVudHMvY29tbW9uL1RvYXN0LnRzeD80ODFmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVNlbGVjdG9yLCB1c2VEaXNwYXRjaCB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCB7IFJvb3RTdGF0ZSB9IGZyb20gJy4uLy4uL3JlZHV4L3N0b3JlJzsgLy8gQWRqdXN0IHBhdGggaWYgbmVlZGVkXG5pbXBvcnQgeyBoaWRlVG9hc3QgfSBmcm9tICcuLi8uLi9yZWR1eC90b2FzdFNsaWNlJzsgLy8gQWRqdXN0IHBhdGggaWYgbmVlZGVkXG5pbXBvcnQgeyBDaGVja0NpcmNsZSwgWENpcmNsZSwgSW5mbywgQWxlcnRUcmlhbmdsZSwgQXdhcmQgfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuXG4vLyBDU1MgZm9yIHRvYXN0IGFuaW1hdGlvbiAoc2ltaWxhciB0byBpbmFjdGl2aXR5Q2hlY2sudHN4KVxuY29uc3QgdG9hc3RBbmltYXRpb24gPSBgXG4gIEBrZXlmcmFtZXMgZmFkZUluVXAgeyAwJSB7IG9wYWNpdHk6IDA7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgyMHB4KSBzY2FsZSgwLjk1KTsgfSAxMDAlIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApIHNjYWxlKDEpOyB9IH1cbiAgQGtleWZyYW1lcyBmYWRlT3V0RG93biB7IDAlIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApIHNjYWxlKDEpOyB9IDEwMCUgeyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMjBweCkgc2NhbGUoMC45NSk7IH0gfVxuICAuYW5pbWF0ZS1mYWRlLWluLXVwIHsgYW5pbWF0aW9uOiBmYWRlSW5VcCAwLjNzIGVhc2Utb3V0IGZvcndhcmRzOyB9XG4gIC5hbmltYXRlLWZhZGUtb3V0LWRvd24geyBhbmltYXRpb246IGZhZGVPdXREb3duIDAuM3MgZWFzZS1pbiBmb3J3YXJkczsgfVxuYDtcblxuY29uc3QgVG9hc3Q6IFJlYWN0LkZDID0gKCkgPT4ge1xuICBjb25zdCBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7XG4gIGNvbnN0IHsgaXNWaXNpYmxlLCBtZXNzYWdlLCB0eXBlLCBkdXJhdGlvbiB9ID0gdXNlU2VsZWN0b3IoKHN0YXRlOiBSb290U3RhdGUpID0+IHN0YXRlLnRvYXN0KTtcbiAgY29uc3QgdGltZW91dFJlZiA9IHVzZVJlZjxOb2RlSlMuVGltZW91dCB8IG51bGw+KG51bGwpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gQ2xlYXIgcHJldmlvdXMgdGltZW91dCBpZiBhIG5ldyB0b2FzdCBpcyBzaG93biBiZWZvcmUgdGhlIG9sZCBvbmUgaGlkZXNcbiAgICBpZiAodGltZW91dFJlZi5jdXJyZW50KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dFJlZi5jdXJyZW50KTtcbiAgICAgIHRpbWVvdXRSZWYuY3VycmVudCA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKGlzVmlzaWJsZSkge1xuICAgICAgLy8gU2V0IGEgdGltZW91dCB0byBoaWRlIHRoZSB0b2FzdCBhZnRlciB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uXG4gICAgICB0aW1lb3V0UmVmLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZGlzcGF0Y2goaGlkZVRvYXN0KCkpO1xuICAgICAgfSwgZHVyYXRpb24pO1xuICAgIH1cblxuICAgIC8vIENsZWFudXAgdGltZW91dCBvbiBjb21wb25lbnQgdW5tb3VudCBvciB3aGVuIGlzVmlzaWJsZSBjaGFuZ2VzXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmICh0aW1lb3V0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRSZWYuY3VycmVudCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2lzVmlzaWJsZSwgZHVyYXRpb24sIGRpc3BhdGNoXSk7XG5cbiAgaWYgKCFpc1Zpc2libGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIERldGVybWluZSBiYXNlIGJhY2tncm91bmQgY29sb3IgYW5kIGljb24gYmFzZWQgb24gdHlwZVxuICBsZXQgYmFzZUJnQ29sb3IgPSAnYmctZ3JheS04MDAnO1xuICBsZXQgYmFzZVRleHRDb2xvciA9ICd0ZXh0LXdoaXRlJztcbiAgbGV0IEljb25Db21wb25lbnQgPSBJbmZvO1xuXG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ3N1Y2Nlc3MnOlxuICAgICAgYmFzZUJnQ29sb3IgPSAnYmctZ3JlZW4tNjAwJztcbiAgICAgIEljb25Db21wb25lbnQgPSBDaGVja0NpcmNsZTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgIGJhc2VCZ0NvbG9yID0gJ2JnLXJlZC02MDAnO1xuICAgICAgSWNvbkNvbXBvbmVudCA9IFhDaXJjbGU7XG4gICAgICBicmVhaztcbiAgICBjYXNlICd3YXJuaW5nJzpcbiAgICAgIGJhc2VCZ0NvbG9yID0gJ2JnLXllbGxvdy01MDAnO1xuICAgICAgYmFzZVRleHRDb2xvciA9ICd0ZXh0LWJsYWNrJztcbiAgICAgIEljb25Db21wb25lbnQgPSBBbGVydFRyaWFuZ2xlO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnYXdhcmQnOlxuICAgICAgYmFzZUJnQ29sb3IgPSAnYmctZ3JhZGllbnQtdG8tYnIgZnJvbS15ZWxsb3ctNDAwIHZpYS1hbWJlci01MDAgdG8teWVsbG93LTYwMCc7XG4gICAgICBiYXNlVGV4dENvbG9yID0gJ3RleHQtYmxhY2snO1xuICAgICAgSWNvbkNvbXBvbmVudCA9IEF3YXJkO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnaW5mbyc6XG4gICAgZGVmYXVsdDpcbiAgICAgIGJhc2VCZ0NvbG9yID0gJ2JnLWJsdWUtNjAwJztcbiAgICAgIEljb25Db21wb25lbnQgPSBJbmZvO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICAvLyBEZXRlcm1pbmUgcG9zaXRpb25pbmcgYW5kIGZpbmFsIHN0eWxlc1xuICBjb25zdCBpc0F3YXJkID0gdHlwZSA9PT0gJ2F3YXJkJztcbiAgY29uc3QgcG9zaXRpb25DbGFzc2VzID0gaXNBd2FyZCBcbiAgICA/ICd0b3AtMS8yIGxlZnQtMS8yIC10cmFuc2xhdGUteC0xLzIgLXRyYW5zbGF0ZS15LTEvMidcbiAgICA6ICdib3R0b20tNCByaWdodC00IG1kOmJvdHRvbS04IG1kOnJpZ2h0LTgnO1xuXG4gIGNvbnN0IGF3YXJkU3BlY2lmaWNDbGFzc2VzID0gaXNBd2FyZFxuICAgID8gJ2JvcmRlci0yIGJvcmRlci15ZWxsb3ctMzAwIHRleHQtYmxhY2snXG4gICAgOiBiYXNlVGV4dENvbG9yO1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxzdHlsZT57dG9hc3RBbmltYXRpb259PC9zdHlsZT5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPXtgZml4ZWQgei1bMTAxXSBwLTQgcm91bmRlZC1sZyBzaGFkb3cteGwgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgXG4gICAgICAgICAgJHtwb3NpdGlvbkNsYXNzZXN9IFxuICAgICAgICAgICR7YmFzZUJnQ29sb3J9IFxuICAgICAgICAgICR7YXdhcmRTcGVjaWZpY0NsYXNzZXN9IFxuICAgICAgICAgIGFuaW1hdGUtZmFkZS1pbi11cGB9XG4gICAgICAgIHJvbGU9XCJhbGVydFwiXG4gICAgICA+XG4gICAgICAgIDxJY29uQ29tcG9uZW50IGNsYXNzTmFtZT17YGgtNiB3LTYgZmxleC1zaHJpbmstMCAke2lzQXdhcmQgPyAnYW5pbWF0ZS1wdWxzZScgOiAnJ31gfSAvPlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtXCI+e21lc3NhZ2V9PC9zcGFuPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gZGlzcGF0Y2goaGlkZVRvYXN0KCkpfVxuICAgICAgICAgIGNsYXNzTmFtZT17YG1sLWF1dG8gLW1yLTEgLW15LTEgcC0xIHJvdW5kZWQtbWQgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLXdoaXRlLzUwIFxuICAgICAgICAgICAgJHtpc0F3YXJkID8gJ2hvdmVyOmJnLWJsYWNrLzEwJyA6ICdob3ZlcjpiZy1ibGFjay8yMCd9YH1cbiAgICAgICAgICBhcmlhLWxhYmVsPVwiRGlzbWlzc1wiXG4gICAgICAgID5cbiAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cImgtNCB3LTRcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBmaWxsUnVsZT1cImV2ZW5vZGRcIiBkPVwiTTQuMjkzIDQuMjkzYTEgMSAwIDAxMS40MTQgMEwxMCA4LjU4Nmw0LjI5My00LjI5M2ExIDEgMCAxMTEuNDE0IDEuNDE0TDExLjQxNCAxMGw0LjI5MyA0LjI5M2ExIDEgMCAwMS0xLjQxNCAxLjQxNEwxMCAxMS40MTRsLTQuMjkzIDQuMjkzYTEgMSAwIDAxLTEuNDE0LTEuNDE0TDguNTg2IDEwIDQuMjkzIDUuNzA3YTEgMSAwIDAxMC0xLjQxNHpcIiBjbGlwUnVsZT1cImV2ZW5vZGRcIj48L3BhdGg+PC9zdmc+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC8+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBUb2FzdDsgIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlU2VsZWN0b3IiLCJ1c2VEaXNwYXRjaCIsImhpZGVUb2FzdCIsIkNoZWNrQ2lyY2xlIiwiWENpcmNsZSIsIkluZm8iLCJBbGVydFRyaWFuZ2xlIiwiQXdhcmQiLCJ0b2FzdEFuaW1hdGlvbiIsIlRvYXN0IiwiZGlzcGF0Y2giLCJpc1Zpc2libGUiLCJtZXNzYWdlIiwidHlwZSIsImR1cmF0aW9uIiwic3RhdGUiLCJ0b2FzdCIsInRpbWVvdXRSZWYiLCJjdXJyZW50IiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImJhc2VCZ0NvbG9yIiwiYmFzZVRleHRDb2xvciIsIkljb25Db21wb25lbnQiLCJpc0F3YXJkIiwicG9zaXRpb25DbGFzc2VzIiwiYXdhcmRTcGVjaWZpY0NsYXNzZXMiLCJzdHlsZSIsImRpdiIsImNsYXNzTmFtZSIsInJvbGUiLCJzcGFuIiwiYnV0dG9uIiwib25DbGljayIsImFyaWEtbGFiZWwiLCJzdmciLCJmaWxsIiwidmlld0JveCIsInhtbG5zIiwicGF0aCIsImZpbGxSdWxlIiwiZCIsImNsaXBSdWxlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/common/Toast.tsx\n");

/***/ }),

/***/ "./src/hooks/useUser.ts":
/*!******************************!*\
  !*** ./src/hooks/useUser.ts ***!
  \******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useUser: () => (/* binding */ useUser),\n/* harmony export */   useUserLoading: () => (/* binding */ useUserLoading)\n/* harmony export */ });\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-redux */ \"react-redux\");\n/* harmony import */ var _api_firebase_user_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/firebase/user/types */ \"./src/api/firebase/user/types.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([react_redux__WEBPACK_IMPORTED_MODULE_0__]);\nreact_redux__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nconst useUser = ()=>{\n    const userDict = (0,react_redux__WEBPACK_IMPORTED_MODULE_0__.useSelector)((state)=>state.user.currentUser);\n    return userDict ? new _api_firebase_user_types__WEBPACK_IMPORTED_MODULE_1__.User(userDict.id, userDict) : null;\n};\nconst useUserLoading = ()=>{\n    return (0,react_redux__WEBPACK_IMPORTED_MODULE_0__.useSelector)((state)=>state.user.loading);\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaG9va3MvdXNlVXNlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTBDO0FBRVE7QUFFM0MsTUFBTUUsVUFBVTtJQUNyQixNQUFNQyxXQUFXSCx3REFBV0EsQ0FBQyxDQUFDSSxRQUFxQkEsTUFBTUMsSUFBSSxDQUFDQyxXQUFXO0lBRXpFLE9BQU9ILFdBQVcsSUFBSUYsMERBQUlBLENBQUNFLFNBQVNJLEVBQUUsRUFBRUosWUFBWTtBQUN0RCxFQUFFO0FBRUssTUFBTUssaUJBQWlCO0lBQzVCLE9BQU9SLHdEQUFXQSxDQUFDLENBQUNJLFFBQXFCQSxNQUFNQyxJQUFJLENBQUNJLE9BQU87QUFDN0QsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL215LWFwcC8uL3NyYy9ob29rcy91c2VVc2VyLnRzPzJiYmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU2VsZWN0b3IgfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgeyBSb290U3RhdGUgfSBmcm9tICcuLi9yZWR1eC9zdG9yZSc7XG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnLi4vYXBpL2ZpcmViYXNlL3VzZXIvdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgdXNlVXNlciA9ICgpOiBVc2VyIHwgbnVsbCA9PiB7XG4gIGNvbnN0IHVzZXJEaWN0ID0gdXNlU2VsZWN0b3IoKHN0YXRlOiBSb290U3RhdGUpID0+IHN0YXRlLnVzZXIuY3VycmVudFVzZXIpO1xuICBcbiAgcmV0dXJuIHVzZXJEaWN0ID8gbmV3IFVzZXIodXNlckRpY3QuaWQsIHVzZXJEaWN0KSA6IG51bGw7XG59O1xuXG5leHBvcnQgY29uc3QgdXNlVXNlckxvYWRpbmcgPSAoKSA9PiB7XG4gIHJldHVybiB1c2VTZWxlY3Rvcigoc3RhdGU6IFJvb3RTdGF0ZSkgPT4gc3RhdGUudXNlci5sb2FkaW5nKTtcbn07Il0sIm5hbWVzIjpbInVzZVNlbGVjdG9yIiwiVXNlciIsInVzZVVzZXIiLCJ1c2VyRGljdCIsInN0YXRlIiwidXNlciIsImN1cnJlbnRVc2VyIiwiaWQiLCJ1c2VVc2VyTG9hZGluZyIsImxvYWRpbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/hooks/useUser.ts\n");

/***/ }),

/***/ "./src/pages/_app.tsx":
/*!****************************!*\
  !*** ./src/pages/_app.tsx ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-redux */ \"react-redux\");\n/* harmony import */ var _redux_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../redux/store */ \"./src/redux/store.ts\");\n/* harmony import */ var redux_persist_integration_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! redux-persist/integration/react */ \"redux-persist/integration/react\");\n/* harmony import */ var redux_persist_integration_react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(redux_persist_integration_react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _components_Footer_GlisteningButton_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/Footer/GlisteningButton.css */ \"./src/components/Footer/GlisteningButton.css\");\n/* harmony import */ var _components_Footer_GlisteningButton_css__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_components_Footer_GlisteningButton_css__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _index_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../index.css */ \"./src/index.css\");\n/* harmony import */ var _index_css__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_index_css__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _styles_animations_css__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../styles/animations.css */ \"./src/styles/animations.css\");\n/* harmony import */ var _styles_animations_css__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_styles_animations_css__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_script__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/script */ \"./node_modules/next/script.js\");\n/* harmony import */ var next_script__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_script__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var mixpanel_browser__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! mixpanel-browser */ \"mixpanel-browser\");\n/* harmony import */ var mixpanel_browser__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(mixpanel_browser__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _components_AuthWrapper__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/AuthWrapper */ \"./src/components/AuthWrapper.tsx\");\n/* harmony import */ var _components_common_Toast__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../components/common/Toast */ \"./src/components/common/Toast.tsx\");\n/* harmony import */ var _components_common_GlobalLoader__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../components/common/GlobalLoader */ \"./src/components/common/GlobalLoader.tsx\");\n/* harmony import */ var _components_ErrorBoundary__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../components/ErrorBoundary */ \"./src/components/ErrorBoundary.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([react_redux__WEBPACK_IMPORTED_MODULE_2__, _redux_store__WEBPACK_IMPORTED_MODULE_3__, _components_AuthWrapper__WEBPACK_IMPORTED_MODULE_10__, _components_common_Toast__WEBPACK_IMPORTED_MODULE_11__, _components_common_GlobalLoader__WEBPACK_IMPORTED_MODULE_12__]);\n([react_redux__WEBPACK_IMPORTED_MODULE_2__, _redux_store__WEBPACK_IMPORTED_MODULE_3__, _components_AuthWrapper__WEBPACK_IMPORTED_MODULE_10__, _components_common_Toast__WEBPACK_IMPORTED_MODULE_11__, _components_common_GlobalLoader__WEBPACK_IMPORTED_MODULE_12__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Only import in development mode\nconst isDev = \"development\" === \"development\";\nif (isDev) {\n    __webpack_require__(/*! ../utils/envDebug */ \"./src/utils/envDebug.ts\");\n}\n// Helper component to handle Mixpanel logic, since hooks can only be called inside components\nconst MixpanelInitializer = ()=>{\n    const currentUser = (0,react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector)((state)=>state.user.currentUser);\n    // Initialize Mixpanel on mount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const mixpanelToken = \"a1fcfd3ab679d9f785be988d7ab5886f\";\n        if (mixpanelToken) {\n            mixpanel_browser__WEBPACK_IMPORTED_MODULE_9___default().init(mixpanelToken, {\n                debug: \"development\" === \"development\",\n                track_pageview: true,\n                persistence: \"localStorage\"\n            });\n            console.log(\"[Mixpanel] Initialized\");\n            // Register super properties that apply to all web events\n            mixpanel_browser__WEBPACK_IMPORTED_MODULE_9___default().register({\n                platform: \"web\"\n            });\n        } else {\n            console.warn(\"[Mixpanel] Project token not found. Tracking disabled.\");\n        }\n    }, []);\n    // Identify user when available or changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (currentUser?.id) {\n            mixpanel_browser__WEBPACK_IMPORTED_MODULE_9___default().identify(currentUser.id);\n            mixpanel_browser__WEBPACK_IMPORTED_MODULE_9___default().people.set({\n                $email: currentUser.email,\n                $name: currentUser.displayName,\n                username: currentUser.username,\n                registrationComplete: currentUser.registrationComplete\n            });\n            console.log(\"[Mixpanel] User identified:\", currentUser.id);\n        } else {\n            console.log(\"[Mixpanel] No user identified.\");\n        }\n    }, [\n        currentUser\n    ]);\n    return null;\n};\nconst MyApp = ({ Component, pageProps })=>{\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Log a reminder about environment debugging in development mode\n        if (isDev && \"undefined\" !== \"undefined\") {}\n    }, []);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_script__WEBPACK_IMPORTED_MODULE_8___default()), {\n                id: \"tiktok-pixel\",\n                strategy: \"afterInteractive\",\n                children: `\n          !function (w, d, t) {\n            w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=[\"page\",\"track\",\"identify\",\"instances\",\"debug\",\"on\",\"off\",\"once\",\"ready\",\"alias\",\"group\",\"enableCookie\",\"disableCookie\",\"holdConsent\",\"revokeConsent\",\"grantConsent\"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))};};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e;},ttq.load=function(e,n){var r=\"https://analytics.tiktok.com/i18n/pixel/events.js\",o=n&&n.partner;ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=r,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};n=document.createElement(\"script\");n.type=\"text/javascript\",n.async=!0,n.src=r+\"?sdkid=\"+e+\"&lib=\"+t;e=document.getElementsByTagName(\"script\")[0];e.parentNode.insertBefore(n,e)};\n            ttq.load('D03A763C77UE0J0RV17G');\n            ttq.page();\n          }(window, document, 'ttq');\n        `\n            }, void 0, false, {\n                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/_app.tsx\",\n                lineNumber: 79,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_redux__WEBPACK_IMPORTED_MODULE_2__.Provider, {\n                store: _redux_store__WEBPACK_IMPORTED_MODULE_3__.store,\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ErrorBoundary__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                    fallbackRender: (error)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            style: {\n                                padding: \"20px\",\n                                textAlign: \"center\",\n                                color: \"white\",\n                                backgroundColor: \"black\",\n                                minHeight: \"100vh\"\n                            },\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                    children: \"Application Error\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/_app.tsx\",\n                                    lineNumber: 93,\n                                    columnNumber: 13\n                                }, void 0),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    children: \"We've encountered an unexpected issue. Please try again later.\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/_app.tsx\",\n                                    lineNumber: 94,\n                                    columnNumber: 13\n                                }, void 0),\n                                 true && error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"pre\", {\n                                    style: {\n                                        marginTop: \"20px\",\n                                        textAlign: \"left\",\n                                        background: \"#333\",\n                                        padding: \"10px\",\n                                        borderRadius: \"5px\",\n                                        color: \"#ffcccc\"\n                                    },\n                                    children: error.toString()\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/_app.tsx\",\n                                    lineNumber: 96,\n                                    columnNumber: 15\n                                }, void 0)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/_app.tsx\",\n                            lineNumber: 92,\n                            columnNumber: 11\n                        }, void 0),\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(redux_persist_integration_react__WEBPACK_IMPORTED_MODULE_4__.PersistGate, {\n                        loading: null,\n                        persistor: _redux_store__WEBPACK_IMPORTED_MODULE_3__.persistor,\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MixpanelInitializer, {}, void 0, false, {\n                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/_app.tsx\",\n                                lineNumber: 103,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AuthWrapper__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Component, {\n                                    ...pageProps\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/_app.tsx\",\n                                    lineNumber: 105,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/_app.tsx\",\n                                lineNumber: 104,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_common_Toast__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {}, void 0, false, {\n                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/_app.tsx\",\n                                lineNumber: 107,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_common_GlobalLoader__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {}, void 0, false, {\n                                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/_app.tsx\",\n                                lineNumber: 108,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/_app.tsx\",\n                        lineNumber: 102,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/_app.tsx\",\n                    lineNumber: 91,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/_app.tsx\",\n                lineNumber: 90,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MyApp);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cmNlcyI6WyJ3ZWJwYWNrOi8vbXktYXBwLy4vc3JjL3BhZ2VzL19hcHAudHN4P2Y5ZDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB0eXBlIHsgQXBwUHJvcHMgfSBmcm9tICduZXh0L2FwcCc7XG5pbXBvcnQgeyBQcm92aWRlciwgdXNlU2VsZWN0b3IgfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgeyBzdG9yZSwgcGVyc2lzdG9yIH0gZnJvbSAnLi4vcmVkdXgvc3RvcmUnOyBcbmltcG9ydCB7IFBlcnNpc3RHYXRlIH0gZnJvbSAncmVkdXgtcGVyc2lzdC9pbnRlZ3JhdGlvbi9yZWFjdCc7XG5pbXBvcnQgJy4uL2NvbXBvbmVudHMvRm9vdGVyL0dsaXN0ZW5pbmdCdXR0b24uY3NzJztcbmltcG9ydCAnLi4vaW5kZXguY3NzJztcbmltcG9ydCAnLi4vc3R5bGVzL2FuaW1hdGlvbnMuY3NzJztcbmltcG9ydCBTY3JpcHQgZnJvbSAnbmV4dC9zY3JpcHQnO1xuaW1wb3J0IG1peHBhbmVsIGZyb20gJ21peHBhbmVsLWJyb3dzZXInO1xuaW1wb3J0IHsgUm9vdFN0YXRlIH0gZnJvbSAnLi4vcmVkdXgvc3RvcmUnO1xuXG5pbXBvcnQgQXV0aFdyYXBwZXIgZnJvbSAnLi4vY29tcG9uZW50cy9BdXRoV3JhcHBlcic7XG5pbXBvcnQgVG9hc3QgZnJvbSAnLi4vY29tcG9uZW50cy9jb21tb24vVG9hc3QnO1xuaW1wb3J0IEdsb2JhbExvYWRlciBmcm9tICcuLi9jb21wb25lbnRzL2NvbW1vbi9HbG9iYWxMb2FkZXInO1xuaW1wb3J0IEVycm9yQm91bmRhcnkgZnJvbSAnLi4vY29tcG9uZW50cy9FcnJvckJvdW5kYXJ5JztcblxuLy8gT25seSBpbXBvcnQgaW4gZGV2ZWxvcG1lbnQgbW9kZVxuY29uc3QgaXNEZXYgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JztcbmlmIChpc0Rldikge1xuICByZXF1aXJlKCcuLi91dGlscy9lbnZEZWJ1ZycpO1xufVxuXG4vLyBIZWxwZXIgY29tcG9uZW50IHRvIGhhbmRsZSBNaXhwYW5lbCBsb2dpYywgc2luY2UgaG9va3MgY2FuIG9ubHkgYmUgY2FsbGVkIGluc2lkZSBjb21wb25lbnRzXG5jb25zdCBNaXhwYW5lbEluaXRpYWxpemVyOiBSZWFjdC5GQyA9ICgpID0+IHtcbiAgY29uc3QgY3VycmVudFVzZXIgPSB1c2VTZWxlY3Rvcigoc3RhdGU6IFJvb3RTdGF0ZSkgPT4gc3RhdGUudXNlci5jdXJyZW50VXNlcik7XG5cbiAgLy8gSW5pdGlhbGl6ZSBNaXhwYW5lbCBvbiBtb3VudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IG1peHBhbmVsVG9rZW4gPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19NSVhQQU5FTF9QUk9KRUNUX1RPS0VOO1xuICAgIGlmIChtaXhwYW5lbFRva2VuKSB7XG4gICAgICBtaXhwYW5lbC5pbml0KG1peHBhbmVsVG9rZW4sIHtcbiAgICAgICAgZGVidWc6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnLFxuICAgICAgICB0cmFja19wYWdldmlldzogdHJ1ZSxcbiAgICAgICAgcGVyc2lzdGVuY2U6ICdsb2NhbFN0b3JhZ2UnLFxuICAgICAgfSk7XG4gICAgICBjb25zb2xlLmxvZygnW01peHBhbmVsXSBJbml0aWFsaXplZCcpO1xuICAgICAgLy8gUmVnaXN0ZXIgc3VwZXIgcHJvcGVydGllcyB0aGF0IGFwcGx5IHRvIGFsbCB3ZWIgZXZlbnRzXG4gICAgICBtaXhwYW5lbC5yZWdpc3Rlcih7XG4gICAgICAgIHBsYXRmb3JtOiAnd2ViJyxcbiAgICAgICAgLy8gT3B0aW9uYWxseSBhZGQgYXBwIHZlcnNpb24gaWYgYXZhaWxhYmxlXG4gICAgICAgIC8vIGFwcF92ZXJzaW9uOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUFBfVkVSU0lPTixcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1tNaXhwYW5lbF0gUHJvamVjdCB0b2tlbiBub3QgZm91bmQuIFRyYWNraW5nIGRpc2FibGVkLicpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIC8vIElkZW50aWZ5IHVzZXIgd2hlbiBhdmFpbGFibGUgb3IgY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChjdXJyZW50VXNlcj8uaWQpIHtcbiAgICAgIG1peHBhbmVsLmlkZW50aWZ5KGN1cnJlbnRVc2VyLmlkKTtcbiAgICAgIG1peHBhbmVsLnBlb3BsZS5zZXQoe1xuICAgICAgICAkZW1haWw6IGN1cnJlbnRVc2VyLmVtYWlsLFxuICAgICAgICAkbmFtZTogY3VycmVudFVzZXIuZGlzcGxheU5hbWUsXG4gICAgICAgIHVzZXJuYW1lOiBjdXJyZW50VXNlci51c2VybmFtZSxcbiAgICAgICAgcmVnaXN0cmF0aW9uQ29tcGxldGU6IGN1cnJlbnRVc2VyLnJlZ2lzdHJhdGlvbkNvbXBsZXRlLFxuICAgICAgfSk7XG4gICAgICBjb25zb2xlLmxvZygnW01peHBhbmVsXSBVc2VyIGlkZW50aWZpZWQ6JywgY3VycmVudFVzZXIuaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygnW01peHBhbmVsXSBObyB1c2VyIGlkZW50aWZpZWQuJyk7XG4gICAgfVxuICB9LCBbY3VycmVudFVzZXJdKTtcblxuICByZXR1cm4gbnVsbDtcbn07XG5cbmNvbnN0IE15QXBwOiBSZWFjdC5GQzxBcHBQcm9wcz4gPSAoeyBDb21wb25lbnQsIHBhZ2VQcm9wcyB9KSA9PiB7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gTG9nIGEgcmVtaW5kZXIgYWJvdXQgZW52aXJvbm1lbnQgZGVidWdnaW5nIGluIGRldmVsb3BtZW50IG1vZGVcbiAgICBpZiAoaXNEZXYgJiYgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SnIERlYnVnIHRvb2xzIGF2YWlsYWJsZSBpbiBkZXZlbG9wbWVudCBtb2RlLiBUcnkgd2luZG93LmRlYnVnRW52KCkgaW4gY29uc29sZS4nKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICByZXR1cm4gKCAgICBcbiAgICA8PlxuICAgICAgey8qIFRpa1RvayBQaXhlbCBDb2RlIFN0YXJ0IChHbG9iYWwpICovfVxuICAgICAgPFNjcmlwdCBpZD1cInRpa3Rvay1waXhlbFwiIHN0cmF0ZWd5PVwiYWZ0ZXJJbnRlcmFjdGl2ZVwiPlxuICAgICAgICB7YFxuICAgICAgICAgICFmdW5jdGlvbiAodywgZCwgdCkge1xuICAgICAgICAgICAgdy5UaWt0b2tBbmFseXRpY3NPYmplY3Q9dDt2YXIgdHRxPXdbdF09d1t0XXx8W107dHRxLm1ldGhvZHM9W1wicGFnZVwiLFwidHJhY2tcIixcImlkZW50aWZ5XCIsXCJpbnN0YW5jZXNcIixcImRlYnVnXCIsXCJvblwiLFwib2ZmXCIsXCJvbmNlXCIsXCJyZWFkeVwiLFwiYWxpYXNcIixcImdyb3VwXCIsXCJlbmFibGVDb29raWVcIixcImRpc2FibGVDb29raWVcIixcImhvbGRDb25zZW50XCIsXCJyZXZva2VDb25zZW50XCIsXCJncmFudENvbnNlbnRcIl0sdHRxLnNldEFuZERlZmVyPWZ1bmN0aW9uKHQsZSl7dFtlXT1mdW5jdGlvbigpe3QucHVzaChbZV0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSkpfTt9O2Zvcih2YXIgaT0wO2k8dHRxLm1ldGhvZHMubGVuZ3RoO2krKyl0dHEuc2V0QW5kRGVmZXIodHRxLHR0cS5tZXRob2RzW2ldKTt0dHEuaW5zdGFuY2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXR0cS5faVt0XXx8W10sbj0wO248dHRxLm1ldGhvZHMubGVuZ3RoO24rKyl0dHEuc2V0QW5kRGVmZXIoZSx0dHEubWV0aG9kc1tuXSk7cmV0dXJuIGU7fSx0dHEubG9hZD1mdW5jdGlvbihlLG4pe3ZhciByPVwiaHR0cHM6Ly9hbmFseXRpY3MudGlrdG9rLmNvbS9pMThuL3BpeGVsL2V2ZW50cy5qc1wiLG89biYmbi5wYXJ0bmVyO3R0cS5faT10dHEuX2l8fHt9LHR0cS5faVtlXT1bXSx0dHEuX2lbZV0uX3U9cix0dHEuX3Q9dHRxLl90fHx7fSx0dHEuX3RbZV09K25ldyBEYXRlLHR0cS5fbz10dHEuX298fHt9LHR0cS5fb1tlXT1ufHx7fTtuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7bi50eXBlPVwidGV4dC9qYXZhc2NyaXB0XCIsbi5hc3luYz0hMCxuLnNyYz1yK1wiP3Nka2lkPVwiK2UrXCImbGliPVwiK3Q7ZT1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKVswXTtlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG4sZSl9O1xuICAgICAgICAgICAgdHRxLmxvYWQoJ0QwM0E3NjNDNzdVRTBKMFJWMTdHJyk7XG4gICAgICAgICAgICB0dHEucGFnZSgpO1xuICAgICAgICAgIH0od2luZG93LCBkb2N1bWVudCwgJ3R0cScpO1xuICAgICAgICBgfVxuICAgICAgPC9TY3JpcHQ+XG4gICAgICB7LyogVGlrVG9rIFBpeGVsIENvZGUgRW5kIChHbG9iYWwpICovfVxuICAgICAgey8qIFJlZHV4IFByb3ZpZGVyIGFuZCBBcHAgQ29udGVudCAqL31cbiAgICAgIDxQcm92aWRlciBzdG9yZT17c3RvcmV9PlxuICAgICAgICA8RXJyb3JCb3VuZGFyeSBmYWxsYmFja1JlbmRlcj17KGVycm9yKSA9PiAoXG4gICAgICAgICAgPGRpdiBzdHlsZT17eyBwYWRkaW5nOiAnMjBweCcsIHRleHRBbGlnbjogJ2NlbnRlcicsIGNvbG9yOiAnd2hpdGUnLCBiYWNrZ3JvdW5kQ29sb3I6ICdibGFjaycsIG1pbkhlaWdodDogJzEwMHZoJyB9fT5cbiAgICAgICAgICAgIDxoMT5BcHBsaWNhdGlvbiBFcnJvcjwvaDE+XG4gICAgICAgICAgICA8cD5XZSd2ZSBlbmNvdW50ZXJlZCBhbiB1bmV4cGVjdGVkIGlzc3VlLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLjwvcD5cbiAgICAgICAgICAgIHtwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyAmJiBlcnJvciAmJiAoXG4gICAgICAgICAgICAgIDxwcmUgc3R5bGU9e3sgbWFyZ2luVG9wOiAnMjBweCcsIHRleHRBbGlnbjogJ2xlZnQnLCBiYWNrZ3JvdW5kOiAnIzMzMycsIHBhZGRpbmc6ICcxMHB4JywgYm9yZGVyUmFkaXVzOiAnNXB4JywgY29sb3I6ICcjZmZjY2NjJyB9fT5cbiAgICAgICAgICAgICAgICB7ZXJyb3IudG9TdHJpbmcoKX1cbiAgICAgICAgICAgICAgPC9wcmU+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfT5cbiAgICAgICAgICA8UGVyc2lzdEdhdGUgbG9hZGluZz17bnVsbH0gcGVyc2lzdG9yPXtwZXJzaXN0b3J9PlxuICAgICAgICAgICAgPE1peHBhbmVsSW5pdGlhbGl6ZXIgLz5cbiAgICAgICAgICAgIDxBdXRoV3JhcHBlcj5cbiAgICAgICAgICAgICAgPENvbXBvbmVudCB7Li4ucGFnZVByb3BzfSAvPlxuICAgICAgICAgICAgPC9BdXRoV3JhcHBlcj5cbiAgICAgICAgICAgIDxUb2FzdCAvPlxuICAgICAgICAgICAgPEdsb2JhbExvYWRlciAvPlxuICAgICAgICAgIDwvUGVyc2lzdEdhdGU+XG4gICAgICAgIDwvRXJyb3JCb3VuZGFyeT5cbiAgICAgIDwvUHJvdmlkZXI+XG4gICAgPC8+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBNeUFwcDsiXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VFZmZlY3QiLCJQcm92aWRlciIsInVzZVNlbGVjdG9yIiwic3RvcmUiLCJwZXJzaXN0b3IiLCJQZXJzaXN0R2F0ZSIsIlNjcmlwdCIsIm1peHBhbmVsIiwiQXV0aFdyYXBwZXIiLCJUb2FzdCIsIkdsb2JhbExvYWRlciIsIkVycm9yQm91bmRhcnkiLCJpc0RldiIsInByb2Nlc3MiLCJyZXF1aXJlIiwiTWl4cGFuZWxJbml0aWFsaXplciIsImN1cnJlbnRVc2VyIiwic3RhdGUiLCJ1c2VyIiwibWl4cGFuZWxUb2tlbiIsImVudiIsIk5FWFRfUFVCTElDX01JWFBBTkVMX1BST0pFQ1RfVE9LRU4iLCJpbml0IiwiZGVidWciLCJ0cmFja19wYWdldmlldyIsInBlcnNpc3RlbmNlIiwiY29uc29sZSIsImxvZyIsInJlZ2lzdGVyIiwicGxhdGZvcm0iLCJ3YXJuIiwiaWQiLCJpZGVudGlmeSIsInBlb3BsZSIsInNldCIsIiRlbWFpbCIsImVtYWlsIiwiJG5hbWUiLCJkaXNwbGF5TmFtZSIsInVzZXJuYW1lIiwicmVnaXN0cmF0aW9uQ29tcGxldGUiLCJNeUFwcCIsIkNvbXBvbmVudCIsInBhZ2VQcm9wcyIsInN0cmF0ZWd5IiwiZmFsbGJhY2tSZW5kZXIiLCJlcnJvciIsImRpdiIsInN0eWxlIiwicGFkZGluZyIsInRleHRBbGlnbiIsImNvbG9yIiwiYmFja2dyb3VuZENvbG9yIiwibWluSGVpZ2h0IiwiaDEiLCJwIiwicHJlIiwibWFyZ2luVG9wIiwiYmFja2dyb3VuZCIsImJvcmRlclJhZGl1cyIsInRvU3RyaW5nIiwibG9hZGluZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/pages/_app.tsx\n");

/***/ }),

/***/ "./src/pages/_document.tsx":
/*!*********************************!*\
  !*** ./src/pages/_document.tsx ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_document__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/document */ \"./node_modules/next/document.js\");\n/* harmony import */ var next_document__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_document__WEBPACK_IMPORTED_MODULE_1__);\n// pages/_document.tsx\n\n\nclass MyDocument extends (next_document__WEBPACK_IMPORTED_MODULE_1___default()) {\n    static async getInitialProps(ctx) {\n        const initialProps = await next_document__WEBPACK_IMPORTED_MODULE_1___default().getInitialProps(ctx);\n        return {\n            ...initialProps\n        };\n    }\n    render() {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.Html, {\n            lang: \"en\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.Head, {\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"link\", {\n                        rel: \"stylesheet\",\n                        href: \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\",\n                        integrity: \"sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==\",\n                        crossOrigin: \"anonymous\",\n                        referrerPolicy: \"no-referrer\"\n                    }, void 0, false, {\n                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/_document.tsx\",\n                        lineNumber: 15,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/_document.tsx\",\n                    lineNumber: 13,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"body\", {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.Main, {}, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/_document.tsx\",\n                            lineNumber: 25,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_document__WEBPACK_IMPORTED_MODULE_1__.NextScript, {}, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/_document.tsx\",\n                            lineNumber: 26,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/_document.tsx\",\n                    lineNumber: 24,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/_document.tsx\",\n            lineNumber: 12,\n            columnNumber: 7\n        }, this);\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MyDocument);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFnZXMvX2RvY3VtZW50LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLHNCQUFzQjs7QUFDa0U7QUFFeEYsTUFBTUssbUJBQW1CTCxzREFBUUE7SUFDL0IsYUFBYU0sZ0JBQWdCQyxHQUFvQixFQUFFO1FBQ2pELE1BQU1DLGVBQWUsTUFBTVIsb0VBQXdCLENBQUNPO1FBQ3BELE9BQU87WUFBRSxHQUFHQyxZQUFZO1FBQUM7SUFDM0I7SUFFQUMsU0FBUztRQUNQLHFCQUNFLDhEQUFDUiwrQ0FBSUE7WUFBQ1MsTUFBSzs7OEJBQ1QsOERBQUNSLCtDQUFJQTs4QkFFSCw0RUFBQ1M7d0JBQ0NDLEtBQUk7d0JBQ0pDLE1BQUs7d0JBQ0xDLFdBQVU7d0JBQ1ZDLGFBQVk7d0JBQ1pDLGdCQUFlOzs7Ozs7Ozs7Ozs4QkFJbkIsOERBQUNDOztzQ0FDQyw4REFBQ2QsK0NBQUlBOzs7OztzQ0FDTCw4REFBQ0MscURBQVVBOzs7Ozs7Ozs7Ozs7Ozs7OztJQUluQjtBQUNGO0FBRUEsaUVBQWVDLFVBQVVBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1hcHAvLi9zcmMvcGFnZXMvX2RvY3VtZW50LnRzeD8xODhlIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHBhZ2VzL19kb2N1bWVudC50c3hcbmltcG9ydCBEb2N1bWVudCwgeyBIdG1sLCBIZWFkLCBNYWluLCBOZXh0U2NyaXB0LCBEb2N1bWVudENvbnRleHQgfSBmcm9tICduZXh0L2RvY3VtZW50JztcblxuY2xhc3MgTXlEb2N1bWVudCBleHRlbmRzIERvY3VtZW50IHtcbiAgc3RhdGljIGFzeW5jIGdldEluaXRpYWxQcm9wcyhjdHg6IERvY3VtZW50Q29udGV4dCkge1xuICAgIGNvbnN0IGluaXRpYWxQcm9wcyA9IGF3YWl0IERvY3VtZW50LmdldEluaXRpYWxQcm9wcyhjdHgpO1xuICAgIHJldHVybiB7IC4uLmluaXRpYWxQcm9wcyB9O1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8SHRtbCBsYW5nPVwiZW5cIj5cbiAgICAgICAgPEhlYWQ+XG4gICAgICAgICAgey8qIEFkZCBGb250IEF3ZXNvbWUgZm9yIGFkbWluIGljb25zICovfVxuICAgICAgICAgIDxsaW5rIFxuICAgICAgICAgICAgcmVsPVwic3R5bGVzaGVldFwiIFxuICAgICAgICAgICAgaHJlZj1cImh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2ZvbnQtYXdlc29tZS82LjQuMC9jc3MvYWxsLm1pbi5jc3NcIiBcbiAgICAgICAgICAgIGludGVncml0eT1cInNoYTUxMi1pZWNkTG1hc2tsN0NWa3FrWE5RL1pIL1hMbHZXWk9KeWo3WXk3dGNlbm1wRDF5cEFTb3pwbVQvRTBpUHRtRklCNDZabWR0QWM5ZU5CdkgwSC9acGlCdz09XCIgXG4gICAgICAgICAgICBjcm9zc09yaWdpbj1cImFub255bW91c1wiIFxuICAgICAgICAgICAgcmVmZXJyZXJQb2xpY3k9XCJuby1yZWZlcnJlclwiIFxuICAgICAgICAgIC8+XG4gICAgICAgICAgey8qIEFkZCBhbnkgYWRkaXRpb25hbCA8aGVhZD4gY29udGVudCBoZXJlICovfVxuICAgICAgICA8L0hlYWQ+XG4gICAgICAgIDxib2R5PlxuICAgICAgICAgIDxNYWluIC8+XG4gICAgICAgICAgPE5leHRTY3JpcHQgLz5cbiAgICAgICAgPC9ib2R5PlxuICAgICAgPC9IdG1sPlxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTXlEb2N1bWVudDtcbiJdLCJuYW1lcyI6WyJEb2N1bWVudCIsIkh0bWwiLCJIZWFkIiwiTWFpbiIsIk5leHRTY3JpcHQiLCJNeURvY3VtZW50IiwiZ2V0SW5pdGlhbFByb3BzIiwiY3R4IiwiaW5pdGlhbFByb3BzIiwicmVuZGVyIiwibGFuZyIsImxpbmsiLCJyZWwiLCJocmVmIiwiaW50ZWdyaXR5IiwiY3Jvc3NPcmlnaW4iLCJyZWZlcnJlclBvbGljeSIsImJvZHkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/pages/_document.tsx\n");

/***/ }),

/***/ "./src/pages/admin/NotificationLogs.tsx":
/*!**********************************************!*\
  !*** ./src/pages/admin/NotificationLogs.tsx ***!
  \**********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\n/* harmony import */ var _api_firebase_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../api/firebase/config */ \"./src/api/firebase/config.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_firestore__WEBPACK_IMPORTED_MODULE_2__, _api_firebase_config__WEBPACK_IMPORTED_MODULE_3__]);\n([firebase_firestore__WEBPACK_IMPORTED_MODULE_2__, _api_firebase_config__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst NotificationLogs = ()=>{\n    const [logs, setLogs] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [selectedLog, setSelectedLog] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        fetchLogs();\n    }, []);\n    const fetchLogs = async ()=>{\n        try {\n            setLoading(true);\n            const logsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(_api_firebase_config__WEBPACK_IMPORTED_MODULE_3__.db, \"notification-logs\");\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)(logsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.orderBy)(\"timestampEpoch\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(100));\n            const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(q);\n            const logsData = snapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n            setLogs(logsData);\n        } catch (error) {\n            console.error(\"Error fetching logs:\", error);\n        } finally{\n            setLoading(false);\n        }\n    };\n    const formatTimestamp = (timestamp)=>{\n        if (typeof timestamp === \"number\") {\n            return new Date(timestamp * 1000).toLocaleString();\n        }\n        return timestamp?.toDate().toLocaleString() || \"N/A\";\n    };\n    const getStatusBadge = (log)=>{\n        if (log.multicast) {\n            const successRate = log.totalTokens ? (log.successCount || 0) / log.totalTokens : 0;\n            if (successRate === 1) {\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"bg-green-500 text-white px-2 py-1 rounded text-xs\",\n                    children: \"All Sent\"\n                }, void 0, false, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                    lineNumber: 75,\n                    columnNumber: 16\n                }, undefined);\n            } else if (successRate > 0.5) {\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"bg-yellow-500 text-white px-2 py-1 rounded text-xs\",\n                    children: \"Partial\"\n                }, void 0, false, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                    lineNumber: 77,\n                    columnNumber: 16\n                }, undefined);\n            } else {\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"bg-red-500 text-white px-2 py-1 rounded text-xs\",\n                    children: \"Failed\"\n                }, void 0, false, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                    lineNumber: 79,\n                    columnNumber: 16\n                }, undefined);\n            }\n        }\n        return log.success ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n            className: \"bg-green-500 text-white px-2 py-1 rounded text-xs\",\n            children: \"Sent\"\n        }, void 0, false, {\n            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n            lineNumber: 84,\n            columnNumber: 7\n        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n            className: \"bg-red-500 text-white px-2 py-1 rounded text-xs\",\n            children: \"Failed\"\n        }, void 0, false, {\n            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n            lineNumber: 86,\n            columnNumber: 7\n        }, undefined);\n    };\n    if (loading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"min-h-screen bg-[#111417] text-white flex items-center justify-center\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-[#d7ff00] mb-4\"\n                    }, void 0, false, {\n                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                        lineNumber: 94,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        children: \"Loading notification logs...\"\n                    }, void 0, false, {\n                        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                        lineNumber: 95,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                lineNumber: 93,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n            lineNumber: 92,\n            columnNumber: 7\n        }, undefined);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen bg-[#111417] text-white py-10 px-4 sm:px-6 lg:px-8\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"max-w-7xl mx-auto\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex justify-between items-center mb-6\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                            className: \"text-3xl font-bold text-[#d7ff00]\",\n                            children: \"Notification Logs\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                            lineNumber: 105,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: fetchLogs,\n                            className: \"bg-[#d7ff00] text-black px-4 py-2 rounded-md hover:bg-opacity-80 transition duration-200\",\n                            children: \"Refresh\"\n                        }, void 0, false, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                            lineNumber: 106,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                    lineNumber: 104,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"grid grid-cols-1 lg:grid-cols-3 gap-6\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"lg:col-span-2 bg-[#1a1e24] rounded-xl p-6\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                    className: \"text-xl font-semibold mb-4\",\n                                    children: \"Recent Notifications\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                    lineNumber: 117,\n                                    columnNumber: 13\n                                }, undefined),\n                                logs.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-gray-400\",\n                                    children: \"No notification logs found.\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                    lineNumber: 120,\n                                    columnNumber: 15\n                                }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"space-y-4\",\n                                    children: logs.map((log)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: `p-4 rounded-lg cursor-pointer transition duration-200 ${selectedLog?.id === log.id ? \"bg-[#2a2e34] border border-[#d7ff00]\" : \"bg-[#262a30] hover:bg-[#2a2e34]\"}`,\n                                            onClick: ()=>setSelectedLog(log),\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex justify-between items-start mb-2\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"flex-1 min-w-0 pr-4\",\n                                                            children: [\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                                                    className: \"font-medium text-[#d7ff00] truncate\",\n                                                                    children: log.title\n                                                                }, void 0, false, {\n                                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                                    lineNumber: 135,\n                                                                    columnNumber: 25\n                                                                }, undefined),\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                                    className: \"text-sm text-gray-300 break-words overflow-hidden\",\n                                                                    style: {\n                                                                        display: \"-webkit-box\",\n                                                                        WebkitLineClamp: 2,\n                                                                        WebkitBoxOrient: \"vertical\",\n                                                                        maxHeight: \"2.5rem\"\n                                                                    },\n                                                                    children: log.body\n                                                                }, void 0, false, {\n                                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                                    lineNumber: 136,\n                                                                    columnNumber: 25\n                                                                }, undefined)\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                            lineNumber: 134,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        getStatusBadge(log)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 133,\n                                                    columnNumber: 21\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"flex justify-between text-xs text-gray-400\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            children: log.notificationType\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                            lineNumber: 147,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            children: formatTimestamp(log.timestampEpoch)\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                            lineNumber: 148,\n                                                            columnNumber: 23\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 146,\n                                                    columnNumber: 21\n                                                }, undefined),\n                                                log.multicast && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"mt-2 text-xs text-gray-300\",\n                                                    children: [\n                                                        log.successCount,\n                                                        \"/\",\n                                                        log.totalTokens,\n                                                        \" sent successfully\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 152,\n                                                    columnNumber: 23\n                                                }, undefined)\n                                            ]\n                                        }, log.id, true, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                            lineNumber: 124,\n                                            columnNumber: 19\n                                        }, undefined))\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                    lineNumber: 122,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                            lineNumber: 116,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"bg-[#1a1e24] rounded-xl p-6\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                    className: \"text-xl font-semibold mb-4\",\n                                    children: \"Log Details\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                    lineNumber: 164,\n                                    columnNumber: 13\n                                }, undefined),\n                                selectedLog ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"space-y-4\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                                    className: \"text-sm font-medium text-[#d7ff00] mb-1\",\n                                                    children: \"Title\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 169,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"text-sm break-words\",\n                                                    children: selectedLog.title\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 170,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                            lineNumber: 168,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                                    className: \"text-sm font-medium text-[#d7ff00] mb-1\",\n                                                    children: \"Body\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 174,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"text-sm break-words whitespace-pre-wrap\",\n                                                    children: selectedLog.body\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 175,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                            lineNumber: 173,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                                    className: \"text-sm font-medium text-[#d7ff00] mb-1\",\n                                                    children: \"Type\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 179,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"text-sm\",\n                                                    children: selectedLog.notificationType\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 180,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                            lineNumber: 178,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                                    className: \"text-sm font-medium text-[#d7ff00] mb-1\",\n                                                    children: \"Function\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 184,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"text-sm\",\n                                                    children: selectedLog.functionName\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 185,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                            lineNumber: 183,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                                    className: \"text-sm font-medium text-[#d7ff00] mb-1\",\n                                                    children: \"Status\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 189,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                getStatusBadge(selectedLog)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                            lineNumber: 188,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                                    className: \"text-sm font-medium text-[#d7ff00] mb-1\",\n                                                    children: \"Timestamp\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 194,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"text-sm\",\n                                                    children: formatTimestamp(selectedLog.timestampEpoch)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 195,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                            lineNumber: 193,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        selectedLog.multicast ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                                    className: \"text-sm font-medium text-[#d7ff00] mb-1\",\n                                                    children: \"Multicast Stats\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 200,\n                                                    columnNumber: 21\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"text-sm space-y-1\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            children: [\n                                                                \"Total Tokens: \",\n                                                                selectedLog.totalTokens\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                            lineNumber: 202,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            children: [\n                                                                \"Success: \",\n                                                                selectedLog.successCount\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                            lineNumber: 203,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            children: [\n                                                                \"Failed: \",\n                                                                selectedLog.failureCount\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                            lineNumber: 204,\n                                                            columnNumber: 23\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 201,\n                                                    columnNumber: 21\n                                                }, undefined),\n                                                selectedLog.individualResults && selectedLog.individualResults.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"mt-4\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                                            className: \"text-sm font-medium text-[#d7ff00] mb-2\",\n                                                            children: \"Individual Recipients\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                            lineNumber: 210,\n                                                            columnNumber: 25\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"max-h-60 overflow-y-auto space-y-2\",\n                                                            children: selectedLog.individualResults.map((result, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                    className: `p-3 rounded-lg text-xs ${result.success ? \"bg-green-900/30 border border-green-700\" : \"bg-red-900/30 border border-red-700\"}`,\n                                                                    children: [\n                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                            className: \"flex justify-between items-start mb-1\",\n                                                                            children: [\n                                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                                    className: \"font-mono text-gray-300\",\n                                                                                    children: result.tokenPreview\n                                                                                }, void 0, false, {\n                                                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                                                    lineNumber: 222,\n                                                                                    columnNumber: 33\n                                                                                }, undefined),\n                                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                                    className: `px-2 py-1 rounded text-xs font-medium ${result.success ? \"bg-green-500 text-white\" : \"bg-red-500 text-white\"}`,\n                                                                                    children: result.success ? \"Sent\" : \"Failed\"\n                                                                                }, void 0, false, {\n                                                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                                                    lineNumber: 225,\n                                                                                    columnNumber: 33\n                                                                                }, undefined)\n                                                                            ]\n                                                                        }, void 0, true, {\n                                                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                                            lineNumber: 221,\n                                                                            columnNumber: 31\n                                                                        }, undefined),\n                                                                        result.success && result.messageId && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                            className: \"text-gray-400 break-words\",\n                                                                            children: [\n                                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                                    className: \"font-medium\",\n                                                                                    children: \"Message ID:\"\n                                                                                }, void 0, false, {\n                                                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                                                    lineNumber: 236,\n                                                                                    columnNumber: 35\n                                                                                }, undefined),\n                                                                                \" \",\n                                                                                result.messageId\n                                                                            ]\n                                                                        }, void 0, true, {\n                                                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                                            lineNumber: 235,\n                                                                            columnNumber: 33\n                                                                        }, undefined),\n                                                                        !result.success && result.error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                            className: \"text-red-300\",\n                                                                            children: [\n                                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                                    children: [\n                                                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                                            className: \"font-medium\",\n                                                                                            children: \"Error:\"\n                                                                                        }, void 0, false, {\n                                                                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                                                            lineNumber: 242,\n                                                                                            columnNumber: 40\n                                                                                        }, undefined),\n                                                                                        \" \",\n                                                                                        result.error.code\n                                                                                    ]\n                                                                                }, void 0, true, {\n                                                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                                                    lineNumber: 242,\n                                                                                    columnNumber: 35\n                                                                                }, undefined),\n                                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                                    className: \"text-red-400 mt-1 break-words\",\n                                                                                    children: result.error.message\n                                                                                }, void 0, false, {\n                                                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                                                    lineNumber: 243,\n                                                                                    columnNumber: 35\n                                                                                }, undefined)\n                                                                            ]\n                                                                        }, void 0, true, {\n                                                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                                            lineNumber: 241,\n                                                                            columnNumber: 33\n                                                                        }, undefined)\n                                                                    ]\n                                                                }, index, true, {\n                                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                                    lineNumber: 213,\n                                                                    columnNumber: 29\n                                                                }, undefined))\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                            lineNumber: 211,\n                                                            columnNumber: 25\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 209,\n                                                    columnNumber: 23\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                            lineNumber: 199,\n                                            columnNumber: 19\n                                        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                                            className: \"text-sm font-medium text-[#d7ff00] mb-1\",\n                                                            children: \"FCM Token (truncated)\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                            lineNumber: 255,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: \"text-sm font-mono break-all\",\n                                                            children: selectedLog.fcmToken\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                            lineNumber: 256,\n                                                            columnNumber: 23\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 254,\n                                                    columnNumber: 21\n                                                }, undefined),\n                                                selectedLog.messageId && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                                            className: \"text-sm font-medium text-[#d7ff00] mb-1\",\n                                                            children: \"Message ID\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                            lineNumber: 261,\n                                                            columnNumber: 25\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: \"text-sm font-mono break-all\",\n                                                            children: selectedLog.messageId\n                                                        }, void 0, false, {\n                                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                            lineNumber: 262,\n                                                            columnNumber: 25\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 260,\n                                                    columnNumber: 23\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true),\n                                        selectedLog.error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                                    className: \"text-sm font-medium text-red-400 mb-1\",\n                                                    children: \"Error\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 270,\n                                                    columnNumber: 21\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"bg-red-900/20 p-3 rounded text-sm\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            children: [\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                                                    children: \"Code:\"\n                                                                }, void 0, false, {\n                                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                                    lineNumber: 272,\n                                                                    columnNumber: 26\n                                                                }, undefined),\n                                                                \" \",\n                                                                selectedLog.error.code\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                            lineNumber: 272,\n                                                            columnNumber: 23\n                                                        }, undefined),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: \"break-words\",\n                                                            children: [\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                                                    children: \"Message:\"\n                                                                }, void 0, false, {\n                                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                                    lineNumber: 273,\n                                                                    columnNumber: 50\n                                                                }, undefined),\n                                                                \" \",\n                                                                selectedLog.error.message\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                            lineNumber: 273,\n                                                            columnNumber: 23\n                                                        }, undefined)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 271,\n                                                    columnNumber: 21\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                            lineNumber: 269,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                                    className: \"text-sm font-medium text-[#d7ff00] mb-1\",\n                                                    children: \"Data Payload\"\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 279,\n                                                    columnNumber: 19\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"pre\", {\n                                                    className: \"text-xs bg-[#262a30] p-3 rounded overflow-auto max-h-40 whitespace-pre-wrap break-words\",\n                                                    children: JSON.stringify(selectedLog.dataPayload, null, 2)\n                                                }, void 0, false, {\n                                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                                    lineNumber: 280,\n                                                    columnNumber: 19\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                            lineNumber: 278,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                    lineNumber: 167,\n                                    columnNumber: 15\n                                }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-gray-400\",\n                                    children: \"Select a log entry to view details\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                                    lineNumber: 286,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                            lineNumber: 163,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n                    lineNumber: 114,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n            lineNumber: 103,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/Users/tremainegrant/Documents/GitHub/QuickLifts-Web/src/pages/admin/NotificationLogs.tsx\",\n        lineNumber: 102,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (NotificationLogs);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ozs7OztzRUFDeEQsOERBQUNHOzREQUFFSCxXQUFVO3NFQUErQjFCLFlBQVlvRCxTQUFTOzs7Ozs7Ozs7Ozs7Ozt3Q0FNeEVwRCxZQUFZWSxLQUFLLGtCQUNoQiw4REFBQ2dCOzs4REFDQyw4REFBQ2lCO29EQUFHbkIsV0FBVTs4REFBd0M7Ozs7Ozs4REFDdEQsOERBQUNFO29EQUFJRixXQUFVOztzRUFDYiw4REFBQ0c7OzhFQUFFLDhEQUFDMkI7OEVBQU87Ozs7OztnRUFBYztnRUFBRXhELFlBQVlZLEtBQUssQ0FBQ3lDLElBQUk7Ozs7Ozs7c0VBQ2pELDhEQUFDeEI7NERBQUVILFdBQVU7OzhFQUFjLDhEQUFDOEI7OEVBQU87Ozs7OztnRUFBaUI7Z0VBQUV4RCxZQUFZWSxLQUFLLENBQUMwQyxPQUFPOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O3NEQUtyRiw4REFBQzFCOzs4REFDQyw4REFBQ2lCO29EQUFHbkIsV0FBVTs4REFBMEM7Ozs7Ozs4REFDeEQsOERBQUMrQjtvREFBSS9CLFdBQVU7OERBQ1pnQyxLQUFLQyxTQUFTLENBQUMsWUFBcUJDLFdBQVcsRUFBRSxNQUFNOzs7Ozs7Ozs7Ozs7Ozs7Ozs4REFLOUQsOERBQUMvQjtvQ0FBRUgsV0FBVTs4Q0FBZ0I7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTzNDO0FBRUEsaUVBQWUvQixnQkFBZ0JBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1hcHAvLi9zcmMvcGFnZXMvYWRtaW4vTm90aWZpY2F0aW9uTG9ncy50c3g/Yjc0YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGNvbGxlY3Rpb24sIHF1ZXJ5LCBvcmRlckJ5LCBsaW1pdCwgZ2V0RG9jcywgVGltZXN0YW1wIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vLi4vYXBpL2ZpcmViYXNlL2NvbmZpZyc7XG5cbmludGVyZmFjZSBOb3RpZmljYXRpb25Mb2cge1xuICBpZDogc3RyaW5nO1xuICBmY21Ub2tlbjogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICBib2R5OiBzdHJpbmc7XG4gIG5vdGlmaWNhdGlvblR5cGU6IHN0cmluZztcbiAgZnVuY3Rpb25OYW1lOiBzdHJpbmc7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIG1lc3NhZ2VJZD86IHN0cmluZztcbiAgZXJyb3I/OiB7XG4gICAgY29kZTogc3RyaW5nO1xuICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgfTtcbiAgdGltZXN0YW1wOiBUaW1lc3RhbXA7XG4gIHRpbWVzdGFtcEVwb2NoOiBudW1iZXI7XG4gIG11bHRpY2FzdD86IGJvb2xlYW47XG4gIHRvdGFsVG9rZW5zPzogbnVtYmVyO1xuICBzdWNjZXNzQ291bnQ/OiBudW1iZXI7XG4gIGZhaWx1cmVDb3VudD86IG51bWJlcjtcbiAgaW5kaXZpZHVhbFJlc3VsdHM/OiBBcnJheTx7XG4gICAgdG9rZW5QcmV2aWV3OiBzdHJpbmc7XG4gICAgc3VjY2VzczogYm9vbGVhbjtcbiAgICBtZXNzYWdlSWQ/OiBzdHJpbmc7XG4gICAgZXJyb3I/OiB7XG4gICAgICBjb2RlOiBzdHJpbmc7XG4gICAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgfTtcbiAgfT47XG59XG5cbmNvbnN0IE5vdGlmaWNhdGlvbkxvZ3M6IFJlYWN0LkZDID0gKCkgPT4ge1xuICBjb25zdCBbbG9ncywgc2V0TG9nc10gPSB1c2VTdGF0ZTxOb3RpZmljYXRpb25Mb2dbXT4oW10pO1xuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW3NlbGVjdGVkTG9nLCBzZXRTZWxlY3RlZExvZ10gPSB1c2VTdGF0ZTxOb3RpZmljYXRpb25Mb2cgfCBudWxsPihudWxsKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGZldGNoTG9ncygpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgZmV0Y2hMb2dzID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgY29uc3QgbG9nc1JlZiA9IGNvbGxlY3Rpb24oZGIsICdub3RpZmljYXRpb24tbG9ncycpO1xuICAgICAgY29uc3QgcSA9IHF1ZXJ5KGxvZ3NSZWYsIG9yZGVyQnkoJ3RpbWVzdGFtcEVwb2NoJywgJ2Rlc2MnKSwgbGltaXQoMTAwKSk7XG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGxvZ3NEYXRhID0gc25hcHNob3QuZG9jcy5tYXAoZG9jID0+ICh7XG4gICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgIC4uLmRvYy5kYXRhKClcbiAgICAgIH0pKSBhcyBOb3RpZmljYXRpb25Mb2dbXTtcbiAgICAgIFxuICAgICAgc2V0TG9ncyhsb2dzRGF0YSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGxvZ3M6JywgZXJyb3IpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgZm9ybWF0VGltZXN0YW1wID0gKHRpbWVzdGFtcDogVGltZXN0YW1wIHwgbnVtYmVyKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB0aW1lc3RhbXAgPT09ICdudW1iZXInKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUodGltZXN0YW1wICogMTAwMCkudG9Mb2NhbGVTdHJpbmcoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRpbWVzdGFtcD8udG9EYXRlKCkudG9Mb2NhbGVTdHJpbmcoKSB8fCAnTi9BJztcbiAgfTtcblxuICBjb25zdCBnZXRTdGF0dXNCYWRnZSA9IChsb2c6IE5vdGlmaWNhdGlvbkxvZykgPT4ge1xuICAgIGlmIChsb2cubXVsdGljYXN0KSB7XG4gICAgICBjb25zdCBzdWNjZXNzUmF0ZSA9IGxvZy50b3RhbFRva2VucyA/IChsb2cuc3VjY2Vzc0NvdW50IHx8IDApIC8gbG9nLnRvdGFsVG9rZW5zIDogMDtcbiAgICAgIGlmIChzdWNjZXNzUmF0ZSA9PT0gMSkge1xuICAgICAgICByZXR1cm4gPHNwYW4gY2xhc3NOYW1lPVwiYmctZ3JlZW4tNTAwIHRleHQtd2hpdGUgcHgtMiBweS0xIHJvdW5kZWQgdGV4dC14c1wiPkFsbCBTZW50PC9zcGFuPjtcbiAgICAgIH0gZWxzZSBpZiAoc3VjY2Vzc1JhdGUgPiAwLjUpIHtcbiAgICAgICAgcmV0dXJuIDxzcGFuIGNsYXNzTmFtZT1cImJnLXllbGxvdy01MDAgdGV4dC13aGl0ZSBweC0yIHB5LTEgcm91bmRlZCB0ZXh0LXhzXCI+UGFydGlhbDwvc3Bhbj47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gPHNwYW4gY2xhc3NOYW1lPVwiYmctcmVkLTUwMCB0ZXh0LXdoaXRlIHB4LTIgcHktMSByb3VuZGVkIHRleHQteHNcIj5GYWlsZWQ8L3NwYW4+O1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbG9nLnN1Y2Nlc3MgPyAoXG4gICAgICA8c3BhbiBjbGFzc05hbWU9XCJiZy1ncmVlbi01MDAgdGV4dC13aGl0ZSBweC0yIHB5LTEgcm91bmRlZCB0ZXh0LXhzXCI+U2VudDwvc3Bhbj5cbiAgICApIDogKFxuICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYmctcmVkLTUwMCB0ZXh0LXdoaXRlIHB4LTIgcHktMSByb3VuZGVkIHRleHQteHNcIj5GYWlsZWQ8L3NwYW4+XG4gICAgKTtcbiAgfTtcblxuICBpZiAobG9hZGluZykge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBiZy1bIzExMTQxN10gdGV4dC13aGl0ZSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtMTIgdy0xMiBib3JkZXItYi0yIGJvcmRlci1bI2Q3ZmYwMF0gbWItNFwiPjwvZGl2PlxuICAgICAgICAgIDxwPkxvYWRpbmcgbm90aWZpY2F0aW9uIGxvZ3MuLi48L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW4gYmctWyMxMTE0MTddIHRleHQtd2hpdGUgcHktMTAgcHgtNCBzbTpweC02IGxnOnB4LThcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctN3hsIG14LWF1dG9cIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItNlwiPlxuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LTN4bCBmb250LWJvbGQgdGV4dC1bI2Q3ZmYwMF1cIj5Ob3RpZmljYXRpb24gTG9nczwvaDE+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17ZmV0Y2hMb2dzfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctWyNkN2ZmMDBdIHRleHQtYmxhY2sgcHgtNCBweS0yIHJvdW5kZWQtbWQgaG92ZXI6Ymctb3BhY2l0eS04MCB0cmFuc2l0aW9uIGR1cmF0aW9uLTIwMFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgUmVmcmVzaFxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbGc6Z3JpZC1jb2xzLTMgZ2FwLTZcIj5cbiAgICAgICAgICB7LyogTG9ncyBMaXN0ICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGc6Y29sLXNwYW4tMiBiZy1bIzFhMWUyNF0gcm91bmRlZC14bCBwLTZcIj5cbiAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgbWItNFwiPlJlY2VudCBOb3RpZmljYXRpb25zPC9oMj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAge2xvZ3MubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwXCI+Tm8gbm90aWZpY2F0aW9uIGxvZ3MgZm91bmQuPC9wPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICAgICAgICB7bG9ncy5tYXAoKGxvZykgPT4gKFxuICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9e2xvZy5pZH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcC00IHJvdW5kZWQtbGcgY3Vyc29yLXBvaW50ZXIgdHJhbnNpdGlvbiBkdXJhdGlvbi0yMDAgJHtcbiAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZExvZz8uaWQgPT09IGxvZy5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgPyAnYmctWyMyYTJlMzRdIGJvcmRlciBib3JkZXItWyNkN2ZmMDBdJ1xuICAgICAgICAgICAgICAgICAgICAgICAgOiAnYmctWyMyNjJhMzBdIGhvdmVyOmJnLVsjMmEyZTM0XSdcbiAgICAgICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNlbGVjdGVkTG9nKGxvZyl9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtc3RhcnQgbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG1pbi13LTAgcHItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtIHRleHQtWyNkN2ZmMDBdIHRydW5jYXRlXCI+e2xvZy50aXRsZX08L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktMzAwIGJyZWFrLXdvcmRzIG92ZXJmbG93LWhpZGRlblwiIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICctd2Via2l0LWJveCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFdlYmtpdExpbmVDbGFtcDogMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgV2Via2l0Qm94T3JpZW50OiAndmVydGljYWwnIGFzIGNvbnN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHQ6ICcyLjVyZW0nXG4gICAgICAgICAgICAgICAgICAgICAgICB9fT57bG9nLmJvZHl9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIHtnZXRTdGF0dXNCYWRnZShsb2cpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdGV4dC14cyB0ZXh0LWdyYXktNDAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e2xvZy5ub3RpZmljYXRpb25UeXBlfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57Zm9ybWF0VGltZXN0YW1wKGxvZy50aW1lc3RhbXBFcG9jaCl9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHtsb2cubXVsdGljYXN0ICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgdGV4dC14cyB0ZXh0LWdyYXktMzAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bG9nLnN1Y2Nlc3NDb3VudH0ve2xvZy50b3RhbFRva2Vuc30gc2VudCBzdWNjZXNzZnVsbHlcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogTG9nIERldGFpbHMgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1bIzFhMWUyNF0gcm91bmRlZC14bCBwLTZcIj5cbiAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtc2VtaWJvbGQgbWItNFwiPkxvZyBEZXRhaWxzPC9oMj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAge3NlbGVjdGVkTG9nID8gKFxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNFwiPlxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LVsjZDdmZjAwXSBtYi0xXCI+VGl0bGU8L2g0PlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSBicmVhay13b3Jkc1wiPntzZWxlY3RlZExvZy50aXRsZX08L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtWyNkN2ZmMDBdIG1iLTFcIj5Cb2R5PC9oND5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gYnJlYWstd29yZHMgd2hpdGVzcGFjZS1wcmUtd3JhcFwiPntzZWxlY3RlZExvZy5ib2R5fTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1bI2Q3ZmYwMF0gbWItMVwiPlR5cGU8L2g0PlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbVwiPntzZWxlY3RlZExvZy5ub3RpZmljYXRpb25UeXBlfTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1bI2Q3ZmYwMF0gbWItMVwiPkZ1bmN0aW9uPC9oND5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc21cIj57c2VsZWN0ZWRMb2cuZnVuY3Rpb25OYW1lfTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1bI2Q3ZmYwMF0gbWItMVwiPlN0YXR1czwvaDQ+XG4gICAgICAgICAgICAgICAgICB7Z2V0U3RhdHVzQmFkZ2Uoc2VsZWN0ZWRMb2cpfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LVsjZDdmZjAwXSBtYi0xXCI+VGltZXN0YW1wPC9oND5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc21cIj57Zm9ybWF0VGltZXN0YW1wKHNlbGVjdGVkTG9nLnRpbWVzdGFtcEVwb2NoKX08L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAge3NlbGVjdGVkTG9nLm11bHRpY2FzdCA/IChcbiAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtWyNkN2ZmMDBdIG1iLTFcIj5NdWx0aWNhc3QgU3RhdHM8L2g0PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gc3BhY2UteS0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHA+VG90YWwgVG9rZW5zOiB7c2VsZWN0ZWRMb2cudG90YWxUb2tlbnN9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDxwPlN1Y2Nlc3M6IHtzZWxlY3RlZExvZy5zdWNjZXNzQ291bnR9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDxwPkZhaWxlZDoge3NlbGVjdGVkTG9nLmZhaWx1cmVDb3VudH08L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgey8qIEluZGl2aWR1YWwgUmVjaXBpZW50cyBEZXRhaWxzICovfVxuICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRMb2cuaW5kaXZpZHVhbFJlc3VsdHMgJiYgc2VsZWN0ZWRMb2cuaW5kaXZpZHVhbFJlc3VsdHMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LVsjZDdmZjAwXSBtYi0yXCI+SW5kaXZpZHVhbCBSZWNpcGllbnRzPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LWgtNjAgb3ZlcmZsb3cteS1hdXRvIHNwYWNlLXktMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRMb2cuaW5kaXZpZHVhbFJlc3VsdHMubWFwKChyZXN1bHQsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BwLTMgcm91bmRlZC1sZyB0ZXh0LXhzICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdWNjZXNzIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2JnLWdyZWVuLTkwMC8zMCBib3JkZXIgYm9yZGVyLWdyZWVuLTcwMCcgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnYmctcmVkLTkwMC8zMCBib3JkZXIgYm9yZGVyLXJlZC03MDAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLXN0YXJ0IG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tb25vIHRleHQtZ3JheS0zMDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVzdWx0LnRva2VuUHJldmlld31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2BweC0yIHB5LTEgcm91bmRlZCB0ZXh0LXhzIGZvbnQtbWVkaXVtICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN1Y2Nlc3MgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1ncmVlbi01MDAgdGV4dC13aGl0ZScgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdiZy1yZWQtNTAwIHRleHQtd2hpdGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1gfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVzdWx0LnN1Y2Nlc3MgPyAnU2VudCcgOiAnRmFpbGVkJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQubWVzc2FnZUlkICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNDAwIGJyZWFrLXdvcmRzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tZWRpdW1cIj5NZXNzYWdlIElEOjwvc3Bhbj4ge3Jlc3VsdC5tZXNzYWdlSWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyFyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQuZXJyb3IgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtcmVkLTMwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tZWRpdW1cIj5FcnJvcjo8L3NwYW4+IHtyZXN1bHQuZXJyb3IuY29kZX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtcmVkLTQwMCBtdC0xIGJyZWFrLXdvcmRzXCI+e3Jlc3VsdC5lcnJvci5tZXNzYWdlfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LVsjZDdmZjAwXSBtYi0xXCI+RkNNIFRva2VuICh0cnVuY2F0ZWQpPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbW9ubyBicmVhay1hbGxcIj57c2VsZWN0ZWRMb2cuZmNtVG9rZW59PC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZExvZy5tZXNzYWdlSWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LVsjZDdmZjAwXSBtYi0xXCI+TWVzc2FnZSBJRDwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbW9ubyBicmVhay1hbGxcIj57c2VsZWN0ZWRMb2cubWVzc2FnZUlkfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAge3NlbGVjdGVkTG9nLmVycm9yICYmIChcbiAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtcmVkLTQwMCBtYi0xXCI+RXJyb3I8L2g0PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXJlZC05MDAvMjAgcC0zIHJvdW5kZWQgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+Q29kZTo8L3N0cm9uZz4ge3NlbGVjdGVkTG9nLmVycm9yLmNvZGV9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImJyZWFrLXdvcmRzXCI+PHN0cm9uZz5NZXNzYWdlOjwvc3Ryb25nPiB7c2VsZWN0ZWRMb2cuZXJyb3IubWVzc2FnZX08L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1bI2Q3ZmYwMF0gbWItMVwiPkRhdGEgUGF5bG9hZDwvaDQ+XG4gICAgICAgICAgICAgICAgICA8cHJlIGNsYXNzTmFtZT1cInRleHQteHMgYmctWyMyNjJhMzBdIHAtMyByb3VuZGVkIG92ZXJmbG93LWF1dG8gbWF4LWgtNDAgd2hpdGVzcGFjZS1wcmUtd3JhcCBicmVhay13b3Jkc1wiPlxuICAgICAgICAgICAgICAgICAgICB7SlNPTi5zdHJpbmdpZnkoKHNlbGVjdGVkTG9nIGFzIGFueSkuZGF0YVBheWxvYWQsIG51bGwsIDIpfVxuICAgICAgICAgICAgICAgICAgPC9wcmU+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMFwiPlNlbGVjdCBhIGxvZyBlbnRyeSB0byB2aWV3IGRldGFpbHM8L3A+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTm90aWZpY2F0aW9uTG9nczsiXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsImNvbGxlY3Rpb24iLCJxdWVyeSIsIm9yZGVyQnkiLCJsaW1pdCIsImdldERvY3MiLCJkYiIsIk5vdGlmaWNhdGlvbkxvZ3MiLCJsb2dzIiwic2V0TG9ncyIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwic2VsZWN0ZWRMb2ciLCJzZXRTZWxlY3RlZExvZyIsImZldGNoTG9ncyIsImxvZ3NSZWYiLCJxIiwic25hcHNob3QiLCJsb2dzRGF0YSIsImRvY3MiLCJtYXAiLCJkb2MiLCJpZCIsImRhdGEiLCJlcnJvciIsImNvbnNvbGUiLCJmb3JtYXRUaW1lc3RhbXAiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9Mb2NhbGVTdHJpbmciLCJ0b0RhdGUiLCJnZXRTdGF0dXNCYWRnZSIsImxvZyIsIm11bHRpY2FzdCIsInN1Y2Nlc3NSYXRlIiwidG90YWxUb2tlbnMiLCJzdWNjZXNzQ291bnQiLCJzcGFuIiwiY2xhc3NOYW1lIiwic3VjY2VzcyIsImRpdiIsInAiLCJoMSIsImJ1dHRvbiIsIm9uQ2xpY2siLCJoMiIsImxlbmd0aCIsImgzIiwidGl0bGUiLCJzdHlsZSIsImRpc3BsYXkiLCJXZWJraXRMaW5lQ2xhbXAiLCJXZWJraXRCb3hPcmllbnQiLCJtYXhIZWlnaHQiLCJib2R5Iiwibm90aWZpY2F0aW9uVHlwZSIsInRpbWVzdGFtcEVwb2NoIiwiaDQiLCJmdW5jdGlvbk5hbWUiLCJmYWlsdXJlQ291bnQiLCJpbmRpdmlkdWFsUmVzdWx0cyIsInJlc3VsdCIsImluZGV4IiwidG9rZW5QcmV2aWV3IiwibWVzc2FnZUlkIiwiY29kZSIsIm1lc3NhZ2UiLCJmY21Ub2tlbiIsInN0cm9uZyIsInByZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJkYXRhUGF5bG9hZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/pages/admin/NotificationLogs.tsx\n");

/***/ }),

/***/ "./src/redux/devModeSlice.ts":
/*!***********************************!*\
  !*** ./src/redux/devModeSlice.ts ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   toggleDevMode: () => (/* binding */ toggleDevMode)\n/* harmony export */ });\n/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @reduxjs/toolkit */ \"@reduxjs/toolkit\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__]);\n_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// src/redux/devModeSlice.ts\n\n// Get initial state from localStorage if available\nconst getInitialState = ()=>{\n    if (false) {}\n    return {\n        isDevelopment: false,\n        dopplerConfig: \"prd_backend\"\n    };\n};\nconst devModeSlice = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createSlice)({\n    name: \"devMode\",\n    initialState: getInitialState(),\n    reducers: {\n        toggleDevMode: (state)=>{\n            state.isDevelopment = !state.isDevelopment;\n            state.dopplerConfig = state.isDevelopment ? \"dev_backend\" : \"prd_backend\";\n            // Save to localStorage when toggled, only on client side\n            if (false) {}\n        }\n    }\n});\nconst { toggleDevMode } = devModeSlice.actions;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (devModeSlice.reducer);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVkdXgvZGV2TW9kZVNsaWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLDRCQUE0QjtBQUNtQjtBQUUvQyxtREFBbUQ7QUFDbkQsTUFBTUMsa0JBQWtCO0lBQ3RCLElBQUksS0FBa0IsRUFBYSxFQU1sQztJQUNELE9BQU87UUFDTEssZUFBZTtRQUNmRyxlQUFlO0lBQ2pCO0FBQ0Y7QUFFQSxNQUFNQyxlQUFlViw2REFBV0EsQ0FBQztJQUMvQlcsTUFBTTtJQUNOQyxjQUFjWDtJQUNkWSxVQUFVO1FBQ1JDLGVBQWUsQ0FBQ0M7WUFDZEEsTUFBTVQsYUFBYSxHQUFHLENBQUNTLE1BQU1ULGFBQWE7WUFDMUNTLE1BQU1OLGFBQWEsR0FBR00sTUFBTVQsYUFBYSxHQUFHLGdCQUFnQjtZQUU1RCx5REFBeUQ7WUFDekQsSUFBSSxLQUFrQixFQUFhLEVBTWxDO1FBQ0g7SUFDRjtBQUNGO0FBRU8sTUFBTSxFQUFFUSxhQUFhLEVBQUUsR0FBR0osYUFBYVEsT0FBTyxDQUFDO0FBQ3RELGlFQUFlUixhQUFhUyxPQUFPLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1hcHAvLi9zcmMvcmVkdXgvZGV2TW9kZVNsaWNlLnRzP2YzMTMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3JlZHV4L2Rldk1vZGVTbGljZS50c1xuaW1wb3J0IHsgY3JlYXRlU2xpY2UgfSBmcm9tICdAcmVkdXhqcy90b29sa2l0JztcblxuLy8gR2V0IGluaXRpYWwgc3RhdGUgZnJvbSBsb2NhbFN0b3JhZ2UgaWYgYXZhaWxhYmxlXG5jb25zdCBnZXRJbml0aWFsU3RhdGUgPSAoKSA9PiB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnN0IHNhdmVkTW9kZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGV2TW9kZScpO1xuICAgIHJldHVybiB7XG4gICAgICBpc0RldmVsb3BtZW50OiBzYXZlZE1vZGUgPyBKU09OLnBhcnNlKHNhdmVkTW9kZSkgOiBmYWxzZSxcbiAgICAgIGRvcHBsZXJDb25maWc6IHNhdmVkTW9kZSA/ICdkZXZfYmFja2VuZCcgOiAncHJkX2JhY2tlbmQnXG4gICAgfTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGlzRGV2ZWxvcG1lbnQ6IGZhbHNlLFxuICAgIGRvcHBsZXJDb25maWc6ICdwcmRfYmFja2VuZCdcbiAgfTtcbn07XG5cbmNvbnN0IGRldk1vZGVTbGljZSA9IGNyZWF0ZVNsaWNlKHtcbiAgbmFtZTogJ2Rldk1vZGUnLFxuICBpbml0aWFsU3RhdGU6IGdldEluaXRpYWxTdGF0ZSgpLFxuICByZWR1Y2Vyczoge1xuICAgIHRvZ2dsZURldk1vZGU6IChzdGF0ZSkgPT4ge1xuICAgICAgc3RhdGUuaXNEZXZlbG9wbWVudCA9ICFzdGF0ZS5pc0RldmVsb3BtZW50O1xuICAgICAgc3RhdGUuZG9wcGxlckNvbmZpZyA9IHN0YXRlLmlzRGV2ZWxvcG1lbnQgPyAnZGV2X2JhY2tlbmQnIDogJ3ByZF9iYWNrZW5kJztcbiAgICAgIFxuICAgICAgLy8gU2F2ZSB0byBsb2NhbFN0b3JhZ2Ugd2hlbiB0b2dnbGVkLCBvbmx5IG9uIGNsaWVudCBzaWRlXG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdkZXZNb2RlJywgSlNPTi5zdHJpbmdpZnkoc3RhdGUuaXNEZXZlbG9wbWVudCkpO1xuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2RvcHBsZXJDb25maWcnLCBzdGF0ZS5kb3BwbGVyQ29uZmlnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE5PVEU6IFJlbG9hZCBpcyBub3cgaGFuZGxlZCBpbiB0aGUgRGV2TW9kZVRvZ2dsZSBjb21wb25lbnRcbiAgICAgICAgLy8gdG8gcHJldmVudCBkb3VibGUgcmVsb2FkcyBhbmQgYWxsb3cgZm9yIHByb3BlciBGaXJlYmFzZSBpbml0aWFsaXphdGlvblxuICAgICAgfVxuICAgIH1cbiAgfVxufSk7XG5cbmV4cG9ydCBjb25zdCB7IHRvZ2dsZURldk1vZGUgfSA9IGRldk1vZGVTbGljZS5hY3Rpb25zO1xuZXhwb3J0IGRlZmF1bHQgZGV2TW9kZVNsaWNlLnJlZHVjZXI7Il0sIm5hbWVzIjpbImNyZWF0ZVNsaWNlIiwiZ2V0SW5pdGlhbFN0YXRlIiwic2F2ZWRNb2RlIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImlzRGV2ZWxvcG1lbnQiLCJKU09OIiwicGFyc2UiLCJkb3BwbGVyQ29uZmlnIiwiZGV2TW9kZVNsaWNlIiwibmFtZSIsImluaXRpYWxTdGF0ZSIsInJlZHVjZXJzIiwidG9nZ2xlRGV2TW9kZSIsInN0YXRlIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImFjdGlvbnMiLCJyZWR1Y2VyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/redux/devModeSlice.ts\n");

/***/ }),

/***/ "./src/redux/loadingSlice.ts":
/*!***********************************!*\
  !*** ./src/redux/loadingSlice.ts ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   hideLoader: () => (/* binding */ hideLoader),\n/* harmony export */   showLoader: () => (/* binding */ showLoader)\n/* harmony export */ });\n/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @reduxjs/toolkit */ \"@reduxjs/toolkit\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__]);\n_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Define the initial state\nconst initialState = {\n    isLoading: false,\n    message: null\n};\nconst loadingSlice = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createSlice)({\n    name: \"loading\",\n    initialState,\n    reducers: {\n        // Action to show the loader\n        showLoader: (state, action)=>{\n            state.isLoading = true;\n            state.message = action?.payload?.message ?? \"Loading...\"; // Default message if no payload or no message in payload\n        },\n        // Action to hide the loader\n        hideLoader: (state)=>{\n            state.isLoading = false;\n            state.message = null; // Clear message on hide\n        }\n    }\n});\n// Export the actions\nconst { showLoader, hideLoader } = loadingSlice.actions;\n// Export the reducer\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (loadingSlice.reducer);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVkdXgvbG9hZGluZ1NsaWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBOEQ7QUFROUQsMkJBQTJCO0FBQzNCLE1BQU1DLGVBQTZCO0lBQ2pDQyxXQUFXO0lBQ1hDLFNBQVM7QUFDWDtBQU9BLE1BQU1DLGVBQWVKLDZEQUFXQSxDQUFDO0lBQy9CSyxNQUFNO0lBQ05KO0lBQ0FLLFVBQVU7UUFDUiw0QkFBNEI7UUFDNUJDLFlBQVksQ0FBQ0MsT0FBT0M7WUFDbEJELE1BQU1OLFNBQVMsR0FBRztZQUNsQk0sTUFBTUwsT0FBTyxHQUFHTSxRQUFRQyxTQUFTUCxXQUFXLGNBQWMseURBQXlEO1FBQ3JIO1FBQ0EsNEJBQTRCO1FBQzVCUSxZQUFZLENBQUNIO1lBQ1hBLE1BQU1OLFNBQVMsR0FBRztZQUNsQk0sTUFBTUwsT0FBTyxHQUFHLE1BQU0sd0JBQXdCO1FBQ2hEO0lBQ0Y7QUFDRjtBQUVBLHFCQUFxQjtBQUNkLE1BQU0sRUFBRUksVUFBVSxFQUFFSSxVQUFVLEVBQUUsR0FBR1AsYUFBYVEsT0FBTyxDQUFDO0FBRS9ELHFCQUFxQjtBQUNyQixpRUFBZVIsYUFBYVMsT0FBTyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktYXBwLy4vc3JjL3JlZHV4L2xvYWRpbmdTbGljZS50cz83ZWQ2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVNsaWNlLCBQYXlsb2FkQWN0aW9uIH0gZnJvbSAnQHJlZHV4anMvdG9vbGtpdCc7XG5cbi8vIERlZmluZSB0aGUgc2hhcGUgb2YgdGhlIGxvYWRpbmcgc3RhdGVcbmludGVyZmFjZSBMb2FkaW5nU3RhdGUge1xuICBpc0xvYWRpbmc6IGJvb2xlYW47XG4gIG1lc3NhZ2U6IHN0cmluZyB8IG51bGw7IC8vIE9wdGlvbmFsIG1lc3NhZ2UgdG8gZGlzcGxheVxufVxuXG4vLyBEZWZpbmUgdGhlIGluaXRpYWwgc3RhdGVcbmNvbnN0IGluaXRpYWxTdGF0ZTogTG9hZGluZ1N0YXRlID0ge1xuICBpc0xvYWRpbmc6IGZhbHNlLFxuICBtZXNzYWdlOiBudWxsLFxufTtcblxuLy8gRGVmaW5lIHBheWxvYWQgc3RydWN0dXJlIGZvciBzaG93aW5nIHRoZSBsb2FkZXIgKG9wdGlvbmFsIG1lc3NhZ2UpXG5pbnRlcmZhY2UgU2hvd0xvYWRlclBheWxvYWQge1xuICBtZXNzYWdlPzogc3RyaW5nO1xufVxuXG5jb25zdCBsb2FkaW5nU2xpY2UgPSBjcmVhdGVTbGljZSh7XG4gIG5hbWU6ICdsb2FkaW5nJyxcbiAgaW5pdGlhbFN0YXRlLFxuICByZWR1Y2Vyczoge1xuICAgIC8vIEFjdGlvbiB0byBzaG93IHRoZSBsb2FkZXJcbiAgICBzaG93TG9hZGVyOiAoc3RhdGUsIGFjdGlvbjogUGF5bG9hZEFjdGlvbjxTaG93TG9hZGVyUGF5bG9hZCB8IHVuZGVmaW5lZD4pID0+IHtcbiAgICAgIHN0YXRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICBzdGF0ZS5tZXNzYWdlID0gYWN0aW9uPy5wYXlsb2FkPy5tZXNzYWdlID8/ICdMb2FkaW5nLi4uJzsgLy8gRGVmYXVsdCBtZXNzYWdlIGlmIG5vIHBheWxvYWQgb3Igbm8gbWVzc2FnZSBpbiBwYXlsb2FkXG4gICAgfSxcbiAgICAvLyBBY3Rpb24gdG8gaGlkZSB0aGUgbG9hZGVyXG4gICAgaGlkZUxvYWRlcjogKHN0YXRlKSA9PiB7XG4gICAgICBzdGF0ZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgIHN0YXRlLm1lc3NhZ2UgPSBudWxsOyAvLyBDbGVhciBtZXNzYWdlIG9uIGhpZGVcbiAgICB9LFxuICB9LFxufSk7XG5cbi8vIEV4cG9ydCB0aGUgYWN0aW9uc1xuZXhwb3J0IGNvbnN0IHsgc2hvd0xvYWRlciwgaGlkZUxvYWRlciB9ID0gbG9hZGluZ1NsaWNlLmFjdGlvbnM7XG5cbi8vIEV4cG9ydCB0aGUgcmVkdWNlclxuZXhwb3J0IGRlZmF1bHQgbG9hZGluZ1NsaWNlLnJlZHVjZXI7ICJdLCJuYW1lcyI6WyJjcmVhdGVTbGljZSIsImluaXRpYWxTdGF0ZSIsImlzTG9hZGluZyIsIm1lc3NhZ2UiLCJsb2FkaW5nU2xpY2UiLCJuYW1lIiwicmVkdWNlcnMiLCJzaG93TG9hZGVyIiwic3RhdGUiLCJhY3Rpb24iLCJwYXlsb2FkIiwiaGlkZUxvYWRlciIsImFjdGlvbnMiLCJyZWR1Y2VyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/redux/loadingSlice.ts\n");

/***/ }),

/***/ "./src/redux/store.ts":
/*!****************************!*\
  !*** ./src/redux/store.ts ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   persistor: () => (/* binding */ persistor),\n/* harmony export */   store: () => (/* binding */ store)\n/* harmony export */ });\n/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @reduxjs/toolkit */ \"@reduxjs/toolkit\");\n/* harmony import */ var _userSlice__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./userSlice */ \"./src/redux/userSlice.ts\");\n/* harmony import */ var _workoutSlice__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./workoutSlice */ \"./src/redux/workoutSlice.ts\");\n/* harmony import */ var _devModeSlice__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./devModeSlice */ \"./src/redux/devModeSlice.ts\");\n/* harmony import */ var _toastSlice__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./toastSlice */ \"./src/redux/toastSlice.ts\");\n/* harmony import */ var _loadingSlice__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./loadingSlice */ \"./src/redux/loadingSlice.ts\");\n/* harmony import */ var _tempRedirectSlice__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./tempRedirectSlice */ \"./src/redux/tempRedirectSlice.ts\");\n/* harmony import */ var redux_persist__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! redux-persist */ \"redux-persist\");\n/* harmony import */ var redux_persist__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(redux_persist__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var redux_persist_indexeddb_storage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! redux-persist-indexeddb-storage */ \"redux-persist-indexeddb-storage\");\n/* harmony import */ var redux_persist_indexeddb_storage__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(redux_persist_indexeddb_storage__WEBPACK_IMPORTED_MODULE_8__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__, _userSlice__WEBPACK_IMPORTED_MODULE_1__, _workoutSlice__WEBPACK_IMPORTED_MODULE_2__, _devModeSlice__WEBPACK_IMPORTED_MODULE_3__, _toastSlice__WEBPACK_IMPORTED_MODULE_4__, _loadingSlice__WEBPACK_IMPORTED_MODULE_5__, _tempRedirectSlice__WEBPACK_IMPORTED_MODULE_6__]);\n([_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__, _userSlice__WEBPACK_IMPORTED_MODULE_1__, _workoutSlice__WEBPACK_IMPORTED_MODULE_2__, _devModeSlice__WEBPACK_IMPORTED_MODULE_3__, _toastSlice__WEBPACK_IMPORTED_MODULE_4__, _loadingSlice__WEBPACK_IMPORTED_MODULE_5__, _tempRedirectSlice__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n// Create persist config for each reducer that needs persistence\nconst userPersistConfig = {\n    key: \"user\",\n    storage: redux_persist_indexeddb_storage__WEBPACK_IMPORTED_MODULE_8___default()(\"quickliftsDB\"),\n    whitelist: [\n        \"currentUser\",\n        \"isAuthenticated\"\n    ]\n};\nconst workoutPersistConfig = {\n    key: \"workout\",\n    storage: redux_persist_indexeddb_storage__WEBPACK_IMPORTED_MODULE_8___default()(\"quickliftsDB\")\n};\nconst devModePersistConfig = {\n    key: \"devMode\",\n    storage: redux_persist_indexeddb_storage__WEBPACK_IMPORTED_MODULE_8___default()(\"quickliftsDB\")\n};\n// Create persisted reducers\nconst persistedUserReducer = (0,redux_persist__WEBPACK_IMPORTED_MODULE_7__.persistReducer)(userPersistConfig, _userSlice__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\nconst persistedWorkoutReducer = (0,redux_persist__WEBPACK_IMPORTED_MODULE_7__.persistReducer)(workoutPersistConfig, _workoutSlice__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\nconst persistedDevModeReducer = (0,redux_persist__WEBPACK_IMPORTED_MODULE_7__.persistReducer)(devModePersistConfig, _devModeSlice__WEBPACK_IMPORTED_MODULE_3__[\"default\"]);\n// Root reducer with all persisted reducers AND non-persisted reducers\nconst rootReducer = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.combineReducers)({\n    user: persistedUserReducer,\n    workout: persistedWorkoutReducer,\n    devMode: persistedDevModeReducer,\n    toast: _toastSlice__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n    loading: _loadingSlice__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\n    tempRedirect: _tempRedirectSlice__WEBPACK_IMPORTED_MODULE_6__[\"default\"]\n});\n// Create the store with the persisted reducer\nconst store = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.configureStore)({\n    reducer: rootReducer,\n    middleware: (getDefaultMiddleware)=>getDefaultMiddleware({\n            serializableCheck: {\n                // Ignore these action types\n                ignoredActions: [\n                    \"user/setUser\",\n                    \"tempRedirect/setRoundIdRedirect\",\n                    \"tempRedirect/clearRoundIdRedirect\"\n                ],\n                // Ignore these field paths in all actions\n                ignoredActionPaths: [\n                    \"meta.arg\",\n                    \"payload.createdAt\",\n                    \"payload.updatedAt\",\n                    \"payload.birthdate\"\n                ],\n                // Ignore these paths in the state\n                ignoredPaths: [\n                    \"user.currentUser.createdAt\",\n                    \"user.currentUser.updatedAt\",\n                    \"user.currentUser.birthdate\",\n                    \"user.currentUser.lastActive\",\n                    \"user.currentUser.bodyWeight\",\n                    \"user.currentUser.macros\"\n                ]\n            }\n        })\n});\nconst persistor = (0,redux_persist__WEBPACK_IMPORTED_MODULE_7__.persistStore)(store);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVkdXgvc3RvcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFtRTtBQUM3QjtBQUNNO0FBQ0E7QUFDSjtBQUNJO0FBQ1U7QUFDTztBQUNQO0FBRXRELGdFQUFnRTtBQUNoRSxNQUFNVyxvQkFBb0I7SUFDeEJDLEtBQUs7SUFDTEYsU0FBU0Esc0VBQU9BLENBQUM7SUFDakJHLFdBQVc7UUFBQztRQUFlO0tBQWtCO0FBQy9DO0FBRUEsTUFBTUMsdUJBQXVCO0lBQzNCRixLQUFLO0lBQ0xGLFNBQVNBLHNFQUFPQSxDQUFDO0FBQ25CO0FBRUEsTUFBTUssdUJBQXVCO0lBQzNCSCxLQUFLO0lBQ0xGLFNBQVNBLHNFQUFPQSxDQUFDO0FBQ25CO0FBRUEsNEJBQTRCO0FBQzVCLE1BQU1NLHVCQUF1QlAsNkRBQWNBLENBQUNFLG1CQUFtQlQsa0RBQVdBO0FBQzFFLE1BQU1lLDBCQUEwQlIsNkRBQWNBLENBQUNLLHNCQUFzQlgscURBQWNBO0FBQ25GLE1BQU1lLDBCQUEwQlQsNkRBQWNBLENBQUNNLHNCQUFzQlgscURBQWNBO0FBRW5GLHNFQUFzRTtBQUN0RSxNQUFNZSxjQUFjbEIsaUVBQWVBLENBQUM7SUFDbENtQixNQUFNSjtJQUNOSyxTQUFTSjtJQUNUSyxTQUFTSjtJQUNUSyxPQUFPbEIsbURBQVlBO0lBQ25CbUIsU0FBU2xCLHFEQUFjQTtJQUN2Qm1CLGNBQWNsQiwwREFBbUJBO0FBQ25DO0FBRUEsOENBQThDO0FBQ3ZDLE1BQU1tQixRQUFRMUIsZ0VBQWNBLENBQUM7SUFDbEMyQixTQUFTUjtJQUNUUyxZQUFZLENBQUNDLHVCQUNYQSxxQkFBcUI7WUFDbkJDLG1CQUFtQjtnQkFDakIsNEJBQTRCO2dCQUM1QkMsZ0JBQWdCO29CQUNkO29CQUNBO29CQUNBO2lCQUNEO2dCQUNELDBDQUEwQztnQkFDMUNDLG9CQUFvQjtvQkFDbEI7b0JBQ0E7b0JBQ0E7b0JBQ0E7aUJBQ0Q7Z0JBQ0Qsa0NBQWtDO2dCQUNsQ0MsY0FBYztvQkFDWjtvQkFDQTtvQkFDQTtvQkFDQTtvQkFDQTtvQkFDQTtpQkFDRDtZQUNIO1FBQ0Y7QUFDSixHQUFHO0FBRUksTUFBTUMsWUFBWTFCLDJEQUFZQSxDQUFDa0IsT0FBTyIsInNvdXJjZXMiOlsid2VicGFjazovL215LWFwcC8uL3NyYy9yZWR1eC9zdG9yZS50cz9hNWIwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbmZpZ3VyZVN0b3JlLCBjb21iaW5lUmVkdWNlcnMgfSBmcm9tICdAcmVkdXhqcy90b29sa2l0JztcbmltcG9ydCB1c2VyUmVkdWNlciBmcm9tICcuL3VzZXJTbGljZSc7XG5pbXBvcnQgd29ya291dFJlZHVjZXIgZnJvbSAnLi93b3Jrb3V0U2xpY2UnO1xuaW1wb3J0IGRldk1vZGVSZWR1Y2VyIGZyb20gJy4vZGV2TW9kZVNsaWNlJztcbmltcG9ydCB0b2FzdFJlZHVjZXIgZnJvbSAnLi90b2FzdFNsaWNlJztcbmltcG9ydCBsb2FkaW5nUmVkdWNlciBmcm9tICcuL2xvYWRpbmdTbGljZSc7XG5pbXBvcnQgdGVtcFJlZGlyZWN0UmVkdWNlciBmcm9tICcuL3RlbXBSZWRpcmVjdFNsaWNlJztcbmltcG9ydCB7IHBlcnNpc3RTdG9yZSwgcGVyc2lzdFJlZHVjZXIgfSBmcm9tICdyZWR1eC1wZXJzaXN0JztcbmltcG9ydCBzdG9yYWdlIGZyb20gJ3JlZHV4LXBlcnNpc3QtaW5kZXhlZGRiLXN0b3JhZ2UnO1xuXG4vLyBDcmVhdGUgcGVyc2lzdCBjb25maWcgZm9yIGVhY2ggcmVkdWNlciB0aGF0IG5lZWRzIHBlcnNpc3RlbmNlXG5jb25zdCB1c2VyUGVyc2lzdENvbmZpZyA9IHtcbiAga2V5OiAndXNlcicsXG4gIHN0b3JhZ2U6IHN0b3JhZ2UoJ3F1aWNrbGlmdHNEQicpLFxuICB3aGl0ZWxpc3Q6IFsnY3VycmVudFVzZXInLCAnaXNBdXRoZW50aWNhdGVkJ10sIC8vIE9ubHkgcGVyc2lzdCB0aGVzZSB1c2VyIHN0YXRlIGl0ZW1zXG59O1xuXG5jb25zdCB3b3Jrb3V0UGVyc2lzdENvbmZpZyA9IHtcbiAga2V5OiAnd29ya291dCcsXG4gIHN0b3JhZ2U6IHN0b3JhZ2UoJ3F1aWNrbGlmdHNEQicpLFxufTtcblxuY29uc3QgZGV2TW9kZVBlcnNpc3RDb25maWcgPSB7XG4gIGtleTogJ2Rldk1vZGUnLFxuICBzdG9yYWdlOiBzdG9yYWdlKCdxdWlja2xpZnRzREInKSxcbn07XG5cbi8vIENyZWF0ZSBwZXJzaXN0ZWQgcmVkdWNlcnNcbmNvbnN0IHBlcnNpc3RlZFVzZXJSZWR1Y2VyID0gcGVyc2lzdFJlZHVjZXIodXNlclBlcnNpc3RDb25maWcsIHVzZXJSZWR1Y2VyKTtcbmNvbnN0IHBlcnNpc3RlZFdvcmtvdXRSZWR1Y2VyID0gcGVyc2lzdFJlZHVjZXIod29ya291dFBlcnNpc3RDb25maWcsIHdvcmtvdXRSZWR1Y2VyKTtcbmNvbnN0IHBlcnNpc3RlZERldk1vZGVSZWR1Y2VyID0gcGVyc2lzdFJlZHVjZXIoZGV2TW9kZVBlcnNpc3RDb25maWcsIGRldk1vZGVSZWR1Y2VyKTtcblxuLy8gUm9vdCByZWR1Y2VyIHdpdGggYWxsIHBlcnNpc3RlZCByZWR1Y2VycyBBTkQgbm9uLXBlcnNpc3RlZCByZWR1Y2Vyc1xuY29uc3Qgcm9vdFJlZHVjZXIgPSBjb21iaW5lUmVkdWNlcnMoe1xuICB1c2VyOiBwZXJzaXN0ZWRVc2VyUmVkdWNlcixcbiAgd29ya291dDogcGVyc2lzdGVkV29ya291dFJlZHVjZXIsXG4gIGRldk1vZGU6IHBlcnNpc3RlZERldk1vZGVSZWR1Y2VyLFxuICB0b2FzdDogdG9hc3RSZWR1Y2VyLFxuICBsb2FkaW5nOiBsb2FkaW5nUmVkdWNlcixcbiAgdGVtcFJlZGlyZWN0OiB0ZW1wUmVkaXJlY3RSZWR1Y2VyLFxufSk7XG5cbi8vIENyZWF0ZSB0aGUgc3RvcmUgd2l0aCB0aGUgcGVyc2lzdGVkIHJlZHVjZXJcbmV4cG9ydCBjb25zdCBzdG9yZSA9IGNvbmZpZ3VyZVN0b3JlKHtcbiAgcmVkdWNlcjogcm9vdFJlZHVjZXIsXG4gIG1pZGRsZXdhcmU6IChnZXREZWZhdWx0TWlkZGxld2FyZSkgPT5cbiAgICBnZXREZWZhdWx0TWlkZGxld2FyZSh7XG4gICAgICBzZXJpYWxpemFibGVDaGVjazoge1xuICAgICAgICAvLyBJZ25vcmUgdGhlc2UgYWN0aW9uIHR5cGVzXG4gICAgICAgIGlnbm9yZWRBY3Rpb25zOiBbXG4gICAgICAgICAgJ3VzZXIvc2V0VXNlcicsIFxuICAgICAgICAgICd0ZW1wUmVkaXJlY3Qvc2V0Um91bmRJZFJlZGlyZWN0JywgLy8gQ2FuIGlnbm9yZSBpZiBwYXlsb2FkIGlzIGp1c3Qgc3RyaW5nXG4gICAgICAgICAgJ3RlbXBSZWRpcmVjdC9jbGVhclJvdW5kSWRSZWRpcmVjdCdcbiAgICAgICAgXSxcbiAgICAgICAgLy8gSWdub3JlIHRoZXNlIGZpZWxkIHBhdGhzIGluIGFsbCBhY3Rpb25zXG4gICAgICAgIGlnbm9yZWRBY3Rpb25QYXRoczogW1xuICAgICAgICAgICdtZXRhLmFyZycsIFxuICAgICAgICAgICdwYXlsb2FkLmNyZWF0ZWRBdCcsIFxuICAgICAgICAgICdwYXlsb2FkLnVwZGF0ZWRBdCcsIFxuICAgICAgICAgICdwYXlsb2FkLmJpcnRoZGF0ZSdcbiAgICAgICAgXSxcbiAgICAgICAgLy8gSWdub3JlIHRoZXNlIHBhdGhzIGluIHRoZSBzdGF0ZVxuICAgICAgICBpZ25vcmVkUGF0aHM6IFtcbiAgICAgICAgICAndXNlci5jdXJyZW50VXNlci5jcmVhdGVkQXQnLFxuICAgICAgICAgICd1c2VyLmN1cnJlbnRVc2VyLnVwZGF0ZWRBdCcsXG4gICAgICAgICAgJ3VzZXIuY3VycmVudFVzZXIuYmlydGhkYXRlJyxcbiAgICAgICAgICAndXNlci5jdXJyZW50VXNlci5sYXN0QWN0aXZlJyxcbiAgICAgICAgICAndXNlci5jdXJyZW50VXNlci5ib2R5V2VpZ2h0JywgXG4gICAgICAgICAgJ3VzZXIuY3VycmVudFVzZXIubWFjcm9zJyBcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgfSksXG59KTtcblxuZXhwb3J0IGNvbnN0IHBlcnNpc3RvciA9IHBlcnNpc3RTdG9yZShzdG9yZSk7XG5cbmV4cG9ydCB0eXBlIFJvb3RTdGF0ZSA9IFJldHVyblR5cGU8dHlwZW9mIHJvb3RSZWR1Y2VyPjtcbmV4cG9ydCB0eXBlIEFwcERpc3BhdGNoID0gdHlwZW9mIHN0b3JlLmRpc3BhdGNoOyJdLCJuYW1lcyI6WyJjb25maWd1cmVTdG9yZSIsImNvbWJpbmVSZWR1Y2VycyIsInVzZXJSZWR1Y2VyIiwid29ya291dFJlZHVjZXIiLCJkZXZNb2RlUmVkdWNlciIsInRvYXN0UmVkdWNlciIsImxvYWRpbmdSZWR1Y2VyIiwidGVtcFJlZGlyZWN0UmVkdWNlciIsInBlcnNpc3RTdG9yZSIsInBlcnNpc3RSZWR1Y2VyIiwic3RvcmFnZSIsInVzZXJQZXJzaXN0Q29uZmlnIiwia2V5Iiwid2hpdGVsaXN0Iiwid29ya291dFBlcnNpc3RDb25maWciLCJkZXZNb2RlUGVyc2lzdENvbmZpZyIsInBlcnNpc3RlZFVzZXJSZWR1Y2VyIiwicGVyc2lzdGVkV29ya291dFJlZHVjZXIiLCJwZXJzaXN0ZWREZXZNb2RlUmVkdWNlciIsInJvb3RSZWR1Y2VyIiwidXNlciIsIndvcmtvdXQiLCJkZXZNb2RlIiwidG9hc3QiLCJsb2FkaW5nIiwidGVtcFJlZGlyZWN0Iiwic3RvcmUiLCJyZWR1Y2VyIiwibWlkZGxld2FyZSIsImdldERlZmF1bHRNaWRkbGV3YXJlIiwic2VyaWFsaXphYmxlQ2hlY2siLCJpZ25vcmVkQWN0aW9ucyIsImlnbm9yZWRBY3Rpb25QYXRocyIsImlnbm9yZWRQYXRocyIsInBlcnNpc3RvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/redux/store.ts\n");

/***/ }),

/***/ "./src/redux/tempRedirectSlice.ts":
/*!****************************************!*\
  !*** ./src/redux/tempRedirectSlice.ts ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearLoginRedirectPath: () => (/* binding */ clearLoginRedirectPath),\n/* harmony export */   clearRoundIdRedirect: () => (/* binding */ clearRoundIdRedirect),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   setLoginRedirectPath: () => (/* binding */ setLoginRedirectPath),\n/* harmony export */   setRoundIdRedirect: () => (/* binding */ setRoundIdRedirect)\n/* harmony export */ });\n/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @reduxjs/toolkit */ \"@reduxjs/toolkit\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__]);\n_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst initialState = {\n    roundIdRedirect: null,\n    loginRedirectPath: null\n};\nconst tempRedirectSlice = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createSlice)({\n    name: \"tempRedirect\",\n    initialState,\n    reducers: {\n        setRoundIdRedirect (state, action) {\n            state.roundIdRedirect = action.payload;\n            state.loginRedirectPath = null;\n            console.log(\"[tempRedirectSlice] Set roundIdRedirect:\", action.payload);\n        },\n        clearRoundIdRedirect (state) {\n            state.roundIdRedirect = null;\n            console.log(\"[tempRedirectSlice] Cleared roundIdRedirect\");\n        },\n        setLoginRedirectPath (state, action) {\n            state.loginRedirectPath = action.payload;\n            console.log(\"[tempRedirectSlice] Set loginRedirectPath:\", action.payload);\n        },\n        clearLoginRedirectPath (state) {\n            state.loginRedirectPath = null;\n            console.log(\"[tempRedirectSlice] Cleared loginRedirectPath\");\n        }\n    }\n});\nconst { setRoundIdRedirect, clearRoundIdRedirect, setLoginRedirectPath, clearLoginRedirectPath } = tempRedirectSlice.actions;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (tempRedirectSlice.reducer);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVkdXgvdGVtcFJlZGlyZWN0U2xpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQThEO0FBTzlELE1BQU1DLGVBQWtDO0lBQ3RDQyxpQkFBaUI7SUFDakJDLG1CQUFtQjtBQUNyQjtBQUVBLE1BQU1DLG9CQUFvQkosNkRBQVdBLENBQUM7SUFDcENLLE1BQU07SUFDTko7SUFDQUssVUFBVTtRQUNSQyxvQkFBbUJDLEtBQUssRUFBRUMsTUFBNkI7WUFDckRELE1BQU1OLGVBQWUsR0FBR08sT0FBT0MsT0FBTztZQUN0Q0YsTUFBTUwsaUJBQWlCLEdBQUc7WUFDMUJRLFFBQVFDLEdBQUcsQ0FBQyw0Q0FBNENILE9BQU9DLE9BQU87UUFDeEU7UUFDQUcsc0JBQXFCTCxLQUFLO1lBQ3hCQSxNQUFNTixlQUFlLEdBQUc7WUFDeEJTLFFBQVFDLEdBQUcsQ0FBQztRQUNkO1FBQ0FFLHNCQUFxQk4sS0FBSyxFQUFFQyxNQUE2QjtZQUN2REQsTUFBTUwsaUJBQWlCLEdBQUdNLE9BQU9DLE9BQU87WUFDeENDLFFBQVFDLEdBQUcsQ0FBQyw4Q0FBOENILE9BQU9DLE9BQU87UUFDMUU7UUFDQUssd0JBQXVCUCxLQUFLO1lBQzFCQSxNQUFNTCxpQkFBaUIsR0FBRztZQUMxQlEsUUFBUUMsR0FBRyxDQUFDO1FBQ2Q7SUFDRjtBQUNGO0FBRU8sTUFBTSxFQUNYTCxrQkFBa0IsRUFDbEJNLG9CQUFvQixFQUNwQkMsb0JBQW9CLEVBQ3BCQyxzQkFBc0IsRUFDdkIsR0FBR1gsa0JBQWtCWSxPQUFPLENBQUM7QUFFOUIsaUVBQWVaLGtCQUFrQmEsT0FBTyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktYXBwLy4vc3JjL3JlZHV4L3RlbXBSZWRpcmVjdFNsaWNlLnRzP2EwODYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlU2xpY2UsIFBheWxvYWRBY3Rpb24gfSBmcm9tICdAcmVkdXhqcy90b29sa2l0JztcblxuaW50ZXJmYWNlIFRlbXBSZWRpcmVjdFN0YXRlIHtcbiAgcm91bmRJZFJlZGlyZWN0OiBzdHJpbmcgfCBudWxsO1xuICBsb2dpblJlZGlyZWN0UGF0aDogc3RyaW5nIHwgbnVsbDtcbn1cblxuY29uc3QgaW5pdGlhbFN0YXRlOiBUZW1wUmVkaXJlY3RTdGF0ZSA9IHtcbiAgcm91bmRJZFJlZGlyZWN0OiBudWxsLFxuICBsb2dpblJlZGlyZWN0UGF0aDogbnVsbCxcbn07XG5cbmNvbnN0IHRlbXBSZWRpcmVjdFNsaWNlID0gY3JlYXRlU2xpY2Uoe1xuICBuYW1lOiAndGVtcFJlZGlyZWN0JyxcbiAgaW5pdGlhbFN0YXRlLFxuICByZWR1Y2Vyczoge1xuICAgIHNldFJvdW5kSWRSZWRpcmVjdChzdGF0ZSwgYWN0aW9uOiBQYXlsb2FkQWN0aW9uPHN0cmluZz4pIHtcbiAgICAgIHN0YXRlLnJvdW5kSWRSZWRpcmVjdCA9IGFjdGlvbi5wYXlsb2FkO1xuICAgICAgc3RhdGUubG9naW5SZWRpcmVjdFBhdGggPSBudWxsO1xuICAgICAgY29uc29sZS5sb2coJ1t0ZW1wUmVkaXJlY3RTbGljZV0gU2V0IHJvdW5kSWRSZWRpcmVjdDonLCBhY3Rpb24ucGF5bG9hZCk7XG4gICAgfSxcbiAgICBjbGVhclJvdW5kSWRSZWRpcmVjdChzdGF0ZSkge1xuICAgICAgc3RhdGUucm91bmRJZFJlZGlyZWN0ID0gbnVsbDtcbiAgICAgIGNvbnNvbGUubG9nKCdbdGVtcFJlZGlyZWN0U2xpY2VdIENsZWFyZWQgcm91bmRJZFJlZGlyZWN0Jyk7XG4gICAgfSxcbiAgICBzZXRMb2dpblJlZGlyZWN0UGF0aChzdGF0ZSwgYWN0aW9uOiBQYXlsb2FkQWN0aW9uPHN0cmluZz4pIHtcbiAgICAgIHN0YXRlLmxvZ2luUmVkaXJlY3RQYXRoID0gYWN0aW9uLnBheWxvYWQ7XG4gICAgICBjb25zb2xlLmxvZygnW3RlbXBSZWRpcmVjdFNsaWNlXSBTZXQgbG9naW5SZWRpcmVjdFBhdGg6JywgYWN0aW9uLnBheWxvYWQpO1xuICAgIH0sXG4gICAgY2xlYXJMb2dpblJlZGlyZWN0UGF0aChzdGF0ZSkge1xuICAgICAgc3RhdGUubG9naW5SZWRpcmVjdFBhdGggPSBudWxsO1xuICAgICAgY29uc29sZS5sb2coJ1t0ZW1wUmVkaXJlY3RTbGljZV0gQ2xlYXJlZCBsb2dpblJlZGlyZWN0UGF0aCcpO1xuICAgIH0sXG4gIH0sXG59KTtcblxuZXhwb3J0IGNvbnN0IHtcbiAgc2V0Um91bmRJZFJlZGlyZWN0LFxuICBjbGVhclJvdW5kSWRSZWRpcmVjdCxcbiAgc2V0TG9naW5SZWRpcmVjdFBhdGgsXG4gIGNsZWFyTG9naW5SZWRpcmVjdFBhdGgsXG59ID0gdGVtcFJlZGlyZWN0U2xpY2UuYWN0aW9ucztcblxuZXhwb3J0IGRlZmF1bHQgdGVtcFJlZGlyZWN0U2xpY2UucmVkdWNlcjsgIl0sIm5hbWVzIjpbImNyZWF0ZVNsaWNlIiwiaW5pdGlhbFN0YXRlIiwicm91bmRJZFJlZGlyZWN0IiwibG9naW5SZWRpcmVjdFBhdGgiLCJ0ZW1wUmVkaXJlY3RTbGljZSIsIm5hbWUiLCJyZWR1Y2VycyIsInNldFJvdW5kSWRSZWRpcmVjdCIsInN0YXRlIiwiYWN0aW9uIiwicGF5bG9hZCIsImNvbnNvbGUiLCJsb2ciLCJjbGVhclJvdW5kSWRSZWRpcmVjdCIsInNldExvZ2luUmVkaXJlY3RQYXRoIiwiY2xlYXJMb2dpblJlZGlyZWN0UGF0aCIsImFjdGlvbnMiLCJyZWR1Y2VyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/redux/tempRedirectSlice.ts\n");

/***/ }),

/***/ "./src/redux/toastSlice.ts":
/*!*********************************!*\
  !*** ./src/redux/toastSlice.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   hideToast: () => (/* binding */ hideToast),\n/* harmony export */   showToast: () => (/* binding */ showToast)\n/* harmony export */ });\n/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @reduxjs/toolkit */ \"@reduxjs/toolkit\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__]);\n_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Define the initial state\nconst initialState = {\n    isVisible: false,\n    message: \"\",\n    type: \"info\",\n    duration: 3000\n};\nconst toastSlice = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createSlice)({\n    name: \"toast\",\n    initialState,\n    reducers: {\n        // Action to show the toast\n        showToast: (state, action)=>{\n            state.message = action.payload.message;\n            state.type = action.payload.type ?? initialState.type; // Use default if not provided\n            state.duration = action.payload.duration ?? initialState.duration; // Use default if not provided\n            state.isVisible = true;\n        },\n        // Action to hide the toast\n        hideToast: (state)=>{\n            state.isVisible = false;\n        // Optionally reset message/type when hiding\n        // state.message = '';\n        // state.type = 'info';\n        }\n    }\n});\n// Export the actions\nconst { showToast, hideToast } = toastSlice.actions;\n// Export the reducer\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (toastSlice.reducer);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVkdXgvdG9hc3RTbGljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQThEO0FBVTlELDJCQUEyQjtBQUMzQixNQUFNQyxlQUEyQjtJQUMvQkMsV0FBVztJQUNYQyxTQUFTO0lBQ1RDLE1BQU07SUFDTkMsVUFBVTtBQUNaO0FBU0EsTUFBTUMsYUFBYU4sNkRBQVdBLENBQUM7SUFDN0JPLE1BQU07SUFDTk47SUFDQU8sVUFBVTtRQUNSLDJCQUEyQjtRQUMzQkMsV0FBVyxDQUFDQyxPQUFPQztZQUNqQkQsTUFBTVAsT0FBTyxHQUFHUSxPQUFPQyxPQUFPLENBQUNULE9BQU87WUFDdENPLE1BQU1OLElBQUksR0FBR08sT0FBT0MsT0FBTyxDQUFDUixJQUFJLElBQUlILGFBQWFHLElBQUksRUFBRSw4QkFBOEI7WUFDckZNLE1BQU1MLFFBQVEsR0FBR00sT0FBT0MsT0FBTyxDQUFDUCxRQUFRLElBQUlKLGFBQWFJLFFBQVEsRUFBRSw4QkFBOEI7WUFDakdLLE1BQU1SLFNBQVMsR0FBRztRQUNwQjtRQUNBLDJCQUEyQjtRQUMzQlcsV0FBVyxDQUFDSDtZQUNWQSxNQUFNUixTQUFTLEdBQUc7UUFDbEIsNENBQTRDO1FBQzVDLHNCQUFzQjtRQUN0Qix1QkFBdUI7UUFDekI7SUFDRjtBQUNGO0FBRUEscUJBQXFCO0FBQ2QsTUFBTSxFQUFFTyxTQUFTLEVBQUVJLFNBQVMsRUFBRSxHQUFHUCxXQUFXUSxPQUFPLENBQUM7QUFFM0QscUJBQXFCO0FBQ3JCLGlFQUFlUixXQUFXUyxPQUFPLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1hcHAvLi9zcmMvcmVkdXgvdG9hc3RTbGljZS50cz9mZWVjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVNsaWNlLCBQYXlsb2FkQWN0aW9uIH0gZnJvbSAnQHJlZHV4anMvdG9vbGtpdCc7XG5cbi8vIERlZmluZSB0aGUgc2hhcGUgb2YgdGhlIHRvYXN0IHN0YXRlXG5pbnRlcmZhY2UgVG9hc3RTdGF0ZSB7XG4gIGlzVmlzaWJsZTogYm9vbGVhbjtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICB0eXBlOiAnc3VjY2VzcycgfCAnZXJyb3InIHwgJ2luZm8nIHwgJ3dhcm5pbmcnIHwgJ2F3YXJkJztcbiAgZHVyYXRpb246IG51bWJlcjsgLy8gRHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzXG59XG5cbi8vIERlZmluZSB0aGUgaW5pdGlhbCBzdGF0ZVxuY29uc3QgaW5pdGlhbFN0YXRlOiBUb2FzdFN0YXRlID0ge1xuICBpc1Zpc2libGU6IGZhbHNlLFxuICBtZXNzYWdlOiAnJyxcbiAgdHlwZTogJ2luZm8nLCAvLyBEZWZhdWx0IHR5cGVcbiAgZHVyYXRpb246IDMwMDAsIC8vIERlZmF1bHQgZHVyYXRpb24gMyBzZWNvbmRzXG59O1xuXG4vLyBEZWZpbmUgcGF5bG9hZCBzdHJ1Y3R1cmUgZm9yIHNob3dpbmcgdGhlIHRvYXN0XG5pbnRlcmZhY2UgU2hvd1RvYXN0UGF5bG9hZCB7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgdHlwZT86ICdzdWNjZXNzJyB8ICdlcnJvcicgfCAnaW5mbycgfCAnd2FybmluZycgfCAnYXdhcmQnO1xuICBkdXJhdGlvbj86IG51bWJlcjtcbn1cblxuY29uc3QgdG9hc3RTbGljZSA9IGNyZWF0ZVNsaWNlKHtcbiAgbmFtZTogJ3RvYXN0JyxcbiAgaW5pdGlhbFN0YXRlLFxuICByZWR1Y2Vyczoge1xuICAgIC8vIEFjdGlvbiB0byBzaG93IHRoZSB0b2FzdFxuICAgIHNob3dUb2FzdDogKHN0YXRlLCBhY3Rpb246IFBheWxvYWRBY3Rpb248U2hvd1RvYXN0UGF5bG9hZD4pID0+IHtcbiAgICAgIHN0YXRlLm1lc3NhZ2UgPSBhY3Rpb24ucGF5bG9hZC5tZXNzYWdlO1xuICAgICAgc3RhdGUudHlwZSA9IGFjdGlvbi5wYXlsb2FkLnR5cGUgPz8gaW5pdGlhbFN0YXRlLnR5cGU7IC8vIFVzZSBkZWZhdWx0IGlmIG5vdCBwcm92aWRlZFxuICAgICAgc3RhdGUuZHVyYXRpb24gPSBhY3Rpb24ucGF5bG9hZC5kdXJhdGlvbiA/PyBpbml0aWFsU3RhdGUuZHVyYXRpb247IC8vIFVzZSBkZWZhdWx0IGlmIG5vdCBwcm92aWRlZFxuICAgICAgc3RhdGUuaXNWaXNpYmxlID0gdHJ1ZTtcbiAgICB9LFxuICAgIC8vIEFjdGlvbiB0byBoaWRlIHRoZSB0b2FzdFxuICAgIGhpZGVUb2FzdDogKHN0YXRlKSA9PiB7XG4gICAgICBzdGF0ZS5pc1Zpc2libGUgPSBmYWxzZTtcbiAgICAgIC8vIE9wdGlvbmFsbHkgcmVzZXQgbWVzc2FnZS90eXBlIHdoZW4gaGlkaW5nXG4gICAgICAvLyBzdGF0ZS5tZXNzYWdlID0gJyc7XG4gICAgICAvLyBzdGF0ZS50eXBlID0gJ2luZm8nO1xuICAgIH0sXG4gIH0sXG59KTtcblxuLy8gRXhwb3J0IHRoZSBhY3Rpb25zXG5leHBvcnQgY29uc3QgeyBzaG93VG9hc3QsIGhpZGVUb2FzdCB9ID0gdG9hc3RTbGljZS5hY3Rpb25zO1xuXG4vLyBFeHBvcnQgdGhlIHJlZHVjZXJcbmV4cG9ydCBkZWZhdWx0IHRvYXN0U2xpY2UucmVkdWNlcjsgIl0sIm5hbWVzIjpbImNyZWF0ZVNsaWNlIiwiaW5pdGlhbFN0YXRlIiwiaXNWaXNpYmxlIiwibWVzc2FnZSIsInR5cGUiLCJkdXJhdGlvbiIsInRvYXN0U2xpY2UiLCJuYW1lIiwicmVkdWNlcnMiLCJzaG93VG9hc3QiLCJzdGF0ZSIsImFjdGlvbiIsInBheWxvYWQiLCJoaWRlVG9hc3QiLCJhY3Rpb25zIiwicmVkdWNlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/redux/toastSlice.ts\n");

/***/ }),

/***/ "./src/redux/userSlice.ts":
/*!********************************!*\
  !*** ./src/redux/userSlice.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   setLoading: () => (/* binding */ setLoading),\n/* harmony export */   setUser: () => (/* binding */ setUser)\n/* harmony export */ });\n/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @reduxjs/toolkit */ \"@reduxjs/toolkit\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__]);\n_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst initialState = {\n    currentUser: null,\n    loading: true\n};\nconst userSlice = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createSlice)({\n    name: \"user\",\n    initialState,\n    reducers: {\n        setUser: (state, action)=>{\n            const userData = action.payload;\n            if (userData && typeof userData.toDictionary === \"function\") {\n                // If it looks like our User class instance, convert it\n                console.warn(\"[userSlice] setUser received a User instance, converting to dictionary.\");\n                state.currentUser = userData.toDictionary();\n            } else {\n                // Otherwise, assume it's already a plain object or null\n                state.currentUser = userData;\n            }\n        },\n        setLoading: (state, action)=>{\n            state.loading = action.payload;\n        }\n    }\n});\nconst { setUser, setLoading } = userSlice.actions;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (userSlice.reducer);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVkdXgvdXNlclNsaWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBOEQ7QUFPOUQsTUFBTUMsZUFBMEI7SUFDOUJDLGFBQWE7SUFDYkMsU0FBUztBQUNYO0FBRUEsTUFBTUMsWUFBWUosNkRBQVdBLENBQUM7SUFDNUJLLE1BQU07SUFDTko7SUFDQUssVUFBVTtRQUNSQyxTQUFTLENBQUNDLE9BQU9DO1lBQ2YsTUFBTUMsV0FBV0QsT0FBT0UsT0FBTztZQUMvQixJQUFJRCxZQUFZLE9BQU9BLFNBQVNFLFlBQVksS0FBSyxZQUFZO2dCQUMzRCx1REFBdUQ7Z0JBQ3ZEQyxRQUFRQyxJQUFJLENBQUM7Z0JBQ2JOLE1BQU1OLFdBQVcsR0FBR1EsU0FBU0UsWUFBWTtZQUMzQyxPQUFPO2dCQUNMLHdEQUF3RDtnQkFDeERKLE1BQU1OLFdBQVcsR0FBR1E7WUFDdEI7UUFDRjtRQUNBSyxZQUFZLENBQUNQLE9BQU9DO1lBQ2xCRCxNQUFNTCxPQUFPLEdBQUdNLE9BQU9FLE9BQU87UUFDaEM7SUFDRjtBQUNGO0FBRU8sTUFBTSxFQUFFSixPQUFPLEVBQUVRLFVBQVUsRUFBRSxHQUFHWCxVQUFVWSxPQUFPLENBQUM7QUFDekQsaUVBQWVaLFVBQVVhLE9BQU8sRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL215LWFwcC8uL3NyYy9yZWR1eC91c2VyU2xpY2UudHM/YTQzNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVTbGljZSwgUGF5bG9hZEFjdGlvbiB9IGZyb20gJ0ByZWR1eGpzL3Rvb2xraXQnO1xuXG5pbnRlcmZhY2UgVXNlclN0YXRlIHtcbiAgY3VycmVudFVzZXI6IFJlY29yZDxzdHJpbmcsIGFueT4gfCBudWxsOyAvLyBEaWN0aW9uYXJ5IHJlcHJlc2VudGF0aW9uXG4gIGxvYWRpbmc6IGJvb2xlYW47XG59XG5cbmNvbnN0IGluaXRpYWxTdGF0ZTogVXNlclN0YXRlID0ge1xuICBjdXJyZW50VXNlcjogbnVsbCxcbiAgbG9hZGluZzogdHJ1ZSxcbn07XG5cbmNvbnN0IHVzZXJTbGljZSA9IGNyZWF0ZVNsaWNlKHtcbiAgbmFtZTogJ3VzZXInLFxuICBpbml0aWFsU3RhdGUsXG4gIHJlZHVjZXJzOiB7XG4gICAgc2V0VXNlcjogKHN0YXRlLCBhY3Rpb246IFBheWxvYWRBY3Rpb248YW55PikgPT4ge1xuICAgICAgY29uc3QgdXNlckRhdGEgPSBhY3Rpb24ucGF5bG9hZDtcbiAgICAgIGlmICh1c2VyRGF0YSAmJiB0eXBlb2YgdXNlckRhdGEudG9EaWN0aW9uYXJ5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIElmIGl0IGxvb2tzIGxpa2Ugb3VyIFVzZXIgY2xhc3MgaW5zdGFuY2UsIGNvbnZlcnQgaXRcbiAgICAgICAgY29uc29sZS53YXJuKCdbdXNlclNsaWNlXSBzZXRVc2VyIHJlY2VpdmVkIGEgVXNlciBpbnN0YW5jZSwgY29udmVydGluZyB0byBkaWN0aW9uYXJ5LicpO1xuICAgICAgICBzdGF0ZS5jdXJyZW50VXNlciA9IHVzZXJEYXRhLnRvRGljdGlvbmFyeSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBhc3N1bWUgaXQncyBhbHJlYWR5IGEgcGxhaW4gb2JqZWN0IG9yIG51bGxcbiAgICAgICAgc3RhdGUuY3VycmVudFVzZXIgPSB1c2VyRGF0YTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHNldExvYWRpbmc6IChzdGF0ZSwgYWN0aW9uOiBQYXlsb2FkQWN0aW9uPGJvb2xlYW4+KSA9PiB7XG4gICAgICBzdGF0ZS5sb2FkaW5nID0gYWN0aW9uLnBheWxvYWQ7XG4gICAgfSxcbiAgfSxcbn0pO1xuXG5leHBvcnQgY29uc3QgeyBzZXRVc2VyLCBzZXRMb2FkaW5nIH0gPSB1c2VyU2xpY2UuYWN0aW9ucztcbmV4cG9ydCBkZWZhdWx0IHVzZXJTbGljZS5yZWR1Y2VyOyJdLCJuYW1lcyI6WyJjcmVhdGVTbGljZSIsImluaXRpYWxTdGF0ZSIsImN1cnJlbnRVc2VyIiwibG9hZGluZyIsInVzZXJTbGljZSIsIm5hbWUiLCJyZWR1Y2VycyIsInNldFVzZXIiLCJzdGF0ZSIsImFjdGlvbiIsInVzZXJEYXRhIiwicGF5bG9hZCIsInRvRGljdGlvbmFyeSIsImNvbnNvbGUiLCJ3YXJuIiwic2V0TG9hZGluZyIsImFjdGlvbnMiLCJyZWR1Y2VyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/redux/userSlice.ts\n");

/***/ }),

/***/ "./src/redux/workoutSlice.ts":
/*!***********************************!*\
  !*** ./src/redux/workoutSlice.ts ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   resetWorkoutState: () => (/* binding */ resetWorkoutState),\n/* harmony export */   setCurrentExerciseLogs: () => (/* binding */ setCurrentExerciseLogs),\n/* harmony export */   setCurrentWorkout: () => (/* binding */ setCurrentWorkout),\n/* harmony export */   setWorkoutSummary: () => (/* binding */ setWorkoutSummary)\n/* harmony export */ });\n/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @reduxjs/toolkit */ \"@reduxjs/toolkit\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__]);\n_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst initialState = {\n    currentWorkout: null,\n    currentExerciseLogs: [],\n    workoutSummary: null\n};\nconst workoutSlice = (0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.createSlice)({\n    name: \"workout\",\n    initialState,\n    reducers: {\n        clearWorkoutState: (state)=>{\n            return initialState;\n        },\n        setCurrentWorkout: (state, action)=>{\n            state.currentWorkout = action.payload;\n        },\n        setCurrentExerciseLogs: (state, action)=>{\n            state.currentExerciseLogs = action.payload;\n        },\n        setWorkoutSummary: (state, action)=>{\n            state.workoutSummary = action.payload;\n        },\n        resetWorkoutState: (state)=>{\n            state.currentWorkout = null;\n            state.currentExerciseLogs = [];\n            state.workoutSummary = null;\n        }\n    }\n});\nconst { setCurrentWorkout, setCurrentExerciseLogs, setWorkoutSummary, resetWorkoutState } = workoutSlice.actions;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (workoutSlice.reducer);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcmVkdXgvd29ya291dFNsaWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUE4RDtBQVE5RCxNQUFNQyxlQUE2QjtJQUNqQ0MsZ0JBQWdCO0lBQ2hCQyxxQkFBcUIsRUFBRTtJQUN2QkMsZ0JBQWdCO0FBQ2xCO0FBRUEsTUFBTUMsZUFBZUwsNkRBQVdBLENBQUM7SUFDL0JNLE1BQU07SUFDTkw7SUFDQU0sVUFBVTtRQUNSQyxtQkFBbUIsQ0FBQ0M7WUFDbEIsT0FBT1I7UUFDVDtRQUNBUyxtQkFBbUIsQ0FBQ0QsT0FBT0U7WUFDekJGLE1BQU1QLGNBQWMsR0FBR1MsT0FBT0MsT0FBTztRQUN2QztRQUNBQyx3QkFBd0IsQ0FBQ0osT0FBT0U7WUFDOUJGLE1BQU1OLG1CQUFtQixHQUFHUSxPQUFPQyxPQUFPO1FBQzVDO1FBQ0FFLG1CQUFtQixDQUFDTCxPQUFPRTtZQUN6QkYsTUFBTUwsY0FBYyxHQUFHTyxPQUFPQyxPQUFPO1FBQ3ZDO1FBQ0FHLG1CQUFtQixDQUFDTjtZQUNsQkEsTUFBTVAsY0FBYyxHQUFHO1lBQ3ZCTyxNQUFNTixtQkFBbUIsR0FBRyxFQUFFO1lBQzlCTSxNQUFNTCxjQUFjLEdBQUc7UUFDekI7SUFDRjtBQUNGO0FBRU8sTUFBTSxFQUFFTSxpQkFBaUIsRUFBRUcsc0JBQXNCLEVBQUVDLGlCQUFpQixFQUFFQyxpQkFBaUIsRUFBRSxHQUFHVixhQUFhVyxPQUFPLENBQUM7QUFDeEgsaUVBQWVYLGFBQWFZLE9BQU8sRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL215LWFwcC8uL3NyYy9yZWR1eC93b3Jrb3V0U2xpY2UudHM/ZTk1ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVTbGljZSwgUGF5bG9hZEFjdGlvbiB9IGZyb20gJ0ByZWR1eGpzL3Rvb2xraXQnO1xuXG5pbnRlcmZhY2UgV29ya291dFN0YXRlIHtcbiAgY3VycmVudFdvcmtvdXQ6IFJlY29yZDxzdHJpbmcsIGFueT4gfCBudWxsO1xuICBjdXJyZW50RXhlcmNpc2VMb2dzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+W107XG4gIHdvcmtvdXRTdW1tYXJ5OiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgbnVsbDtcbn1cblxuY29uc3QgaW5pdGlhbFN0YXRlOiBXb3Jrb3V0U3RhdGUgPSB7XG4gIGN1cnJlbnRXb3Jrb3V0OiBudWxsLFxuICBjdXJyZW50RXhlcmNpc2VMb2dzOiBbXSxcbiAgd29ya291dFN1bW1hcnk6IG51bGxcbn07XG5cbmNvbnN0IHdvcmtvdXRTbGljZSA9IGNyZWF0ZVNsaWNlKHtcbiAgbmFtZTogJ3dvcmtvdXQnLFxuICBpbml0aWFsU3RhdGUsXG4gIHJlZHVjZXJzOiB7XG4gICAgY2xlYXJXb3Jrb3V0U3RhdGU6IChzdGF0ZSkgPT4ge1xuICAgICAgcmV0dXJuIGluaXRpYWxTdGF0ZTtcbiAgICB9LFxuICAgIHNldEN1cnJlbnRXb3Jrb3V0OiAoc3RhdGUsIGFjdGlvbjogUGF5bG9hZEFjdGlvbjxSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgbnVsbD4pID0+IHtcbiAgICAgIHN0YXRlLmN1cnJlbnRXb3Jrb3V0ID0gYWN0aW9uLnBheWxvYWQ7XG4gICAgfSxcbiAgICBzZXRDdXJyZW50RXhlcmNpc2VMb2dzOiAoc3RhdGUsIGFjdGlvbjogUGF5bG9hZEFjdGlvbjxSZWNvcmQ8c3RyaW5nLCBhbnk+W10+KSA9PiB7XG4gICAgICBzdGF0ZS5jdXJyZW50RXhlcmNpc2VMb2dzID0gYWN0aW9uLnBheWxvYWQ7XG4gICAgfSxcbiAgICBzZXRXb3Jrb3V0U3VtbWFyeTogKHN0YXRlLCBhY3Rpb246IFBheWxvYWRBY3Rpb248UmVjb3JkPHN0cmluZywgYW55PiB8IG51bGw+KSA9PiB7XG4gICAgICBzdGF0ZS53b3Jrb3V0U3VtbWFyeSA9IGFjdGlvbi5wYXlsb2FkO1xuICAgIH0sXG4gICAgcmVzZXRXb3Jrb3V0U3RhdGU6IChzdGF0ZSkgPT4ge1xuICAgICAgc3RhdGUuY3VycmVudFdvcmtvdXQgPSBudWxsO1xuICAgICAgc3RhdGUuY3VycmVudEV4ZXJjaXNlTG9ncyA9IFtdO1xuICAgICAgc3RhdGUud29ya291dFN1bW1hcnkgPSBudWxsO1xuICAgIH0sXG4gIH0sXG59KTtcblxuZXhwb3J0IGNvbnN0IHsgc2V0Q3VycmVudFdvcmtvdXQsIHNldEN1cnJlbnRFeGVyY2lzZUxvZ3MsIHNldFdvcmtvdXRTdW1tYXJ5LCByZXNldFdvcmtvdXRTdGF0ZSB9ID0gd29ya291dFNsaWNlLmFjdGlvbnM7XG5leHBvcnQgZGVmYXVsdCB3b3Jrb3V0U2xpY2UucmVkdWNlcjsiXSwibmFtZXMiOlsiY3JlYXRlU2xpY2UiLCJpbml0aWFsU3RhdGUiLCJjdXJyZW50V29ya291dCIsImN1cnJlbnRFeGVyY2lzZUxvZ3MiLCJ3b3Jrb3V0U3VtbWFyeSIsIndvcmtvdXRTbGljZSIsIm5hbWUiLCJyZWR1Y2VycyIsImNsZWFyV29ya291dFN0YXRlIiwic3RhdGUiLCJzZXRDdXJyZW50V29ya291dCIsImFjdGlvbiIsInBheWxvYWQiLCJzZXRDdXJyZW50RXhlcmNpc2VMb2dzIiwic2V0V29ya291dFN1bW1hcnkiLCJyZXNldFdvcmtvdXRTdGF0ZSIsImFjdGlvbnMiLCJyZWR1Y2VyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/redux/workoutSlice.ts\n");

/***/ }),

/***/ "./src/utils/envDebug.ts":
/*!*******************************!*\
  !*** ./src/utils/envDebug.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logEnvStatus: () => (/* binding */ logEnvStatus)\n/* harmony export */ });\n/**\n * Utility functions for debugging environment variables\n * IMPORTANT: Only use during development and remove before production\n */ const logEnvStatus = ()=>{\n    if (false) {}\n    const isLocalhost =  false && 0;\n    const isDev = window.localStorage.getItem(\"devMode\") === \"true\";\n    // Check which environment variables are available (without logging values)\n    const envCheck = {\n        production: {\n            NEXT_PUBLIC_FIREBASE_API_KEY: !!\"AIzaSyBmf38HJ65h5GuGGzNtPA6Qy2FRZIrSX7c\",\n            NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN: !!\"quicklifts-dd3f1.firebaseapp.com\",\n            NEXT_PUBLIC_FIREBASE_PROJECT_ID: !!\"quicklifts-dd3f1\",\n            NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET: !!\"quicklifts-dd3f1.appspot.com\",\n            NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID: !!\"691046627244\",\n            NEXT_PUBLIC_FIREBASE_APP_ID: !!\"1:691046627244:web:877d908f23c34840a9ec09\"\n        },\n        development: {\n            NEXT_PUBLIC_DEV_FIREBASE_API_KEY: !!\"AIzaSyDy25daRNR3sd9P9OJKYnoQmLkQlhuQcy4\",\n            NEXT_PUBLIC_DEV_FIREBASE_AUTH_DOMAIN: !!\"quicklifts-dev-01.firebaseapp.com\",\n            NEXT_PUBLIC_DEV_FIREBASE_PROJECT_ID: !!\"quicklifts-dev-01\",\n            NEXT_PUBLIC_DEV_FIREBASE_STORAGE_BUCKET: !!\"quicklifts-dev-01.appspot.com\",\n            NEXT_PUBLIC_DEV_FIREBASE_MESSAGING_SENDER_ID: !!\"793216169358\",\n            NEXT_PUBLIC_DEV_FIREBASE_APP_ID: !!\"1:793216169358:ios:cecca8dfb08ea5df8aa0df\"\n        },\n        // Project IDs are safe to expose and useful for debugging\n        projectIds: {\n            production: \"quicklifts-dd3f1\",\n            development: \"quicklifts-dev-01\"\n        }\n    };\n    // Log which config should be used based on current mode\n    console.group(\"\\uD83D\\uDD0D Environment Variables Status\");\n    console.log(`Environment: ${\"development\"}`);\n    console.log(`Is Localhost: ${isLocalhost}`);\n    console.log(`Mode: ${isDev ? \"Development\" : \"Production\"}`);\n    console.log(`Config source: ${isLocalhost ? \".env.local\" : isDev ? \"firebaseConfigs\" : \"Netlify\"}`);\n    if (isDev) {\n        console.log(\"Development variables available:\", envCheck.development);\n        console.log(\"Using project ID:\", envCheck.projectIds.development);\n    } else {\n        console.log(\"Production variables available:\", envCheck.production);\n        console.log(\"Using project ID:\", envCheck.projectIds.production);\n    }\n    console.groupEnd();\n    return {\n        isLocalhost,\n        isDev,\n        configSource: isLocalhost ? \".env.local\" : isDev ? \"firebaseConfigs\" : \"Netlify\",\n        variables: isDev ? envCheck.development : envCheck.production,\n        projectId: isDev ? envCheck.projectIds.development : envCheck.projectIds.production\n    };\n};\n// Add to window object for easy console access during development\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvZW52RGVidWcudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7Q0FHQyxHQUVNLE1BQU1BLGVBQWU7SUFDMUIsSUFBSUMsS0FBeUIsRUFBZSxFQUczQztJQUVELE1BQU1HLGNBQWMsTUFBa0IsSUFBZUMsQ0FBNkI7SUFDbEYsTUFBTUcsUUFBUUgsT0FBT0ksWUFBWSxDQUFDQyxPQUFPLENBQUMsZUFBZTtJQUV6RCwyRUFBMkU7SUFDM0UsTUFBTUMsV0FBVztRQUNmQyxZQUFZO1lBQ1ZDLDhCQUE4QixDQUFDLENBQUNaLHlDQUF3QztZQUN4RWMsa0NBQWtDLENBQUMsQ0FBQ2Qsa0NBQTRDO1lBQ2hGZSxpQ0FBaUMsQ0FBQyxDQUFDZixrQkFBMkM7WUFDOUVnQixxQ0FBcUMsQ0FBQyxDQUFDaEIsOEJBQStDO1lBQ3RGaUIsMENBQTBDLENBQUMsQ0FBQ2pCLGNBQW9EO1lBQ2hHa0IsNkJBQTZCLENBQUMsQ0FBQ2xCLDJDQUF1QztRQUN4RTtRQUNBbUIsYUFBYTtZQUNYQyxrQ0FBa0MsQ0FBQyxDQUFDcEIseUNBQTRDO1lBQ2hGcUIsc0NBQXNDLENBQUMsQ0FBQ3JCLG1DQUFnRDtZQUN4RnNCLHFDQUFxQyxDQUFDLENBQUN0QixtQkFBK0M7WUFDdEZ1Qix5Q0FBeUMsQ0FBQyxDQUFDdkIsK0JBQW1EO1lBQzlGd0IsOENBQThDLENBQUMsQ0FBQ3hCLGNBQXdEO1lBQ3hHeUIsaUNBQWlDLENBQUMsQ0FBQ3pCLDJDQUEyQztRQUNoRjtRQUNBLDBEQUEwRDtRQUMxRDBCLFlBQVk7WUFDVmYsWUFBWVgsa0JBQTJDO1lBQ3ZEbUIsYUFBYW5CLG1CQUErQztRQUM5RDtJQUNGO0lBRUEsd0RBQXdEO0lBQ3hEQyxRQUFRMEIsS0FBSyxDQUFDO0lBRWQxQixRQUFRMkIsR0FBRyxDQUFDLENBQUMsYUFBYSxFQTFDNUIsY0EwQ21ELENBQUM7SUFDbEQzQixRQUFRMkIsR0FBRyxDQUFDLENBQUMsY0FBYyxFQUFFekIsWUFBWSxDQUFDO0lBQzFDRixRQUFRMkIsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFckIsUUFBUSxnQkFBZ0IsYUFBYSxDQUFDO0lBQzNETixRQUFRMkIsR0FBRyxDQUFDLENBQUMsZUFBZSxFQUFFekIsY0FBYyxlQUFnQkksUUFBUSxvQkFBb0IsVUFBVyxDQUFDO0lBRXBHLElBQUlBLE9BQU87UUFDVE4sUUFBUTJCLEdBQUcsQ0FBQyxvQ0FBb0NsQixTQUFTUyxXQUFXO1FBQ3BFbEIsUUFBUTJCLEdBQUcsQ0FBQyxxQkFBcUJsQixTQUFTZ0IsVUFBVSxDQUFDUCxXQUFXO0lBQ2xFLE9BQU87UUFDTGxCLFFBQVEyQixHQUFHLENBQUMsbUNBQW1DbEIsU0FBU0MsVUFBVTtRQUNsRVYsUUFBUTJCLEdBQUcsQ0FBQyxxQkFBcUJsQixTQUFTZ0IsVUFBVSxDQUFDZixVQUFVO0lBQ2pFO0lBRUFWLFFBQVE0QixRQUFRO0lBRWhCLE9BQU87UUFDTDFCO1FBQ0FJO1FBQ0F1QixjQUFjM0IsY0FBYyxlQUFnQkksUUFBUSxvQkFBb0I7UUFDeEV3QixXQUFXeEIsUUFBUUcsU0FBU1MsV0FBVyxHQUFHVCxTQUFTQyxVQUFVO1FBQzdEcUIsV0FBV3pCLFFBQVFHLFNBQVNnQixVQUFVLENBQUNQLFdBQVcsR0FBR1QsU0FBU2dCLFVBQVUsQ0FBQ2YsVUFBVTtJQUNyRjtBQUNGLEVBQUU7QUFFRixrRUFBa0U7QUFDbEUsSUFBSSxLQUEwRCxFQUFlLEVBSTVFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktYXBwLy4vc3JjL3V0aWxzL2VudkRlYnVnLnRzPzRmZGQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgZGVidWdnaW5nIGVudmlyb25tZW50IHZhcmlhYmxlc1xuICogSU1QT1JUQU5UOiBPbmx5IHVzZSBkdXJpbmcgZGV2ZWxvcG1lbnQgYW5kIHJlbW92ZSBiZWZvcmUgcHJvZHVjdGlvblxuICovXG5cbmV4cG9ydCBjb25zdCBsb2dFbnZTdGF0dXMgPSAoKSA9PiB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ2RldmVsb3BtZW50Jykge1xuICAgIGNvbnNvbGUud2FybignW0VudkRlYnVnXSBUaGlzIGZ1bmN0aW9uIHNob3VsZCBvbmx5IGJlIHVzZWQgZHVyaW5nIGRldmVsb3BtZW50Jyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgaXNMb2NhbGhvc3QgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnO1xuICBjb25zdCBpc0RldiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZGV2TW9kZScpID09PSAndHJ1ZSc7XG5cbiAgLy8gQ2hlY2sgd2hpY2ggZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBhdmFpbGFibGUgKHdpdGhvdXQgbG9nZ2luZyB2YWx1ZXMpXG4gIGNvbnN0IGVudkNoZWNrID0ge1xuICAgIHByb2R1Y3Rpb246IHtcbiAgICAgIE5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQSV9LRVk6ICEhcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRklSRUJBU0VfQVBJX0tFWSxcbiAgICAgIE5FWFRfUFVCTElDX0ZJUkVCQVNFX0FVVEhfRE9NQUlOOiAhIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FVVEhfRE9NQUlOLFxuICAgICAgTkVYVF9QVUJMSUNfRklSRUJBU0VfUFJPSkVDVF9JRDogISFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9QUk9KRUNUX0lELFxuICAgICAgTkVYVF9QVUJMSUNfRklSRUJBU0VfU1RPUkFHRV9CVUNLRVQ6ICEhcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRklSRUJBU0VfU1RPUkFHRV9CVUNLRVQsXG4gICAgICBORVhUX1BVQkxJQ19GSVJFQkFTRV9NRVNTQUdJTkdfU0VOREVSX0lEOiAhIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX01FU1NBR0lOR19TRU5ERVJfSUQsXG4gICAgICBORVhUX1BVQkxJQ19GSVJFQkFTRV9BUFBfSUQ6ICEhcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRklSRUJBU0VfQVBQX0lELFxuICAgIH0sXG4gICAgZGV2ZWxvcG1lbnQ6IHtcbiAgICAgIE5FWFRfUFVCTElDX0RFVl9GSVJFQkFTRV9BUElfS0VZOiAhIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0RFVl9GSVJFQkFTRV9BUElfS0VZLFxuICAgICAgTkVYVF9QVUJMSUNfREVWX0ZJUkVCQVNFX0FVVEhfRE9NQUlOOiAhIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0RFVl9GSVJFQkFTRV9BVVRIX0RPTUFJTixcbiAgICAgIE5FWFRfUFVCTElDX0RFVl9GSVJFQkFTRV9QUk9KRUNUX0lEOiAhIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0RFVl9GSVJFQkFTRV9QUk9KRUNUX0lELFxuICAgICAgTkVYVF9QVUJMSUNfREVWX0ZJUkVCQVNFX1NUT1JBR0VfQlVDS0VUOiAhIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0RFVl9GSVJFQkFTRV9TVE9SQUdFX0JVQ0tFVCxcbiAgICAgIE5FWFRfUFVCTElDX0RFVl9GSVJFQkFTRV9NRVNTQUdJTkdfU0VOREVSX0lEOiAhIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0RFVl9GSVJFQkFTRV9NRVNTQUdJTkdfU0VOREVSX0lELFxuICAgICAgTkVYVF9QVUJMSUNfREVWX0ZJUkVCQVNFX0FQUF9JRDogISFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19ERVZfRklSRUJBU0VfQVBQX0lELFxuICAgIH0sXG4gICAgLy8gUHJvamVjdCBJRHMgYXJlIHNhZmUgdG8gZXhwb3NlIGFuZCB1c2VmdWwgZm9yIGRlYnVnZ2luZ1xuICAgIHByb2plY3RJZHM6IHtcbiAgICAgIHByb2R1Y3Rpb246IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX1BST0pFQ1RfSUQsXG4gICAgICBkZXZlbG9wbWVudDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfREVWX0ZJUkVCQVNFX1BST0pFQ1RfSUQsXG4gICAgfVxuICB9O1xuXG4gIC8vIExvZyB3aGljaCBjb25maWcgc2hvdWxkIGJlIHVzZWQgYmFzZWQgb24gY3VycmVudCBtb2RlXG4gIGNvbnNvbGUuZ3JvdXAoJ/CflI0gRW52aXJvbm1lbnQgVmFyaWFibGVzIFN0YXR1cycpO1xuICBcbiAgY29uc29sZS5sb2coYEVudmlyb25tZW50OiAke3Byb2Nlc3MuZW52Lk5PREVfRU5WfWApO1xuICBjb25zb2xlLmxvZyhgSXMgTG9jYWxob3N0OiAke2lzTG9jYWxob3N0fWApO1xuICBjb25zb2xlLmxvZyhgTW9kZTogJHtpc0RldiA/ICdEZXZlbG9wbWVudCcgOiAnUHJvZHVjdGlvbid9YCk7XG4gIGNvbnNvbGUubG9nKGBDb25maWcgc291cmNlOiAke2lzTG9jYWxob3N0ID8gJy5lbnYubG9jYWwnIDogKGlzRGV2ID8gJ2ZpcmViYXNlQ29uZmlncycgOiAnTmV0bGlmeScpfWApO1xuICBcbiAgaWYgKGlzRGV2KSB7XG4gICAgY29uc29sZS5sb2coJ0RldmVsb3BtZW50IHZhcmlhYmxlcyBhdmFpbGFibGU6JywgZW52Q2hlY2suZGV2ZWxvcG1lbnQpO1xuICAgIGNvbnNvbGUubG9nKCdVc2luZyBwcm9qZWN0IElEOicsIGVudkNoZWNrLnByb2plY3RJZHMuZGV2ZWxvcG1lbnQpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKCdQcm9kdWN0aW9uIHZhcmlhYmxlcyBhdmFpbGFibGU6JywgZW52Q2hlY2sucHJvZHVjdGlvbik7XG4gICAgY29uc29sZS5sb2coJ1VzaW5nIHByb2plY3QgSUQ6JywgZW52Q2hlY2sucHJvamVjdElkcy5wcm9kdWN0aW9uKTtcbiAgfVxuICBcbiAgY29uc29sZS5ncm91cEVuZCgpO1xuXG4gIHJldHVybiB7XG4gICAgaXNMb2NhbGhvc3QsXG4gICAgaXNEZXYsXG4gICAgY29uZmlnU291cmNlOiBpc0xvY2FsaG9zdCA/ICcuZW52LmxvY2FsJyA6IChpc0RldiA/ICdmaXJlYmFzZUNvbmZpZ3MnIDogJ05ldGxpZnknKSxcbiAgICB2YXJpYWJsZXM6IGlzRGV2ID8gZW52Q2hlY2suZGV2ZWxvcG1lbnQgOiBlbnZDaGVjay5wcm9kdWN0aW9uLFxuICAgIHByb2plY3RJZDogaXNEZXYgPyBlbnZDaGVjay5wcm9qZWN0SWRzLmRldmVsb3BtZW50IDogZW52Q2hlY2sucHJvamVjdElkcy5wcm9kdWN0aW9uXG4gIH07XG59O1xuXG4vLyBBZGQgdG8gd2luZG93IG9iamVjdCBmb3IgZWFzeSBjb25zb2xlIGFjY2VzcyBkdXJpbmcgZGV2ZWxvcG1lbnRcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAvLyBAdHMtaWdub3JlXG4gIHdpbmRvdy5kZWJ1Z0VudiA9IGxvZ0VudlN0YXR1cztcbiAgY29uc29sZS5sb2coJ/Cfm6DvuI8gRW52aXJvbm1lbnQgZGVidWcgaGVscGVyIGF2YWlsYWJsZSEgUnVuIHdpbmRvdy5kZWJ1Z0VudigpIGluIGNvbnNvbGUgdG8gY2hlY2sgZW52aXJvbm1lbnQgdmFyaWFibGVzLicpO1xufSAiXSwibmFtZXMiOlsibG9nRW52U3RhdHVzIiwicHJvY2VzcyIsImNvbnNvbGUiLCJ3YXJuIiwiaXNMb2NhbGhvc3QiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhvc3RuYW1lIiwiaXNEZXYiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiZW52Q2hlY2siLCJwcm9kdWN0aW9uIiwiTkVYVF9QVUJMSUNfRklSRUJBU0VfQVBJX0tFWSIsImVudiIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FVVEhfRE9NQUlOIiwiTkVYVF9QVUJMSUNfRklSRUJBU0VfUFJPSkVDVF9JRCIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX1NUT1JBR0VfQlVDS0VUIiwiTkVYVF9QVUJMSUNfRklSRUJBU0VfTUVTU0FHSU5HX1NFTkRFUl9JRCIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQUF9JRCIsImRldmVsb3BtZW50IiwiTkVYVF9QVUJMSUNfREVWX0ZJUkVCQVNFX0FQSV9LRVkiLCJORVhUX1BVQkxJQ19ERVZfRklSRUJBU0VfQVVUSF9ET01BSU4iLCJORVhUX1BVQkxJQ19ERVZfRklSRUJBU0VfUFJPSkVDVF9JRCIsIk5FWFRfUFVCTElDX0RFVl9GSVJFQkFTRV9TVE9SQUdFX0JVQ0tFVCIsIk5FWFRfUFVCTElDX0RFVl9GSVJFQkFTRV9NRVNTQUdJTkdfU0VOREVSX0lEIiwiTkVYVF9QVUJMSUNfREVWX0ZJUkVCQVNFX0FQUF9JRCIsInByb2plY3RJZHMiLCJncm91cCIsImxvZyIsImdyb3VwRW5kIiwiY29uZmlnU291cmNlIiwidmFyaWFibGVzIiwicHJvamVjdElkIiwiZGVidWdFbnYiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/utils/envDebug.ts\n");

/***/ }),

/***/ "./src/utils/formatDate.ts":
/*!*********************************!*\
  !*** ./src/utils/formatDate.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertFirestoreTimestamp: () => (/* binding */ convertFirestoreTimestamp),\n/* harmony export */   dateToUnixTimestamp: () => (/* binding */ dateToUnixTimestamp),\n/* harmony export */   formatDate: () => (/* binding */ formatDate)\n/* harmony export */ });\nconst convertFirestoreTimestamp = (timestamp)=>{\n    // Check if it's a Firestore Timestamp object first\n    if (timestamp && typeof timestamp.toDate === \"function\") {\n        return timestamp.toDate();\n    }\n    // If null or undefined, return the current date.\n    if (timestamp == null) return new Date();\n    // If it's already a Date, return it.\n    if (timestamp instanceof Date) return timestamp;\n    // Convert to number if it's a string (using parseFloat preserves decimals).\n    const numTimestamp = typeof timestamp === \"string\" ? parseFloat(timestamp) : timestamp;\n    // Check if conversion resulted in a valid number\n    if (typeof numTimestamp !== \"number\" || isNaN(numTimestamp)) {\n        console.warn(\"convertFirestoreTimestamp received an invalid non-numeric, non-date value:\", timestamp);\n        return new Date();\n    }\n    // If the timestamp looks like seconds (less than 10 billion), convert to milliseconds.\n    if (numTimestamp < 10000000000) {\n        return new Date(numTimestamp * 1000);\n    }\n    // Otherwise, assume it's in milliseconds.\n    return new Date(numTimestamp);\n};\nconst dateToUnixTimestamp = (date)=>{\n    // Add a check for invalid date\n    if (!(date instanceof Date) || isNaN(date.getTime())) {\n        console.warn(\"dateToUnixTimestamp received an invalid Date object\");\n        return Math.floor(Date.now() / 1000);\n    }\n    return Math.floor(date.getTime() / 1000);\n};\n/**\n * Format a date for display in the UI\n * @param date The date to format\n * @returns A string representation of the date (e.g., \"Jan 1, 2023\")\n */ const formatDate = (date)=>{\n    if (!(date instanceof Date) || isNaN(date.getTime())) {\n        console.warn(\"formatDate received an invalid Date object\");\n        return \"Invalid Date\";\n    }\n    return date.toLocaleDateString(\"en-US\", {\n        month: \"short\",\n        day: \"numeric\",\n        year: \"numeric\"\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvZm9ybWF0RGF0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBTyxNQUFNQSw0QkFBNEIsQ0FDdkNDO0lBRUEsbURBQW1EO0lBQ25ELElBQUlBLGFBQWEsT0FBT0EsVUFBVUMsTUFBTSxLQUFLLFlBQVk7UUFDdkQsT0FBT0QsVUFBVUMsTUFBTTtJQUN6QjtJQUVBLGlEQUFpRDtJQUNqRCxJQUFJRCxhQUFhLE1BQU0sT0FBTyxJQUFJRTtJQUVsQyxxQ0FBcUM7SUFDckMsSUFBSUYscUJBQXFCRSxNQUFNLE9BQU9GO0lBRXRDLDRFQUE0RTtJQUM1RSxNQUFNRyxlQUNKLE9BQU9ILGNBQWMsV0FBV0ksV0FBV0osYUFBYUE7SUFFMUQsaURBQWlEO0lBQ2pELElBQUksT0FBT0csaUJBQWlCLFlBQVlFLE1BQU1GLGVBQWU7UUFDM0RHLFFBQVFDLElBQUksQ0FBQyw4RUFBOEVQO1FBQzNGLE9BQU8sSUFBSUU7SUFDYjtJQUVBLHVGQUF1RjtJQUN2RixJQUFJQyxlQUFlLGFBQWE7UUFDOUIsT0FBTyxJQUFJRCxLQUFLQyxlQUFlO0lBQ2pDO0lBRUEsMENBQTBDO0lBQzFDLE9BQU8sSUFBSUQsS0FBS0M7QUFDbEIsRUFBRTtBQUVLLE1BQU1LLHNCQUFzQixDQUFDQztJQUNsQywrQkFBK0I7SUFDL0IsSUFBSSxDQUFFQSxDQUFBQSxnQkFBZ0JQLElBQUcsS0FBTUcsTUFBTUksS0FBS0MsT0FBTyxLQUFLO1FBQ2xESixRQUFRQyxJQUFJLENBQUM7UUFDYixPQUFPSSxLQUFLQyxLQUFLLENBQUNWLEtBQUtXLEdBQUcsS0FBSztJQUNuQztJQUNBLE9BQU9GLEtBQUtDLEtBQUssQ0FBQ0gsS0FBS0MsT0FBTyxLQUFLO0FBQ3JDLEVBQUU7QUFFRjs7OztDQUlDLEdBQ00sTUFBTUksYUFBYSxDQUFDTDtJQUN6QixJQUFJLENBQUVBLENBQUFBLGdCQUFnQlAsSUFBRyxLQUFNRyxNQUFNSSxLQUFLQyxPQUFPLEtBQUs7UUFDcERKLFFBQVFDLElBQUksQ0FBQztRQUNiLE9BQU87SUFDVDtJQUVBLE9BQU9FLEtBQUtNLGtCQUFrQixDQUFDLFNBQVM7UUFDdENDLE9BQU87UUFDUEMsS0FBSztRQUNMQyxNQUFNO0lBQ1I7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktYXBwLy4vc3JjL3V0aWxzL2Zvcm1hdERhdGUudHM/YTM4MiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcCA9IChcbiAgdGltZXN0YW1wOiBhbnlcbik6IERhdGUgPT4ge1xuICAvLyBDaGVjayBpZiBpdCdzIGEgRmlyZXN0b3JlIFRpbWVzdGFtcCBvYmplY3QgZmlyc3RcbiAgaWYgKHRpbWVzdGFtcCAmJiB0eXBlb2YgdGltZXN0YW1wLnRvRGF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiB0aW1lc3RhbXAudG9EYXRlKCk7XG4gIH1cblxuICAvLyBJZiBudWxsIG9yIHVuZGVmaW5lZCwgcmV0dXJuIHRoZSBjdXJyZW50IGRhdGUuXG4gIGlmICh0aW1lc3RhbXAgPT0gbnVsbCkgcmV0dXJuIG5ldyBEYXRlKCk7XG5cbiAgLy8gSWYgaXQncyBhbHJlYWR5IGEgRGF0ZSwgcmV0dXJuIGl0LlxuICBpZiAodGltZXN0YW1wIGluc3RhbmNlb2YgRGF0ZSkgcmV0dXJuIHRpbWVzdGFtcDtcblxuICAvLyBDb252ZXJ0IHRvIG51bWJlciBpZiBpdCdzIGEgc3RyaW5nICh1c2luZyBwYXJzZUZsb2F0IHByZXNlcnZlcyBkZWNpbWFscykuXG4gIGNvbnN0IG51bVRpbWVzdGFtcCA9XG4gICAgdHlwZW9mIHRpbWVzdGFtcCA9PT0gJ3N0cmluZycgPyBwYXJzZUZsb2F0KHRpbWVzdGFtcCkgOiB0aW1lc3RhbXA7XG5cbiAgLy8gQ2hlY2sgaWYgY29udmVyc2lvbiByZXN1bHRlZCBpbiBhIHZhbGlkIG51bWJlclxuICBpZiAodHlwZW9mIG51bVRpbWVzdGFtcCAhPT0gJ251bWJlcicgfHwgaXNOYU4obnVtVGltZXN0YW1wKSkge1xuICAgIGNvbnNvbGUud2FybignY29udmVydEZpcmVzdG9yZVRpbWVzdGFtcCByZWNlaXZlZCBhbiBpbnZhbGlkIG5vbi1udW1lcmljLCBub24tZGF0ZSB2YWx1ZTonLCB0aW1lc3RhbXApO1xuICAgIHJldHVybiBuZXcgRGF0ZSgpO1xuICB9XG5cbiAgLy8gSWYgdGhlIHRpbWVzdGFtcCBsb29rcyBsaWtlIHNlY29uZHMgKGxlc3MgdGhhbiAxMCBiaWxsaW9uKSwgY29udmVydCB0byBtaWxsaXNlY29uZHMuXG4gIGlmIChudW1UaW1lc3RhbXAgPCAxMDAwMDAwMDAwMCkge1xuICAgIHJldHVybiBuZXcgRGF0ZShudW1UaW1lc3RhbXAgKiAxMDAwKTtcbiAgfVxuXG4gIC8vIE90aGVyd2lzZSwgYXNzdW1lIGl0J3MgaW4gbWlsbGlzZWNvbmRzLlxuICByZXR1cm4gbmV3IERhdGUobnVtVGltZXN0YW1wKTtcbn07XG5cbmV4cG9ydCBjb25zdCBkYXRlVG9Vbml4VGltZXN0YW1wID0gKGRhdGU6IERhdGUpOiBudW1iZXIgPT4ge1xuICAvLyBBZGQgYSBjaGVjayBmb3IgaW52YWxpZCBkYXRlXG4gIGlmICghKGRhdGUgaW5zdGFuY2VvZiBEYXRlKSB8fCBpc05hTihkYXRlLmdldFRpbWUoKSkpIHtcbiAgICAgIGNvbnNvbGUud2FybignZGF0ZVRvVW5peFRpbWVzdGFtcCByZWNlaXZlZCBhbiBpbnZhbGlkIERhdGUgb2JqZWN0Jyk7XG4gICAgICByZXR1cm4gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCk7XG4gIH1cbiAgcmV0dXJuIE1hdGguZmxvb3IoZGF0ZS5nZXRUaW1lKCkgLyAxMDAwKTtcbn07XG5cbi8qKlxuICogRm9ybWF0IGEgZGF0ZSBmb3IgZGlzcGxheSBpbiB0aGUgVUlcbiAqIEBwYXJhbSBkYXRlIFRoZSBkYXRlIHRvIGZvcm1hdFxuICogQHJldHVybnMgQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGRhdGUgKGUuZy4sIFwiSmFuIDEsIDIwMjNcIilcbiAqL1xuZXhwb3J0IGNvbnN0IGZvcm1hdERhdGUgPSAoZGF0ZTogRGF0ZSk6IHN0cmluZyA9PiB7XG4gIGlmICghKGRhdGUgaW5zdGFuY2VvZiBEYXRlKSB8fCBpc05hTihkYXRlLmdldFRpbWUoKSkpIHtcbiAgICBjb25zb2xlLndhcm4oJ2Zvcm1hdERhdGUgcmVjZWl2ZWQgYW4gaW52YWxpZCBEYXRlIG9iamVjdCcpO1xuICAgIHJldHVybiAnSW52YWxpZCBEYXRlJztcbiAgfVxuICBcbiAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIHtcbiAgICBtb250aDogJ3Nob3J0JyxcbiAgICBkYXk6ICdudW1lcmljJyxcbiAgICB5ZWFyOiAnbnVtZXJpYydcbiAgfSk7XG59OyJdLCJuYW1lcyI6WyJjb252ZXJ0RmlyZXN0b3JlVGltZXN0YW1wIiwidGltZXN0YW1wIiwidG9EYXRlIiwiRGF0ZSIsIm51bVRpbWVzdGFtcCIsInBhcnNlRmxvYXQiLCJpc05hTiIsImNvbnNvbGUiLCJ3YXJuIiwiZGF0ZVRvVW5peFRpbWVzdGFtcCIsImRhdGUiLCJnZXRUaW1lIiwiTWF0aCIsImZsb29yIiwibm93IiwiZm9ybWF0RGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsIm1vbnRoIiwiZGF5IiwieWVhciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/utils/formatDate.ts\n");

/***/ }),

/***/ "./src/utils/stringUtils.ts":
/*!**********************************!*\
  !*** ./src/utils/stringUtils.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   capitalizeWords: () => (/* binding */ capitalizeWords),\n/* harmony export */   formatExerciseNameForId: () => (/* binding */ formatExerciseNameForId)\n/* harmony export */ });\n/**\n * Utility functions for string formatting\n */ /**\n * Capitalizes first letter of each word in a string\n * Used for consistent exercise name formatting\n * \n * @param text The string to capitalize\n * @returns The capitalized string\n */ function capitalizeWords(text) {\n    if (!text) return \"\";\n    return text.trim().split(\" \").map((word)=>word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()).join(\" \");\n}\n/**\n * Formats an exercise name consistently for use as a document ID\n * \n * @param exerciseName The exercise name to format\n * @returns The formatted exercise name\n */ function formatExerciseNameForId(exerciseName) {\n    return capitalizeWords(exerciseName);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvc3RyaW5nVXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTs7Q0FFQyxHQUVEOzs7Ozs7Q0FNQyxHQUNNLFNBQVNBLGdCQUFnQkMsSUFBWTtJQUMxQyxJQUFJLENBQUNBLE1BQU0sT0FBTztJQUVsQixPQUFPQSxLQUNKQyxJQUFJLEdBQ0pDLEtBQUssQ0FBQyxLQUNOQyxHQUFHLENBQUNDLENBQUFBLE9BQVFBLEtBQUtDLE1BQU0sQ0FBQyxHQUFHQyxXQUFXLEtBQUtGLEtBQUtHLEtBQUssQ0FBQyxHQUFHQyxXQUFXLElBQ3BFQyxJQUFJLENBQUM7QUFDVjtBQUVBOzs7OztDQUtDLEdBQ00sU0FBU0Msd0JBQXdCQyxZQUFvQjtJQUMxRCxPQUFPWixnQkFBZ0JZO0FBQ3pCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktYXBwLy4vc3JjL3V0aWxzL3N0cmluZ1V0aWxzLnRzPzY4NjEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBmb3Igc3RyaW5nIGZvcm1hdHRpbmdcbiAqL1xuXG4vKipcbiAqIENhcGl0YWxpemVzIGZpcnN0IGxldHRlciBvZiBlYWNoIHdvcmQgaW4gYSBzdHJpbmdcbiAqIFVzZWQgZm9yIGNvbnNpc3RlbnQgZXhlcmNpc2UgbmFtZSBmb3JtYXR0aW5nXG4gKiBcbiAqIEBwYXJhbSB0ZXh0IFRoZSBzdHJpbmcgdG8gY2FwaXRhbGl6ZVxuICogQHJldHVybnMgVGhlIGNhcGl0YWxpemVkIHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gY2FwaXRhbGl6ZVdvcmRzKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmICghdGV4dCkgcmV0dXJuICcnO1xuICBcbiAgcmV0dXJuIHRleHRcbiAgICAudHJpbSgpXG4gICAgLnNwbGl0KCcgJylcbiAgICAubWFwKHdvcmQgPT4gd29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmQuc2xpY2UoMSkudG9Mb3dlckNhc2UoKSlcbiAgICAuam9pbignICcpO1xufVxuXG4vKipcbiAqIEZvcm1hdHMgYW4gZXhlcmNpc2UgbmFtZSBjb25zaXN0ZW50bHkgZm9yIHVzZSBhcyBhIGRvY3VtZW50IElEXG4gKiBcbiAqIEBwYXJhbSBleGVyY2lzZU5hbWUgVGhlIGV4ZXJjaXNlIG5hbWUgdG8gZm9ybWF0XG4gKiBAcmV0dXJucyBUaGUgZm9ybWF0dGVkIGV4ZXJjaXNlIG5hbWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEV4ZXJjaXNlTmFtZUZvcklkKGV4ZXJjaXNlTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIGNhcGl0YWxpemVXb3JkcyhleGVyY2lzZU5hbWUpO1xufSAiXSwibmFtZXMiOlsiY2FwaXRhbGl6ZVdvcmRzIiwidGV4dCIsInRyaW0iLCJzcGxpdCIsIm1hcCIsIndvcmQiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwidG9Mb3dlckNhc2UiLCJqb2luIiwiZm9ybWF0RXhlcmNpc2VOYW1lRm9ySWQiLCJleGVyY2lzZU5hbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/utils/stringUtils.ts\n");

/***/ }),

/***/ "./src/utils/timestamp.ts":
/*!********************************!*\
  !*** ./src/utils/timestamp.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertTimestamp: () => (/* binding */ convertTimestamp),\n/* harmony export */   serverTimestamp: () => (/* binding */ serverTimestamp),\n/* harmony export */   timestampToNumeric: () => (/* binding */ timestampToNumeric)\n/* harmony export */ });\n/**\n * Converts various timestamp formats to an ISO string.\n * @param timestamp - The timestamp to be converted.\n * @returns The ISO string representation of the date or `null` if invalid.\n */ const convertTimestamp = (timestamp)=>{\n    if (!timestamp) return null;\n    if (timestamp._seconds) return new Date(timestamp._seconds * 1000).toISOString(); // Firestore proto\n    if (timestamp.seconds) return new Date(timestamp.seconds * 1000).toISOString(); // Firestore `seconds`\n    if (timestamp.toDate && typeof timestamp.toDate === \"function\") return timestamp.toDate().toISOString(); // Firestore `Timestamp`\n    if (timestamp instanceof Date) return timestamp.toISOString(); // Native Date object\n    return null;\n};\nconst serverTimestamp = ()=>{\n    return Date.now() / 1000; // Convert milliseconds to seconds\n};\n/**\n   * Converts a timestamp to its numeric representation in seconds since epoch\n   * @param timestamp - The timestamp to convert\n   * @returns Numeric representation in seconds\n   */ const timestampToNumeric = (timestamp)=>{\n    if (!timestamp) return serverTimestamp();\n    if (timestamp._seconds) return timestamp._seconds; // Firestore proto\n    if (timestamp.seconds) return timestamp.seconds; // Firestore `seconds`\n    if (timestamp.toDate && typeof timestamp.toDate === \"function\") {\n        return Math.floor(timestamp.toDate().getTime() / 1000); // Firestore `Timestamp`\n    }\n    if (timestamp instanceof Date) return Math.floor(timestamp.getTime() / 1000); // Native Date object\n    return serverTimestamp();\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvdGltZXN0YW1wLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7O0NBSUMsR0FDTSxNQUFNQSxtQkFBbUIsQ0FBQ0M7SUFDN0IsSUFBSSxDQUFDQSxXQUFXLE9BQU87SUFDdkIsSUFBSUEsVUFBVUMsUUFBUSxFQUFFLE9BQU8sSUFBSUMsS0FBS0YsVUFBVUMsUUFBUSxHQUFHLE1BQU1FLFdBQVcsSUFBSSxrQkFBa0I7SUFDcEcsSUFBSUgsVUFBVUksT0FBTyxFQUFFLE9BQU8sSUFBSUYsS0FBS0YsVUFBVUksT0FBTyxHQUFHLE1BQU1ELFdBQVcsSUFBSyxzQkFBc0I7SUFDdkcsSUFBSUgsVUFBVUssTUFBTSxJQUFJLE9BQU9MLFVBQVVLLE1BQU0sS0FBSyxZQUFZLE9BQU9MLFVBQVVLLE1BQU0sR0FBR0YsV0FBVyxJQUFJLHdCQUF3QjtJQUNqSSxJQUFJSCxxQkFBcUJFLE1BQU0sT0FBT0YsVUFBVUcsV0FBVyxJQUFJLHFCQUFxQjtJQUNwRixPQUFPO0FBQ1QsRUFBRTtBQUVLLE1BQU1HLGtCQUFrQjtJQUM3QixPQUFPSixLQUFLSyxHQUFHLEtBQUssTUFBTSxrQ0FBa0M7QUFDOUQsRUFBRTtBQUVGOzs7O0dBSUMsR0FDTSxNQUFNQyxxQkFBcUIsQ0FBQ1I7SUFDakMsSUFBSSxDQUFDQSxXQUFXLE9BQU9NO0lBRXZCLElBQUlOLFVBQVVDLFFBQVEsRUFBRSxPQUFPRCxVQUFVQyxRQUFRLEVBQUUsa0JBQWtCO0lBQ3JFLElBQUlELFVBQVVJLE9BQU8sRUFBRSxPQUFPSixVQUFVSSxPQUFPLEVBQUksc0JBQXNCO0lBQ3pFLElBQUlKLFVBQVVLLE1BQU0sSUFBSSxPQUFPTCxVQUFVSyxNQUFNLEtBQUssWUFBWTtRQUM5RCxPQUFPSSxLQUFLQyxLQUFLLENBQUNWLFVBQVVLLE1BQU0sR0FBR00sT0FBTyxLQUFLLE9BQVEsd0JBQXdCO0lBQ25GO0lBQ0EsSUFBSVgscUJBQXFCRSxNQUFNLE9BQU9PLEtBQUtDLEtBQUssQ0FBQ1YsVUFBVVcsT0FBTyxLQUFLLE9BQU8scUJBQXFCO0lBRW5HLE9BQU9MO0FBQ1QsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL215LWFwcC8uL3NyYy91dGlscy90aW1lc3RhbXAudHM/NmJiNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbnZlcnRzIHZhcmlvdXMgdGltZXN0YW1wIGZvcm1hdHMgdG8gYW4gSVNPIHN0cmluZy5cbiAqIEBwYXJhbSB0aW1lc3RhbXAgLSBUaGUgdGltZXN0YW1wIHRvIGJlIGNvbnZlcnRlZC5cbiAqIEByZXR1cm5zIFRoZSBJU08gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBkYXRlIG9yIGBudWxsYCBpZiBpbnZhbGlkLlxuICovXG5leHBvcnQgY29uc3QgY29udmVydFRpbWVzdGFtcCA9ICh0aW1lc3RhbXA6IGFueSk6IHN0cmluZyB8IG51bGwgPT4ge1xuICAgIGlmICghdGltZXN0YW1wKSByZXR1cm4gbnVsbDtcbiAgICBpZiAodGltZXN0YW1wLl9zZWNvbmRzKSByZXR1cm4gbmV3IERhdGUodGltZXN0YW1wLl9zZWNvbmRzICogMTAwMCkudG9JU09TdHJpbmcoKTsgLy8gRmlyZXN0b3JlIHByb3RvXG4gICAgaWYgKHRpbWVzdGFtcC5zZWNvbmRzKSByZXR1cm4gbmV3IERhdGUodGltZXN0YW1wLnNlY29uZHMgKiAxMDAwKS50b0lTT1N0cmluZygpOyAgLy8gRmlyZXN0b3JlIGBzZWNvbmRzYFxuICAgIGlmICh0aW1lc3RhbXAudG9EYXRlICYmIHR5cGVvZiB0aW1lc3RhbXAudG9EYXRlID09PSAnZnVuY3Rpb24nKSByZXR1cm4gdGltZXN0YW1wLnRvRGF0ZSgpLnRvSVNPU3RyaW5nKCk7IC8vIEZpcmVzdG9yZSBgVGltZXN0YW1wYFxuICAgIGlmICh0aW1lc3RhbXAgaW5zdGFuY2VvZiBEYXRlKSByZXR1cm4gdGltZXN0YW1wLnRvSVNPU3RyaW5nKCk7IC8vIE5hdGl2ZSBEYXRlIG9iamVjdFxuICAgIHJldHVybiBudWxsO1xuICB9O1xuICBcbiAgZXhwb3J0IGNvbnN0IHNlcnZlclRpbWVzdGFtcCA9ICgpOiBudW1iZXIgPT4ge1xuICAgIHJldHVybiBEYXRlLm5vdygpIC8gMTAwMDsgLy8gQ29udmVydCBtaWxsaXNlY29uZHMgdG8gc2Vjb25kc1xuICB9O1xuICBcbiAgLyoqXG4gICAqIENvbnZlcnRzIGEgdGltZXN0YW1wIHRvIGl0cyBudW1lcmljIHJlcHJlc2VudGF0aW9uIGluIHNlY29uZHMgc2luY2UgZXBvY2hcbiAgICogQHBhcmFtIHRpbWVzdGFtcCAtIFRoZSB0aW1lc3RhbXAgdG8gY29udmVydFxuICAgKiBAcmV0dXJucyBOdW1lcmljIHJlcHJlc2VudGF0aW9uIGluIHNlY29uZHNcbiAgICovXG4gIGV4cG9ydCBjb25zdCB0aW1lc3RhbXBUb051bWVyaWMgPSAodGltZXN0YW1wPzogRGF0ZSB8IGFueSk6IG51bWJlciA9PiB7XG4gICAgaWYgKCF0aW1lc3RhbXApIHJldHVybiBzZXJ2ZXJUaW1lc3RhbXAoKTtcbiAgICBcbiAgICBpZiAodGltZXN0YW1wLl9zZWNvbmRzKSByZXR1cm4gdGltZXN0YW1wLl9zZWNvbmRzOyAvLyBGaXJlc3RvcmUgcHJvdG9cbiAgICBpZiAodGltZXN0YW1wLnNlY29uZHMpIHJldHVybiB0aW1lc3RhbXAuc2Vjb25kczsgICAvLyBGaXJlc3RvcmUgYHNlY29uZHNgXG4gICAgaWYgKHRpbWVzdGFtcC50b0RhdGUgJiYgdHlwZW9mIHRpbWVzdGFtcC50b0RhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBNYXRoLmZsb29yKHRpbWVzdGFtcC50b0RhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTsgIC8vIEZpcmVzdG9yZSBgVGltZXN0YW1wYFxuICAgIH1cbiAgICBpZiAodGltZXN0YW1wIGluc3RhbmNlb2YgRGF0ZSkgcmV0dXJuIE1hdGguZmxvb3IodGltZXN0YW1wLmdldFRpbWUoKSAvIDEwMDApOyAvLyBOYXRpdmUgRGF0ZSBvYmplY3RcbiAgICBcbiAgICByZXR1cm4gc2VydmVyVGltZXN0YW1wKCk7XG4gIH07Il0sIm5hbWVzIjpbImNvbnZlcnRUaW1lc3RhbXAiLCJ0aW1lc3RhbXAiLCJfc2Vjb25kcyIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInNlY29uZHMiLCJ0b0RhdGUiLCJzZXJ2ZXJUaW1lc3RhbXAiLCJub3ciLCJ0aW1lc3RhbXBUb051bWVyaWMiLCJNYXRoIiwiZmxvb3IiLCJnZXRUaW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/utils/timestamp.ts\n");

/***/ }),

/***/ "./src/components/Footer/GlisteningButton.css":
/*!****************************************************!*\
  !*** ./src/components/Footer/GlisteningButton.css ***!
  \****************************************************/
/***/ (() => {



/***/ }),

/***/ "./src/index.css":
/*!***********************!*\
  !*** ./src/index.css ***!
  \***********************/
/***/ (() => {



/***/ }),

/***/ "./src/styles/animations.css":
/*!***********************************!*\
  !*** ./src/styles/animations.css ***!
  \***********************************/
/***/ (() => {



/***/ }),

/***/ "mixpanel-browser":
/*!***********************************!*\
  !*** external "mixpanel-browser" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("mixpanel-browser");

/***/ }),

/***/ "next/dist/compiled/next-server/pages.runtime.dev.js":
/*!**********************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages.runtime.dev.js" ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/pages.runtime.dev.js");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react-dom":
/*!****************************!*\
  !*** external "react-dom" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("react-dom");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "react/jsx-runtime":
/*!************************************!*\
  !*** external "react/jsx-runtime" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-runtime");

/***/ }),

/***/ "redux-persist":
/*!********************************!*\
  !*** external "redux-persist" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("redux-persist");

/***/ }),

/***/ "redux-persist-indexeddb-storage":
/*!**************************************************!*\
  !*** external "redux-persist-indexeddb-storage" ***!
  \**************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("redux-persist-indexeddb-storage");

/***/ }),

/***/ "redux-persist/integration/react":
/*!**************************************************!*\
  !*** external "redux-persist/integration/react" ***!
  \**************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("redux-persist/integration/react");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "@reduxjs/toolkit":
/*!***********************************!*\
  !*** external "@reduxjs/toolkit" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = import("@reduxjs/toolkit");;

/***/ }),

/***/ "firebase/app":
/*!*******************************!*\
  !*** external "firebase/app" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = import("firebase/app");;

/***/ }),

/***/ "firebase/auth":
/*!********************************!*\
  !*** external "firebase/auth" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = import("firebase/auth");;

/***/ }),

/***/ "firebase/firestore":
/*!*************************************!*\
  !*** external "firebase/firestore" ***!
  \*************************************/
/***/ ((module) => {

"use strict";
module.exports = import("firebase/firestore");;

/***/ }),

/***/ "firebase/storage":
/*!***********************************!*\
  !*** external "firebase/storage" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = import("firebase/storage");;

/***/ }),

/***/ "react-redux":
/*!******************************!*\
  !*** external "react-redux" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = import("react-redux");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/date-fns","vendor-chunks/lucide-react"], () => (__webpack_exec__("./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2Fadmin%2FNotificationLogs&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fadmin%2FNotificationLogs.tsx&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();